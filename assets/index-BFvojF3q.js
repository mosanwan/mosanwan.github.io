function qN(t,e){for(var n=0;n<e.length;n++){const s=e[n];if(typeof s!="string"&&!Array.isArray(s)){for(const a in s)if(a!=="default"&&!(a in t)){const l=Object.getOwnPropertyDescriptor(s,a);l&&Object.defineProperty(t,a,l.get?l:{enumerable:!0,get:()=>s[a]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function n(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(a){if(a.ep)return;a.ep=!0;const l=n(a);fetch(a.href,l)}})();function Kd(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Yx(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var n=function s(){var a=!1;try{a=this instanceof s}catch{}return a?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(s){var a=Object.getOwnPropertyDescriptor(t,s);Object.defineProperty(n,s,a.get?a:{enumerable:!0,get:function(){return t[s]}})}),n}var Im={exports:{}},Qo={};var t_;function HN(){if(t_)return Qo;t_=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(s,a,l){var c=null;if(l!==void 0&&(c=""+l),a.key!==void 0&&(c=""+a.key),"key"in a){l={};for(var d in a)d!=="key"&&(l[d]=a[d])}else l=a;return a=l.ref,{$$typeof:t,type:s,key:c,ref:a!==void 0?a:null,props:l}}return Qo.Fragment=e,Qo.jsx=n,Qo.jsxs=n,Qo}var n_;function VN(){return n_||(n_=1,Im.exports=HN()),Im.exports}var _=VN(),Lm={exports:{}},ze={};var r_;function FN(){if(r_)return ze;r_=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),p=Symbol.for("react.activity"),v=Symbol.iterator;function b(M){return M===null||typeof M!="object"?null:(M=v&&M[v]||M["@@iterator"],typeof M=="function"?M:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,S={};function C(M,B,Q){this.props=M,this.context=B,this.refs=S,this.updater=Q||x}C.prototype.isReactComponent={},C.prototype.setState=function(M,B){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,B,"setState")},C.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function N(){}N.prototype=C.prototype;function E(M,B,Q){this.props=M,this.context=B,this.refs=S,this.updater=Q||x}var A=E.prototype=new N;A.constructor=E,w(A,C.prototype),A.isPureReactComponent=!0;var O=Array.isArray;function j(){}var D={H:null,A:null,T:null,S:null},$=Object.prototype.hasOwnProperty;function P(M,B,Q){var ee=Q.ref;return{$$typeof:t,type:M,key:B,ref:ee!==void 0?ee:null,props:Q}}function K(M,B){return P(M.type,B,M.props)}function G(M){return typeof M=="object"&&M!==null&&M.$$typeof===t}function L(M){var B={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(Q){return B[Q]})}var W=/\/+/g;function I(M,B){return typeof M=="object"&&M!==null&&M.key!=null?L(""+M.key):B.toString(36)}function Y(M){switch(M.status){case"fulfilled":return M.value;case"rejected":throw M.reason;default:switch(typeof M.status=="string"?M.then(j,j):(M.status="pending",M.then(function(B){M.status==="pending"&&(M.status="fulfilled",M.value=B)},function(B){M.status==="pending"&&(M.status="rejected",M.reason=B)})),M.status){case"fulfilled":return M.value;case"rejected":throw M.reason}}throw M}function k(M,B,Q,ee,he){var ge=typeof M;(ge==="undefined"||ge==="boolean")&&(M=null);var ae=!1;if(M===null)ae=!0;else switch(ge){case"bigint":case"string":case"number":ae=!0;break;case"object":switch(M.$$typeof){case t:case e:ae=!0;break;case g:return ae=M._init,k(ae(M._payload),B,Q,ee,he)}}if(ae)return he=he(M),ae=ee===""?"."+I(M,0):ee,O(he)?(Q="",ae!=null&&(Q=ae.replace(W,"$&/")+"/"),k(he,B,Q,"",function(fe){return fe})):he!=null&&(G(he)&&(he=K(he,Q+(he.key==null||M&&M.key===he.key?"":(""+he.key).replace(W,"$&/")+"/")+ae)),B.push(he)),1;ae=0;var le=ee===""?".":ee+":";if(O(M))for(var Z=0;Z<M.length;Z++)ee=M[Z],ge=le+I(ee,Z),ae+=k(ee,B,Q,ge,he);else if(Z=b(M),typeof Z=="function")for(M=Z.call(M),Z=0;!(ee=M.next()).done;)ee=ee.value,ge=le+I(ee,Z++),ae+=k(ee,B,Q,ge,he);else if(ge==="object"){if(typeof M.then=="function")return k(Y(M),B,Q,ee,he);throw B=String(M),Error("Objects are not valid as a React child (found: "+(B==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":B)+"). If you meant to render a collection of children, use an array instead.")}return ae}function z(M,B,Q){if(M==null)return M;var ee=[],he=0;return k(M,ee,"","",function(ge){return B.call(Q,ge,he++)}),ee}function V(M){if(M._status===-1){var B=M._result;B=B(),B.then(function(Q){(M._status===0||M._status===-1)&&(M._status=1,M._result=Q)},function(Q){(M._status===0||M._status===-1)&&(M._status=2,M._result=Q)}),M._status===-1&&(M._status=0,M._result=B)}if(M._status===1)return M._result.default;throw M._result}var q=typeof reportError=="function"?reportError:function(M){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var B=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof M=="object"&&M!==null&&typeof M.message=="string"?String(M.message):String(M),error:M});if(!window.dispatchEvent(B))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",M);return}console.error(M)},H={map:z,forEach:function(M,B,Q){z(M,function(){B.apply(this,arguments)},Q)},count:function(M){var B=0;return z(M,function(){B++}),B},toArray:function(M){return z(M,function(B){return B})||[]},only:function(M){if(!G(M))throw Error("React.Children.only expected to receive a single React element child.");return M}};return ze.Activity=p,ze.Children=H,ze.Component=C,ze.Fragment=n,ze.Profiler=a,ze.PureComponent=E,ze.StrictMode=s,ze.Suspense=f,ze.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=D,ze.__COMPILER_RUNTIME={__proto__:null,c:function(M){return D.H.useMemoCache(M)}},ze.cache=function(M){return function(){return M.apply(null,arguments)}},ze.cacheSignal=function(){return null},ze.cloneElement=function(M,B,Q){if(M==null)throw Error("The argument must be a React element, but you passed "+M+".");var ee=w({},M.props),he=M.key;if(B!=null)for(ge in B.key!==void 0&&(he=""+B.key),B)!$.call(B,ge)||ge==="key"||ge==="__self"||ge==="__source"||ge==="ref"&&B.ref===void 0||(ee[ge]=B[ge]);var ge=arguments.length-2;if(ge===1)ee.children=Q;else if(1<ge){for(var ae=Array(ge),le=0;le<ge;le++)ae[le]=arguments[le+2];ee.children=ae}return P(M.type,he,ee)},ze.createContext=function(M){return M={$$typeof:c,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null},M.Provider=M,M.Consumer={$$typeof:l,_context:M},M},ze.createElement=function(M,B,Q){var ee,he={},ge=null;if(B!=null)for(ee in B.key!==void 0&&(ge=""+B.key),B)$.call(B,ee)&&ee!=="key"&&ee!=="__self"&&ee!=="__source"&&(he[ee]=B[ee]);var ae=arguments.length-2;if(ae===1)he.children=Q;else if(1<ae){for(var le=Array(ae),Z=0;Z<ae;Z++)le[Z]=arguments[Z+2];he.children=le}if(M&&M.defaultProps)for(ee in ae=M.defaultProps,ae)he[ee]===void 0&&(he[ee]=ae[ee]);return P(M,ge,he)},ze.createRef=function(){return{current:null}},ze.forwardRef=function(M){return{$$typeof:d,render:M}},ze.isValidElement=G,ze.lazy=function(M){return{$$typeof:g,_payload:{_status:-1,_result:M},_init:V}},ze.memo=function(M,B){return{$$typeof:h,type:M,compare:B===void 0?null:B}},ze.startTransition=function(M){var B=D.T,Q={};D.T=Q;try{var ee=M(),he=D.S;he!==null&&he(Q,ee),typeof ee=="object"&&ee!==null&&typeof ee.then=="function"&&ee.then(j,q)}catch(ge){q(ge)}finally{B!==null&&Q.types!==null&&(B.types=Q.types),D.T=B}},ze.unstable_useCacheRefresh=function(){return D.H.useCacheRefresh()},ze.use=function(M){return D.H.use(M)},ze.useActionState=function(M,B,Q){return D.H.useActionState(M,B,Q)},ze.useCallback=function(M,B){return D.H.useCallback(M,B)},ze.useContext=function(M){return D.H.useContext(M)},ze.useDebugValue=function(){},ze.useDeferredValue=function(M,B){return D.H.useDeferredValue(M,B)},ze.useEffect=function(M,B){return D.H.useEffect(M,B)},ze.useEffectEvent=function(M){return D.H.useEffectEvent(M)},ze.useId=function(){return D.H.useId()},ze.useImperativeHandle=function(M,B,Q){return D.H.useImperativeHandle(M,B,Q)},ze.useInsertionEffect=function(M,B){return D.H.useInsertionEffect(M,B)},ze.useLayoutEffect=function(M,B){return D.H.useLayoutEffect(M,B)},ze.useMemo=function(M,B){return D.H.useMemo(M,B)},ze.useOptimistic=function(M,B){return D.H.useOptimistic(M,B)},ze.useReducer=function(M,B,Q){return D.H.useReducer(M,B,Q)},ze.useRef=function(M){return D.H.useRef(M)},ze.useState=function(M){return D.H.useState(M)},ze.useSyncExternalStore=function(M,B,Q){return D.H.useSyncExternalStore(M,B,Q)},ze.useTransition=function(){return D.H.useTransition()},ze.version="19.2.0",ze}var s_;function Gl(){return s_||(s_=1,Lm.exports=FN()),Lm.exports}var R=Gl();const YN=Kd(R);var zm={exports:{}},Wo={},Bm={exports:{}},Pm={};var i_;function GN(){return i_||(i_=1,(function(t){function e(k,z){var V=k.length;k.push(z);e:for(;0<V;){var q=V-1>>>1,H=k[q];if(0<a(H,z))k[q]=z,k[V]=H,V=q;else break e}}function n(k){return k.length===0?null:k[0]}function s(k){if(k.length===0)return null;var z=k[0],V=k.pop();if(V!==z){k[0]=V;e:for(var q=0,H=k.length,M=H>>>1;q<M;){var B=2*(q+1)-1,Q=k[B],ee=B+1,he=k[ee];if(0>a(Q,V))ee<H&&0>a(he,Q)?(k[q]=he,k[ee]=V,q=ee):(k[q]=Q,k[B]=V,q=B);else if(ee<H&&0>a(he,V))k[q]=he,k[ee]=V,q=ee;else break e}}return z}function a(k,z){var V=k.sortIndex-z.sortIndex;return V!==0?V:k.id-z.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;t.unstable_now=function(){return l.now()}}else{var c=Date,d=c.now();t.unstable_now=function(){return c.now()-d}}var f=[],h=[],g=1,p=null,v=3,b=!1,x=!1,w=!1,S=!1,C=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;function A(k){for(var z=n(h);z!==null;){if(z.callback===null)s(h);else if(z.startTime<=k)s(h),z.sortIndex=z.expirationTime,e(f,z);else break;z=n(h)}}function O(k){if(w=!1,A(k),!x)if(n(f)!==null)x=!0,j||(j=!0,L());else{var z=n(h);z!==null&&Y(O,z.startTime-k)}}var j=!1,D=-1,$=5,P=-1;function K(){return S?!0:!(t.unstable_now()-P<$)}function G(){if(S=!1,j){var k=t.unstable_now();P=k;var z=!0;try{e:{x=!1,w&&(w=!1,N(D),D=-1),b=!0;var V=v;try{t:{for(A(k),p=n(f);p!==null&&!(p.expirationTime>k&&K());){var q=p.callback;if(typeof q=="function"){p.callback=null,v=p.priorityLevel;var H=q(p.expirationTime<=k);if(k=t.unstable_now(),typeof H=="function"){p.callback=H,A(k),z=!0;break t}p===n(f)&&s(f),A(k)}else s(f);p=n(f)}if(p!==null)z=!0;else{var M=n(h);M!==null&&Y(O,M.startTime-k),z=!1}}break e}finally{p=null,v=V,b=!1}z=void 0}}finally{z?L():j=!1}}}var L;if(typeof E=="function")L=function(){E(G)};else if(typeof MessageChannel<"u"){var W=new MessageChannel,I=W.port2;W.port1.onmessage=G,L=function(){I.postMessage(null)}}else L=function(){C(G,0)};function Y(k,z){D=C(function(){k(t.unstable_now())},z)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(k){k.callback=null},t.unstable_forceFrameRate=function(k){0>k||125<k?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):$=0<k?Math.floor(1e3/k):5},t.unstable_getCurrentPriorityLevel=function(){return v},t.unstable_next=function(k){switch(v){case 1:case 2:case 3:var z=3;break;default:z=v}var V=v;v=z;try{return k()}finally{v=V}},t.unstable_requestPaint=function(){S=!0},t.unstable_runWithPriority=function(k,z){switch(k){case 1:case 2:case 3:case 4:case 5:break;default:k=3}var V=v;v=k;try{return z()}finally{v=V}},t.unstable_scheduleCallback=function(k,z,V){var q=t.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?q+V:q):V=q,k){case 1:var H=-1;break;case 2:H=250;break;case 5:H=1073741823;break;case 4:H=1e4;break;default:H=5e3}return H=V+H,k={id:g++,callback:z,priorityLevel:k,startTime:V,expirationTime:H,sortIndex:-1},V>q?(k.sortIndex=V,e(h,k),n(f)===null&&k===n(h)&&(w?(N(D),D=-1):w=!0,Y(O,V-q))):(k.sortIndex=H,e(f,k),x||b||(x=!0,j||(j=!0,L()))),k},t.unstable_shouldYield=K,t.unstable_wrapCallback=function(k){var z=v;return function(){var V=v;v=z;try{return k.apply(this,arguments)}finally{v=V}}}})(Pm)),Pm}var a_;function XN(){return a_||(a_=1,Bm.exports=GN()),Bm.exports}var qm={exports:{}},Gt={};var o_;function KN(){if(o_)return Gt;o_=1;var t=Gl();function e(f){var h="https://react.dev/errors/"+f;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)h+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+f+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(f,h,g){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:p==null?null:""+p,children:f,containerInfo:h,implementation:g}}var c=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(f,h){if(f==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return Gt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Gt.createPortal=function(f,h){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return l(f,h,null,g)},Gt.flushSync=function(f){var h=c.T,g=s.p;try{if(c.T=null,s.p=2,f)return f()}finally{c.T=h,s.p=g,s.d.f()}},Gt.preconnect=function(f,h){typeof f=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,s.d.C(f,h))},Gt.prefetchDNS=function(f){typeof f=="string"&&s.d.D(f)},Gt.preinit=function(f,h){if(typeof f=="string"&&h&&typeof h.as=="string"){var g=h.as,p=d(g,h.crossOrigin),v=typeof h.integrity=="string"?h.integrity:void 0,b=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;g==="style"?s.d.S(f,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:p,integrity:v,fetchPriority:b}):g==="script"&&s.d.X(f,{crossOrigin:p,integrity:v,fetchPriority:b,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},Gt.preinitModule=function(f,h){if(typeof f=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var g=d(h.as,h.crossOrigin);s.d.M(f,{crossOrigin:g,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&s.d.M(f)},Gt.preload=function(f,h){if(typeof f=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var g=h.as,p=d(g,h.crossOrigin);s.d.L(f,g,{crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},Gt.preloadModule=function(f,h){if(typeof f=="string")if(h){var g=d(h.as,h.crossOrigin);s.d.m(f,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:g,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else s.d.m(f)},Gt.requestFormReset=function(f){s.d.r(f)},Gt.unstable_batchedUpdates=function(f,h){return f(h)},Gt.useFormState=function(f,h,g){return c.H.useFormState(f,h,g)},Gt.useFormStatus=function(){return c.H.useHostTransitionStatus()},Gt.version="19.2.0",Gt}var l_;function Gx(){if(l_)return qm.exports;l_=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),qm.exports=KN(),qm.exports}var c_;function QN(){if(c_)return Wo;c_=1;var t=XN(),e=Gl(),n=Gx();function s(r){var i="https://react.dev/errors/"+r;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)i+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+r+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function l(r){var i=r,o=r;if(r.alternate)for(;i.return;)i=i.return;else{r=i;do i=r,(i.flags&4098)!==0&&(o=i.return),r=i.return;while(r)}return i.tag===3?o:null}function c(r){if(r.tag===13){var i=r.memoizedState;if(i===null&&(r=r.alternate,r!==null&&(i=r.memoizedState)),i!==null)return i.dehydrated}return null}function d(r){if(r.tag===31){var i=r.memoizedState;if(i===null&&(r=r.alternate,r!==null&&(i=r.memoizedState)),i!==null)return i.dehydrated}return null}function f(r){if(l(r)!==r)throw Error(s(188))}function h(r){var i=r.alternate;if(!i){if(i=l(r),i===null)throw Error(s(188));return i!==r?null:r}for(var o=r,u=i;;){var m=o.return;if(m===null)break;var y=m.alternate;if(y===null){if(u=m.return,u!==null){o=u;continue}break}if(m.child===y.child){for(y=m.child;y;){if(y===o)return f(m),r;if(y===u)return f(m),i;y=y.sibling}throw Error(s(188))}if(o.return!==u.return)o=m,u=y;else{for(var T=!1,U=m.child;U;){if(U===o){T=!0,o=m,u=y;break}if(U===u){T=!0,u=m,o=y;break}U=U.sibling}if(!T){for(U=y.child;U;){if(U===o){T=!0,o=y,u=m;break}if(U===u){T=!0,u=y,o=m;break}U=U.sibling}if(!T)throw Error(s(189))}}if(o.alternate!==u)throw Error(s(190))}if(o.tag!==3)throw Error(s(188));return o.stateNode.current===o?r:i}function g(r){var i=r.tag;if(i===5||i===26||i===27||i===6)return r;for(r=r.child;r!==null;){if(i=g(r),i!==null)return i;r=r.sibling}return null}var p=Object.assign,v=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),x=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),N=Symbol.for("react.consumer"),E=Symbol.for("react.context"),A=Symbol.for("react.forward_ref"),O=Symbol.for("react.suspense"),j=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),$=Symbol.for("react.lazy"),P=Symbol.for("react.activity"),K=Symbol.for("react.memo_cache_sentinel"),G=Symbol.iterator;function L(r){return r===null||typeof r!="object"?null:(r=G&&r[G]||r["@@iterator"],typeof r=="function"?r:null)}var W=Symbol.for("react.client.reference");function I(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===W?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case w:return"Fragment";case C:return"Profiler";case S:return"StrictMode";case O:return"Suspense";case j:return"SuspenseList";case P:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case x:return"Portal";case E:return r.displayName||"Context";case N:return(r._context.displayName||"Context")+".Consumer";case A:var i=r.render;return r=r.displayName,r||(r=i.displayName||i.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case D:return i=r.displayName||null,i!==null?i:I(r.type)||"Memo";case $:i=r._payload,r=r._init;try{return I(r(i))}catch{}}return null}var Y=Array.isArray,k=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,z=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,V={pending:!1,data:null,method:null,action:null},q=[],H=-1;function M(r){return{current:r}}function B(r){0>H||(r.current=q[H],q[H]=null,H--)}function Q(r,i){H++,q[H]=r.current,r.current=i}var ee=M(null),he=M(null),ge=M(null),ae=M(null);function le(r,i){switch(Q(ge,i),Q(he,r),Q(ee,null),i.nodeType){case 9:case 11:r=(r=i.documentElement)&&(r=r.namespaceURI)?Eb(r):0;break;default:if(r=i.tagName,i=i.namespaceURI)i=Eb(i),r=Cb(i,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}B(ee),Q(ee,r)}function Z(){B(ee),B(he),B(ge)}function fe(r){r.memoizedState!==null&&Q(ae,r);var i=ee.current,o=Cb(i,r.type);i!==o&&(Q(he,r),Q(ee,o))}function pe(r){he.current===r&&(B(ee),B(he)),ae.current===r&&(B(ae),Yo._currentValue=V)}var ve,be;function De(r){if(ve===void 0)try{throw Error()}catch(o){var i=o.stack.trim().match(/\n( *(at )?)/);ve=i&&i[1]||"",be=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ve+r+be}var oe=!1;function _e(r,i){if(!r||oe)return"";oe=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(i){var de=function(){throw Error()};if(Object.defineProperty(de.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(de,[])}catch(ie){var se=ie}Reflect.construct(r,[],de)}else{try{de.call()}catch(ie){se=ie}r.call(de.prototype)}}else{try{throw Error()}catch(ie){se=ie}(de=r())&&typeof de.catch=="function"&&de.catch(function(){})}}catch(ie){if(ie&&se&&typeof ie.stack=="string")return[ie.stack,se.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var m=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");m&&m.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var y=u.DetermineComponentFrameRoot(),T=y[0],U=y[1];if(T&&U){var F=T.split(`
`),ne=U.split(`
`);for(m=u=0;u<F.length&&!F[u].includes("DetermineComponentFrameRoot");)u++;for(;m<ne.length&&!ne[m].includes("DetermineComponentFrameRoot");)m++;if(u===F.length||m===ne.length)for(u=F.length-1,m=ne.length-1;1<=u&&0<=m&&F[u]!==ne[m];)m--;for(;1<=u&&0<=m;u--,m--)if(F[u]!==ne[m]){if(u!==1||m!==1)do if(u--,m--,0>m||F[u]!==ne[m]){var ce=`
`+F[u].replace(" at new "," at ");return r.displayName&&ce.includes("<anonymous>")&&(ce=ce.replace("<anonymous>",r.displayName)),ce}while(1<=u&&0<=m);break}}}finally{oe=!1,Error.prepareStackTrace=o}return(o=r?r.displayName||r.name:"")?De(o):""}function Le(r,i){switch(r.tag){case 26:case 27:case 5:return De(r.type);case 16:return De("Lazy");case 13:return r.child!==i&&i!==null?De("Suspense Fallback"):De("Suspense");case 19:return De("SuspenseList");case 0:case 15:return _e(r.type,!1);case 11:return _e(r.type.render,!1);case 1:return _e(r.type,!0);case 31:return De("Activity");default:return""}}function Je(r){try{var i="",o=null;do i+=Le(r,o),o=r,r=r.return;while(r);return i}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var st=Object.prototype.hasOwnProperty,It=t.unstable_scheduleCallback,pt=t.unstable_cancelCallback,hn=t.unstable_shouldYield,Jt=t.unstable_requestPaint,ct=t.unstable_now,mn=t.unstable_getCurrentPriorityLevel,pn=t.unstable_ImmediatePriority,tn=t.unstable_UserBlockingPriority,jn=t.unstable_NormalPriority,vr=t.unstable_LowPriority,Jr=t.unstable_IdlePriority,Bs=t.log,to=t.unstable_setDisableYieldValue,me=null,Ee=null;function we(r){if(typeof Bs=="function"&&to(r),Ee&&typeof Ee.setStrictMode=="function")try{Ee.setStrictMode(me,r)}catch{}}var Ue=Math.clz32?Math.clz32:Cf,gt=Math.log,Dt=Math.LN2;function Cf(r){return r>>>=0,r===0?32:31-(gt(r)/Dt|0)|0}var ji=256,ki=262144,Mi=4194304;function br(r){var i=r&42;if(i!==0)return i;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return r&261888;case 262144:case 524288:case 1048576:case 2097152:return r&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function Di(r,i,o){var u=r.pendingLanes;if(u===0)return 0;var m=0,y=r.suspendedLanes,T=r.pingedLanes;r=r.warmLanes;var U=u&134217727;return U!==0?(u=U&~y,u!==0?m=br(u):(T&=U,T!==0?m=br(T):o||(o=U&~r,o!==0&&(m=br(o))))):(U=u&~y,U!==0?m=br(U):T!==0?m=br(T):o||(o=u&~r,o!==0&&(m=br(o)))),m===0?0:i!==0&&i!==m&&(i&y)===0&&(y=m&-m,o=i&-i,y>=o||y===32&&(o&4194048)!==0)?i:m}function Ps(r,i){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&i)===0}function Af(r,i){switch(r){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function lc(){var r=Mi;return Mi<<=1,(Mi&62914560)===0&&(Mi=4194304),r}function no(r){for(var i=[],o=0;31>o;o++)i.push(r);return i}function qs(r,i){r.pendingLanes|=i,i!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function Tf(r,i,o,u,m,y){var T=r.pendingLanes;r.pendingLanes=o,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=o,r.entangledLanes&=o,r.errorRecoveryDisabledLanes&=o,r.shellSuspendCounter=0;var U=r.entanglements,F=r.expirationTimes,ne=r.hiddenUpdates;for(o=T&~o;0<o;){var ce=31-Ue(o),de=1<<ce;U[ce]=0,F[ce]=-1;var se=ne[ce];if(se!==null)for(ne[ce]=null,ce=0;ce<se.length;ce++){var ie=se[ce];ie!==null&&(ie.lane&=-536870913)}o&=~de}u!==0&&cc(r,u,0),y!==0&&m===0&&r.tag!==0&&(r.suspendedLanes|=y&~(T&~i))}function cc(r,i,o){r.pendingLanes|=i,r.suspendedLanes&=~i;var u=31-Ue(i);r.entangledLanes|=i,r.entanglements[u]=r.entanglements[u]|1073741824|o&261930}function uc(r,i){var o=r.entangledLanes|=i;for(r=r.entanglements;o;){var u=31-Ue(o),m=1<<u;m&i|r[u]&i&&(r[u]|=i),o&=~m}}function dc(r,i){var o=i&-i;return o=(o&42)!==0?1:ro(o),(o&(r.suspendedLanes|i))!==0?0:o}function ro(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function so(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function fc(){var r=z.p;return r!==0?r:(r=window.event,r===void 0?32:Xb(r.type))}function hc(r,i){var o=z.p;try{return z.p=r,i()}finally{z.p=o}}var ir=Math.random().toString(36).slice(2),Ot="__reactFiber$"+ir,Ft="__reactProps$"+ir,_r="__reactContainer$"+ir,Ui="__reactEvents$"+ir,mc="__reactListeners$"+ir,Nf="__reactHandles$"+ir,pc="__reactResources$"+ir,Hs="__reactMarker$"+ir;function io(r){delete r[Ot],delete r[Ft],delete r[Ui],delete r[mc],delete r[Nf]}function Zr(r){var i=r[Ot];if(i)return i;for(var o=r.parentNode;o;){if(i=o[_r]||o[Ot]){if(o=i.alternate,i.child!==null||o!==null&&o.child!==null)for(r=kb(r);r!==null;){if(o=r[Ot])return o;r=kb(r)}return i}r=o,o=r.parentNode}return null}function es(r){if(r=r[Ot]||r[_r]){var i=r.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return r}return null}function ts(r){var i=r.tag;if(i===5||i===26||i===27||i===6)return r.stateNode;throw Error(s(33))}function ns(r){var i=r[pc];return i||(i=r[pc]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function wt(r){r[Hs]=!0}var gc=new Set,yc={};function wr(r,i){rs(r,i),rs(r+"Capture",i)}function rs(r,i){for(yc[r]=i,r=0;r<i.length;r++)gc.add(i[r])}var Of=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ao={},vc={};function Rf(r){return st.call(vc,r)?!0:st.call(ao,r)?!1:Of.test(r)?vc[r]=!0:(ao[r]=!0,!1)}function $i(r,i,o){if(Rf(i))if(o===null)r.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":r.removeAttribute(i);return;case"boolean":var u=i.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){r.removeAttribute(i);return}}r.setAttribute(i,""+o)}}function Ii(r,i,o){if(o===null)r.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(i);return}r.setAttribute(i,""+o)}}function Hn(r,i,o,u){if(u===null)r.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(o);return}r.setAttributeNS(i,o,""+u)}}function nn(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function bc(r){var i=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function jf(r,i,o){var u=Object.getOwnPropertyDescriptor(r.constructor.prototype,i);if(!r.hasOwnProperty(i)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var m=u.get,y=u.set;return Object.defineProperty(r,i,{configurable:!0,get:function(){return m.call(this)},set:function(T){o=""+T,y.call(this,T)}}),Object.defineProperty(r,i,{enumerable:u.enumerable}),{getValue:function(){return o},setValue:function(T){o=""+T},stopTracking:function(){r._valueTracker=null,delete r[i]}}}}function Li(r){if(!r._valueTracker){var i=bc(r)?"checked":"value";r._valueTracker=jf(r,i,""+r[i])}}function _c(r){if(!r)return!1;var i=r._valueTracker;if(!i)return!0;var o=i.getValue(),u="";return r&&(u=bc(r)?r.checked?"true":"false":r.value),r=u,r!==o?(i.setValue(r),!0):!1}function zi(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var kf=/[\n"\\]/g;function Yt(r){return r.replace(kf,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function oo(r,i,o,u,m,y,T,U){r.name="",T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?r.type=T:r.removeAttribute("type"),i!=null?T==="number"?(i===0&&r.value===""||r.value!=i)&&(r.value=""+nn(i)):r.value!==""+nn(i)&&(r.value=""+nn(i)):T!=="submit"&&T!=="reset"||r.removeAttribute("value"),i!=null?Bi(r,T,nn(i)):o!=null?Bi(r,T,nn(o)):u!=null&&r.removeAttribute("value"),m==null&&y!=null&&(r.defaultChecked=!!y),m!=null&&(r.checked=m&&typeof m!="function"&&typeof m!="symbol"),U!=null&&typeof U!="function"&&typeof U!="symbol"&&typeof U!="boolean"?r.name=""+nn(U):r.removeAttribute("name")}function wc(r,i,o,u,m,y,T,U){if(y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(r.type=y),i!=null||o!=null){if(!(y!=="submit"&&y!=="reset"||i!=null)){Li(r);return}o=o!=null?""+nn(o):"",i=i!=null?""+nn(i):o,U||i===r.value||(r.value=i),r.defaultValue=i}u=u??m,u=typeof u!="function"&&typeof u!="symbol"&&!!u,r.checked=U?r.checked:!!u,r.defaultChecked=!!u,T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(r.name=T),Li(r)}function Bi(r,i,o){i==="number"&&zi(r.ownerDocument)===r||r.defaultValue===""+o||(r.defaultValue=""+o)}function Pi(r,i,o,u){if(r=r.options,i){i={};for(var m=0;m<o.length;m++)i["$"+o[m]]=!0;for(o=0;o<r.length;o++)m=i.hasOwnProperty("$"+r[o].value),r[o].selected!==m&&(r[o].selected=m),m&&u&&(r[o].defaultSelected=!0)}else{for(o=""+nn(o),i=null,m=0;m<r.length;m++){if(r[m].value===o){r[m].selected=!0,u&&(r[m].defaultSelected=!0);return}i!==null||r[m].disabled||(i=r[m])}i!==null&&(i.selected=!0)}}function by(r,i,o){if(i!=null&&(i=""+nn(i),i!==r.value&&(r.value=i),o==null)){r.defaultValue!==i&&(r.defaultValue=i);return}r.defaultValue=o!=null?""+nn(o):""}function _y(r,i,o,u){if(i==null){if(u!=null){if(o!=null)throw Error(s(92));if(Y(u)){if(1<u.length)throw Error(s(93));u=u[0]}o=u}o==null&&(o=""),i=o}o=nn(i),r.defaultValue=o,u=r.textContent,u===o&&u!==""&&u!==null&&(r.value=u),Li(r)}function qi(r,i){if(i){var o=r.firstChild;if(o&&o===r.lastChild&&o.nodeType===3){o.nodeValue=i;return}}r.textContent=i}var IA=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function wy(r,i,o){var u=i.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?u?r.setProperty(i,""):i==="float"?r.cssFloat="":r[i]="":u?r.setProperty(i,o):typeof o!="number"||o===0||IA.has(i)?i==="float"?r.cssFloat=o:r[i]=(""+o).trim():r[i]=o+"px"}function xy(r,i,o){if(i!=null&&typeof i!="object")throw Error(s(62));if(r=r.style,o!=null){for(var u in o)!o.hasOwnProperty(u)||i!=null&&i.hasOwnProperty(u)||(u.indexOf("--")===0?r.setProperty(u,""):u==="float"?r.cssFloat="":r[u]="");for(var m in i)u=i[m],i.hasOwnProperty(m)&&o[m]!==u&&wy(r,m,u)}else for(var y in i)i.hasOwnProperty(y)&&wy(r,y,i[y])}function Mf(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var LA=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),zA=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function xc(r){return zA.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}function xr(){}var Df=null;function Uf(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Hi=null,Vi=null;function Sy(r){var i=es(r);if(i&&(r=i.stateNode)){var o=r[Ft]||null;e:switch(r=i.stateNode,i.type){case"input":if(oo(r,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),i=o.name,o.type==="radio"&&i!=null){for(o=r;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+Yt(""+i)+'"][type="radio"]'),i=0;i<o.length;i++){var u=o[i];if(u!==r&&u.form===r.form){var m=u[Ft]||null;if(!m)throw Error(s(90));oo(u,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name)}}for(i=0;i<o.length;i++)u=o[i],u.form===r.form&&_c(u)}break e;case"textarea":by(r,o.value,o.defaultValue);break e;case"select":i=o.value,i!=null&&Pi(r,!!o.multiple,i,!1)}}}var $f=!1;function Ey(r,i,o){if($f)return r(i,o);$f=!0;try{var u=r(i);return u}finally{if($f=!1,(Hi!==null||Vi!==null)&&(cu(),Hi&&(i=Hi,r=Vi,Vi=Hi=null,Sy(i),r)))for(i=0;i<r.length;i++)Sy(r[i])}}function lo(r,i){var o=r.stateNode;if(o===null)return null;var u=o[Ft]||null;if(u===null)return null;o=u[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(r=r.type,u=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!u;break e;default:r=!1}if(r)return null;if(o&&typeof o!="function")throw Error(s(231,i,typeof o));return o}var Sr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),If=!1;if(Sr)try{var co={};Object.defineProperty(co,"passive",{get:function(){If=!0}}),window.addEventListener("test",co,co),window.removeEventListener("test",co,co)}catch{If=!1}var ss=null,Lf=null,Sc=null;function Cy(){if(Sc)return Sc;var r,i=Lf,o=i.length,u,m="value"in ss?ss.value:ss.textContent,y=m.length;for(r=0;r<o&&i[r]===m[r];r++);var T=o-r;for(u=1;u<=T&&i[o-u]===m[y-u];u++);return Sc=m.slice(r,1<u?1-u:void 0)}function Ec(r){var i=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&i===13&&(r=13)):r=i,r===10&&(r=13),32<=r||r===13?r:0}function Cc(){return!0}function Ay(){return!1}function rn(r){function i(o,u,m,y,T){this._reactName=o,this._targetInst=m,this.type=u,this.nativeEvent=y,this.target=T,this.currentTarget=null;for(var U in r)r.hasOwnProperty(U)&&(o=r[U],this[U]=o?o(y):y[U]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?Cc:Ay,this.isPropagationStopped=Ay,this}return p(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Cc)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Cc)},persist:function(){},isPersistent:Cc}),i}var Vs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ac=rn(Vs),uo=p({},Vs,{view:0,detail:0}),BA=rn(uo),zf,Bf,fo,Tc=p({},uo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:qf,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==fo&&(fo&&r.type==="mousemove"?(zf=r.screenX-fo.screenX,Bf=r.screenY-fo.screenY):Bf=zf=0,fo=r),zf)},movementY:function(r){return"movementY"in r?r.movementY:Bf}}),Ty=rn(Tc),PA=p({},Tc,{dataTransfer:0}),qA=rn(PA),HA=p({},uo,{relatedTarget:0}),Pf=rn(HA),VA=p({},Vs,{animationName:0,elapsedTime:0,pseudoElement:0}),FA=rn(VA),YA=p({},Vs,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),GA=rn(YA),XA=p({},Vs,{data:0}),Ny=rn(XA),KA={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},QA={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},WA={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function JA(r){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(r):(r=WA[r])?!!i[r]:!1}function qf(){return JA}var ZA=p({},uo,{key:function(r){if(r.key){var i=KA[r.key]||r.key;if(i!=="Unidentified")return i}return r.type==="keypress"?(r=Ec(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?QA[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:qf,charCode:function(r){return r.type==="keypress"?Ec(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?Ec(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),eT=rn(ZA),tT=p({},Tc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Oy=rn(tT),nT=p({},uo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:qf}),rT=rn(nT),sT=p({},Vs,{propertyName:0,elapsedTime:0,pseudoElement:0}),iT=rn(sT),aT=p({},Tc,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),oT=rn(aT),lT=p({},Vs,{newState:0,oldState:0}),cT=rn(lT),uT=[9,13,27,32],Hf=Sr&&"CompositionEvent"in window,ho=null;Sr&&"documentMode"in document&&(ho=document.documentMode);var dT=Sr&&"TextEvent"in window&&!ho,Ry=Sr&&(!Hf||ho&&8<ho&&11>=ho),jy=" ",ky=!1;function My(r,i){switch(r){case"keyup":return uT.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Dy(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var Fi=!1;function fT(r,i){switch(r){case"compositionend":return Dy(i);case"keypress":return i.which!==32?null:(ky=!0,jy);case"textInput":return r=i.data,r===jy&&ky?null:r;default:return null}}function hT(r,i){if(Fi)return r==="compositionend"||!Hf&&My(r,i)?(r=Cy(),Sc=Lf=ss=null,Fi=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Ry&&i.locale!=="ko"?null:i.data;default:return null}}var mT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Uy(r){var i=r&&r.nodeName&&r.nodeName.toLowerCase();return i==="input"?!!mT[r.type]:i==="textarea"}function $y(r,i,o,u){Hi?Vi?Vi.push(u):Vi=[u]:Hi=u,i=gu(i,"onChange"),0<i.length&&(o=new Ac("onChange","change",null,o,u),r.push({event:o,listeners:i}))}var mo=null,po=null;function pT(r){vb(r,0)}function Nc(r){var i=ts(r);if(_c(i))return r}function Iy(r,i){if(r==="change")return i}var Ly=!1;if(Sr){var Vf;if(Sr){var Ff="oninput"in document;if(!Ff){var zy=document.createElement("div");zy.setAttribute("oninput","return;"),Ff=typeof zy.oninput=="function"}Vf=Ff}else Vf=!1;Ly=Vf&&(!document.documentMode||9<document.documentMode)}function By(){mo&&(mo.detachEvent("onpropertychange",Py),po=mo=null)}function Py(r){if(r.propertyName==="value"&&Nc(po)){var i=[];$y(i,po,r,Uf(r)),Ey(pT,i)}}function gT(r,i,o){r==="focusin"?(By(),mo=i,po=o,mo.attachEvent("onpropertychange",Py)):r==="focusout"&&By()}function yT(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return Nc(po)}function vT(r,i){if(r==="click")return Nc(i)}function bT(r,i){if(r==="input"||r==="change")return Nc(i)}function _T(r,i){return r===i&&(r!==0||1/r===1/i)||r!==r&&i!==i}var gn=typeof Object.is=="function"?Object.is:_T;function go(r,i){if(gn(r,i))return!0;if(typeof r!="object"||r===null||typeof i!="object"||i===null)return!1;var o=Object.keys(r),u=Object.keys(i);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var m=o[u];if(!st.call(i,m)||!gn(r[m],i[m]))return!1}return!0}function qy(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function Hy(r,i){var o=qy(r);r=0;for(var u;o;){if(o.nodeType===3){if(u=r+o.textContent.length,r<=i&&u>=i)return{node:o,offset:i-r};r=u}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=qy(o)}}function Vy(r,i){return r&&i?r===i?!0:r&&r.nodeType===3?!1:i&&i.nodeType===3?Vy(r,i.parentNode):"contains"in r?r.contains(i):r.compareDocumentPosition?!!(r.compareDocumentPosition(i)&16):!1:!1}function Fy(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var i=zi(r.document);i instanceof r.HTMLIFrameElement;){try{var o=typeof i.contentWindow.location.href=="string"}catch{o=!1}if(o)r=i.contentWindow;else break;i=zi(r.document)}return i}function Yf(r){var i=r&&r.nodeName&&r.nodeName.toLowerCase();return i&&(i==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||i==="textarea"||r.contentEditable==="true")}var wT=Sr&&"documentMode"in document&&11>=document.documentMode,Yi=null,Gf=null,yo=null,Xf=!1;function Yy(r,i,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;Xf||Yi==null||Yi!==zi(u)||(u=Yi,"selectionStart"in u&&Yf(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),yo&&go(yo,u)||(yo=u,u=gu(Gf,"onSelect"),0<u.length&&(i=new Ac("onSelect","select",null,i,o),r.push({event:i,listeners:u}),i.target=Yi)))}function Fs(r,i){var o={};return o[r.toLowerCase()]=i.toLowerCase(),o["Webkit"+r]="webkit"+i,o["Moz"+r]="moz"+i,o}var Gi={animationend:Fs("Animation","AnimationEnd"),animationiteration:Fs("Animation","AnimationIteration"),animationstart:Fs("Animation","AnimationStart"),transitionrun:Fs("Transition","TransitionRun"),transitionstart:Fs("Transition","TransitionStart"),transitioncancel:Fs("Transition","TransitionCancel"),transitionend:Fs("Transition","TransitionEnd")},Kf={},Gy={};Sr&&(Gy=document.createElement("div").style,"AnimationEvent"in window||(delete Gi.animationend.animation,delete Gi.animationiteration.animation,delete Gi.animationstart.animation),"TransitionEvent"in window||delete Gi.transitionend.transition);function Ys(r){if(Kf[r])return Kf[r];if(!Gi[r])return r;var i=Gi[r],o;for(o in i)if(i.hasOwnProperty(o)&&o in Gy)return Kf[r]=i[o];return r}var Xy=Ys("animationend"),Ky=Ys("animationiteration"),Qy=Ys("animationstart"),xT=Ys("transitionrun"),ST=Ys("transitionstart"),ET=Ys("transitioncancel"),Wy=Ys("transitionend"),Jy=new Map,Qf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Qf.push("scrollEnd");function Vn(r,i){Jy.set(r,i),wr(i,[r])}var Oc=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)},kn=[],Xi=0,Wf=0;function Rc(){for(var r=Xi,i=Wf=Xi=0;i<r;){var o=kn[i];kn[i++]=null;var u=kn[i];kn[i++]=null;var m=kn[i];kn[i++]=null;var y=kn[i];if(kn[i++]=null,u!==null&&m!==null){var T=u.pending;T===null?m.next=m:(m.next=T.next,T.next=m),u.pending=m}y!==0&&Zy(o,m,y)}}function jc(r,i,o,u){kn[Xi++]=r,kn[Xi++]=i,kn[Xi++]=o,kn[Xi++]=u,Wf|=u,r.lanes|=u,r=r.alternate,r!==null&&(r.lanes|=u)}function Jf(r,i,o,u){return jc(r,i,o,u),kc(r)}function Gs(r,i){return jc(r,null,null,i),kc(r)}function Zy(r,i,o){r.lanes|=o;var u=r.alternate;u!==null&&(u.lanes|=o);for(var m=!1,y=r.return;y!==null;)y.childLanes|=o,u=y.alternate,u!==null&&(u.childLanes|=o),y.tag===22&&(r=y.stateNode,r===null||r._visibility&1||(m=!0)),r=y,y=y.return;return r.tag===3?(y=r.stateNode,m&&i!==null&&(m=31-Ue(o),r=y.hiddenUpdates,u=r[m],u===null?r[m]=[i]:u.push(i),i.lane=o|536870912),y):null}function kc(r){if(50<zo)throw zo=0,om=null,Error(s(185));for(var i=r.return;i!==null;)r=i,i=r.return;return r.tag===3?r.stateNode:null}var Ki={};function CT(r,i,o,u){this.tag=r,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function yn(r,i,o,u){return new CT(r,i,o,u)}function Zf(r){return r=r.prototype,!(!r||!r.isReactComponent)}function Er(r,i){var o=r.alternate;return o===null?(o=yn(r.tag,i,r.key,r.mode),o.elementType=r.elementType,o.type=r.type,o.stateNode=r.stateNode,o.alternate=r,r.alternate=o):(o.pendingProps=i,o.type=r.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=r.flags&65011712,o.childLanes=r.childLanes,o.lanes=r.lanes,o.child=r.child,o.memoizedProps=r.memoizedProps,o.memoizedState=r.memoizedState,o.updateQueue=r.updateQueue,i=r.dependencies,o.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},o.sibling=r.sibling,o.index=r.index,o.ref=r.ref,o.refCleanup=r.refCleanup,o}function e0(r,i){r.flags&=65011714;var o=r.alternate;return o===null?(r.childLanes=0,r.lanes=i,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=o.childLanes,r.lanes=o.lanes,r.child=o.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=o.memoizedProps,r.memoizedState=o.memoizedState,r.updateQueue=o.updateQueue,r.type=o.type,i=o.dependencies,r.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),r}function Mc(r,i,o,u,m,y){var T=0;if(u=r,typeof r=="function")Zf(r)&&(T=1);else if(typeof r=="string")T=RN(r,o,ee.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case P:return r=yn(31,o,i,m),r.elementType=P,r.lanes=y,r;case w:return Xs(o.children,m,y,i);case S:T=8,m|=24;break;case C:return r=yn(12,o,i,m|2),r.elementType=C,r.lanes=y,r;case O:return r=yn(13,o,i,m),r.elementType=O,r.lanes=y,r;case j:return r=yn(19,o,i,m),r.elementType=j,r.lanes=y,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case E:T=10;break e;case N:T=9;break e;case A:T=11;break e;case D:T=14;break e;case $:T=16,u=null;break e}T=29,o=Error(s(130,r===null?"null":typeof r,"")),u=null}return i=yn(T,o,i,m),i.elementType=r,i.type=u,i.lanes=y,i}function Xs(r,i,o,u){return r=yn(7,r,u,i),r.lanes=o,r}function eh(r,i,o){return r=yn(6,r,null,i),r.lanes=o,r}function t0(r){var i=yn(18,null,null,0);return i.stateNode=r,i}function th(r,i,o){return i=yn(4,r.children!==null?r.children:[],r.key,i),i.lanes=o,i.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},i}var n0=new WeakMap;function Mn(r,i){if(typeof r=="object"&&r!==null){var o=n0.get(r);return o!==void 0?o:(i={value:r,source:i,stack:Je(i)},n0.set(r,i),i)}return{value:r,source:i,stack:Je(i)}}var Qi=[],Wi=0,Dc=null,vo=0,Dn=[],Un=0,is=null,ar=1,or="";function Cr(r,i){Qi[Wi++]=vo,Qi[Wi++]=Dc,Dc=r,vo=i}function r0(r,i,o){Dn[Un++]=ar,Dn[Un++]=or,Dn[Un++]=is,is=r;var u=ar;r=or;var m=32-Ue(u)-1;u&=~(1<<m),o+=1;var y=32-Ue(i)+m;if(30<y){var T=m-m%5;y=(u&(1<<T)-1).toString(32),u>>=T,m-=T,ar=1<<32-Ue(i)+m|o<<m|u,or=y+r}else ar=1<<y|o<<m|u,or=r}function nh(r){r.return!==null&&(Cr(r,1),r0(r,1,0))}function rh(r){for(;r===Dc;)Dc=Qi[--Wi],Qi[Wi]=null,vo=Qi[--Wi],Qi[Wi]=null;for(;r===is;)is=Dn[--Un],Dn[Un]=null,or=Dn[--Un],Dn[Un]=null,ar=Dn[--Un],Dn[Un]=null}function s0(r,i){Dn[Un++]=ar,Dn[Un++]=or,Dn[Un++]=is,ar=i.id,or=i.overflow,is=r}var Lt=null,ot=null,Xe=!1,as=null,$n=!1,sh=Error(s(519));function os(r){var i=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw bo(Mn(i,r)),sh}function i0(r){var i=r.stateNode,o=r.type,u=r.memoizedProps;switch(i[Ot]=r,i[Ft]=u,o){case"dialog":Ve("cancel",i),Ve("close",i);break;case"iframe":case"object":case"embed":Ve("load",i);break;case"video":case"audio":for(o=0;o<Po.length;o++)Ve(Po[o],i);break;case"source":Ve("error",i);break;case"img":case"image":case"link":Ve("error",i),Ve("load",i);break;case"details":Ve("toggle",i);break;case"input":Ve("invalid",i),wc(i,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":Ve("invalid",i);break;case"textarea":Ve("invalid",i),_y(i,u.value,u.defaultValue,u.children)}o=u.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||i.textContent===""+o||u.suppressHydrationWarning===!0||xb(i.textContent,o)?(u.popover!=null&&(Ve("beforetoggle",i),Ve("toggle",i)),u.onScroll!=null&&Ve("scroll",i),u.onScrollEnd!=null&&Ve("scrollend",i),u.onClick!=null&&(i.onclick=xr),i=!0):i=!1,i||os(r,!0)}function a0(r){for(Lt=r.return;Lt;)switch(Lt.tag){case 5:case 31:case 13:$n=!1;return;case 27:case 3:$n=!0;return;default:Lt=Lt.return}}function Ji(r){if(r!==Lt)return!1;if(!Xe)return a0(r),Xe=!0,!1;var i=r.tag,o;if((o=i!==3&&i!==27)&&((o=i===5)&&(o=r.type,o=!(o!=="form"&&o!=="button")||xm(r.type,r.memoizedProps)),o=!o),o&&ot&&os(r),a0(r),i===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(s(317));ot=jb(r)}else if(i===31){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(s(317));ot=jb(r)}else i===27?(i=ot,ws(r.type)?(r=Tm,Tm=null,ot=r):ot=i):ot=Lt?Ln(r.stateNode.nextSibling):null;return!0}function Ks(){ot=Lt=null,Xe=!1}function ih(){var r=as;return r!==null&&(ln===null?ln=r:ln.push.apply(ln,r),as=null),r}function bo(r){as===null?as=[r]:as.push(r)}var ah=M(null),Qs=null,Ar=null;function ls(r,i,o){Q(ah,i._currentValue),i._currentValue=o}function Tr(r){r._currentValue=ah.current,B(ah)}function oh(r,i,o){for(;r!==null;){var u=r.alternate;if((r.childLanes&i)!==i?(r.childLanes|=i,u!==null&&(u.childLanes|=i)):u!==null&&(u.childLanes&i)!==i&&(u.childLanes|=i),r===o)break;r=r.return}}function lh(r,i,o,u){var m=r.child;for(m!==null&&(m.return=r);m!==null;){var y=m.dependencies;if(y!==null){var T=m.child;y=y.firstContext;e:for(;y!==null;){var U=y;y=m;for(var F=0;F<i.length;F++)if(U.context===i[F]){y.lanes|=o,U=y.alternate,U!==null&&(U.lanes|=o),oh(y.return,o,r),u||(T=null);break e}y=U.next}}else if(m.tag===18){if(T=m.return,T===null)throw Error(s(341));T.lanes|=o,y=T.alternate,y!==null&&(y.lanes|=o),oh(T,o,r),T=null}else T=m.child;if(T!==null)T.return=m;else for(T=m;T!==null;){if(T===r){T=null;break}if(m=T.sibling,m!==null){m.return=T.return,T=m;break}T=T.return}m=T}}function Zi(r,i,o,u){r=null;for(var m=i,y=!1;m!==null;){if(!y){if((m.flags&524288)!==0)y=!0;else if((m.flags&262144)!==0)break}if(m.tag===10){var T=m.alternate;if(T===null)throw Error(s(387));if(T=T.memoizedProps,T!==null){var U=m.type;gn(m.pendingProps.value,T.value)||(r!==null?r.push(U):r=[U])}}else if(m===ae.current){if(T=m.alternate,T===null)throw Error(s(387));T.memoizedState.memoizedState!==m.memoizedState.memoizedState&&(r!==null?r.push(Yo):r=[Yo])}m=m.return}r!==null&&lh(i,r,o,u),i.flags|=262144}function Uc(r){for(r=r.firstContext;r!==null;){if(!gn(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function Ws(r){Qs=r,Ar=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function zt(r){return o0(Qs,r)}function $c(r,i){return Qs===null&&Ws(r),o0(r,i)}function o0(r,i){var o=i._currentValue;if(i={context:i,memoizedValue:o,next:null},Ar===null){if(r===null)throw Error(s(308));Ar=i,r.dependencies={lanes:0,firstContext:i},r.flags|=524288}else Ar=Ar.next=i;return o}var AT=typeof AbortController<"u"?AbortController:function(){var r=[],i=this.signal={aborted:!1,addEventListener:function(o,u){r.push(u)}};this.abort=function(){i.aborted=!0,r.forEach(function(o){return o()})}},TT=t.unstable_scheduleCallback,NT=t.unstable_NormalPriority,xt={$$typeof:E,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function ch(){return{controller:new AT,data:new Map,refCount:0}}function _o(r){r.refCount--,r.refCount===0&&TT(NT,function(){r.controller.abort()})}var wo=null,uh=0,ea=0,ta=null;function OT(r,i){if(wo===null){var o=wo=[];uh=0,ea=hm(),ta={status:"pending",value:void 0,then:function(u){o.push(u)}}}return uh++,i.then(l0,l0),i}function l0(){if(--uh===0&&wo!==null){ta!==null&&(ta.status="fulfilled");var r=wo;wo=null,ea=0,ta=null;for(var i=0;i<r.length;i++)(0,r[i])()}}function RT(r,i){var o=[],u={status:"pending",value:null,reason:null,then:function(m){o.push(m)}};return r.then(function(){u.status="fulfilled",u.value=i;for(var m=0;m<o.length;m++)(0,o[m])(i)},function(m){for(u.status="rejected",u.reason=m,m=0;m<o.length;m++)(0,o[m])(void 0)}),u}var c0=k.S;k.S=function(r,i){Yv=ct(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&OT(r,i),c0!==null&&c0(r,i)};var Js=M(null);function dh(){var r=Js.current;return r!==null?r:it.pooledCache}function Ic(r,i){i===null?Q(Js,Js.current):Q(Js,i.pool)}function u0(){var r=dh();return r===null?null:{parent:xt._currentValue,pool:r}}var na=Error(s(460)),fh=Error(s(474)),Lc=Error(s(542)),zc={then:function(){}};function d0(r){return r=r.status,r==="fulfilled"||r==="rejected"}function f0(r,i,o){switch(o=r[o],o===void 0?r.push(i):o!==i&&(i.then(xr,xr),i=o),i.status){case"fulfilled":return i.value;case"rejected":throw r=i.reason,m0(r),r;default:if(typeof i.status=="string")i.then(xr,xr);else{if(r=it,r!==null&&100<r.shellSuspendCounter)throw Error(s(482));r=i,r.status="pending",r.then(function(u){if(i.status==="pending"){var m=i;m.status="fulfilled",m.value=u}},function(u){if(i.status==="pending"){var m=i;m.status="rejected",m.reason=u}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw r=i.reason,m0(r),r}throw ei=i,na}}function Zs(r){try{var i=r._init;return i(r._payload)}catch(o){throw o!==null&&typeof o=="object"&&typeof o.then=="function"?(ei=o,na):o}}var ei=null;function h0(){if(ei===null)throw Error(s(459));var r=ei;return ei=null,r}function m0(r){if(r===na||r===Lc)throw Error(s(483))}var ra=null,xo=0;function Bc(r){var i=xo;return xo+=1,ra===null&&(ra=[]),f0(ra,r,i)}function So(r,i){i=i.props.ref,r.ref=i!==void 0?i:null}function Pc(r,i){throw i.$$typeof===v?Error(s(525)):(r=Object.prototype.toString.call(i),Error(s(31,r==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":r)))}function p0(r){function i(J,X){if(r){var te=J.deletions;te===null?(J.deletions=[X],J.flags|=16):te.push(X)}}function o(J,X){if(!r)return null;for(;X!==null;)i(J,X),X=X.sibling;return null}function u(J){for(var X=new Map;J!==null;)J.key!==null?X.set(J.key,J):X.set(J.index,J),J=J.sibling;return X}function m(J,X){return J=Er(J,X),J.index=0,J.sibling=null,J}function y(J,X,te){return J.index=te,r?(te=J.alternate,te!==null?(te=te.index,te<X?(J.flags|=67108866,X):te):(J.flags|=67108866,X)):(J.flags|=1048576,X)}function T(J){return r&&J.alternate===null&&(J.flags|=67108866),J}function U(J,X,te,ue){return X===null||X.tag!==6?(X=eh(te,J.mode,ue),X.return=J,X):(X=m(X,te),X.return=J,X)}function F(J,X,te,ue){var Re=te.type;return Re===w?ce(J,X,te.props.children,ue,te.key):X!==null&&(X.elementType===Re||typeof Re=="object"&&Re!==null&&Re.$$typeof===$&&Zs(Re)===X.type)?(X=m(X,te.props),So(X,te),X.return=J,X):(X=Mc(te.type,te.key,te.props,null,J.mode,ue),So(X,te),X.return=J,X)}function ne(J,X,te,ue){return X===null||X.tag!==4||X.stateNode.containerInfo!==te.containerInfo||X.stateNode.implementation!==te.implementation?(X=th(te,J.mode,ue),X.return=J,X):(X=m(X,te.children||[]),X.return=J,X)}function ce(J,X,te,ue,Re){return X===null||X.tag!==7?(X=Xs(te,J.mode,ue,Re),X.return=J,X):(X=m(X,te),X.return=J,X)}function de(J,X,te){if(typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint")return X=eh(""+X,J.mode,te),X.return=J,X;if(typeof X=="object"&&X!==null){switch(X.$$typeof){case b:return te=Mc(X.type,X.key,X.props,null,J.mode,te),So(te,X),te.return=J,te;case x:return X=th(X,J.mode,te),X.return=J,X;case $:return X=Zs(X),de(J,X,te)}if(Y(X)||L(X))return X=Xs(X,J.mode,te,null),X.return=J,X;if(typeof X.then=="function")return de(J,Bc(X),te);if(X.$$typeof===E)return de(J,$c(J,X),te);Pc(J,X)}return null}function se(J,X,te,ue){var Re=X!==null?X.key:null;if(typeof te=="string"&&te!==""||typeof te=="number"||typeof te=="bigint")return Re!==null?null:U(J,X,""+te,ue);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case b:return te.key===Re?F(J,X,te,ue):null;case x:return te.key===Re?ne(J,X,te,ue):null;case $:return te=Zs(te),se(J,X,te,ue)}if(Y(te)||L(te))return Re!==null?null:ce(J,X,te,ue,null);if(typeof te.then=="function")return se(J,X,Bc(te),ue);if(te.$$typeof===E)return se(J,X,$c(J,te),ue);Pc(J,te)}return null}function ie(J,X,te,ue,Re){if(typeof ue=="string"&&ue!==""||typeof ue=="number"||typeof ue=="bigint")return J=J.get(te)||null,U(X,J,""+ue,Re);if(typeof ue=="object"&&ue!==null){switch(ue.$$typeof){case b:return J=J.get(ue.key===null?te:ue.key)||null,F(X,J,ue,Re);case x:return J=J.get(ue.key===null?te:ue.key)||null,ne(X,J,ue,Re);case $:return ue=Zs(ue),ie(J,X,te,ue,Re)}if(Y(ue)||L(ue))return J=J.get(te)||null,ce(X,J,ue,Re,null);if(typeof ue.then=="function")return ie(J,X,te,Bc(ue),Re);if(ue.$$typeof===E)return ie(J,X,te,$c(X,ue),Re);Pc(X,ue)}return null}function xe(J,X,te,ue){for(var Re=null,Ke=null,Ae=X,Pe=X=0,Ye=null;Ae!==null&&Pe<te.length;Pe++){Ae.index>Pe?(Ye=Ae,Ae=null):Ye=Ae.sibling;var Qe=se(J,Ae,te[Pe],ue);if(Qe===null){Ae===null&&(Ae=Ye);break}r&&Ae&&Qe.alternate===null&&i(J,Ae),X=y(Qe,X,Pe),Ke===null?Re=Qe:Ke.sibling=Qe,Ke=Qe,Ae=Ye}if(Pe===te.length)return o(J,Ae),Xe&&Cr(J,Pe),Re;if(Ae===null){for(;Pe<te.length;Pe++)Ae=de(J,te[Pe],ue),Ae!==null&&(X=y(Ae,X,Pe),Ke===null?Re=Ae:Ke.sibling=Ae,Ke=Ae);return Xe&&Cr(J,Pe),Re}for(Ae=u(Ae);Pe<te.length;Pe++)Ye=ie(Ae,J,Pe,te[Pe],ue),Ye!==null&&(r&&Ye.alternate!==null&&Ae.delete(Ye.key===null?Pe:Ye.key),X=y(Ye,X,Pe),Ke===null?Re=Ye:Ke.sibling=Ye,Ke=Ye);return r&&Ae.forEach(function(As){return i(J,As)}),Xe&&Cr(J,Pe),Re}function ke(J,X,te,ue){if(te==null)throw Error(s(151));for(var Re=null,Ke=null,Ae=X,Pe=X=0,Ye=null,Qe=te.next();Ae!==null&&!Qe.done;Pe++,Qe=te.next()){Ae.index>Pe?(Ye=Ae,Ae=null):Ye=Ae.sibling;var As=se(J,Ae,Qe.value,ue);if(As===null){Ae===null&&(Ae=Ye);break}r&&Ae&&As.alternate===null&&i(J,Ae),X=y(As,X,Pe),Ke===null?Re=As:Ke.sibling=As,Ke=As,Ae=Ye}if(Qe.done)return o(J,Ae),Xe&&Cr(J,Pe),Re;if(Ae===null){for(;!Qe.done;Pe++,Qe=te.next())Qe=de(J,Qe.value,ue),Qe!==null&&(X=y(Qe,X,Pe),Ke===null?Re=Qe:Ke.sibling=Qe,Ke=Qe);return Xe&&Cr(J,Pe),Re}for(Ae=u(Ae);!Qe.done;Pe++,Qe=te.next())Qe=ie(Ae,J,Pe,Qe.value,ue),Qe!==null&&(r&&Qe.alternate!==null&&Ae.delete(Qe.key===null?Pe:Qe.key),X=y(Qe,X,Pe),Ke===null?Re=Qe:Ke.sibling=Qe,Ke=Qe);return r&&Ae.forEach(function(PN){return i(J,PN)}),Xe&&Cr(J,Pe),Re}function rt(J,X,te,ue){if(typeof te=="object"&&te!==null&&te.type===w&&te.key===null&&(te=te.props.children),typeof te=="object"&&te!==null){switch(te.$$typeof){case b:e:{for(var Re=te.key;X!==null;){if(X.key===Re){if(Re=te.type,Re===w){if(X.tag===7){o(J,X.sibling),ue=m(X,te.props.children),ue.return=J,J=ue;break e}}else if(X.elementType===Re||typeof Re=="object"&&Re!==null&&Re.$$typeof===$&&Zs(Re)===X.type){o(J,X.sibling),ue=m(X,te.props),So(ue,te),ue.return=J,J=ue;break e}o(J,X);break}else i(J,X);X=X.sibling}te.type===w?(ue=Xs(te.props.children,J.mode,ue,te.key),ue.return=J,J=ue):(ue=Mc(te.type,te.key,te.props,null,J.mode,ue),So(ue,te),ue.return=J,J=ue)}return T(J);case x:e:{for(Re=te.key;X!==null;){if(X.key===Re)if(X.tag===4&&X.stateNode.containerInfo===te.containerInfo&&X.stateNode.implementation===te.implementation){o(J,X.sibling),ue=m(X,te.children||[]),ue.return=J,J=ue;break e}else{o(J,X);break}else i(J,X);X=X.sibling}ue=th(te,J.mode,ue),ue.return=J,J=ue}return T(J);case $:return te=Zs(te),rt(J,X,te,ue)}if(Y(te))return xe(J,X,te,ue);if(L(te)){if(Re=L(te),typeof Re!="function")throw Error(s(150));return te=Re.call(te),ke(J,X,te,ue)}if(typeof te.then=="function")return rt(J,X,Bc(te),ue);if(te.$$typeof===E)return rt(J,X,$c(J,te),ue);Pc(J,te)}return typeof te=="string"&&te!==""||typeof te=="number"||typeof te=="bigint"?(te=""+te,X!==null&&X.tag===6?(o(J,X.sibling),ue=m(X,te),ue.return=J,J=ue):(o(J,X),ue=eh(te,J.mode,ue),ue.return=J,J=ue),T(J)):o(J,X)}return function(J,X,te,ue){try{xo=0;var Re=rt(J,X,te,ue);return ra=null,Re}catch(Ae){if(Ae===na||Ae===Lc)throw Ae;var Ke=yn(29,Ae,null,J.mode);return Ke.lanes=ue,Ke.return=J,Ke}finally{}}}var ti=p0(!0),g0=p0(!1),cs=!1;function hh(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function mh(r,i){r=r.updateQueue,i.updateQueue===r&&(i.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function us(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function ds(r,i,o){var u=r.updateQueue;if(u===null)return null;if(u=u.shared,(We&2)!==0){var m=u.pending;return m===null?i.next=i:(i.next=m.next,m.next=i),u.pending=i,i=kc(r),Zy(r,null,o),i}return jc(r,u,i,o),kc(r)}function Eo(r,i,o){if(i=i.updateQueue,i!==null&&(i=i.shared,(o&4194048)!==0)){var u=i.lanes;u&=r.pendingLanes,o|=u,i.lanes=o,uc(r,o)}}function ph(r,i){var o=r.updateQueue,u=r.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var m=null,y=null;if(o=o.firstBaseUpdate,o!==null){do{var T={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};y===null?m=y=T:y=y.next=T,o=o.next}while(o!==null);y===null?m=y=i:y=y.next=i}else m=y=i;o={baseState:u.baseState,firstBaseUpdate:m,lastBaseUpdate:y,shared:u.shared,callbacks:u.callbacks},r.updateQueue=o;return}r=o.lastBaseUpdate,r===null?o.firstBaseUpdate=i:r.next=i,o.lastBaseUpdate=i}var gh=!1;function Co(){if(gh){var r=ta;if(r!==null)throw r}}function Ao(r,i,o,u){gh=!1;var m=r.updateQueue;cs=!1;var y=m.firstBaseUpdate,T=m.lastBaseUpdate,U=m.shared.pending;if(U!==null){m.shared.pending=null;var F=U,ne=F.next;F.next=null,T===null?y=ne:T.next=ne,T=F;var ce=r.alternate;ce!==null&&(ce=ce.updateQueue,U=ce.lastBaseUpdate,U!==T&&(U===null?ce.firstBaseUpdate=ne:U.next=ne,ce.lastBaseUpdate=F))}if(y!==null){var de=m.baseState;T=0,ce=ne=F=null,U=y;do{var se=U.lane&-536870913,ie=se!==U.lane;if(ie?(Fe&se)===se:(u&se)===se){se!==0&&se===ea&&(gh=!0),ce!==null&&(ce=ce.next={lane:0,tag:U.tag,payload:U.payload,callback:null,next:null});e:{var xe=r,ke=U;se=i;var rt=o;switch(ke.tag){case 1:if(xe=ke.payload,typeof xe=="function"){de=xe.call(rt,de,se);break e}de=xe;break e;case 3:xe.flags=xe.flags&-65537|128;case 0:if(xe=ke.payload,se=typeof xe=="function"?xe.call(rt,de,se):xe,se==null)break e;de=p({},de,se);break e;case 2:cs=!0}}se=U.callback,se!==null&&(r.flags|=64,ie&&(r.flags|=8192),ie=m.callbacks,ie===null?m.callbacks=[se]:ie.push(se))}else ie={lane:se,tag:U.tag,payload:U.payload,callback:U.callback,next:null},ce===null?(ne=ce=ie,F=de):ce=ce.next=ie,T|=se;if(U=U.next,U===null){if(U=m.shared.pending,U===null)break;ie=U,U=ie.next,ie.next=null,m.lastBaseUpdate=ie,m.shared.pending=null}}while(!0);ce===null&&(F=de),m.baseState=F,m.firstBaseUpdate=ne,m.lastBaseUpdate=ce,y===null&&(m.shared.lanes=0),gs|=T,r.lanes=T,r.memoizedState=de}}function y0(r,i){if(typeof r!="function")throw Error(s(191,r));r.call(i)}function v0(r,i){var o=r.callbacks;if(o!==null)for(r.callbacks=null,r=0;r<o.length;r++)y0(o[r],i)}var sa=M(null),qc=M(0);function b0(r,i){r=$r,Q(qc,r),Q(sa,i),$r=r|i.baseLanes}function yh(){Q(qc,$r),Q(sa,sa.current)}function vh(){$r=qc.current,B(sa),B(qc)}var vn=M(null),In=null;function fs(r){var i=r.alternate;Q(bt,bt.current&1),Q(vn,r),In===null&&(i===null||sa.current!==null||i.memoizedState!==null)&&(In=r)}function bh(r){Q(bt,bt.current),Q(vn,r),In===null&&(In=r)}function _0(r){r.tag===22?(Q(bt,bt.current),Q(vn,r),In===null&&(In=r)):hs()}function hs(){Q(bt,bt.current),Q(vn,vn.current)}function bn(r){B(vn),In===r&&(In=null),B(bt)}var bt=M(0);function Hc(r){for(var i=r;i!==null;){if(i.tag===13){var o=i.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||Cm(o)||Am(o)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break;for(;i.sibling===null;){if(i.return===null||i.return===r)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Nr=0,Be=null,tt=null,St=null,Vc=!1,ia=!1,ni=!1,Fc=0,To=0,aa=null,jT=0;function yt(){throw Error(s(321))}function _h(r,i){if(i===null)return!1;for(var o=0;o<i.length&&o<r.length;o++)if(!gn(r[o],i[o]))return!1;return!0}function wh(r,i,o,u,m,y){return Nr=y,Be=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,k.H=r===null||r.memoizedState===null?rv:$h,ni=!1,y=o(u,m),ni=!1,ia&&(y=x0(i,o,u,m)),w0(r),y}function w0(r){k.H=Ro;var i=tt!==null&&tt.next!==null;if(Nr=0,St=tt=Be=null,Vc=!1,To=0,aa=null,i)throw Error(s(300));r===null||Et||(r=r.dependencies,r!==null&&Uc(r)&&(Et=!0))}function x0(r,i,o,u){Be=r;var m=0;do{if(ia&&(aa=null),To=0,ia=!1,25<=m)throw Error(s(301));if(m+=1,St=tt=null,r.updateQueue!=null){var y=r.updateQueue;y.lastEffect=null,y.events=null,y.stores=null,y.memoCache!=null&&(y.memoCache.index=0)}k.H=sv,y=i(o,u)}while(ia);return y}function kT(){var r=k.H,i=r.useState()[0];return i=typeof i.then=="function"?No(i):i,r=r.useState()[0],(tt!==null?tt.memoizedState:null)!==r&&(Be.flags|=1024),i}function xh(){var r=Fc!==0;return Fc=0,r}function Sh(r,i,o){i.updateQueue=r.updateQueue,i.flags&=-2053,r.lanes&=~o}function Eh(r){if(Vc){for(r=r.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Vc=!1}Nr=0,St=tt=Be=null,ia=!1,To=Fc=0,aa=null}function Zt(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return St===null?Be.memoizedState=St=r:St=St.next=r,St}function _t(){if(tt===null){var r=Be.alternate;r=r!==null?r.memoizedState:null}else r=tt.next;var i=St===null?Be.memoizedState:St.next;if(i!==null)St=i,tt=r;else{if(r===null)throw Be.alternate===null?Error(s(467)):Error(s(310));tt=r,r={memoizedState:tt.memoizedState,baseState:tt.baseState,baseQueue:tt.baseQueue,queue:tt.queue,next:null},St===null?Be.memoizedState=St=r:St=St.next=r}return St}function Yc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function No(r){var i=To;return To+=1,aa===null&&(aa=[]),r=f0(aa,r,i),i=Be,(St===null?i.memoizedState:St.next)===null&&(i=i.alternate,k.H=i===null||i.memoizedState===null?rv:$h),r}function Gc(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return No(r);if(r.$$typeof===E)return zt(r)}throw Error(s(438,String(r)))}function Ch(r){var i=null,o=Be.updateQueue;if(o!==null&&(i=o.memoCache),i==null){var u=Be.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(i={data:u.data.map(function(m){return m.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),o===null&&(o=Yc(),Be.updateQueue=o),o.memoCache=i,o=i.data[i.index],o===void 0)for(o=i.data[i.index]=Array(r),u=0;u<r;u++)o[u]=K;return i.index++,o}function Or(r,i){return typeof i=="function"?i(r):i}function Xc(r){var i=_t();return Ah(i,tt,r)}function Ah(r,i,o){var u=r.queue;if(u===null)throw Error(s(311));u.lastRenderedReducer=o;var m=r.baseQueue,y=u.pending;if(y!==null){if(m!==null){var T=m.next;m.next=y.next,y.next=T}i.baseQueue=m=y,u.pending=null}if(y=r.baseState,m===null)r.memoizedState=y;else{i=m.next;var U=T=null,F=null,ne=i,ce=!1;do{var de=ne.lane&-536870913;if(de!==ne.lane?(Fe&de)===de:(Nr&de)===de){var se=ne.revertLane;if(se===0)F!==null&&(F=F.next={lane:0,revertLane:0,gesture:null,action:ne.action,hasEagerState:ne.hasEagerState,eagerState:ne.eagerState,next:null}),de===ea&&(ce=!0);else if((Nr&se)===se){ne=ne.next,se===ea&&(ce=!0);continue}else de={lane:0,revertLane:ne.revertLane,gesture:null,action:ne.action,hasEagerState:ne.hasEagerState,eagerState:ne.eagerState,next:null},F===null?(U=F=de,T=y):F=F.next=de,Be.lanes|=se,gs|=se;de=ne.action,ni&&o(y,de),y=ne.hasEagerState?ne.eagerState:o(y,de)}else se={lane:de,revertLane:ne.revertLane,gesture:ne.gesture,action:ne.action,hasEagerState:ne.hasEagerState,eagerState:ne.eagerState,next:null},F===null?(U=F=se,T=y):F=F.next=se,Be.lanes|=de,gs|=de;ne=ne.next}while(ne!==null&&ne!==i);if(F===null?T=y:F.next=U,!gn(y,r.memoizedState)&&(Et=!0,ce&&(o=ta,o!==null)))throw o;r.memoizedState=y,r.baseState=T,r.baseQueue=F,u.lastRenderedState=y}return m===null&&(u.lanes=0),[r.memoizedState,u.dispatch]}function Th(r){var i=_t(),o=i.queue;if(o===null)throw Error(s(311));o.lastRenderedReducer=r;var u=o.dispatch,m=o.pending,y=i.memoizedState;if(m!==null){o.pending=null;var T=m=m.next;do y=r(y,T.action),T=T.next;while(T!==m);gn(y,i.memoizedState)||(Et=!0),i.memoizedState=y,i.baseQueue===null&&(i.baseState=y),o.lastRenderedState=y}return[y,u]}function S0(r,i,o){var u=Be,m=_t(),y=Xe;if(y){if(o===void 0)throw Error(s(407));o=o()}else o=i();var T=!gn((tt||m).memoizedState,o);if(T&&(m.memoizedState=o,Et=!0),m=m.queue,Rh(A0.bind(null,u,m,r),[r]),m.getSnapshot!==i||T||St!==null&&St.memoizedState.tag&1){if(u.flags|=2048,oa(9,{destroy:void 0},C0.bind(null,u,m,o,i),null),it===null)throw Error(s(349));y||(Nr&127)!==0||E0(u,i,o)}return o}function E0(r,i,o){r.flags|=16384,r={getSnapshot:i,value:o},i=Be.updateQueue,i===null?(i=Yc(),Be.updateQueue=i,i.stores=[r]):(o=i.stores,o===null?i.stores=[r]:o.push(r))}function C0(r,i,o,u){i.value=o,i.getSnapshot=u,T0(i)&&N0(r)}function A0(r,i,o){return o(function(){T0(i)&&N0(r)})}function T0(r){var i=r.getSnapshot;r=r.value;try{var o=i();return!gn(r,o)}catch{return!0}}function N0(r){var i=Gs(r,2);i!==null&&cn(i,r,2)}function Nh(r){var i=Zt();if(typeof r=="function"){var o=r;if(r=o(),ni){we(!0);try{o()}finally{we(!1)}}}return i.memoizedState=i.baseState=r,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Or,lastRenderedState:r},i}function O0(r,i,o,u){return r.baseState=o,Ah(r,tt,typeof u=="function"?u:Or)}function MT(r,i,o,u,m){if(Wc(r))throw Error(s(485));if(r=i.action,r!==null){var y={payload:m,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(T){y.listeners.push(T)}};k.T!==null?o(!0):y.isTransition=!1,u(y),o=i.pending,o===null?(y.next=i.pending=y,R0(i,y)):(y.next=o.next,i.pending=o.next=y)}}function R0(r,i){var o=i.action,u=i.payload,m=r.state;if(i.isTransition){var y=k.T,T={};k.T=T;try{var U=o(m,u),F=k.S;F!==null&&F(T,U),j0(r,i,U)}catch(ne){Oh(r,i,ne)}finally{y!==null&&T.types!==null&&(y.types=T.types),k.T=y}}else try{y=o(m,u),j0(r,i,y)}catch(ne){Oh(r,i,ne)}}function j0(r,i,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(u){k0(r,i,u)},function(u){return Oh(r,i,u)}):k0(r,i,o)}function k0(r,i,o){i.status="fulfilled",i.value=o,M0(i),r.state=o,i=r.pending,i!==null&&(o=i.next,o===i?r.pending=null:(o=o.next,i.next=o,R0(r,o)))}function Oh(r,i,o){var u=r.pending;if(r.pending=null,u!==null){u=u.next;do i.status="rejected",i.reason=o,M0(i),i=i.next;while(i!==u)}r.action=null}function M0(r){r=r.listeners;for(var i=0;i<r.length;i++)(0,r[i])()}function D0(r,i){return i}function U0(r,i){if(Xe){var o=it.formState;if(o!==null){e:{var u=Be;if(Xe){if(ot){t:{for(var m=ot,y=$n;m.nodeType!==8;){if(!y){m=null;break t}if(m=Ln(m.nextSibling),m===null){m=null;break t}}y=m.data,m=y==="F!"||y==="F"?m:null}if(m){ot=Ln(m.nextSibling),u=m.data==="F!";break e}}os(u)}u=!1}u&&(i=o[0])}}return o=Zt(),o.memoizedState=o.baseState=i,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:D0,lastRenderedState:i},o.queue=u,o=ev.bind(null,Be,u),u.dispatch=o,u=Nh(!1),y=Uh.bind(null,Be,!1,u.queue),u=Zt(),m={state:i,dispatch:null,action:r,pending:null},u.queue=m,o=MT.bind(null,Be,m,y,o),m.dispatch=o,u.memoizedState=r,[i,o,!1]}function $0(r){var i=_t();return I0(i,tt,r)}function I0(r,i,o){if(i=Ah(r,i,D0)[0],r=Xc(Or)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var u=No(i)}catch(T){throw T===na?Lc:T}else u=i;i=_t();var m=i.queue,y=m.dispatch;return o!==i.memoizedState&&(Be.flags|=2048,oa(9,{destroy:void 0},DT.bind(null,m,o),null)),[u,y,r]}function DT(r,i){r.action=i}function L0(r){var i=_t(),o=tt;if(o!==null)return I0(i,o,r);_t(),i=i.memoizedState,o=_t();var u=o.queue.dispatch;return o.memoizedState=r,[i,u,!1]}function oa(r,i,o,u){return r={tag:r,create:o,deps:u,inst:i,next:null},i=Be.updateQueue,i===null&&(i=Yc(),Be.updateQueue=i),o=i.lastEffect,o===null?i.lastEffect=r.next=r:(u=o.next,o.next=r,r.next=u,i.lastEffect=r),r}function z0(){return _t().memoizedState}function Kc(r,i,o,u){var m=Zt();Be.flags|=r,m.memoizedState=oa(1|i,{destroy:void 0},o,u===void 0?null:u)}function Qc(r,i,o,u){var m=_t();u=u===void 0?null:u;var y=m.memoizedState.inst;tt!==null&&u!==null&&_h(u,tt.memoizedState.deps)?m.memoizedState=oa(i,y,o,u):(Be.flags|=r,m.memoizedState=oa(1|i,y,o,u))}function B0(r,i){Kc(8390656,8,r,i)}function Rh(r,i){Qc(2048,8,r,i)}function UT(r){Be.flags|=4;var i=Be.updateQueue;if(i===null)i=Yc(),Be.updateQueue=i,i.events=[r];else{var o=i.events;o===null?i.events=[r]:o.push(r)}}function P0(r){var i=_t().memoizedState;return UT({ref:i,nextImpl:r}),function(){if((We&2)!==0)throw Error(s(440));return i.impl.apply(void 0,arguments)}}function q0(r,i){return Qc(4,2,r,i)}function H0(r,i){return Qc(4,4,r,i)}function V0(r,i){if(typeof i=="function"){r=r();var o=i(r);return function(){typeof o=="function"?o():i(null)}}if(i!=null)return r=r(),i.current=r,function(){i.current=null}}function F0(r,i,o){o=o!=null?o.concat([r]):null,Qc(4,4,V0.bind(null,i,r),o)}function jh(){}function Y0(r,i){var o=_t();i=i===void 0?null:i;var u=o.memoizedState;return i!==null&&_h(i,u[1])?u[0]:(o.memoizedState=[r,i],r)}function G0(r,i){var o=_t();i=i===void 0?null:i;var u=o.memoizedState;if(i!==null&&_h(i,u[1]))return u[0];if(u=r(),ni){we(!0);try{r()}finally{we(!1)}}return o.memoizedState=[u,i],u}function kh(r,i,o){return o===void 0||(Nr&1073741824)!==0&&(Fe&261930)===0?r.memoizedState=i:(r.memoizedState=o,r=Xv(),Be.lanes|=r,gs|=r,o)}function X0(r,i,o,u){return gn(o,i)?o:sa.current!==null?(r=kh(r,o,u),gn(r,i)||(Et=!0),r):(Nr&42)===0||(Nr&1073741824)!==0&&(Fe&261930)===0?(Et=!0,r.memoizedState=o):(r=Xv(),Be.lanes|=r,gs|=r,i)}function K0(r,i,o,u,m){var y=z.p;z.p=y!==0&&8>y?y:8;var T=k.T,U={};k.T=U,Uh(r,!1,i,o);try{var F=m(),ne=k.S;if(ne!==null&&ne(U,F),F!==null&&typeof F=="object"&&typeof F.then=="function"){var ce=RT(F,u);Oo(r,i,ce,xn(r))}else Oo(r,i,u,xn(r))}catch(de){Oo(r,i,{then:function(){},status:"rejected",reason:de},xn())}finally{z.p=y,T!==null&&U.types!==null&&(T.types=U.types),k.T=T}}function $T(){}function Mh(r,i,o,u){if(r.tag!==5)throw Error(s(476));var m=Q0(r).queue;K0(r,m,i,V,o===null?$T:function(){return W0(r),o(u)})}function Q0(r){var i=r.memoizedState;if(i!==null)return i;i={memoizedState:V,baseState:V,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Or,lastRenderedState:V},next:null};var o={};return i.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Or,lastRenderedState:o},next:null},r.memoizedState=i,r=r.alternate,r!==null&&(r.memoizedState=i),i}function W0(r){var i=Q0(r);i.next===null&&(i=r.alternate.memoizedState),Oo(r,i.next.queue,{},xn())}function Dh(){return zt(Yo)}function J0(){return _t().memoizedState}function Z0(){return _t().memoizedState}function IT(r){for(var i=r.return;i!==null;){switch(i.tag){case 24:case 3:var o=xn();r=us(o);var u=ds(i,r,o);u!==null&&(cn(u,i,o),Eo(u,i,o)),i={cache:ch()},r.payload=i;return}i=i.return}}function LT(r,i,o){var u=xn();o={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},Wc(r)?tv(i,o):(o=Jf(r,i,o,u),o!==null&&(cn(o,r,u),nv(o,i,u)))}function ev(r,i,o){var u=xn();Oo(r,i,o,u)}function Oo(r,i,o,u){var m={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null};if(Wc(r))tv(i,m);else{var y=r.alternate;if(r.lanes===0&&(y===null||y.lanes===0)&&(y=i.lastRenderedReducer,y!==null))try{var T=i.lastRenderedState,U=y(T,o);if(m.hasEagerState=!0,m.eagerState=U,gn(U,T))return jc(r,i,m,0),it===null&&Rc(),!1}catch{}finally{}if(o=Jf(r,i,m,u),o!==null)return cn(o,r,u),nv(o,i,u),!0}return!1}function Uh(r,i,o,u){if(u={lane:2,revertLane:hm(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},Wc(r)){if(i)throw Error(s(479))}else i=Jf(r,o,u,2),i!==null&&cn(i,r,2)}function Wc(r){var i=r.alternate;return r===Be||i!==null&&i===Be}function tv(r,i){ia=Vc=!0;var o=r.pending;o===null?i.next=i:(i.next=o.next,o.next=i),r.pending=i}function nv(r,i,o){if((o&4194048)!==0){var u=i.lanes;u&=r.pendingLanes,o|=u,i.lanes=o,uc(r,o)}}var Ro={readContext:zt,use:Gc,useCallback:yt,useContext:yt,useEffect:yt,useImperativeHandle:yt,useLayoutEffect:yt,useInsertionEffect:yt,useMemo:yt,useReducer:yt,useRef:yt,useState:yt,useDebugValue:yt,useDeferredValue:yt,useTransition:yt,useSyncExternalStore:yt,useId:yt,useHostTransitionStatus:yt,useFormState:yt,useActionState:yt,useOptimistic:yt,useMemoCache:yt,useCacheRefresh:yt};Ro.useEffectEvent=yt;var rv={readContext:zt,use:Gc,useCallback:function(r,i){return Zt().memoizedState=[r,i===void 0?null:i],r},useContext:zt,useEffect:B0,useImperativeHandle:function(r,i,o){o=o!=null?o.concat([r]):null,Kc(4194308,4,V0.bind(null,i,r),o)},useLayoutEffect:function(r,i){return Kc(4194308,4,r,i)},useInsertionEffect:function(r,i){Kc(4,2,r,i)},useMemo:function(r,i){var o=Zt();i=i===void 0?null:i;var u=r();if(ni){we(!0);try{r()}finally{we(!1)}}return o.memoizedState=[u,i],u},useReducer:function(r,i,o){var u=Zt();if(o!==void 0){var m=o(i);if(ni){we(!0);try{o(i)}finally{we(!1)}}}else m=i;return u.memoizedState=u.baseState=m,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:m},u.queue=r,r=r.dispatch=LT.bind(null,Be,r),[u.memoizedState,r]},useRef:function(r){var i=Zt();return r={current:r},i.memoizedState=r},useState:function(r){r=Nh(r);var i=r.queue,o=ev.bind(null,Be,i);return i.dispatch=o,[r.memoizedState,o]},useDebugValue:jh,useDeferredValue:function(r,i){var o=Zt();return kh(o,r,i)},useTransition:function(){var r=Nh(!1);return r=K0.bind(null,Be,r.queue,!0,!1),Zt().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,i,o){var u=Be,m=Zt();if(Xe){if(o===void 0)throw Error(s(407));o=o()}else{if(o=i(),it===null)throw Error(s(349));(Fe&127)!==0||E0(u,i,o)}m.memoizedState=o;var y={value:o,getSnapshot:i};return m.queue=y,B0(A0.bind(null,u,y,r),[r]),u.flags|=2048,oa(9,{destroy:void 0},C0.bind(null,u,y,o,i),null),o},useId:function(){var r=Zt(),i=it.identifierPrefix;if(Xe){var o=or,u=ar;o=(u&~(1<<32-Ue(u)-1)).toString(32)+o,i="_"+i+"R_"+o,o=Fc++,0<o&&(i+="H"+o.toString(32)),i+="_"}else o=jT++,i="_"+i+"r_"+o.toString(32)+"_";return r.memoizedState=i},useHostTransitionStatus:Dh,useFormState:U0,useActionState:U0,useOptimistic:function(r){var i=Zt();i.memoizedState=i.baseState=r;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=o,i=Uh.bind(null,Be,!0,o),o.dispatch=i,[r,i]},useMemoCache:Ch,useCacheRefresh:function(){return Zt().memoizedState=IT.bind(null,Be)},useEffectEvent:function(r){var i=Zt(),o={impl:r};return i.memoizedState=o,function(){if((We&2)!==0)throw Error(s(440));return o.impl.apply(void 0,arguments)}}},$h={readContext:zt,use:Gc,useCallback:Y0,useContext:zt,useEffect:Rh,useImperativeHandle:F0,useInsertionEffect:q0,useLayoutEffect:H0,useMemo:G0,useReducer:Xc,useRef:z0,useState:function(){return Xc(Or)},useDebugValue:jh,useDeferredValue:function(r,i){var o=_t();return X0(o,tt.memoizedState,r,i)},useTransition:function(){var r=Xc(Or)[0],i=_t().memoizedState;return[typeof r=="boolean"?r:No(r),i]},useSyncExternalStore:S0,useId:J0,useHostTransitionStatus:Dh,useFormState:$0,useActionState:$0,useOptimistic:function(r,i){var o=_t();return O0(o,tt,r,i)},useMemoCache:Ch,useCacheRefresh:Z0};$h.useEffectEvent=P0;var sv={readContext:zt,use:Gc,useCallback:Y0,useContext:zt,useEffect:Rh,useImperativeHandle:F0,useInsertionEffect:q0,useLayoutEffect:H0,useMemo:G0,useReducer:Th,useRef:z0,useState:function(){return Th(Or)},useDebugValue:jh,useDeferredValue:function(r,i){var o=_t();return tt===null?kh(o,r,i):X0(o,tt.memoizedState,r,i)},useTransition:function(){var r=Th(Or)[0],i=_t().memoizedState;return[typeof r=="boolean"?r:No(r),i]},useSyncExternalStore:S0,useId:J0,useHostTransitionStatus:Dh,useFormState:L0,useActionState:L0,useOptimistic:function(r,i){var o=_t();return tt!==null?O0(o,tt,r,i):(o.baseState=r,[r,o.queue.dispatch])},useMemoCache:Ch,useCacheRefresh:Z0};sv.useEffectEvent=P0;function Ih(r,i,o,u){i=r.memoizedState,o=o(u,i),o=o==null?i:p({},i,o),r.memoizedState=o,r.lanes===0&&(r.updateQueue.baseState=o)}var Lh={enqueueSetState:function(r,i,o){r=r._reactInternals;var u=xn(),m=us(u);m.payload=i,o!=null&&(m.callback=o),i=ds(r,m,u),i!==null&&(cn(i,r,u),Eo(i,r,u))},enqueueReplaceState:function(r,i,o){r=r._reactInternals;var u=xn(),m=us(u);m.tag=1,m.payload=i,o!=null&&(m.callback=o),i=ds(r,m,u),i!==null&&(cn(i,r,u),Eo(i,r,u))},enqueueForceUpdate:function(r,i){r=r._reactInternals;var o=xn(),u=us(o);u.tag=2,i!=null&&(u.callback=i),i=ds(r,u,o),i!==null&&(cn(i,r,o),Eo(i,r,o))}};function iv(r,i,o,u,m,y,T){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(u,y,T):i.prototype&&i.prototype.isPureReactComponent?!go(o,u)||!go(m,y):!0}function av(r,i,o,u){r=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(o,u),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(o,u),i.state!==r&&Lh.enqueueReplaceState(i,i.state,null)}function ri(r,i){var o=i;if("ref"in i){o={};for(var u in i)u!=="ref"&&(o[u]=i[u])}if(r=r.defaultProps){o===i&&(o=p({},o));for(var m in r)o[m]===void 0&&(o[m]=r[m])}return o}function ov(r){Oc(r)}function lv(r){console.error(r)}function cv(r){Oc(r)}function Jc(r,i){try{var o=r.onUncaughtError;o(i.value,{componentStack:i.stack})}catch(u){setTimeout(function(){throw u})}}function uv(r,i,o){try{var u=r.onCaughtError;u(o.value,{componentStack:o.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(m){setTimeout(function(){throw m})}}function zh(r,i,o){return o=us(o),o.tag=3,o.payload={element:null},o.callback=function(){Jc(r,i)},o}function dv(r){return r=us(r),r.tag=3,r}function fv(r,i,o,u){var m=o.type.getDerivedStateFromError;if(typeof m=="function"){var y=u.value;r.payload=function(){return m(y)},r.callback=function(){uv(i,o,u)}}var T=o.stateNode;T!==null&&typeof T.componentDidCatch=="function"&&(r.callback=function(){uv(i,o,u),typeof m!="function"&&(ys===null?ys=new Set([this]):ys.add(this));var U=u.stack;this.componentDidCatch(u.value,{componentStack:U!==null?U:""})})}function zT(r,i,o,u,m){if(o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(i=o.alternate,i!==null&&Zi(i,o,m,!0),o=vn.current,o!==null){switch(o.tag){case 31:case 13:return In===null?uu():o.alternate===null&&vt===0&&(vt=3),o.flags&=-257,o.flags|=65536,o.lanes=m,u===zc?o.flags|=16384:(i=o.updateQueue,i===null?o.updateQueue=new Set([u]):i.add(u),um(r,u,m)),!1;case 22:return o.flags|=65536,u===zc?o.flags|=16384:(i=o.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([u])},o.updateQueue=i):(o=i.retryQueue,o===null?i.retryQueue=new Set([u]):o.add(u)),um(r,u,m)),!1}throw Error(s(435,o.tag))}return um(r,u,m),uu(),!1}if(Xe)return i=vn.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=m,u!==sh&&(r=Error(s(422),{cause:u}),bo(Mn(r,o)))):(u!==sh&&(i=Error(s(423),{cause:u}),bo(Mn(i,o))),r=r.current.alternate,r.flags|=65536,m&=-m,r.lanes|=m,u=Mn(u,o),m=zh(r.stateNode,u,m),ph(r,m),vt!==4&&(vt=2)),!1;var y=Error(s(520),{cause:u});if(y=Mn(y,o),Lo===null?Lo=[y]:Lo.push(y),vt!==4&&(vt=2),i===null)return!0;u=Mn(u,o),o=i;do{switch(o.tag){case 3:return o.flags|=65536,r=m&-m,o.lanes|=r,r=zh(o.stateNode,u,r),ph(o,r),!1;case 1:if(i=o.type,y=o.stateNode,(o.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(ys===null||!ys.has(y))))return o.flags|=65536,m&=-m,o.lanes|=m,m=dv(m),fv(m,r,o,u),ph(o,m),!1}o=o.return}while(o!==null);return!1}var Bh=Error(s(461)),Et=!1;function Bt(r,i,o,u){i.child=r===null?g0(i,null,o,u):ti(i,r.child,o,u)}function hv(r,i,o,u,m){o=o.render;var y=i.ref;if("ref"in u){var T={};for(var U in u)U!=="ref"&&(T[U]=u[U])}else T=u;return Ws(i),u=wh(r,i,o,T,y,m),U=xh(),r!==null&&!Et?(Sh(r,i,m),Rr(r,i,m)):(Xe&&U&&nh(i),i.flags|=1,Bt(r,i,u,m),i.child)}function mv(r,i,o,u,m){if(r===null){var y=o.type;return typeof y=="function"&&!Zf(y)&&y.defaultProps===void 0&&o.compare===null?(i.tag=15,i.type=y,pv(r,i,y,u,m)):(r=Mc(o.type,null,u,i,i.mode,m),r.ref=i.ref,r.return=i,i.child=r)}if(y=r.child,!Xh(r,m)){var T=y.memoizedProps;if(o=o.compare,o=o!==null?o:go,o(T,u)&&r.ref===i.ref)return Rr(r,i,m)}return i.flags|=1,r=Er(y,u),r.ref=i.ref,r.return=i,i.child=r}function pv(r,i,o,u,m){if(r!==null){var y=r.memoizedProps;if(go(y,u)&&r.ref===i.ref)if(Et=!1,i.pendingProps=u=y,Xh(r,m))(r.flags&131072)!==0&&(Et=!0);else return i.lanes=r.lanes,Rr(r,i,m)}return Ph(r,i,o,u,m)}function gv(r,i,o,u){var m=u.children,y=r!==null?r.memoizedState:null;if(r===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((i.flags&128)!==0){if(y=y!==null?y.baseLanes|o:o,r!==null){for(u=i.child=r.child,m=0;u!==null;)m=m|u.lanes|u.childLanes,u=u.sibling;u=m&~y}else u=0,i.child=null;return yv(r,i,y,o,u)}if((o&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},r!==null&&Ic(i,y!==null?y.cachePool:null),y!==null?b0(i,y):yh(),_0(i);else return u=i.lanes=536870912,yv(r,i,y!==null?y.baseLanes|o:o,o,u)}else y!==null?(Ic(i,y.cachePool),b0(i,y),hs(),i.memoizedState=null):(r!==null&&Ic(i,null),yh(),hs());return Bt(r,i,m,o),i.child}function jo(r,i){return r!==null&&r.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function yv(r,i,o,u,m){var y=dh();return y=y===null?null:{parent:xt._currentValue,pool:y},i.memoizedState={baseLanes:o,cachePool:y},r!==null&&Ic(i,null),yh(),_0(i),r!==null&&Zi(r,i,u,!0),i.childLanes=m,null}function Zc(r,i){return i=tu({mode:i.mode,children:i.children},r.mode),i.ref=r.ref,r.child=i,i.return=r,i}function vv(r,i,o){return ti(i,r.child,null,o),r=Zc(i,i.pendingProps),r.flags|=2,bn(i),i.memoizedState=null,r}function BT(r,i,o){var u=i.pendingProps,m=(i.flags&128)!==0;if(i.flags&=-129,r===null){if(Xe){if(u.mode==="hidden")return r=Zc(i,u),i.lanes=536870912,jo(null,r);if(bh(i),(r=ot)?(r=Rb(r,$n),r=r!==null&&r.data==="&"?r:null,r!==null&&(i.memoizedState={dehydrated:r,treeContext:is!==null?{id:ar,overflow:or}:null,retryLane:536870912,hydrationErrors:null},o=t0(r),o.return=i,i.child=o,Lt=i,ot=null)):r=null,r===null)throw os(i);return i.lanes=536870912,null}return Zc(i,u)}var y=r.memoizedState;if(y!==null){var T=y.dehydrated;if(bh(i),m)if(i.flags&256)i.flags&=-257,i=vv(r,i,o);else if(i.memoizedState!==null)i.child=r.child,i.flags|=128,i=null;else throw Error(s(558));else if(Et||Zi(r,i,o,!1),m=(o&r.childLanes)!==0,Et||m){if(u=it,u!==null&&(T=dc(u,o),T!==0&&T!==y.retryLane))throw y.retryLane=T,Gs(r,T),cn(u,r,T),Bh;uu(),i=vv(r,i,o)}else r=y.treeContext,ot=Ln(T.nextSibling),Lt=i,Xe=!0,as=null,$n=!1,r!==null&&s0(i,r),i=Zc(i,u),i.flags|=4096;return i}return r=Er(r.child,{mode:u.mode,children:u.children}),r.ref=i.ref,i.child=r,r.return=i,r}function eu(r,i){var o=i.ref;if(o===null)r!==null&&r.ref!==null&&(i.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(s(284));(r===null||r.ref!==o)&&(i.flags|=4194816)}}function Ph(r,i,o,u,m){return Ws(i),o=wh(r,i,o,u,void 0,m),u=xh(),r!==null&&!Et?(Sh(r,i,m),Rr(r,i,m)):(Xe&&u&&nh(i),i.flags|=1,Bt(r,i,o,m),i.child)}function bv(r,i,o,u,m,y){return Ws(i),i.updateQueue=null,o=x0(i,u,o,m),w0(r),u=xh(),r!==null&&!Et?(Sh(r,i,y),Rr(r,i,y)):(Xe&&u&&nh(i),i.flags|=1,Bt(r,i,o,y),i.child)}function _v(r,i,o,u,m){if(Ws(i),i.stateNode===null){var y=Ki,T=o.contextType;typeof T=="object"&&T!==null&&(y=zt(T)),y=new o(u,y),i.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=Lh,i.stateNode=y,y._reactInternals=i,y=i.stateNode,y.props=u,y.state=i.memoizedState,y.refs={},hh(i),T=o.contextType,y.context=typeof T=="object"&&T!==null?zt(T):Ki,y.state=i.memoizedState,T=o.getDerivedStateFromProps,typeof T=="function"&&(Ih(i,o,T,u),y.state=i.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(T=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),T!==y.state&&Lh.enqueueReplaceState(y,y.state,null),Ao(i,u,y,m),Co(),y.state=i.memoizedState),typeof y.componentDidMount=="function"&&(i.flags|=4194308),u=!0}else if(r===null){y=i.stateNode;var U=i.memoizedProps,F=ri(o,U);y.props=F;var ne=y.context,ce=o.contextType;T=Ki,typeof ce=="object"&&ce!==null&&(T=zt(ce));var de=o.getDerivedStateFromProps;ce=typeof de=="function"||typeof y.getSnapshotBeforeUpdate=="function",U=i.pendingProps!==U,ce||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(U||ne!==T)&&av(i,y,u,T),cs=!1;var se=i.memoizedState;y.state=se,Ao(i,u,y,m),Co(),ne=i.memoizedState,U||se!==ne||cs?(typeof de=="function"&&(Ih(i,o,de,u),ne=i.memoizedState),(F=cs||iv(i,o,F,u,se,ne,T))?(ce||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(i.flags|=4194308)):(typeof y.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=u,i.memoizedState=ne),y.props=u,y.state=ne,y.context=T,u=F):(typeof y.componentDidMount=="function"&&(i.flags|=4194308),u=!1)}else{y=i.stateNode,mh(r,i),T=i.memoizedProps,ce=ri(o,T),y.props=ce,de=i.pendingProps,se=y.context,ne=o.contextType,F=Ki,typeof ne=="object"&&ne!==null&&(F=zt(ne)),U=o.getDerivedStateFromProps,(ne=typeof U=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(T!==de||se!==F)&&av(i,y,u,F),cs=!1,se=i.memoizedState,y.state=se,Ao(i,u,y,m),Co();var ie=i.memoizedState;T!==de||se!==ie||cs||r!==null&&r.dependencies!==null&&Uc(r.dependencies)?(typeof U=="function"&&(Ih(i,o,U,u),ie=i.memoizedState),(ce=cs||iv(i,o,ce,u,se,ie,F)||r!==null&&r.dependencies!==null&&Uc(r.dependencies))?(ne||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(u,ie,F),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(u,ie,F)),typeof y.componentDidUpdate=="function"&&(i.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof y.componentDidUpdate!="function"||T===r.memoizedProps&&se===r.memoizedState||(i.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||T===r.memoizedProps&&se===r.memoizedState||(i.flags|=1024),i.memoizedProps=u,i.memoizedState=ie),y.props=u,y.state=ie,y.context=F,u=ce):(typeof y.componentDidUpdate!="function"||T===r.memoizedProps&&se===r.memoizedState||(i.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||T===r.memoizedProps&&se===r.memoizedState||(i.flags|=1024),u=!1)}return y=u,eu(r,i),u=(i.flags&128)!==0,y||u?(y=i.stateNode,o=u&&typeof o.getDerivedStateFromError!="function"?null:y.render(),i.flags|=1,r!==null&&u?(i.child=ti(i,r.child,null,m),i.child=ti(i,null,o,m)):Bt(r,i,o,m),i.memoizedState=y.state,r=i.child):r=Rr(r,i,m),r}function wv(r,i,o,u){return Ks(),i.flags|=256,Bt(r,i,o,u),i.child}var qh={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Hh(r){return{baseLanes:r,cachePool:u0()}}function Vh(r,i,o){return r=r!==null?r.childLanes&~o:0,i&&(r|=wn),r}function xv(r,i,o){var u=i.pendingProps,m=!1,y=(i.flags&128)!==0,T;if((T=y)||(T=r!==null&&r.memoizedState===null?!1:(bt.current&2)!==0),T&&(m=!0,i.flags&=-129),T=(i.flags&32)!==0,i.flags&=-33,r===null){if(Xe){if(m?fs(i):hs(),(r=ot)?(r=Rb(r,$n),r=r!==null&&r.data!=="&"?r:null,r!==null&&(i.memoizedState={dehydrated:r,treeContext:is!==null?{id:ar,overflow:or}:null,retryLane:536870912,hydrationErrors:null},o=t0(r),o.return=i,i.child=o,Lt=i,ot=null)):r=null,r===null)throw os(i);return Am(r)?i.lanes=32:i.lanes=536870912,null}var U=u.children;return u=u.fallback,m?(hs(),m=i.mode,U=tu({mode:"hidden",children:U},m),u=Xs(u,m,o,null),U.return=i,u.return=i,U.sibling=u,i.child=U,u=i.child,u.memoizedState=Hh(o),u.childLanes=Vh(r,T,o),i.memoizedState=qh,jo(null,u)):(fs(i),Fh(i,U))}var F=r.memoizedState;if(F!==null&&(U=F.dehydrated,U!==null)){if(y)i.flags&256?(fs(i),i.flags&=-257,i=Yh(r,i,o)):i.memoizedState!==null?(hs(),i.child=r.child,i.flags|=128,i=null):(hs(),U=u.fallback,m=i.mode,u=tu({mode:"visible",children:u.children},m),U=Xs(U,m,o,null),U.flags|=2,u.return=i,U.return=i,u.sibling=U,i.child=u,ti(i,r.child,null,o),u=i.child,u.memoizedState=Hh(o),u.childLanes=Vh(r,T,o),i.memoizedState=qh,i=jo(null,u));else if(fs(i),Am(U)){if(T=U.nextSibling&&U.nextSibling.dataset,T)var ne=T.dgst;T=ne,u=Error(s(419)),u.stack="",u.digest=T,bo({value:u,source:null,stack:null}),i=Yh(r,i,o)}else if(Et||Zi(r,i,o,!1),T=(o&r.childLanes)!==0,Et||T){if(T=it,T!==null&&(u=dc(T,o),u!==0&&u!==F.retryLane))throw F.retryLane=u,Gs(r,u),cn(T,r,u),Bh;Cm(U)||uu(),i=Yh(r,i,o)}else Cm(U)?(i.flags|=192,i.child=r.child,i=null):(r=F.treeContext,ot=Ln(U.nextSibling),Lt=i,Xe=!0,as=null,$n=!1,r!==null&&s0(i,r),i=Fh(i,u.children),i.flags|=4096);return i}return m?(hs(),U=u.fallback,m=i.mode,F=r.child,ne=F.sibling,u=Er(F,{mode:"hidden",children:u.children}),u.subtreeFlags=F.subtreeFlags&65011712,ne!==null?U=Er(ne,U):(U=Xs(U,m,o,null),U.flags|=2),U.return=i,u.return=i,u.sibling=U,i.child=u,jo(null,u),u=i.child,U=r.child.memoizedState,U===null?U=Hh(o):(m=U.cachePool,m!==null?(F=xt._currentValue,m=m.parent!==F?{parent:F,pool:F}:m):m=u0(),U={baseLanes:U.baseLanes|o,cachePool:m}),u.memoizedState=U,u.childLanes=Vh(r,T,o),i.memoizedState=qh,jo(r.child,u)):(fs(i),o=r.child,r=o.sibling,o=Er(o,{mode:"visible",children:u.children}),o.return=i,o.sibling=null,r!==null&&(T=i.deletions,T===null?(i.deletions=[r],i.flags|=16):T.push(r)),i.child=o,i.memoizedState=null,o)}function Fh(r,i){return i=tu({mode:"visible",children:i},r.mode),i.return=r,r.child=i}function tu(r,i){return r=yn(22,r,null,i),r.lanes=0,r}function Yh(r,i,o){return ti(i,r.child,null,o),r=Fh(i,i.pendingProps.children),r.flags|=2,i.memoizedState=null,r}function Sv(r,i,o){r.lanes|=i;var u=r.alternate;u!==null&&(u.lanes|=i),oh(r.return,i,o)}function Gh(r,i,o,u,m,y){var T=r.memoizedState;T===null?r.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:m,treeForkCount:y}:(T.isBackwards=i,T.rendering=null,T.renderingStartTime=0,T.last=u,T.tail=o,T.tailMode=m,T.treeForkCount=y)}function Ev(r,i,o){var u=i.pendingProps,m=u.revealOrder,y=u.tail;u=u.children;var T=bt.current,U=(T&2)!==0;if(U?(T=T&1|2,i.flags|=128):T&=1,Q(bt,T),Bt(r,i,u,o),u=Xe?vo:0,!U&&r!==null&&(r.flags&128)!==0)e:for(r=i.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&Sv(r,o,i);else if(r.tag===19)Sv(r,o,i);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break e;for(;r.sibling===null;){if(r.return===null||r.return===i)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}switch(m){case"forwards":for(o=i.child,m=null;o!==null;)r=o.alternate,r!==null&&Hc(r)===null&&(m=o),o=o.sibling;o=m,o===null?(m=i.child,i.child=null):(m=o.sibling,o.sibling=null),Gh(i,!1,m,o,y,u);break;case"backwards":case"unstable_legacy-backwards":for(o=null,m=i.child,i.child=null;m!==null;){if(r=m.alternate,r!==null&&Hc(r)===null){i.child=m;break}r=m.sibling,m.sibling=o,o=m,m=r}Gh(i,!0,o,null,y,u);break;case"together":Gh(i,!1,null,null,void 0,u);break;default:i.memoizedState=null}return i.child}function Rr(r,i,o){if(r!==null&&(i.dependencies=r.dependencies),gs|=i.lanes,(o&i.childLanes)===0)if(r!==null){if(Zi(r,i,o,!1),(o&i.childLanes)===0)return null}else return null;if(r!==null&&i.child!==r.child)throw Error(s(153));if(i.child!==null){for(r=i.child,o=Er(r,r.pendingProps),i.child=o,o.return=i;r.sibling!==null;)r=r.sibling,o=o.sibling=Er(r,r.pendingProps),o.return=i;o.sibling=null}return i.child}function Xh(r,i){return(r.lanes&i)!==0?!0:(r=r.dependencies,!!(r!==null&&Uc(r)))}function PT(r,i,o){switch(i.tag){case 3:le(i,i.stateNode.containerInfo),ls(i,xt,r.memoizedState.cache),Ks();break;case 27:case 5:fe(i);break;case 4:le(i,i.stateNode.containerInfo);break;case 10:ls(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,bh(i),null;break;case 13:var u=i.memoizedState;if(u!==null)return u.dehydrated!==null?(fs(i),i.flags|=128,null):(o&i.child.childLanes)!==0?xv(r,i,o):(fs(i),r=Rr(r,i,o),r!==null?r.sibling:null);fs(i);break;case 19:var m=(r.flags&128)!==0;if(u=(o&i.childLanes)!==0,u||(Zi(r,i,o,!1),u=(o&i.childLanes)!==0),m){if(u)return Ev(r,i,o);i.flags|=128}if(m=i.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),Q(bt,bt.current),u)break;return null;case 22:return i.lanes=0,gv(r,i,o,i.pendingProps);case 24:ls(i,xt,r.memoizedState.cache)}return Rr(r,i,o)}function Cv(r,i,o){if(r!==null)if(r.memoizedProps!==i.pendingProps)Et=!0;else{if(!Xh(r,o)&&(i.flags&128)===0)return Et=!1,PT(r,i,o);Et=(r.flags&131072)!==0}else Et=!1,Xe&&(i.flags&1048576)!==0&&r0(i,vo,i.index);switch(i.lanes=0,i.tag){case 16:e:{var u=i.pendingProps;if(r=Zs(i.elementType),i.type=r,typeof r=="function")Zf(r)?(u=ri(r,u),i.tag=1,i=_v(null,i,r,u,o)):(i.tag=0,i=Ph(null,i,r,u,o));else{if(r!=null){var m=r.$$typeof;if(m===A){i.tag=11,i=hv(null,i,r,u,o);break e}else if(m===D){i.tag=14,i=mv(null,i,r,u,o);break e}}throw i=I(r)||r,Error(s(306,i,""))}}return i;case 0:return Ph(r,i,i.type,i.pendingProps,o);case 1:return u=i.type,m=ri(u,i.pendingProps),_v(r,i,u,m,o);case 3:e:{if(le(i,i.stateNode.containerInfo),r===null)throw Error(s(387));u=i.pendingProps;var y=i.memoizedState;m=y.element,mh(r,i),Ao(i,u,null,o);var T=i.memoizedState;if(u=T.cache,ls(i,xt,u),u!==y.cache&&lh(i,[xt],o,!0),Co(),u=T.element,y.isDehydrated)if(y={element:u,isDehydrated:!1,cache:T.cache},i.updateQueue.baseState=y,i.memoizedState=y,i.flags&256){i=wv(r,i,u,o);break e}else if(u!==m){m=Mn(Error(s(424)),i),bo(m),i=wv(r,i,u,o);break e}else{switch(r=i.stateNode.containerInfo,r.nodeType){case 9:r=r.body;break;default:r=r.nodeName==="HTML"?r.ownerDocument.body:r}for(ot=Ln(r.firstChild),Lt=i,Xe=!0,as=null,$n=!0,o=g0(i,null,u,o),i.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(Ks(),u===m){i=Rr(r,i,o);break e}Bt(r,i,u,o)}i=i.child}return i;case 26:return eu(r,i),r===null?(o=$b(i.type,null,i.pendingProps,null))?i.memoizedState=o:Xe||(o=i.type,r=i.pendingProps,u=yu(ge.current).createElement(o),u[Ot]=i,u[Ft]=r,Pt(u,o,r),wt(u),i.stateNode=u):i.memoizedState=$b(i.type,r.memoizedProps,i.pendingProps,r.memoizedState),null;case 27:return fe(i),r===null&&Xe&&(u=i.stateNode=Mb(i.type,i.pendingProps,ge.current),Lt=i,$n=!0,m=ot,ws(i.type)?(Tm=m,ot=Ln(u.firstChild)):ot=m),Bt(r,i,i.pendingProps.children,o),eu(r,i),r===null&&(i.flags|=4194304),i.child;case 5:return r===null&&Xe&&((m=u=ot)&&(u=yN(u,i.type,i.pendingProps,$n),u!==null?(i.stateNode=u,Lt=i,ot=Ln(u.firstChild),$n=!1,m=!0):m=!1),m||os(i)),fe(i),m=i.type,y=i.pendingProps,T=r!==null?r.memoizedProps:null,u=y.children,xm(m,y)?u=null:T!==null&&xm(m,T)&&(i.flags|=32),i.memoizedState!==null&&(m=wh(r,i,kT,null,null,o),Yo._currentValue=m),eu(r,i),Bt(r,i,u,o),i.child;case 6:return r===null&&Xe&&((r=o=ot)&&(o=vN(o,i.pendingProps,$n),o!==null?(i.stateNode=o,Lt=i,ot=null,r=!0):r=!1),r||os(i)),null;case 13:return xv(r,i,o);case 4:return le(i,i.stateNode.containerInfo),u=i.pendingProps,r===null?i.child=ti(i,null,u,o):Bt(r,i,u,o),i.child;case 11:return hv(r,i,i.type,i.pendingProps,o);case 7:return Bt(r,i,i.pendingProps,o),i.child;case 8:return Bt(r,i,i.pendingProps.children,o),i.child;case 12:return Bt(r,i,i.pendingProps.children,o),i.child;case 10:return u=i.pendingProps,ls(i,i.type,u.value),Bt(r,i,u.children,o),i.child;case 9:return m=i.type._context,u=i.pendingProps.children,Ws(i),m=zt(m),u=u(m),i.flags|=1,Bt(r,i,u,o),i.child;case 14:return mv(r,i,i.type,i.pendingProps,o);case 15:return pv(r,i,i.type,i.pendingProps,o);case 19:return Ev(r,i,o);case 31:return BT(r,i,o);case 22:return gv(r,i,o,i.pendingProps);case 24:return Ws(i),u=zt(xt),r===null?(m=dh(),m===null&&(m=it,y=ch(),m.pooledCache=y,y.refCount++,y!==null&&(m.pooledCacheLanes|=o),m=y),i.memoizedState={parent:u,cache:m},hh(i),ls(i,xt,m)):((r.lanes&o)!==0&&(mh(r,i),Ao(i,null,null,o),Co()),m=r.memoizedState,y=i.memoizedState,m.parent!==u?(m={parent:u,cache:u},i.memoizedState=m,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=m),ls(i,xt,u)):(u=y.cache,ls(i,xt,u),u!==m.cache&&lh(i,[xt],o,!0))),Bt(r,i,i.pendingProps.children,o),i.child;case 29:throw i.pendingProps}throw Error(s(156,i.tag))}function jr(r){r.flags|=4}function Kh(r,i,o,u,m){if((i=(r.mode&32)!==0)&&(i=!1),i){if(r.flags|=16777216,(m&335544128)===m)if(r.stateNode.complete)r.flags|=8192;else if(Jv())r.flags|=8192;else throw ei=zc,fh}else r.flags&=-16777217}function Av(r,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!Pb(i))if(Jv())r.flags|=8192;else throw ei=zc,fh}function nu(r,i){i!==null&&(r.flags|=4),r.flags&16384&&(i=r.tag!==22?lc():536870912,r.lanes|=i,da|=i)}function ko(r,i){if(!Xe)switch(r.tailMode){case"hidden":i=r.tail;for(var o=null;i!==null;)i.alternate!==null&&(o=i),i=i.sibling;o===null?r.tail=null:o.sibling=null;break;case"collapsed":o=r.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?i||r.tail===null?r.tail=null:r.tail.sibling=null:u.sibling=null}}function lt(r){var i=r.alternate!==null&&r.alternate.child===r.child,o=0,u=0;if(i)for(var m=r.child;m!==null;)o|=m.lanes|m.childLanes,u|=m.subtreeFlags&65011712,u|=m.flags&65011712,m.return=r,m=m.sibling;else for(m=r.child;m!==null;)o|=m.lanes|m.childLanes,u|=m.subtreeFlags,u|=m.flags,m.return=r,m=m.sibling;return r.subtreeFlags|=u,r.childLanes=o,i}function qT(r,i,o){var u=i.pendingProps;switch(rh(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return lt(i),null;case 1:return lt(i),null;case 3:return o=i.stateNode,u=null,r!==null&&(u=r.memoizedState.cache),i.memoizedState.cache!==u&&(i.flags|=2048),Tr(xt),Z(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(r===null||r.child===null)&&(Ji(i)?jr(i):r===null||r.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,ih())),lt(i),null;case 26:var m=i.type,y=i.memoizedState;return r===null?(jr(i),y!==null?(lt(i),Av(i,y)):(lt(i),Kh(i,m,null,u,o))):y?y!==r.memoizedState?(jr(i),lt(i),Av(i,y)):(lt(i),i.flags&=-16777217):(r=r.memoizedProps,r!==u&&jr(i),lt(i),Kh(i,m,r,u,o)),null;case 27:if(pe(i),o=ge.current,m=i.type,r!==null&&i.stateNode!=null)r.memoizedProps!==u&&jr(i);else{if(!u){if(i.stateNode===null)throw Error(s(166));return lt(i),null}r=ee.current,Ji(i)?i0(i):(r=Mb(m,u,o),i.stateNode=r,jr(i))}return lt(i),null;case 5:if(pe(i),m=i.type,r!==null&&i.stateNode!=null)r.memoizedProps!==u&&jr(i);else{if(!u){if(i.stateNode===null)throw Error(s(166));return lt(i),null}if(y=ee.current,Ji(i))i0(i);else{var T=yu(ge.current);switch(y){case 1:y=T.createElementNS("http://www.w3.org/2000/svg",m);break;case 2:y=T.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;default:switch(m){case"svg":y=T.createElementNS("http://www.w3.org/2000/svg",m);break;case"math":y=T.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;case"script":y=T.createElement("div"),y.innerHTML="<script><\/script>",y=y.removeChild(y.firstChild);break;case"select":y=typeof u.is=="string"?T.createElement("select",{is:u.is}):T.createElement("select"),u.multiple?y.multiple=!0:u.size&&(y.size=u.size);break;default:y=typeof u.is=="string"?T.createElement(m,{is:u.is}):T.createElement(m)}}y[Ot]=i,y[Ft]=u;e:for(T=i.child;T!==null;){if(T.tag===5||T.tag===6)y.appendChild(T.stateNode);else if(T.tag!==4&&T.tag!==27&&T.child!==null){T.child.return=T,T=T.child;continue}if(T===i)break e;for(;T.sibling===null;){if(T.return===null||T.return===i)break e;T=T.return}T.sibling.return=T.return,T=T.sibling}i.stateNode=y;e:switch(Pt(y,m,u),m){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&jr(i)}}return lt(i),Kh(i,i.type,r===null?null:r.memoizedProps,i.pendingProps,o),null;case 6:if(r&&i.stateNode!=null)r.memoizedProps!==u&&jr(i);else{if(typeof u!="string"&&i.stateNode===null)throw Error(s(166));if(r=ge.current,Ji(i)){if(r=i.stateNode,o=i.memoizedProps,u=null,m=Lt,m!==null)switch(m.tag){case 27:case 5:u=m.memoizedProps}r[Ot]=i,r=!!(r.nodeValue===o||u!==null&&u.suppressHydrationWarning===!0||xb(r.nodeValue,o)),r||os(i,!0)}else r=yu(r).createTextNode(u),r[Ot]=i,i.stateNode=r}return lt(i),null;case 31:if(o=i.memoizedState,r===null||r.memoizedState!==null){if(u=Ji(i),o!==null){if(r===null){if(!u)throw Error(s(318));if(r=i.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(s(557));r[Ot]=i}else Ks(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;lt(i),r=!1}else o=ih(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=o),r=!0;if(!r)return i.flags&256?(bn(i),i):(bn(i),null);if((i.flags&128)!==0)throw Error(s(558))}return lt(i),null;case 13:if(u=i.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(m=Ji(i),u!==null&&u.dehydrated!==null){if(r===null){if(!m)throw Error(s(318));if(m=i.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(s(317));m[Ot]=i}else Ks(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;lt(i),m=!1}else m=ih(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=m),m=!0;if(!m)return i.flags&256?(bn(i),i):(bn(i),null)}return bn(i),(i.flags&128)!==0?(i.lanes=o,i):(o=u!==null,r=r!==null&&r.memoizedState!==null,o&&(u=i.child,m=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(m=u.alternate.memoizedState.cachePool.pool),y=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(y=u.memoizedState.cachePool.pool),y!==m&&(u.flags|=2048)),o!==r&&o&&(i.child.flags|=8192),nu(i,i.updateQueue),lt(i),null);case 4:return Z(),r===null&&ym(i.stateNode.containerInfo),lt(i),null;case 10:return Tr(i.type),lt(i),null;case 19:if(B(bt),u=i.memoizedState,u===null)return lt(i),null;if(m=(i.flags&128)!==0,y=u.rendering,y===null)if(m)ko(u,!1);else{if(vt!==0||r!==null&&(r.flags&128)!==0)for(r=i.child;r!==null;){if(y=Hc(r),y!==null){for(i.flags|=128,ko(u,!1),r=y.updateQueue,i.updateQueue=r,nu(i,r),i.subtreeFlags=0,r=o,o=i.child;o!==null;)e0(o,r),o=o.sibling;return Q(bt,bt.current&1|2),Xe&&Cr(i,u.treeForkCount),i.child}r=r.sibling}u.tail!==null&&ct()>ou&&(i.flags|=128,m=!0,ko(u,!1),i.lanes=4194304)}else{if(!m)if(r=Hc(y),r!==null){if(i.flags|=128,m=!0,r=r.updateQueue,i.updateQueue=r,nu(i,r),ko(u,!0),u.tail===null&&u.tailMode==="hidden"&&!y.alternate&&!Xe)return lt(i),null}else 2*ct()-u.renderingStartTime>ou&&o!==536870912&&(i.flags|=128,m=!0,ko(u,!1),i.lanes=4194304);u.isBackwards?(y.sibling=i.child,i.child=y):(r=u.last,r!==null?r.sibling=y:i.child=y,u.last=y)}return u.tail!==null?(r=u.tail,u.rendering=r,u.tail=r.sibling,u.renderingStartTime=ct(),r.sibling=null,o=bt.current,Q(bt,m?o&1|2:o&1),Xe&&Cr(i,u.treeForkCount),r):(lt(i),null);case 22:case 23:return bn(i),vh(),u=i.memoizedState!==null,r!==null?r.memoizedState!==null!==u&&(i.flags|=8192):u&&(i.flags|=8192),u?(o&536870912)!==0&&(i.flags&128)===0&&(lt(i),i.subtreeFlags&6&&(i.flags|=8192)):lt(i),o=i.updateQueue,o!==null&&nu(i,o.retryQueue),o=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(o=r.memoizedState.cachePool.pool),u=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(u=i.memoizedState.cachePool.pool),u!==o&&(i.flags|=2048),r!==null&&B(Js),null;case 24:return o=null,r!==null&&(o=r.memoizedState.cache),i.memoizedState.cache!==o&&(i.flags|=2048),Tr(xt),lt(i),null;case 25:return null;case 30:return null}throw Error(s(156,i.tag))}function HT(r,i){switch(rh(i),i.tag){case 1:return r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 3:return Tr(xt),Z(),r=i.flags,(r&65536)!==0&&(r&128)===0?(i.flags=r&-65537|128,i):null;case 26:case 27:case 5:return pe(i),null;case 31:if(i.memoizedState!==null){if(bn(i),i.alternate===null)throw Error(s(340));Ks()}return r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 13:if(bn(i),r=i.memoizedState,r!==null&&r.dehydrated!==null){if(i.alternate===null)throw Error(s(340));Ks()}return r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 19:return B(bt),null;case 4:return Z(),null;case 10:return Tr(i.type),null;case 22:case 23:return bn(i),vh(),r!==null&&B(Js),r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 24:return Tr(xt),null;case 25:return null;default:return null}}function Tv(r,i){switch(rh(i),i.tag){case 3:Tr(xt),Z();break;case 26:case 27:case 5:pe(i);break;case 4:Z();break;case 31:i.memoizedState!==null&&bn(i);break;case 13:bn(i);break;case 19:B(bt);break;case 10:Tr(i.type);break;case 22:case 23:bn(i),vh(),r!==null&&B(Js);break;case 24:Tr(xt)}}function Mo(r,i){try{var o=i.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var m=u.next;o=m;do{if((o.tag&r)===r){u=void 0;var y=o.create,T=o.inst;u=y(),T.destroy=u}o=o.next}while(o!==m)}}catch(U){et(i,i.return,U)}}function ms(r,i,o){try{var u=i.updateQueue,m=u!==null?u.lastEffect:null;if(m!==null){var y=m.next;u=y;do{if((u.tag&r)===r){var T=u.inst,U=T.destroy;if(U!==void 0){T.destroy=void 0,m=i;var F=o,ne=U;try{ne()}catch(ce){et(m,F,ce)}}}u=u.next}while(u!==y)}}catch(ce){et(i,i.return,ce)}}function Nv(r){var i=r.updateQueue;if(i!==null){var o=r.stateNode;try{v0(i,o)}catch(u){et(r,r.return,u)}}}function Ov(r,i,o){o.props=ri(r.type,r.memoizedProps),o.state=r.memoizedState;try{o.componentWillUnmount()}catch(u){et(r,i,u)}}function Do(r,i){try{var o=r.ref;if(o!==null){switch(r.tag){case 26:case 27:case 5:var u=r.stateNode;break;case 30:u=r.stateNode;break;default:u=r.stateNode}typeof o=="function"?r.refCleanup=o(u):o.current=u}}catch(m){et(r,i,m)}}function lr(r,i){var o=r.ref,u=r.refCleanup;if(o!==null)if(typeof u=="function")try{u()}catch(m){et(r,i,m)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(m){et(r,i,m)}else o.current=null}function Rv(r){var i=r.type,o=r.memoizedProps,u=r.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":o.autoFocus&&u.focus();break e;case"img":o.src?u.src=o.src:o.srcSet&&(u.srcset=o.srcSet)}}catch(m){et(r,r.return,m)}}function Qh(r,i,o){try{var u=r.stateNode;dN(u,r.type,o,i),u[Ft]=i}catch(m){et(r,r.return,m)}}function jv(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&ws(r.type)||r.tag===4}function Wh(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||jv(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&ws(r.type)||r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function Jh(r,i,o){var u=r.tag;if(u===5||u===6)r=r.stateNode,i?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(r,i):(i=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,i.appendChild(r),o=o._reactRootContainer,o!=null||i.onclick!==null||(i.onclick=xr));else if(u!==4&&(u===27&&ws(r.type)&&(o=r.stateNode,i=null),r=r.child,r!==null))for(Jh(r,i,o),r=r.sibling;r!==null;)Jh(r,i,o),r=r.sibling}function ru(r,i,o){var u=r.tag;if(u===5||u===6)r=r.stateNode,i?o.insertBefore(r,i):o.appendChild(r);else if(u!==4&&(u===27&&ws(r.type)&&(o=r.stateNode),r=r.child,r!==null))for(ru(r,i,o),r=r.sibling;r!==null;)ru(r,i,o),r=r.sibling}function kv(r){var i=r.stateNode,o=r.memoizedProps;try{for(var u=r.type,m=i.attributes;m.length;)i.removeAttributeNode(m[0]);Pt(i,u,o),i[Ot]=r,i[Ft]=o}catch(y){et(r,r.return,y)}}var kr=!1,Ct=!1,Zh=!1,Mv=typeof WeakSet=="function"?WeakSet:Set,Ut=null;function VT(r,i){if(r=r.containerInfo,_m=Eu,r=Fy(r),Yf(r)){if("selectionStart"in r)var o={start:r.selectionStart,end:r.selectionEnd};else e:{o=(o=r.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var m=u.anchorOffset,y=u.focusNode;u=u.focusOffset;try{o.nodeType,y.nodeType}catch{o=null;break e}var T=0,U=-1,F=-1,ne=0,ce=0,de=r,se=null;t:for(;;){for(var ie;de!==o||m!==0&&de.nodeType!==3||(U=T+m),de!==y||u!==0&&de.nodeType!==3||(F=T+u),de.nodeType===3&&(T+=de.nodeValue.length),(ie=de.firstChild)!==null;)se=de,de=ie;for(;;){if(de===r)break t;if(se===o&&++ne===m&&(U=T),se===y&&++ce===u&&(F=T),(ie=de.nextSibling)!==null)break;de=se,se=de.parentNode}de=ie}o=U===-1||F===-1?null:{start:U,end:F}}else o=null}o=o||{start:0,end:0}}else o=null;for(wm={focusedElem:r,selectionRange:o},Eu=!1,Ut=i;Ut!==null;)if(i=Ut,r=i.child,(i.subtreeFlags&1028)!==0&&r!==null)r.return=i,Ut=r;else for(;Ut!==null;){switch(i=Ut,y=i.alternate,r=i.flags,i.tag){case 0:if((r&4)!==0&&(r=i.updateQueue,r=r!==null?r.events:null,r!==null))for(o=0;o<r.length;o++)m=r[o],m.ref.impl=m.nextImpl;break;case 11:case 15:break;case 1:if((r&1024)!==0&&y!==null){r=void 0,o=i,m=y.memoizedProps,y=y.memoizedState,u=o.stateNode;try{var xe=ri(o.type,m);r=u.getSnapshotBeforeUpdate(xe,y),u.__reactInternalSnapshotBeforeUpdate=r}catch(ke){et(o,o.return,ke)}}break;case 3:if((r&1024)!==0){if(r=i.stateNode.containerInfo,o=r.nodeType,o===9)Em(r);else if(o===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":Em(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(s(163))}if(r=i.sibling,r!==null){r.return=i.return,Ut=r;break}Ut=i.return}}function Dv(r,i,o){var u=o.flags;switch(o.tag){case 0:case 11:case 15:Dr(r,o),u&4&&Mo(5,o);break;case 1:if(Dr(r,o),u&4)if(r=o.stateNode,i===null)try{r.componentDidMount()}catch(T){et(o,o.return,T)}else{var m=ri(o.type,i.memoizedProps);i=i.memoizedState;try{r.componentDidUpdate(m,i,r.__reactInternalSnapshotBeforeUpdate)}catch(T){et(o,o.return,T)}}u&64&&Nv(o),u&512&&Do(o,o.return);break;case 3:if(Dr(r,o),u&64&&(r=o.updateQueue,r!==null)){if(i=null,o.child!==null)switch(o.child.tag){case 27:case 5:i=o.child.stateNode;break;case 1:i=o.child.stateNode}try{v0(r,i)}catch(T){et(o,o.return,T)}}break;case 27:i===null&&u&4&&kv(o);case 26:case 5:Dr(r,o),i===null&&u&4&&Rv(o),u&512&&Do(o,o.return);break;case 12:Dr(r,o);break;case 31:Dr(r,o),u&4&&Iv(r,o);break;case 13:Dr(r,o),u&4&&Lv(r,o),u&64&&(r=o.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(o=ZT.bind(null,o),bN(r,o))));break;case 22:if(u=o.memoizedState!==null||kr,!u){i=i!==null&&i.memoizedState!==null||Ct,m=kr;var y=Ct;kr=u,(Ct=i)&&!y?Ur(r,o,(o.subtreeFlags&8772)!==0):Dr(r,o),kr=m,Ct=y}break;case 30:break;default:Dr(r,o)}}function Uv(r){var i=r.alternate;i!==null&&(r.alternate=null,Uv(i)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(i=r.stateNode,i!==null&&io(i)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var ut=null,sn=!1;function Mr(r,i,o){for(o=o.child;o!==null;)$v(r,i,o),o=o.sibling}function $v(r,i,o){if(Ee&&typeof Ee.onCommitFiberUnmount=="function")try{Ee.onCommitFiberUnmount(me,o)}catch{}switch(o.tag){case 26:Ct||lr(o,i),Mr(r,i,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:Ct||lr(o,i);var u=ut,m=sn;ws(o.type)&&(ut=o.stateNode,sn=!1),Mr(r,i,o),Ho(o.stateNode),ut=u,sn=m;break;case 5:Ct||lr(o,i);case 6:if(u=ut,m=sn,ut=null,Mr(r,i,o),ut=u,sn=m,ut!==null)if(sn)try{(ut.nodeType===9?ut.body:ut.nodeName==="HTML"?ut.ownerDocument.body:ut).removeChild(o.stateNode)}catch(y){et(o,i,y)}else try{ut.removeChild(o.stateNode)}catch(y){et(o,i,y)}break;case 18:ut!==null&&(sn?(r=ut,Nb(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,o.stateNode),ba(r)):Nb(ut,o.stateNode));break;case 4:u=ut,m=sn,ut=o.stateNode.containerInfo,sn=!0,Mr(r,i,o),ut=u,sn=m;break;case 0:case 11:case 14:case 15:ms(2,o,i),Ct||ms(4,o,i),Mr(r,i,o);break;case 1:Ct||(lr(o,i),u=o.stateNode,typeof u.componentWillUnmount=="function"&&Ov(o,i,u)),Mr(r,i,o);break;case 21:Mr(r,i,o);break;case 22:Ct=(u=Ct)||o.memoizedState!==null,Mr(r,i,o),Ct=u;break;default:Mr(r,i,o)}}function Iv(r,i){if(i.memoizedState===null&&(r=i.alternate,r!==null&&(r=r.memoizedState,r!==null))){r=r.dehydrated;try{ba(r)}catch(o){et(i,i.return,o)}}}function Lv(r,i){if(i.memoizedState===null&&(r=i.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{ba(r)}catch(o){et(i,i.return,o)}}function FT(r){switch(r.tag){case 31:case 13:case 19:var i=r.stateNode;return i===null&&(i=r.stateNode=new Mv),i;case 22:return r=r.stateNode,i=r._retryCache,i===null&&(i=r._retryCache=new Mv),i;default:throw Error(s(435,r.tag))}}function su(r,i){var o=FT(r);i.forEach(function(u){if(!o.has(u)){o.add(u);var m=eN.bind(null,r,u);u.then(m,m)}})}function an(r,i){var o=i.deletions;if(o!==null)for(var u=0;u<o.length;u++){var m=o[u],y=r,T=i,U=T;e:for(;U!==null;){switch(U.tag){case 27:if(ws(U.type)){ut=U.stateNode,sn=!1;break e}break;case 5:ut=U.stateNode,sn=!1;break e;case 3:case 4:ut=U.stateNode.containerInfo,sn=!0;break e}U=U.return}if(ut===null)throw Error(s(160));$v(y,T,m),ut=null,sn=!1,y=m.alternate,y!==null&&(y.return=null),m.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)zv(i,r),i=i.sibling}var Fn=null;function zv(r,i){var o=r.alternate,u=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:an(i,r),on(r),u&4&&(ms(3,r,r.return),Mo(3,r),ms(5,r,r.return));break;case 1:an(i,r),on(r),u&512&&(Ct||o===null||lr(o,o.return)),u&64&&kr&&(r=r.updateQueue,r!==null&&(u=r.callbacks,u!==null&&(o=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=o===null?u:o.concat(u))));break;case 26:var m=Fn;if(an(i,r),on(r),u&512&&(Ct||o===null||lr(o,o.return)),u&4){var y=o!==null?o.memoizedState:null;if(u=r.memoizedState,o===null)if(u===null)if(r.stateNode===null){e:{u=r.type,o=r.memoizedProps,m=m.ownerDocument||m;t:switch(u){case"title":y=m.getElementsByTagName("title")[0],(!y||y[Hs]||y[Ot]||y.namespaceURI==="http://www.w3.org/2000/svg"||y.hasAttribute("itemprop"))&&(y=m.createElement(u),m.head.insertBefore(y,m.querySelector("head > title"))),Pt(y,u,o),y[Ot]=r,wt(y),u=y;break e;case"link":var T=zb("link","href",m).get(u+(o.href||""));if(T){for(var U=0;U<T.length;U++)if(y=T[U],y.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&y.getAttribute("rel")===(o.rel==null?null:o.rel)&&y.getAttribute("title")===(o.title==null?null:o.title)&&y.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){T.splice(U,1);break t}}y=m.createElement(u),Pt(y,u,o),m.head.appendChild(y);break;case"meta":if(T=zb("meta","content",m).get(u+(o.content||""))){for(U=0;U<T.length;U++)if(y=T[U],y.getAttribute("content")===(o.content==null?null:""+o.content)&&y.getAttribute("name")===(o.name==null?null:o.name)&&y.getAttribute("property")===(o.property==null?null:o.property)&&y.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&y.getAttribute("charset")===(o.charSet==null?null:o.charSet)){T.splice(U,1);break t}}y=m.createElement(u),Pt(y,u,o),m.head.appendChild(y);break;default:throw Error(s(468,u))}y[Ot]=r,wt(y),u=y}r.stateNode=u}else Bb(m,r.type,r.stateNode);else r.stateNode=Lb(m,u,r.memoizedProps);else y!==u?(y===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):y.count--,u===null?Bb(m,r.type,r.stateNode):Lb(m,u,r.memoizedProps)):u===null&&r.stateNode!==null&&Qh(r,r.memoizedProps,o.memoizedProps)}break;case 27:an(i,r),on(r),u&512&&(Ct||o===null||lr(o,o.return)),o!==null&&u&4&&Qh(r,r.memoizedProps,o.memoizedProps);break;case 5:if(an(i,r),on(r),u&512&&(Ct||o===null||lr(o,o.return)),r.flags&32){m=r.stateNode;try{qi(m,"")}catch(xe){et(r,r.return,xe)}}u&4&&r.stateNode!=null&&(m=r.memoizedProps,Qh(r,m,o!==null?o.memoizedProps:m)),u&1024&&(Zh=!0);break;case 6:if(an(i,r),on(r),u&4){if(r.stateNode===null)throw Error(s(162));u=r.memoizedProps,o=r.stateNode;try{o.nodeValue=u}catch(xe){et(r,r.return,xe)}}break;case 3:if(_u=null,m=Fn,Fn=vu(i.containerInfo),an(i,r),Fn=m,on(r),u&4&&o!==null&&o.memoizedState.isDehydrated)try{ba(i.containerInfo)}catch(xe){et(r,r.return,xe)}Zh&&(Zh=!1,Bv(r));break;case 4:u=Fn,Fn=vu(r.stateNode.containerInfo),an(i,r),on(r),Fn=u;break;case 12:an(i,r),on(r);break;case 31:an(i,r),on(r),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,su(r,u)));break;case 13:an(i,r),on(r),r.child.flags&8192&&r.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(au=ct()),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,su(r,u)));break;case 22:m=r.memoizedState!==null;var F=o!==null&&o.memoizedState!==null,ne=kr,ce=Ct;if(kr=ne||m,Ct=ce||F,an(i,r),Ct=ce,kr=ne,on(r),u&8192)e:for(i=r.stateNode,i._visibility=m?i._visibility&-2:i._visibility|1,m&&(o===null||F||kr||Ct||si(r)),o=null,i=r;;){if(i.tag===5||i.tag===26){if(o===null){F=o=i;try{if(y=F.stateNode,m)T=y.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none";else{U=F.stateNode;var de=F.memoizedProps.style,se=de!=null&&de.hasOwnProperty("display")?de.display:null;U.style.display=se==null||typeof se=="boolean"?"":(""+se).trim()}}catch(xe){et(F,F.return,xe)}}}else if(i.tag===6){if(o===null){F=i;try{F.stateNode.nodeValue=m?"":F.memoizedProps}catch(xe){et(F,F.return,xe)}}}else if(i.tag===18){if(o===null){F=i;try{var ie=F.stateNode;m?Ob(ie,!0):Ob(F.stateNode,!1)}catch(xe){et(F,F.return,xe)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===r)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break e;for(;i.sibling===null;){if(i.return===null||i.return===r)break e;o===i&&(o=null),i=i.return}o===i&&(o=null),i.sibling.return=i.return,i=i.sibling}u&4&&(u=r.updateQueue,u!==null&&(o=u.retryQueue,o!==null&&(u.retryQueue=null,su(r,o))));break;case 19:an(i,r),on(r),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,su(r,u)));break;case 30:break;case 21:break;default:an(i,r),on(r)}}function on(r){var i=r.flags;if(i&2){try{for(var o,u=r.return;u!==null;){if(jv(u)){o=u;break}u=u.return}if(o==null)throw Error(s(160));switch(o.tag){case 27:var m=o.stateNode,y=Wh(r);ru(r,y,m);break;case 5:var T=o.stateNode;o.flags&32&&(qi(T,""),o.flags&=-33);var U=Wh(r);ru(r,U,T);break;case 3:case 4:var F=o.stateNode.containerInfo,ne=Wh(r);Jh(r,ne,F);break;default:throw Error(s(161))}}catch(ce){et(r,r.return,ce)}r.flags&=-3}i&4096&&(r.flags&=-4097)}function Bv(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var i=r;Bv(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),r=r.sibling}}function Dr(r,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)Dv(r,i.alternate,i),i=i.sibling}function si(r){for(r=r.child;r!==null;){var i=r;switch(i.tag){case 0:case 11:case 14:case 15:ms(4,i,i.return),si(i);break;case 1:lr(i,i.return);var o=i.stateNode;typeof o.componentWillUnmount=="function"&&Ov(i,i.return,o),si(i);break;case 27:Ho(i.stateNode);case 26:case 5:lr(i,i.return),si(i);break;case 22:i.memoizedState===null&&si(i);break;case 30:si(i);break;default:si(i)}r=r.sibling}}function Ur(r,i,o){for(o=o&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var u=i.alternate,m=r,y=i,T=y.flags;switch(y.tag){case 0:case 11:case 15:Ur(m,y,o),Mo(4,y);break;case 1:if(Ur(m,y,o),u=y,m=u.stateNode,typeof m.componentDidMount=="function")try{m.componentDidMount()}catch(ne){et(u,u.return,ne)}if(u=y,m=u.updateQueue,m!==null){var U=u.stateNode;try{var F=m.shared.hiddenCallbacks;if(F!==null)for(m.shared.hiddenCallbacks=null,m=0;m<F.length;m++)y0(F[m],U)}catch(ne){et(u,u.return,ne)}}o&&T&64&&Nv(y),Do(y,y.return);break;case 27:kv(y);case 26:case 5:Ur(m,y,o),o&&u===null&&T&4&&Rv(y),Do(y,y.return);break;case 12:Ur(m,y,o);break;case 31:Ur(m,y,o),o&&T&4&&Iv(m,y);break;case 13:Ur(m,y,o),o&&T&4&&Lv(m,y);break;case 22:y.memoizedState===null&&Ur(m,y,o),Do(y,y.return);break;case 30:break;default:Ur(m,y,o)}i=i.sibling}}function em(r,i){var o=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(o=r.memoizedState.cachePool.pool),r=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(r=i.memoizedState.cachePool.pool),r!==o&&(r!=null&&r.refCount++,o!=null&&_o(o))}function tm(r,i){r=null,i.alternate!==null&&(r=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==r&&(i.refCount++,r!=null&&_o(r))}function Yn(r,i,o,u){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Pv(r,i,o,u),i=i.sibling}function Pv(r,i,o,u){var m=i.flags;switch(i.tag){case 0:case 11:case 15:Yn(r,i,o,u),m&2048&&Mo(9,i);break;case 1:Yn(r,i,o,u);break;case 3:Yn(r,i,o,u),m&2048&&(r=null,i.alternate!==null&&(r=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==r&&(i.refCount++,r!=null&&_o(r)));break;case 12:if(m&2048){Yn(r,i,o,u),r=i.stateNode;try{var y=i.memoizedProps,T=y.id,U=y.onPostCommit;typeof U=="function"&&U(T,i.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(F){et(i,i.return,F)}}else Yn(r,i,o,u);break;case 31:Yn(r,i,o,u);break;case 13:Yn(r,i,o,u);break;case 23:break;case 22:y=i.stateNode,T=i.alternate,i.memoizedState!==null?y._visibility&2?Yn(r,i,o,u):Uo(r,i):y._visibility&2?Yn(r,i,o,u):(y._visibility|=2,la(r,i,o,u,(i.subtreeFlags&10256)!==0||!1)),m&2048&&em(T,i);break;case 24:Yn(r,i,o,u),m&2048&&tm(i.alternate,i);break;default:Yn(r,i,o,u)}}function la(r,i,o,u,m){for(m=m&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var y=r,T=i,U=o,F=u,ne=T.flags;switch(T.tag){case 0:case 11:case 15:la(y,T,U,F,m),Mo(8,T);break;case 23:break;case 22:var ce=T.stateNode;T.memoizedState!==null?ce._visibility&2?la(y,T,U,F,m):Uo(y,T):(ce._visibility|=2,la(y,T,U,F,m)),m&&ne&2048&&em(T.alternate,T);break;case 24:la(y,T,U,F,m),m&&ne&2048&&tm(T.alternate,T);break;default:la(y,T,U,F,m)}i=i.sibling}}function Uo(r,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var o=r,u=i,m=u.flags;switch(u.tag){case 22:Uo(o,u),m&2048&&em(u.alternate,u);break;case 24:Uo(o,u),m&2048&&tm(u.alternate,u);break;default:Uo(o,u)}i=i.sibling}}var $o=8192;function ca(r,i,o){if(r.subtreeFlags&$o)for(r=r.child;r!==null;)qv(r,i,o),r=r.sibling}function qv(r,i,o){switch(r.tag){case 26:ca(r,i,o),r.flags&$o&&r.memoizedState!==null&&jN(o,Fn,r.memoizedState,r.memoizedProps);break;case 5:ca(r,i,o);break;case 3:case 4:var u=Fn;Fn=vu(r.stateNode.containerInfo),ca(r,i,o),Fn=u;break;case 22:r.memoizedState===null&&(u=r.alternate,u!==null&&u.memoizedState!==null?(u=$o,$o=16777216,ca(r,i,o),$o=u):ca(r,i,o));break;default:ca(r,i,o)}}function Hv(r){var i=r.alternate;if(i!==null&&(r=i.child,r!==null)){i.child=null;do i=r.sibling,r.sibling=null,r=i;while(r!==null)}}function Io(r){var i=r.deletions;if((r.flags&16)!==0){if(i!==null)for(var o=0;o<i.length;o++){var u=i[o];Ut=u,Fv(u,r)}Hv(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)Vv(r),r=r.sibling}function Vv(r){switch(r.tag){case 0:case 11:case 15:Io(r),r.flags&2048&&ms(9,r,r.return);break;case 3:Io(r);break;case 12:Io(r);break;case 22:var i=r.stateNode;r.memoizedState!==null&&i._visibility&2&&(r.return===null||r.return.tag!==13)?(i._visibility&=-3,iu(r)):Io(r);break;default:Io(r)}}function iu(r){var i=r.deletions;if((r.flags&16)!==0){if(i!==null)for(var o=0;o<i.length;o++){var u=i[o];Ut=u,Fv(u,r)}Hv(r)}for(r=r.child;r!==null;){switch(i=r,i.tag){case 0:case 11:case 15:ms(8,i,i.return),iu(i);break;case 22:o=i.stateNode,o._visibility&2&&(o._visibility&=-3,iu(i));break;default:iu(i)}r=r.sibling}}function Fv(r,i){for(;Ut!==null;){var o=Ut;switch(o.tag){case 0:case 11:case 15:ms(8,o,i);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var u=o.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:_o(o.memoizedState.cache)}if(u=o.child,u!==null)u.return=o,Ut=u;else e:for(o=r;Ut!==null;){u=Ut;var m=u.sibling,y=u.return;if(Uv(u),u===o){Ut=null;break e}if(m!==null){m.return=y,Ut=m;break e}Ut=y}}}var YT={getCacheForType:function(r){var i=zt(xt),o=i.data.get(r);return o===void 0&&(o=r(),i.data.set(r,o)),o},cacheSignal:function(){return zt(xt).controller.signal}},GT=typeof WeakMap=="function"?WeakMap:Map,We=0,it=null,He=null,Fe=0,Ze=0,_n=null,ps=!1,ua=!1,nm=!1,$r=0,vt=0,gs=0,ii=0,rm=0,wn=0,da=0,Lo=null,ln=null,sm=!1,au=0,Yv=0,ou=1/0,lu=null,ys=null,Rt=0,vs=null,fa=null,Ir=0,im=0,am=null,Gv=null,zo=0,om=null;function xn(){return(We&2)!==0&&Fe!==0?Fe&-Fe:k.T!==null?hm():fc()}function Xv(){if(wn===0)if((Fe&536870912)===0||Xe){var r=ki;ki<<=1,(ki&3932160)===0&&(ki=262144),wn=r}else wn=536870912;return r=vn.current,r!==null&&(r.flags|=32),wn}function cn(r,i,o){(r===it&&(Ze===2||Ze===9)||r.cancelPendingCommit!==null)&&(ha(r,0),bs(r,Fe,wn,!1)),qs(r,o),((We&2)===0||r!==it)&&(r===it&&((We&2)===0&&(ii|=o),vt===4&&bs(r,Fe,wn,!1)),cr(r))}function Kv(r,i,o){if((We&6)!==0)throw Error(s(327));var u=!o&&(i&127)===0&&(i&r.expiredLanes)===0||Ps(r,i),m=u?QT(r,i):cm(r,i,!0),y=u;do{if(m===0){ua&&!u&&bs(r,i,0,!1);break}else{if(o=r.current.alternate,y&&!XT(o)){m=cm(r,i,!1),y=!1;continue}if(m===2){if(y=i,r.errorRecoveryDisabledLanes&y)var T=0;else T=r.pendingLanes&-536870913,T=T!==0?T:T&536870912?536870912:0;if(T!==0){i=T;e:{var U=r;m=Lo;var F=U.current.memoizedState.isDehydrated;if(F&&(ha(U,T).flags|=256),T=cm(U,T,!1),T!==2){if(nm&&!F){U.errorRecoveryDisabledLanes|=y,ii|=y,m=4;break e}y=ln,ln=m,y!==null&&(ln===null?ln=y:ln.push.apply(ln,y))}m=T}if(y=!1,m!==2)continue}}if(m===1){ha(r,0),bs(r,i,0,!0);break}e:{switch(u=r,y=m,y){case 0:case 1:throw Error(s(345));case 4:if((i&4194048)!==i)break;case 6:bs(u,i,wn,!ps);break e;case 2:ln=null;break;case 3:case 5:break;default:throw Error(s(329))}if((i&62914560)===i&&(m=au+300-ct(),10<m)){if(bs(u,i,wn,!ps),Di(u,0,!0)!==0)break e;Ir=i,u.timeoutHandle=Ab(Qv.bind(null,u,o,ln,lu,sm,i,wn,ii,da,ps,y,"Throttled",-0,0),m);break e}Qv(u,o,ln,lu,sm,i,wn,ii,da,ps,y,null,-0,0)}}break}while(!0);cr(r)}function Qv(r,i,o,u,m,y,T,U,F,ne,ce,de,se,ie){if(r.timeoutHandle=-1,de=i.subtreeFlags,de&8192||(de&16785408)===16785408){de={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:xr},qv(i,y,de);var xe=(y&62914560)===y?au-ct():(y&4194048)===y?Yv-ct():0;if(xe=kN(de,xe),xe!==null){Ir=y,r.cancelPendingCommit=xe(sb.bind(null,r,i,y,o,u,m,T,U,F,ce,de,null,se,ie)),bs(r,y,T,!ne);return}}sb(r,i,y,o,u,m,T,U,F)}function XT(r){for(var i=r;;){var o=i.tag;if((o===0||o===11||o===15)&&i.flags&16384&&(o=i.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var u=0;u<o.length;u++){var m=o[u],y=m.getSnapshot;m=m.value;try{if(!gn(y(),m))return!1}catch{return!1}}if(o=i.child,i.subtreeFlags&16384&&o!==null)o.return=i,i=o;else{if(i===r)break;for(;i.sibling===null;){if(i.return===null||i.return===r)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function bs(r,i,o,u){i&=~rm,i&=~ii,r.suspendedLanes|=i,r.pingedLanes&=~i,u&&(r.warmLanes|=i),u=r.expirationTimes;for(var m=i;0<m;){var y=31-Ue(m),T=1<<y;u[y]=-1,m&=~T}o!==0&&cc(r,o,i)}function cu(){return(We&6)===0?(Bo(0),!1):!0}function lm(){if(He!==null){if(Ze===0)var r=He.return;else r=He,Ar=Qs=null,Eh(r),ra=null,xo=0,r=He;for(;r!==null;)Tv(r.alternate,r),r=r.return;He=null}}function ha(r,i){var o=r.timeoutHandle;o!==-1&&(r.timeoutHandle=-1,mN(o)),o=r.cancelPendingCommit,o!==null&&(r.cancelPendingCommit=null,o()),Ir=0,lm(),it=r,He=o=Er(r.current,null),Fe=i,Ze=0,_n=null,ps=!1,ua=Ps(r,i),nm=!1,da=wn=rm=ii=gs=vt=0,ln=Lo=null,sm=!1,(i&8)!==0&&(i|=i&32);var u=r.entangledLanes;if(u!==0)for(r=r.entanglements,u&=i;0<u;){var m=31-Ue(u),y=1<<m;i|=r[m],u&=~y}return $r=i,Rc(),o}function Wv(r,i){Be=null,k.H=Ro,i===na||i===Lc?(i=h0(),Ze=3):i===fh?(i=h0(),Ze=4):Ze=i===Bh?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,_n=i,He===null&&(vt=1,Jc(r,Mn(i,r.current)))}function Jv(){var r=vn.current;return r===null?!0:(Fe&4194048)===Fe?In===null:(Fe&62914560)===Fe||(Fe&536870912)!==0?r===In:!1}function Zv(){var r=k.H;return k.H=Ro,r===null?Ro:r}function eb(){var r=k.A;return k.A=YT,r}function uu(){vt=4,ps||(Fe&4194048)!==Fe&&vn.current!==null||(ua=!0),(gs&134217727)===0&&(ii&134217727)===0||it===null||bs(it,Fe,wn,!1)}function cm(r,i,o){var u=We;We|=2;var m=Zv(),y=eb();(it!==r||Fe!==i)&&(lu=null,ha(r,i)),i=!1;var T=vt;e:do try{if(Ze!==0&&He!==null){var U=He,F=_n;switch(Ze){case 8:lm(),T=6;break e;case 3:case 2:case 9:case 6:vn.current===null&&(i=!0);var ne=Ze;if(Ze=0,_n=null,ma(r,U,F,ne),o&&ua){T=0;break e}break;default:ne=Ze,Ze=0,_n=null,ma(r,U,F,ne)}}KT(),T=vt;break}catch(ce){Wv(r,ce)}while(!0);return i&&r.shellSuspendCounter++,Ar=Qs=null,We=u,k.H=m,k.A=y,He===null&&(it=null,Fe=0,Rc()),T}function KT(){for(;He!==null;)tb(He)}function QT(r,i){var o=We;We|=2;var u=Zv(),m=eb();it!==r||Fe!==i?(lu=null,ou=ct()+500,ha(r,i)):ua=Ps(r,i);e:do try{if(Ze!==0&&He!==null){i=He;var y=_n;t:switch(Ze){case 1:Ze=0,_n=null,ma(r,i,y,1);break;case 2:case 9:if(d0(y)){Ze=0,_n=null,nb(i);break}i=function(){Ze!==2&&Ze!==9||it!==r||(Ze=7),cr(r)},y.then(i,i);break e;case 3:Ze=7;break e;case 4:Ze=5;break e;case 7:d0(y)?(Ze=0,_n=null,nb(i)):(Ze=0,_n=null,ma(r,i,y,7));break;case 5:var T=null;switch(He.tag){case 26:T=He.memoizedState;case 5:case 27:var U=He;if(T?Pb(T):U.stateNode.complete){Ze=0,_n=null;var F=U.sibling;if(F!==null)He=F;else{var ne=U.return;ne!==null?(He=ne,du(ne)):He=null}break t}}Ze=0,_n=null,ma(r,i,y,5);break;case 6:Ze=0,_n=null,ma(r,i,y,6);break;case 8:lm(),vt=6;break e;default:throw Error(s(462))}}WT();break}catch(ce){Wv(r,ce)}while(!0);return Ar=Qs=null,k.H=u,k.A=m,We=o,He!==null?0:(it=null,Fe=0,Rc(),vt)}function WT(){for(;He!==null&&!hn();)tb(He)}function tb(r){var i=Cv(r.alternate,r,$r);r.memoizedProps=r.pendingProps,i===null?du(r):He=i}function nb(r){var i=r,o=i.alternate;switch(i.tag){case 15:case 0:i=bv(o,i,i.pendingProps,i.type,void 0,Fe);break;case 11:i=bv(o,i,i.pendingProps,i.type.render,i.ref,Fe);break;case 5:Eh(i);default:Tv(o,i),i=He=e0(i,$r),i=Cv(o,i,$r)}r.memoizedProps=r.pendingProps,i===null?du(r):He=i}function ma(r,i,o,u){Ar=Qs=null,Eh(i),ra=null,xo=0;var m=i.return;try{if(zT(r,m,i,o,Fe)){vt=1,Jc(r,Mn(o,r.current)),He=null;return}}catch(y){if(m!==null)throw He=m,y;vt=1,Jc(r,Mn(o,r.current)),He=null;return}i.flags&32768?(Xe||u===1?r=!0:ua||(Fe&536870912)!==0?r=!1:(ps=r=!0,(u===2||u===9||u===3||u===6)&&(u=vn.current,u!==null&&u.tag===13&&(u.flags|=16384))),rb(i,r)):du(i)}function du(r){var i=r;do{if((i.flags&32768)!==0){rb(i,ps);return}r=i.return;var o=qT(i.alternate,i,$r);if(o!==null){He=o;return}if(i=i.sibling,i!==null){He=i;return}He=i=r}while(i!==null);vt===0&&(vt=5)}function rb(r,i){do{var o=HT(r.alternate,r);if(o!==null){o.flags&=32767,He=o;return}if(o=r.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!i&&(r=r.sibling,r!==null)){He=r;return}He=r=o}while(r!==null);vt=6,He=null}function sb(r,i,o,u,m,y,T,U,F){r.cancelPendingCommit=null;do fu();while(Rt!==0);if((We&6)!==0)throw Error(s(327));if(i!==null){if(i===r.current)throw Error(s(177));if(y=i.lanes|i.childLanes,y|=Wf,Tf(r,o,y,T,U,F),r===it&&(He=it=null,Fe=0),fa=i,vs=r,Ir=o,im=y,am=m,Gv=u,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,tN(jn,function(){return cb(),null})):(r.callbackNode=null,r.callbackPriority=0),u=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||u){u=k.T,k.T=null,m=z.p,z.p=2,T=We,We|=4;try{VT(r,i,o)}finally{We=T,z.p=m,k.T=u}}Rt=1,ib(),ab(),ob()}}function ib(){if(Rt===1){Rt=0;var r=vs,i=fa,o=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||o){o=k.T,k.T=null;var u=z.p;z.p=2;var m=We;We|=4;try{zv(i,r);var y=wm,T=Fy(r.containerInfo),U=y.focusedElem,F=y.selectionRange;if(T!==U&&U&&U.ownerDocument&&Vy(U.ownerDocument.documentElement,U)){if(F!==null&&Yf(U)){var ne=F.start,ce=F.end;if(ce===void 0&&(ce=ne),"selectionStart"in U)U.selectionStart=ne,U.selectionEnd=Math.min(ce,U.value.length);else{var de=U.ownerDocument||document,se=de&&de.defaultView||window;if(se.getSelection){var ie=se.getSelection(),xe=U.textContent.length,ke=Math.min(F.start,xe),rt=F.end===void 0?ke:Math.min(F.end,xe);!ie.extend&&ke>rt&&(T=rt,rt=ke,ke=T);var J=Hy(U,ke),X=Hy(U,rt);if(J&&X&&(ie.rangeCount!==1||ie.anchorNode!==J.node||ie.anchorOffset!==J.offset||ie.focusNode!==X.node||ie.focusOffset!==X.offset)){var te=de.createRange();te.setStart(J.node,J.offset),ie.removeAllRanges(),ke>rt?(ie.addRange(te),ie.extend(X.node,X.offset)):(te.setEnd(X.node,X.offset),ie.addRange(te))}}}}for(de=[],ie=U;ie=ie.parentNode;)ie.nodeType===1&&de.push({element:ie,left:ie.scrollLeft,top:ie.scrollTop});for(typeof U.focus=="function"&&U.focus(),U=0;U<de.length;U++){var ue=de[U];ue.element.scrollLeft=ue.left,ue.element.scrollTop=ue.top}}Eu=!!_m,wm=_m=null}finally{We=m,z.p=u,k.T=o}}r.current=i,Rt=2}}function ab(){if(Rt===2){Rt=0;var r=vs,i=fa,o=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||o){o=k.T,k.T=null;var u=z.p;z.p=2;var m=We;We|=4;try{Dv(r,i.alternate,i)}finally{We=m,z.p=u,k.T=o}}Rt=3}}function ob(){if(Rt===4||Rt===3){Rt=0,Jt();var r=vs,i=fa,o=Ir,u=Gv;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?Rt=5:(Rt=0,fa=vs=null,lb(r,r.pendingLanes));var m=r.pendingLanes;if(m===0&&(ys=null),so(o),i=i.stateNode,Ee&&typeof Ee.onCommitFiberRoot=="function")try{Ee.onCommitFiberRoot(me,i,void 0,(i.current.flags&128)===128)}catch{}if(u!==null){i=k.T,m=z.p,z.p=2,k.T=null;try{for(var y=r.onRecoverableError,T=0;T<u.length;T++){var U=u[T];y(U.value,{componentStack:U.stack})}}finally{k.T=i,z.p=m}}(Ir&3)!==0&&fu(),cr(r),m=r.pendingLanes,(o&261930)!==0&&(m&42)!==0?r===om?zo++:(zo=0,om=r):zo=0,Bo(0)}}function lb(r,i){(r.pooledCacheLanes&=i)===0&&(i=r.pooledCache,i!=null&&(r.pooledCache=null,_o(i)))}function fu(){return ib(),ab(),ob(),cb()}function cb(){if(Rt!==5)return!1;var r=vs,i=im;im=0;var o=so(Ir),u=k.T,m=z.p;try{z.p=32>o?32:o,k.T=null,o=am,am=null;var y=vs,T=Ir;if(Rt=0,fa=vs=null,Ir=0,(We&6)!==0)throw Error(s(331));var U=We;if(We|=4,Vv(y.current),Pv(y,y.current,T,o),We=U,Bo(0,!1),Ee&&typeof Ee.onPostCommitFiberRoot=="function")try{Ee.onPostCommitFiberRoot(me,y)}catch{}return!0}finally{z.p=m,k.T=u,lb(r,i)}}function ub(r,i,o){i=Mn(o,i),i=zh(r.stateNode,i,2),r=ds(r,i,2),r!==null&&(qs(r,2),cr(r))}function et(r,i,o){if(r.tag===3)ub(r,r,o);else for(;i!==null;){if(i.tag===3){ub(i,r,o);break}else if(i.tag===1){var u=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(ys===null||!ys.has(u))){r=Mn(o,r),o=dv(2),u=ds(i,o,2),u!==null&&(fv(o,u,i,r),qs(u,2),cr(u));break}}i=i.return}}function um(r,i,o){var u=r.pingCache;if(u===null){u=r.pingCache=new GT;var m=new Set;u.set(i,m)}else m=u.get(i),m===void 0&&(m=new Set,u.set(i,m));m.has(o)||(nm=!0,m.add(o),r=JT.bind(null,r,i,o),i.then(r,r))}function JT(r,i,o){var u=r.pingCache;u!==null&&u.delete(i),r.pingedLanes|=r.suspendedLanes&o,r.warmLanes&=~o,it===r&&(Fe&o)===o&&(vt===4||vt===3&&(Fe&62914560)===Fe&&300>ct()-au?(We&2)===0&&ha(r,0):rm|=o,da===Fe&&(da=0)),cr(r)}function db(r,i){i===0&&(i=lc()),r=Gs(r,i),r!==null&&(qs(r,i),cr(r))}function ZT(r){var i=r.memoizedState,o=0;i!==null&&(o=i.retryLane),db(r,o)}function eN(r,i){var o=0;switch(r.tag){case 31:case 13:var u=r.stateNode,m=r.memoizedState;m!==null&&(o=m.retryLane);break;case 19:u=r.stateNode;break;case 22:u=r.stateNode._retryCache;break;default:throw Error(s(314))}u!==null&&u.delete(i),db(r,o)}function tN(r,i){return It(r,i)}var hu=null,pa=null,dm=!1,mu=!1,fm=!1,_s=0;function cr(r){r!==pa&&r.next===null&&(pa===null?hu=pa=r:pa=pa.next=r),mu=!0,dm||(dm=!0,rN())}function Bo(r,i){if(!fm&&mu){fm=!0;do for(var o=!1,u=hu;u!==null;){if(r!==0){var m=u.pendingLanes;if(m===0)var y=0;else{var T=u.suspendedLanes,U=u.pingedLanes;y=(1<<31-Ue(42|r)+1)-1,y&=m&~(T&~U),y=y&201326741?y&201326741|1:y?y|2:0}y!==0&&(o=!0,pb(u,y))}else y=Fe,y=Di(u,u===it?y:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(y&3)===0||Ps(u,y)||(o=!0,pb(u,y));u=u.next}while(o);fm=!1}}function nN(){fb()}function fb(){mu=dm=!1;var r=0;_s!==0&&hN()&&(r=_s);for(var i=ct(),o=null,u=hu;u!==null;){var m=u.next,y=hb(u,i);y===0?(u.next=null,o===null?hu=m:o.next=m,m===null&&(pa=o)):(o=u,(r!==0||(y&3)!==0)&&(mu=!0)),u=m}Rt!==0&&Rt!==5||Bo(r),_s!==0&&(_s=0)}function hb(r,i){for(var o=r.suspendedLanes,u=r.pingedLanes,m=r.expirationTimes,y=r.pendingLanes&-62914561;0<y;){var T=31-Ue(y),U=1<<T,F=m[T];F===-1?((U&o)===0||(U&u)!==0)&&(m[T]=Af(U,i)):F<=i&&(r.expiredLanes|=U),y&=~U}if(i=it,o=Fe,o=Di(r,r===i?o:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),u=r.callbackNode,o===0||r===i&&(Ze===2||Ze===9)||r.cancelPendingCommit!==null)return u!==null&&u!==null&&pt(u),r.callbackNode=null,r.callbackPriority=0;if((o&3)===0||Ps(r,o)){if(i=o&-o,i===r.callbackPriority)return i;switch(u!==null&&pt(u),so(o)){case 2:case 8:o=tn;break;case 32:o=jn;break;case 268435456:o=Jr;break;default:o=jn}return u=mb.bind(null,r),o=It(o,u),r.callbackPriority=i,r.callbackNode=o,i}return u!==null&&u!==null&&pt(u),r.callbackPriority=2,r.callbackNode=null,2}function mb(r,i){if(Rt!==0&&Rt!==5)return r.callbackNode=null,r.callbackPriority=0,null;var o=r.callbackNode;if(fu()&&r.callbackNode!==o)return null;var u=Fe;return u=Di(r,r===it?u:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),u===0?null:(Kv(r,u,i),hb(r,ct()),r.callbackNode!=null&&r.callbackNode===o?mb.bind(null,r):null)}function pb(r,i){if(fu())return null;Kv(r,i,!0)}function rN(){pN(function(){(We&6)!==0?It(pn,nN):fb()})}function hm(){if(_s===0){var r=ea;r===0&&(r=ji,ji<<=1,(ji&261888)===0&&(ji=256)),_s=r}return _s}function gb(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:xc(""+r)}function yb(r,i){var o=i.ownerDocument.createElement("input");return o.name=i.name,o.value=i.value,r.id&&o.setAttribute("form",r.id),i.parentNode.insertBefore(o,i),r=new FormData(r),o.parentNode.removeChild(o),r}function sN(r,i,o,u,m){if(i==="submit"&&o&&o.stateNode===m){var y=gb((m[Ft]||null).action),T=u.submitter;T&&(i=(i=T[Ft]||null)?gb(i.formAction):T.getAttribute("formAction"),i!==null&&(y=i,T=null));var U=new Ac("action","action",null,u,m);r.push({event:U,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(_s!==0){var F=T?yb(m,T):new FormData(m);Mh(o,{pending:!0,data:F,method:m.method,action:y},null,F)}}else typeof y=="function"&&(U.preventDefault(),F=T?yb(m,T):new FormData(m),Mh(o,{pending:!0,data:F,method:m.method,action:y},y,F))},currentTarget:m}]})}}for(var mm=0;mm<Qf.length;mm++){var pm=Qf[mm],iN=pm.toLowerCase(),aN=pm[0].toUpperCase()+pm.slice(1);Vn(iN,"on"+aN)}Vn(Xy,"onAnimationEnd"),Vn(Ky,"onAnimationIteration"),Vn(Qy,"onAnimationStart"),Vn("dblclick","onDoubleClick"),Vn("focusin","onFocus"),Vn("focusout","onBlur"),Vn(xT,"onTransitionRun"),Vn(ST,"onTransitionStart"),Vn(ET,"onTransitionCancel"),Vn(Wy,"onTransitionEnd"),rs("onMouseEnter",["mouseout","mouseover"]),rs("onMouseLeave",["mouseout","mouseover"]),rs("onPointerEnter",["pointerout","pointerover"]),rs("onPointerLeave",["pointerout","pointerover"]),wr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),wr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),wr("onBeforeInput",["compositionend","keypress","textInput","paste"]),wr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),wr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),wr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Po="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),oN=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Po));function vb(r,i){i=(i&4)!==0;for(var o=0;o<r.length;o++){var u=r[o],m=u.event;u=u.listeners;e:{var y=void 0;if(i)for(var T=u.length-1;0<=T;T--){var U=u[T],F=U.instance,ne=U.currentTarget;if(U=U.listener,F!==y&&m.isPropagationStopped())break e;y=U,m.currentTarget=ne;try{y(m)}catch(ce){Oc(ce)}m.currentTarget=null,y=F}else for(T=0;T<u.length;T++){if(U=u[T],F=U.instance,ne=U.currentTarget,U=U.listener,F!==y&&m.isPropagationStopped())break e;y=U,m.currentTarget=ne;try{y(m)}catch(ce){Oc(ce)}m.currentTarget=null,y=F}}}}function Ve(r,i){var o=i[Ui];o===void 0&&(o=i[Ui]=new Set);var u=r+"__bubble";o.has(u)||(bb(i,r,2,!1),o.add(u))}function gm(r,i,o){var u=0;i&&(u|=4),bb(o,r,u,i)}var pu="_reactListening"+Math.random().toString(36).slice(2);function ym(r){if(!r[pu]){r[pu]=!0,gc.forEach(function(o){o!=="selectionchange"&&(oN.has(o)||gm(o,!1,r),gm(o,!0,r))});var i=r.nodeType===9?r:r.ownerDocument;i===null||i[pu]||(i[pu]=!0,gm("selectionchange",!1,i))}}function bb(r,i,o,u){switch(Xb(i)){case 2:var m=UN;break;case 8:m=$N;break;default:m=km}o=m.bind(null,i,o,r),m=void 0,!If||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(m=!0),u?m!==void 0?r.addEventListener(i,o,{capture:!0,passive:m}):r.addEventListener(i,o,!0):m!==void 0?r.addEventListener(i,o,{passive:m}):r.addEventListener(i,o,!1)}function vm(r,i,o,u,m){var y=u;if((i&1)===0&&(i&2)===0&&u!==null)e:for(;;){if(u===null)return;var T=u.tag;if(T===3||T===4){var U=u.stateNode.containerInfo;if(U===m)break;if(T===4)for(T=u.return;T!==null;){var F=T.tag;if((F===3||F===4)&&T.stateNode.containerInfo===m)return;T=T.return}for(;U!==null;){if(T=Zr(U),T===null)return;if(F=T.tag,F===5||F===6||F===26||F===27){u=y=T;continue e}U=U.parentNode}}u=u.return}Ey(function(){var ne=y,ce=Uf(o),de=[];e:{var se=Jy.get(r);if(se!==void 0){var ie=Ac,xe=r;switch(r){case"keypress":if(Ec(o)===0)break e;case"keydown":case"keyup":ie=eT;break;case"focusin":xe="focus",ie=Pf;break;case"focusout":xe="blur",ie=Pf;break;case"beforeblur":case"afterblur":ie=Pf;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ie=Ty;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ie=qA;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ie=rT;break;case Xy:case Ky:case Qy:ie=FA;break;case Wy:ie=iT;break;case"scroll":case"scrollend":ie=BA;break;case"wheel":ie=oT;break;case"copy":case"cut":case"paste":ie=GA;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ie=Oy;break;case"toggle":case"beforetoggle":ie=cT}var ke=(i&4)!==0,rt=!ke&&(r==="scroll"||r==="scrollend"),J=ke?se!==null?se+"Capture":null:se;ke=[];for(var X=ne,te;X!==null;){var ue=X;if(te=ue.stateNode,ue=ue.tag,ue!==5&&ue!==26&&ue!==27||te===null||J===null||(ue=lo(X,J),ue!=null&&ke.push(qo(X,ue,te))),rt)break;X=X.return}0<ke.length&&(se=new ie(se,xe,null,o,ce),de.push({event:se,listeners:ke}))}}if((i&7)===0){e:{if(se=r==="mouseover"||r==="pointerover",ie=r==="mouseout"||r==="pointerout",se&&o!==Df&&(xe=o.relatedTarget||o.fromElement)&&(Zr(xe)||xe[_r]))break e;if((ie||se)&&(se=ce.window===ce?ce:(se=ce.ownerDocument)?se.defaultView||se.parentWindow:window,ie?(xe=o.relatedTarget||o.toElement,ie=ne,xe=xe?Zr(xe):null,xe!==null&&(rt=l(xe),ke=xe.tag,xe!==rt||ke!==5&&ke!==27&&ke!==6)&&(xe=null)):(ie=null,xe=ne),ie!==xe)){if(ke=Ty,ue="onMouseLeave",J="onMouseEnter",X="mouse",(r==="pointerout"||r==="pointerover")&&(ke=Oy,ue="onPointerLeave",J="onPointerEnter",X="pointer"),rt=ie==null?se:ts(ie),te=xe==null?se:ts(xe),se=new ke(ue,X+"leave",ie,o,ce),se.target=rt,se.relatedTarget=te,ue=null,Zr(ce)===ne&&(ke=new ke(J,X+"enter",xe,o,ce),ke.target=te,ke.relatedTarget=rt,ue=ke),rt=ue,ie&&xe)t:{for(ke=lN,J=ie,X=xe,te=0,ue=J;ue;ue=ke(ue))te++;ue=0;for(var Re=X;Re;Re=ke(Re))ue++;for(;0<te-ue;)J=ke(J),te--;for(;0<ue-te;)X=ke(X),ue--;for(;te--;){if(J===X||X!==null&&J===X.alternate){ke=J;break t}J=ke(J),X=ke(X)}ke=null}else ke=null;ie!==null&&_b(de,se,ie,ke,!1),xe!==null&&rt!==null&&_b(de,rt,xe,ke,!0)}}e:{if(se=ne?ts(ne):window,ie=se.nodeName&&se.nodeName.toLowerCase(),ie==="select"||ie==="input"&&se.type==="file")var Ke=Iy;else if(Uy(se))if(Ly)Ke=bT;else{Ke=yT;var Ae=gT}else ie=se.nodeName,!ie||ie.toLowerCase()!=="input"||se.type!=="checkbox"&&se.type!=="radio"?ne&&Mf(ne.elementType)&&(Ke=Iy):Ke=vT;if(Ke&&(Ke=Ke(r,ne))){$y(de,Ke,o,ce);break e}Ae&&Ae(r,se,ne),r==="focusout"&&ne&&se.type==="number"&&ne.memoizedProps.value!=null&&Bi(se,"number",se.value)}switch(Ae=ne?ts(ne):window,r){case"focusin":(Uy(Ae)||Ae.contentEditable==="true")&&(Yi=Ae,Gf=ne,yo=null);break;case"focusout":yo=Gf=Yi=null;break;case"mousedown":Xf=!0;break;case"contextmenu":case"mouseup":case"dragend":Xf=!1,Yy(de,o,ce);break;case"selectionchange":if(wT)break;case"keydown":case"keyup":Yy(de,o,ce)}var Pe;if(Hf)e:{switch(r){case"compositionstart":var Ye="onCompositionStart";break e;case"compositionend":Ye="onCompositionEnd";break e;case"compositionupdate":Ye="onCompositionUpdate";break e}Ye=void 0}else Fi?My(r,o)&&(Ye="onCompositionEnd"):r==="keydown"&&o.keyCode===229&&(Ye="onCompositionStart");Ye&&(Ry&&o.locale!=="ko"&&(Fi||Ye!=="onCompositionStart"?Ye==="onCompositionEnd"&&Fi&&(Pe=Cy()):(ss=ce,Lf="value"in ss?ss.value:ss.textContent,Fi=!0)),Ae=gu(ne,Ye),0<Ae.length&&(Ye=new Ny(Ye,r,null,o,ce),de.push({event:Ye,listeners:Ae}),Pe?Ye.data=Pe:(Pe=Dy(o),Pe!==null&&(Ye.data=Pe)))),(Pe=dT?fT(r,o):hT(r,o))&&(Ye=gu(ne,"onBeforeInput"),0<Ye.length&&(Ae=new Ny("onBeforeInput","beforeinput",null,o,ce),de.push({event:Ae,listeners:Ye}),Ae.data=Pe)),sN(de,r,ne,o,ce)}vb(de,i)})}function qo(r,i,o){return{instance:r,listener:i,currentTarget:o}}function gu(r,i){for(var o=i+"Capture",u=[];r!==null;){var m=r,y=m.stateNode;if(m=m.tag,m!==5&&m!==26&&m!==27||y===null||(m=lo(r,o),m!=null&&u.unshift(qo(r,m,y)),m=lo(r,i),m!=null&&u.push(qo(r,m,y))),r.tag===3)return u;r=r.return}return[]}function lN(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function _b(r,i,o,u,m){for(var y=i._reactName,T=[];o!==null&&o!==u;){var U=o,F=U.alternate,ne=U.stateNode;if(U=U.tag,F!==null&&F===u)break;U!==5&&U!==26&&U!==27||ne===null||(F=ne,m?(ne=lo(o,y),ne!=null&&T.unshift(qo(o,ne,F))):m||(ne=lo(o,y),ne!=null&&T.push(qo(o,ne,F)))),o=o.return}T.length!==0&&r.push({event:i,listeners:T})}var cN=/\r\n?/g,uN=/\u0000|\uFFFD/g;function wb(r){return(typeof r=="string"?r:""+r).replace(cN,`
`).replace(uN,"")}function xb(r,i){return i=wb(i),wb(r)===i}function nt(r,i,o,u,m,y){switch(o){case"children":typeof u=="string"?i==="body"||i==="textarea"&&u===""||qi(r,u):(typeof u=="number"||typeof u=="bigint")&&i!=="body"&&qi(r,""+u);break;case"className":Ii(r,"class",u);break;case"tabIndex":Ii(r,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":Ii(r,o,u);break;case"style":xy(r,u,y);break;case"data":if(i!=="object"){Ii(r,"data",u);break}case"src":case"href":if(u===""&&(i!=="a"||o!=="href")){r.removeAttribute(o);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){r.removeAttribute(o);break}u=xc(""+u),r.setAttribute(o,u);break;case"action":case"formAction":if(typeof u=="function"){r.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof y=="function"&&(o==="formAction"?(i!=="input"&&nt(r,i,"name",m.name,m,null),nt(r,i,"formEncType",m.formEncType,m,null),nt(r,i,"formMethod",m.formMethod,m,null),nt(r,i,"formTarget",m.formTarget,m,null)):(nt(r,i,"encType",m.encType,m,null),nt(r,i,"method",m.method,m,null),nt(r,i,"target",m.target,m,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){r.removeAttribute(o);break}u=xc(""+u),r.setAttribute(o,u);break;case"onClick":u!=null&&(r.onclick=xr);break;case"onScroll":u!=null&&Ve("scroll",r);break;case"onScrollEnd":u!=null&&Ve("scrollend",r);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(o=u.__html,o!=null){if(m.children!=null)throw Error(s(60));r.innerHTML=o}}break;case"multiple":r.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":r.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){r.removeAttribute("xlink:href");break}o=xc(""+u),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(o,""+u):r.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(o,""):r.removeAttribute(o);break;case"capture":case"download":u===!0?r.setAttribute(o,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(o,u):r.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?r.setAttribute(o,u):r.removeAttribute(o);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?r.removeAttribute(o):r.setAttribute(o,u);break;case"popover":Ve("beforetoggle",r),Ve("toggle",r),$i(r,"popover",u);break;case"xlinkActuate":Hn(r,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":Hn(r,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":Hn(r,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":Hn(r,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":Hn(r,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":Hn(r,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":Hn(r,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":Hn(r,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":Hn(r,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":$i(r,"is",u);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=LA.get(o)||o,$i(r,o,u))}}function bm(r,i,o,u,m,y){switch(o){case"style":xy(r,u,y);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(o=u.__html,o!=null){if(m.children!=null)throw Error(s(60));r.innerHTML=o}}break;case"children":typeof u=="string"?qi(r,u):(typeof u=="number"||typeof u=="bigint")&&qi(r,""+u);break;case"onScroll":u!=null&&Ve("scroll",r);break;case"onScrollEnd":u!=null&&Ve("scrollend",r);break;case"onClick":u!=null&&(r.onclick=xr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!yc.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(m=o.endsWith("Capture"),i=o.slice(2,m?o.length-7:void 0),y=r[Ft]||null,y=y!=null?y[o]:null,typeof y=="function"&&r.removeEventListener(i,y,m),typeof u=="function")){typeof y!="function"&&y!==null&&(o in r?r[o]=null:r.hasAttribute(o)&&r.removeAttribute(o)),r.addEventListener(i,u,m);break e}o in r?r[o]=u:u===!0?r.setAttribute(o,""):$i(r,o,u)}}}function Pt(r,i,o){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ve("error",r),Ve("load",r);var u=!1,m=!1,y;for(y in o)if(o.hasOwnProperty(y)){var T=o[y];if(T!=null)switch(y){case"src":u=!0;break;case"srcSet":m=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:nt(r,i,y,T,o,null)}}m&&nt(r,i,"srcSet",o.srcSet,o,null),u&&nt(r,i,"src",o.src,o,null);return;case"input":Ve("invalid",r);var U=y=T=m=null,F=null,ne=null;for(u in o)if(o.hasOwnProperty(u)){var ce=o[u];if(ce!=null)switch(u){case"name":m=ce;break;case"type":T=ce;break;case"checked":F=ce;break;case"defaultChecked":ne=ce;break;case"value":y=ce;break;case"defaultValue":U=ce;break;case"children":case"dangerouslySetInnerHTML":if(ce!=null)throw Error(s(137,i));break;default:nt(r,i,u,ce,o,null)}}wc(r,y,U,F,ne,T,m,!1);return;case"select":Ve("invalid",r),u=T=y=null;for(m in o)if(o.hasOwnProperty(m)&&(U=o[m],U!=null))switch(m){case"value":y=U;break;case"defaultValue":T=U;break;case"multiple":u=U;default:nt(r,i,m,U,o,null)}i=y,o=T,r.multiple=!!u,i!=null?Pi(r,!!u,i,!1):o!=null&&Pi(r,!!u,o,!0);return;case"textarea":Ve("invalid",r),y=m=u=null;for(T in o)if(o.hasOwnProperty(T)&&(U=o[T],U!=null))switch(T){case"value":u=U;break;case"defaultValue":m=U;break;case"children":y=U;break;case"dangerouslySetInnerHTML":if(U!=null)throw Error(s(91));break;default:nt(r,i,T,U,o,null)}_y(r,u,m,y);return;case"option":for(F in o)if(o.hasOwnProperty(F)&&(u=o[F],u!=null))switch(F){case"selected":r.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:nt(r,i,F,u,o,null)}return;case"dialog":Ve("beforetoggle",r),Ve("toggle",r),Ve("cancel",r),Ve("close",r);break;case"iframe":case"object":Ve("load",r);break;case"video":case"audio":for(u=0;u<Po.length;u++)Ve(Po[u],r);break;case"image":Ve("error",r),Ve("load",r);break;case"details":Ve("toggle",r);break;case"embed":case"source":case"link":Ve("error",r),Ve("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ne in o)if(o.hasOwnProperty(ne)&&(u=o[ne],u!=null))switch(ne){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:nt(r,i,ne,u,o,null)}return;default:if(Mf(i)){for(ce in o)o.hasOwnProperty(ce)&&(u=o[ce],u!==void 0&&bm(r,i,ce,u,o,void 0));return}}for(U in o)o.hasOwnProperty(U)&&(u=o[U],u!=null&&nt(r,i,U,u,o,null))}function dN(r,i,o,u){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var m=null,y=null,T=null,U=null,F=null,ne=null,ce=null;for(ie in o){var de=o[ie];if(o.hasOwnProperty(ie)&&de!=null)switch(ie){case"checked":break;case"value":break;case"defaultValue":F=de;default:u.hasOwnProperty(ie)||nt(r,i,ie,null,u,de)}}for(var se in u){var ie=u[se];if(de=o[se],u.hasOwnProperty(se)&&(ie!=null||de!=null))switch(se){case"type":y=ie;break;case"name":m=ie;break;case"checked":ne=ie;break;case"defaultChecked":ce=ie;break;case"value":T=ie;break;case"defaultValue":U=ie;break;case"children":case"dangerouslySetInnerHTML":if(ie!=null)throw Error(s(137,i));break;default:ie!==de&&nt(r,i,se,ie,u,de)}}oo(r,T,U,F,ne,ce,y,m);return;case"select":ie=T=U=se=null;for(y in o)if(F=o[y],o.hasOwnProperty(y)&&F!=null)switch(y){case"value":break;case"multiple":ie=F;default:u.hasOwnProperty(y)||nt(r,i,y,null,u,F)}for(m in u)if(y=u[m],F=o[m],u.hasOwnProperty(m)&&(y!=null||F!=null))switch(m){case"value":se=y;break;case"defaultValue":U=y;break;case"multiple":T=y;default:y!==F&&nt(r,i,m,y,u,F)}i=U,o=T,u=ie,se!=null?Pi(r,!!o,se,!1):!!u!=!!o&&(i!=null?Pi(r,!!o,i,!0):Pi(r,!!o,o?[]:"",!1));return;case"textarea":ie=se=null;for(U in o)if(m=o[U],o.hasOwnProperty(U)&&m!=null&&!u.hasOwnProperty(U))switch(U){case"value":break;case"children":break;default:nt(r,i,U,null,u,m)}for(T in u)if(m=u[T],y=o[T],u.hasOwnProperty(T)&&(m!=null||y!=null))switch(T){case"value":se=m;break;case"defaultValue":ie=m;break;case"children":break;case"dangerouslySetInnerHTML":if(m!=null)throw Error(s(91));break;default:m!==y&&nt(r,i,T,m,u,y)}by(r,se,ie);return;case"option":for(var xe in o)if(se=o[xe],o.hasOwnProperty(xe)&&se!=null&&!u.hasOwnProperty(xe))switch(xe){case"selected":r.selected=!1;break;default:nt(r,i,xe,null,u,se)}for(F in u)if(se=u[F],ie=o[F],u.hasOwnProperty(F)&&se!==ie&&(se!=null||ie!=null))switch(F){case"selected":r.selected=se&&typeof se!="function"&&typeof se!="symbol";break;default:nt(r,i,F,se,u,ie)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ke in o)se=o[ke],o.hasOwnProperty(ke)&&se!=null&&!u.hasOwnProperty(ke)&&nt(r,i,ke,null,u,se);for(ne in u)if(se=u[ne],ie=o[ne],u.hasOwnProperty(ne)&&se!==ie&&(se!=null||ie!=null))switch(ne){case"children":case"dangerouslySetInnerHTML":if(se!=null)throw Error(s(137,i));break;default:nt(r,i,ne,se,u,ie)}return;default:if(Mf(i)){for(var rt in o)se=o[rt],o.hasOwnProperty(rt)&&se!==void 0&&!u.hasOwnProperty(rt)&&bm(r,i,rt,void 0,u,se);for(ce in u)se=u[ce],ie=o[ce],!u.hasOwnProperty(ce)||se===ie||se===void 0&&ie===void 0||bm(r,i,ce,se,u,ie);return}}for(var J in o)se=o[J],o.hasOwnProperty(J)&&se!=null&&!u.hasOwnProperty(J)&&nt(r,i,J,null,u,se);for(de in u)se=u[de],ie=o[de],!u.hasOwnProperty(de)||se===ie||se==null&&ie==null||nt(r,i,de,se,u,ie)}function Sb(r){switch(r){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function fN(){if(typeof performance.getEntriesByType=="function"){for(var r=0,i=0,o=performance.getEntriesByType("resource"),u=0;u<o.length;u++){var m=o[u],y=m.transferSize,T=m.initiatorType,U=m.duration;if(y&&U&&Sb(T)){for(T=0,U=m.responseEnd,u+=1;u<o.length;u++){var F=o[u],ne=F.startTime;if(ne>U)break;var ce=F.transferSize,de=F.initiatorType;ce&&Sb(de)&&(F=F.responseEnd,T+=ce*(F<U?1:(U-ne)/(F-ne)))}if(--u,i+=8*(y+T)/(m.duration/1e3),r++,10<r)break}}if(0<r)return i/r/1e6}return navigator.connection&&(r=navigator.connection.downlink,typeof r=="number")?r:5}var _m=null,wm=null;function yu(r){return r.nodeType===9?r:r.ownerDocument}function Eb(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Cb(r,i){if(r===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&i==="foreignObject"?0:r}function xm(r,i){return r==="textarea"||r==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Sm=null;function hN(){var r=window.event;return r&&r.type==="popstate"?r===Sm?!1:(Sm=r,!0):(Sm=null,!1)}var Ab=typeof setTimeout=="function"?setTimeout:void 0,mN=typeof clearTimeout=="function"?clearTimeout:void 0,Tb=typeof Promise=="function"?Promise:void 0,pN=typeof queueMicrotask=="function"?queueMicrotask:typeof Tb<"u"?function(r){return Tb.resolve(null).then(r).catch(gN)}:Ab;function gN(r){setTimeout(function(){throw r})}function ws(r){return r==="head"}function Nb(r,i){var o=i,u=0;do{var m=o.nextSibling;if(r.removeChild(o),m&&m.nodeType===8)if(o=m.data,o==="/$"||o==="/&"){if(u===0){r.removeChild(m),ba(i);return}u--}else if(o==="$"||o==="$?"||o==="$~"||o==="$!"||o==="&")u++;else if(o==="html")Ho(r.ownerDocument.documentElement);else if(o==="head"){o=r.ownerDocument.head,Ho(o);for(var y=o.firstChild;y;){var T=y.nextSibling,U=y.nodeName;y[Hs]||U==="SCRIPT"||U==="STYLE"||U==="LINK"&&y.rel.toLowerCase()==="stylesheet"||o.removeChild(y),y=T}}else o==="body"&&Ho(r.ownerDocument.body);o=m}while(o);ba(i)}function Ob(r,i){var o=r;r=0;do{var u=o.nextSibling;if(o.nodeType===1?i?(o._stashedDisplay=o.style.display,o.style.display="none"):(o.style.display=o._stashedDisplay||"",o.getAttribute("style")===""&&o.removeAttribute("style")):o.nodeType===3&&(i?(o._stashedText=o.nodeValue,o.nodeValue=""):o.nodeValue=o._stashedText||""),u&&u.nodeType===8)if(o=u.data,o==="/$"){if(r===0)break;r--}else o!=="$"&&o!=="$?"&&o!=="$~"&&o!=="$!"||r++;o=u}while(o)}function Em(r){var i=r.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var o=i;switch(i=i.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":Em(o),io(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}r.removeChild(o)}}function yN(r,i,o,u){for(;r.nodeType===1;){var m=o;if(r.nodeName.toLowerCase()!==i.toLowerCase()){if(!u&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(u){if(!r[Hs])switch(i){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(y=r.getAttribute("rel"),y==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(y!==m.rel||r.getAttribute("href")!==(m.href==null||m.href===""?null:m.href)||r.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin)||r.getAttribute("title")!==(m.title==null?null:m.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(y=r.getAttribute("src"),(y!==(m.src==null?null:m.src)||r.getAttribute("type")!==(m.type==null?null:m.type)||r.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin))&&y&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(i==="input"&&r.type==="hidden"){var y=m.name==null?null:""+m.name;if(m.type==="hidden"&&r.getAttribute("name")===y)return r}else return r;if(r=Ln(r.nextSibling),r===null)break}return null}function vN(r,i,o){if(i==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!o||(r=Ln(r.nextSibling),r===null))return null;return r}function Rb(r,i){for(;r.nodeType!==8;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!i||(r=Ln(r.nextSibling),r===null))return null;return r}function Cm(r){return r.data==="$?"||r.data==="$~"}function Am(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState!=="loading"}function bN(r,i){var o=r.ownerDocument;if(r.data==="$~")r._reactRetry=i;else if(r.data!=="$?"||o.readyState!=="loading")i();else{var u=function(){i(),o.removeEventListener("DOMContentLoaded",u)};o.addEventListener("DOMContentLoaded",u),r._reactRetry=u}}function Ln(r){for(;r!=null;r=r.nextSibling){var i=r.nodeType;if(i===1||i===3)break;if(i===8){if(i=r.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return r}var Tm=null;function jb(r){r=r.nextSibling;for(var i=0;r;){if(r.nodeType===8){var o=r.data;if(o==="/$"||o==="/&"){if(i===0)return Ln(r.nextSibling);i--}else o!=="$"&&o!=="$!"&&o!=="$?"&&o!=="$~"&&o!=="&"||i++}r=r.nextSibling}return null}function kb(r){r=r.previousSibling;for(var i=0;r;){if(r.nodeType===8){var o=r.data;if(o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"){if(i===0)return r;i--}else o!=="/$"&&o!=="/&"||i++}r=r.previousSibling}return null}function Mb(r,i,o){switch(i=yu(o),r){case"html":if(r=i.documentElement,!r)throw Error(s(452));return r;case"head":if(r=i.head,!r)throw Error(s(453));return r;case"body":if(r=i.body,!r)throw Error(s(454));return r;default:throw Error(s(451))}}function Ho(r){for(var i=r.attributes;i.length;)r.removeAttributeNode(i[0]);io(r)}var zn=new Map,Db=new Set;function vu(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var Lr=z.d;z.d={f:_N,r:wN,D:xN,C:SN,L:EN,m:CN,X:TN,S:AN,M:NN};function _N(){var r=Lr.f(),i=cu();return r||i}function wN(r){var i=es(r);i!==null&&i.tag===5&&i.type==="form"?W0(i):Lr.r(r)}var ga=typeof document>"u"?null:document;function Ub(r,i,o){var u=ga;if(u&&typeof i=="string"&&i){var m=Yt(i);m='link[rel="'+r+'"][href="'+m+'"]',typeof o=="string"&&(m+='[crossorigin="'+o+'"]'),Db.has(m)||(Db.add(m),r={rel:r,crossOrigin:o,href:i},u.querySelector(m)===null&&(i=u.createElement("link"),Pt(i,"link",r),wt(i),u.head.appendChild(i)))}}function xN(r){Lr.D(r),Ub("dns-prefetch",r,null)}function SN(r,i){Lr.C(r,i),Ub("preconnect",r,i)}function EN(r,i,o){Lr.L(r,i,o);var u=ga;if(u&&r&&i){var m='link[rel="preload"][as="'+Yt(i)+'"]';i==="image"&&o&&o.imageSrcSet?(m+='[imagesrcset="'+Yt(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(m+='[imagesizes="'+Yt(o.imageSizes)+'"]')):m+='[href="'+Yt(r)+'"]';var y=m;switch(i){case"style":y=ya(r);break;case"script":y=va(r)}zn.has(y)||(r=p({rel:"preload",href:i==="image"&&o&&o.imageSrcSet?void 0:r,as:i},o),zn.set(y,r),u.querySelector(m)!==null||i==="style"&&u.querySelector(Vo(y))||i==="script"&&u.querySelector(Fo(y))||(i=u.createElement("link"),Pt(i,"link",r),wt(i),u.head.appendChild(i)))}}function CN(r,i){Lr.m(r,i);var o=ga;if(o&&r){var u=i&&typeof i.as=="string"?i.as:"script",m='link[rel="modulepreload"][as="'+Yt(u)+'"][href="'+Yt(r)+'"]',y=m;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":y=va(r)}if(!zn.has(y)&&(r=p({rel:"modulepreload",href:r},i),zn.set(y,r),o.querySelector(m)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(Fo(y)))return}u=o.createElement("link"),Pt(u,"link",r),wt(u),o.head.appendChild(u)}}}function AN(r,i,o){Lr.S(r,i,o);var u=ga;if(u&&r){var m=ns(u).hoistableStyles,y=ya(r);i=i||"default";var T=m.get(y);if(!T){var U={loading:0,preload:null};if(T=u.querySelector(Vo(y)))U.loading=5;else{r=p({rel:"stylesheet",href:r,"data-precedence":i},o),(o=zn.get(y))&&Nm(r,o);var F=T=u.createElement("link");wt(F),Pt(F,"link",r),F._p=new Promise(function(ne,ce){F.onload=ne,F.onerror=ce}),F.addEventListener("load",function(){U.loading|=1}),F.addEventListener("error",function(){U.loading|=2}),U.loading|=4,bu(T,i,u)}T={type:"stylesheet",instance:T,count:1,state:U},m.set(y,T)}}}function TN(r,i){Lr.X(r,i);var o=ga;if(o&&r){var u=ns(o).hoistableScripts,m=va(r),y=u.get(m);y||(y=o.querySelector(Fo(m)),y||(r=p({src:r,async:!0},i),(i=zn.get(m))&&Om(r,i),y=o.createElement("script"),wt(y),Pt(y,"link",r),o.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},u.set(m,y))}}function NN(r,i){Lr.M(r,i);var o=ga;if(o&&r){var u=ns(o).hoistableScripts,m=va(r),y=u.get(m);y||(y=o.querySelector(Fo(m)),y||(r=p({src:r,async:!0,type:"module"},i),(i=zn.get(m))&&Om(r,i),y=o.createElement("script"),wt(y),Pt(y,"link",r),o.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},u.set(m,y))}}function $b(r,i,o,u){var m=(m=ge.current)?vu(m):null;if(!m)throw Error(s(446));switch(r){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(i=ya(o.href),o=ns(m).hoistableStyles,u=o.get(i),u||(u={type:"style",instance:null,count:0,state:null},o.set(i,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){r=ya(o.href);var y=ns(m).hoistableStyles,T=y.get(r);if(T||(m=m.ownerDocument||m,T={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},y.set(r,T),(y=m.querySelector(Vo(r)))&&!y._p&&(T.instance=y,T.state.loading=5),zn.has(r)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},zn.set(r,o),y||ON(m,r,o,T.state))),i&&u===null)throw Error(s(528,""));return T}if(i&&u!==null)throw Error(s(529,""));return null;case"script":return i=o.async,o=o.src,typeof o=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=va(o),o=ns(m).hoistableScripts,u=o.get(i),u||(u={type:"script",instance:null,count:0,state:null},o.set(i,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,r))}}function ya(r){return'href="'+Yt(r)+'"'}function Vo(r){return'link[rel="stylesheet"]['+r+"]"}function Ib(r){return p({},r,{"data-precedence":r.precedence,precedence:null})}function ON(r,i,o,u){r.querySelector('link[rel="preload"][as="style"]['+i+"]")?u.loading=1:(i=r.createElement("link"),u.preload=i,i.addEventListener("load",function(){return u.loading|=1}),i.addEventListener("error",function(){return u.loading|=2}),Pt(i,"link",o),wt(i),r.head.appendChild(i))}function va(r){return'[src="'+Yt(r)+'"]'}function Fo(r){return"script[async]"+r}function Lb(r,i,o){if(i.count++,i.instance===null)switch(i.type){case"style":var u=r.querySelector('style[data-href~="'+Yt(o.href)+'"]');if(u)return i.instance=u,wt(u),u;var m=p({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return u=(r.ownerDocument||r).createElement("style"),wt(u),Pt(u,"style",m),bu(u,o.precedence,r),i.instance=u;case"stylesheet":m=ya(o.href);var y=r.querySelector(Vo(m));if(y)return i.state.loading|=4,i.instance=y,wt(y),y;u=Ib(o),(m=zn.get(m))&&Nm(u,m),y=(r.ownerDocument||r).createElement("link"),wt(y);var T=y;return T._p=new Promise(function(U,F){T.onload=U,T.onerror=F}),Pt(y,"link",u),i.state.loading|=4,bu(y,o.precedence,r),i.instance=y;case"script":return y=va(o.src),(m=r.querySelector(Fo(y)))?(i.instance=m,wt(m),m):(u=o,(m=zn.get(y))&&(u=p({},o),Om(u,m)),r=r.ownerDocument||r,m=r.createElement("script"),wt(m),Pt(m,"link",u),r.head.appendChild(m),i.instance=m);case"void":return null;default:throw Error(s(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(u=i.instance,i.state.loading|=4,bu(u,o.precedence,r));return i.instance}function bu(r,i,o){for(var u=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),m=u.length?u[u.length-1]:null,y=m,T=0;T<u.length;T++){var U=u[T];if(U.dataset.precedence===i)y=U;else if(y!==m)break}y?y.parentNode.insertBefore(r,y.nextSibling):(i=o.nodeType===9?o.head:o,i.insertBefore(r,i.firstChild))}function Nm(r,i){r.crossOrigin==null&&(r.crossOrigin=i.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=i.referrerPolicy),r.title==null&&(r.title=i.title)}function Om(r,i){r.crossOrigin==null&&(r.crossOrigin=i.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=i.referrerPolicy),r.integrity==null&&(r.integrity=i.integrity)}var _u=null;function zb(r,i,o){if(_u===null){var u=new Map,m=_u=new Map;m.set(o,u)}else m=_u,u=m.get(o),u||(u=new Map,m.set(o,u));if(u.has(r))return u;for(u.set(r,null),o=o.getElementsByTagName(r),m=0;m<o.length;m++){var y=o[m];if(!(y[Hs]||y[Ot]||r==="link"&&y.getAttribute("rel")==="stylesheet")&&y.namespaceURI!=="http://www.w3.org/2000/svg"){var T=y.getAttribute(i)||"";T=r+T;var U=u.get(T);U?U.push(y):u.set(T,[y])}}return u}function Bb(r,i,o){r=r.ownerDocument||r,r.head.insertBefore(o,i==="title"?r.querySelector("head > title"):null)}function RN(r,i,o){if(o===1||i.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return r=i.disabled,typeof i.precedence=="string"&&r==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function Pb(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}function jN(r,i,o,u){if(o.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var m=ya(u.href),y=i.querySelector(Vo(m));if(y){i=y._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(r.count++,r=wu.bind(r),i.then(r,r)),o.state.loading|=4,o.instance=y,wt(y);return}y=i.ownerDocument||i,u=Ib(u),(m=zn.get(m))&&Nm(u,m),y=y.createElement("link"),wt(y);var T=y;T._p=new Promise(function(U,F){T.onload=U,T.onerror=F}),Pt(y,"link",u),o.instance=y}r.stylesheets===null&&(r.stylesheets=new Map),r.stylesheets.set(o,i),(i=o.state.preload)&&(o.state.loading&3)===0&&(r.count++,o=wu.bind(r),i.addEventListener("load",o),i.addEventListener("error",o))}}var Rm=0;function kN(r,i){return r.stylesheets&&r.count===0&&Su(r,r.stylesheets),0<r.count||0<r.imgCount?function(o){var u=setTimeout(function(){if(r.stylesheets&&Su(r,r.stylesheets),r.unsuspend){var y=r.unsuspend;r.unsuspend=null,y()}},6e4+i);0<r.imgBytes&&Rm===0&&(Rm=62500*fN());var m=setTimeout(function(){if(r.waitingForImages=!1,r.count===0&&(r.stylesheets&&Su(r,r.stylesheets),r.unsuspend)){var y=r.unsuspend;r.unsuspend=null,y()}},(r.imgBytes>Rm?50:800)+i);return r.unsuspend=o,function(){r.unsuspend=null,clearTimeout(u),clearTimeout(m)}}:null}function wu(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Su(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var xu=null;function Su(r,i){r.stylesheets=null,r.unsuspend!==null&&(r.count++,xu=new Map,i.forEach(MN,r),xu=null,wu.call(r))}function MN(r,i){if(!(i.state.loading&4)){var o=xu.get(r);if(o)var u=o.get(null);else{o=new Map,xu.set(r,o);for(var m=r.querySelectorAll("link[data-precedence],style[data-precedence]"),y=0;y<m.length;y++){var T=m[y];(T.nodeName==="LINK"||T.getAttribute("media")!=="not all")&&(o.set(T.dataset.precedence,T),u=T)}u&&o.set(null,u)}m=i.instance,T=m.getAttribute("data-precedence"),y=o.get(T)||u,y===u&&o.set(null,m),o.set(T,m),this.count++,u=wu.bind(this),m.addEventListener("load",u),m.addEventListener("error",u),y?y.parentNode.insertBefore(m,y.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(m,r.firstChild)),i.state.loading|=4}}var Yo={$$typeof:E,Provider:null,Consumer:null,_currentValue:V,_currentValue2:V,_threadCount:0};function DN(r,i,o,u,m,y,T,U,F){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=no(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=no(0),this.hiddenUpdates=no(null),this.identifierPrefix=u,this.onUncaughtError=m,this.onCaughtError=y,this.onRecoverableError=T,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=F,this.incompleteTransitions=new Map}function qb(r,i,o,u,m,y,T,U,F,ne,ce,de){return r=new DN(r,i,o,T,F,ne,ce,de,U),i=1,y===!0&&(i|=24),y=yn(3,null,null,i),r.current=y,y.stateNode=r,i=ch(),i.refCount++,r.pooledCache=i,i.refCount++,y.memoizedState={element:u,isDehydrated:o,cache:i},hh(y),r}function Hb(r){return r?(r=Ki,r):Ki}function Vb(r,i,o,u,m,y){m=Hb(m),u.context===null?u.context=m:u.pendingContext=m,u=us(i),u.payload={element:o},y=y===void 0?null:y,y!==null&&(u.callback=y),o=ds(r,u,i),o!==null&&(cn(o,r,i),Eo(o,r,i))}function Fb(r,i){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var o=r.retryLane;r.retryLane=o!==0&&o<i?o:i}}function jm(r,i){Fb(r,i),(r=r.alternate)&&Fb(r,i)}function Yb(r){if(r.tag===13||r.tag===31){var i=Gs(r,67108864);i!==null&&cn(i,r,67108864),jm(r,67108864)}}function Gb(r){if(r.tag===13||r.tag===31){var i=xn();i=ro(i);var o=Gs(r,i);o!==null&&cn(o,r,i),jm(r,i)}}var Eu=!0;function UN(r,i,o,u){var m=k.T;k.T=null;var y=z.p;try{z.p=2,km(r,i,o,u)}finally{z.p=y,k.T=m}}function $N(r,i,o,u){var m=k.T;k.T=null;var y=z.p;try{z.p=8,km(r,i,o,u)}finally{z.p=y,k.T=m}}function km(r,i,o,u){if(Eu){var m=Mm(u);if(m===null)vm(r,i,u,Cu,o),Kb(r,u);else if(LN(m,r,i,o,u))u.stopPropagation();else if(Kb(r,u),i&4&&-1<IN.indexOf(r)){for(;m!==null;){var y=es(m);if(y!==null)switch(y.tag){case 3:if(y=y.stateNode,y.current.memoizedState.isDehydrated){var T=br(y.pendingLanes);if(T!==0){var U=y;for(U.pendingLanes|=2,U.entangledLanes|=2;T;){var F=1<<31-Ue(T);U.entanglements[1]|=F,T&=~F}cr(y),(We&6)===0&&(ou=ct()+500,Bo(0))}}break;case 31:case 13:U=Gs(y,2),U!==null&&cn(U,y,2),cu(),jm(y,2)}if(y=Mm(u),y===null&&vm(r,i,u,Cu,o),y===m)break;m=y}m!==null&&u.stopPropagation()}else vm(r,i,u,null,o)}}function Mm(r){return r=Uf(r),Dm(r)}var Cu=null;function Dm(r){if(Cu=null,r=Zr(r),r!==null){var i=l(r);if(i===null)r=null;else{var o=i.tag;if(o===13){if(r=c(i),r!==null)return r;r=null}else if(o===31){if(r=d(i),r!==null)return r;r=null}else if(o===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;r=null}else i!==r&&(r=null)}}return Cu=r,null}function Xb(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(mn()){case pn:return 2;case tn:return 8;case jn:case vr:return 32;case Jr:return 268435456;default:return 32}default:return 32}}var Um=!1,xs=null,Ss=null,Es=null,Go=new Map,Xo=new Map,Cs=[],IN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Kb(r,i){switch(r){case"focusin":case"focusout":xs=null;break;case"dragenter":case"dragleave":Ss=null;break;case"mouseover":case"mouseout":Es=null;break;case"pointerover":case"pointerout":Go.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Xo.delete(i.pointerId)}}function Ko(r,i,o,u,m,y){return r===null||r.nativeEvent!==y?(r={blockedOn:i,domEventName:o,eventSystemFlags:u,nativeEvent:y,targetContainers:[m]},i!==null&&(i=es(i),i!==null&&Yb(i)),r):(r.eventSystemFlags|=u,i=r.targetContainers,m!==null&&i.indexOf(m)===-1&&i.push(m),r)}function LN(r,i,o,u,m){switch(i){case"focusin":return xs=Ko(xs,r,i,o,u,m),!0;case"dragenter":return Ss=Ko(Ss,r,i,o,u,m),!0;case"mouseover":return Es=Ko(Es,r,i,o,u,m),!0;case"pointerover":var y=m.pointerId;return Go.set(y,Ko(Go.get(y)||null,r,i,o,u,m)),!0;case"gotpointercapture":return y=m.pointerId,Xo.set(y,Ko(Xo.get(y)||null,r,i,o,u,m)),!0}return!1}function Qb(r){var i=Zr(r.target);if(i!==null){var o=l(i);if(o!==null){if(i=o.tag,i===13){if(i=c(o),i!==null){r.blockedOn=i,hc(r.priority,function(){Gb(o)});return}}else if(i===31){if(i=d(o),i!==null){r.blockedOn=i,hc(r.priority,function(){Gb(o)});return}}else if(i===3&&o.stateNode.current.memoizedState.isDehydrated){r.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}r.blockedOn=null}function Au(r){if(r.blockedOn!==null)return!1;for(var i=r.targetContainers;0<i.length;){var o=Mm(r.nativeEvent);if(o===null){o=r.nativeEvent;var u=new o.constructor(o.type,o);Df=u,o.target.dispatchEvent(u),Df=null}else return i=es(o),i!==null&&Yb(i),r.blockedOn=o,!1;i.shift()}return!0}function Wb(r,i,o){Au(r)&&o.delete(i)}function zN(){Um=!1,xs!==null&&Au(xs)&&(xs=null),Ss!==null&&Au(Ss)&&(Ss=null),Es!==null&&Au(Es)&&(Es=null),Go.forEach(Wb),Xo.forEach(Wb)}function Tu(r,i){r.blockedOn===i&&(r.blockedOn=null,Um||(Um=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,zN)))}var Nu=null;function Jb(r){Nu!==r&&(Nu=r,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Nu===r&&(Nu=null);for(var i=0;i<r.length;i+=3){var o=r[i],u=r[i+1],m=r[i+2];if(typeof u!="function"){if(Dm(u||o)===null)continue;break}var y=es(o);y!==null&&(r.splice(i,3),i-=3,Mh(y,{pending:!0,data:m,method:o.method,action:u},u,m))}}))}function ba(r){function i(F){return Tu(F,r)}xs!==null&&Tu(xs,r),Ss!==null&&Tu(Ss,r),Es!==null&&Tu(Es,r),Go.forEach(i),Xo.forEach(i);for(var o=0;o<Cs.length;o++){var u=Cs[o];u.blockedOn===r&&(u.blockedOn=null)}for(;0<Cs.length&&(o=Cs[0],o.blockedOn===null);)Qb(o),o.blockedOn===null&&Cs.shift();if(o=(r.ownerDocument||r).$$reactFormReplay,o!=null)for(u=0;u<o.length;u+=3){var m=o[u],y=o[u+1],T=m[Ft]||null;if(typeof y=="function")T||Jb(o);else if(T){var U=null;if(y&&y.hasAttribute("formAction")){if(m=y,T=y[Ft]||null)U=T.formAction;else if(Dm(m)!==null)continue}else U=T.action;typeof U=="function"?o[u+1]=U:(o.splice(u,3),u-=3),Jb(o)}}}function Zb(){function r(y){y.canIntercept&&y.info==="react-transition"&&y.intercept({handler:function(){return new Promise(function(T){return m=T})},focusReset:"manual",scroll:"manual"})}function i(){m!==null&&(m(),m=null),u||setTimeout(o,20)}function o(){if(!u&&!navigation.transition){var y=navigation.currentEntry;y&&y.url!=null&&navigation.navigate(y.url,{state:y.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,m=null;return navigation.addEventListener("navigate",r),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(o,100),function(){u=!0,navigation.removeEventListener("navigate",r),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),m!==null&&(m(),m=null)}}}function $m(r){this._internalRoot=r}Ou.prototype.render=$m.prototype.render=function(r){var i=this._internalRoot;if(i===null)throw Error(s(409));var o=i.current,u=xn();Vb(o,u,r,i,null,null)},Ou.prototype.unmount=$m.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var i=r.containerInfo;Vb(r.current,2,null,r,null,null),cu(),i[_r]=null}};function Ou(r){this._internalRoot=r}Ou.prototype.unstable_scheduleHydration=function(r){if(r){var i=fc();r={blockedOn:null,target:r,priority:i};for(var o=0;o<Cs.length&&i!==0&&i<Cs[o].priority;o++);Cs.splice(o,0,r),o===0&&Qb(r)}};var e_=e.version;if(e_!=="19.2.0")throw Error(s(527,e_,"19.2.0"));z.findDOMNode=function(r){var i=r._reactInternals;if(i===void 0)throw typeof r.render=="function"?Error(s(188)):(r=Object.keys(r).join(","),Error(s(268,r)));return r=h(i),r=r!==null?g(r):null,r=r===null?null:r.stateNode,r};var BN={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:k,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ru=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ru.isDisabled&&Ru.supportsFiber)try{me=Ru.inject(BN),Ee=Ru}catch{}}return Wo.createRoot=function(r,i){if(!a(r))throw Error(s(299));var o=!1,u="",m=ov,y=lv,T=cv;return i!=null&&(i.unstable_strictMode===!0&&(o=!0),i.identifierPrefix!==void 0&&(u=i.identifierPrefix),i.onUncaughtError!==void 0&&(m=i.onUncaughtError),i.onCaughtError!==void 0&&(y=i.onCaughtError),i.onRecoverableError!==void 0&&(T=i.onRecoverableError)),i=qb(r,1,!1,null,null,o,u,null,m,y,T,Zb),r[_r]=i.current,ym(r),new $m(i)},Wo.hydrateRoot=function(r,i,o){if(!a(r))throw Error(s(299));var u=!1,m="",y=ov,T=lv,U=cv,F=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(m=o.identifierPrefix),o.onUncaughtError!==void 0&&(y=o.onUncaughtError),o.onCaughtError!==void 0&&(T=o.onCaughtError),o.onRecoverableError!==void 0&&(U=o.onRecoverableError),o.formState!==void 0&&(F=o.formState)),i=qb(r,1,!0,i,o??null,u,m,F,y,T,U,Zb),i.context=Hb(null),o=i.current,u=xn(),u=ro(u),m=us(u),m.callback=null,ds(o,m,u),o=u,i.current.lanes=o,qs(i,o),cr(i),r[_r]=i.current,ym(r),new Ou(i)},Wo.version="19.2.0",Wo}var u_;function WN(){if(u_)return zm.exports;u_=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),zm.exports=QN(),zm.exports}var JN=WN();var d_="popstate";function ZN(t={}){function e(s,a){let{pathname:l,search:c,hash:d}=s.location;return Sp("",{pathname:l,search:c,hash:d},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function n(s,a){return typeof a=="string"?a:jl(a)}return tO(e,n,null,t)}function ht(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function pr(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function eO(){return Math.random().toString(36).substring(2,10)}function f_(t,e){return{usr:t.state,key:t.key,idx:e}}function Sp(t,e,n=null,s){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?Ka(e):e,state:n,key:e&&e.key||s||eO()}}function jl({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Ka(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let s=t.indexOf("?");s>=0&&(e.search=t.substring(s),t=t.substring(0,s)),t&&(e.pathname=t)}return e}function tO(t,e,n,s={}){let{window:a=document.defaultView,v5Compat:l=!1}=s,c=a.history,d="POP",f=null,h=g();h==null&&(h=0,c.replaceState({...c.state,idx:h},""));function g(){return(c.state||{idx:null}).idx}function p(){d="POP";let S=g(),C=S==null?null:S-h;h=S,f&&f({action:d,location:w.location,delta:C})}function v(S,C){d="PUSH";let N=Sp(w.location,S,C);h=g()+1;let E=f_(N,h),A=w.createHref(N);try{c.pushState(E,"",A)}catch(O){if(O instanceof DOMException&&O.name==="DataCloneError")throw O;a.location.assign(A)}l&&f&&f({action:d,location:w.location,delta:1})}function b(S,C){d="REPLACE";let N=Sp(w.location,S,C);h=g();let E=f_(N,h),A=w.createHref(N);c.replaceState(E,"",A),l&&f&&f({action:d,location:w.location,delta:0})}function x(S){return nO(S)}let w={get action(){return d},get location(){return t(a,c)},listen(S){if(f)throw new Error("A history only accepts one active listener");return a.addEventListener(d_,p),f=S,()=>{a.removeEventListener(d_,p),f=null}},createHref(S){return e(a,S)},createURL:x,encodeLocation(S){let C=x(S);return{pathname:C.pathname,search:C.search,hash:C.hash}},push:v,replace:b,go(S){return c.go(S)}};return w}function nO(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),ht(n,"No window.location.(origin|href) available to create URL");let s=typeof t=="string"?t:jl(t);return s=s.replace(/ $/,"%20"),!e&&s.startsWith("//")&&(s=n+s),new URL(s,n)}function Xx(t,e,n="/"){return rO(t,e,n,!1)}function rO(t,e,n,s){let a=typeof e=="string"?Ka(e):e,l=Gr(a.pathname||"/",n);if(l==null)return null;let c=Kx(t);sO(c);let d=null;for(let f=0;d==null&&f<c.length;++f){let h=pO(l);d=hO(c[f],h,s)}return d}function Kx(t,e=[],n=[],s="",a=!1){let l=(c,d,f=a,h)=>{let g={relativePath:h===void 0?c.path||"":h,caseSensitive:c.caseSensitive===!0,childrenIndex:d,route:c};if(g.relativePath.startsWith("/")){if(!g.relativePath.startsWith(s)&&f)return;ht(g.relativePath.startsWith(s),`Absolute route path "${g.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),g.relativePath=g.relativePath.slice(s.length)}let p=Yr([s,g.relativePath]),v=n.concat(g);c.children&&c.children.length>0&&(ht(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${p}".`),Kx(c.children,e,v,p,f)),!(c.path==null&&!c.index)&&e.push({path:p,score:dO(p,c.index),routesMeta:v})};return t.forEach((c,d)=>{if(c.path===""||!c.path?.includes("?"))l(c,d);else for(let f of Qx(c.path))l(c,d,!0,f)}),e}function Qx(t){let e=t.split("/");if(e.length===0)return[];let[n,...s]=e,a=n.endsWith("?"),l=n.replace(/\?$/,"");if(s.length===0)return a?[l,""]:[l];let c=Qx(s.join("/")),d=[];return d.push(...c.map(f=>f===""?l:[l,f].join("/"))),a&&d.push(...c),d.map(f=>t.startsWith("/")&&f===""?"/":f)}function sO(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:fO(e.routesMeta.map(s=>s.childrenIndex),n.routesMeta.map(s=>s.childrenIndex)))}var iO=/^:[\w-]+$/,aO=3,oO=2,lO=1,cO=10,uO=-2,h_=t=>t==="*";function dO(t,e){let n=t.split("/"),s=n.length;return n.some(h_)&&(s+=uO),e&&(s+=oO),n.filter(a=>!h_(a)).reduce((a,l)=>a+(iO.test(l)?aO:l===""?lO:cO),s)}function fO(t,e){return t.length===e.length&&t.slice(0,-1).every((s,a)=>s===e[a])?t[t.length-1]-e[e.length-1]:0}function hO(t,e,n=!1){let{routesMeta:s}=t,a={},l="/",c=[];for(let d=0;d<s.length;++d){let f=s[d],h=d===s.length-1,g=l==="/"?e:e.slice(l.length)||"/",p=Sd({path:f.relativePath,caseSensitive:f.caseSensitive,end:h},g),v=f.route;if(!p&&h&&n&&!s[s.length-1].route.index&&(p=Sd({path:f.relativePath,caseSensitive:f.caseSensitive,end:!1},g)),!p)return null;Object.assign(a,p.params),c.push({params:a,pathname:Yr([l,p.pathname]),pathnameBase:bO(Yr([l,p.pathnameBase])),route:v}),p.pathnameBase!=="/"&&(l=Yr([l,p.pathnameBase]))}return c}function Sd(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,s]=mO(t.path,t.caseSensitive,t.end),a=e.match(n);if(!a)return null;let l=a[0],c=l.replace(/(.)\/+$/,"$1"),d=a.slice(1);return{params:s.reduce((h,{paramName:g,isOptional:p},v)=>{if(g==="*"){let x=d[v]||"";c=l.slice(0,l.length-x.length).replace(/(.)\/+$/,"$1")}const b=d[v];return p&&!b?h[g]=void 0:h[g]=(b||"").replace(/%2F/g,"/"),h},{}),pathname:l,pathnameBase:c,pattern:t}}function mO(t,e=!1,n=!0){pr(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let s=[],a="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,d,f)=>(s.push({paramName:d,isOptional:f!=null}),f?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(s.push({paramName:"*"}),a+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?a+="\\/*$":t!==""&&t!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),s]}function pO(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return pr(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Gr(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,s=t.charAt(n);return s&&s!=="/"?null:t.slice(n)||"/"}function gO(t,e="/"){let{pathname:n,search:s="",hash:a=""}=typeof t=="string"?Ka(t):t;return{pathname:n?n.startsWith("/")?n:yO(n,e):e,search:_O(s),hash:wO(a)}}function yO(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(a=>{a===".."?n.length>1&&n.pop():a!=="."&&n.push(a)}),n.length>1?n.join("/"):"/"}function Hm(t,e,n,s){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function vO(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Wx(t){let e=vO(t);return e.map((n,s)=>s===e.length-1?n.pathname:n.pathnameBase)}function Jx(t,e,n,s=!1){let a;typeof t=="string"?a=Ka(t):(a={...t},ht(!a.pathname||!a.pathname.includes("?"),Hm("?","pathname","search",a)),ht(!a.pathname||!a.pathname.includes("#"),Hm("#","pathname","hash",a)),ht(!a.search||!a.search.includes("#"),Hm("#","search","hash",a)));let l=t===""||a.pathname==="",c=l?"/":a.pathname,d;if(c==null)d=n;else{let p=e.length-1;if(!s&&c.startsWith("..")){let v=c.split("/");for(;v[0]==="..";)v.shift(),p-=1;a.pathname=v.join("/")}d=p>=0?e[p]:"/"}let f=gO(a,d),h=c&&c!=="/"&&c.endsWith("/"),g=(l||c===".")&&n.endsWith("/");return!f.pathname.endsWith("/")&&(h||g)&&(f.pathname+="/"),f}var Yr=t=>t.join("/").replace(/\/\/+/g,"/"),bO=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),_O=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,wO=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function xO(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var Zx=["POST","PUT","PATCH","DELETE"];new Set(Zx);var SO=["GET",...Zx];new Set(SO);var Qa=R.createContext(null);Qa.displayName="DataRouter";var Qd=R.createContext(null);Qd.displayName="DataRouterState";R.createContext(!1);var eS=R.createContext({isTransitioning:!1});eS.displayName="ViewTransition";var EO=R.createContext(new Map);EO.displayName="Fetchers";var CO=R.createContext(null);CO.displayName="Await";var gr=R.createContext(null);gr.displayName="Navigation";var Xl=R.createContext(null);Xl.displayName="Location";var Kr=R.createContext({outlet:null,matches:[],isDataRoute:!1});Kr.displayName="Route";var mg=R.createContext(null);mg.displayName="RouteError";function AO(t,{relative:e}={}){ht(Kl(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:s}=R.useContext(gr),{hash:a,pathname:l,search:c}=Ql(t,{relative:e}),d=l;return n!=="/"&&(d=l==="/"?n:Yr([n,l])),s.createHref({pathname:d,search:c,hash:a})}function Kl(){return R.useContext(Xl)!=null}function Ni(){return ht(Kl(),"useLocation() may be used only in the context of a <Router> component."),R.useContext(Xl).location}var tS="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function nS(t){R.useContext(gr).static||R.useLayoutEffect(t)}function Is(){let{isDataRoute:t}=R.useContext(Kr);return t?zO():TO()}function TO(){ht(Kl(),"useNavigate() may be used only in the context of a <Router> component.");let t=R.useContext(Qa),{basename:e,navigator:n}=R.useContext(gr),{matches:s}=R.useContext(Kr),{pathname:a}=Ni(),l=JSON.stringify(Wx(s)),c=R.useRef(!1);return nS(()=>{c.current=!0}),R.useCallback((f,h={})=>{if(pr(c.current,tS),!c.current)return;if(typeof f=="number"){n.go(f);return}let g=Jx(f,JSON.parse(l),a,h.relative==="path");t==null&&e!=="/"&&(g.pathname=g.pathname==="/"?e:Yr([e,g.pathname])),(h.replace?n.replace:n.push)(g,h.state,h)},[e,n,l,a,t])}R.createContext(null);function Ql(t,{relative:e}={}){let{matches:n}=R.useContext(Kr),{pathname:s}=Ni(),a=JSON.stringify(Wx(n));return R.useMemo(()=>Jx(t,JSON.parse(a),s,e==="path"),[t,a,s,e])}function NO(t,e){return rS(t,e)}function rS(t,e,n,s,a){ht(Kl(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:l}=R.useContext(gr),{matches:c}=R.useContext(Kr),d=c[c.length-1],f=d?d.params:{},h=d?d.pathname:"/",g=d?d.pathnameBase:"/",p=d&&d.route;{let N=p&&p.path||"";sS(h,!p||N.endsWith("*")||N.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${h}" (under <Route path="${N}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${N}"> to <Route path="${N==="/"?"*":`${N}/*`}">.`)}let v=Ni(),b;if(e){let N=typeof e=="string"?Ka(e):e;ht(g==="/"||N.pathname?.startsWith(g),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${g}" but pathname "${N.pathname}" was given in the \`location\` prop.`),b=N}else b=v;let x=b.pathname||"/",w=x;if(g!=="/"){let N=g.replace(/^\//,"").split("/");w="/"+x.replace(/^\//,"").split("/").slice(N.length).join("/")}let S=Xx(t,{pathname:w});pr(p||S!=null,`No routes matched location "${b.pathname}${b.search}${b.hash}" `),pr(S==null||S[S.length-1].route.element!==void 0||S[S.length-1].route.Component!==void 0||S[S.length-1].route.lazy!==void 0,`Matched leaf route at location "${b.pathname}${b.search}${b.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let C=MO(S&&S.map(N=>Object.assign({},N,{params:Object.assign({},f,N.params),pathname:Yr([g,l.encodeLocation?l.encodeLocation(N.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:N.pathname]),pathnameBase:N.pathnameBase==="/"?g:Yr([g,l.encodeLocation?l.encodeLocation(N.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:N.pathnameBase])})),c,n,s,a);return e&&C?R.createElement(Xl.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...b},navigationType:"POP"}},C):C}function OO(){let t=LO(),e=xO(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:s},l={padding:"2px 4px",backgroundColor:s},c=null;return console.error("Error handled by React Router default ErrorBoundary:",t),c=R.createElement(R.Fragment,null,R.createElement("p",null," Hey developer "),R.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",R.createElement("code",{style:l},"ErrorBoundary")," or"," ",R.createElement("code",{style:l},"errorElement")," prop on your route.")),R.createElement(R.Fragment,null,R.createElement("h2",null,"Unexpected Application Error!"),R.createElement("h3",{style:{fontStyle:"italic"}},e),n?R.createElement("pre",{style:a},n):null,c)}var RO=R.createElement(OO,null),jO=class extends R.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.unstable_onError?this.props.unstable_onError(t,e):console.error("React Router caught the following error during render",t)}render(){return this.state.error!==void 0?R.createElement(Kr.Provider,{value:this.props.routeContext},R.createElement(mg.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function kO({routeContext:t,match:e,children:n}){let s=R.useContext(Qa);return s&&s.static&&s.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=e.route.id),R.createElement(Kr.Provider,{value:t},n)}function MO(t,e=[],n=null,s=null,a=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let l=t,c=n?.errors;if(c!=null){let h=l.findIndex(g=>g.route.id&&c?.[g.route.id]!==void 0);ht(h>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),l=l.slice(0,Math.min(l.length,h+1))}let d=!1,f=-1;if(n)for(let h=0;h<l.length;h++){let g=l[h];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(f=h),g.route.id){let{loaderData:p,errors:v}=n,b=g.route.loader&&!p.hasOwnProperty(g.route.id)&&(!v||v[g.route.id]===void 0);if(g.route.lazy||b){d=!0,f>=0?l=l.slice(0,f+1):l=[l[0]];break}}}return l.reduceRight((h,g,p)=>{let v,b=!1,x=null,w=null;n&&(v=c&&g.route.id?c[g.route.id]:void 0,x=g.route.errorElement||RO,d&&(f<0&&p===0?(sS("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),b=!0,w=null):f===p&&(b=!0,w=g.route.hydrateFallbackElement||null)));let S=e.concat(l.slice(0,p+1)),C=()=>{let N;return v?N=x:b?N=w:g.route.Component?N=R.createElement(g.route.Component,null):g.route.element?N=g.route.element:N=h,R.createElement(kO,{match:g,routeContext:{outlet:h,matches:S,isDataRoute:n!=null},children:N})};return n&&(g.route.ErrorBoundary||g.route.errorElement||p===0)?R.createElement(jO,{location:n.location,revalidation:n.revalidation,component:x,error:v,children:C(),routeContext:{outlet:null,matches:S,isDataRoute:!0},unstable_onError:s}):C()},null)}function pg(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function DO(t){let e=R.useContext(Qa);return ht(e,pg(t)),e}function UO(t){let e=R.useContext(Qd);return ht(e,pg(t)),e}function $O(t){let e=R.useContext(Kr);return ht(e,pg(t)),e}function gg(t){let e=$O(t),n=e.matches[e.matches.length-1];return ht(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function IO(){return gg("useRouteId")}function LO(){let t=R.useContext(mg),e=UO("useRouteError"),n=gg("useRouteError");return t!==void 0?t:e.errors?.[n]}function zO(){let{router:t}=DO("useNavigate"),e=gg("useNavigate"),n=R.useRef(!1);return nS(()=>{n.current=!0}),R.useCallback(async(a,l={})=>{pr(n.current,tS),n.current&&(typeof a=="number"?t.navigate(a):await t.navigate(a,{fromRouteId:e,...l}))},[t,e])}var m_={};function sS(t,e,n){!e&&!m_[t]&&(m_[t]=!0,pr(!1,n))}R.memo(BO);function BO({routes:t,future:e,state:n,unstable_onError:s}){return rS(t,void 0,n,s,e)}function Ms(t){ht(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function PO({basename:t="/",children:e=null,location:n,navigationType:s="POP",navigator:a,static:l=!1}){ht(!Kl(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=t.replace(/^\/*/,"/"),d=R.useMemo(()=>({basename:c,navigator:a,static:l,future:{}}),[c,a,l]);typeof n=="string"&&(n=Ka(n));let{pathname:f="/",search:h="",hash:g="",state:p=null,key:v="default"}=n,b=R.useMemo(()=>{let x=Gr(f,c);return x==null?null:{location:{pathname:x,search:h,hash:g,state:p,key:v},navigationType:s}},[c,f,h,g,p,v,s]);return pr(b!=null,`<Router basename="${c}"> is not able to match the URL "${f}${h}${g}" because it does not start with the basename, so the <Router> won't render anything.`),b==null?null:R.createElement(gr.Provider,{value:d},R.createElement(Xl.Provider,{children:e,value:b}))}function qO({children:t,location:e}){return NO(Ep(t),e)}function Ep(t,e=[]){let n=[];return R.Children.forEach(t,(s,a)=>{if(!R.isValidElement(s))return;let l=[...e,a];if(s.type===R.Fragment){n.push.apply(n,Ep(s.props.children,l));return}ht(s.type===Ms,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ht(!s.props.index||!s.props.children,"An index route cannot have child routes.");let c={id:s.props.id||l.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,middleware:s.props.middleware,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(c.children=Ep(s.props.children,l)),n.push(c)}),n}var ad="get",od="application/x-www-form-urlencoded";function Wd(t){return t!=null&&typeof t.tagName=="string"}function HO(t){return Wd(t)&&t.tagName.toLowerCase()==="button"}function VO(t){return Wd(t)&&t.tagName.toLowerCase()==="form"}function FO(t){return Wd(t)&&t.tagName.toLowerCase()==="input"}function YO(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function GO(t,e){return t.button===0&&(!e||e==="_self")&&!YO(t)}var ju=null;function XO(){if(ju===null)try{new FormData(document.createElement("form"),0),ju=!1}catch{ju=!0}return ju}var KO=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Vm(t){return t!=null&&!KO.has(t)?(pr(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${od}"`),null):t}function QO(t,e){let n,s,a,l,c;if(VO(t)){let d=t.getAttribute("action");s=d?Gr(d,e):null,n=t.getAttribute("method")||ad,a=Vm(t.getAttribute("enctype"))||od,l=new FormData(t)}else if(HO(t)||FO(t)&&(t.type==="submit"||t.type==="image")){let d=t.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let f=t.getAttribute("formaction")||d.getAttribute("action");if(s=f?Gr(f,e):null,n=t.getAttribute("formmethod")||d.getAttribute("method")||ad,a=Vm(t.getAttribute("formenctype"))||Vm(d.getAttribute("enctype"))||od,l=new FormData(d,t),!XO()){let{name:h,type:g,value:p}=t;if(g==="image"){let v=h?`${h}.`:"";l.append(`${v}x`,"0"),l.append(`${v}y`,"0")}else h&&l.append(h,p)}}else{if(Wd(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=ad,s=null,a=od,c=t}return l&&a==="text/plain"&&(c=l,l=void 0),{action:s,method:n.toLowerCase(),encType:a,formData:l,body:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function yg(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function WO(t,e,n){let s=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return s.pathname==="/"?s.pathname=`_root.${n}`:e&&Gr(s.pathname,e)==="/"?s.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:s.pathname=`${s.pathname.replace(/\/$/,"")}.${n}`,s}async function JO(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function ZO(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function eR(t,e,n){let s=await Promise.all(t.map(async a=>{let l=e.routes[a.route.id];if(l){let c=await JO(l,n);return c.links?c.links():[]}return[]}));return sR(s.flat(1).filter(ZO).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function p_(t,e,n,s,a,l){let c=(f,h)=>n[h]?f.route.id!==n[h].route.id:!0,d=(f,h)=>n[h].pathname!==f.pathname||n[h].route.path?.endsWith("*")&&n[h].params["*"]!==f.params["*"];return l==="assets"?e.filter((f,h)=>c(f,h)||d(f,h)):l==="data"?e.filter((f,h)=>{let g=s.routes[f.route.id];if(!g||!g.hasLoader)return!1;if(c(f,h)||d(f,h))return!0;if(f.route.shouldRevalidate){let p=f.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(t,window.origin),nextParams:f.params,defaultShouldRevalidate:!0});if(typeof p=="boolean")return p}return!0}):[]}function tR(t,e,{includeHydrateFallback:n}={}){return nR(t.map(s=>{let a=e.routes[s.route.id];if(!a)return[];let l=[a.module];return a.clientActionModule&&(l=l.concat(a.clientActionModule)),a.clientLoaderModule&&(l=l.concat(a.clientLoaderModule)),n&&a.hydrateFallbackModule&&(l=l.concat(a.hydrateFallbackModule)),a.imports&&(l=l.concat(a.imports)),l}).flat(1))}function nR(t){return[...new Set(t)]}function rR(t){let e={},n=Object.keys(t).sort();for(let s of n)e[s]=t[s];return e}function sR(t,e){let n=new Set;return new Set(e),t.reduce((s,a)=>{let l=JSON.stringify(rR(a));return n.has(l)||(n.add(l),s.push({key:l,link:a})),s},[])}function iS(){let t=R.useContext(Qa);return yg(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function iR(){let t=R.useContext(Qd);return yg(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var vg=R.createContext(void 0);vg.displayName="FrameworkContext";function aS(){let t=R.useContext(vg);return yg(t,"You must render this element inside a <HydratedRouter> element"),t}function aR(t,e){let n=R.useContext(vg),[s,a]=R.useState(!1),[l,c]=R.useState(!1),{onFocus:d,onBlur:f,onMouseEnter:h,onMouseLeave:g,onTouchStart:p}=e,v=R.useRef(null);R.useEffect(()=>{if(t==="render"&&c(!0),t==="viewport"){let w=C=>{C.forEach(N=>{c(N.isIntersecting)})},S=new IntersectionObserver(w,{threshold:.5});return v.current&&S.observe(v.current),()=>{S.disconnect()}}},[t]),R.useEffect(()=>{if(s){let w=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(w)}}},[s]);let b=()=>{a(!0)},x=()=>{a(!1),c(!1)};return n?t!=="intent"?[l,v,{}]:[l,v,{onFocus:Jo(d,b),onBlur:Jo(f,x),onMouseEnter:Jo(h,b),onMouseLeave:Jo(g,x),onTouchStart:Jo(p,b)}]:[!1,v,{}]}function Jo(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function oR({page:t,...e}){let{router:n}=iS(),s=R.useMemo(()=>Xx(n.routes,t,n.basename),[n.routes,t,n.basename]);return s?R.createElement(cR,{page:t,matches:s,...e}):null}function lR(t){let{manifest:e,routeModules:n}=aS(),[s,a]=R.useState([]);return R.useEffect(()=>{let l=!1;return eR(t,e,n).then(c=>{l||a(c)}),()=>{l=!0}},[t,e,n]),s}function cR({page:t,matches:e,...n}){let s=Ni(),{manifest:a,routeModules:l}=aS(),{basename:c}=iS(),{loaderData:d,matches:f}=iR(),h=R.useMemo(()=>p_(t,e,f,a,s,"data"),[t,e,f,a,s]),g=R.useMemo(()=>p_(t,e,f,a,s,"assets"),[t,e,f,a,s]),p=R.useMemo(()=>{if(t===s.pathname+s.search+s.hash)return[];let x=new Set,w=!1;if(e.forEach(C=>{let N=a.routes[C.route.id];!N||!N.hasLoader||(!h.some(E=>E.route.id===C.route.id)&&C.route.id in d&&l[C.route.id]?.shouldRevalidate||N.hasClientLoader?w=!0:x.add(C.route.id))}),x.size===0)return[];let S=WO(t,c,"data");return w&&x.size>0&&S.searchParams.set("_routes",e.filter(C=>x.has(C.route.id)).map(C=>C.route.id).join(",")),[S.pathname+S.search]},[c,d,s,a,h,e,t,l]),v=R.useMemo(()=>tR(g,a),[g,a]),b=lR(g);return R.createElement(R.Fragment,null,p.map(x=>R.createElement("link",{key:x,rel:"prefetch",as:"fetch",href:x,...n})),v.map(x=>R.createElement("link",{key:x,rel:"modulepreload",href:x,...n})),b.map(({key:x,link:w})=>R.createElement("link",{key:x,nonce:n.nonce,...w})))}function uR(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var oS=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{oS&&(window.__reactRouterVersion="7.9.5")}catch{}function dR({basename:t,children:e,window:n}){let s=R.useRef();s.current==null&&(s.current=ZN({window:n,v5Compat:!0}));let a=s.current,[l,c]=R.useState({action:a.action,location:a.location}),d=R.useCallback(f=>{R.startTransition(()=>c(f))},[c]);return R.useLayoutEffect(()=>a.listen(d),[a,d]),R.createElement(PO,{basename:t,children:e,location:l.location,navigationType:l.action,navigator:a})}var lS=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,_i=R.forwardRef(function({onClick:e,discover:n="render",prefetch:s="none",relative:a,reloadDocument:l,replace:c,state:d,target:f,to:h,preventScrollReset:g,viewTransition:p,...v},b){let{basename:x}=R.useContext(gr),w=typeof h=="string"&&lS.test(h),S,C=!1;if(typeof h=="string"&&w&&(S=h,oS))try{let P=new URL(window.location.href),K=h.startsWith("//")?new URL(P.protocol+h):new URL(h),G=Gr(K.pathname,x);K.origin===P.origin&&G!=null?h=G+K.search+K.hash:C=!0}catch{pr(!1,`<Link to="${h}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let N=AO(h,{relative:a}),[E,A,O]=aR(s,v),j=pR(h,{replace:c,state:d,target:f,preventScrollReset:g,relative:a,viewTransition:p});function D(P){e&&e(P),P.defaultPrevented||j(P)}let $=R.createElement("a",{...v,...O,href:S||N,onClick:C||l?e:D,ref:uR(b,A),target:f,"data-discover":!w&&n==="render"?"true":void 0});return E&&!w?R.createElement(R.Fragment,null,$,R.createElement(oR,{page:N})):$});_i.displayName="Link";var fR=R.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:s="",end:a=!1,style:l,to:c,viewTransition:d,children:f,...h},g){let p=Ql(c,{relative:h.relative}),v=Ni(),b=R.useContext(Qd),{navigator:x,basename:w}=R.useContext(gr),S=b!=null&&_R(p)&&d===!0,C=x.encodeLocation?x.encodeLocation(p).pathname:p.pathname,N=v.pathname,E=b&&b.navigation&&b.navigation.location?b.navigation.location.pathname:null;n||(N=N.toLowerCase(),E=E?E.toLowerCase():null,C=C.toLowerCase()),E&&w&&(E=Gr(E,w)||E);const A=C!=="/"&&C.endsWith("/")?C.length-1:C.length;let O=N===C||!a&&N.startsWith(C)&&N.charAt(A)==="/",j=E!=null&&(E===C||!a&&E.startsWith(C)&&E.charAt(C.length)==="/"),D={isActive:O,isPending:j,isTransitioning:S},$=O?e:void 0,P;typeof s=="function"?P=s(D):P=[s,O?"active":null,j?"pending":null,S?"transitioning":null].filter(Boolean).join(" ");let K=typeof l=="function"?l(D):l;return R.createElement(_i,{...h,"aria-current":$,className:P,ref:g,style:K,to:c,viewTransition:d},typeof f=="function"?f(D):f)});fR.displayName="NavLink";var hR=R.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:s,replace:a,state:l,method:c=ad,action:d,onSubmit:f,relative:h,preventScrollReset:g,viewTransition:p,...v},b)=>{let x=vR(),w=bR(d,{relative:h}),S=c.toLowerCase()==="get"?"get":"post",C=typeof d=="string"&&lS.test(d),N=E=>{if(f&&f(E),E.defaultPrevented)return;E.preventDefault();let A=E.nativeEvent.submitter,O=A?.getAttribute("formmethod")||c;x(A||E.currentTarget,{fetcherKey:e,method:O,navigate:n,replace:a,state:l,relative:h,preventScrollReset:g,viewTransition:p})};return R.createElement("form",{ref:b,method:S,action:w,onSubmit:s?f:N,...v,"data-discover":!C&&t==="render"?"true":void 0})});hR.displayName="Form";function mR(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function cS(t){let e=R.useContext(Qa);return ht(e,mR(t)),e}function pR(t,{target:e,replace:n,state:s,preventScrollReset:a,relative:l,viewTransition:c}={}){let d=Is(),f=Ni(),h=Ql(t,{relative:l});return R.useCallback(g=>{if(GO(g,e)){g.preventDefault();let p=n!==void 0?n:jl(f)===jl(h);d(t,{replace:p,state:s,preventScrollReset:a,relative:l,viewTransition:c})}},[f,d,h,n,s,e,t,a,l,c])}var gR=0,yR=()=>`__${String(++gR)}__`;function vR(){let{router:t}=cS("useSubmit"),{basename:e}=R.useContext(gr),n=IO();return R.useCallback(async(s,a={})=>{let{action:l,method:c,encType:d,formData:f,body:h}=QO(s,e);if(a.navigate===!1){let g=a.fetcherKey||yR();await t.fetch(g,n,a.action||l,{preventScrollReset:a.preventScrollReset,formData:f,body:h,formMethod:a.method||c,formEncType:a.encType||d,flushSync:a.flushSync})}else await t.navigate(a.action||l,{preventScrollReset:a.preventScrollReset,formData:f,body:h,formMethod:a.method||c,formEncType:a.encType||d,replace:a.replace,state:a.state,fromRouteId:n,flushSync:a.flushSync,viewTransition:a.viewTransition})},[t,e,n])}function bR(t,{relative:e}={}){let{basename:n}=R.useContext(gr),s=R.useContext(Kr);ht(s,"useFormAction must be used inside a RouteContext");let[a]=s.matches.slice(-1),l={...Ql(t||".",{relative:e})},c=Ni();if(t==null){l.search=c.search;let d=new URLSearchParams(l.search),f=d.getAll("index");if(f.some(g=>g==="")){d.delete("index"),f.filter(p=>p).forEach(p=>d.append("index",p));let g=d.toString();l.search=g?`?${g}`:""}}return(!t||t===".")&&a.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(l.pathname=l.pathname==="/"?n:Yr([n,l.pathname])),jl(l)}function _R(t,{relative:e}={}){let n=R.useContext(eS);ht(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=cS("useViewTransitionState"),a=Ql(t,{relative:e});if(!n.isTransitioning)return!1;let l=Gr(n.currentLocation.pathname,s)||n.currentLocation.pathname,c=Gr(n.nextLocation.pathname,s)||n.nextLocation.pathname;return Sd(a.pathname,c)!=null||Sd(a.pathname,l)!=null}Gx();var Cp=function(t,e){return Cp=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,s){n.__proto__=s}||function(n,s){for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(n[a]=s[a])},Cp(t,e)};function uS(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Cp(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var Ed=function(){return Ed=Object.assign||function(e){for(var n,s=1,a=arguments.length;s<a;s++){n=arguments[s];for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&(e[l]=n[l])}return e},Ed.apply(this,arguments)};function Wa(t,e){var n={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(n[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(t);a<s.length;a++)e.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(t,s[a])&&(n[s[a]]=t[s[a]]);return n}function dS(t,e,n,s){var a=arguments.length,l=a<3?e:s===null?s=Object.getOwnPropertyDescriptor(e,n):s,c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")l=Reflect.decorate(t,e,n,s);else for(var d=t.length-1;d>=0;d--)(c=t[d])&&(l=(a<3?c(l):a>3?c(e,n,l):c(e,n))||l);return a>3&&l&&Object.defineProperty(e,n,l),l}function fS(t,e){return function(n,s){e(n,s,t)}}function hS(t,e,n,s,a,l){function c(C){if(C!==void 0&&typeof C!="function")throw new TypeError("Function expected");return C}for(var d=s.kind,f=d==="getter"?"get":d==="setter"?"set":"value",h=!e&&t?s.static?t:t.prototype:null,g=e||(h?Object.getOwnPropertyDescriptor(h,s.name):{}),p,v=!1,b=n.length-1;b>=0;b--){var x={};for(var w in s)x[w]=w==="access"?{}:s[w];for(var w in s.access)x.access[w]=s.access[w];x.addInitializer=function(C){if(v)throw new TypeError("Cannot add initializers after decoration has completed");l.push(c(C||null))};var S=(0,n[b])(d==="accessor"?{get:g.get,set:g.set}:g[f],x);if(d==="accessor"){if(S===void 0)continue;if(S===null||typeof S!="object")throw new TypeError("Object expected");(p=c(S.get))&&(g.get=p),(p=c(S.set))&&(g.set=p),(p=c(S.init))&&a.unshift(p)}else(p=c(S))&&(d==="field"?a.unshift(p):g[f]=p)}h&&Object.defineProperty(h,s.name,g),v=!0}function mS(t,e,n){for(var s=arguments.length>2,a=0;a<e.length;a++)n=s?e[a].call(t,n):e[a].call(t);return s?n:void 0}function pS(t){return typeof t=="symbol"?t:"".concat(t)}function gS(t,e,n){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(t,"name",{configurable:!0,value:n?"".concat(n," ",e):e})}function yS(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function Te(t,e,n,s){function a(l){return l instanceof n?l:new n(function(c){c(l)})}return new(n||(n=Promise))(function(l,c){function d(g){try{h(s.next(g))}catch(p){c(p)}}function f(g){try{h(s.throw(g))}catch(p){c(p)}}function h(g){g.done?l(g.value):a(g.value).then(d,f)}h((s=s.apply(t,e||[])).next())})}function vS(t,e){var n={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},s,a,l,c=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return c.next=d(0),c.throw=d(1),c.return=d(2),typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function d(h){return function(g){return f([h,g])}}function f(h){if(s)throw new TypeError("Generator is already executing.");for(;c&&(c=0,h[0]&&(n=0)),n;)try{if(s=1,a&&(l=h[0]&2?a.return:h[0]?a.throw||((l=a.return)&&l.call(a),0):a.next)&&!(l=l.call(a,h[1])).done)return l;switch(a=0,l&&(h=[h[0]&2,l.value]),h[0]){case 0:case 1:l=h;break;case 4:return n.label++,{value:h[1],done:!1};case 5:n.label++,a=h[1],h=[0];continue;case 7:h=n.ops.pop(),n.trys.pop();continue;default:if(l=n.trys,!(l=l.length>0&&l[l.length-1])&&(h[0]===6||h[0]===2)){n=0;continue}if(h[0]===3&&(!l||h[1]>l[0]&&h[1]<l[3])){n.label=h[1];break}if(h[0]===6&&n.label<l[1]){n.label=l[1],l=h;break}if(l&&n.label<l[2]){n.label=l[2],n.ops.push(h);break}l[2]&&n.ops.pop(),n.trys.pop();continue}h=e.call(t,n)}catch(g){h=[6,g],a=0}finally{s=l=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}}var Jd=Object.create?(function(t,e,n,s){s===void 0&&(s=n);var a=Object.getOwnPropertyDescriptor(e,n);(!a||("get"in a?!e.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,s,a)}):(function(t,e,n,s){s===void 0&&(s=n),t[s]=e[n]});function bS(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&Jd(e,t,n)}function Cd(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],s=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&s>=t.length&&(t=void 0),{value:t&&t[s++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function bg(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var s=n.call(t),a,l=[],c;try{for(;(e===void 0||e-- >0)&&!(a=s.next()).done;)l.push(a.value)}catch(d){c={error:d}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(c)throw c.error}}return l}function _S(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(bg(arguments[e]));return t}function wS(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var s=Array(t),a=0,e=0;e<n;e++)for(var l=arguments[e],c=0,d=l.length;c<d;c++,a++)s[a]=l[c];return s}function xS(t,e,n){if(n||arguments.length===2)for(var s=0,a=e.length,l;s<a;s++)(l||!(s in e))&&(l||(l=Array.prototype.slice.call(e,0,s)),l[s]=e[s]);return t.concat(l||Array.prototype.slice.call(e))}function Pa(t){return this instanceof Pa?(this.v=t,this):new Pa(t)}function SS(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=n.apply(t,e||[]),a,l=[];return a=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),d("next"),d("throw"),d("return",c),a[Symbol.asyncIterator]=function(){return this},a;function c(b){return function(x){return Promise.resolve(x).then(b,p)}}function d(b,x){s[b]&&(a[b]=function(w){return new Promise(function(S,C){l.push([b,w,S,C])>1||f(b,w)})},x&&(a[b]=x(a[b])))}function f(b,x){try{h(s[b](x))}catch(w){v(l[0][3],w)}}function h(b){b.value instanceof Pa?Promise.resolve(b.value.v).then(g,p):v(l[0][2],b)}function g(b){f("next",b)}function p(b){f("throw",b)}function v(b,x){b(x),l.shift(),l.length&&f(l[0][0],l[0][1])}}function ES(t){var e,n;return e={},s("next"),s("throw",function(a){throw a}),s("return"),e[Symbol.iterator]=function(){return this},e;function s(a,l){e[a]=t[a]?function(c){return(n=!n)?{value:Pa(t[a](c)),done:!1}:l?l(c):c}:l}}function CS(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Cd=="function"?Cd(t):t[Symbol.iterator](),n={},s("next"),s("throw"),s("return"),n[Symbol.asyncIterator]=function(){return this},n);function s(l){n[l]=t[l]&&function(c){return new Promise(function(d,f){c=t[l](c),a(d,f,c.done,c.value)})}}function a(l,c,d,f){Promise.resolve(f).then(function(h){l({value:h,done:d})},c)}}function AS(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}var wR=Object.create?(function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}):function(t,e){t.default=e},Ap=function(t){return Ap=Object.getOwnPropertyNames||function(e){var n=[];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(n[n.length]=s);return n},Ap(t)};function TS(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n=Ap(t),s=0;s<n.length;s++)n[s]!=="default"&&Jd(e,t,n[s]);return wR(e,t),e}function NS(t){return t&&t.__esModule?t:{default:t}}function OS(t,e,n,s){if(n==="a"&&!s)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?s:n==="a"?s.call(t):s?s.value:e.get(t)}function RS(t,e,n,s,a){if(s==="m")throw new TypeError("Private method is not writable");if(s==="a"&&!a)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!a:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return s==="a"?a.call(t,n):a?a.value=n:e.set(t,n),n}function jS(t,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof t=="function"?e===t:t.has(e)}function kS(t,e,n){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var s,a;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");s=e[Symbol.asyncDispose]}if(s===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");s=e[Symbol.dispose],n&&(a=s)}if(typeof s!="function")throw new TypeError("Object not disposable.");a&&(s=function(){try{a.call(this)}catch(l){return Promise.reject(l)}}),t.stack.push({value:e,dispose:s,async:n})}else n&&t.stack.push({async:!0});return e}var xR=typeof SuppressedError=="function"?SuppressedError:function(t,e,n){var s=new Error(n);return s.name="SuppressedError",s.error=t,s.suppressed=e,s};function MS(t){function e(l){t.error=t.hasError?new xR(l,t.error,"An error was suppressed during disposal."):l,t.hasError=!0}var n,s=0;function a(){for(;n=t.stack.pop();)try{if(!n.async&&s===1)return s=0,t.stack.push(n),Promise.resolve().then(a);if(n.dispose){var l=n.dispose.call(n.value);if(n.async)return s|=2,Promise.resolve(l).then(a,function(c){return e(c),a()})}else s|=1}catch(c){e(c)}if(s===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return a()}function DS(t,e){return typeof t=="string"&&/^\.\.?\//.test(t)?t.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(n,s,a,l,c){return s?e?".jsx":".js":a&&(!l||!c)?n:a+l+"."+c.toLowerCase()+"js"}):t}const SR={__extends:uS,__assign:Ed,__rest:Wa,__decorate:dS,__param:fS,__esDecorate:hS,__runInitializers:mS,__propKey:pS,__setFunctionName:gS,__metadata:yS,__awaiter:Te,__generator:vS,__createBinding:Jd,__exportStar:bS,__values:Cd,__read:bg,__spread:_S,__spreadArrays:wS,__spreadArray:xS,__await:Pa,__asyncGenerator:SS,__asyncDelegator:ES,__asyncValues:CS,__makeTemplateObject:AS,__importStar:TS,__importDefault:NS,__classPrivateFieldGet:OS,__classPrivateFieldSet:RS,__classPrivateFieldIn:jS,__addDisposableResource:kS,__disposeResources:MS,__rewriteRelativeImportExtension:DS},ER=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:kS,get __assign(){return Ed},__asyncDelegator:ES,__asyncGenerator:SS,__asyncValues:CS,__await:Pa,__awaiter:Te,__classPrivateFieldGet:OS,__classPrivateFieldIn:jS,__classPrivateFieldSet:RS,__createBinding:Jd,__decorate:dS,__disposeResources:MS,__esDecorate:hS,__exportStar:bS,__extends:uS,__generator:vS,__importDefault:NS,__importStar:TS,__makeTemplateObject:AS,__metadata:yS,__param:fS,__propKey:pS,__read:bg,__rest:Wa,__rewriteRelativeImportExtension:DS,__runInitializers:mS,__setFunctionName:gS,__spread:_S,__spreadArray:xS,__spreadArrays:wS,__values:Cd,default:SR},Symbol.toStringTag,{value:"Module"})),CR=t=>t?(...e)=>t(...e):(...e)=>fetch(...e);class _g extends Error{constructor(e,n="FunctionsError",s){super(e),this.name=n,this.context=s}}class g_ extends _g{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class y_ extends _g{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class v_ extends _g{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Tp;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Tp||(Tp={}));class AR{constructor(e,{headers:n={},customFetch:s,region:a=Tp.Any}={}){this.url=e,this.headers=n,this.region=a,this.fetch=CR(s)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return Te(this,arguments,void 0,function*(n,s={}){var a;try{const{headers:l,method:c,body:d,signal:f}=s;let h={},{region:g}=s;g||(g=this.region);const p=new URL(`${this.url}/${n}`);g&&g!=="any"&&(h["x-region"]=g,p.searchParams.set("forceFunctionRegion",g));let v;d&&(l&&!Object.prototype.hasOwnProperty.call(l,"Content-Type")||!l)?typeof Blob<"u"&&d instanceof Blob||d instanceof ArrayBuffer?(h["Content-Type"]="application/octet-stream",v=d):typeof d=="string"?(h["Content-Type"]="text/plain",v=d):typeof FormData<"u"&&d instanceof FormData?v=d:(h["Content-Type"]="application/json",v=JSON.stringify(d)):v=d;const b=yield this.fetch(p.toString(),{method:c||"POST",headers:Object.assign(Object.assign(Object.assign({},h),this.headers),l),body:v,signal:f}).catch(C=>{throw C.name==="AbortError"?C:new g_(C)}),x=b.headers.get("x-relay-error");if(x&&x==="true")throw new y_(b);if(!b.ok)throw new v_(b);let w=((a=b.headers.get("Content-Type"))!==null&&a!==void 0?a:"text/plain").split(";")[0].trim(),S;return w==="application/json"?S=yield b.json():w==="application/octet-stream"||w==="application/pdf"?S=yield b.blob():w==="text/event-stream"?S=b:w==="multipart/form-data"?S=yield b.formData():S=yield b.text(),{data:S,error:null,response:b}}catch(l){return l instanceof Error&&l.name==="AbortError"?{data:null,error:new g_(l)}:{data:null,error:l,response:l instanceof v_||l instanceof y_?l.context:void 0}}})}}var Xt={};const Ja=Yx(ER);var ku={},Mu={},Du={},Uu={},$u={},Iu={},b_;function US(){if(b_)return Iu;b_=1,Object.defineProperty(Iu,"__esModule",{value:!0});class t extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}}return Iu.default=t,Iu}var __;function $S(){if(__)return $u;__=1,Object.defineProperty($u,"__esModule",{value:!0});const e=Ja.__importDefault(US());class n{constructor(a){var l,c;this.shouldThrowOnError=!1,this.method=a.method,this.url=a.url,this.headers=new Headers(a.headers),this.schema=a.schema,this.body=a.body,this.shouldThrowOnError=(l=a.shouldThrowOnError)!==null&&l!==void 0?l:!1,this.signal=a.signal,this.isMaybeSingle=(c=a.isMaybeSingle)!==null&&c!==void 0?c:!1,a.fetch?this.fetch=a.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(a,l){return this.headers=new Headers(this.headers),this.headers.set(a,l),this}then(a,l){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const c=this.fetch;let d=c(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async f=>{var h,g,p,v;let b=null,x=null,w=null,S=f.status,C=f.statusText;if(f.ok){if(this.method!=="HEAD"){const O=await f.text();O===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((h=this.headers.get("Accept"))===null||h===void 0)&&h.includes("application/vnd.pgrst.plan+text"))?x=O:x=JSON.parse(O))}const E=(g=this.headers.get("Prefer"))===null||g===void 0?void 0:g.match(/count=(exact|planned|estimated)/),A=(p=f.headers.get("content-range"))===null||p===void 0?void 0:p.split("/");E&&A&&A.length>1&&(w=parseInt(A[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(x)&&(x.length>1?(b={code:"PGRST116",details:`Results contain ${x.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},x=null,w=null,S=406,C="Not Acceptable"):x.length===1?x=x[0]:x=null)}else{const E=await f.text();try{b=JSON.parse(E),Array.isArray(b)&&f.status===404&&(x=[],b=null,S=200,C="OK")}catch{f.status===404&&E===""?(S=204,C="No Content"):b={message:E}}if(b&&this.isMaybeSingle&&(!((v=b?.details)===null||v===void 0)&&v.includes("0 rows"))&&(b=null,S=200,C="OK"),b&&this.shouldThrowOnError)throw new e.default(b)}return{error:b,data:x,count:w,status:S,statusText:C}});return this.shouldThrowOnError||(d=d.catch(f=>{var h,g,p;return{error:{message:`${(h=f?.name)!==null&&h!==void 0?h:"FetchError"}: ${f?.message}`,details:`${(g=f?.stack)!==null&&g!==void 0?g:""}`,hint:"",code:`${(p=f?.code)!==null&&p!==void 0?p:""}`},data:null,count:null,status:0,statusText:""}})),d.then(a,l)}returns(){return this}overrideTypes(){return this}}return $u.default=n,$u}var w_;function IS(){if(w_)return Uu;w_=1,Object.defineProperty(Uu,"__esModule",{value:!0});const e=Ja.__importDefault($S());class n extends e.default{select(a){let l=!1;const c=(a??"*").split("").map(d=>/\s/.test(d)&&!l?"":(d==='"'&&(l=!l),d)).join("");return this.url.searchParams.set("select",c),this.headers.append("Prefer","return=representation"),this}order(a,{ascending:l=!0,nullsFirst:c,foreignTable:d,referencedTable:f=d}={}){const h=f?`${f}.order`:"order",g=this.url.searchParams.get(h);return this.url.searchParams.set(h,`${g?`${g},`:""}${a}.${l?"asc":"desc"}${c===void 0?"":c?".nullsfirst":".nullslast"}`),this}limit(a,{foreignTable:l,referencedTable:c=l}={}){const d=typeof c>"u"?"limit":`${c}.limit`;return this.url.searchParams.set(d,`${a}`),this}range(a,l,{foreignTable:c,referencedTable:d=c}={}){const f=typeof d>"u"?"offset":`${d}.offset`,h=typeof d>"u"?"limit":`${d}.limit`;return this.url.searchParams.set(f,`${a}`),this.url.searchParams.set(h,`${l-a+1}`),this}abortSignal(a){return this.signal=a,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:a=!1,verbose:l=!1,settings:c=!1,buffers:d=!1,wal:f=!1,format:h="text"}={}){var g;const p=[a?"analyze":null,l?"verbose":null,c?"settings":null,d?"buffers":null,f?"wal":null].filter(Boolean).join("|"),v=(g=this.headers.get("Accept"))!==null&&g!==void 0?g:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${h}; for="${v}"; options=${p};`),h==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(a){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${a}`),this}}return Uu.default=n,Uu}var x_;function wg(){if(x_)return Du;x_=1,Object.defineProperty(Du,"__esModule",{value:!0});const e=Ja.__importDefault(IS()),n=new RegExp("[,()]");class s extends e.default{eq(l,c){return this.url.searchParams.append(l,`eq.${c}`),this}neq(l,c){return this.url.searchParams.append(l,`neq.${c}`),this}gt(l,c){return this.url.searchParams.append(l,`gt.${c}`),this}gte(l,c){return this.url.searchParams.append(l,`gte.${c}`),this}lt(l,c){return this.url.searchParams.append(l,`lt.${c}`),this}lte(l,c){return this.url.searchParams.append(l,`lte.${c}`),this}like(l,c){return this.url.searchParams.append(l,`like.${c}`),this}likeAllOf(l,c){return this.url.searchParams.append(l,`like(all).{${c.join(",")}}`),this}likeAnyOf(l,c){return this.url.searchParams.append(l,`like(any).{${c.join(",")}}`),this}ilike(l,c){return this.url.searchParams.append(l,`ilike.${c}`),this}ilikeAllOf(l,c){return this.url.searchParams.append(l,`ilike(all).{${c.join(",")}}`),this}ilikeAnyOf(l,c){return this.url.searchParams.append(l,`ilike(any).{${c.join(",")}}`),this}is(l,c){return this.url.searchParams.append(l,`is.${c}`),this}in(l,c){const d=Array.from(new Set(c)).map(f=>typeof f=="string"&&n.test(f)?`"${f}"`:`${f}`).join(",");return this.url.searchParams.append(l,`in.(${d})`),this}contains(l,c){return typeof c=="string"?this.url.searchParams.append(l,`cs.${c}`):Array.isArray(c)?this.url.searchParams.append(l,`cs.{${c.join(",")}}`):this.url.searchParams.append(l,`cs.${JSON.stringify(c)}`),this}containedBy(l,c){return typeof c=="string"?this.url.searchParams.append(l,`cd.${c}`):Array.isArray(c)?this.url.searchParams.append(l,`cd.{${c.join(",")}}`):this.url.searchParams.append(l,`cd.${JSON.stringify(c)}`),this}rangeGt(l,c){return this.url.searchParams.append(l,`sr.${c}`),this}rangeGte(l,c){return this.url.searchParams.append(l,`nxl.${c}`),this}rangeLt(l,c){return this.url.searchParams.append(l,`sl.${c}`),this}rangeLte(l,c){return this.url.searchParams.append(l,`nxr.${c}`),this}rangeAdjacent(l,c){return this.url.searchParams.append(l,`adj.${c}`),this}overlaps(l,c){return typeof c=="string"?this.url.searchParams.append(l,`ov.${c}`):this.url.searchParams.append(l,`ov.{${c.join(",")}}`),this}textSearch(l,c,{config:d,type:f}={}){let h="";f==="plain"?h="pl":f==="phrase"?h="ph":f==="websearch"&&(h="w");const g=d===void 0?"":`(${d})`;return this.url.searchParams.append(l,`${h}fts${g}.${c}`),this}match(l){return Object.entries(l).forEach(([c,d])=>{this.url.searchParams.append(c,`eq.${d}`)}),this}not(l,c,d){return this.url.searchParams.append(l,`not.${c}.${d}`),this}or(l,{foreignTable:c,referencedTable:d=c}={}){const f=d?`${d}.or`:"or";return this.url.searchParams.append(f,`(${l})`),this}filter(l,c,d){return this.url.searchParams.append(l,`${c}.${d}`),this}}return Du.default=s,Du}var S_;function LS(){if(S_)return Mu;S_=1,Object.defineProperty(Mu,"__esModule",{value:!0});const e=Ja.__importDefault(wg());class n{constructor(a,{headers:l={},schema:c,fetch:d}){this.url=a,this.headers=new Headers(l),this.schema=c,this.fetch=d}select(a,l){const{head:c=!1,count:d}=l??{},f=c?"HEAD":"GET";let h=!1;const g=(a??"*").split("").map(p=>/\s/.test(p)&&!h?"":(p==='"'&&(h=!h),p)).join("");return this.url.searchParams.set("select",g),d&&this.headers.append("Prefer",`count=${d}`),new e.default({method:f,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(a,{count:l,defaultToNull:c=!0}={}){var d;const f="POST";if(l&&this.headers.append("Prefer",`count=${l}`),c||this.headers.append("Prefer","missing=default"),Array.isArray(a)){const h=a.reduce((g,p)=>g.concat(Object.keys(p)),[]);if(h.length>0){const g=[...new Set(h)].map(p=>`"${p}"`);this.url.searchParams.set("columns",g.join(","))}}return new e.default({method:f,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}upsert(a,{onConflict:l,ignoreDuplicates:c=!1,count:d,defaultToNull:f=!0}={}){var h;const g="POST";if(this.headers.append("Prefer",`resolution=${c?"ignore":"merge"}-duplicates`),l!==void 0&&this.url.searchParams.set("on_conflict",l),d&&this.headers.append("Prefer",`count=${d}`),f||this.headers.append("Prefer","missing=default"),Array.isArray(a)){const p=a.reduce((v,b)=>v.concat(Object.keys(b)),[]);if(p.length>0){const v=[...new Set(p)].map(b=>`"${b}"`);this.url.searchParams.set("columns",v.join(","))}}return new e.default({method:g,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(h=this.fetch)!==null&&h!==void 0?h:fetch})}update(a,{count:l}={}){var c;const d="PATCH";return l&&this.headers.append("Prefer",`count=${l}`),new e.default({method:d,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch})}delete({count:a}={}){var l;const c="DELETE";return a&&this.headers.append("Prefer",`count=${a}`),new e.default({method:c,url:this.url,headers:this.headers,schema:this.schema,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}}return Mu.default=n,Mu}var E_;function TR(){if(E_)return ku;E_=1,Object.defineProperty(ku,"__esModule",{value:!0});const t=Ja,e=t.__importDefault(LS()),n=t.__importDefault(wg());class s{constructor(l,{headers:c={},schema:d,fetch:f}={}){this.url=l,this.headers=new Headers(c),this.schemaName=d,this.fetch=f}from(l){const c=new URL(`${this.url}/${l}`);return new e.default(c,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(l){return new s(this.url,{headers:this.headers,schema:l,fetch:this.fetch})}rpc(l,c={},{head:d=!1,get:f=!1,count:h}={}){var g;let p;const v=new URL(`${this.url}/rpc/${l}`);let b;d||f?(p=d?"HEAD":"GET",Object.entries(c).filter(([w,S])=>S!==void 0).map(([w,S])=>[w,Array.isArray(S)?`{${S.join(",")}}`:`${S}`]).forEach(([w,S])=>{v.searchParams.append(w,S)})):(p="POST",b=c);const x=new Headers(this.headers);return h&&x.set("Prefer",`count=${h}`),new n.default({method:p,url:v,headers:x,schema:this.schemaName,body:b,fetch:(g=this.fetch)!==null&&g!==void 0?g:fetch})}}return ku.default=s,ku}var C_;function NR(){if(C_)return Xt;C_=1,Object.defineProperty(Xt,"__esModule",{value:!0}),Xt.PostgrestError=Xt.PostgrestBuilder=Xt.PostgrestTransformBuilder=Xt.PostgrestFilterBuilder=Xt.PostgrestQueryBuilder=Xt.PostgrestClient=void 0;const t=Ja,e=t.__importDefault(TR());Xt.PostgrestClient=e.default;const n=t.__importDefault(LS());Xt.PostgrestQueryBuilder=n.default;const s=t.__importDefault(wg());Xt.PostgrestFilterBuilder=s.default;const a=t.__importDefault(IS());Xt.PostgrestTransformBuilder=a.default;const l=t.__importDefault($S());Xt.PostgrestBuilder=l.default;const c=t.__importDefault(US());return Xt.PostgrestError=c.default,Xt.default={PostgrestClient:e.default,PostgrestQueryBuilder:n.default,PostgrestFilterBuilder:s.default,PostgrestTransformBuilder:a.default,PostgrestBuilder:l.default,PostgrestError:c.default},Xt}var zS=NR();const BS=Kd(zS),OR=qN({__proto__:null,default:BS},[zS]),{PostgrestClient:RR,PostgrestQueryBuilder:y4,PostgrestFilterBuilder:v4,PostgrestTransformBuilder:b4,PostgrestBuilder:_4,PostgrestError:w4}=BS||OR;class jR{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const s=n.node,a=parseInt(s.replace(/^v/,"").split(".")[0]);return a>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${a} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${a} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let n=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(n+=`

Suggested solution: ${e.workaround}`),new Error(n)}static createWebSocket(e,n){const s=this.getWebSocketConstructor();return new s(e,n)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const kR="2.79.0",MR=`realtime-js/${kR}`,DR="1.0.0",Np=1e4,UR=1e3,$R=100;var xl;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(xl||(xl={}));var kt;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(kt||(kt={}));var Jn;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Jn||(Jn={}));var Op;(function(t){t.websocket="websocket"})(Op||(Op={}));var fi;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(fi||(fi={}));class IR{constructor(){this.HEADER_LENGTH=1}decode(e,n){return e.constructor===ArrayBuffer?n(this._binaryDecode(e)):n(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const n=new DataView(e),s=new TextDecoder;return this._decodeBroadcast(e,n,s)}_decodeBroadcast(e,n,s){const a=n.getUint8(1),l=n.getUint8(2);let c=this.HEADER_LENGTH+2;const d=s.decode(e.slice(c,c+a));c=c+a;const f=s.decode(e.slice(c,c+l));c=c+l;const h=JSON.parse(s.decode(e.slice(c,e.byteLength)));return{ref:null,topic:d,event:f,payload:h}}}let PS=class{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}};var at;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(at||(at={}));const A_=(t,e,n={})=>{var s;const a=(s=n.skipTypes)!==null&&s!==void 0?s:[];return e?Object.keys(e).reduce((l,c)=>(l[c]=LR(c,t,e,a),l),{}):{}},LR=(t,e,n,s)=>{const a=e.find(d=>d.name===t),l=a?.type,c=n[t];return l&&!s.includes(l)?qS(l,c):Rp(c)},qS=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return qR(e,n)}switch(t){case at.bool:return zR(e);case at.float4:case at.float8:case at.int2:case at.int4:case at.int8:case at.numeric:case at.oid:return BR(e);case at.json:case at.jsonb:return PR(e);case at.timestamp:return HR(e);case at.abstime:case at.date:case at.daterange:case at.int4range:case at.int8range:case at.money:case at.reltime:case at.text:case at.time:case at.timestamptz:case at.timetz:case at.tsrange:case at.tstzrange:return Rp(e);default:return Rp(e)}},Rp=t=>t,zR=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},BR=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},PR=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},qR=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,s=t[n];if(t[0]==="{"&&s==="}"){let l;const c=t.slice(1,n);try{l=JSON.parse("["+c+"]")}catch{l=c?c.split(","):[]}return l.map(d=>qS(e,d))}return t},HR=t=>typeof t=="string"?t.replace(" ","T"):t,HS=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class Fm{constructor(e,n,s={},a=Np){this.channel=e,this.event=n,this.payload=s,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var s;return this._hasReceived(e)&&n((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(s=>s.status===e).forEach(s=>s.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var T_;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(T_||(T_={}));class Sl{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=n?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},a=>{const{onJoin:l,onLeave:c,onSync:d}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Sl.syncState(this.state,a,l,c),this.pendingDiffs.forEach(f=>{this.state=Sl.syncDiff(this.state,f,l,c)}),this.pendingDiffs=[],d()}),this.channel._on(s.diff,{},a=>{const{onJoin:l,onLeave:c,onSync:d}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=Sl.syncDiff(this.state,a,l,c),d())}),this.onJoin((a,l,c)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:l,newPresences:c})}),this.onLeave((a,l,c)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:l,leftPresences:c})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,s,a){const l=this.cloneDeep(e),c=this.transformState(n),d={},f={};return this.map(l,(h,g)=>{c[h]||(f[h]=g)}),this.map(c,(h,g)=>{const p=l[h];if(p){const v=g.map(S=>S.presence_ref),b=p.map(S=>S.presence_ref),x=g.filter(S=>b.indexOf(S.presence_ref)<0),w=p.filter(S=>v.indexOf(S.presence_ref)<0);x.length>0&&(d[h]=x),w.length>0&&(f[h]=w)}else d[h]=g}),this.syncDiff(l,{joins:d,leaves:f},s,a)}static syncDiff(e,n,s,a){const{joins:l,leaves:c}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return s||(s=()=>{}),a||(a=()=>{}),this.map(l,(d,f)=>{var h;const g=(h=e[d])!==null&&h!==void 0?h:[];if(e[d]=this.cloneDeep(f),g.length>0){const p=e[d].map(b=>b.presence_ref),v=g.filter(b=>p.indexOf(b.presence_ref)<0);e[d].unshift(...v)}s(d,g,f)}),this.map(c,(d,f)=>{let h=e[d];if(!h)return;const g=f.map(p=>p.presence_ref);h=h.filter(p=>g.indexOf(p.presence_ref)<0),e[d]=h,a(d,h,f),h.length===0&&delete e[d]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(s=>n(s,e[s]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,s)=>{const a=e[s];return"metas"in a?n[s]=a.metas.map(l=>(l.presence_ref=l.phx_ref,delete l.phx_ref,delete l.phx_ref_prev,l)):n[s]=a,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var N_;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(N_||(N_={}));var El;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(El||(El={}));var Vr;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Vr||(Vr={}));class xg{constructor(e,n={config:{}},s){var a,l;if(this.topic=e,this.params=n,this.socket=s,this.bindings={},this.state=kt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new Fm(this,Jn.join,this.params,this.timeout),this.rejoinTimer=new PS(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=kt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(c=>c.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=kt.closed,this.socket._remove(this)}),this._onError(c=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,c),this.state=kt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=kt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",c=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,c),this.state=kt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Jn.reply,{},(c,d)=>{this._trigger(this._replyEventName(d),c)}),this.presence=new Sl(this),this.broadcastEndpointURL=HS(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((l=(a=this.params.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,n=this.timeout){var s,a,l;if(this.socket.isConnected()||this.socket.connect(),this.state==kt.closed){const{config:{broadcast:c,presence:d,private:f}}=this.params,h=(a=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(b=>b.filter))!==null&&a!==void 0?a:[],g=!!this.bindings[El.PRESENCE]&&this.bindings[El.PRESENCE].length>0||((l=this.params.config.presence)===null||l===void 0?void 0:l.enabled)===!0,p={},v={broadcast:c,presence:Object.assign(Object.assign({},d),{enabled:g}),postgres_changes:h,private:f};this.socket.accessTokenValue&&(p.access_token=this.socket.accessTokenValue),this._onError(b=>e?.(Vr.CHANNEL_ERROR,b)),this._onClose(()=>e?.(Vr.CLOSED)),this.updateJoinPayload(Object.assign({config:v},p)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:b})=>{var x;if(this.socket.setAuth(),b===void 0){e?.(Vr.SUBSCRIBED);return}else{const w=this.bindings.postgres_changes,S=(x=w?.length)!==null&&x!==void 0?x:0,C=[];for(let N=0;N<S;N++){const E=w[N],{filter:{event:A,schema:O,table:j,filter:D}}=E,$=b&&b[N];if($&&$.event===A&&$.schema===O&&$.table===j&&$.filter===D)C.push(Object.assign(Object.assign({},E),{id:$.id}));else{this.unsubscribe(),this.state=kt.errored,e?.(Vr.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=C,e&&e(Vr.SUBSCRIBED);return}}).receive("error",b=>{this.state=kt.errored,e?.(Vr.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(b).join(", ")||"error")))}).receive("timeout",()=>{e?.(Vr.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,s){return this.state===kt.joined&&e===El.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,n,s)}async httpSend(e,n,s={}){var a;const l=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(n==null)return Promise.reject("Payload is required for httpSend()");const c={method:"POST",headers:{Authorization:l,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:n,private:this.private}]})},d=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(a=s.timeout)!==null&&a!==void 0?a:this.timeout);if(d.status===202)return{success:!0};let f=d.statusText;try{const h=await d.json();f=h.error||h.message||f}catch{}return Promise.reject(new Error(f))}async send(e,n={}){var s,a;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:l,payload:c}=e,f={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:l,payload:c,private:this.private}]})};try{const h=await this._fetchWithTimeout(this.broadcastEndpointURL,f,(s=n.timeout)!==null&&s!==void 0?s:this.timeout);return await((a=h.body)===null||a===void 0?void 0:a.cancel()),h.ok?"ok":"error"}catch(h){return h.name==="AbortError"?"timed out":"error"}}else return new Promise(l=>{var c,d,f;const h=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((f=(d=(c=this.params)===null||c===void 0?void 0:c.config)===null||d===void 0?void 0:d.broadcast)===null||f===void 0)&&f.ack)&&l("ok"),h.receive("ok",()=>l("ok")),h.receive("error",()=>l("error")),h.receive("timeout",()=>l("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=kt.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Jn.close,"leave",this._joinRef())};this.joinPush.destroy();let s=null;return new Promise(a=>{s=new Fm(this,Jn.leave,{},e),s.receive("ok",()=>{n(),a("ok")}).receive("timeout",()=>{n(),a("timed out")}).receive("error",()=>{a("error")}),s.send(),this._canPush()||s.trigger("ok",{})}).finally(()=>{s?.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=kt.closed,this.bindings={}}async _fetchWithTimeout(e,n,s){const a=new AbortController,l=setTimeout(()=>a.abort(),s),c=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:a.signal}));return clearTimeout(l),c}_push(e,n,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new Fm(this,e,n,s);return this._canPush()?a.send():this._addToPushBuffer(a),a}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>$R){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(e,n,s){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,s){var a,l;const c=e.toLocaleLowerCase(),{close:d,error:f,leave:h,join:g}=Jn;if(s&&[d,f,h,g].indexOf(c)>=0&&s!==this._joinRef())return;let v=this._onMessage(c,n,s);if(n&&!v)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(c)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(b=>{var x,w,S;return((x=b.filter)===null||x===void 0?void 0:x.event)==="*"||((S=(w=b.filter)===null||w===void 0?void 0:w.event)===null||S===void 0?void 0:S.toLocaleLowerCase())===c}).map(b=>b.callback(v,s)):(l=this.bindings[c])===null||l===void 0||l.filter(b=>{var x,w,S,C,N,E;if(["broadcast","presence","postgres_changes"].includes(c))if("id"in b){const A=b.id,O=(x=b.filter)===null||x===void 0?void 0:x.event;return A&&((w=n.ids)===null||w===void 0?void 0:w.includes(A))&&(O==="*"||O?.toLocaleLowerCase()===((S=n.data)===null||S===void 0?void 0:S.type.toLocaleLowerCase()))}else{const A=(N=(C=b?.filter)===null||C===void 0?void 0:C.event)===null||N===void 0?void 0:N.toLocaleLowerCase();return A==="*"||A===((E=n?.event)===null||E===void 0?void 0:E.toLocaleLowerCase())}else return b.type.toLocaleLowerCase()===c}).map(b=>{if(typeof v=="object"&&"ids"in v){const x=v.data,{schema:w,table:S,commit_timestamp:C,type:N,errors:E}=x;v=Object.assign(Object.assign({},{schema:w,table:S,commit_timestamp:C,eventType:N,new:{},old:{},errors:E}),this._getPayloadRecords(x))}b.callback(v,s)})}_isClosed(){return this.state===kt.closed}_isJoined(){return this.state===kt.joined}_isJoining(){return this.state===kt.joining}_isLeaving(){return this.state===kt.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,s){const a=e.toLocaleLowerCase(),l={type:a,filter:n,callback:s};return this.bindings[a]?this.bindings[a].push(l):this.bindings[a]=[l],this}_off(e,n){const s=e.toLocaleLowerCase();return this.bindings[s]&&(this.bindings[s]=this.bindings[s].filter(a=>{var l;return!(((l=a.type)===null||l===void 0?void 0:l.toLocaleLowerCase())===s&&xg.isEqual(a.filter,n))})),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const s in e)if(e[s]!==n[s])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Jn.close,{},e)}_onError(e){this._on(Jn.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=kt.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=A_(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=A_(e.columns,e.old_record)),n}}const Ym=()=>{},Lu={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},VR=[1e3,2e3,5e3,1e4],FR=1e4,YR=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class GR{constructor(e,n){var s;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Np,this.transport=null,this.heartbeatIntervalMs=Lu.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Ym,this.ref=0,this.reconnectTimer=null,this.logger=Ym,this.conn=null,this.sendBuffer=[],this.serializer=new IR,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=a=>a?(...l)=>a(...l):(...l)=>fetch(...l),!(!((s=n?.params)===null||s===void 0)&&s.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${e}/${Op.websocket}`,this.httpEndpoint=HS(e),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=jR.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const n=e.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:DR}))}disconnect(e,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const s=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(s),this._setConnectionState("disconnected")},e?this.conn.close(e,n??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,s){this.logger(e,n,s)}connectionState(){switch(this.conn&&this.conn.readyState){case xl.connecting:return fi.Connecting;case xl.open:return fi.Open;case xl.closing:return fi.Closing;default:return fi.Closed}}isConnected(){return this.connectionState()===fi.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,n={config:{}}){const s=`realtime:${e}`,a=this.getChannels().find(l=>l.topic===s);if(a)return a;{const l=new xg(`realtime:${e}`,n,this);return this.channels.push(l),l}}push(e){const{topic:n,event:s,payload:a,ref:l}=e,c=()=>{this.encode(e,d=>{var f;(f=this.conn)===null||f===void 0||f.send(d)})};this.log("push",`${n} ${s} (${l})`,a),this.isConnected()?c():this.sendBuffer.push(c)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(UR,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},Lu.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(s=>s.topic===e&&(s._isJoined()||s._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(h){this.log("error","error in heartbeat callback",h)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:s,event:a,payload:l,ref:c}=n,d=c?`(${c})`:"",f=l.status||"";this.log("receive",`${f} ${s} ${a} ${d}`.trim(),l),this.channels.filter(h=>h._isMember(s)).forEach(h=>h._trigger(a,l,c)),this._triggerStateCallbacks("message",n)})}_clearTimer(e){var n;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var n;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Jn.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const s=e.match(/\?/)?"&":"?",a=new URLSearchParams(n);return`${e}${s}${a}`}_workerObjectUrl(e){let n;if(e)n=e;else{const s=new Blob([YR],{type:"application/javascript"});n=URL.createObjectURL(s)}return n}_setConnectionState(e,n=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(e=null){let n;e?n=e:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(s=>{const a={access_token:n,version:MR};n&&s.updateJoinPayload(a),s.joinedOnce&&s._isJoined()&&s._push(Jn.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${e}`,n)})}_triggerStateCallbacks(e,n){try{this.stateChangeCallbacks[e].forEach(s=>{try{s(n)}catch(a){this.log("error",`error in ${e} callback`,a)}})}catch(s){this.log("error",`error triggering ${e} callbacks`,s)}}_setupReconnectionTimer(){this.reconnectTimer=new PS(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Lu.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var n,s,a,l,c,d,f,h,g;if(this.transport=(n=e?.transport)!==null&&n!==void 0?n:null,this.timeout=(s=e?.timeout)!==null&&s!==void 0?s:Np,this.heartbeatIntervalMs=(a=e?.heartbeatIntervalMs)!==null&&a!==void 0?a:Lu.HEARTBEAT_INTERVAL,this.worker=(l=e?.worker)!==null&&l!==void 0?l:!1,this.accessToken=(c=e?.accessToken)!==null&&c!==void 0?c:null,this.heartbeatCallback=(d=e?.heartbeatCallback)!==null&&d!==void 0?d:Ym,e?.params&&(this.params=e.params),e?.logger&&(this.logger=e.logger),(e?.logLevel||e?.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(f=e?.reconnectAfterMs)!==null&&f!==void 0?f:(p=>VR[p-1]||FR),this.encode=(h=e?.encode)!==null&&h!==void 0?h:((p,v)=>v(JSON.stringify(p))),this.decode=(g=e?.decode)!==null&&g!==void 0?g:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e?.workerUrl}}}class Sg extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function ft(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class XR extends Sg{constructor(e,n,s){super(e),this.name="StorageApiError",this.status=n,this.statusCode=s}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class jp extends Sg{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}const Eg=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),KR=()=>Response,kp=t=>{if(Array.isArray(t))return t.map(n=>kp(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,s])=>{const a=n.replace(/([-_][a-z])/gi,l=>l.toUpperCase().replace(/[-_]/g,""));e[a]=kp(s)}),e},QR=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},Gm=t=>{var e;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(e=t.error)===null||e===void 0?void 0:e.message)||JSON.stringify(t)},WR=(t,e,n)=>Te(void 0,void 0,void 0,function*(){const s=yield KR();t instanceof s&&!n?.noResolveJson?t.json().then(a=>{const l=t.status||500,c=a?.statusCode||l+"";e(new XR(Gm(a),l,c))}).catch(a=>{e(new jp(Gm(a),a))}):e(new jp(Gm(t),t))}),JR=(t,e,n,s)=>{const a={method:t,headers:e?.headers||{}};return t==="GET"||!s?a:(QR(s)?(a.headers=Object.assign({"Content-Type":"application/json"},e?.headers),a.body=JSON.stringify(s)):a.body=s,e?.duplex&&(a.duplex=e.duplex),Object.assign(Object.assign({},a),n))};function Wl(t,e,n,s,a,l){return Te(this,void 0,void 0,function*(){return new Promise((c,d)=>{t(n,JR(e,s,a,l)).then(f=>{if(!f.ok)throw f;return s?.noResolveJson?f:f.json()}).then(f=>c(f)).catch(f=>WR(f,d,s))})})}function kl(t,e,n,s){return Te(this,void 0,void 0,function*(){return Wl(t,"GET",e,n,s)})}function Qn(t,e,n,s,a){return Te(this,void 0,void 0,function*(){return Wl(t,"POST",e,s,a,n)})}function Mp(t,e,n,s,a){return Te(this,void 0,void 0,function*(){return Wl(t,"PUT",e,s,a,n)})}function ZR(t,e,n,s){return Te(this,void 0,void 0,function*(){return Wl(t,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),s)})}function Cg(t,e,n,s,a){return Te(this,void 0,void 0,function*(){return Wl(t,"DELETE",e,s,a,n)})}class ej{constructor(e,n){this.downloadFn=e,this.shouldThrowOnError=n}then(e,n){return this.execute().then(e,n)}execute(){return Te(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(ft(e))return{data:null,error:e};throw e}})}}var VS;class tj{constructor(e,n){this.downloadFn=e,this.shouldThrowOnError=n,this[VS]="BlobDownloadBuilder",this.promise=null}asStream(){return new ej(this.downloadFn,this.shouldThrowOnError)}then(e,n){return this.getPromise().then(e,n)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return Te(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(ft(e))return{data:null,error:e};throw e}})}}VS=Symbol.toStringTag;const nj={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},O_={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class rj{constructor(e,n={},s,a){this.shouldThrowOnError=!1,this.url=e,this.headers=n,this.bucketId=s,this.fetch=Eg(a)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,n,s,a){return Te(this,void 0,void 0,function*(){try{let l;const c=Object.assign(Object.assign({},O_),a);let d=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(c.upsert)});const f=c.metadata;typeof Blob<"u"&&s instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),f&&l.append("metadata",this.encodeMetadata(f)),l.append("",s)):typeof FormData<"u"&&s instanceof FormData?(l=s,l.has("cacheControl")||l.append("cacheControl",c.cacheControl),f&&!l.has("metadata")&&l.append("metadata",this.encodeMetadata(f))):(l=s,d["cache-control"]=`max-age=${c.cacheControl}`,d["content-type"]=c.contentType,f&&(d["x-metadata"]=this.toBase64(this.encodeMetadata(f))),(typeof ReadableStream<"u"&&l instanceof ReadableStream||l&&typeof l=="object"&&"pipe"in l&&typeof l.pipe=="function")&&!c.duplex&&(c.duplex="half")),a?.headers&&(d=Object.assign(Object.assign({},d),a.headers));const h=this._removeEmptyFolders(n),g=this._getFinalPath(h),p=yield(e=="PUT"?Mp:Qn)(this.fetch,`${this.url}/object/${g}`,l,Object.assign({headers:d},c?.duplex?{duplex:c.duplex}:{}));return{data:{path:h,id:p.Id,fullPath:p.Key},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(ft(l))return{data:null,error:l};throw l}})}upload(e,n,s){return Te(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,s)})}uploadToSignedUrl(e,n,s,a){return Te(this,void 0,void 0,function*(){const l=this._removeEmptyFolders(e),c=this._getFinalPath(l),d=new URL(this.url+`/object/upload/sign/${c}`);d.searchParams.set("token",n);try{let f;const h=Object.assign({upsert:O_.upsert},a),g=Object.assign(Object.assign({},this.headers),{"x-upsert":String(h.upsert)});typeof Blob<"u"&&s instanceof Blob?(f=new FormData,f.append("cacheControl",h.cacheControl),f.append("",s)):typeof FormData<"u"&&s instanceof FormData?(f=s,f.append("cacheControl",h.cacheControl)):(f=s,g["cache-control"]=`max-age=${h.cacheControl}`,g["content-type"]=h.contentType);const p=yield Mp(this.fetch,d.toString(),f,{headers:g});return{data:{path:l,fullPath:p.Key},error:null}}catch(f){if(this.shouldThrowOnError)throw f;if(ft(f))return{data:null,error:f};throw f}})}createSignedUploadUrl(e,n){return Te(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e);const a=Object.assign({},this.headers);n?.upsert&&(a["x-upsert"]="true");const l=yield Qn(this.fetch,`${this.url}/object/upload/sign/${s}`,{},{headers:a}),c=new URL(this.url+l.url),d=c.searchParams.get("token");if(!d)throw new Sg("No token returned by API");return{data:{signedUrl:c.toString(),path:e,token:d},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(ft(s))return{data:null,error:s};throw s}})}update(e,n,s){return Te(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,s)})}move(e,n,s){return Te(this,void 0,void 0,function*(){try{return{data:yield Qn(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:s?.destinationBucket},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(ft(a))return{data:null,error:a};throw a}})}copy(e,n,s){return Te(this,void 0,void 0,function*(){try{return{data:{path:(yield Qn(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:s?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(ft(a))return{data:null,error:a};throw a}})}createSignedUrl(e,n,s){return Te(this,void 0,void 0,function*(){try{let a=this._getFinalPath(e),l=yield Qn(this.fetch,`${this.url}/object/sign/${a}`,Object.assign({expiresIn:n},s?.transform?{transform:s.transform}:{}),{headers:this.headers});const c=s?.download?`&download=${s.download===!0?"":s.download}`:"";return l={signedUrl:encodeURI(`${this.url}${l.signedURL}${c}`)},{data:l,error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(ft(a))return{data:null,error:a};throw a}})}createSignedUrls(e,n,s){return Te(this,void 0,void 0,function*(){try{const a=yield Qn(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),l=s?.download?`&download=${s.download===!0?"":s.download}`:"";return{data:a.map(c=>Object.assign(Object.assign({},c),{signedUrl:c.signedURL?encodeURI(`${this.url}${c.signedURL}${l}`):null})),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(ft(a))return{data:null,error:a};throw a}})}download(e,n){const a=typeof n?.transform<"u"?"render/image/authenticated":"object",l=this.transformOptsToQueryString(n?.transform||{}),c=l?`?${l}`:"",d=this._getFinalPath(e),f=()=>kl(this.fetch,`${this.url}/${a}/${d}${c}`,{headers:this.headers,noResolveJson:!0});return new tj(f,this.shouldThrowOnError)}info(e){return Te(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const s=yield kl(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:kp(s),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(ft(s))return{data:null,error:s};throw s}})}exists(e){return Te(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield ZR(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(ft(s)&&s instanceof jp){const a=s.originalError;if([400,404].includes(a?.status))return{data:!1,error:s}}throw s}})}getPublicUrl(e,n){const s=this._getFinalPath(e),a=[],l=n?.download?`download=${n.download===!0?"":n.download}`:"";l!==""&&a.push(l);const d=typeof n?.transform<"u"?"render/image":"object",f=this.transformOptsToQueryString(n?.transform||{});f!==""&&a.push(f);let h=a.join("&");return h!==""&&(h=`?${h}`),{data:{publicUrl:encodeURI(`${this.url}/${d}/public/${s}${h}`)}}}remove(e){return Te(this,void 0,void 0,function*(){try{return{data:yield Cg(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ft(n))return{data:null,error:n};throw n}})}list(e,n,s){return Te(this,void 0,void 0,function*(){try{const a=Object.assign(Object.assign(Object.assign({},nj),n),{prefix:e||""});return{data:yield Qn(this.fetch,`${this.url}/object/list/${this.bucketId}`,a,{headers:this.headers},s),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(ft(a))return{data:null,error:a};throw a}})}listV2(e,n){return Te(this,void 0,void 0,function*(){try{const s=Object.assign({},e);return{data:yield Qn(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,s,{headers:this.headers},n),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(ft(s))return{data:null,error:s};throw s}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const FS="2.79.0",YS={"X-Client-Info":`storage-js/${FS}`};class sj{constructor(e,n={},s,a){this.shouldThrowOnError=!1;const l=new URL(e);a?.useNewHostname&&/supabase\.(co|in|red)$/.test(l.hostname)&&!l.hostname.includes("storage.supabase.")&&(l.hostname=l.hostname.replace("supabase.","storage.supabase.")),this.url=l.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},YS),n),this.fetch=Eg(s)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(e){return Te(this,void 0,void 0,function*(){try{const n=this.listBucketOptionsToQueryString(e);return{data:yield kl(this.fetch,`${this.url}/bucket${n}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ft(n))return{data:null,error:n};throw n}})}getBucket(e){return Te(this,void 0,void 0,function*(){try{return{data:yield kl(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ft(n))return{data:null,error:n};throw n}})}createBucket(e){return Te(this,arguments,void 0,function*(n,s={public:!1}){try{return{data:yield Qn(this.fetch,`${this.url}/bucket`,{id:n,name:n,type:s.type,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(ft(a))return{data:null,error:a};throw a}})}updateBucket(e,n){return Te(this,void 0,void 0,function*(){try{return{data:yield Mp(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(ft(s))return{data:null,error:s};throw s}})}emptyBucket(e){return Te(this,void 0,void 0,function*(){try{return{data:yield Qn(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ft(n))return{data:null,error:n};throw n}})}deleteBucket(e){return Te(this,void 0,void 0,function*(){try{return{data:yield Cg(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ft(n))return{data:null,error:n};throw n}})}listBucketOptionsToQueryString(e){const n={};return e&&("limit"in e&&(n.limit=String(e.limit)),"offset"in e&&(n.offset=String(e.offset)),e.search&&(n.search=e.search),e.sortColumn&&(n.sortColumn=e.sortColumn),e.sortOrder&&(n.sortOrder=e.sortOrder)),Object.keys(n).length>0?"?"+new URLSearchParams(n).toString():""}}class ij{constructor(e,n={},s){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},YS),n),this.fetch=Eg(s)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return Te(this,void 0,void 0,function*(){try{return{data:yield Qn(this.fetch,`${this.url}/bucket`,{name:e},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ft(n))return{data:null,error:n};throw n}})}listBuckets(e){return Te(this,void 0,void 0,function*(){try{const n=new URLSearchParams;e?.limit!==void 0&&n.set("limit",e.limit.toString()),e?.offset!==void 0&&n.set("offset",e.offset.toString()),e?.sortColumn&&n.set("sortColumn",e.sortColumn),e?.sortOrder&&n.set("sortOrder",e.sortOrder),e?.search&&n.set("search",e.search);const s=n.toString(),a=s?`${this.url}/bucket?${s}`:`${this.url}/bucket`;return{data:yield kl(this.fetch,a,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ft(n))return{data:null,error:n};throw n}})}deleteBucket(e){return Te(this,void 0,void 0,function*(){try{return{data:yield Cg(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ft(n))return{data:null,error:n};throw n}})}}const Ag={"X-Client-Info":`storage-js/${FS}`,"Content-Type":"application/json"};class GS extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function Tn(t){return typeof t=="object"&&t!==null&&"__isStorageVectorsError"in t}class Xm extends GS{constructor(e,n,s){super(e),this.name="StorageVectorsApiError",this.status=n,this.statusCode=s}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class aj extends GS{constructor(e,n){super(e),this.name="StorageVectorsUnknownError",this.originalError=n}}var R_;(function(t){t.InternalError="InternalError",t.S3VectorConflictException="S3VectorConflictException",t.S3VectorNotFoundException="S3VectorNotFoundException",t.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",t.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",t.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(R_||(R_={}));const Tg=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),oj=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},j_=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),lj=(t,e,n)=>Te(void 0,void 0,void 0,function*(){if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!n?.noResolveJson){const a=t.status||500,l=t;if(typeof l.json=="function")l.json().then(c=>{const d=c?.statusCode||c?.code||a+"";e(new Xm(j_(c),a,d))}).catch(()=>{const c=a+"",d=l.statusText||`HTTP ${a} error`;e(new Xm(d,a,c))});else{const c=a+"",d=l.statusText||`HTTP ${a} error`;e(new Xm(d,a,c))}}else e(new aj(j_(t),t))}),cj=(t,e,n,s)=>{const a={method:t,headers:e?.headers||{}};return s?(oj(s)?(a.headers=Object.assign({"Content-Type":"application/json"},e?.headers),a.body=JSON.stringify(s)):a.body=s,Object.assign(Object.assign({},a),n)):a};function uj(t,e,n,s,a,l){return Te(this,void 0,void 0,function*(){return new Promise((c,d)=>{t(n,cj(e,s,a,l)).then(f=>{if(!f.ok)throw f;if(s?.noResolveJson)return f;const h=f.headers.get("content-type");return!h||!h.includes("application/json")?{}:f.json()}).then(f=>c(f)).catch(f=>lj(f,d,s))})})}function Nn(t,e,n,s,a){return Te(this,void 0,void 0,function*(){return uj(t,"POST",e,s,a,n)})}class dj{constructor(e,n={},s){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Ag),n),this.fetch=Tg(s)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(e){return Te(this,void 0,void 0,function*(){try{return{data:(yield Nn(this.fetch,`${this.url}/CreateIndex`,e,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Tn(n))return{data:null,error:n};throw n}})}getIndex(e,n){return Te(this,void 0,void 0,function*(){try{return{data:yield Nn(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:e,indexName:n},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Tn(s))return{data:null,error:s};throw s}})}listIndexes(e){return Te(this,void 0,void 0,function*(){try{return{data:yield Nn(this.fetch,`${this.url}/ListIndexes`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Tn(n))return{data:null,error:n};throw n}})}deleteIndex(e,n){return Te(this,void 0,void 0,function*(){try{return{data:(yield Nn(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:e,indexName:n},{headers:this.headers}))||{},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Tn(s))return{data:null,error:s};throw s}})}}class fj{constructor(e,n={},s){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Ag),n),this.fetch=Tg(s)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(e){return Te(this,void 0,void 0,function*(){try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield Nn(this.fetch,`${this.url}/PutVectors`,e,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Tn(n))return{data:null,error:n};throw n}})}getVectors(e){return Te(this,void 0,void 0,function*(){try{return{data:yield Nn(this.fetch,`${this.url}/GetVectors`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Tn(n))return{data:null,error:n};throw n}})}listVectors(e){return Te(this,void 0,void 0,function*(){try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:yield Nn(this.fetch,`${this.url}/ListVectors`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Tn(n))return{data:null,error:n};throw n}})}queryVectors(e){return Te(this,void 0,void 0,function*(){try{return{data:yield Nn(this.fetch,`${this.url}/QueryVectors`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Tn(n))return{data:null,error:n};throw n}})}deleteVectors(e){return Te(this,void 0,void 0,function*(){try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield Nn(this.fetch,`${this.url}/DeleteVectors`,e,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Tn(n))return{data:null,error:n};throw n}})}}class hj{constructor(e,n={},s){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Ag),n),this.fetch=Tg(s)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return Te(this,void 0,void 0,function*(){try{return{data:(yield Nn(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Tn(n))return{data:null,error:n};throw n}})}getBucket(e){return Te(this,void 0,void 0,function*(){try{return{data:yield Nn(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:e},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Tn(n))return{data:null,error:n};throw n}})}listBuckets(){return Te(this,arguments,void 0,function*(e={}){try{return{data:yield Nn(this.fetch,`${this.url}/ListVectorBuckets`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Tn(n))return{data:null,error:n};throw n}})}deleteBucket(e){return Te(this,void 0,void 0,function*(){try{return{data:(yield Nn(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Tn(n))return{data:null,error:n};throw n}})}}class mj extends hj{constructor(e,n={}){super(e,n.headers||{},n.fetch)}from(e){return new pj(this.url,this.headers,e,this.fetch)}}class pj extends dj{constructor(e,n,s,a){super(e,n,a),this.vectorBucketName=s}createIndex(e){const n=Object.create(null,{createIndex:{get:()=>super.createIndex}});return Te(this,void 0,void 0,function*(){return n.createIndex.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const e=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return Te(this,arguments,void 0,function*(n={}){return e.listIndexes.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName}))})}getIndex(e){const n=Object.create(null,{getIndex:{get:()=>super.getIndex}});return Te(this,void 0,void 0,function*(){return n.getIndex.call(this,this.vectorBucketName,e)})}deleteIndex(e){const n=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return Te(this,void 0,void 0,function*(){return n.deleteIndex.call(this,this.vectorBucketName,e)})}index(e){return new gj(this.url,this.headers,this.vectorBucketName,e,this.fetch)}}class gj extends fj{constructor(e,n,s,a,l){super(e,n,l),this.vectorBucketName=s,this.indexName=a}putVectors(e){const n=Object.create(null,{putVectors:{get:()=>super.putVectors}});return Te(this,void 0,void 0,function*(){return n.putVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(e){const n=Object.create(null,{getVectors:{get:()=>super.getVectors}});return Te(this,void 0,void 0,function*(){return n.getVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const e=Object.create(null,{listVectors:{get:()=>super.listVectors}});return Te(this,arguments,void 0,function*(n={}){return e.listVectors.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(e){const n=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return Te(this,void 0,void 0,function*(){return n.queryVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(e){const n=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return Te(this,void 0,void 0,function*(){return n.deleteVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class yj extends sj{constructor(e,n={},s,a){super(e,n,s,a)}from(e){return new rj(this.url,this.headers,e,this.fetch)}get vectors(){return new mj(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new ij(this.url+"/iceberg",this.headers,this.fetch)}}const vj="2.79.0";let cl="";typeof Deno<"u"?cl="deno":typeof document<"u"?cl="web":typeof navigator<"u"&&navigator.product==="ReactNative"?cl="react-native":cl="node";const bj={"X-Client-Info":`supabase-js-${cl}/${vj}`},_j={headers:bj},wj={schema:"public"},xj={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Sj={},Ej=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),Cj=()=>Headers,Aj=(t,e,n)=>{const s=Ej(n),a=Cj();return async(l,c)=>{var d;const f=(d=await e())!==null&&d!==void 0?d:t;let h=new a(c?.headers);return h.has("apikey")||h.set("apikey",t),h.has("Authorization")||h.set("Authorization",`Bearer ${f}`),s(l,Object.assign(Object.assign({},c),{headers:h}))}};function Tj(t){return t.endsWith("/")?t:t+"/"}function Nj(t,e){var n,s;const{db:a,auth:l,realtime:c,global:d}=t,{db:f,auth:h,realtime:g,global:p}=e,v={db:Object.assign(Object.assign({},f),a),auth:Object.assign(Object.assign({},h),l),realtime:Object.assign(Object.assign({},g),c),storage:{},global:Object.assign(Object.assign(Object.assign({},p),d),{headers:Object.assign(Object.assign({},(n=p?.headers)!==null&&n!==void 0?n:{}),(s=d?.headers)!==null&&s!==void 0?s:{})}),accessToken:async()=>""};return t.accessToken?v.accessToken=t.accessToken:delete v.accessToken,v}function Oj(t){const e=t?.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(Tj(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const XS="2.79.0",Ra=30*1e3,Dp=3,Km=Dp*Ra,Rj="http://localhost:9999",jj="supabase.auth.token",kj={"X-Client-Info":`gotrue-js/${XS}`},Up="X-Supabase-Api-Version",KS={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Mj=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Dj=600*1e3;class Ml extends Error{constructor(e,n,s){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=s}}function Oe(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class Uj extends Ml{constructor(e,n,s){super(e,n,s),this.name="AuthApiError",this.status=n,this.code=s}}function $j(t){return Oe(t)&&t.name==="AuthApiError"}class hi extends Ml{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class Ls extends Ml{constructor(e,n,s,a){super(e,s,a),this.name=n,this.status=s}}class Xn extends Ls{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Ij(t){return Oe(t)&&t.name==="AuthSessionMissingError"}class _a extends Ls{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class zu extends Ls{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Bu extends Ls{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Lj(t){return Oe(t)&&t.name==="AuthImplicitGrantRedirectError"}class k_ extends Ls{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class $p extends Ls{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function Qm(t){return Oe(t)&&t.name==="AuthRetryableFetchError"}class M_ extends Ls{constructor(e,n,s){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=s}}class Ip extends Ls{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Ad="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),D_=` 	
\r=`.split(""),zj=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<D_.length;e+=1)t[D_[e].charCodeAt(0)]=-2;for(let e=0;e<Ad.length;e+=1)t[Ad[e].charCodeAt(0)]=e;return t})();function U_(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;n(Ad[s]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;n(Ad[s]),e.queuedBits-=6}}function QS(t,e,n){const s=zj[t];if(s>-1)for(e.queue=e.queue<<6|s,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(s===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function $_(t){const e=[],n=c=>{e.push(String.fromCodePoint(c))},s={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},l=c=>{qj(c,s,n)};for(let c=0;c<t.length;c+=1)QS(t.charCodeAt(c),a,l);return e.join("")}function Bj(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function Pj(t,e){for(let n=0;n<t.length;n+=1){let s=t.charCodeAt(n);if(s>55295&&s<=56319){const a=(s-55296)*1024&65535;s=(t.charCodeAt(n+1)-56320&65535|a)+65536,n+=1}Bj(s,e)}}function qj(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let s=1;s<6;s+=1)if((t>>7-s&1)===0){e.utf8seq=s;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function La(t){const e=[],n={queue:0,queuedBits:0},s=a=>{e.push(a)};for(let a=0;a<t.length;a+=1)QS(t.charCodeAt(a),n,s);return new Uint8Array(e)}function Hj(t){const e=[];return Pj(t,n=>e.push(n)),new Uint8Array(e)}function pi(t){const e=[],n={queue:0,queuedBits:0},s=a=>{e.push(a)};return t.forEach(a=>U_(a,n,s)),U_(null,n,s),e.join("")}function Vj(t){return Math.round(Date.now()/1e3)+t}function Fj(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const Kt=()=>typeof window<"u"&&typeof document<"u",ai={tested:!1,writable:!1},WS=()=>{if(!Kt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(ai.tested)return ai.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),ai.tested=!0,ai.writable=!0}catch{ai.tested=!0,ai.writable=!1}return ai.writable};function Yj(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((a,l)=>{e[l]=a})}catch{}return n.searchParams.forEach((s,a)=>{e[a]=s}),e}const JS=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),Gj=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",ja=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},oi=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Ts=async(t,e)=>{await t.removeItem(e)};class Zd{constructor(){this.promise=new Zd.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}Zd.promiseConstructor=Promise;function Wm(t){const e=t.split(".");if(e.length!==3)throw new Ip("Invalid JWT structure");for(let s=0;s<e.length;s++)if(!Mj.test(e[s]))throw new Ip("JWT not in base64url format");return{header:JSON.parse($_(e[0])),payload:JSON.parse($_(e[1])),signature:La(e[2]),raw:{header:e[0],payload:e[1]}}}async function Xj(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function Kj(t,e){return new Promise((s,a)=>{(async()=>{for(let l=0;l<1/0;l++)try{const c=await t(l);if(!e(l,null,c)){s(c);return}}catch(c){if(!e(l,c)){a(c);return}}})()})}function Qj(t){return("0"+t.toString(16)).substr(-2)}function Wj(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=n.length;let a="";for(let l=0;l<56;l++)a+=n.charAt(Math.floor(Math.random()*s));return a}return crypto.getRandomValues(e),Array.from(e,Qj).join("")}async function Jj(t){const n=new TextEncoder().encode(t),s=await crypto.subtle.digest("SHA-256",n),a=new Uint8Array(s);return Array.from(a).map(l=>String.fromCharCode(l)).join("")}async function Zj(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await Jj(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function wa(t,e,n=!1){const s=Wj();let a=s;n&&(a+="/PASSWORD_RECOVERY"),await ja(t,`${e}-code-verifier`,a);const l=await Zj(s);return[l,s===l?"plain":"s256"]}const e2=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function t2(t){const e=t.headers.get(Up);if(!e||!e.match(e2))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function n2(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function r2(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const s2=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function xa(t){if(!s2.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Jm(){const t={};return new Proxy(t,{get:(e,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const s=n.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function i2(t,e){return new Proxy(t,{get:(n,s,a)=>{if(s==="__isInsecureUserWarningProxy")return!0;if(typeof s=="symbol"){const l=s.toString();if(l==="Symbol(Symbol.toPrimitive)"||l==="Symbol(Symbol.toStringTag)"||l==="Symbol(util.inspect.custom)"||l==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,s,a)}return!e.value&&typeof s=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(n,s,a)}})}function I_(t){return JSON.parse(JSON.stringify(t))}const ci=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),a2=[502,503,504];async function L_(t){var e;if(!Gj(t))throw new $p(ci(t),0);if(a2.includes(t.status))throw new $p(ci(t),t.status);let n;try{n=await t.json()}catch(l){throw new hi(ci(l),l)}let s;const a=t2(t);if(a&&a.getTime()>=KS["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?s=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(s=n.error_code),s){if(s==="weak_password")throw new M_(ci(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(s==="session_not_found")throw new Xn}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((l,c)=>l&&typeof c=="string",!0))throw new M_(ci(n),t.status,n.weak_password.reasons);throw new Uj(ci(n),t.status||500,s)}const o2=(t,e,n,s)=>{const a={method:t,headers:e?.headers||{}};return t==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e?.headers),a.body=JSON.stringify(s),Object.assign(Object.assign({},a),n))};async function $e(t,e,n,s){var a;const l=Object.assign({},s?.headers);l[Up]||(l[Up]=KS["2024-01-01"].name),s?.jwt&&(l.Authorization=`Bearer ${s.jwt}`);const c=(a=s?.query)!==null&&a!==void 0?a:{};s?.redirectTo&&(c.redirect_to=s.redirectTo);const d=Object.keys(c).length?"?"+new URLSearchParams(c).toString():"",f=await l2(t,e,n+d,{headers:l,noResolveJson:s?.noResolveJson},{},s?.body);return s?.xform?s?.xform(f):{data:Object.assign({},f),error:null}}async function l2(t,e,n,s,a,l){const c=o2(e,s,a,l);let d;try{d=await t(n,Object.assign({},c))}catch(f){throw console.error(f),new $p(ci(f),0)}if(d.ok||await L_(d),s?.noResolveJson)return d;try{return await d.json()}catch(f){await L_(f)}}function Kn(t){var e;let n=null;d2(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=Vj(t.expires_in)));const s=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:s},error:null}}function z_(t){const e=Kn(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,s)=>n&&typeof s=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Ds(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function c2(t){return{data:t,error:null}}function u2(t){const{action_link:e,email_otp:n,hashed_token:s,redirect_to:a,verification_type:l}=t,c=Wa(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),d={action_link:e,email_otp:n,hashed_token:s,redirect_to:a,verification_type:l},f=Object.assign({},c);return{data:{properties:d,user:f},error:null}}function B_(t){return t}function d2(t){return t.access_token&&t.refresh_token&&t.expires_in}const Zm=["global","local","others"];class f2{constructor({url:e="",headers:n={},fetch:s}){this.url=e,this.headers=n,this.fetch=JS(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,n=Zm[0]){if(Zm.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Zm.join(", ")}`);try{return await $e(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(s){if(Oe(s))return{data:null,error:s};throw s}}async inviteUserByEmail(e,n={}){try{return await $e(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Ds})}catch(s){if(Oe(s))return{data:{user:null},error:s};throw s}}async generateLink(e){try{const{options:n}=e,s=Wa(e,["options"]),a=Object.assign(Object.assign({},s),n);return"newEmail"in s&&(a.new_email=s?.newEmail,delete a.newEmail),await $e(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:u2,redirectTo:n?.redirectTo})}catch(n){if(Oe(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await $e(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Ds})}catch(n){if(Oe(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,s,a,l,c,d,f;try{const h={nextPage:null,lastPage:0,total:0},g=await $e(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(n=e?.page)===null||n===void 0?void 0:n.toString())!==null&&s!==void 0?s:"",per_page:(l=(a=e?.perPage)===null||a===void 0?void 0:a.toString())!==null&&l!==void 0?l:""},xform:B_});if(g.error)throw g.error;const p=await g.json(),v=(c=g.headers.get("x-total-count"))!==null&&c!==void 0?c:0,b=(f=(d=g.headers.get("link"))===null||d===void 0?void 0:d.split(","))!==null&&f!==void 0?f:[];return b.length>0&&(b.forEach(x=>{const w=parseInt(x.split(";")[0].split("=")[1].substring(0,1)),S=JSON.parse(x.split(";")[1].split("=")[1]);h[`${S}Page`]=w}),h.total=parseInt(v)),{data:Object.assign(Object.assign({},p),h),error:null}}catch(h){if(Oe(h))return{data:{users:[]},error:h};throw h}}async getUserById(e){xa(e);try{return await $e(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Ds})}catch(n){if(Oe(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){xa(e);try{return await $e(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:Ds})}catch(s){if(Oe(s))return{data:{user:null},error:s};throw s}}async deleteUser(e,n=!1){xa(e);try{return await $e(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:Ds})}catch(s){if(Oe(s))return{data:{user:null},error:s};throw s}}async _listFactors(e){xa(e.userId);try{const{data:n,error:s}=await $e(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:n,error:s}}catch(n){if(Oe(n))return{data:null,error:n};throw n}}async _deleteFactor(e){xa(e.userId),xa(e.id);try{return{data:await $e(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(Oe(n))return{data:null,error:n};throw n}}async _listOAuthClients(e){var n,s,a,l,c,d,f;try{const h={nextPage:null,lastPage:0,total:0},g=await $e(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(n=e?.page)===null||n===void 0?void 0:n.toString())!==null&&s!==void 0?s:"",per_page:(l=(a=e?.perPage)===null||a===void 0?void 0:a.toString())!==null&&l!==void 0?l:""},xform:B_});if(g.error)throw g.error;const p=await g.json(),v=(c=g.headers.get("x-total-count"))!==null&&c!==void 0?c:0,b=(f=(d=g.headers.get("link"))===null||d===void 0?void 0:d.split(","))!==null&&f!==void 0?f:[];return b.length>0&&(b.forEach(x=>{const w=parseInt(x.split(";")[0].split("=")[1].substring(0,1)),S=JSON.parse(x.split(";")[1].split("=")[1]);h[`${S}Page`]=w}),h.total=parseInt(v)),{data:Object.assign(Object.assign({},p),h),error:null}}catch(h){if(Oe(h))return{data:{clients:[]},error:h};throw h}}async _createOAuthClient(e){try{return await $e(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Oe(n))return{data:null,error:n};throw n}}async _getOAuthClient(e){try{return await $e(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Oe(n))return{data:null,error:n};throw n}}async _updateOAuthClient(e,n){try{return await $e(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:n,headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(Oe(s))return{data:null,error:s};throw s}}async _deleteOAuthClient(e){try{return await $e(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(Oe(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(e){try{return await $e(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Oe(n))return{data:null,error:n};throw n}}}function P_(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}const Sa={debug:!!(globalThis&&WS()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class ZS extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class h2 extends ZS{}async function m2(t,e,n){Sa.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const s=new globalThis.AbortController;return e>0&&setTimeout(()=>{s.abort(),Sa.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async a=>{if(a){Sa.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,a.name);try{return await n()}finally{Sa.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,a.name)}}else{if(e===0)throw Sa.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new h2(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Sa.debug)try{const l=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(l,null,"  "))}catch(l){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",l)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function p2(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function eE(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function g2(t){return parseInt(t,16)}function y2(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,s=>s.toString(16).padStart(2,"0")).join("")}function v2(t){var e;const{chainId:n,domain:s,expirationTime:a,issuedAt:l=new Date,nonce:c,notBefore:d,requestId:f,resources:h,scheme:g,uri:p,version:v}=t;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!s)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(c&&c.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${c}`);if(!p)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(v!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${v}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const b=eE(t.address),x=g?`${g}://${s}`:s,w=t.statement?`${t.statement}
`:"",S=`${x} wants you to sign in with your Ethereum account:
${b}

${w}`;let C=`URI: ${p}
Version: ${v}
Chain ID: ${n}${c?`
Nonce: ${c}`:""}
Issued At: ${l.toISOString()}`;if(a&&(C+=`
Expiration Time: ${a.toISOString()}`),d&&(C+=`
Not Before: ${d.toISOString()}`),f&&(C+=`
Request ID: ${f}`),h){let N=`
Resources:`;for(const E of h){if(!E||typeof E!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${E}`);N+=`
- ${E}`}C+=N}return`${S}
${C}`}class At extends Error{constructor({message:e,code:n,cause:s,name:a}){var l;super(e,{cause:s}),this.__isWebAuthnError=!0,this.name=(l=a??(s instanceof Error?s.name:void 0))!==null&&l!==void 0?l:"Unknown Error",this.code=n}}class Td extends At{constructor(e,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:e}),this.name="WebAuthnUnknownError",this.originalError=n}}function b2({error:t,options:e}){var n,s,a;const{publicKey:l}=e;if(!l)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new At({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((n=l.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new At({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((s=l.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new At({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((a=l.authenticatorSelection)===null||a===void 0?void 0:a.userVerification)==="required")return new At({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new At({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new At({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return l.pubKeyCredParams.filter(d=>d.type==="public-key").length===0?new At({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new At({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const c=window.location.hostname;if(tE(c)){if(l.rp.id!==c)return new At({message:`The RP ID "${l.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new At({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(l.user.id.byteLength<1||l.user.id.byteLength>64)return new At({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new At({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new At({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function _2({error:t,options:e}){const{publicKey:n}=e;if(!n)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new At({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new At({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const s=window.location.hostname;if(tE(s)){if(n.rpId!==s)return new At({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new At({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new At({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new At({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class w2{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const x2=new w2;function S2(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:n,excludeCredentials:s}=t,a=Wa(t,["challenge","user","excludeCredentials"]),l=La(e).buffer,c=Object.assign(Object.assign({},n),{id:La(n.id).buffer}),d=Object.assign(Object.assign({},a),{challenge:l,user:c});if(s&&s.length>0){d.excludeCredentials=new Array(s.length);for(let f=0;f<s.length;f++){const h=s[f];d.excludeCredentials[f]=Object.assign(Object.assign({},h),{id:La(h.id).buffer,type:h.type||"public-key",transports:h.transports})}}return d}function E2(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:n}=t,s=Wa(t,["challenge","allowCredentials"]),a=La(e).buffer,l=Object.assign(Object.assign({},s),{challenge:a});if(n&&n.length>0){l.allowCredentials=new Array(n.length);for(let c=0;c<n.length;c++){const d=n[c];l.allowCredentials[c]=Object.assign(Object.assign({},d),{id:La(d.id).buffer,type:d.type||"public-key",transports:d.transports})}}return l}function C2(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t;return{id:t.id,rawId:t.id,response:{attestationObject:pi(new Uint8Array(t.response.attestationObject)),clientDataJSON:pi(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function A2(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t,s=t.getClientExtensionResults(),a=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:pi(new Uint8Array(a.authenticatorData)),clientDataJSON:pi(new Uint8Array(a.clientDataJSON)),signature:pi(new Uint8Array(a.signature)),userHandle:a.userHandle?pi(new Uint8Array(a.userHandle)):void 0},type:"public-key",clientExtensionResults:s,authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function tE(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function q_(){var t,e;return!!(Kt()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator?.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator?.credentials)===null||e===void 0?void 0:e.get)=="function")}async function T2(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Td("Browser returned unexpected credential type",e)}:{data:null,error:new Td("Empty credential response",e)}}catch(e){return{data:null,error:b2({error:e,options:t})}}}async function N2(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Td("Browser returned unexpected credential type",e)}:{data:null,error:new Td("Empty credential response",e)}}catch(e){return{data:null,error:_2({error:e,options:t})}}}const O2={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},R2={userVerification:"preferred",hints:["security-key"]};function Nd(...t){const e=a=>a!==null&&typeof a=="object"&&!Array.isArray(a),n=a=>a instanceof ArrayBuffer||ArrayBuffer.isView(a),s={};for(const a of t)if(a)for(const l in a){const c=a[l];if(c!==void 0)if(Array.isArray(c))s[l]=c;else if(n(c))s[l]=c;else if(e(c)){const d=s[l];e(d)?s[l]=Nd(d,c):s[l]=Nd(c)}else s[l]=c}return s}function j2(t,e){return Nd(O2,t,e||{})}function k2(t,e){return Nd(R2,t,e||{})}class M2{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:n,friendlyName:s,signal:a},l){try{const{data:c,error:d}=await this.client.mfa.challenge({factorId:e,webauthn:n});if(!c)return{data:null,error:d};const f=a??x2.createNewAbortSignal();if(c.webauthn.type==="create"){const{user:h}=c.webauthn.credential_options.publicKey;h.name||(h.name=`${h.id}:${s}`),h.displayName||(h.displayName=h.name)}switch(c.webauthn.type){case"create":{const h=j2(c.webauthn.credential_options.publicKey,l?.create),{data:g,error:p}=await T2({publicKey:h,signal:f});return g?{data:{factorId:e,challengeId:c.id,webauthn:{type:c.webauthn.type,credential_response:g}},error:null}:{data:null,error:p}}case"request":{const h=k2(c.webauthn.credential_options.publicKey,l?.request),{data:g,error:p}=await N2(Object.assign(Object.assign({},c.webauthn.credential_options),{publicKey:h,signal:f}));return g?{data:{factorId:e,challengeId:c.id,webauthn:{type:c.webauthn.type,credential_response:g}},error:null}:{data:null,error:p}}}}catch(c){return Oe(c)?{data:null,error:c}:{data:null,error:new hi("Unexpected error in challenge",c)}}}async _verify({challengeId:e,factorId:n,webauthn:s}){return this.client.mfa.verify({factorId:n,challengeId:e,webauthn:s})}async _authenticate({factorId:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:s=typeof window<"u"?[window.location.origin]:void 0,signal:a}},l){if(!n)return{data:null,error:new Ml("rpId is required for WebAuthn authentication")};try{if(!q_())return{data:null,error:new hi("Browser does not support WebAuthn",null)};const{data:c,error:d}=await this.challenge({factorId:e,webauthn:{rpId:n,rpOrigins:s},signal:a},{request:l});if(!c)return{data:null,error:d};const{webauthn:f}=c;return this._verify({factorId:e,challengeId:c.challengeId,webauthn:{type:f.type,rpId:n,rpOrigins:s,credential_response:f.credential_response}})}catch(c){return Oe(c)?{data:null,error:c}:{data:null,error:new hi("Unexpected error in authenticate",c)}}}async _register({friendlyName:e,rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:s=typeof window<"u"?[window.location.origin]:void 0,signal:a},l){if(!n)return{data:null,error:new Ml("rpId is required for WebAuthn registration")};try{if(!q_())return{data:null,error:new hi("Browser does not support WebAuthn",null)};const{data:c,error:d}=await this._enroll({friendlyName:e});if(!c)return await this.client.mfa.listFactors().then(g=>{var p;return(p=g.data)===null||p===void 0?void 0:p.all.find(v=>v.factor_type==="webauthn"&&v.friendly_name===e&&v.status!=="unverified")}).then(g=>g?this.client.mfa.unenroll({factorId:g?.id}):void 0),{data:null,error:d};const{data:f,error:h}=await this._challenge({factorId:c.id,friendlyName:c.friendly_name,webauthn:{rpId:n,rpOrigins:s},signal:a},{create:l});return f?this._verify({factorId:c.id,challengeId:f.challengeId,webauthn:{rpId:n,rpOrigins:s,type:f.webauthn.type,credential_response:f.webauthn.credential_response}}):{data:null,error:h}}catch(c){return Oe(c)?{data:null,error:c}:{data:null,error:new hi("Unexpected error in register",c)}}}}p2();const D2={url:Rj,storageKey:jj,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:kj,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function H_(t,e,n){return await n()}const Ea={};class Dl{get jwks(){var e,n;return(n=(e=Ea[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(e){Ea[this.storageKey]=Object.assign(Object.assign({},Ea[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,n;return(n=(e=Ea[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Ea[this.storageKey]=Object.assign(Object.assign({},Ea[this.storageKey]),{cachedAt:e})}constructor(e){var n,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Dl.nextInstanceID,Dl.nextInstanceID+=1,this.instanceID>0&&Kt()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const a=Object.assign(Object.assign({},D2),e);if(this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.persistSession=a.persistSession,this.storageKey=a.storageKey,this.autoRefreshToken=a.autoRefreshToken,this.admin=new f2({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=JS(a.fetch),this.lock=a.lock||H_,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,this.throwOnError=a.throwOnError,a.lock?this.lock=a.lock:Kt()&&(!((n=globalThis?.navigator)===null||n===void 0)&&n.locks)?this.lock=m2:this.lock=H_,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new M2(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this)},this.persistSession?(a.storage?this.storage=a.storage:WS()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=P_(this.memoryStorage)),a.userStorage&&(this.userStorage=a.userStorage)):(this.memoryStorage={},this.storage=P_(this.memoryStorage)),Kt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(l){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",l)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async l=>{this._debug("received broadcast notification from other tab or client",l),await this._notifyAllSubscribers(l.data.event,l.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${XS}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let n={},s="none";if(Kt()&&(n=Yj(window.location.href),this._isImplicitGrantCallback(n)?s="implicit":await this._isPKCECallback(n)&&(s="pkce")),Kt()&&this.detectSessionInUrl&&s!=="none"){const{data:a,error:l}=await this._getSessionFromURL(n,s);if(l){if(this._debug("#_initialize()","error detecting session from URL",l),Lj(l)){const f=(e=l.details)===null||e===void 0?void 0:e.code;if(f==="identity_already_exists"||f==="identity_not_found"||f==="single_identity_not_deletable")return{error:l}}return await this._removeSession(),{error:l}}const{session:c,redirectType:d}=a;return this._debug("#_initialize()","detected session in URL",c,"redirect type",d),await this._saveSession(c),setTimeout(async()=>{d==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",c):await this._notifyAllSubscribers("SIGNED_IN",c)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return Oe(n)?this._returnResult({error:n}):this._returnResult({error:new hi("Unexpected error during initialization",n)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,s,a;try{const l=await $e(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(n=e?.options)===null||n===void 0?void 0:n.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(a=e?.options)===null||a===void 0?void 0:a.captchaToken}},xform:Kn}),{data:c,error:d}=l;if(d||!c)return this._returnResult({data:{user:null,session:null},error:d});const f=c.session,h=c.user;return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",f)),this._returnResult({data:{user:h,session:f},error:null})}catch(l){if(Oe(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async signUp(e){var n,s,a;try{let l;if("email"in e){const{email:g,password:p,options:v}=e;let b=null,x=null;this.flowType==="pkce"&&([b,x]=await wa(this.storage,this.storageKey)),l=await $e(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:v?.emailRedirectTo,body:{email:g,password:p,data:(n=v?.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:v?.captchaToken},code_challenge:b,code_challenge_method:x},xform:Kn})}else if("phone"in e){const{phone:g,password:p,options:v}=e;l=await $e(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:g,password:p,data:(s=v?.data)!==null&&s!==void 0?s:{},channel:(a=v?.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:v?.captchaToken}},xform:Kn})}else throw new zu("You must provide either an email or phone number and a password");const{data:c,error:d}=l;if(d||!c)return this._returnResult({data:{user:null,session:null},error:d});const f=c.session,h=c.user;return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",f)),this._returnResult({data:{user:h,session:f},error:null})}catch(l){if(Oe(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async signInWithPassword(e){try{let n;if("email"in e){const{email:l,password:c,options:d}=e;n=await $e(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:l,password:c,gotrue_meta_security:{captcha_token:d?.captchaToken}},xform:z_})}else if("phone"in e){const{phone:l,password:c,options:d}=e;n=await $e(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:l,password:c,gotrue_meta_security:{captcha_token:d?.captchaToken}},xform:z_})}else throw new zu("You must provide either an email or phone number and a password");const{data:s,error:a}=n;if(a)return this._returnResult({data:{user:null,session:null},error:a});if(!s||!s.session||!s.user){const l=new _a;return this._returnResult({data:{user:null,session:null},error:l})}return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),this._returnResult({data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:a})}catch(n){if(Oe(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOAuth(e){var n,s,a,l;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(s=e.options)===null||s===void 0?void 0:s.scopes,queryParams:(a=e.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(l=e.options)===null||l===void 0?void 0:l.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;switch(n){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(e){var n,s,a,l,c,d,f,h,g,p,v;let b,x;if("message"in e)b=e.message,x=e.signature;else{const{chain:w,wallet:S,statement:C,options:N}=e;let E;if(Kt())if(typeof S=="object")E=S;else{const P=window;if("ethereum"in P&&typeof P.ethereum=="object"&&"request"in P.ethereum&&typeof P.ethereum.request=="function")E=P.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof S!="object"||!N?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");E=S}const A=new URL((n=N?.url)!==null&&n!==void 0?n:window.location.href),O=await E.request({method:"eth_requestAccounts"}).then(P=>P).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!O||O.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const j=eE(O[0]);let D=(s=N?.signInWithEthereum)===null||s===void 0?void 0:s.chainId;if(!D){const P=await E.request({method:"eth_chainId"});D=g2(P)}const $={domain:A.host,address:j,statement:C,uri:A.href,version:"1",chainId:D,nonce:(a=N?.signInWithEthereum)===null||a===void 0?void 0:a.nonce,issuedAt:(c=(l=N?.signInWithEthereum)===null||l===void 0?void 0:l.issuedAt)!==null&&c!==void 0?c:new Date,expirationTime:(d=N?.signInWithEthereum)===null||d===void 0?void 0:d.expirationTime,notBefore:(f=N?.signInWithEthereum)===null||f===void 0?void 0:f.notBefore,requestId:(h=N?.signInWithEthereum)===null||h===void 0?void 0:h.requestId,resources:(g=N?.signInWithEthereum)===null||g===void 0?void 0:g.resources};b=v2($),x=await E.request({method:"personal_sign",params:[y2(b),j]})}try{const{data:w,error:S}=await $e(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:b,signature:x},!((p=e.options)===null||p===void 0)&&p.captchaToken?{gotrue_meta_security:{captcha_token:(v=e.options)===null||v===void 0?void 0:v.captchaToken}}:null),xform:Kn});if(S)throw S;if(!w||!w.session||!w.user){const C=new _a;return this._returnResult({data:{user:null,session:null},error:C})}return w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("SIGNED_IN",w.session)),this._returnResult({data:Object.assign({},w),error:S})}catch(w){if(Oe(w))return this._returnResult({data:{user:null,session:null},error:w});throw w}}async signInWithSolana(e){var n,s,a,l,c,d,f,h,g,p,v,b;let x,w;if("message"in e)x=e.message,w=e.signature;else{const{chain:S,wallet:C,statement:N,options:E}=e;let A;if(Kt())if(typeof C=="object")A=C;else{const j=window;if("solana"in j&&typeof j.solana=="object"&&("signIn"in j.solana&&typeof j.solana.signIn=="function"||"signMessage"in j.solana&&typeof j.solana.signMessage=="function"))A=j.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof C!="object"||!E?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");A=C}const O=new URL((n=E?.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in A&&A.signIn){const j=await A.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},E?.signInWithSolana),{version:"1",domain:O.host,uri:O.href}),N?{statement:N}:null));let D;if(Array.isArray(j)&&j[0]&&typeof j[0]=="object")D=j[0];else if(j&&typeof j=="object"&&"signedMessage"in j&&"signature"in j)D=j;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in D&&"signature"in D&&(typeof D.signedMessage=="string"||D.signedMessage instanceof Uint8Array)&&D.signature instanceof Uint8Array)x=typeof D.signedMessage=="string"?D.signedMessage:new TextDecoder().decode(D.signedMessage),w=D.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in A)||typeof A.signMessage!="function"||!("publicKey"in A)||typeof A!="object"||!A.publicKey||!("toBase58"in A.publicKey)||typeof A.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");x=[`${O.host} wants you to sign in with your Solana account:`,A.publicKey.toBase58(),...N?["",N,""]:[""],"Version: 1",`URI: ${O.href}`,`Issued At: ${(a=(s=E?.signInWithSolana)===null||s===void 0?void 0:s.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((l=E?.signInWithSolana)===null||l===void 0)&&l.notBefore?[`Not Before: ${E.signInWithSolana.notBefore}`]:[],...!((c=E?.signInWithSolana)===null||c===void 0)&&c.expirationTime?[`Expiration Time: ${E.signInWithSolana.expirationTime}`]:[],...!((d=E?.signInWithSolana)===null||d===void 0)&&d.chainId?[`Chain ID: ${E.signInWithSolana.chainId}`]:[],...!((f=E?.signInWithSolana)===null||f===void 0)&&f.nonce?[`Nonce: ${E.signInWithSolana.nonce}`]:[],...!((h=E?.signInWithSolana)===null||h===void 0)&&h.requestId?[`Request ID: ${E.signInWithSolana.requestId}`]:[],...!((p=(g=E?.signInWithSolana)===null||g===void 0?void 0:g.resources)===null||p===void 0)&&p.length?["Resources",...E.signInWithSolana.resources.map(D=>`- ${D}`)]:[]].join(`
`);const j=await A.signMessage(new TextEncoder().encode(x),"utf8");if(!j||!(j instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");w=j}}try{const{data:S,error:C}=await $e(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:x,signature:pi(w)},!((v=e.options)===null||v===void 0)&&v.captchaToken?{gotrue_meta_security:{captcha_token:(b=e.options)===null||b===void 0?void 0:b.captchaToken}}:null),xform:Kn});if(C)throw C;if(!S||!S.session||!S.user){const N=new _a;return this._returnResult({data:{user:null,session:null},error:N})}return S.session&&(await this._saveSession(S.session),await this._notifyAllSubscribers("SIGNED_IN",S.session)),this._returnResult({data:Object.assign({},S),error:C})}catch(S){if(Oe(S))return this._returnResult({data:{user:null,session:null},error:S});throw S}}async _exchangeCodeForSession(e){const n=await oi(this.storage,`${this.storageKey}-code-verifier`),[s,a]=(n??"").split("/");try{const{data:l,error:c}=await $e(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:s},xform:Kn});if(await Ts(this.storage,`${this.storageKey}-code-verifier`),c)throw c;if(!l||!l.session||!l.user){const d=new _a;return this._returnResult({data:{user:null,session:null,redirectType:null},error:d})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:Object.assign(Object.assign({},l),{redirectType:a??null}),error:c})}catch(l){if(Oe(l))return this._returnResult({data:{user:null,session:null,redirectType:null},error:l});throw l}}async signInWithIdToken(e){try{const{options:n,provider:s,token:a,access_token:l,nonce:c}=e,d=await $e(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:a,access_token:l,nonce:c,gotrue_meta_security:{captcha_token:n?.captchaToken}},xform:Kn}),{data:f,error:h}=d;if(h)return this._returnResult({data:{user:null,session:null},error:h});if(!f||!f.session||!f.user){const g=new _a;return this._returnResult({data:{user:null,session:null},error:g})}return f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",f.session)),this._returnResult({data:f,error:h})}catch(n){if(Oe(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOtp(e){var n,s,a,l,c;try{if("email"in e){const{email:d,options:f}=e;let h=null,g=null;this.flowType==="pkce"&&([h,g]=await wa(this.storage,this.storageKey));const{error:p}=await $e(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:d,data:(n=f?.data)!==null&&n!==void 0?n:{},create_user:(s=f?.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:f?.captchaToken},code_challenge:h,code_challenge_method:g},redirectTo:f?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:p})}if("phone"in e){const{phone:d,options:f}=e,{data:h,error:g}=await $e(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:d,data:(a=f?.data)!==null&&a!==void 0?a:{},create_user:(l=f?.shouldCreateUser)!==null&&l!==void 0?l:!0,gotrue_meta_security:{captcha_token:f?.captchaToken},channel:(c=f?.channel)!==null&&c!==void 0?c:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:h?.message_id},error:g})}throw new zu("You must provide either an email or phone number.")}catch(d){if(Oe(d))return this._returnResult({data:{user:null,session:null},error:d});throw d}}async verifyOtp(e){var n,s;try{let a,l;"options"in e&&(a=(n=e.options)===null||n===void 0?void 0:n.redirectTo,l=(s=e.options)===null||s===void 0?void 0:s.captchaToken);const{data:c,error:d}=await $e(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:l}}),redirectTo:a,xform:Kn});if(d)throw d;if(!c)throw new Error("An error occurred on token verification.");const f=c.session,h=c.user;return f?.access_token&&(await this._saveSession(f),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",f)),this._returnResult({data:{user:h,session:f},error:null})}catch(a){if(Oe(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithSSO(e){var n,s,a;try{let l=null,c=null;this.flowType==="pkce"&&([l,c]=await wa(this.storage,this.storageKey));const d=await $e(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(s=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&s!==void 0?s:void 0}),!((a=e?.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:l,code_challenge_method:c}),headers:this.headers,xform:c2});return this._returnResult(d)}catch(l){if(Oe(l))return this._returnResult({data:null,error:l});throw l}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:s}=e;if(s)throw s;if(!n)throw new Xn;const{error:a}=await $e(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return this._returnResult({data:{user:null,session:null},error:a})})}catch(e){if(Oe(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:s,type:a,options:l}=e,{error:c}=await $e(this.fetch,"POST",n,{headers:this.headers,body:{email:s,type:a,gotrue_meta_security:{captcha_token:l?.captchaToken}},redirectTo:l?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:c})}else if("phone"in e){const{phone:s,type:a,options:l}=e,{data:c,error:d}=await $e(this.fetch,"POST",n,{headers:this.headers,body:{phone:s,type:a,gotrue_meta_security:{captcha_token:l?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:c?.message_id},error:d})}throw new zu("You must provide either an email or phone number and a type")}catch(n){if(Oe(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await s,await n()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=n();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await oi(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const s=e.expires_at?e.expires_at*1e3-Date.now()<Km:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",e.expires_at),!s){if(this.userStorage){const c=await oi(this.userStorage,this.storageKey+"-user");c?.user?e.user=c.user:e.user=Jm()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const c={value:this.suppressGetSessionWarning};e.user=i2(e.user,c),c.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:a,error:l}=await this._callRefreshToken(e.refresh_token);return l?this._returnResult({data:{session:null},error:l}):this._returnResult({data:{session:a},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await $e(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Ds}):await this._useSession(async n=>{var s,a,l;const{data:c,error:d}=n;if(d)throw d;return!(!((s=c.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Xn}:await $e(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(l=(a=c.session)===null||a===void 0?void 0:a.access_token)!==null&&l!==void 0?l:void 0,xform:Ds})})}catch(n){if(Oe(n))return Ij(n)&&(await this._removeSession(),await Ts(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:n});throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async s=>{const{data:a,error:l}=s;if(l)throw l;if(!a.session)throw new Xn;const c=a.session;let d=null,f=null;this.flowType==="pkce"&&e.email!=null&&([d,f]=await wa(this.storage,this.storageKey));const{data:h,error:g}=await $e(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n?.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:d,code_challenge_method:f}),jwt:c.access_token,xform:Ds});if(g)throw g;return c.user=h.user,await this._saveSession(c),await this._notifyAllSubscribers("USER_UPDATED",c),this._returnResult({data:{user:c.user},error:null})})}catch(s){if(Oe(s))return this._returnResult({data:{user:null},error:s});throw s}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Xn;const n=Date.now()/1e3;let s=n,a=!0,l=null;const{payload:c}=Wm(e.access_token);if(c.exp&&(s=c.exp,a=s<=n),a){const{data:d,error:f}=await this._callRefreshToken(e.refresh_token);if(f)return this._returnResult({data:{user:null,session:null},error:f});if(!d)return{data:{user:null,session:null},error:null};l=d}else{const{data:d,error:f}=await this._getUser(e.access_token);if(f)throw f;l={access_token:e.access_token,refresh_token:e.refresh_token,user:d.user,token_type:"bearer",expires_in:s-n,expires_at:s},await this._saveSession(l),await this._notifyAllSubscribers("SIGNED_IN",l)}return this._returnResult({data:{user:l.user,session:l},error:null})}catch(n){if(Oe(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var s;if(!e){const{data:c,error:d}=n;if(d)throw d;e=(s=c.session)!==null&&s!==void 0?s:void 0}if(!e?.refresh_token)throw new Xn;const{data:a,error:l}=await this._callRefreshToken(e.refresh_token);return l?this._returnResult({data:{user:null,session:null},error:l}):a?this._returnResult({data:{user:a.user,session:a},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(n){if(Oe(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async _getSessionFromURL(e,n){try{if(!Kt())throw new Bu("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Bu(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new k_("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Bu("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new k_("No code detected.");const{data:N,error:E}=await this._exchangeCodeForSession(e.code);if(E)throw E;const A=new URL(window.location.href);return A.searchParams.delete("code"),window.history.replaceState(window.history.state,"",A.toString()),{data:{session:N.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:a,access_token:l,refresh_token:c,expires_in:d,expires_at:f,token_type:h}=e;if(!l||!d||!c||!h)throw new Bu("No session defined in URL");const g=Math.round(Date.now()/1e3),p=parseInt(d);let v=g+p;f&&(v=parseInt(f));const b=v-g;b*1e3<=Ra&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${b}s, should have been closer to ${p}s`);const x=v-p;g-x>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",x,v,g):g-x<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",x,v,g);const{data:w,error:S}=await this._getUser(l);if(S)throw S;const C={provider_token:s,provider_refresh_token:a,access_token:l,expires_in:p,expires_at:v,refresh_token:c,token_type:h,user:w.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:C,redirectType:e.type},error:null})}catch(s){if(Oe(s))return this._returnResult({data:{session:null,redirectType:null},error:s});throw s}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await oi(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var s;const{data:a,error:l}=n;if(l)return this._returnResult({error:l});const c=(s=a.session)===null||s===void 0?void 0:s.access_token;if(c){const{error:d}=await this.admin.signOut(c,e);if(d&&!($j(d)&&(d.status===404||d.status===401||d.status===403)))return this._returnResult({error:d})}return e!=="others"&&(await this._removeSession(),await Ts(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const n=Fj(),s={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,s),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:s}}}async _emitInitialSession(e){return await this._useSession(async n=>{var s,a;try{const{data:{session:l},error:c}=n;if(c)throw c;await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",l)),this._debug("INITIAL_SESSION","callback id",e,"session",l)}catch(l){await((a=this.stateChangeEmitters.get(e))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",l),console.error(l)}})}async resetPasswordForEmail(e,n={}){let s=null,a=null;this.flowType==="pkce"&&([s,a]=await wa(this.storage,this.storageKey,!0));try{return await $e(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:s,code_challenge_method:a,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(l){if(Oe(l))return this._returnResult({data:null,error:l});throw l}}async getUserIdentities(){var e;try{const{data:n,error:s}=await this.getUser();if(s)throw s;return this._returnResult({data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(n){if(Oe(n))return this._returnResult({data:null,error:n});throw n}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var n;try{const{data:s,error:a}=await this._useSession(async l=>{var c,d,f,h,g;const{data:p,error:v}=l;if(v)throw v;const b=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(c=e.options)===null||c===void 0?void 0:c.redirectTo,scopes:(d=e.options)===null||d===void 0?void 0:d.scopes,queryParams:(f=e.options)===null||f===void 0?void 0:f.queryParams,skipBrowserRedirect:!0});return await $e(this.fetch,"GET",b,{headers:this.headers,jwt:(g=(h=p.session)===null||h===void 0?void 0:h.access_token)!==null&&g!==void 0?g:void 0})});if(a)throw a;return Kt()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(s?.url),this._returnResult({data:{provider:e.provider,url:s?.url},error:null})}catch(s){if(Oe(s))return this._returnResult({data:{provider:e.provider,url:null},error:s});throw s}}async linkIdentityIdToken(e){return await this._useSession(async n=>{var s;try{const{error:a,data:{session:l}}=n;if(a)throw a;const{options:c,provider:d,token:f,access_token:h,nonce:g}=e,p=await $e(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(s=l?.access_token)!==null&&s!==void 0?s:void 0,body:{provider:d,id_token:f,access_token:h,nonce:g,link_identity:!0,gotrue_meta_security:{captcha_token:c?.captchaToken}},xform:Kn}),{data:v,error:b}=p;return b?this._returnResult({data:{user:null,session:null},error:b}):!v||!v.session||!v.user?this._returnResult({data:{user:null,session:null},error:new _a}):(v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("USER_UPDATED",v.session)),this._returnResult({data:v,error:b}))}catch(a){if(Oe(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}})}async unlinkIdentity(e){try{return await this._useSession(async n=>{var s,a;const{data:l,error:c}=n;if(c)throw c;return await $e(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(a=(s=l.session)===null||s===void 0?void 0:s.access_token)!==null&&a!==void 0?a:void 0})})}catch(n){if(Oe(n))return this._returnResult({data:null,error:n});throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const s=Date.now();return await Kj(async a=>(a>0&&await Xj(200*Math.pow(2,a-1)),this._debug(n,"refreshing attempt",a),await $e(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Kn})),(a,l)=>{const c=200*Math.pow(2,a);return l&&Qm(l)&&Date.now()+c-s<Ra})}catch(s){if(this._debug(n,"error",s),Oe(s))return this._returnResult({data:{session:null,user:null},error:s});throw s}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const s=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",s),Kt()&&!n.skipBrowserRedirect&&window.location.assign(s),{data:{provider:e,url:s},error:null}}async _recoverAndRefresh(){var e,n;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const a=await oi(this.storage,this.storageKey);if(a&&this.userStorage){let c=await oi(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!c&&(c={user:a.user},await ja(this.userStorage,this.storageKey+"-user",c)),a.user=(e=c?.user)!==null&&e!==void 0?e:Jm()}else if(a&&!a.user&&!a.user){const c=await oi(this.storage,this.storageKey+"-user");c&&c?.user?(a.user=c.user,await Ts(this.storage,this.storageKey+"-user"),await ja(this.storage,this.storageKey,a)):a.user=Jm()}if(this._debug(s,"session from storage",a),!this._isValidSession(a)){this._debug(s,"session is not valid"),a!==null&&await this._removeSession();return}const l=((n=a.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<Km;if(this._debug(s,`session has${l?"":" not"} expired with margin of ${Km}s`),l){if(this.autoRefreshToken&&a.refresh_token){const{error:c}=await this._callRefreshToken(a.refresh_token);c&&(console.error(c),Qm(c)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",c),await this._removeSession()))}}else if(a.user&&a.user.__isUserNotAvailableProxy===!0)try{const{data:c,error:d}=await this._getUser(a.access_token);!d&&c?.user?(a.user=c.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(s,"could not get user data, skipping SIGNED_IN notification")}catch(c){console.error("Error getting user data:",c),this._debug(s,"error getting user data, skipping SIGNED_IN notification",c)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(s,"error",a),console.error(a);return}finally{this._debug(s,"end")}}async _callRefreshToken(e){var n,s;if(!e)throw new Xn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new Zd;const{data:l,error:c}=await this._refreshAccessToken(e);if(c)throw c;if(!l.session)throw new Xn;await this._saveSession(l.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",l.session);const d={data:l.session,error:null};return this.refreshingDeferred.resolve(d),d}catch(l){if(this._debug(a,"error",l),Oe(l)){const c={data:null,error:l};return Qm(l)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(c),c}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(l),l}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(e,n,s=!0){const a=`#_notifyAllSubscribers(${e})`;this._debug(a,"begin",n,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:e,session:n});const l=[],c=Array.from(this.stateChangeEmitters.values()).map(async d=>{try{await d.callback(e,n)}catch(f){l.push(f)}});if(await Promise.all(c),l.length>0){for(let d=0;d<l.length;d+=1)console.error(l[d]);throw l[0]}}finally{this._debug(a,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const n=Object.assign({},e),s=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!s&&n.user&&await ja(this.userStorage,this.storageKey+"-user",{user:n.user});const a=Object.assign({},n);delete a.user;const l=I_(a);await ja(this.storage,this.storageKey,l)}else{const a=I_(n);await ja(this.storage,this.storageKey,a)}}async _removeSession(){this._debug("#_removeSession()"),await Ts(this.storage,this.storageKey),await Ts(this.storage,this.storageKey+"-code-verifier"),await Ts(this.storage,this.storageKey+"-user"),this.userStorage&&await Ts(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Kt()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Ra);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:s}}=n;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((s.expires_at*1e3-e)/Ra);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${Ra}ms, refresh threshold is ${Dp} ticks`),a<=Dp&&await this._callRefreshToken(s.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof ZS)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Kt()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,s){const a=[`provider=${encodeURIComponent(n)}`];if(s?.redirectTo&&a.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s?.scopes&&a.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const[l,c]=await wa(this.storage,this.storageKey),d=new URLSearchParams({code_challenge:`${encodeURIComponent(l)}`,code_challenge_method:`${encodeURIComponent(c)}`});a.push(d.toString())}if(s?.queryParams){const l=new URLSearchParams(s.queryParams);a.push(l.toString())}return s?.skipBrowserRedirect&&a.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${e}?${a.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var s;const{data:a,error:l}=n;return l?this._returnResult({data:null,error:l}):await $e(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(s=a?.session)===null||s===void 0?void 0:s.access_token})})}catch(n){if(Oe(n))return this._returnResult({data:null,error:n});throw n}}async _enroll(e){try{return await this._useSession(async n=>{var s,a;const{data:l,error:c}=n;if(c)return this._returnResult({data:null,error:c});const d=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:f,error:h}=await $e(this.fetch,"POST",`${this.url}/factors`,{body:d,headers:this.headers,jwt:(s=l?.session)===null||s===void 0?void 0:s.access_token});return h?this._returnResult({data:null,error:h}):(e.factorType==="totp"&&f.type==="totp"&&(!((a=f?.totp)===null||a===void 0)&&a.qr_code)&&(f.totp.qr_code=`data:image/svg+xml;utf-8,${f.totp.qr_code}`),this._returnResult({data:f,error:null}))})}catch(n){if(Oe(n))return this._returnResult({data:null,error:n});throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var s;const{data:a,error:l}=n;if(l)return this._returnResult({data:null,error:l});const c=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?C2(e.webauthn.credential_response):A2(e.webauthn.credential_response)})}:{code:e.code}),{data:d,error:f}=await $e(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:c,headers:this.headers,jwt:(s=a?.session)===null||s===void 0?void 0:s.access_token});return f?this._returnResult({data:null,error:f}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+d.expires_in},d)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",d),this._returnResult({data:d,error:f}))})}catch(n){if(Oe(n))return this._returnResult({data:null,error:n});throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var s;const{data:a,error:l}=n;if(l)return this._returnResult({data:null,error:l});const c=await $e(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(s=a?.session)===null||s===void 0?void 0:s.access_token});if(c.error)return c;const{data:d}=c;if(d.type!=="webauthn")return{data:d,error:null};switch(d.webauthn.type){case"create":return{data:Object.assign(Object.assign({},d),{webauthn:Object.assign(Object.assign({},d.webauthn),{credential_options:Object.assign(Object.assign({},d.webauthn.credential_options),{publicKey:S2(d.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},d),{webauthn:Object.assign(Object.assign({},d.webauthn),{credential_options:Object.assign(Object.assign({},d.webauthn.credential_options),{publicKey:E2(d.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(Oe(n))return this._returnResult({data:null,error:n});throw n}})}async _challengeAndVerify(e){const{data:n,error:s}=await this._challenge({factorId:e.factorId});return s?this._returnResult({data:null,error:s}):await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){var e;const{data:{user:n},error:s}=await this.getUser();if(s)return{data:null,error:s};const a={all:[],phone:[],totp:[],webauthn:[]};for(const l of(e=n?.factors)!==null&&e!==void 0?e:[])a.all.push(l),l.status==="verified"&&a[l.factor_type].push(l);return{data:a,error:null}}async _getAuthenticatorAssuranceLevel(){var e,n;const{data:{session:s},error:a}=await this.getSession();if(a)return this._returnResult({data:null,error:a});if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:l}=Wm(s.access_token);let c=null;l.aal&&(c=l.aal);let d=c;((n=(e=s.user.factors)===null||e===void 0?void 0:e.filter(g=>g.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(d="aal2");const h=l.amr||[];return{data:{currentLevel:c,nextLevel:d,currentAuthenticationMethods:h},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async n=>{const{data:{session:s},error:a}=n;return a?this._returnResult({data:null,error:a}):s?await $e(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:s.access_token,xform:l=>({data:l,error:null})}):this._returnResult({data:null,error:new Xn})})}catch(n){if(Oe(n))return this._returnResult({data:null,error:n});throw n}}async _approveAuthorization(e,n){try{return await this._useSession(async s=>{const{data:{session:a},error:l}=s;if(l)return this._returnResult({data:null,error:l});if(!a)return this._returnResult({data:null,error:new Xn});const c=await $e(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"approve"},xform:d=>({data:d,error:null})});return c.data&&c.data.redirect_url&&Kt()&&!n?.skipBrowserRedirect&&window.location.assign(c.data.redirect_url),c})}catch(s){if(Oe(s))return this._returnResult({data:null,error:s});throw s}}async _denyAuthorization(e,n){try{return await this._useSession(async s=>{const{data:{session:a},error:l}=s;if(l)return this._returnResult({data:null,error:l});if(!a)return this._returnResult({data:null,error:new Xn});const c=await $e(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"deny"},xform:d=>({data:d,error:null})});return c.data&&c.data.redirect_url&&Kt()&&!n?.skipBrowserRedirect&&window.location.assign(c.data.redirect_url),c})}catch(s){if(Oe(s))return this._returnResult({data:null,error:s});throw s}}async fetchJwk(e,n={keys:[]}){let s=n.keys.find(d=>d.kid===e);if(s)return s;const a=Date.now();if(s=this.jwks.keys.find(d=>d.kid===e),s&&this.jwks_cached_at+Dj>a)return s;const{data:l,error:c}=await $e(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(c)throw c;return!l.keys||l.keys.length===0||(this.jwks=l,this.jwks_cached_at=a,s=l.keys.find(d=>d.kid===e),!s)?null:s}async getClaims(e,n={}){try{let s=e;if(!s){const{data:b,error:x}=await this.getSession();if(x||!b.session)return this._returnResult({data:null,error:x});s=b.session.access_token}const{header:a,payload:l,signature:c,raw:{header:d,payload:f}}=Wm(s);n?.allowExpired||n2(l.exp);const h=!a.alg||a.alg.startsWith("HS")||!a.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(a.kid,n?.keys?{keys:n.keys}:n?.jwks);if(!h){const{error:b}=await this.getUser(s);if(b)throw b;return{data:{claims:l,header:a,signature:c},error:null}}const g=r2(a.alg),p=await crypto.subtle.importKey("jwk",h,g,!0,["verify"]);if(!await crypto.subtle.verify(g,p,c,Hj(`${d}.${f}`)))throw new Ip("Invalid JWT signature");return{data:{claims:l,header:a,signature:c},error:null}}catch(s){if(Oe(s))return this._returnResult({data:null,error:s});throw s}}}Dl.nextInstanceID=0;const U2=Dl;class $2 extends U2{constructor(e){super(e)}}class I2{constructor(e,n,s){var a,l,c;this.supabaseUrl=e,this.supabaseKey=n;const d=Oj(e);if(!n)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",d),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",d),this.storageUrl=new URL("storage/v1",d),this.functionsUrl=new URL("functions/v1",d);const f=`sb-${d.hostname.split(".")[0]}-auth-token`,h={db:wj,realtime:Sj,auth:Object.assign(Object.assign({},xj),{storageKey:f}),global:_j},g=Nj(s??{},h);this.storageKey=(a=g.auth.storageKey)!==null&&a!==void 0?a:"",this.headers=(l=g.global.headers)!==null&&l!==void 0?l:{},g.accessToken?(this.accessToken=g.accessToken,this.auth=new Proxy({},{get:(p,v)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(v)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((c=g.auth)!==null&&c!==void 0?c:{},this.headers,g.global.fetch),this.fetch=Aj(n,this._getAccessToken.bind(this),g.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},g.realtime)),this.rest=new RR(new URL("rest/v1",d).href,{headers:this.headers,schema:g.db.schema,fetch:this.fetch}),this.storage=new yj(this.storageUrl.href,this.headers,this.fetch,s?.storage),g.accessToken||this._listenForAuthEvents()}get functions(){return new AR(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},s={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,n,s)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e,n;if(this.accessToken)return await this.accessToken();const{data:s}=await this.auth.getSession();return(n=(e=s.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:s,storage:a,userStorage:l,storageKey:c,flowType:d,lock:f,debug:h,throwOnError:g},p,v){const b={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new $2({url:this.authUrl.href,headers:Object.assign(Object.assign({},b),p),storageKey:c,autoRefreshToken:e,persistSession:n,detectSessionInUrl:s,storage:a,userStorage:l,flowType:d,lock:f,debug:h,throwOnError:g,fetch:v,hasCustomAuthorizationHeader:Object.keys(this.headers).some(x=>x.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new GR(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,s)=>{this._handleTokenChanged(n,"CLIENT",s?.access_token)})}_handleTokenChanged(e,n,s){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==s?(this.changedAccessToken=s,this.realtime.setAuth(s)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const L2=(t,e,n)=>new I2(t,e,n);function z2(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}z2()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");var Pu={exports:{}},V_;function B2(){if(V_)return Pu.exports;V_=1;var t=typeof Reflect=="object"?Reflect:null,e=t&&typeof t.apply=="function"?t.apply:function(O,j,D){return Function.prototype.apply.call(O,j,D)},n;t&&typeof t.ownKeys=="function"?n=t.ownKeys:Object.getOwnPropertySymbols?n=function(O){return Object.getOwnPropertyNames(O).concat(Object.getOwnPropertySymbols(O))}:n=function(O){return Object.getOwnPropertyNames(O)};function s(A){console&&console.warn&&console.warn(A)}var a=Number.isNaN||function(O){return O!==O};function l(){l.init.call(this)}Pu.exports=l,Pu.exports.once=C,l.EventEmitter=l,l.prototype._events=void 0,l.prototype._eventsCount=0,l.prototype._maxListeners=void 0;var c=10;function d(A){if(typeof A!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof A)}Object.defineProperty(l,"defaultMaxListeners",{enumerable:!0,get:function(){return c},set:function(A){if(typeof A!="number"||A<0||a(A))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+A+".");c=A}}),l.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},l.prototype.setMaxListeners=function(O){if(typeof O!="number"||O<0||a(O))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+O+".");return this._maxListeners=O,this};function f(A){return A._maxListeners===void 0?l.defaultMaxListeners:A._maxListeners}l.prototype.getMaxListeners=function(){return f(this)},l.prototype.emit=function(O){for(var j=[],D=1;D<arguments.length;D++)j.push(arguments[D]);var $=O==="error",P=this._events;if(P!==void 0)$=$&&P.error===void 0;else if(!$)return!1;if($){var K;if(j.length>0&&(K=j[0]),K instanceof Error)throw K;var G=new Error("Unhandled error."+(K?" ("+K.message+")":""));throw G.context=K,G}var L=P[O];if(L===void 0)return!1;if(typeof L=="function")e(L,this,j);else for(var W=L.length,I=x(L,W),D=0;D<W;++D)e(I[D],this,j);return!0};function h(A,O,j,D){var $,P,K;if(d(j),P=A._events,P===void 0?(P=A._events=Object.create(null),A._eventsCount=0):(P.newListener!==void 0&&(A.emit("newListener",O,j.listener?j.listener:j),P=A._events),K=P[O]),K===void 0)K=P[O]=j,++A._eventsCount;else if(typeof K=="function"?K=P[O]=D?[j,K]:[K,j]:D?K.unshift(j):K.push(j),$=f(A),$>0&&K.length>$&&!K.warned){K.warned=!0;var G=new Error("Possible EventEmitter memory leak detected. "+K.length+" "+String(O)+" listeners added. Use emitter.setMaxListeners() to increase limit");G.name="MaxListenersExceededWarning",G.emitter=A,G.type=O,G.count=K.length,s(G)}return A}l.prototype.addListener=function(O,j){return h(this,O,j,!1)},l.prototype.on=l.prototype.addListener,l.prototype.prependListener=function(O,j){return h(this,O,j,!0)};function g(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function p(A,O,j){var D={fired:!1,wrapFn:void 0,target:A,type:O,listener:j},$=g.bind(D);return $.listener=j,D.wrapFn=$,$}l.prototype.once=function(O,j){return d(j),this.on(O,p(this,O,j)),this},l.prototype.prependOnceListener=function(O,j){return d(j),this.prependListener(O,p(this,O,j)),this},l.prototype.removeListener=function(O,j){var D,$,P,K,G;if(d(j),$=this._events,$===void 0)return this;if(D=$[O],D===void 0)return this;if(D===j||D.listener===j)--this._eventsCount===0?this._events=Object.create(null):(delete $[O],$.removeListener&&this.emit("removeListener",O,D.listener||j));else if(typeof D!="function"){for(P=-1,K=D.length-1;K>=0;K--)if(D[K]===j||D[K].listener===j){G=D[K].listener,P=K;break}if(P<0)return this;P===0?D.shift():w(D,P),D.length===1&&($[O]=D[0]),$.removeListener!==void 0&&this.emit("removeListener",O,G||j)}return this},l.prototype.off=l.prototype.removeListener,l.prototype.removeAllListeners=function(O){var j,D,$;if(D=this._events,D===void 0)return this;if(D.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):D[O]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete D[O]),this;if(arguments.length===0){var P=Object.keys(D),K;for($=0;$<P.length;++$)K=P[$],K!=="removeListener"&&this.removeAllListeners(K);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(j=D[O],typeof j=="function")this.removeListener(O,j);else if(j!==void 0)for($=j.length-1;$>=0;$--)this.removeListener(O,j[$]);return this};function v(A,O,j){var D=A._events;if(D===void 0)return[];var $=D[O];return $===void 0?[]:typeof $=="function"?j?[$.listener||$]:[$]:j?S($):x($,$.length)}l.prototype.listeners=function(O){return v(this,O,!0)},l.prototype.rawListeners=function(O){return v(this,O,!1)},l.listenerCount=function(A,O){return typeof A.listenerCount=="function"?A.listenerCount(O):b.call(A,O)},l.prototype.listenerCount=b;function b(A){var O=this._events;if(O!==void 0){var j=O[A];if(typeof j=="function")return 1;if(j!==void 0)return j.length}return 0}l.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]};function x(A,O){for(var j=new Array(O),D=0;D<O;++D)j[D]=A[D];return j}function w(A,O){for(;O+1<A.length;O++)A[O]=A[O+1];A.pop()}function S(A){for(var O=new Array(A.length),j=0;j<O.length;++j)O[j]=A[j].listener||A[j];return O}function C(A,O){return new Promise(function(j,D){function $(K){A.removeListener(O,P),D(K)}function P(){typeof A.removeListener=="function"&&A.removeListener("error",$),j([].slice.call(arguments))}E(A,O,P,{once:!0}),O!=="error"&&N(A,$,{once:!0})})}function N(A,O,j){typeof A.on=="function"&&E(A,"error",O,j)}function E(A,O,j,D){if(typeof A.on=="function")D.once?A.once(O,j):A.on(O,j);else if(typeof A.addEventListener=="function")A.addEventListener(O,function $(P){D.once&&A.removeEventListener(O,$),j(P)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof A)}return Pu.exports}var P2=B2();const q2=Kd(P2),Qt=new q2,nE="https://gsyznlwsezhwerypyzbe.supabase.co",H2="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImdzeXpubHdzZXpod2VyeXB5emJlIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQ2MTYwMzYsImV4cCI6MjA4MDE5MjAzNn0.vLLiGKSTADkaOsUX8386m2MFIJl1Gx-EB4gQLLOAZGA",gi=nE+"/storage/v1/object/public/embodys/",Me=L2(nE,H2);var li={},Ca={},ep={},Zo={},F_;function rE(){return F_||(F_=1,(function(t){var e=Zo&&Zo.__awaiter||function(a,l,c,d){function f(h){return h instanceof c?h:new c(function(g){g(h)})}return new(c||(c=Promise))(function(h,g){function p(x){try{b(d.next(x))}catch(w){g(w)}}function v(x){try{b(d.throw(x))}catch(w){g(w)}}function b(x){x.done?h(x.value):f(x.value).then(p,v)}b((d=d.apply(a,l||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.TARGET_URL_HEADER=void 0,t.withMiddleware=n,t.withProxy=s;function n(...a){const l=c=>typeof c=="function";return c=>e(this,void 0,void 0,function*(){let d=Object.assign({},c);for(const f of a.filter(l))d=yield f(d);return d})}t.TARGET_URL_HEADER="x-fal-target-url";function s(a){const l=c=>Promise.resolve(c);return typeof window>"u"?l:c=>c.headers&&t.TARGET_URL_HEADER in c?l(c):Promise.resolve(Object.assign(Object.assign({},c),{url:a.targetUrl,headers:Object.assign(Object.assign({},c.headers||{}),{[t.TARGET_URL_HEADER]:c.url})}))}})(Zo)),Zo}var Gn={},Y_;function Oi(){if(Y_)return Gn;Y_=1;var t=Gn&&Gn.__awaiter||function(c,d,f,h){function g(p){return p instanceof f?p:new f(function(v){v(p)})}return new(f||(f=Promise))(function(p,v){function b(S){try{w(h.next(S))}catch(C){v(C)}}function x(S){try{w(h.throw(S))}catch(C){v(C)}}function w(S){S.done?p(S.value):g(S.value).then(b,x)}w((h=h.apply(c,d||[])).next())})};Object.defineProperty(Gn,"__esModule",{value:!0}),Gn.ValidationError=Gn.ApiError=void 0,Gn.defaultResponseHandler=a,Gn.resultResponseHandler=l;const e="x-fal-request-id";class n extends Error{constructor({message:d,status:f,body:h,requestId:g}){super(d),this.name="ApiError",this.status=f,this.body=h,this.requestId=g||""}}Gn.ApiError=n;class s extends n{constructor(d){super(d),this.name="ValidationError"}get fieldErrors(){return typeof this.body.detail=="string"?[{loc:["body"],msg:this.body.detail,type:"value_error"}]:this.body.detail||[]}getFieldErrors(d){return this.fieldErrors.filter(f=>f.loc[f.loc.length-1]===d)}}Gn.ValidationError=s;function a(c){return t(this,void 0,void 0,function*(){var d;const{status:f,statusText:h}=c,g=(d=c.headers.get("Content-Type"))!==null&&d!==void 0?d:"",p=c.headers.get(e)||void 0;if(!c.ok){if(g.includes("application/json")){const v=yield c.json(),b=f===422?s:n;throw new b({message:v.message||h,status:f,body:v,requestId:p})}throw new n({message:`HTTP ${f}: ${h}`,status:f,requestId:p})}return g.includes("application/json")?c.json():g.includes("text/html")?c.text():g.includes("application/octet-stream")?c.arrayBuffer():c.text()})}function l(c){return t(this,void 0,void 0,function*(){return{data:yield a(c),requestId:c.headers.get(e)||""}})}return Gn}var el={},Bn={},G_;function Ri(){if(G_)return Bn;G_=1;var t=Bn&&Bn.__awaiter||function(g,p,v,b){function x(w){return w instanceof v?w:new v(function(S){S(w)})}return new(v||(v=Promise))(function(w,S){function C(A){try{E(b.next(A))}catch(O){S(O)}}function N(A){try{E(b.throw(A))}catch(O){S(O)}}function E(A){A.done?w(A.value):x(A.value).then(C,N)}E((b=b.apply(g,p||[])).next())})};Object.defineProperty(Bn,"__esModule",{value:!0}),Bn.ensureEndpointIdFormat=e,Bn.parseEndpointId=s,Bn.isValidUrl=a,Bn.throttle=l,Bn.isReact=d,Bn.isPlainObject=f,Bn.sleep=h;function e(g){if(g.split("/").length>1)return g;const[,v,b]=/^([0-9]+)-([a-zA-Z0-9-]+)$/.exec(g)||[];if(v&&b)return`${v}/${b}`;throw new Error(`Invalid app id: ${g}. Must be in the format <appOwner>/<appId>`)}const n=["workflows","comfy"];function s(g){const v=e(g).split("/");return n.includes(v[0])?{owner:v[1],alias:v[2],path:v.slice(3).join("/")||void 0,namespace:v[0]}:{owner:v[0],alias:v[1],path:v.slice(2).join("/")||void 0}}function a(g){try{const{host:p}=new URL(g);return/(fal\.(ai|run))$/.test(p)}catch{return!1}}function l(g,p,v=!1){let b,x;return(...w)=>{!x&&v?(g(...w),x=Date.now()):(b&&clearTimeout(b),b=setTimeout(()=>{Date.now()-x>=p&&(g(...w),x=Date.now())},p-(Date.now()-x)))}}let c;function d(){if(c===void 0){const g=new Error().stack;c=!!g&&(g.includes("node_modules/react-dom/")||g.includes("node_modules/next/"))}return c}function f(g){return!!g&&Object.getPrototypeOf(g)===Object.prototype}function h(g){return t(this,void 0,void 0,function*(){return new Promise(p=>setTimeout(p,g))})}return Bn}var X_;function ef(){return X_||(X_=1,(function(t){var e=el&&el.__awaiter||function(d,f,h,g){function p(v){return v instanceof h?v:new h(function(b){b(v)})}return new(h||(h=Promise))(function(v,b){function x(C){try{S(g.next(C))}catch(N){b(N)}}function w(C){try{S(g.throw(C))}catch(N){b(N)}}function S(C){C.done?v(C.value):p(C.value).then(x,w)}S((g=g.apply(d,f||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_RETRY_OPTIONS=t.DEFAULT_RETRYABLE_STATUS_CODES=void 0,t.isRetryableError=a,t.calculateBackoffDelay=l,t.executeWithRetry=c;const n=Oi(),s=Ri();t.DEFAULT_RETRYABLE_STATUS_CODES=[429,502,503,504],t.DEFAULT_RETRY_OPTIONS={maxRetries:3,baseDelay:1e3,maxDelay:3e4,backoffMultiplier:2,retryableStatusCodes:t.DEFAULT_RETRYABLE_STATUS_CODES,enableJitter:!0};function a(d,f){return d instanceof n.ApiError&&f.includes(d.status)}function l(d,f,h,g,p){const v=Math.min(f*Math.pow(g,d),h);if(p){const b=.25*v*(Math.random()*2-1);return Math.max(0,v+b)}return v}function c(d,f,h){return e(this,void 0,void 0,function*(){const g={totalAttempts:0,totalDelay:0};let p;for(let v=0;v<=f.maxRetries;v++){g.totalAttempts++;try{return{result:yield d(),metrics:g}}catch(b){if(p=b,g.lastError=b,v===f.maxRetries||!a(b,f.retryableStatusCodes))throw b;const x=l(v,f.baseDelay,f.maxDelay,f.backoffMultiplier,f.enableJitter);g.totalDelay+=x,h&&h(v+1,b,x),yield(0,s.sleep)(x)}}throw p})}})(el)),el}var tl={};const V2="@fal-ai/client",F2="1.7.2",Y2={name:V2,version:F2};var K_;function Ng(){if(K_)return tl;K_=1,Object.defineProperty(tl,"__esModule",{value:!0}),tl.isBrowser=t,tl.getUserAgent=n;function t(){return typeof window<"u"&&typeof window.document<"u"}let e=null;function n(){if(e!==null)return e;const s=Y2;return e=`${s.name}/${s.version}`,e}return tl}var Q_;function Og(){return Q_||(Q_=1,(function(t){var e={};Object.defineProperty(t,"__esModule",{value:!0}),t.credentialsFromEnv=void 0,t.resolveDefaultFetch=c,t.createConfig=g,t.getRestApiUrl=p;const n=rE(),s=Oi(),a=ef(),l=Ng();function c(){if(typeof fetch>"u")throw new Error("Your environment does not support fetch. Please provide your own fetch implementation.");return fetch}function d(){return typeof process<"u"&&e&&(typeof e.FAL_KEY<"u"||typeof e.FAL_KEY_ID<"u"&&typeof e.FAL_KEY_SECRET<"u")}const f=()=>{if(d())return typeof e.FAL_KEY<"u"?e.FAL_KEY:e.FAL_KEY_ID?`${e.FAL_KEY_ID}:${e.FAL_KEY_SECRET}`:void 0};t.credentialsFromEnv=f;const h={credentials:t.credentialsFromEnv,suppressLocalCredentialsWarning:!1,requestMiddleware:v=>Promise.resolve(v),responseHandler:s.defaultResponseHandler,retry:a.DEFAULT_RETRY_OPTIONS};function g(v){var b;let x=Object.assign(Object.assign(Object.assign({},h),v),{fetch:(b=v.fetch)!==null&&b!==void 0?b:c(),retry:Object.assign(Object.assign({},a.DEFAULT_RETRY_OPTIONS),v.retry||{})});v.proxyUrl&&(x=Object.assign(Object.assign({},x),{requestMiddleware:(0,n.withMiddleware)(x.requestMiddleware,(0,n.withProxy)({targetUrl:v.proxyUrl}))}));const{credentials:w,suppressLocalCredentialsWarning:S}=x,C=typeof w=="function"?w():w;return(0,l.isBrowser)()&&C&&!S&&console.warn("The fal credentials are exposed in the browser's environment. That's not recommended for production use cases."),x}function p(){return"https://rest.alpha.fal.ai"}})(ep)),ep}var zr={},Br={},W_;function Jl(){if(W_)return Br;W_=1;var t=Br&&Br.__awaiter||function(f,h,g,p){function v(b){return b instanceof g?b:new g(function(x){x(b)})}return new(g||(g=Promise))(function(b,x){function w(N){try{C(p.next(N))}catch(E){x(E)}}function S(N){try{C(p.throw(N))}catch(E){x(E)}}function C(N){N.done?b(N.value):v(N.value).then(w,S)}C((p=p.apply(f,h||[])).next())})},e=Br&&Br.__rest||function(f,h){var g={};for(var p in f)Object.prototype.hasOwnProperty.call(f,p)&&h.indexOf(p)<0&&(g[p]=f[p]);if(f!=null&&typeof Object.getOwnPropertySymbols=="function")for(var v=0,p=Object.getOwnPropertySymbols(f);v<p.length;v++)h.indexOf(p[v])<0&&Object.prototype.propertyIsEnumerable.call(f,p[v])&&(g[p[v]]=f[p[v]]);return g};Object.defineProperty(Br,"__esModule",{value:!0}),Br.dispatchRequest=c,Br.buildUrl=d;const n=ef(),s=Ng(),a=Ri(),l=typeof navigator<"u"&&navigator?.userAgent==="Cloudflare-Workers";function c(f){return t(this,void 0,void 0,function*(){var h;const{targetUrl:g,input:p,config:v,options:b={}}=f,{credentials:x,requestMiddleware:w,responseHandler:S,fetch:C}=v,N=Object.assign(Object.assign({},v.retry),b.retry||{}),E=()=>t(this,void 0,void 0,function*(){var O,j,D;const $=(0,s.isBrowser)()?{}:{"User-Agent":(0,s.getUserAgent)()},P=typeof x=="function"?x():x,{method:K,url:G,headers:L}=yield w({method:((j=(O=f.method)!==null&&O!==void 0?O:b.method)!==null&&j!==void 0?j:"post").toUpperCase(),url:g,headers:f.headers}),W=P?{Authorization:`Key ${P}`}:{},I=Object.assign(Object.assign(Object.assign(Object.assign({},W),{Accept:"application/json","Content-Type":"application/json"}),$),L??{}),{responseHandler:Y,retry:k}=b,z=e(b,["responseHandler","retry"]),V=yield C(G,Object.assign(Object.assign(Object.assign(Object.assign({},z),{method:K,headers:Object.assign(Object.assign({},I),(D=z.headers)!==null&&D!==void 0?D:{})}),!l&&{mode:"cors"}),{signal:b.signal,body:K.toLowerCase()!=="get"&&p?JSON.stringify(p):void 0}));return yield(Y??S)(V)});let A;for(let O=0;O<=N.maxRetries;O++)try{return yield E()}catch(j){if(A=j,O===N.maxRetries||!(0,n.isRetryableError)(j,N.retryableStatusCodes)||((h=b.signal)===null||h===void 0?void 0:h.aborted))throw j;const $=(0,n.calculateBackoffDelay)(O,N.baseDelay,N.maxDelay,N.backoffMultiplier,N.enableJitter);yield(0,a.sleep)($)}throw A})}function d(f,h={}){var g,p;const v=((g=h.method)!==null&&g!==void 0?g:"post").toLowerCase(),b=((p=h.path)!==null&&p!==void 0?p:"").replace(/^\//,"").replace(/\/{2,}/,"/"),x=h.input,w=Object.assign(Object.assign({},h.query||{}),v==="get"?x:{}),S=Object.keys(w).length>0?`?${new URLSearchParams(w).toString()}`:"";if((0,a.isValidUrl)(f))return`${f.endsWith("/")?f:`${f}/`}${b}${S}`;const C=(0,a.ensureEndpointIdFormat)(f);return`${`https://${h.subdomain?`${h.subdomain}.`:""}fal.run/${C}/${b}`.replace(/\/$/,"")}${S}`}return Br}var Pn={},qu={},J_;function G2(){if(J_)return qu;J_=1,Object.defineProperty(qu,"__esModule",{value:!0});function t(s){let a,l,c,d,f,h,g;return p(),{feed:v,reset:p};function p(){a=!0,l="",c=0,d=-1,f=void 0,h=void 0,g=""}function v(x){l=l?l+x:x,a&&n(l)&&(l=l.slice(e.length)),a=!1;const w=l.length;let S=0,C=!1;for(;S<w;){C&&(l[S]===`
`&&++S,C=!1);let N=-1,E=d,A;for(let O=c;N<0&&O<w;++O)A=l[O],A===":"&&E<0?E=O-S:A==="\r"?(C=!0,N=O-S):A===`
`&&(N=O-S);if(N<0){c=w-S,d=E;break}else c=0,d=-1;b(l,S,E,N),S+=N+1}S===w?l="":S>0&&(l=l.slice(S))}function b(x,w,S,C){if(C===0){g.length>0&&(s({type:"event",id:f,event:h||void 0,data:g.slice(0,-1)}),g="",f=void 0),h=void 0;return}const N=S<0,E=x.slice(w,w+(N?C:S));let A=0;N?A=C:x[w+S+1]===" "?A=S+2:A=S+1;const O=w+A,j=C-A,D=x.slice(O,O+j).toString();if(E==="data")g+=D?"".concat(D,`
`):`
`;else if(E==="event")h=D;else if(E==="id"&&!D.includes("\0"))f=D;else if(E==="retry"){const $=parseInt(D,10);Number.isNaN($)||s({type:"reconnect-interval",value:$})}}}const e=[239,187,191];function n(s){return e.every((a,l)=>s.charCodeAt(l)===a)}return qu.createParser=t,qu}var nl={},Z_;function sE(){return Z_||(Z_=1,(function(t){var e=nl&&nl.__awaiter||function(c,d,f,h){function g(p){return p instanceof f?p:new f(function(v){v(p)})}return new(f||(f=Promise))(function(p,v){function b(S){try{w(h.next(S))}catch(C){v(C)}}function x(S){try{w(h.throw(S))}catch(C){v(C)}}function w(S){S.done?p(S.value):g(S.value).then(b,x)}w((h=h.apply(c,d||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.TOKEN_EXPIRATION_SECONDS=void 0,t.getTemporaryAuthToken=l;const n=Og(),s=Jl(),a=Ri();t.TOKEN_EXPIRATION_SECONDS=120;function l(c,d){return e(this,void 0,void 0,function*(){const f=(0,a.parseEndpointId)(c),h=yield(0,s.dispatchRequest)({method:"POST",targetUrl:`${(0,n.getRestApiUrl)()}/tokens/`,config:d,input:{allowed_apps:[f.alias],token_expiration:t.TOKEN_EXPIRATION_SECONDS}});return typeof h!="string"&&h.detail?h.detail:h})}})(nl)),nl}var ew;function iE(){if(ew)return Pn;ew=1;var t=Pn&&Pn.__awaiter||function(p,v,b,x){function w(S){return S instanceof b?S:new b(function(C){C(S)})}return new(b||(b=Promise))(function(S,C){function N(O){try{A(x.next(O))}catch(j){C(j)}}function E(O){try{A(x.throw(O))}catch(j){C(j)}}function A(O){O.done?S(O.value):w(O.value).then(N,E)}A((x=x.apply(p,v||[])).next())})},e=Pn&&Pn.__await||function(p){return this instanceof e?(this.v=p,this):new e(p)},n=Pn&&Pn.__asyncGenerator||function(p,v,b){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var x=b.apply(p,v||[]),w,S=[];return w={},N("next"),N("throw"),N("return",C),w[Symbol.asyncIterator]=function(){return this},w;function C($){return function(P){return Promise.resolve(P).then($,j)}}function N($,P){x[$]&&(w[$]=function(K){return new Promise(function(G,L){S.push([$,K,G,L])>1||E($,K)})},P&&(w[$]=P(w[$])))}function E($,P){try{A(x[$](P))}catch(K){D(S[0][3],K)}}function A($){$.value instanceof e?Promise.resolve($.value.v).then(O,j):D(S[0][2],$)}function O($){E("next",$)}function j($){E("throw",$)}function D($,P){$(P),S.shift(),S.length&&E(S[0][0],S[0][1])}};Object.defineProperty(Pn,"__esModule",{value:!0}),Pn.FalStream=void 0,Pn.createStreamingClient=g;const s=G2(),a=sE(),l=Jl(),c=Oi(),d="text/event-stream",f=15*1e3;class h{constructor(v,b,x){var w;this.listeners=new Map,this.buffer=[],this.currentData=void 0,this.lastEventTimestamp=0,this.streamClosed=!1,this._requestId=null,this.abortController=new AbortController,this.start=()=>t(this,void 0,void 0,function*(){var S,C;const{endpointId:N,options:E}=this,{input:A,method:O="post",connectionMode:j="server"}=E;try{if(j==="client"){const D=yield(0,a.getTemporaryAuthToken)(N,this.config),{fetch:$}=this.config,P=new URL(this.url);P.searchParams.set("fal_jwt_token",D);const K=yield $(P.toString(),{method:O.toUpperCase(),headers:{accept:(S=E.accept)!==null&&S!==void 0?S:d,"content-type":"application/json"},body:A&&O!=="get"?JSON.stringify(A):void 0,signal:this.abortController.signal});return this._requestId=K.headers.get("x-fal-request-id"),yield this.handleResponse(K)}return yield(0,l.dispatchRequest)({method:O.toUpperCase(),targetUrl:this.url,input:A,config:this.config,options:{headers:{accept:(C=E.accept)!==null&&C!==void 0?C:d},responseHandler:D=>t(this,void 0,void 0,function*(){return this._requestId=D.headers.get("x-fal-request-id"),yield this.handleResponse(D)}),signal:this.abortController.signal}})}catch(D){this.handleError(D)}}),this.handleResponse=S=>t(this,void 0,void 0,function*(){var C,N;if(!S.ok){try{yield(0,c.defaultResponseHandler)(S)}catch(K){this.emit("error",K)}return}const E=S.body;if(!E){this.emit("error",new c.ApiError({message:"Response body is empty.",status:400,body:void 0,requestId:this._requestId||void 0}));return}if(!((C=S.headers.get("content-type"))!==null&&C!==void 0?C:"").startsWith(d)){const K=E.getReader(),G=()=>{K.read().then(({done:L,value:W})=>{if(L){this.emit("done",this.currentData);return}this.currentData=W,this.emit("data",W),G()})};G();return}const O=new TextDecoder("utf-8"),j=S.body.getReader(),D=(0,s.createParser)(K=>{if(K.type==="event"){const G=K.data;try{const L=JSON.parse(G);this.buffer.push(L),this.currentData=L,this.emit("data",L),this.emit("message",L)}catch(L){this.emit("error",L)}}}),$=(N=this.options.timeout)!==null&&N!==void 0?N:f,P=()=>t(this,void 0,void 0,function*(){const{value:K,done:G}=yield j.read();this.lastEventTimestamp=Date.now(),D.feed(O.decode(K)),Date.now()-this.lastEventTimestamp>$&&this.emit("error",new c.ApiError({message:`Event stream timed out after ${($/1e3).toFixed(0)} seconds with no messages.`,status:408,requestId:this._requestId||void 0})),G?this.emit("done",this.currentData):P().catch(this.handleError)});P().catch(this.handleError)}),this.handleError=S=>{var C;if(S.name==="AbortError"||this.signal.aborted)return;const N=S instanceof c.ApiError?S:new c.ApiError({message:(C=S.message)!==null&&C!==void 0?C:"An unknown error occurred",status:500,requestId:this._requestId||void 0});this.emit("error",N)},this.on=(S,C)=>{var N;this.listeners.has(S)||this.listeners.set(S,[]),(N=this.listeners.get(S))===null||N===void 0||N.push(C)},this.emit=(S,C)=>{const N=this.listeners.get(S)||[];for(const E of N)E(C)},this.done=()=>t(this,void 0,void 0,function*(){return this.donePromise}),this.abort=S=>{this.streamClosed||this.abortController.abort(S)},this.endpointId=v,this.config=b,this.url=(w=x.url)!==null&&w!==void 0?w:(0,l.buildUrl)(v,{path:"/stream",query:x.queryParams}),this.options=x,this.donePromise=new Promise((S,C)=>{this.streamClosed&&C(new c.ApiError({message:"Streaming connection is already closed.",status:400,body:void 0,requestId:this._requestId||void 0})),this.signal.addEventListener("abort",()=>{var N;S((N=this.currentData)!==null&&N!==void 0?N:{})}),this.on("done",N=>{this.streamClosed=!0,S(N)}),this.on("error",N=>{this.streamClosed=!0,C(N)})}),x.signal&&x.signal.addEventListener("abort",()=>{this.abortController.abort()}),this.start().catch(this.handleError)}[Symbol.asyncIterator](){return n(this,arguments,function*(){let b=!0;const x=()=>b=!1;for(this.on("error",x),this.on("done",x);b||this.buffer.length>0;){const w=this.buffer.shift();w&&(yield yield e(w)),yield e(new Promise(S=>setTimeout(S,16)))}})}get signal(){return this.abortController.signal}get requestId(){return this._requestId}}Pn.FalStream=h;function g({config:p,storage:v}){return{stream(b,x){return t(this,void 0,void 0,function*(){const w=x.input?yield v.transformInput(x.input):void 0;return new h(b,p,Object.assign(Object.assign({},x),{input:w}))})}}}return Pn}var tw;function X2(){if(tw)return zr;tw=1;var t=zr&&zr.__awaiter||function(p,v,b,x){function w(S){return S instanceof b?S:new b(function(C){C(S)})}return new(b||(b=Promise))(function(S,C){function N(O){try{A(x.next(O))}catch(j){C(j)}}function E(O){try{A(x.throw(O))}catch(j){C(j)}}function A(O){O.done?S(O.value):w(O.value).then(N,E)}A((x=x.apply(p,v||[])).next())})},e=zr&&zr.__rest||function(p,v){var b={};for(var x in p)Object.prototype.hasOwnProperty.call(p,x)&&v.indexOf(x)<0&&(b[x]=p[x]);if(p!=null&&typeof Object.getOwnPropertySymbols=="function")for(var w=0,x=Object.getOwnPropertySymbols(p);w<x.length;w++)v.indexOf(x[w])<0&&Object.prototype.propertyIsEnumerable.call(p,x[w])&&(b[x[w]]=p[x[w]]);return b};Object.defineProperty(zr,"__esModule",{value:!0}),zr.createQueueClient=void 0;const n=Jl(),s=Oi(),a=ef(),l=iE(),c=Ri(),d=500,f={maxRetries:3,baseDelay:1e3,maxDelay:6e4,retryableStatusCodes:a.DEFAULT_RETRYABLE_STATUS_CODES},h={maxRetries:5,baseDelay:1e3,maxDelay:3e4,retryableStatusCodes:[...a.DEFAULT_RETRYABLE_STATUS_CODES,500]},g=({config:p,storage:v})=>{const b={submit(x,w){return t(this,void 0,void 0,function*(){const{webhookUrl:S,priority:C,hint:N}=w,E=e(w,["webhookUrl","priority","hint"]),A=w.input?yield v.transformInput(w.input):void 0;return(0,n.dispatchRequest)({method:w.method,targetUrl:(0,n.buildUrl)(x,Object.assign(Object.assign({},E),{subdomain:"queue",query:S?{fal_webhook:S}:void 0})),headers:Object.assign({"x-fal-queue-priority":C??"normal"},N&&{"x-fal-runner-hint":N}),input:A,config:p,options:{signal:w.abortSignal,retry:f}})})},status(x,w){return t(this,arguments,void 0,function*(S,{requestId:C,logs:N=!1,abortSignal:E}){const A=(0,c.parseEndpointId)(S),O=A.namespace?`${A.namespace}/`:"";return(0,n.dispatchRequest)({method:"get",targetUrl:(0,n.buildUrl)(`${O}${A.owner}/${A.alias}`,{subdomain:"queue",query:{logs:N?"1":"0"},path:`/requests/${C}/status`}),config:p,options:{signal:E,retry:h}})})},streamStatus(x,w){return t(this,arguments,void 0,function*(S,{requestId:C,logs:N=!1,connectionMode:E}){const A=(0,c.parseEndpointId)(S),O=A.namespace?`${A.namespace}/`:"",j={logs:N?"1":"0"},D=(0,n.buildUrl)(`${O}${A.owner}/${A.alias}`,{subdomain:"queue",path:`/requests/${C}/status/stream`,query:j});return new l.FalStream(S,p,{url:D,method:"get",connectionMode:E,queryParams:j})})},subscribeToStatus(x,w){return t(this,void 0,void 0,function*(){const S=w.requestId,C=w.timeout;let N;const E=()=>{};if(w.mode==="streaming"){const A=yield b.streamStatus(x,{requestId:S,logs:w.logs,connectionMode:"connectionMode"in w?w.connectionMode:void 0}),O=[];C&&(N=setTimeout(()=>{throw A.abort(),b.cancel(x,{requestId:S}).catch(E),new Error(`Client timed out waiting for the request to complete after ${C}ms`)},C)),A.on("data",D=>{w.onQueueUpdate&&("logs"in D&&Array.isArray(D.logs)&&D.logs.length>0&&O.push(...D.logs),w.onQueueUpdate("logs"in D?Object.assign(Object.assign({},D),{logs:O}):D))});const j=yield A.done();return N&&clearTimeout(N),j}return new Promise((A,O)=>{var j;let D;const $="pollInterval"in w&&typeof w.pollInterval=="number"&&(j=w.pollInterval)!==null&&j!==void 0?j:d,P=()=>{N&&clearTimeout(N),D&&clearTimeout(D)};C&&(N=setTimeout(()=>{P(),b.cancel(x,{requestId:S}).catch(E),O(new Error(`Client timed out waiting for the request to complete after ${C}ms`))},C));const K=()=>t(this,void 0,void 0,function*(){var G;try{const L=yield b.status(x,{requestId:S,logs:(G=w.logs)!==null&&G!==void 0?G:!1,abortSignal:w.abortSignal});if(w.onQueueUpdate&&w.onQueueUpdate(L),L.status==="COMPLETED"){P(),A(L);return}D=setTimeout(K,$)}catch(L){P(),O(L)}});K().catch(O)})})},result(x,w){return t(this,arguments,void 0,function*(S,{requestId:C,abortSignal:N}){const E=(0,c.parseEndpointId)(S),A=E.namespace?`${E.namespace}/`:"";return(0,n.dispatchRequest)({method:"get",targetUrl:(0,n.buildUrl)(`${A}${E.owner}/${E.alias}`,{subdomain:"queue",path:`/requests/${C}`}),config:Object.assign(Object.assign({},p),{responseHandler:s.resultResponseHandler}),options:{signal:N,retry:f}})})},cancel(x,w){return t(this,arguments,void 0,function*(S,{requestId:C,abortSignal:N}){const E=(0,c.parseEndpointId)(S),A=E.namespace?`${E.namespace}/`:"";yield(0,n.dispatchRequest)({method:"put",targetUrl:(0,n.buildUrl)(`${A}${E.owner}/${E.alias}`,{subdomain:"queue",path:`/requests/${C}/cancel`}),config:p,options:{signal:N}})})}};return b};return zr.createQueueClient=g,zr}var Hu={};function K2(t){const e=t.length;let n=0,s=0;for(;s<e;){let a=t.charCodeAt(s++);if((a&4294967168)===0){n++;continue}else if((a&4294965248)===0)n+=2;else{if(a>=55296&&a<=56319&&s<e){const l=t.charCodeAt(s);(l&64512)===56320&&(++s,a=((a&1023)<<10)+(l&1023)+65536)}(a&4294901760)===0?n+=3:n+=4}}return n}function Q2(t,e,n){const s=t.length;let a=n,l=0;for(;l<s;){let c=t.charCodeAt(l++);if((c&4294967168)===0){e[a++]=c;continue}else if((c&4294965248)===0)e[a++]=c>>6&31|192;else{if(c>=55296&&c<=56319&&l<s){const d=t.charCodeAt(l);(d&64512)===56320&&(++l,c=((c&1023)<<10)+(d&1023)+65536)}(c&4294901760)===0?(e[a++]=c>>12&15|224,e[a++]=c>>6&63|128):(e[a++]=c>>18&7|240,e[a++]=c>>12&63|128,e[a++]=c>>6&63|128)}e[a++]=c&63|128}}const W2=new TextEncoder,J2=50;function Z2(t,e,n){W2.encodeInto(t,e.subarray(n))}function ek(t,e,n){t.length>J2?Z2(t,e,n):Q2(t,e,n)}const tk=4096;function aE(t,e,n){let s=e;const a=s+n,l=[];let c="";for(;s<a;){const d=t[s++];if((d&128)===0)l.push(d);else if((d&224)===192){const f=t[s++]&63;l.push((d&31)<<6|f)}else if((d&240)===224){const f=t[s++]&63,h=t[s++]&63;l.push((d&31)<<12|f<<6|h)}else if((d&248)===240){const f=t[s++]&63,h=t[s++]&63,g=t[s++]&63;let p=(d&7)<<18|f<<12|h<<6|g;p>65535&&(p-=65536,l.push(p>>>10&1023|55296),p=56320|p&1023),l.push(p)}else l.push(d);l.length>=tk&&(c+=String.fromCharCode(...l),l.length=0)}return l.length>0&&(c+=String.fromCharCode(...l)),c}const nk=new TextDecoder,rk=200;function sk(t,e,n){const s=t.subarray(e,e+n);return nk.decode(s)}function ik(t,e,n){return n>rk?sk(t,e,n):aE(t,e,n)}class ul{constructor(e,n){this.type=e,this.data=n}}class un extends Error{constructor(e){super(e);const n=Object.create(un.prototype);Object.setPrototypeOf(this,n),Object.defineProperty(this,"name",{configurable:!0,enumerable:!1,value:un.name})}}const rl=4294967295;function ak(t,e,n){const s=n/4294967296,a=n;t.setUint32(e,s),t.setUint32(e+4,a)}function oE(t,e,n){const s=Math.floor(n/4294967296),a=n;t.setUint32(e,s),t.setUint32(e+4,a)}function lE(t,e){const n=t.getInt32(e),s=t.getUint32(e+4);return n*4294967296+s}function ok(t,e){const n=t.getUint32(e),s=t.getUint32(e+4);return n*4294967296+s}const cE=-1,lk=4294967296-1,ck=17179869184-1;function uE({sec:t,nsec:e}){if(t>=0&&e>=0&&t<=ck)if(e===0&&t<=lk){const n=new Uint8Array(4);return new DataView(n.buffer).setUint32(0,t),n}else{const n=t/4294967296,s=t&4294967295,a=new Uint8Array(8),l=new DataView(a.buffer);return l.setUint32(0,e<<2|n&3),l.setUint32(4,s),a}else{const n=new Uint8Array(12),s=new DataView(n.buffer);return s.setUint32(0,e),oE(s,4,t),n}}function dE(t){const e=t.getTime(),n=Math.floor(e/1e3),s=(e-n*1e3)*1e6,a=Math.floor(s/1e9);return{sec:n+a,nsec:s-a*1e9}}function fE(t){if(t instanceof Date){const e=dE(t);return uE(e)}else return null}function hE(t){const e=new DataView(t.buffer,t.byteOffset,t.byteLength);switch(t.byteLength){case 4:return{sec:e.getUint32(0),nsec:0};case 8:{const n=e.getUint32(0),s=e.getUint32(4),a=(n&3)*4294967296+s,l=n>>>2;return{sec:a,nsec:l}}case 12:{const n=lE(e,4),s=e.getUint32(0);return{sec:n,nsec:s}}default:throw new un(`Unrecognized data size for timestamp (expected 4, 8, or 12): ${t.length}`)}}function mE(t){const e=hE(t);return new Date(e.sec*1e3+e.nsec/1e6)}const uk={type:cE,encode:fE,decode:mE};class Ul{constructor(){this.builtInEncoders=[],this.builtInDecoders=[],this.encoders=[],this.decoders=[],this.register(uk)}register({type:e,encode:n,decode:s}){if(e>=0)this.encoders[e]=n,this.decoders[e]=s;else{const a=-1-e;this.builtInEncoders[a]=n,this.builtInDecoders[a]=s}}tryToEncode(e,n){for(let s=0;s<this.builtInEncoders.length;s++){const a=this.builtInEncoders[s];if(a!=null){const l=a(e,n);if(l!=null){const c=-1-s;return new ul(c,l)}}}for(let s=0;s<this.encoders.length;s++){const a=this.encoders[s];if(a!=null){const l=a(e,n);if(l!=null){const c=s;return new ul(c,l)}}}return e instanceof ul?e:null}decode(e,n,s){const a=n<0?this.builtInDecoders[-1-n]:this.decoders[n];return a?a(e,n,s):new ul(n,e)}}Ul.defaultCodec=new Ul;function dk(t){return t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer}function Lp(t){return t instanceof Uint8Array?t:ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):dk(t)?new Uint8Array(t):Uint8Array.from(t)}const fk=100,hk=2048;class tf{constructor(e){this.entered=!1,this.extensionCodec=e?.extensionCodec??Ul.defaultCodec,this.context=e?.context,this.useBigInt64=e?.useBigInt64??!1,this.maxDepth=e?.maxDepth??fk,this.initialBufferSize=e?.initialBufferSize??hk,this.sortKeys=e?.sortKeys??!1,this.forceFloat32=e?.forceFloat32??!1,this.ignoreUndefined=e?.ignoreUndefined??!1,this.forceIntegerToFloat=e?.forceIntegerToFloat??!1,this.pos=0,this.view=new DataView(new ArrayBuffer(this.initialBufferSize)),this.bytes=new Uint8Array(this.view.buffer)}clone(){return new tf({extensionCodec:this.extensionCodec,context:this.context,useBigInt64:this.useBigInt64,maxDepth:this.maxDepth,initialBufferSize:this.initialBufferSize,sortKeys:this.sortKeys,forceFloat32:this.forceFloat32,ignoreUndefined:this.ignoreUndefined,forceIntegerToFloat:this.forceIntegerToFloat})}reinitializeState(){this.pos=0}encodeSharedRef(e){if(this.entered)return this.clone().encodeSharedRef(e);try{return this.entered=!0,this.reinitializeState(),this.doEncode(e,1),this.bytes.subarray(0,this.pos)}finally{this.entered=!1}}encode(e){if(this.entered)return this.clone().encode(e);try{return this.entered=!0,this.reinitializeState(),this.doEncode(e,1),this.bytes.slice(0,this.pos)}finally{this.entered=!1}}doEncode(e,n){if(n>this.maxDepth)throw new Error(`Too deep objects in depth ${n}`);e==null?this.encodeNil():typeof e=="boolean"?this.encodeBoolean(e):typeof e=="number"?this.forceIntegerToFloat?this.encodeNumberAsFloat(e):this.encodeNumber(e):typeof e=="string"?this.encodeString(e):this.useBigInt64&&typeof e=="bigint"?this.encodeBigInt64(e):this.encodeObject(e,n)}ensureBufferSizeToWrite(e){const n=this.pos+e;this.view.byteLength<n&&this.resizeBuffer(n*2)}resizeBuffer(e){const n=new ArrayBuffer(e),s=new Uint8Array(n),a=new DataView(n);s.set(this.bytes),this.view=a,this.bytes=s}encodeNil(){this.writeU8(192)}encodeBoolean(e){e===!1?this.writeU8(194):this.writeU8(195)}encodeNumber(e){!this.forceIntegerToFloat&&Number.isSafeInteger(e)?e>=0?e<128?this.writeU8(e):e<256?(this.writeU8(204),this.writeU8(e)):e<65536?(this.writeU8(205),this.writeU16(e)):e<4294967296?(this.writeU8(206),this.writeU32(e)):this.useBigInt64?this.encodeNumberAsFloat(e):(this.writeU8(207),this.writeU64(e)):e>=-32?this.writeU8(224|e+32):e>=-128?(this.writeU8(208),this.writeI8(e)):e>=-32768?(this.writeU8(209),this.writeI16(e)):e>=-2147483648?(this.writeU8(210),this.writeI32(e)):this.useBigInt64?this.encodeNumberAsFloat(e):(this.writeU8(211),this.writeI64(e)):this.encodeNumberAsFloat(e)}encodeNumberAsFloat(e){this.forceFloat32?(this.writeU8(202),this.writeF32(e)):(this.writeU8(203),this.writeF64(e))}encodeBigInt64(e){e>=BigInt(0)?(this.writeU8(207),this.writeBigUint64(e)):(this.writeU8(211),this.writeBigInt64(e))}writeStringHeader(e){if(e<32)this.writeU8(160+e);else if(e<256)this.writeU8(217),this.writeU8(e);else if(e<65536)this.writeU8(218),this.writeU16(e);else if(e<4294967296)this.writeU8(219),this.writeU32(e);else throw new Error(`Too long string: ${e} bytes in UTF-8`)}encodeString(e){const s=K2(e);this.ensureBufferSizeToWrite(5+s),this.writeStringHeader(s),ek(e,this.bytes,this.pos),this.pos+=s}encodeObject(e,n){const s=this.extensionCodec.tryToEncode(e,this.context);if(s!=null)this.encodeExtension(s);else if(Array.isArray(e))this.encodeArray(e,n);else if(ArrayBuffer.isView(e))this.encodeBinary(e);else if(typeof e=="object")this.encodeMap(e,n);else throw new Error(`Unrecognized object: ${Object.prototype.toString.apply(e)}`)}encodeBinary(e){const n=e.byteLength;if(n<256)this.writeU8(196),this.writeU8(n);else if(n<65536)this.writeU8(197),this.writeU16(n);else if(n<4294967296)this.writeU8(198),this.writeU32(n);else throw new Error(`Too large binary: ${n}`);const s=Lp(e);this.writeU8a(s)}encodeArray(e,n){const s=e.length;if(s<16)this.writeU8(144+s);else if(s<65536)this.writeU8(220),this.writeU16(s);else if(s<4294967296)this.writeU8(221),this.writeU32(s);else throw new Error(`Too large array: ${s}`);for(const a of e)this.doEncode(a,n+1)}countWithoutUndefined(e,n){let s=0;for(const a of n)e[a]!==void 0&&s++;return s}encodeMap(e,n){const s=Object.keys(e);this.sortKeys&&s.sort();const a=this.ignoreUndefined?this.countWithoutUndefined(e,s):s.length;if(a<16)this.writeU8(128+a);else if(a<65536)this.writeU8(222),this.writeU16(a);else if(a<4294967296)this.writeU8(223),this.writeU32(a);else throw new Error(`Too large map object: ${a}`);for(const l of s){const c=e[l];this.ignoreUndefined&&c===void 0||(this.encodeString(l),this.doEncode(c,n+1))}}encodeExtension(e){if(typeof e.data=="function"){const s=e.data(this.pos+6),a=s.length;if(a>=4294967296)throw new Error(`Too large extension object: ${a}`);this.writeU8(201),this.writeU32(a),this.writeI8(e.type),this.writeU8a(s);return}const n=e.data.length;if(n===1)this.writeU8(212);else if(n===2)this.writeU8(213);else if(n===4)this.writeU8(214);else if(n===8)this.writeU8(215);else if(n===16)this.writeU8(216);else if(n<256)this.writeU8(199),this.writeU8(n);else if(n<65536)this.writeU8(200),this.writeU16(n);else if(n<4294967296)this.writeU8(201),this.writeU32(n);else throw new Error(`Too large extension object: ${n}`);this.writeI8(e.type),this.writeU8a(e.data)}writeU8(e){this.ensureBufferSizeToWrite(1),this.view.setUint8(this.pos,e),this.pos++}writeU8a(e){const n=e.length;this.ensureBufferSizeToWrite(n),this.bytes.set(e,this.pos),this.pos+=n}writeI8(e){this.ensureBufferSizeToWrite(1),this.view.setInt8(this.pos,e),this.pos++}writeU16(e){this.ensureBufferSizeToWrite(2),this.view.setUint16(this.pos,e),this.pos+=2}writeI16(e){this.ensureBufferSizeToWrite(2),this.view.setInt16(this.pos,e),this.pos+=2}writeU32(e){this.ensureBufferSizeToWrite(4),this.view.setUint32(this.pos,e),this.pos+=4}writeI32(e){this.ensureBufferSizeToWrite(4),this.view.setInt32(this.pos,e),this.pos+=4}writeF32(e){this.ensureBufferSizeToWrite(4),this.view.setFloat32(this.pos,e),this.pos+=4}writeF64(e){this.ensureBufferSizeToWrite(8),this.view.setFloat64(this.pos,e),this.pos+=8}writeU64(e){this.ensureBufferSizeToWrite(8),ak(this.view,this.pos,e),this.pos+=8}writeI64(e){this.ensureBufferSizeToWrite(8),oE(this.view,this.pos,e),this.pos+=8}writeBigUint64(e){this.ensureBufferSizeToWrite(8),this.view.setBigUint64(this.pos,e),this.pos+=8}writeBigInt64(e){this.ensureBufferSizeToWrite(8),this.view.setBigInt64(this.pos,e),this.pos+=8}}function mk(t,e){return new tf(e).encodeSharedRef(t)}function tp(t){return`${t<0?"-":""}0x${Math.abs(t).toString(16).padStart(2,"0")}`}const pk=16,gk=16;class yk{constructor(e=pk,n=gk){this.hit=0,this.miss=0,this.maxKeyLength=e,this.maxLengthPerKey=n,this.caches=[];for(let s=0;s<this.maxKeyLength;s++)this.caches.push([])}canBeCached(e){return e>0&&e<=this.maxKeyLength}find(e,n,s){const a=this.caches[s-1];e:for(const l of a){const c=l.bytes;for(let d=0;d<s;d++)if(c[d]!==e[n+d])continue e;return l.str}return null}store(e,n){const s=this.caches[e.length-1],a={bytes:e,str:n};s.length>=this.maxLengthPerKey?s[Math.random()*s.length|0]=a:s.push(a)}decode(e,n,s){const a=this.find(e,n,s);if(a!=null)return this.hit++,a;this.miss++;const l=aE(e,n,s),c=Uint8Array.prototype.slice.call(e,n,n+s);return this.store(c,l),l}}const zp="array",Cl="map_key",pE="map_value",vk=t=>{if(typeof t=="string"||typeof t=="number")return t;throw new un("The type of key must be string or number but "+typeof t)};class bk{constructor(){this.stack=[],this.stackHeadPosition=-1}get length(){return this.stackHeadPosition+1}top(){return this.stack[this.stackHeadPosition]}pushArrayState(e){const n=this.getUninitializedStateFromPool();n.type=zp,n.position=0,n.size=e,n.array=new Array(e)}pushMapState(e){const n=this.getUninitializedStateFromPool();n.type=Cl,n.readCount=0,n.size=e,n.map={}}getUninitializedStateFromPool(){if(this.stackHeadPosition++,this.stackHeadPosition===this.stack.length){const e={type:void 0,size:0,array:void 0,position:0,readCount:0,map:void 0,key:null};this.stack.push(e)}return this.stack[this.stackHeadPosition]}release(e){if(this.stack[this.stackHeadPosition]!==e)throw new Error("Invalid stack state. Released state is not on top of the stack.");if(e.type===zp){const s=e;s.size=0,s.array=void 0,s.position=0,s.type=void 0}if(e.type===Cl||e.type===pE){const s=e;s.size=0,s.map=void 0,s.readCount=0,s.type=void 0}this.stackHeadPosition--}reset(){this.stack.length=0,this.stackHeadPosition=-1}}const sl=-1,Rg=new DataView(new ArrayBuffer(0)),_k=new Uint8Array(Rg.buffer);try{Rg.getInt8(0)}catch(t){if(!(t instanceof RangeError))throw new Error("This module is not supported in the current JavaScript engine because DataView does not throw RangeError on out-of-bounds access")}const nw=new RangeError("Insufficient data"),wk=new yk;class zs{constructor(e){this.totalPos=0,this.pos=0,this.view=Rg,this.bytes=_k,this.headByte=sl,this.stack=new bk,this.entered=!1,this.extensionCodec=e?.extensionCodec??Ul.defaultCodec,this.context=e?.context,this.useBigInt64=e?.useBigInt64??!1,this.rawStrings=e?.rawStrings??!1,this.maxStrLength=e?.maxStrLength??rl,this.maxBinLength=e?.maxBinLength??rl,this.maxArrayLength=e?.maxArrayLength??rl,this.maxMapLength=e?.maxMapLength??rl,this.maxExtLength=e?.maxExtLength??rl,this.keyDecoder=e?.keyDecoder!==void 0?e.keyDecoder:wk,this.mapKeyConverter=e?.mapKeyConverter??vk}clone(){return new zs({extensionCodec:this.extensionCodec,context:this.context,useBigInt64:this.useBigInt64,rawStrings:this.rawStrings,maxStrLength:this.maxStrLength,maxBinLength:this.maxBinLength,maxArrayLength:this.maxArrayLength,maxMapLength:this.maxMapLength,maxExtLength:this.maxExtLength,keyDecoder:this.keyDecoder})}reinitializeState(){this.totalPos=0,this.headByte=sl,this.stack.reset()}setBuffer(e){const n=Lp(e);this.bytes=n,this.view=new DataView(n.buffer,n.byteOffset,n.byteLength),this.pos=0}appendBuffer(e){if(this.headByte===sl&&!this.hasRemaining(1))this.setBuffer(e);else{const n=this.bytes.subarray(this.pos),s=Lp(e),a=new Uint8Array(n.length+s.length);a.set(n),a.set(s,n.length),this.setBuffer(a)}}hasRemaining(e){return this.view.byteLength-this.pos>=e}createExtraByteError(e){const{view:n,pos:s}=this;return new RangeError(`Extra ${n.byteLength-s} of ${n.byteLength} byte(s) found at buffer[${e}]`)}decode(e){if(this.entered)return this.clone().decode(e);try{this.entered=!0,this.reinitializeState(),this.setBuffer(e);const n=this.doDecodeSync();if(this.hasRemaining(1))throw this.createExtraByteError(this.pos);return n}finally{this.entered=!1}}*decodeMulti(e){if(this.entered){yield*this.clone().decodeMulti(e);return}try{for(this.entered=!0,this.reinitializeState(),this.setBuffer(e);this.hasRemaining(1);)yield this.doDecodeSync()}finally{this.entered=!1}}async decodeAsync(e){if(this.entered)return this.clone().decodeAsync(e);try{this.entered=!0;let n=!1,s;for await(const d of e){if(n)throw this.entered=!1,this.createExtraByteError(this.totalPos);this.appendBuffer(d);try{s=this.doDecodeSync(),n=!0}catch(f){if(!(f instanceof RangeError))throw f}this.totalPos+=this.pos}if(n){if(this.hasRemaining(1))throw this.createExtraByteError(this.totalPos);return s}const{headByte:a,pos:l,totalPos:c}=this;throw new RangeError(`Insufficient data in parsing ${tp(a)} at ${c} (${l} in the current buffer)`)}finally{this.entered=!1}}decodeArrayStream(e){return this.decodeMultiAsync(e,!0)}decodeStream(e){return this.decodeMultiAsync(e,!1)}async*decodeMultiAsync(e,n){if(this.entered){yield*this.clone().decodeMultiAsync(e,n);return}try{this.entered=!0;let s=n,a=-1;for await(const l of e){if(n&&a===0)throw this.createExtraByteError(this.totalPos);this.appendBuffer(l),s&&(a=this.readArraySize(),s=!1,this.complete());try{for(;yield this.doDecodeSync(),--a!==0;);}catch(c){if(!(c instanceof RangeError))throw c}this.totalPos+=this.pos}}finally{this.entered=!1}}doDecodeSync(){e:for(;;){const e=this.readHeadByte();let n;if(e>=224)n=e-256;else if(e<192)if(e<128)n=e;else if(e<144){const a=e-128;if(a!==0){this.pushMapState(a),this.complete();continue e}else n={}}else if(e<160){const a=e-144;if(a!==0){this.pushArrayState(a),this.complete();continue e}else n=[]}else{const a=e-160;n=this.decodeString(a,0)}else if(e===192)n=null;else if(e===194)n=!1;else if(e===195)n=!0;else if(e===202)n=this.readF32();else if(e===203)n=this.readF64();else if(e===204)n=this.readU8();else if(e===205)n=this.readU16();else if(e===206)n=this.readU32();else if(e===207)this.useBigInt64?n=this.readU64AsBigInt():n=this.readU64();else if(e===208)n=this.readI8();else if(e===209)n=this.readI16();else if(e===210)n=this.readI32();else if(e===211)this.useBigInt64?n=this.readI64AsBigInt():n=this.readI64();else if(e===217){const a=this.lookU8();n=this.decodeString(a,1)}else if(e===218){const a=this.lookU16();n=this.decodeString(a,2)}else if(e===219){const a=this.lookU32();n=this.decodeString(a,4)}else if(e===220){const a=this.readU16();if(a!==0){this.pushArrayState(a),this.complete();continue e}else n=[]}else if(e===221){const a=this.readU32();if(a!==0){this.pushArrayState(a),this.complete();continue e}else n=[]}else if(e===222){const a=this.readU16();if(a!==0){this.pushMapState(a),this.complete();continue e}else n={}}else if(e===223){const a=this.readU32();if(a!==0){this.pushMapState(a),this.complete();continue e}else n={}}else if(e===196){const a=this.lookU8();n=this.decodeBinary(a,1)}else if(e===197){const a=this.lookU16();n=this.decodeBinary(a,2)}else if(e===198){const a=this.lookU32();n=this.decodeBinary(a,4)}else if(e===212)n=this.decodeExtension(1,0);else if(e===213)n=this.decodeExtension(2,0);else if(e===214)n=this.decodeExtension(4,0);else if(e===215)n=this.decodeExtension(8,0);else if(e===216)n=this.decodeExtension(16,0);else if(e===199){const a=this.lookU8();n=this.decodeExtension(a,1)}else if(e===200){const a=this.lookU16();n=this.decodeExtension(a,2)}else if(e===201){const a=this.lookU32();n=this.decodeExtension(a,4)}else throw new un(`Unrecognized type byte: ${tp(e)}`);this.complete();const s=this.stack;for(;s.length>0;){const a=s.top();if(a.type===zp)if(a.array[a.position]=n,a.position++,a.position===a.size)n=a.array,s.release(a);else continue e;else if(a.type===Cl){if(n==="__proto__")throw new un("The key __proto__ is not allowed");a.key=this.mapKeyConverter(n),a.type=pE;continue e}else if(a.map[a.key]=n,a.readCount++,a.readCount===a.size)n=a.map,s.release(a);else{a.key=null,a.type=Cl;continue e}}return n}}readHeadByte(){return this.headByte===sl&&(this.headByte=this.readU8()),this.headByte}complete(){this.headByte=sl}readArraySize(){const e=this.readHeadByte();switch(e){case 220:return this.readU16();case 221:return this.readU32();default:{if(e<160)return e-144;throw new un(`Unrecognized array type byte: ${tp(e)}`)}}}pushMapState(e){if(e>this.maxMapLength)throw new un(`Max length exceeded: map length (${e}) > maxMapLengthLength (${this.maxMapLength})`);this.stack.pushMapState(e)}pushArrayState(e){if(e>this.maxArrayLength)throw new un(`Max length exceeded: array length (${e}) > maxArrayLength (${this.maxArrayLength})`);this.stack.pushArrayState(e)}decodeString(e,n){return!this.rawStrings||this.stateIsMapKey()?this.decodeUtf8String(e,n):this.decodeBinary(e,n)}decodeUtf8String(e,n){if(e>this.maxStrLength)throw new un(`Max length exceeded: UTF-8 byte length (${e}) > maxStrLength (${this.maxStrLength})`);if(this.bytes.byteLength<this.pos+n+e)throw nw;const s=this.pos+n;let a;return this.stateIsMapKey()&&this.keyDecoder?.canBeCached(e)?a=this.keyDecoder.decode(this.bytes,s,e):a=ik(this.bytes,s,e),this.pos+=n+e,a}stateIsMapKey(){return this.stack.length>0?this.stack.top().type===Cl:!1}decodeBinary(e,n){if(e>this.maxBinLength)throw new un(`Max length exceeded: bin length (${e}) > maxBinLength (${this.maxBinLength})`);if(!this.hasRemaining(e+n))throw nw;const s=this.pos+n,a=this.bytes.subarray(s,s+e);return this.pos+=n+e,a}decodeExtension(e,n){if(e>this.maxExtLength)throw new un(`Max length exceeded: ext length (${e}) > maxExtLength (${this.maxExtLength})`);const s=this.view.getInt8(this.pos+n),a=this.decodeBinary(e,n+1);return this.extensionCodec.decode(a,s,this.context)}lookU8(){return this.view.getUint8(this.pos)}lookU16(){return this.view.getUint16(this.pos)}lookU32(){return this.view.getUint32(this.pos)}readU8(){const e=this.view.getUint8(this.pos);return this.pos++,e}readI8(){const e=this.view.getInt8(this.pos);return this.pos++,e}readU16(){const e=this.view.getUint16(this.pos);return this.pos+=2,e}readI16(){const e=this.view.getInt16(this.pos);return this.pos+=2,e}readU32(){const e=this.view.getUint32(this.pos);return this.pos+=4,e}readI32(){const e=this.view.getInt32(this.pos);return this.pos+=4,e}readU64(){const e=ok(this.view,this.pos);return this.pos+=8,e}readI64(){const e=lE(this.view,this.pos);return this.pos+=8,e}readU64AsBigInt(){const e=this.view.getBigUint64(this.pos);return this.pos+=8,e}readI64AsBigInt(){const e=this.view.getBigInt64(this.pos);return this.pos+=8,e}readF32(){const e=this.view.getFloat32(this.pos);return this.pos+=4,e}readF64(){const e=this.view.getFloat64(this.pos);return this.pos+=8,e}}function xk(t,e){return new zs(e).decode(t)}function Sk(t,e){return new zs(e).decodeMulti(t)}function Ek(t){return t[Symbol.asyncIterator]!=null}async function*Ck(t){const e=t.getReader();try{for(;;){const{done:n,value:s}=await e.read();if(n)return;yield s}}finally{e.releaseLock()}}function jg(t){return Ek(t)?t:Ck(t)}async function Ak(t,e){const n=jg(t);return new zs(e).decodeAsync(n)}function Tk(t,e){const n=jg(t);return new zs(e).decodeArrayStream(n)}function Nk(t,e){const n=jg(t);return new zs(e).decodeStream(n)}const Ok=Object.freeze(Object.defineProperty({__proto__:null,DecodeError:un,Decoder:zs,EXT_TIMESTAMP:cE,Encoder:tf,ExtData:ul,ExtensionCodec:Ul,decode:xk,decodeArrayStream:Tk,decodeAsync:Ak,decodeMulti:Sk,decodeMultiStream:Nk,decodeTimestampExtension:mE,decodeTimestampToTimeSpec:hE,encode:mk,encodeDateToTimeSpec:dE,encodeTimeSpecToTimestamp:uE,encodeTimestampExtension:fE},Symbol.toStringTag,{value:"Module"})),Rk=Yx(Ok);var Sn={},rw;function jk(){if(rw)return Sn;rw=1,Object.defineProperty(Sn,"__esModule",{value:!0});function t(q){return{enumerable:!0,value:q}}function e(q){return{enumerable:!0,writable:!0,value:q}}let n={},s=()=>!0,a=()=>({}),l=q=>q,c=(q,H,M,B)=>q.apply(M,B)&&H.apply(M,B),d=(q,H,M,[B,Q])=>H.call(M,q.call(M,B,Q),Q),f=(q,H)=>Object.freeze(Object.create(q,H));function h(q,H,M){return q.reduce((B,Q)=>function(...ee){return M(B,Q,this,ee)},H)}function g(q){return f(this,{fn:t(q)})}let p={},v=g.bind(p),b=q=>v((H,M)=>!!~q(H,M)&&H),x={},w=g.bind(x);function S(q,H){return H.filter(M=>q.isPrototypeOf(M))}function C(q,H,...M){let B=h(S(x,M).map(ee=>ee.fn),s,c),Q=h(S(p,M).map(ee=>ee.fn),l,d);return f(this,{from:t(q),to:t(H),guards:t(B),reducers:t(Q)})}let N={},E={},A=C.bind(N),O=C.bind(E,null);function j(q,H,M){return Y(H,q,M,this.immediates)||q}function D(q){let H=new Map;for(let M of q)H.has(M.from)||H.set(M.from,[]),H.get(M.from).push(M);return H}let $={enter:l};function P(...q){let H=S(N,q),M=S(E,q),B={final:t(q.length===0),transitions:t(D(H))};return M.length&&(B.immediates=t(M),B.enter=t(j)),f($,B)}let K={enter(q,H,M){let B=this.fn.call(H,H.context,M);return W.isPrototypeOf(B)?f(G,{machine:t(B),transitions:t(this.transitions)}).enter(q,H,M):(B.then(Q=>H.send({type:"done",data:Q})).catch(Q=>H.send({type:"error",error:Q})),q)}},G={enter(q,H,M){if(H.child=V(this.machine,B=>{H.onChange(B),H.child==B&&B.machine.state.value.final&&(delete H.child,H.send({type:"done",data:B.context}))},H.context,M),H.child.machine.state.value.final){let B=H.child.context;return delete H.child,Y(H,q,{type:"done",data:B},this.transitions.get("done"))}return q}};function L(q,...H){let M=t(D(H));return W.isPrototypeOf(q)?f(G,{machine:t(q),transitions:M}):f(K,{fn:t(q),transitions:M})}let W={get state(){return{name:this.current,value:this.states[this.current]}}};function I(q,H,M=a){return typeof q!="string"&&(M=H||a,H=q,q=Object.keys(H)[0]),n._create&&n._create(q,H),f(W,{context:t(M),current:t(q),states:t(H)})}function Y(q,H,M,B){let{context:Q}=q;for(let{to:ee,guards:he,reducers:ge}of B)if(he(Q,M)){q.context=ge.call(q,Q,M);let ae=H.original||H,le=f(ae,{current:t(ee),original:{value:ae}});return n._onEnter&&n._onEnter(H,ee,q.context,Q,M),le.state.value.enter(le,q,M)}}function k(q,H){let M=H.type||H,{machine:B}=q,{value:Q,name:ee}=B.state;return Q.transitions.has(M)?Y(q,B,H,Q.transitions.get(M))||B:(n._send&&n._send(M,ee),B)}let z={send(q){this.machine=k(this,q),this.onChange(this)}};function V(q,H,M,B){let Q=Object.create(z,{machine:e(q),context:e(q.context(M,B)),onChange:t(H)});return Q.send=Q.send.bind(Q),Q.machine=Q.machine.state.value.enter(Q.machine,Q,B),Q}return Sn.action=b,Sn.createMachine=I,Sn.d=n,Sn.guard=w,Sn.immediate=O,Sn.interpret=V,Sn.invoke=L,Sn.reduce=v,Sn.state=P,Sn.transition=A,Sn}var sw;function kk(){if(sw)return Hu;sw=1,Object.defineProperty(Hu,"__esModule",{value:!0}),Hu.createRealtimeClient=G;const t=Rk,e=jk(),n=sE(),s=Oi(),a=Ng(),l=Ri(),c=()=>({enqueuedMessage:void 0});function d(L){return L.token!==void 0}function f(L){return!d(L)}function h(L,W){return Object.assign(Object.assign({},L),{enqueuedMessage:W.message})}function g(L){return L.websocket&&L.websocket.readyState===WebSocket.OPEN&&L.websocket.close(),Object.assign(Object.assign({},L),{websocket:void 0})}function p(L,W){return L.websocket&&L.websocket.readyState===WebSocket.OPEN?(W.message instanceof Uint8Array?L.websocket.send(W.message):L.websocket.send((0,t.encode)(W.message)),Object.assign(Object.assign({},L),{enqueuedMessage:void 0})):Object.assign(Object.assign({},L),{enqueuedMessage:W.message})}function v(L){return Object.assign(Object.assign({},L),{token:void 0})}function b(L,W){return Object.assign(Object.assign({},L),{token:W.token})}function x(L,W){return Object.assign(Object.assign({},L),{websocket:W.websocket})}const w=(0,e.createMachine)("idle",{idle:(0,e.state)((0,e.transition)("send","connecting",(0,e.reduce)(h)),(0,e.transition)("expireToken","idle",(0,e.reduce)(v)),(0,e.transition)("close","idle",(0,e.reduce)(g))),connecting:(0,e.state)((0,e.transition)("connecting","connecting"),(0,e.transition)("connected","active",(0,e.reduce)(x)),(0,e.transition)("connectionClosed","idle",(0,e.reduce)(g)),(0,e.transition)("send","connecting",(0,e.reduce)(h)),(0,e.transition)("close","idle",(0,e.reduce)(g)),(0,e.immediate)("authRequired",(0,e.guard)(f))),authRequired:(0,e.state)((0,e.transition)("initiateAuth","authInProgress"),(0,e.transition)("send","authRequired",(0,e.reduce)(h)),(0,e.transition)("close","idle",(0,e.reduce)(g))),authInProgress:(0,e.state)((0,e.transition)("authenticated","connecting",(0,e.reduce)(b)),(0,e.transition)("unauthorized","idle",(0,e.reduce)(v),(0,e.reduce)(g)),(0,e.transition)("send","authInProgress",(0,e.reduce)(h)),(0,e.transition)("close","idle",(0,e.reduce)(g))),active:(0,e.state)((0,e.transition)("send","active",(0,e.reduce)(p)),(0,e.transition)("unauthorized","idle",(0,e.reduce)(v)),(0,e.transition)("connectionClosed","idle",(0,e.reduce)(g)),(0,e.transition)("close","idle",(0,e.reduce)(g))),failed:(0,e.state)((0,e.transition)("send","failed"),(0,e.transition)("close","idle",(0,e.reduce)(g)))},c);function S(L,{token:W,maxBuffering:I}){if(I!==void 0&&(I<1||I>60))throw new Error("The `maxBuffering` must be between 1 and 60 (inclusive)");const Y=new URLSearchParams({fal_jwt_token:W});return I!==void 0&&Y.set("max_buffering",I.toFixed(0)),`wss://fal.run/${(0,l.ensureEndpointIdFormat)(L)}/realtime?${Y.toString()}`}const C=128;function N(L){return L.status==="error"&&L.error==="Unauthorized"}const E={NORMAL_CLOSURE:1e3},A=new Map,O=new Map;function j(L,W,I){if(!A.has(L)){const Y=(0,e.interpret)(w,I);A.set(L,Object.assign(Object.assign({},Y),{throttledSend:W>0?(0,l.throttle)(Y.send,W,!0):Y.send}))}return A.get(L)}const D=()=>{},$={send:D,close:D};function P(L){return L.status!=="error"&&L.type!=="x-fal-message"&&!K(L)}function K(L){return L.type==="x-fal-error"}function G({config:L}){return{connect(W,I){const{clientOnly:Y=(0,l.isReact)()&&!(0,a.isBrowser)(),connectionKey:k=crypto.randomUUID(),maxBuffering:z,throttleInterval:V=C}=I;if(Y&&!(0,a.isBrowser)())return $;let q;O.set(k,{onError:I.onError,onResult:I.onResult});const H=()=>O.get(k),M=j(k,V,({context:ee,machine:he,send:ge})=>{const{enqueuedMessage:ae,token:le}=ee;if(he.current==="active"&&ae&&ge({type:"send",message:ae}),he.current==="authRequired"&&le===void 0&&q!==he.current&&(ge({type:"initiateAuth"}),(0,n.getTemporaryAuthToken)(W,L).then(Z=>{ge({type:"authenticated",token:Z});const fe=Math.round(n.TOKEN_EXPIRATION_SECONDS*.9*1e3);setTimeout(()=>{ge({type:"expireToken"})},fe)}).catch(Z=>{ge({type:"unauthorized",error:Z})})),he.current==="connecting"&&q!==he.current&&le!==void 0){const Z=new WebSocket(S(W,{token:le,maxBuffering:z}));Z.onopen=()=>{ge({type:"connected",websocket:Z})},Z.onclose=fe=>{if(fe.code!==E.NORMAL_CLOSURE){const{onError:pe=D}=H();pe(new s.ApiError({message:`Error closing the connection: ${fe.reason}`,status:fe.code}))}ge({type:"connectionClosed",code:fe.code})},Z.onerror=fe=>{const{onError:pe=D}=H();pe(new s.ApiError({message:"Unknown error",status:500}))},Z.onmessage=fe=>{const{onResult:pe}=H();if(fe.data instanceof ArrayBuffer){const be=(0,t.decode)(new Uint8Array(fe.data));pe(be);return}if(fe.data instanceof Uint8Array){const be=(0,t.decode)(fe.data);pe(be);return}if(fe.data instanceof Blob){fe.data.arrayBuffer().then(be=>{const De=(0,t.decode)(new Uint8Array(be));pe(De)});return}const ve=JSON.parse(fe.data);if(N(ve)){ge({type:"unauthorized",error:new Error("Unauthorized")});return}if(P(ve)){pe(ve);return}if(K(ve)){if(ve.error==="TIMEOUT")return;const{onError:be=D}=H();be(new s.ApiError({message:`${ve.error}: ${ve.reason}`,status:400,body:ve}));return}}}q=he.current});return{send:ee=>{M.throttledSend({type:"send",message:ee})},close:()=>{M.send({type:"close"})}}}}}return Hu}var Ns={},iw;function Mk(){if(iw)return Ns;iw=1;var t=Ns&&Ns.__awaiter||function(g,p,v,b){function x(w){return w instanceof v?w:new v(function(S){S(w)})}return new(v||(v=Promise))(function(w,S){function C(A){try{E(b.next(A))}catch(O){S(O)}}function N(A){try{E(b.throw(A))}catch(O){S(O)}}function E(A){A.done?w(A.value):x(A.value).then(C,N)}E((b=b.apply(g,p||[])).next())})};Object.defineProperty(Ns,"__esModule",{value:!0}),Ns.LIFECYCLE_DURATIONS=void 0,Ns.createStorageClient=h;const e=Og(),n=Jl(),s=Ri();Ns.LIFECYCLE_DURATIONS={ONE_DAY:86400,ONE_WEEK:604800,ONE_MONTH:2592e3,ONE_YEAR:31536e3,UNLIMITED:31536e6};function a(g){var p;const[,v]=g.split("/");return(p=v.split(/[-;]/)[0])!==null&&p!==void 0?p:"bin"}function l(g,p,v,b){return t(this,void 0,void 0,function*(){const x=g.name||`${Date.now()}.${a(v)}`,w={};return b&&(w["X-Fal-Object-Lifecycle"]=JSON.stringify(b)),yield(0,n.dispatchRequest)({method:"POST",targetUrl:`${(0,e.getRestApiUrl)()}/storage/upload/initiate?storage_type=fal-cdn-v3`,input:{content_type:v,file_name:x},config:p,headers:w})})}function c(g,p,v,b){return t(this,void 0,void 0,function*(){const x=g.name||`${Date.now()}.${a(v)}`,w={};return b&&(w["X-Fal-Object-Lifecycle"]=JSON.stringify(b)),yield(0,n.dispatchRequest)({method:"POST",targetUrl:`${(0,e.getRestApiUrl)()}/storage/upload/initiate-multipart?storage_type=fal-cdn-v3`,input:{content_type:v,file_name:x},config:p,headers:w})})}function d(g,p,v){return t(this,arguments,void 0,function*(b,x,w,S=3){if(S===0)throw new Error("Part upload failed, retries exhausted");const{fetch:C,responseHandler:N}=w;try{const E=yield C(b,{method:"PUT",body:x});return yield N(E)}catch{return yield d(b,x,w,S-1)}})}function f(g,p,v){return t(this,void 0,void 0,function*(){const{fetch:b,responseHandler:x}=p,w=g.type||"application/octet-stream",{upload_url:S,file_url:C}=yield c(g,p,w,v),N=10*1024*1024,E=Math.ceil(g.size/N),A=new URL(S),O=[];for(let $=0;$<E;$++){const P=$*N,K=Math.min(P+N,g.size),G=g.slice(P,K),L=$+1,W=`${A.origin}${A.pathname}/${L}${A.search}`;O.push(yield d(W,G,p))}const j=`${A.origin}${A.pathname}/complete${A.search}`,D=yield b(j,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({parts:O.map($=>({partNumber:$.partNumber,etag:$.etag}))})});return yield x(D),C})}function h({config:g}){const p={upload:(v,b)=>t(this,void 0,void 0,function*(){const x=b?.lifecycle;if(v.size>94371840)return yield f(v,g,x);const w=v.type||"application/octet-stream",{fetch:S,responseHandler:C}=g,{upload_url:N,file_url:E}=yield l(v,g,w,x),A=yield S(N,{method:"PUT",body:v,headers:{"Content-Type":v.type||"application/octet-stream"}});return yield C(A),E}),transformInput:v=>t(this,void 0,void 0,function*(){if(Array.isArray(v))return Promise.all(v.map(b=>p.transformInput(b)));if(v instanceof Blob)return yield p.upload(v);if((0,s.isPlainObject)(v)){const x=Object.entries(v).map(S=>t(this,[S],void 0,function*([C,N]){return[C,yield p.transformInput(N)]})),w=yield Promise.all(x);return Object.fromEntries(w)}return v})};return p}return Ns}var aw;function ow(){if(aw)return Ca;aw=1;var t=Ca&&Ca.__awaiter||function(h,g,p,v){function b(x){return x instanceof p?x:new p(function(w){w(x)})}return new(p||(p=Promise))(function(x,w){function S(E){try{N(v.next(E))}catch(A){w(A)}}function C(E){try{N(v.throw(E))}catch(A){w(A)}}function N(E){E.done?x(E.value):b(E.value).then(S,C)}N((v=v.apply(h,g||[])).next())})};Object.defineProperty(Ca,"__esModule",{value:!0}),Ca.createFalClient=f;const e=Og(),n=X2(),s=kk(),a=Jl(),l=Oi(),c=Mk(),d=iE();function f(h={}){const g=(0,e.createConfig)(h),p=(0,c.createStorageClient)({config:g}),v=(0,n.createQueueClient)({config:g,storage:p}),b=(0,d.createStreamingClient)({config:g,storage:p}),x=(0,s.createRealtimeClient)({config:g});return{queue:v,realtime:x,storage:p,streaming:b,stream:b.stream,run(w){return t(this,arguments,void 0,function*(S,C={}){const N=C.input?yield p.transformInput(C.input):void 0;return(0,a.dispatchRequest)({method:C.method,targetUrl:(0,a.buildUrl)(S,C),input:N,config:Object.assign(Object.assign({},g),{responseHandler:l.resultResponseHandler}),options:{signal:C.abortSignal,retry:{maxRetries:3,baseDelay:500,maxDelay:15e3}}})})},subscribe:(w,S)=>t(this,void 0,void 0,function*(){const{request_id:C}=yield v.submit(w,S);return S.onEnqueue&&S.onEnqueue(C),yield v.subscribeToStatus(w,Object.assign({requestId:C},S)),v.result(w,{requestId:C})})}}return Ca}var il={},lw;function Dk(){if(lw)return il;lw=1,Object.defineProperty(il,"__esModule",{value:!0}),il.isQueueStatus=t,il.isCompletedQueueStatus=e;function t(n){return n&&n.status&&n.response_url}function e(n){return t(n)&&n.status==="COMPLETED"}return il}var cw;function Uk(){return cw||(cw=1,(function(t){var e=li&&li.__createBinding||(Object.create?(function(h,g,p,v){v===void 0&&(v=p);var b=Object.getOwnPropertyDescriptor(g,p);(!b||("get"in b?!g.__esModule:b.writable||b.configurable))&&(b={enumerable:!0,get:function(){return g[p]}}),Object.defineProperty(h,v,b)}):(function(h,g,p,v){v===void 0&&(v=p),h[v]=g[p]})),n=li&&li.__exportStar||function(h,g){for(var p in h)p!=="default"&&!Object.prototype.hasOwnProperty.call(g,p)&&e(g,h,p)};Object.defineProperty(t,"__esModule",{value:!0}),t.fal=t.parseEndpointId=t.isRetryableError=t.ValidationError=t.ApiError=t.withProxy=t.withMiddleware=t.createFalClient=void 0;const s=ow();var a=ow();Object.defineProperty(t,"createFalClient",{enumerable:!0,get:function(){return a.createFalClient}});var l=rE();Object.defineProperty(t,"withMiddleware",{enumerable:!0,get:function(){return l.withMiddleware}}),Object.defineProperty(t,"withProxy",{enumerable:!0,get:function(){return l.withProxy}});var c=Oi();Object.defineProperty(t,"ApiError",{enumerable:!0,get:function(){return c.ApiError}}),Object.defineProperty(t,"ValidationError",{enumerable:!0,get:function(){return c.ValidationError}});var d=ef();Object.defineProperty(t,"isRetryableError",{enumerable:!0,get:function(){return d.isRetryableError}}),n(Dk(),t);var f=Ri();Object.defineProperty(t,"parseEndpointId",{enumerable:!0,get:function(){return f.parseEndpointId}}),t.fal=(function(){let g=(0,s.createFalClient)();return{config(p){g=(0,s.createFalClient)(p)},get queue(){return g.queue},get realtime(){return g.realtime},get storage(){return g.storage},get streaming(){return g.streaming},run(p,v){return g.run(p,v)},subscribe(p,v){return g.subscribe(p,v)},stream(p,v){return g.stream(p,v)}}})()})(li)),li}var uw=Uk();const gE=R.createContext({}),$k=({children:t})=>{const[e,n]=R.useState(null),[s,a]=R.useState(null),[l,c]=R.useState(!1),[d,f]=R.useState(!1),[h,g]=R.useState(""),[p,v]=R.useState(""),[b,x]=R.useState(""),[w,S]=R.useState({}),[C,N]=R.useState({}),O={user:e,setUser:n,userProfile:s,setUserProfile:a,isCollapsed:l,isProfileLoading:d,projectId:h,setProjectId:g,ep_id:p,setEpId:v,editShotId:b,setEditShotId:x,embodyCache:w,setEmbodyCache:S,deepseekProvider:C,setDeepseekProvider:N,fetchUserProfile:async()=>{if(s){console.log("");return}console.log(""),f(!0);const{data:{user:j}}=await Me.auth.getUser();if(!j)return console.error("User not authenticated"),f(!1),null;n(j);const{data:D,error:$}=await Me.from("profiles").select("*").eq("id",j.id).single();if($)return console.error("Error fetching user profile:",$.message),f(!1),null;a(D),f(!1)},updateEmbodyCache:async()=>{if(console.log(" updateEmbodyCache:",h),!h){console.error("Project ID is not set");return}const{data:j,error:D}=await Me.from("embodys").select("name,type,id,prompt").eq("project_id",parseInt(h));if(D){console.error("Error fetching embody data:",D.message);return}S(j.reduce(($,P)=>({...$,[P.id]:P}),{}))}};return _.jsx(gE.Provider,{value:O,children:t})};function Qr(){const t=R.useContext(gE);if(!t)throw new Error("useGlobal must be used within a GlobalProvider");return t}function Ik(){const{user:t,userProfile:e,fetchUserProfile:n,projectId:s,setProjectId:a,setEpId:l,updateEmbodyCache:c}=Qr(),d=Is();R.useEffect(()=>{n(),Qt.on("StartEditorMode",()=>{f(!0)}),Qt.on("EndEditorMode",()=>{f(!1)}),console.log("LocalStorage:",localStorage.getItem("projectId")),localStorage.getItem("projectId")&&a(localStorage.getItem("projectId")),localStorage.getItem("epId")&&l(localStorage.getItem("epId"))},[]),R.useEffect(()=>{c()},[s]),f(!0);function f(g){const p=document.documentElement;g?(p.style.setProperty("--avatar-size","30px"),p.style.setProperty("--avatar-bacground-color","transparent"),p.style.setProperty("--avatar-bacground-border","none"),p.style.setProperty("--user-text-display","none")):(p.style.setProperty("--avatar-size","50px"),p.style.setProperty("--avatar-bacground-color","#2a2a2a"),p.style.setProperty("--avatar-bacground-border","1px solid #333"),p.style.setProperty("--user-text-display","block"))}function h(){e?.id?d("/profile"):d("/login")}return _.jsxs("div",{className:"user-info-container",onClick:h,children:[_.jsx("img",{src:e?.avatar_url||"./default_avatar.png",alt:"",className:"avatar"}),_.jsxs("div",{className:"user-info-text",children:[_.jsx("p",{children:e?.display_name||""}),_.jsx("p",{children:" : "+e?.gold_coins||"0"})]})]})}function Lk(){const[t,e]=R.useState(""),[n,s]=R.useState(""),[a,l]=R.useState(""),[c,d]=R.useState(!1),f=Is(),h=async g=>{g.preventDefault(),l(""),d(!0);try{const{error:p}=await Me.auth.signInWithPassword({email:t,password:n});if(p){l(p.message);return}f("/profile")}catch{l("")}finally{d(!1)}};return _.jsx("div",{className:"login-container",children:_.jsxs("div",{className:"login-form",children:[_.jsx("h2",{children:""}),a&&_.jsx("p",{className:"error-message",children:a}),_.jsxs("form",{onSubmit:h,children:[_.jsxs("div",{className:"form-group",children:[_.jsx("label",{htmlFor:"email",children:""}),_.jsx("input",{type:"email",id:"email",value:t,onChange:g=>e(g.target.value),required:!0,placeholder:""})]}),_.jsxs("div",{className:"form-group",children:[_.jsx("label",{htmlFor:"password",children:""}),_.jsx("input",{type:"password",id:"password",value:n,onChange:g=>s(g.target.value),required:!0,placeholder:""})]}),_.jsx("button",{type:"submit",disabled:c,children:c?"...":""}),_.jsx("div",{className:"register-link",children:_.jsxs("p",{children:["",_.jsx(_i,{to:"/register",children:""})]})})]})]})})}function zk(){const[t,e]=R.useState(""),[n,s]=R.useState(""),[a,l]=R.useState(""),[c,d]=R.useState(""),[f,h]=R.useState(""),[g,p]=R.useState(!1);Is();const v=async b=>{if(b.preventDefault(),d(""),h(""),!t||!n||!a){d("");return}if(n!==a){d("");return}if(n.length<6){d("6");return}p(!0);try{const{error:x}=await Me.auth.signUp({email:t,password:n});if(x){d(x.message);return}h(""),e(""),s(""),l("")}catch{d("")}finally{p(!1)}};return _.jsx("div",{className:"register-container",children:_.jsxs("div",{className:"register-form",children:[_.jsx("h2",{children:""}),c&&_.jsx("p",{className:"error-message",children:c}),f&&_.jsx("p",{className:"success-message",children:f}),_.jsxs("form",{onSubmit:v,children:[_.jsxs("div",{className:"form-group",children:[_.jsxs("label",{htmlFor:"email",children:[" ",_.jsx("span",{className:"required",children:"*"})]}),_.jsx("input",{type:"email",id:"email",value:t,onChange:b=>e(b.target.value),required:!0,placeholder:""})]}),_.jsxs("div",{className:"form-group",children:[_.jsxs("label",{htmlFor:"password",children:[" ",_.jsx("span",{className:"required",children:"*"})]}),_.jsx("input",{type:"password",id:"password",value:n,onChange:b=>s(b.target.value),required:!0,placeholder:"6"})]}),_.jsxs("div",{className:"form-group",children:[_.jsxs("label",{htmlFor:"confirmPassword",children:[" ",_.jsx("span",{className:"required",children:"*"})]}),_.jsx("input",{type:"password",id:"confirmPassword",value:a,onChange:b=>l(b.target.value),required:!0,placeholder:""})]}),_.jsx("button",{type:"submit",disabled:g,children:g?"...":""}),_.jsx("div",{className:"login-link",children:_.jsxs("p",{children:["",_.jsx(_i,{to:"/login",children:""})]})})]})]})})}function Bk({children:t}){return _.jsx("div",{className:"main-panel-header",children:t})}function Pk(){const{user:t,userProfile:e,fetchUserProfile:n,projectId:s,setProjectId:a}=Qr(),[l,c]=R.useState(!1),[d,f]=R.useState(""),[h,g]=R.useState(""),[p,v]=R.useState(!1),[b,x]=R.useState(""),[w,S]=R.useState(""),[C,N]=R.useState([]),[E,A]=R.useState(!0),O=Is(),j=()=>{$(),c(!0)},D=()=>{$(),c(!1)},$=()=>{f(""),g(""),x(""),S("")},P=()=>d.trim()?d.trim().length>50?(x("50"),!1):h.trim().length>200?(x("200"),!1):!0:(x(""),!1),K=()=>{e&&(A(!0),Me.from("projects").select("*").eq("team_id",e?.team_id||null).then(({data:k,error:z})=>{if(A(!1),z){console.error(":",z),x("");return}console.log("projects ",k),N(k)}))},G=async()=>{if(x(""),!!P())try{v(!0);const{error:k}=await Me.from("projects").insert({name:d.trim(),description:h.trim(),user_id:t?.id,team_id:e?.team_id||null});if(k){console.error(":",k),x(""+k.message);return}await K(),S(""),D()}catch(k){x(""+k.message),console.error(":",k.message)}finally{v(!1)}};R.useEffect(()=>{K()},[e]);const L=k=>{k.key==="Enter"&&!k.shiftKey&&(k.preventDefault(),G())},W=k=>{console.log("set project id ",k.id),a(k.id),Qt.emit("StartEditorMode"),localStorage.setItem("projectId",k.id),O("/editor")},I=(k,z)=>{k.stopPropagation(),globalData.projectId=z.id,localStorage.setItem("projectId",z.id),O("/editor"),Qt.emit("StartEditorMode")},Y=(k,z)=>{k.stopPropagation(),window.confirm(`"${z.project_name}"`)&&(console.log(":",z.project_name),Me.from("projects").delete().eq("id",z.id).then(({error:V})=>{if(V){console.error(":",V),x("");return}K(),S("")}))};return _.jsxs("div",{children:[_.jsx(Bk,{children:_.jsx("h2",{children:""})}),_.jsx("div",{className:"main-panel-buttons",children:_.jsx("button",{onClick:j,children:""})}),_.jsx("div",{className:`main-panel-content ${C.length===0?"empty":""}`,children:C.length>0?C.map(k=>_.jsxs("div",{className:"project-item",onClick:()=>W(k),children:[_.jsxs("div",{className:"project-item-content",children:[_.jsx("h4",{children:k.name}),_.jsx("p",{children:k.description})]}),_.jsxs("div",{className:"project-actions",children:[_.jsx("button",{className:"edit-button",onClick:z=>I(z,k),title:"",children:""}),_.jsx("button",{className:"delete-button",onClick:z=>Y(z,k),title:"",children:""})]})]},k.id)):E&&_.jsx("div",{className:"loading",children:"..."})}),l&&_.jsx("div",{className:"create-panel-overlay",onClick:D,children:_.jsxs("div",{className:"create-panel",onClick:k=>k.stopPropagation(),children:[_.jsxs("div",{className:"create-panel-header",children:[_.jsx("h3",{children:""}),_.jsx("button",{className:"close-button",onClick:D,disabled:p,children:""})]}),_.jsxs("div",{className:"create-panel-content",children:[b&&_.jsx("div",{className:"error-message",children:b}),w&&_.jsx("div",{className:"success-message",children:w}),_.jsx("input",{type:"text",placeholder:"",className:"story-name-input",value:d,onChange:k=>f(k.target.value),onKeyPress:L,disabled:p||!!w}),_.jsx("textarea",{placeholder:"",className:"story-description-input",value:h,onChange:k=>g(k.target.value),onKeyPress:L,disabled:p||!!w}),_.jsxs("div",{className:"char-count",children:[_.jsxs("span",{children:[": ",d.length,"/50"]}),_.jsxs("span",{children:[": ",h.length,"/200"]})]})]}),_.jsxs("div",{className:"create-panel-footer",children:[_.jsx("button",{className:"cancel-button",onClick:D,disabled:p,children:""}),_.jsxs("button",{className:"confirm-button",onClick:G,disabled:p||!!w,children:[p&&_.jsx("span",{className:"loading-spinner"}),p?"...":""]})]})]})})]})}function qk(){const{user:t,userProfile:e,isProfileLoading:n,fetchUserProfile:s}=Qr(),[a,l]=R.useState(!1),[c,d]=R.useState(!1),[f,h]=R.useState(""),[g,p]=R.useState(!1),[v,b]=R.useState(""),[x,w]=R.useState("./default_avatar.png"),[S,C]=R.useState(!1),[N,E]=R.useState([]),[A,O]=R.useState(""),[j,D]=R.useState(""),[$,P]=R.useState(""),[K,G]=R.useState(!1),[L,W]=R.useState("list"),I=Is();R.useEffect(()=>{e||s()},[]),R.useEffect(()=>{Y(),e?.avatar_url&&w(e.avatar_url)},[e]);const Y=async()=>{if(!e?.team_id){O("");return}try{const{data:ae,error:le}=await Me.from("teams").select("name").eq("id",e.team_id).single();le?(console.error("Error fetching team name:",le.message),O("")):O(ae.name)}catch(ae){console.error("Error in fetchTeamName:",ae),O("")}},k=async()=>{try{await Me.auth.signOut(),I("/")}catch(ae){console.error(":",ae)}},z=async()=>{try{const{data:ae,error:le}=await Me.from("teams").select("id, name").contains("members",[t.id]);if(le)throw le;E(ae||[])}catch(ae){console.error(":",ae),P("")}},V=()=>{z(),P(""),O(""),D(""),W("list"),d(!0)},q=()=>{d(!1),P("")},H=async()=>{if(!A.trim()){P("");return}if(A.length>20){P("20");return}G(!0),P("");try{const{data:ae,error:le}=await Me.from("teams").insert({name:A.trim(),create_by:t.id,members:[t.id]}).select("id, name");if(le)throw le;console.log("newTeam",ae),E(Z=>[...Z,ae[0]]),O(""),P("","success"),W("list")}catch(ae){console.error(":",ae),P("")}finally{G(!1)}},M=async()=>{if(!j.trim()){P("");return}G(!0),P("");try{if(await new Promise(ae=>setTimeout(ae,1e3)),j==="INVITE1"){const ae={id:Date.now().toString(),name:"",code:j};E(le=>[...le,ae]),D(""),P("","success"),W("list")}else P("")}catch(ae){console.error(":",ae),P("")}finally{G(!1)}},B=async ae=>{G(!0);try{const{error:le}=await Me.from("profiles").update({team_id:ae.id}).eq("id",t.id);if(le)throw le;q(),Qt.emit("updateProfile")}catch(le){console.error(":",le),P("")}finally{G(!1)}},Q=()=>{h(profile?.display_name||""),b(""),l(!0)},ee=()=>{l(!1),b("")},he=async ae=>{const le=ae.target.files[0];if(!le)return;if(!["image/jpeg","image/png","image/gif","image/webp"].includes(le.type)){alert("JPG, PNG, GIF, WebP");return}if(le.size>5*1024*1024){alert("5MB");return}C(!0);try{const fe=`${Date.now()}${le.name.slice(le.name.lastIndexOf("."))}`;console.log("avatar filename = ",fe);const{error:pe}=await Me.storage.from("avatars").upload(`${t.id}/${fe}`,le,{cacheControl:"3600",upsert:!1});if(pe)throw pe;const{data:ve}=Me.storage.from("avatars").getPublicUrl(`${t.id}/${fe}`);console.log("avatar url = ",ve.publicUrl),w(ve.publicUrl);const{error:be}=await Me.from("profiles").update({avatar_url:ve.publicUrl}).eq("id",t.id);be&&console.log("update error = ",be)}catch(fe){console.error(":",fe),alert("")}finally{C(!1),ae.target.value=""}},ge=async()=>{if(!f.trim()){b("");return}if(f.length>10){b("10");return}p(!0),b("");try{const{error:ae}=await Me.from("profiles").update({display_name:f.trim()}).eq("id",t.id);if(ae){console.error(":",ae),b("");return}Qt.emit("updateProfile"),ee()}catch(ae){console.error(":",ae),b("")}finally{p(!1)}};return n?_.jsx("div",{className:"loading",children:"..."}):_.jsxs("div",{className:"profile-container",children:[_.jsxs("div",{className:"profile-header",children:[_.jsx("h1",{children:""}),_.jsx("button",{className:"logout-button",onClick:k,children:""})]}),_.jsx("div",{className:"profile-info",children:_.jsxs("div",{className:"info-section",children:[_.jsx("h2",{children:""}),_.jsxs("div",{className:"avatar-container",onClick:()=>document.getElementById("avatar-upload").click(),children:[S&&_.jsx("div",{className:"avatar-upload-overlay",children:_.jsx("span",{children:"..."})}),_.jsx("img",{src:x||"./default_avatar.png",alt:"",className:"avatar"}),_.jsx("div",{className:"avatar-hint",children:""}),_.jsx("input",{type:"file",id:"avatar-upload",accept:"image/*",style:{display:"none"},onChange:he})]}),_.jsxs("div",{className:"info-item",children:[_.jsx("span",{className:"label",children:""}),_.jsx("span",{className:"value",children:e?.display_name||""}),_.jsx("button",{className:"",onClick:Q,children:""})]}),_.jsxs("div",{className:"info-item",children:[_.jsx("span",{className:"label",children:""}),_.jsx("span",{className:"value",children:e?.gold_coins||"0"}),_.jsx("button",{className:"",children:""})]}),_.jsxs("div",{className:"info-item",children:[_.jsx("span",{className:"label",children:""}),_.jsx("span",{className:"value",children:t?.email||""})]}),_.jsxs("div",{className:"info-item",children:[_.jsx("span",{className:"label",children:""}),_.jsx("span",{className:"value",children:A}),_.jsx("button",{className:"team-switch-button",onClick:V,children:""})]}),_.jsxs("div",{className:"info-item",children:[_.jsx("span",{className:"label",children:""}),_.jsx("span",{className:"value",children:t?.created_at?new Date(t.created_at).toLocaleString():""})]})]})}),a&&_.jsx("div",{className:"modal-overlay",onClick:ee,children:_.jsxs("div",{className:"modal-content",onClick:ae=>ae.stopPropagation(),children:[_.jsxs("div",{className:"modal-header",children:[_.jsx("h3",{children:""}),_.jsx("button",{className:"close-button",onClick:ee,children:""})]}),_.jsxs("div",{className:"modal-body",children:[v&&_.jsx("p",{className:"error-message",children:v}),_.jsxs("div",{className:"form-group",children:[_.jsx("label",{htmlFor:"displayName",children:""}),_.jsx("input",{type:"text",id:"displayName",value:f,onChange:ae=>h(ae.target.value),placeholder:"",maxLength:50})]})]}),_.jsxs("div",{className:"modal-footer",children:[_.jsx("button",{className:"cancel-button",onClick:ee,children:""}),_.jsx("button",{className:"save-button",onClick:ge,disabled:g,children:g?"...":""})]})]})}),c&&_.jsx("div",{className:"modal-overlay",onClick:q,children:_.jsxs("div",{className:"team-modal-content",onClick:ae=>ae.stopPropagation(),children:[_.jsxs("div",{className:"modal-header",children:[_.jsx("h3",{children:""}),_.jsx("button",{className:"close-button",onClick:q,children:""})]}),_.jsxs("div",{className:"team-modal-tabs",children:[_.jsx("button",{className:`team-tab-button ${L==="list"?"active":""}`,onClick:()=>W("list"),children:""}),_.jsx("button",{className:`team-tab-button ${L==="create"?"active":""}`,onClick:()=>W("create"),children:""}),_.jsx("button",{className:`team-tab-button ${L==="join"?"active":""}`,onClick:()=>W("join"),children:""})]}),_.jsxs("div",{className:"modal-body",children:[$&&_.jsx("p",{className:`${$.includes("")?"success-message":"error-message"}`,children:$}),L==="list"&&_.jsx("div",{className:"team-list",children:N.length===0?_.jsx("p",{className:"empty-message",children:""}):N.map(ae=>_.jsxs("div",{className:"team-item",children:[_.jsx("div",{className:"team-info",children:_.jsx("h4",{children:ae.name})}),_.jsx("button",{className:"switch-team-button",onClick:()=>B(ae),disabled:K,children:K?"...":""})]},ae.id))}),L==="create"&&_.jsxs("div",{className:"create-team-form",children:[_.jsxs("div",{className:"form-group",children:[_.jsx("label",{htmlFor:"teamName",children:""}),_.jsx("input",{type:"text",id:"teamName",value:A,onChange:ae=>O(ae.target.value),placeholder:"",maxLength:20,disabled:K})]}),_.jsx("p",{className:"form-hint",children:""})]}),L==="join"&&_.jsxs("div",{className:"join-team-form",children:[_.jsxs("div",{className:"form-group",children:[_.jsx("label",{htmlFor:"teamCode",children:"ID"}),_.jsx("input",{type:"text",id:"teamCode",value:j,onChange:ae=>D(ae.target.value.toUpperCase()),placeholder:"ID",disabled:K})]}),_.jsx("p",{className:"form-hint",children:""})]})]}),_.jsxs("div",{className:"modal-footer",children:[L!=="list"&&_.jsx("button",{className:"action-button",onClick:L==="create"?H:M,disabled:K,children:K?"...":L==="create"?"":""}),_.jsx("button",{className:"cancel-button",onClick:q,children:""})]})]})})]})}function Hk(){const{user:t,userProfile:e}=Qr();return _.jsxs("div",{className:"home-page",children:[_.jsx("h1",{children:""}),_.jsx("p",{children:t?`: ${t.email}`:""})]})}function ld({id:t,type:e,name:n,pic:s,description:a,onEdit:l,onDelete:c}){const[d,f]=R.useState(""),h={scene:"",character:"",item:""};return R.useEffect(()=>{s&&s.length>0?f(gi+s[0].path):f("https://gsyznlwsezhwerypyzbe.supabase.co/storage/v1/object/public/embodys/public/Common/no_pic.png"),console.log("EmbodyCard imagePath:",d)},[s]),_.jsx(_.Fragment,{children:_.jsxs("div",{className:"embody-card",onClick:()=>l&&l(t),children:[_.jsx("div",{className:"embody-card-image",children:s?_.jsx("img",{src:d,alt:n}):_.jsx("div",{className:"placeholder-image",children:h[e]})}),_.jsx("p",{className:"embody-card-title",children:n}),_.jsx("button",{className:"embody-delete-btn card-action-btn delete-btn",onClick:()=>c&&c(t),title:"",children:"x"})]})})}function Vk(){const{projectId:t,ep_id:e,embodyCache:n,editShotId:s,setEditShotId:a}=Qr(),[l,c]=R.useState([]),[d,f]=R.useState({}),[h,g]=R.useState({}),[p,v]=R.useState({}),[b,x]=R.useState({}),[w,S]=R.useState(null),[C,N]=R.useState(null),[E,A]=R.useState(""),[O,j]=R.useState(null),[D,$]=R.useState([]);R.useRef(null);const[P,K]=R.useState([]),[G,L]=R.useState(""),[W,I]=R.useState(""),[Y,k]=R.useState(!1),[z,V]=R.useState([]),[q,H]=R.useState(""),[M,B]=R.useState([]),[Q,ee]=R.useState({}),[he,ge]=R.useState(!1),[ae,le]=R.useState(null),[Z,fe]=R.useState(null),[pe,ve]=R.useState(""),[be,De]=R.useState(""),oe=async()=>{Me.from("movie_eps").select("title,index").eq("id",e).single().then(({data:we,error:Ue})=>{if(Ue){console.error("EP:",Ue);return}L(we.title||`EP ${we.index||""}`),I(we.index||"")});const{data:me,error:Ee}=await Me.from("movie_scs").select(`
        *,
        movie_seqs(
          *,
          movie_shots(
            *
          )
        ).order(index, ascending) 
      `).order("index",{ascending:!0}).eq("ep_id",e);if(Ee){console.error(":",Ee);return}console.log(":",me),me.forEach(we=>{we.movie_seqs.forEach(Ue=>{Ue.movie_shots.sort((gt,Dt)=>gt.index-Dt.index),Ue.movie_shots.forEach(gt=>{d[gt.id]=gt})})}),K(me)};R.useEffect(()=>{e&&oe()},[e]);const _e=me=>{const Ee={seq_id:me,description:"",prompt:"",embodys:[]};console.log("newShot",Ee),Me.from("movie_shots").insert(Ee).then(({data:we,error:Ue})=>{if(Ue){console.error(":",Ue);return}console.log(":",we),oe()})},Le=me=>{a(me),console.log(":",me),Qt.emit("changeEditorMode","edit")},Je=me=>{window.confirm(""+me)&&Me.from("movie_seqs").delete().eq("id",me).then(({data:Ee,error:we})=>{if(we){console.error(":",we);return}console.log(":",Ee),oe()})};function st(me,Ee){console.log(":",me,Ee),N(me),A(Ee);const we=d[me][Ee]||"";if(console.log(we),j(we),Ee==="embodys"){var Ue=[];we.forEach(gt=>{n[gt]?Ue.push(n[gt]):console.error("ID:",gt)}),console.log("emlist",Ue),$(Ue)}}const It=me=>({character:"#3498db",item:"#2ecc71",scene:"#e74c3c",:"#f39c12",:"#9b59b6"})[me]||"#95a5a6",pt=me=>!me||me===""||me===""||!Array.isArray(me)||me.length===0?"":me.map((we,Ue)=>{if(n&&n[we]){const gt=n[we],Dt=It(gt.type);return _.jsxs("span",{style:{marginRight:"8px"},children:[_.jsx("span",{style:{color:Dt,fontWeight:"bold",marginRight:"2px"},children:gt.name}),Ue<me.length-1&&", "]},we)}else return console.log("ID:",we),_.jsxs("span",{style:{marginRight:"8px",color:"#999"},children:["",Ue<me.length-1&&", "]},we)}),hn=me=>{B(Ee=>Ee.includes(me)?Ee.filter(we=>we!==me):[...Ee,me])},Jt=()=>{const me=z.filter(Ue=>M.includes(Ue.id)),Ee=new Set(D.map(Ue=>Ue.name)),we=me.filter(Ue=>!Ee.has(Ue.name)).map(Ue=>({id:Ue.id,name:Ue.name,type:Ue.type}));console.log(":",we),$(Ue=>[...Ue,...we]),k(!1),B([]),H("")},ct=async me=>{if(me.preventDefault(),n){const Ee=Object.values(n);V(Ee),console.log("embodyCache:",Ee.length)}else console.warn("embodyCache"),V([]);k(!0)},mn=me=>{const Ee=[...D];Ee.splice(me,1),$(Ee)},pn=()=>{},tn=me=>{window.confirm(""+me)&&Me.from("movie_shots").delete().eq("id",me).then(({data:Ee,error:we})=>{if(we){console.error(":",we);return}console.log(":",Ee),oe()})},jn=me=>{window.confirm(""+me)&&Me.from("movie_scs").delete().eq("id",me).then(({data:Ee,error:we})=>{if(we){console.error(":",we);return}console.log(":",Ee),oe()})},vr=(me,Ee)=>{le(me),fe(Ee),ve(""),De(""),ge(!0)},Jr=async()=>{if(!pe.trim()){alert("");return}try{const{data:me,error:Ee}=await Me.from("movie_seqs").select("index").eq("sc_id",ae).order("index",{ascending:!1}).limit(1);let we=1;!Ee&&me&&me.length>0&&(we=me[0].index+1);const Ue={sc_id:ae,name:pe.trim(),index:we},{data:gt,error:Dt}=await Me.from("movie_seqs").insert(Ue);if(Dt){console.error(":",Dt),alert("");return}console.log(":",gt),oe(),ge(!1)}catch(me){console.error(":",me),alert("")}},Bs=async()=>{if(!C||!E){console.error("");return}try{let me=O;if(console.log(O),E==="embodys"){const gt=(Array.isArray(D)?D:[]).filter(Dt=>Dt&&Dt.id);me=gt.map(Dt=>Dt.id),console.log(":",gt)}const{data:Ee,error:we}=await Me.from("movie_shots").update({[E]:me}).eq("id",C);if(we){console.error(":",we),alert("");return}d[C]&&(d[C][E]=me,f({...d})),await oe()}catch(me){console.error(":",me),alert("")}finally{N(null),A(null),j(""),$([])}},to=async()=>{try{const{data:me,error:Ee}=await Me.from("movie_scs").select("index").eq("ep_id",e).order("index",{ascending:!1}).limit(1);let we=1;!Ee&&me&&me.length>0&&(we=me[0].index+1);const Ue={ep_id:e,name:"",index:we},{data:gt,error:Dt}=await Me.from("movie_scs").insert(Ue);if(Dt){console.error(":",Dt),alert("");return}console.log(":",gt),oe()}catch(me){console.error(":",me),alert("")}};return _.jsxs("div",{className:"editor-shots-content",children:[_.jsxs("div",{className:"editor-shots-header",children:[_.jsxs("h3",{className:"ep-number",children:[" ",W,"   -  ",G]}),_.jsx("button",{className:"add-sc-button",onClick:to,children:""})]}),_.jsx("div",{className:"editor-shots-container-left",children:P.map(me=>_.jsxs("div",{className:"sc-card",children:[_.jsxs("div",{className:"sc-card-header",children:[_.jsxs("h3",{className:"sc-name",children:["",me.index,"-",me.name]}),_.jsx("button",{className:"add-seq-button",title:"",onClick:()=>jn(me.id),children:"-"}),_.jsx("button",{className:"add-seq-button",title:"",onClick:()=>vr(me.id,me.index),children:"+"})]}),_.jsx("div",{className:"sc-seqs",children:me.movie_seqs.map(Ee=>_.jsxs("div",{className:"seq-item",children:[_.jsxs("div",{className:"seq-item-header",children:[_.jsx("p",{className:"seq-item-name",children:Ee.name}),_.jsx("button",{className:"add-shot-button",title:"",onClick:()=>Je(Ee.id),children:"-"}),_.jsx("button",{className:"add-shot-button",title:"",onClick:()=>_e(Ee.id),children:"+"})]}),_.jsx("div",{className:"seq-shots",children:_.jsxs("table",{className:"shot-table",children:[_.jsx("thead",{children:_.jsxs("tr",{children:[_.jsx("th",{children:""}),_.jsx("th",{children:""}),_.jsx("th",{children:""}),_.jsx("th",{children:""}),_.jsx("th",{children:""}),_.jsx("th",{children:""})]})}),_.jsx("tbody",{children:Ee.movie_shots.map((we,Ue)=>_.jsxs("tr",{className:"shot-item",children:[_.jsx("td",{children:we.index}),_.jsx("td",{children:we.pic?_.jsx("img",{src:we.pic,alt:we.descript||"./shot_thumb_default.png",style:{width:"50px",height:"50px"}}):_.jsx("img",{src:"./shot_thumb_default.png",alt:"",style:{width:"60px",height:"50px"}})}),_.jsx("td",{onClick:()=>st(we.id,"description"),style:{cursor:"pointer"},children:we.description||""}),_.jsx("td",{onClick:()=>st(we.id,"prompt"),style:{cursor:"pointer"},children:we.prompt||""}),_.jsx("td",{onClick:()=>st(we.id,"embodys"),style:{cursor:"pointer"},children:pt(we.embodys)}),_.jsxs("td",{className:"shot-action-buttons",children:[_.jsx("button",{onClick:()=>Le(we.id),title:"",className:"op-button op-edit-button",children:""}),_.jsx("button",{onClick:()=>tn(we.id),title:"",className:"op-button op-delete-button",children:""})]})]},we.id))})]})})]},Ee.id))})]},me.index))}),_.jsxs("div",{className:"editor-shots-container-right",style:{display:C?"block":"none"},children:[E==="description"&&_.jsxs("div",{className:"right-edit-field",children:[_.jsx("label",{children:":"}),_.jsx("textarea",{className:"edit-field-textarea",value:O,onChange:me=>j(me.target.value)}),_.jsxs("div",{className:"edit-button-container",children:[_.jsx("button",{className:"expand-button",onClick:pn,children:""}),_.jsx("button",{className:"save-button",onClick:Bs,children:""})]})]}),E==="prompt"&&_.jsxs("div",{className:"right-edit-field",children:[_.jsx("label",{children:":"}),_.jsx("textarea",{className:"edit-field-textarea",value:O,onChange:me=>j(me.target.value)}),_.jsxs("div",{className:"edit-button-container",children:[_.jsx("button",{className:"expand-button",onClick:pn,children:""}),_.jsx("button",{className:"save-button",onClick:Bs,children:""})]})]}),E==="embodys"&&_.jsxs("div",{className:"right-edit-field",children:[_.jsx("label",{children:":"}),_.jsx("div",{className:"embodys-list-container",children:_.jsx("div",{className:"embodys-list",children:D.map((me,Ee)=>_.jsxs("div",{className:"embodys-item",children:[_.jsx("span",{className:"embodys-name",children:me.name}),_.jsx("span",{className:"embodys-type",children:me.type}),_.jsx("button",{className:"delete-embodys-item",onClick:()=>mn(Ee),children:""})]},Ee))})}),_.jsxs("div",{className:"edit-button-container",children:[_.jsx("button",{className:"add-embodys-button",onClick:ct,children:""}),_.jsx("button",{className:"save-button",onClick:Bs,children:""})]})]})]}),he&&_.jsx("div",{className:"modal-overlay",children:_.jsxs("div",{className:"modal-content",children:[_.jsxs("div",{className:"modal-header",children:[_.jsx("h3",{children:""}),_.jsx("button",{className:"modal-close",onClick:()=>ge(!1),children:""})]}),_.jsx("div",{className:"modal-body",children:_.jsxs("div",{className:"form-group",children:[_.jsx("label",{children:":"}),_.jsx("input",{type:"text",value:pe,onChange:me=>ve(me.target.value),placeholder:"",className:"modal-input"})]})}),_.jsxs("div",{className:"modal-footer",children:[_.jsx("button",{className:"modal-cancel",onClick:()=>ge(!1),children:""}),_.jsx("button",{className:"modal-confirm",onClick:Jr,children:""})]})]})}),Y&&_.jsx("div",{className:"modal-overlay",children:_.jsxs("div",{className:"modal-content embody-select-modal",children:[_.jsxs("div",{className:"modal-header",children:[_.jsx("h3",{children:""}),_.jsx("button",{className:"modal-close",onClick:()=>{k(!1),B([]),H("")},children:""})]}),_.jsxs("div",{className:"modal-body",children:[_.jsxs("div",{className:"form-group",children:[_.jsx("label",{children:":"}),_.jsx("input",{type:"text",value:q,onChange:me=>H(me.target.value),placeholder:"",className:"modal-input"})]}),_.jsxs("div",{className:"embodys-select-list card-view",children:[z.filter(me=>me.name.toLowerCase().includes(q.toLowerCase())||me.description?.toLowerCase().includes(q.toLowerCase())).map(me=>_.jsxs("div",{className:`embody-card-wrapper ${M.includes(me.id)?"selected":""}`,onClick:Ee=>{Ee.stopPropagation(),hn(me.id)},children:[_.jsx(ld,{id:me.id,type:me.type,name:me.name,pic:me.pic,description:me.description,onEdit:()=>{},onDelete:()=>{}}),M.includes(me.id)&&_.jsx("div",{className:"card-select-indicator",children:""})]},me.id)),z.filter(me=>me.name.toLowerCase().includes(q.toLowerCase())||me.description?.toLowerCase().includes(q.toLowerCase())).length===0&&_.jsx("p",{className:"no-results",children:""})]})]}),_.jsxs("div",{className:"modal-footer",children:[_.jsx("button",{className:"modal-cancel",onClick:()=>{k(!1),B([]),H("")},children:""}),_.jsxs("button",{className:"modal-confirm",onClick:Jt,disabled:M.length===0,children:[" (",M.length,")"]})]})]})})]})}function Nt(t){if(typeof t=="string"||typeof t=="number")return""+t;let e="";if(Array.isArray(t))for(let n=0,s;n<t.length;n++)(s=Nt(t[n]))!==""&&(e+=(e&&" ")+s);else for(let n in t)t[n]&&(e+=(e&&" ")+n);return e}var Fk={value:()=>{}};function nf(){for(var t=0,e=arguments.length,n={},s;t<e;++t){if(!(s=arguments[t]+"")||s in n||/[\s.]/.test(s))throw new Error("illegal type: "+s);n[s]=[]}return new cd(n)}function cd(t){this._=t}function Yk(t,e){return t.trim().split(/^|\s+/).map(function(n){var s="",a=n.indexOf(".");if(a>=0&&(s=n.slice(a+1),n=n.slice(0,a)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:s}})}cd.prototype=nf.prototype={constructor:cd,on:function(t,e){var n=this._,s=Yk(t+"",n),a,l=-1,c=s.length;if(arguments.length<2){for(;++l<c;)if((a=(t=s[l]).type)&&(a=Gk(n[a],t.name)))return a;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++l<c;)if(a=(t=s[l]).type)n[a]=dw(n[a],t.name,e);else if(e==null)for(a in n)n[a]=dw(n[a],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new cd(t)},call:function(t,e){if((a=arguments.length-2)>0)for(var n=new Array(a),s=0,a,l;s<a;++s)n[s]=arguments[s+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(l=this._[t],s=0,a=l.length;s<a;++s)l[s].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var s=this._[t],a=0,l=s.length;a<l;++a)s[a].value.apply(e,n)}};function Gk(t,e){for(var n=0,s=t.length,a;n<s;++n)if((a=t[n]).name===e)return a.value}function dw(t,e,n){for(var s=0,a=t.length;s<a;++s)if(t[s].name===e){t[s]=Fk,t=t.slice(0,s).concat(t.slice(s+1));break}return n!=null&&t.push({name:e,value:n}),t}var Bp="http://www.w3.org/1999/xhtml";const fw={svg:"http://www.w3.org/2000/svg",xhtml:Bp,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function rf(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),fw.hasOwnProperty(e)?{space:fw[e],local:t}:t}function Xk(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===Bp&&e.documentElement.namespaceURI===Bp?e.createElement(t):e.createElementNS(n,t)}}function Kk(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function yE(t){var e=rf(t);return(e.local?Kk:Xk)(e)}function Qk(){}function kg(t){return t==null?Qk:function(){return this.querySelector(t)}}function Wk(t){typeof t!="function"&&(t=kg(t));for(var e=this._groups,n=e.length,s=new Array(n),a=0;a<n;++a)for(var l=e[a],c=l.length,d=s[a]=new Array(c),f,h,g=0;g<c;++g)(f=l[g])&&(h=t.call(f,f.__data__,g,l))&&("__data__"in f&&(h.__data__=f.__data__),d[g]=h);return new Rn(s,this._parents)}function Jk(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function Zk(){return[]}function vE(t){return t==null?Zk:function(){return this.querySelectorAll(t)}}function eM(t){return function(){return Jk(t.apply(this,arguments))}}function tM(t){typeof t=="function"?t=eM(t):t=vE(t);for(var e=this._groups,n=e.length,s=[],a=[],l=0;l<n;++l)for(var c=e[l],d=c.length,f,h=0;h<d;++h)(f=c[h])&&(s.push(t.call(f,f.__data__,h,c)),a.push(f));return new Rn(s,a)}function bE(t){return function(){return this.matches(t)}}function _E(t){return function(e){return e.matches(t)}}var nM=Array.prototype.find;function rM(t){return function(){return nM.call(this.children,t)}}function sM(){return this.firstElementChild}function iM(t){return this.select(t==null?sM:rM(typeof t=="function"?t:_E(t)))}var aM=Array.prototype.filter;function oM(){return Array.from(this.children)}function lM(t){return function(){return aM.call(this.children,t)}}function cM(t){return this.selectAll(t==null?oM:lM(typeof t=="function"?t:_E(t)))}function uM(t){typeof t!="function"&&(t=bE(t));for(var e=this._groups,n=e.length,s=new Array(n),a=0;a<n;++a)for(var l=e[a],c=l.length,d=s[a]=[],f,h=0;h<c;++h)(f=l[h])&&t.call(f,f.__data__,h,l)&&d.push(f);return new Rn(s,this._parents)}function wE(t){return new Array(t.length)}function dM(){return new Rn(this._enter||this._groups.map(wE),this._parents)}function Od(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}Od.prototype={constructor:Od,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function fM(t){return function(){return t}}function hM(t,e,n,s,a,l){for(var c=0,d,f=e.length,h=l.length;c<h;++c)(d=e[c])?(d.__data__=l[c],s[c]=d):n[c]=new Od(t,l[c]);for(;c<f;++c)(d=e[c])&&(a[c]=d)}function mM(t,e,n,s,a,l,c){var d,f,h=new Map,g=e.length,p=l.length,v=new Array(g),b;for(d=0;d<g;++d)(f=e[d])&&(v[d]=b=c.call(f,f.__data__,d,e)+"",h.has(b)?a[d]=f:h.set(b,f));for(d=0;d<p;++d)b=c.call(t,l[d],d,l)+"",(f=h.get(b))?(s[d]=f,f.__data__=l[d],h.delete(b)):n[d]=new Od(t,l[d]);for(d=0;d<g;++d)(f=e[d])&&h.get(v[d])===f&&(a[d]=f)}function pM(t){return t.__data__}function gM(t,e){if(!arguments.length)return Array.from(this,pM);var n=e?mM:hM,s=this._parents,a=this._groups;typeof t!="function"&&(t=fM(t));for(var l=a.length,c=new Array(l),d=new Array(l),f=new Array(l),h=0;h<l;++h){var g=s[h],p=a[h],v=p.length,b=yM(t.call(g,g&&g.__data__,h,s)),x=b.length,w=d[h]=new Array(x),S=c[h]=new Array(x),C=f[h]=new Array(v);n(g,p,w,S,C,b,e);for(var N=0,E=0,A,O;N<x;++N)if(A=w[N]){for(N>=E&&(E=N+1);!(O=S[E])&&++E<x;);A._next=O||null}}return c=new Rn(c,s),c._enter=d,c._exit=f,c}function yM(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function vM(){return new Rn(this._exit||this._groups.map(wE),this._parents)}function bM(t,e,n){var s=this.enter(),a=this,l=this.exit();return typeof t=="function"?(s=t(s),s&&(s=s.selection())):s=s.append(t+""),e!=null&&(a=e(a),a&&(a=a.selection())),n==null?l.remove():n(l),s&&a?s.merge(a).order():a}function _M(t){for(var e=t.selection?t.selection():t,n=this._groups,s=e._groups,a=n.length,l=s.length,c=Math.min(a,l),d=new Array(a),f=0;f<c;++f)for(var h=n[f],g=s[f],p=h.length,v=d[f]=new Array(p),b,x=0;x<p;++x)(b=h[x]||g[x])&&(v[x]=b);for(;f<a;++f)d[f]=n[f];return new Rn(d,this._parents)}function wM(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var s=t[e],a=s.length-1,l=s[a],c;--a>=0;)(c=s[a])&&(l&&c.compareDocumentPosition(l)^4&&l.parentNode.insertBefore(c,l),l=c);return this}function xM(t){t||(t=SM);function e(p,v){return p&&v?t(p.__data__,v.__data__):!p-!v}for(var n=this._groups,s=n.length,a=new Array(s),l=0;l<s;++l){for(var c=n[l],d=c.length,f=a[l]=new Array(d),h,g=0;g<d;++g)(h=c[g])&&(f[g]=h);f.sort(e)}return new Rn(a,this._parents).order()}function SM(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function EM(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function CM(){return Array.from(this)}function AM(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var s=t[e],a=0,l=s.length;a<l;++a){var c=s[a];if(c)return c}return null}function TM(){let t=0;for(const e of this)++t;return t}function NM(){return!this.node()}function OM(t){for(var e=this._groups,n=0,s=e.length;n<s;++n)for(var a=e[n],l=0,c=a.length,d;l<c;++l)(d=a[l])&&t.call(d,d.__data__,l,a);return this}function RM(t){return function(){this.removeAttribute(t)}}function jM(t){return function(){this.removeAttributeNS(t.space,t.local)}}function kM(t,e){return function(){this.setAttribute(t,e)}}function MM(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function DM(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function UM(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function $M(t,e){var n=rf(t);if(arguments.length<2){var s=this.node();return n.local?s.getAttributeNS(n.space,n.local):s.getAttribute(n)}return this.each((e==null?n.local?jM:RM:typeof e=="function"?n.local?UM:DM:n.local?MM:kM)(n,e))}function xE(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function IM(t){return function(){this.style.removeProperty(t)}}function LM(t,e,n){return function(){this.style.setProperty(t,e,n)}}function zM(t,e,n){return function(){var s=e.apply(this,arguments);s==null?this.style.removeProperty(t):this.style.setProperty(t,s,n)}}function BM(t,e,n){return arguments.length>1?this.each((e==null?IM:typeof e=="function"?zM:LM)(t,e,n??"")):qa(this.node(),t)}function qa(t,e){return t.style.getPropertyValue(e)||xE(t).getComputedStyle(t,null).getPropertyValue(e)}function PM(t){return function(){delete this[t]}}function qM(t,e){return function(){this[t]=e}}function HM(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function VM(t,e){return arguments.length>1?this.each((e==null?PM:typeof e=="function"?HM:qM)(t,e)):this.node()[t]}function SE(t){return t.trim().split(/^|\s+/)}function Mg(t){return t.classList||new EE(t)}function EE(t){this._node=t,this._names=SE(t.getAttribute("class")||"")}EE.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function CE(t,e){for(var n=Mg(t),s=-1,a=e.length;++s<a;)n.add(e[s])}function AE(t,e){for(var n=Mg(t),s=-1,a=e.length;++s<a;)n.remove(e[s])}function FM(t){return function(){CE(this,t)}}function YM(t){return function(){AE(this,t)}}function GM(t,e){return function(){(e.apply(this,arguments)?CE:AE)(this,t)}}function XM(t,e){var n=SE(t+"");if(arguments.length<2){for(var s=Mg(this.node()),a=-1,l=n.length;++a<l;)if(!s.contains(n[a]))return!1;return!0}return this.each((typeof e=="function"?GM:e?FM:YM)(n,e))}function KM(){this.textContent=""}function QM(t){return function(){this.textContent=t}}function WM(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function JM(t){return arguments.length?this.each(t==null?KM:(typeof t=="function"?WM:QM)(t)):this.node().textContent}function ZM(){this.innerHTML=""}function eD(t){return function(){this.innerHTML=t}}function tD(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function nD(t){return arguments.length?this.each(t==null?ZM:(typeof t=="function"?tD:eD)(t)):this.node().innerHTML}function rD(){this.nextSibling&&this.parentNode.appendChild(this)}function sD(){return this.each(rD)}function iD(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function aD(){return this.each(iD)}function oD(t){var e=typeof t=="function"?t:yE(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function lD(){return null}function cD(t,e){var n=typeof t=="function"?t:yE(t),s=e==null?lD:typeof e=="function"?e:kg(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),s.apply(this,arguments)||null)})}function uD(){var t=this.parentNode;t&&t.removeChild(this)}function dD(){return this.each(uD)}function fD(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function hD(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function mD(t){return this.select(t?hD:fD)}function pD(t){return arguments.length?this.property("__data__",t):this.node().__data__}function gD(t){return function(e){t.call(this,e,this.__data__)}}function yD(t){return t.trim().split(/^|\s+/).map(function(e){var n="",s=e.indexOf(".");return s>=0&&(n=e.slice(s+1),e=e.slice(0,s)),{type:e,name:n}})}function vD(t){return function(){var e=this.__on;if(e){for(var n=0,s=-1,a=e.length,l;n<a;++n)l=e[n],(!t.type||l.type===t.type)&&l.name===t.name?this.removeEventListener(l.type,l.listener,l.options):e[++s]=l;++s?e.length=s:delete this.__on}}}function bD(t,e,n){return function(){var s=this.__on,a,l=gD(e);if(s){for(var c=0,d=s.length;c<d;++c)if((a=s[c]).type===t.type&&a.name===t.name){this.removeEventListener(a.type,a.listener,a.options),this.addEventListener(a.type,a.listener=l,a.options=n),a.value=e;return}}this.addEventListener(t.type,l,n),a={type:t.type,name:t.name,value:e,listener:l,options:n},s?s.push(a):this.__on=[a]}}function _D(t,e,n){var s=yD(t+""),a,l=s.length,c;if(arguments.length<2){var d=this.node().__on;if(d){for(var f=0,h=d.length,g;f<h;++f)for(a=0,g=d[f];a<l;++a)if((c=s[a]).type===g.type&&c.name===g.name)return g.value}return}for(d=e?bD:vD,a=0;a<l;++a)this.each(d(s[a],e,n));return this}function TE(t,e,n){var s=xE(t),a=s.CustomEvent;typeof a=="function"?a=new a(e,n):(a=s.document.createEvent("Event"),n?(a.initEvent(e,n.bubbles,n.cancelable),a.detail=n.detail):a.initEvent(e,!1,!1)),t.dispatchEvent(a)}function wD(t,e){return function(){return TE(this,t,e)}}function xD(t,e){return function(){return TE(this,t,e.apply(this,arguments))}}function SD(t,e){return this.each((typeof e=="function"?xD:wD)(t,e))}function*ED(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var s=t[e],a=0,l=s.length,c;a<l;++a)(c=s[a])&&(yield c)}var NE=[null];function Rn(t,e){this._groups=t,this._parents=e}function Zl(){return new Rn([[document.documentElement]],NE)}function CD(){return this}Rn.prototype=Zl.prototype={constructor:Rn,select:Wk,selectAll:tM,selectChild:iM,selectChildren:cM,filter:uM,data:gM,enter:dM,exit:vM,join:bM,merge:_M,selection:CD,order:wM,sort:xM,call:EM,nodes:CM,node:AM,size:TM,empty:NM,each:OM,attr:$M,style:BM,property:VM,classed:XM,text:JM,html:nD,raise:sD,lower:aD,append:oD,insert:cD,remove:dD,clone:mD,datum:pD,on:_D,dispatch:SD,[Symbol.iterator]:ED};function On(t){return typeof t=="string"?new Rn([[document.querySelector(t)]],[document.documentElement]):new Rn([[t]],NE)}function AD(t){let e;for(;e=t.sourceEvent;)t=e;return t}function Zn(t,e){if(t=AD(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var s=n.createSVGPoint();return s.x=t.clientX,s.y=t.clientY,s=s.matrixTransform(e.getScreenCTM().inverse()),[s.x,s.y]}if(e.getBoundingClientRect){var a=e.getBoundingClientRect();return[t.clientX-a.left-e.clientLeft,t.clientY-a.top-e.clientTop]}}return[t.pageX,t.pageY]}const TD={passive:!1},$l={capture:!0,passive:!1};function np(t){t.stopImmediatePropagation()}function za(t){t.preventDefault(),t.stopImmediatePropagation()}function OE(t){var e=t.document.documentElement,n=On(t).on("dragstart.drag",za,$l);"onselectstart"in e?n.on("selectstart.drag",za,$l):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function RE(t,e){var n=t.document.documentElement,s=On(t).on("dragstart.drag",null);e&&(s.on("click.drag",za,$l),setTimeout(function(){s.on("click.drag",null)},0)),"onselectstart"in n?s.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const Vu=t=>()=>t;function Pp(t,{sourceEvent:e,subject:n,target:s,identifier:a,active:l,x:c,y:d,dx:f,dy:h,dispatch:g}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:s,enumerable:!0,configurable:!0},identifier:{value:a,enumerable:!0,configurable:!0},active:{value:l,enumerable:!0,configurable:!0},x:{value:c,enumerable:!0,configurable:!0},y:{value:d,enumerable:!0,configurable:!0},dx:{value:f,enumerable:!0,configurable:!0},dy:{value:h,enumerable:!0,configurable:!0},_:{value:g}})}Pp.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function ND(t){return!t.ctrlKey&&!t.button}function OD(){return this.parentNode}function RD(t,e){return e??{x:t.x,y:t.y}}function jD(){return navigator.maxTouchPoints||"ontouchstart"in this}function jE(){var t=ND,e=OD,n=RD,s=jD,a={},l=nf("start","drag","end"),c=0,d,f,h,g,p=0;function v(A){A.on("mousedown.drag",b).filter(s).on("touchstart.drag",S).on("touchmove.drag",C,TD).on("touchend.drag touchcancel.drag",N).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function b(A,O){if(!(g||!t.call(this,A,O))){var j=E(this,e.call(this,A,O),A,O,"mouse");j&&(On(A.view).on("mousemove.drag",x,$l).on("mouseup.drag",w,$l),OE(A.view),np(A),h=!1,d=A.clientX,f=A.clientY,j("start",A))}}function x(A){if(za(A),!h){var O=A.clientX-d,j=A.clientY-f;h=O*O+j*j>p}a.mouse("drag",A)}function w(A){On(A.view).on("mousemove.drag mouseup.drag",null),RE(A.view,h),za(A),a.mouse("end",A)}function S(A,O){if(t.call(this,A,O)){var j=A.changedTouches,D=e.call(this,A,O),$=j.length,P,K;for(P=0;P<$;++P)(K=E(this,D,A,O,j[P].identifier,j[P]))&&(np(A),K("start",A,j[P]))}}function C(A){var O=A.changedTouches,j=O.length,D,$;for(D=0;D<j;++D)($=a[O[D].identifier])&&(za(A),$("drag",A,O[D]))}function N(A){var O=A.changedTouches,j=O.length,D,$;for(g&&clearTimeout(g),g=setTimeout(function(){g=null},500),D=0;D<j;++D)($=a[O[D].identifier])&&(np(A),$("end",A,O[D]))}function E(A,O,j,D,$,P){var K=l.copy(),G=Zn(P||j,O),L,W,I;if((I=n.call(A,new Pp("beforestart",{sourceEvent:j,target:v,identifier:$,active:c,x:G[0],y:G[1],dx:0,dy:0,dispatch:K}),D))!=null)return L=I.x-G[0]||0,W=I.y-G[1]||0,function Y(k,z,V){var q=G,H;switch(k){case"start":a[$]=Y,H=c++;break;case"end":delete a[$],--c;case"drag":G=Zn(V||z,O),H=c;break}K.call(k,A,new Pp(k,{sourceEvent:z,subject:I,target:v,identifier:$,active:H,x:G[0]+L,y:G[1]+W,dx:G[0]-q[0],dy:G[1]-q[1],dispatch:K}),D)}}return v.filter=function(A){return arguments.length?(t=typeof A=="function"?A:Vu(!!A),v):t},v.container=function(A){return arguments.length?(e=typeof A=="function"?A:Vu(A),v):e},v.subject=function(A){return arguments.length?(n=typeof A=="function"?A:Vu(A),v):n},v.touchable=function(A){return arguments.length?(s=typeof A=="function"?A:Vu(!!A),v):s},v.on=function(){var A=l.on.apply(l,arguments);return A===l?v:A},v.clickDistance=function(A){return arguments.length?(p=(A=+A)*A,v):Math.sqrt(p)},v}function Dg(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function kE(t,e){var n=Object.create(t.prototype);for(var s in e)n[s]=e[s];return n}function ec(){}var Il=.7,Rd=1/Il,Ba="\\s*([+-]?\\d+)\\s*",Ll="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",mr="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",kD=/^#([0-9a-f]{3,8})$/,MD=new RegExp(`^rgb\\(${Ba},${Ba},${Ba}\\)$`),DD=new RegExp(`^rgb\\(${mr},${mr},${mr}\\)$`),UD=new RegExp(`^rgba\\(${Ba},${Ba},${Ba},${Ll}\\)$`),$D=new RegExp(`^rgba\\(${mr},${mr},${mr},${Ll}\\)$`),ID=new RegExp(`^hsl\\(${Ll},${mr},${mr}\\)$`),LD=new RegExp(`^hsla\\(${Ll},${mr},${mr},${Ll}\\)$`),hw={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Dg(ec,Si,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:mw,formatHex:mw,formatHex8:zD,formatHsl:BD,formatRgb:pw,toString:pw});function mw(){return this.rgb().formatHex()}function zD(){return this.rgb().formatHex8()}function BD(){return ME(this).formatHsl()}function pw(){return this.rgb().formatRgb()}function Si(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=kD.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?gw(e):n===3?new fn(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?Fu(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?Fu(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=MD.exec(t))?new fn(e[1],e[2],e[3],1):(e=DD.exec(t))?new fn(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=UD.exec(t))?Fu(e[1],e[2],e[3],e[4]):(e=$D.exec(t))?Fu(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=ID.exec(t))?bw(e[1],e[2]/100,e[3]/100,1):(e=LD.exec(t))?bw(e[1],e[2]/100,e[3]/100,e[4]):hw.hasOwnProperty(t)?gw(hw[t]):t==="transparent"?new fn(NaN,NaN,NaN,0):null}function gw(t){return new fn(t>>16&255,t>>8&255,t&255,1)}function Fu(t,e,n,s){return s<=0&&(t=e=n=NaN),new fn(t,e,n,s)}function PD(t){return t instanceof ec||(t=Si(t)),t?(t=t.rgb(),new fn(t.r,t.g,t.b,t.opacity)):new fn}function qp(t,e,n,s){return arguments.length===1?PD(t):new fn(t,e,n,s??1)}function fn(t,e,n,s){this.r=+t,this.g=+e,this.b=+n,this.opacity=+s}Dg(fn,qp,kE(ec,{brighter(t){return t=t==null?Rd:Math.pow(Rd,t),new fn(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Il:Math.pow(Il,t),new fn(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new fn(wi(this.r),wi(this.g),wi(this.b),jd(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:yw,formatHex:yw,formatHex8:qD,formatRgb:vw,toString:vw}));function yw(){return`#${yi(this.r)}${yi(this.g)}${yi(this.b)}`}function qD(){return`#${yi(this.r)}${yi(this.g)}${yi(this.b)}${yi((isNaN(this.opacity)?1:this.opacity)*255)}`}function vw(){const t=jd(this.opacity);return`${t===1?"rgb(":"rgba("}${wi(this.r)}, ${wi(this.g)}, ${wi(this.b)}${t===1?")":`, ${t})`}`}function jd(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function wi(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function yi(t){return t=wi(t),(t<16?"0":"")+t.toString(16)}function bw(t,e,n,s){return s<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new er(t,e,n,s)}function ME(t){if(t instanceof er)return new er(t.h,t.s,t.l,t.opacity);if(t instanceof ec||(t=Si(t)),!t)return new er;if(t instanceof er)return t;t=t.rgb();var e=t.r/255,n=t.g/255,s=t.b/255,a=Math.min(e,n,s),l=Math.max(e,n,s),c=NaN,d=l-a,f=(l+a)/2;return d?(e===l?c=(n-s)/d+(n<s)*6:n===l?c=(s-e)/d+2:c=(e-n)/d+4,d/=f<.5?l+a:2-l-a,c*=60):d=f>0&&f<1?0:c,new er(c,d,f,t.opacity)}function HD(t,e,n,s){return arguments.length===1?ME(t):new er(t,e,n,s??1)}function er(t,e,n,s){this.h=+t,this.s=+e,this.l=+n,this.opacity=+s}Dg(er,HD,kE(ec,{brighter(t){return t=t==null?Rd:Math.pow(Rd,t),new er(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Il:Math.pow(Il,t),new er(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,s=n+(n<.5?n:1-n)*e,a=2*n-s;return new fn(rp(t>=240?t-240:t+120,a,s),rp(t,a,s),rp(t<120?t+240:t-120,a,s),this.opacity)},clamp(){return new er(_w(this.h),Yu(this.s),Yu(this.l),jd(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=jd(this.opacity);return`${t===1?"hsl(":"hsla("}${_w(this.h)}, ${Yu(this.s)*100}%, ${Yu(this.l)*100}%${t===1?")":`, ${t})`}`}}));function _w(t){return t=(t||0)%360,t<0?t+360:t}function Yu(t){return Math.max(0,Math.min(1,t||0))}function rp(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const Ug=t=>()=>t;function VD(t,e){return function(n){return t+n*e}}function FD(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(s){return Math.pow(t+s*e,n)}}function YD(t){return(t=+t)==1?DE:function(e,n){return n-e?FD(e,n,t):Ug(isNaN(e)?n:e)}}function DE(t,e){var n=e-t;return n?VD(t,n):Ug(isNaN(t)?e:t)}const kd=(function t(e){var n=YD(e);function s(a,l){var c=n((a=qp(a)).r,(l=qp(l)).r),d=n(a.g,l.g),f=n(a.b,l.b),h=DE(a.opacity,l.opacity);return function(g){return a.r=c(g),a.g=d(g),a.b=f(g),a.opacity=h(g),a+""}}return s.gamma=t,s})(1);function GD(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,s=e.slice(),a;return function(l){for(a=0;a<n;++a)s[a]=t[a]*(1-l)+e[a]*l;return s}}function XD(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function KD(t,e){var n=e?e.length:0,s=t?Math.min(n,t.length):0,a=new Array(s),l=new Array(n),c;for(c=0;c<s;++c)a[c]=Al(t[c],e[c]);for(;c<n;++c)l[c]=e[c];return function(d){for(c=0;c<s;++c)l[c]=a[c](d);return l}}function QD(t,e){var n=new Date;return t=+t,e=+e,function(s){return n.setTime(t*(1-s)+e*s),n}}function fr(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function WD(t,e){var n={},s={},a;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(a in e)a in t?n[a]=Al(t[a],e[a]):s[a]=e[a];return function(l){for(a in n)s[a]=n[a](l);return s}}var Hp=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,sp=new RegExp(Hp.source,"g");function JD(t){return function(){return t}}function ZD(t){return function(e){return t(e)+""}}function UE(t,e){var n=Hp.lastIndex=sp.lastIndex=0,s,a,l,c=-1,d=[],f=[];for(t=t+"",e=e+"";(s=Hp.exec(t))&&(a=sp.exec(e));)(l=a.index)>n&&(l=e.slice(n,l),d[c]?d[c]+=l:d[++c]=l),(s=s[0])===(a=a[0])?d[c]?d[c]+=a:d[++c]=a:(d[++c]=null,f.push({i:c,x:fr(s,a)})),n=sp.lastIndex;return n<e.length&&(l=e.slice(n),d[c]?d[c]+=l:d[++c]=l),d.length<2?f[0]?ZD(f[0].x):JD(e):(e=f.length,function(h){for(var g=0,p;g<e;++g)d[(p=f[g]).i]=p.x(h);return d.join("")})}function Al(t,e){var n=typeof e,s;return e==null||n==="boolean"?Ug(e):(n==="number"?fr:n==="string"?(s=Si(e))?(e=s,kd):UE:e instanceof Si?kd:e instanceof Date?QD:XD(e)?GD:Array.isArray(e)?KD:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?WD:fr)(t,e)}var ww=180/Math.PI,Vp={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function $E(t,e,n,s,a,l){var c,d,f;return(c=Math.sqrt(t*t+e*e))&&(t/=c,e/=c),(f=t*n+e*s)&&(n-=t*f,s-=e*f),(d=Math.sqrt(n*n+s*s))&&(n/=d,s/=d,f/=d),t*s<e*n&&(t=-t,e=-e,f=-f,c=-c),{translateX:a,translateY:l,rotate:Math.atan2(e,t)*ww,skewX:Math.atan(f)*ww,scaleX:c,scaleY:d}}var Gu;function eU(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?Vp:$E(e.a,e.b,e.c,e.d,e.e,e.f)}function tU(t){return t==null||(Gu||(Gu=document.createElementNS("http://www.w3.org/2000/svg","g")),Gu.setAttribute("transform",t),!(t=Gu.transform.baseVal.consolidate()))?Vp:(t=t.matrix,$E(t.a,t.b,t.c,t.d,t.e,t.f))}function IE(t,e,n,s){function a(h){return h.length?h.pop()+" ":""}function l(h,g,p,v,b,x){if(h!==p||g!==v){var w=b.push("translate(",null,e,null,n);x.push({i:w-4,x:fr(h,p)},{i:w-2,x:fr(g,v)})}else(p||v)&&b.push("translate("+p+e+v+n)}function c(h,g,p,v){h!==g?(h-g>180?g+=360:g-h>180&&(h+=360),v.push({i:p.push(a(p)+"rotate(",null,s)-2,x:fr(h,g)})):g&&p.push(a(p)+"rotate("+g+s)}function d(h,g,p,v){h!==g?v.push({i:p.push(a(p)+"skewX(",null,s)-2,x:fr(h,g)}):g&&p.push(a(p)+"skewX("+g+s)}function f(h,g,p,v,b,x){if(h!==p||g!==v){var w=b.push(a(b)+"scale(",null,",",null,")");x.push({i:w-4,x:fr(h,p)},{i:w-2,x:fr(g,v)})}else(p!==1||v!==1)&&b.push(a(b)+"scale("+p+","+v+")")}return function(h,g){var p=[],v=[];return h=t(h),g=t(g),l(h.translateX,h.translateY,g.translateX,g.translateY,p,v),c(h.rotate,g.rotate,p,v),d(h.skewX,g.skewX,p,v),f(h.scaleX,h.scaleY,g.scaleX,g.scaleY,p,v),h=g=null,function(b){for(var x=-1,w=v.length,S;++x<w;)p[(S=v[x]).i]=S.x(b);return p.join("")}}}var nU=IE(eU,"px, ","px)","deg)"),rU=IE(tU,", ",")",")"),sU=1e-12;function xw(t){return((t=Math.exp(t))+1/t)/2}function iU(t){return((t=Math.exp(t))-1/t)/2}function aU(t){return((t=Math.exp(2*t))-1)/(t+1)}const ud=(function t(e,n,s){function a(l,c){var d=l[0],f=l[1],h=l[2],g=c[0],p=c[1],v=c[2],b=g-d,x=p-f,w=b*b+x*x,S,C;if(w<sU)C=Math.log(v/h)/e,S=function(D){return[d+D*b,f+D*x,h*Math.exp(e*D*C)]};else{var N=Math.sqrt(w),E=(v*v-h*h+s*w)/(2*h*n*N),A=(v*v-h*h-s*w)/(2*v*n*N),O=Math.log(Math.sqrt(E*E+1)-E),j=Math.log(Math.sqrt(A*A+1)-A);C=(j-O)/e,S=function(D){var $=D*C,P=xw(O),K=h/(n*N)*(P*aU(e*$+O)-iU(O));return[d+K*b,f+K*x,h*P/xw(e*$+O)]}}return S.duration=C*1e3*e/Math.SQRT2,S}return a.rho=function(l){var c=Math.max(.001,+l),d=c*c,f=d*d;return t(c,d,f)},a})(Math.SQRT2,2,4);var Ha=0,dl=0,al=0,LE=1e3,Md,fl,Dd=0,Ei=0,sf=0,zl=typeof performance=="object"&&performance.now?performance:Date,zE=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function $g(){return Ei||(zE(oU),Ei=zl.now()+sf)}function oU(){Ei=0}function Ud(){this._call=this._time=this._next=null}Ud.prototype=BE.prototype={constructor:Ud,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?$g():+n)+(e==null?0:+e),!this._next&&fl!==this&&(fl?fl._next=this:Md=this,fl=this),this._call=t,this._time=n,Fp()},stop:function(){this._call&&(this._call=null,this._time=1/0,Fp())}};function BE(t,e,n){var s=new Ud;return s.restart(t,e,n),s}function lU(){$g(),++Ha;for(var t=Md,e;t;)(e=Ei-t._time)>=0&&t._call.call(void 0,e),t=t._next;--Ha}function Sw(){Ei=(Dd=zl.now())+sf,Ha=dl=0;try{lU()}finally{Ha=0,uU(),Ei=0}}function cU(){var t=zl.now(),e=t-Dd;e>LE&&(sf-=e,Dd=t)}function uU(){for(var t,e=Md,n,s=1/0;e;)e._call?(s>e._time&&(s=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:Md=n);fl=t,Fp(s)}function Fp(t){if(!Ha){dl&&(dl=clearTimeout(dl));var e=t-Ei;e>24?(t<1/0&&(dl=setTimeout(Sw,t-zl.now()-sf)),al&&(al=clearInterval(al))):(al||(Dd=zl.now(),al=setInterval(cU,LE)),Ha=1,zE(Sw))}}function Ew(t,e,n){var s=new Ud;return e=e==null?0:+e,s.restart(a=>{s.stop(),t(a+e)},e,n),s}var dU=nf("start","end","cancel","interrupt"),fU=[],PE=0,Cw=1,Yp=2,dd=3,Aw=4,Gp=5,fd=6;function af(t,e,n,s,a,l){var c=t.__transition;if(!c)t.__transition={};else if(n in c)return;hU(t,n,{name:e,index:s,group:a,on:dU,tween:fU,time:l.time,delay:l.delay,duration:l.duration,ease:l.ease,timer:null,state:PE})}function Ig(t,e){var n=sr(t,e);if(n.state>PE)throw new Error("too late; already scheduled");return n}function yr(t,e){var n=sr(t,e);if(n.state>dd)throw new Error("too late; already running");return n}function sr(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function hU(t,e,n){var s=t.__transition,a;s[e]=n,n.timer=BE(l,0,n.time);function l(h){n.state=Cw,n.timer.restart(c,n.delay,n.time),n.delay<=h&&c(h-n.delay)}function c(h){var g,p,v,b;if(n.state!==Cw)return f();for(g in s)if(b=s[g],b.name===n.name){if(b.state===dd)return Ew(c);b.state===Aw?(b.state=fd,b.timer.stop(),b.on.call("interrupt",t,t.__data__,b.index,b.group),delete s[g]):+g<e&&(b.state=fd,b.timer.stop(),b.on.call("cancel",t,t.__data__,b.index,b.group),delete s[g])}if(Ew(function(){n.state===dd&&(n.state=Aw,n.timer.restart(d,n.delay,n.time),d(h))}),n.state=Yp,n.on.call("start",t,t.__data__,n.index,n.group),n.state===Yp){for(n.state=dd,a=new Array(v=n.tween.length),g=0,p=-1;g<v;++g)(b=n.tween[g].value.call(t,t.__data__,n.index,n.group))&&(a[++p]=b);a.length=p+1}}function d(h){for(var g=h<n.duration?n.ease.call(null,h/n.duration):(n.timer.restart(f),n.state=Gp,1),p=-1,v=a.length;++p<v;)a[p].call(t,g);n.state===Gp&&(n.on.call("end",t,t.__data__,n.index,n.group),f())}function f(){n.state=fd,n.timer.stop(),delete s[e];for(var h in s)return;delete t.__transition}}function hd(t,e){var n=t.__transition,s,a,l=!0,c;if(n){e=e==null?null:e+"";for(c in n){if((s=n[c]).name!==e){l=!1;continue}a=s.state>Yp&&s.state<Gp,s.state=fd,s.timer.stop(),s.on.call(a?"interrupt":"cancel",t,t.__data__,s.index,s.group),delete n[c]}l&&delete t.__transition}}function mU(t){return this.each(function(){hd(this,t)})}function pU(t,e){var n,s;return function(){var a=yr(this,t),l=a.tween;if(l!==n){s=n=l;for(var c=0,d=s.length;c<d;++c)if(s[c].name===e){s=s.slice(),s.splice(c,1);break}}a.tween=s}}function gU(t,e,n){var s,a;if(typeof n!="function")throw new Error;return function(){var l=yr(this,t),c=l.tween;if(c!==s){a=(s=c).slice();for(var d={name:e,value:n},f=0,h=a.length;f<h;++f)if(a[f].name===e){a[f]=d;break}f===h&&a.push(d)}l.tween=a}}function yU(t,e){var n=this._id;if(t+="",arguments.length<2){for(var s=sr(this.node(),n).tween,a=0,l=s.length,c;a<l;++a)if((c=s[a]).name===t)return c.value;return null}return this.each((e==null?pU:gU)(n,t,e))}function Lg(t,e,n){var s=t._id;return t.each(function(){var a=yr(this,s);(a.value||(a.value={}))[e]=n.apply(this,arguments)}),function(a){return sr(a,s).value[e]}}function qE(t,e){var n;return(typeof e=="number"?fr:e instanceof Si?kd:(n=Si(e))?(e=n,kd):UE)(t,e)}function vU(t){return function(){this.removeAttribute(t)}}function bU(t){return function(){this.removeAttributeNS(t.space,t.local)}}function _U(t,e,n){var s,a=n+"",l;return function(){var c=this.getAttribute(t);return c===a?null:c===s?l:l=e(s=c,n)}}function wU(t,e,n){var s,a=n+"",l;return function(){var c=this.getAttributeNS(t.space,t.local);return c===a?null:c===s?l:l=e(s=c,n)}}function xU(t,e,n){var s,a,l;return function(){var c,d=n(this),f;return d==null?void this.removeAttribute(t):(c=this.getAttribute(t),f=d+"",c===f?null:c===s&&f===a?l:(a=f,l=e(s=c,d)))}}function SU(t,e,n){var s,a,l;return function(){var c,d=n(this),f;return d==null?void this.removeAttributeNS(t.space,t.local):(c=this.getAttributeNS(t.space,t.local),f=d+"",c===f?null:c===s&&f===a?l:(a=f,l=e(s=c,d)))}}function EU(t,e){var n=rf(t),s=n==="transform"?rU:qE;return this.attrTween(t,typeof e=="function"?(n.local?SU:xU)(n,s,Lg(this,"attr."+t,e)):e==null?(n.local?bU:vU)(n):(n.local?wU:_U)(n,s,e))}function CU(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function AU(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function TU(t,e){var n,s;function a(){var l=e.apply(this,arguments);return l!==s&&(n=(s=l)&&AU(t,l)),n}return a._value=e,a}function NU(t,e){var n,s;function a(){var l=e.apply(this,arguments);return l!==s&&(n=(s=l)&&CU(t,l)),n}return a._value=e,a}function OU(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var s=rf(t);return this.tween(n,(s.local?TU:NU)(s,e))}function RU(t,e){return function(){Ig(this,t).delay=+e.apply(this,arguments)}}function jU(t,e){return e=+e,function(){Ig(this,t).delay=e}}function kU(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?RU:jU)(e,t)):sr(this.node(),e).delay}function MU(t,e){return function(){yr(this,t).duration=+e.apply(this,arguments)}}function DU(t,e){return e=+e,function(){yr(this,t).duration=e}}function UU(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?MU:DU)(e,t)):sr(this.node(),e).duration}function $U(t,e){if(typeof e!="function")throw new Error;return function(){yr(this,t).ease=e}}function IU(t){var e=this._id;return arguments.length?this.each($U(e,t)):sr(this.node(),e).ease}function LU(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;yr(this,t).ease=n}}function zU(t){if(typeof t!="function")throw new Error;return this.each(LU(this._id,t))}function BU(t){typeof t!="function"&&(t=bE(t));for(var e=this._groups,n=e.length,s=new Array(n),a=0;a<n;++a)for(var l=e[a],c=l.length,d=s[a]=[],f,h=0;h<c;++h)(f=l[h])&&t.call(f,f.__data__,h,l)&&d.push(f);return new Xr(s,this._parents,this._name,this._id)}function PU(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,s=e.length,a=n.length,l=Math.min(s,a),c=new Array(s),d=0;d<l;++d)for(var f=e[d],h=n[d],g=f.length,p=c[d]=new Array(g),v,b=0;b<g;++b)(v=f[b]||h[b])&&(p[b]=v);for(;d<s;++d)c[d]=e[d];return new Xr(c,this._parents,this._name,this._id)}function qU(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function HU(t,e,n){var s,a,l=qU(e)?Ig:yr;return function(){var c=l(this,t),d=c.on;d!==s&&(a=(s=d).copy()).on(e,n),c.on=a}}function VU(t,e){var n=this._id;return arguments.length<2?sr(this.node(),n).on.on(t):this.each(HU(n,t,e))}function FU(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function YU(){return this.on("end.remove",FU(this._id))}function GU(t){var e=this._name,n=this._id;typeof t!="function"&&(t=kg(t));for(var s=this._groups,a=s.length,l=new Array(a),c=0;c<a;++c)for(var d=s[c],f=d.length,h=l[c]=new Array(f),g,p,v=0;v<f;++v)(g=d[v])&&(p=t.call(g,g.__data__,v,d))&&("__data__"in g&&(p.__data__=g.__data__),h[v]=p,af(h[v],e,n,v,h,sr(g,n)));return new Xr(l,this._parents,e,n)}function XU(t){var e=this._name,n=this._id;typeof t!="function"&&(t=vE(t));for(var s=this._groups,a=s.length,l=[],c=[],d=0;d<a;++d)for(var f=s[d],h=f.length,g,p=0;p<h;++p)if(g=f[p]){for(var v=t.call(g,g.__data__,p,f),b,x=sr(g,n),w=0,S=v.length;w<S;++w)(b=v[w])&&af(b,e,n,w,v,x);l.push(v),c.push(g)}return new Xr(l,c,e,n)}var KU=Zl.prototype.constructor;function QU(){return new KU(this._groups,this._parents)}function WU(t,e){var n,s,a;return function(){var l=qa(this,t),c=(this.style.removeProperty(t),qa(this,t));return l===c?null:l===n&&c===s?a:a=e(n=l,s=c)}}function HE(t){return function(){this.style.removeProperty(t)}}function JU(t,e,n){var s,a=n+"",l;return function(){var c=qa(this,t);return c===a?null:c===s?l:l=e(s=c,n)}}function ZU(t,e,n){var s,a,l;return function(){var c=qa(this,t),d=n(this),f=d+"";return d==null&&(f=d=(this.style.removeProperty(t),qa(this,t))),c===f?null:c===s&&f===a?l:(a=f,l=e(s=c,d))}}function e3(t,e){var n,s,a,l="style."+e,c="end."+l,d;return function(){var f=yr(this,t),h=f.on,g=f.value[l]==null?d||(d=HE(e)):void 0;(h!==n||a!==g)&&(s=(n=h).copy()).on(c,a=g),f.on=s}}function t3(t,e,n){var s=(t+="")=="transform"?nU:qE;return e==null?this.styleTween(t,WU(t,s)).on("end.style."+t,HE(t)):typeof e=="function"?this.styleTween(t,ZU(t,s,Lg(this,"style."+t,e))).each(e3(this._id,t)):this.styleTween(t,JU(t,s,e),n).on("end.style."+t,null)}function n3(t,e,n){return function(s){this.style.setProperty(t,e.call(this,s),n)}}function r3(t,e,n){var s,a;function l(){var c=e.apply(this,arguments);return c!==a&&(s=(a=c)&&n3(t,c,n)),s}return l._value=e,l}function s3(t,e,n){var s="style."+(t+="");if(arguments.length<2)return(s=this.tween(s))&&s._value;if(e==null)return this.tween(s,null);if(typeof e!="function")throw new Error;return this.tween(s,r3(t,e,n??""))}function i3(t){return function(){this.textContent=t}}function a3(t){return function(){var e=t(this);this.textContent=e??""}}function o3(t){return this.tween("text",typeof t=="function"?a3(Lg(this,"text",t)):i3(t==null?"":t+""))}function l3(t){return function(e){this.textContent=t.call(this,e)}}function c3(t){var e,n;function s(){var a=t.apply(this,arguments);return a!==n&&(e=(n=a)&&l3(a)),e}return s._value=t,s}function u3(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,c3(t))}function d3(){for(var t=this._name,e=this._id,n=VE(),s=this._groups,a=s.length,l=0;l<a;++l)for(var c=s[l],d=c.length,f,h=0;h<d;++h)if(f=c[h]){var g=sr(f,e);af(f,t,n,h,c,{time:g.time+g.delay+g.duration,delay:0,duration:g.duration,ease:g.ease})}return new Xr(s,this._parents,t,n)}function f3(){var t,e,n=this,s=n._id,a=n.size();return new Promise(function(l,c){var d={value:c},f={value:function(){--a===0&&l()}};n.each(function(){var h=yr(this,s),g=h.on;g!==t&&(e=(t=g).copy(),e._.cancel.push(d),e._.interrupt.push(d),e._.end.push(f)),h.on=e}),a===0&&l()})}var h3=0;function Xr(t,e,n,s){this._groups=t,this._parents=e,this._name=n,this._id=s}function VE(){return++h3}var Pr=Zl.prototype;Xr.prototype={constructor:Xr,select:GU,selectAll:XU,selectChild:Pr.selectChild,selectChildren:Pr.selectChildren,filter:BU,merge:PU,selection:QU,transition:d3,call:Pr.call,nodes:Pr.nodes,node:Pr.node,size:Pr.size,empty:Pr.empty,each:Pr.each,on:VU,attr:EU,attrTween:OU,style:t3,styleTween:s3,text:o3,textTween:u3,remove:YU,tween:yU,delay:kU,duration:UU,ease:IU,easeVarying:zU,end:f3,[Symbol.iterator]:Pr[Symbol.iterator]};function m3(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var p3={time:null,delay:0,duration:250,ease:m3};function g3(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function y3(t){var e,n;t instanceof Xr?(e=t._id,t=t._name):(e=VE(),(n=p3).time=$g(),t=t==null?null:t+"");for(var s=this._groups,a=s.length,l=0;l<a;++l)for(var c=s[l],d=c.length,f,h=0;h<d;++h)(f=c[h])&&af(f,t,e,h,c,n||g3(f,e));return new Xr(s,this._parents,t,e)}Zl.prototype.interrupt=mU;Zl.prototype.transition=y3;const Xu=t=>()=>t;function v3(t,{sourceEvent:e,target:n,transform:s,dispatch:a}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:s,enumerable:!0,configurable:!0},_:{value:a}})}function Fr(t,e,n){this.k=t,this.x=e,this.y=n}Fr.prototype={constructor:Fr,scale:function(t){return t===1?this:new Fr(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new Fr(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var of=new Fr(1,0,0);FE.prototype=Fr.prototype;function FE(t){for(;!t.__zoom;)if(!(t=t.parentNode))return of;return t.__zoom}function ip(t){t.stopImmediatePropagation()}function ol(t){t.preventDefault(),t.stopImmediatePropagation()}function b3(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function _3(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function Tw(){return this.__zoom||of}function w3(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function x3(){return navigator.maxTouchPoints||"ontouchstart"in this}function S3(t,e,n){var s=t.invertX(e[0][0])-n[0][0],a=t.invertX(e[1][0])-n[1][0],l=t.invertY(e[0][1])-n[0][1],c=t.invertY(e[1][1])-n[1][1];return t.translate(a>s?(s+a)/2:Math.min(0,s)||Math.max(0,a),c>l?(l+c)/2:Math.min(0,l)||Math.max(0,c))}function YE(){var t=b3,e=_3,n=S3,s=w3,a=x3,l=[0,1/0],c=[[-1/0,-1/0],[1/0,1/0]],d=250,f=ud,h=nf("start","zoom","end"),g,p,v,b=500,x=150,w=0,S=10;function C(I){I.property("__zoom",Tw).on("wheel.zoom",$,{passive:!1}).on("mousedown.zoom",P).on("dblclick.zoom",K).filter(a).on("touchstart.zoom",G).on("touchmove.zoom",L).on("touchend.zoom touchcancel.zoom",W).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}C.transform=function(I,Y,k,z){var V=I.selection?I.selection():I;V.property("__zoom",Tw),I!==V?O(I,Y,k,z):V.interrupt().each(function(){j(this,arguments).event(z).start().zoom(null,typeof Y=="function"?Y.apply(this,arguments):Y).end()})},C.scaleBy=function(I,Y,k,z){C.scaleTo(I,function(){var V=this.__zoom.k,q=typeof Y=="function"?Y.apply(this,arguments):Y;return V*q},k,z)},C.scaleTo=function(I,Y,k,z){C.transform(I,function(){var V=e.apply(this,arguments),q=this.__zoom,H=k==null?A(V):typeof k=="function"?k.apply(this,arguments):k,M=q.invert(H),B=typeof Y=="function"?Y.apply(this,arguments):Y;return n(E(N(q,B),H,M),V,c)},k,z)},C.translateBy=function(I,Y,k,z){C.transform(I,function(){return n(this.__zoom.translate(typeof Y=="function"?Y.apply(this,arguments):Y,typeof k=="function"?k.apply(this,arguments):k),e.apply(this,arguments),c)},null,z)},C.translateTo=function(I,Y,k,z,V){C.transform(I,function(){var q=e.apply(this,arguments),H=this.__zoom,M=z==null?A(q):typeof z=="function"?z.apply(this,arguments):z;return n(of.translate(M[0],M[1]).scale(H.k).translate(typeof Y=="function"?-Y.apply(this,arguments):-Y,typeof k=="function"?-k.apply(this,arguments):-k),q,c)},z,V)};function N(I,Y){return Y=Math.max(l[0],Math.min(l[1],Y)),Y===I.k?I:new Fr(Y,I.x,I.y)}function E(I,Y,k){var z=Y[0]-k[0]*I.k,V=Y[1]-k[1]*I.k;return z===I.x&&V===I.y?I:new Fr(I.k,z,V)}function A(I){return[(+I[0][0]+ +I[1][0])/2,(+I[0][1]+ +I[1][1])/2]}function O(I,Y,k,z){I.on("start.zoom",function(){j(this,arguments).event(z).start()}).on("interrupt.zoom end.zoom",function(){j(this,arguments).event(z).end()}).tween("zoom",function(){var V=this,q=arguments,H=j(V,q).event(z),M=e.apply(V,q),B=k==null?A(M):typeof k=="function"?k.apply(V,q):k,Q=Math.max(M[1][0]-M[0][0],M[1][1]-M[0][1]),ee=V.__zoom,he=typeof Y=="function"?Y.apply(V,q):Y,ge=f(ee.invert(B).concat(Q/ee.k),he.invert(B).concat(Q/he.k));return function(ae){if(ae===1)ae=he;else{var le=ge(ae),Z=Q/le[2];ae=new Fr(Z,B[0]-le[0]*Z,B[1]-le[1]*Z)}H.zoom(null,ae)}})}function j(I,Y,k){return!k&&I.__zooming||new D(I,Y)}function D(I,Y){this.that=I,this.args=Y,this.active=0,this.sourceEvent=null,this.extent=e.apply(I,Y),this.taps=0}D.prototype={event:function(I){return I&&(this.sourceEvent=I),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(I,Y){return this.mouse&&I!=="mouse"&&(this.mouse[1]=Y.invert(this.mouse[0])),this.touch0&&I!=="touch"&&(this.touch0[1]=Y.invert(this.touch0[0])),this.touch1&&I!=="touch"&&(this.touch1[1]=Y.invert(this.touch1[0])),this.that.__zoom=Y,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(I){var Y=On(this.that).datum();h.call(I,this.that,new v3(I,{sourceEvent:this.sourceEvent,target:C,transform:this.that.__zoom,dispatch:h}),Y)}};function $(I,...Y){if(!t.apply(this,arguments))return;var k=j(this,Y).event(I),z=this.__zoom,V=Math.max(l[0],Math.min(l[1],z.k*Math.pow(2,s.apply(this,arguments)))),q=Zn(I);if(k.wheel)(k.mouse[0][0]!==q[0]||k.mouse[0][1]!==q[1])&&(k.mouse[1]=z.invert(k.mouse[0]=q)),clearTimeout(k.wheel);else{if(z.k===V)return;k.mouse=[q,z.invert(q)],hd(this),k.start()}ol(I),k.wheel=setTimeout(H,x),k.zoom("mouse",n(E(N(z,V),k.mouse[0],k.mouse[1]),k.extent,c));function H(){k.wheel=null,k.end()}}function P(I,...Y){if(v||!t.apply(this,arguments))return;var k=I.currentTarget,z=j(this,Y,!0).event(I),V=On(I.view).on("mousemove.zoom",B,!0).on("mouseup.zoom",Q,!0),q=Zn(I,k),H=I.clientX,M=I.clientY;OE(I.view),ip(I),z.mouse=[q,this.__zoom.invert(q)],hd(this),z.start();function B(ee){if(ol(ee),!z.moved){var he=ee.clientX-H,ge=ee.clientY-M;z.moved=he*he+ge*ge>w}z.event(ee).zoom("mouse",n(E(z.that.__zoom,z.mouse[0]=Zn(ee,k),z.mouse[1]),z.extent,c))}function Q(ee){V.on("mousemove.zoom mouseup.zoom",null),RE(ee.view,z.moved),ol(ee),z.event(ee).end()}}function K(I,...Y){if(t.apply(this,arguments)){var k=this.__zoom,z=Zn(I.changedTouches?I.changedTouches[0]:I,this),V=k.invert(z),q=k.k*(I.shiftKey?.5:2),H=n(E(N(k,q),z,V),e.apply(this,Y),c);ol(I),d>0?On(this).transition().duration(d).call(O,H,z,I):On(this).call(C.transform,H,z,I)}}function G(I,...Y){if(t.apply(this,arguments)){var k=I.touches,z=k.length,V=j(this,Y,I.changedTouches.length===z).event(I),q,H,M,B;for(ip(I),H=0;H<z;++H)M=k[H],B=Zn(M,this),B=[B,this.__zoom.invert(B),M.identifier],V.touch0?!V.touch1&&V.touch0[2]!==B[2]&&(V.touch1=B,V.taps=0):(V.touch0=B,q=!0,V.taps=1+!!g);g&&(g=clearTimeout(g)),q&&(V.taps<2&&(p=B[0],g=setTimeout(function(){g=null},b)),hd(this),V.start())}}function L(I,...Y){if(this.__zooming){var k=j(this,Y).event(I),z=I.changedTouches,V=z.length,q,H,M,B;for(ol(I),q=0;q<V;++q)H=z[q],M=Zn(H,this),k.touch0&&k.touch0[2]===H.identifier?k.touch0[0]=M:k.touch1&&k.touch1[2]===H.identifier&&(k.touch1[0]=M);if(H=k.that.__zoom,k.touch1){var Q=k.touch0[0],ee=k.touch0[1],he=k.touch1[0],ge=k.touch1[1],ae=(ae=he[0]-Q[0])*ae+(ae=he[1]-Q[1])*ae,le=(le=ge[0]-ee[0])*le+(le=ge[1]-ee[1])*le;H=N(H,Math.sqrt(ae/le)),M=[(Q[0]+he[0])/2,(Q[1]+he[1])/2],B=[(ee[0]+ge[0])/2,(ee[1]+ge[1])/2]}else if(k.touch0)M=k.touch0[0],B=k.touch0[1];else return;k.zoom("touch",n(E(H,M,B),k.extent,c))}}function W(I,...Y){if(this.__zooming){var k=j(this,Y).event(I),z=I.changedTouches,V=z.length,q,H;for(ip(I),v&&clearTimeout(v),v=setTimeout(function(){v=null},b),q=0;q<V;++q)H=z[q],k.touch0&&k.touch0[2]===H.identifier?delete k.touch0:k.touch1&&k.touch1[2]===H.identifier&&delete k.touch1;if(k.touch1&&!k.touch0&&(k.touch0=k.touch1,delete k.touch1),k.touch0)k.touch0[1]=this.__zoom.invert(k.touch0[0]);else if(k.end(),k.taps===2&&(H=Zn(H,this),Math.hypot(p[0]-H[0],p[1]-H[1])<S)){var M=On(this).on("dblclick.zoom");M&&M.apply(this,arguments)}}}return C.wheelDelta=function(I){return arguments.length?(s=typeof I=="function"?I:Xu(+I),C):s},C.filter=function(I){return arguments.length?(t=typeof I=="function"?I:Xu(!!I),C):t},C.touchable=function(I){return arguments.length?(a=typeof I=="function"?I:Xu(!!I),C):a},C.extent=function(I){return arguments.length?(e=typeof I=="function"?I:Xu([[+I[0][0],+I[0][1]],[+I[1][0],+I[1][1]]]),C):e},C.scaleExtent=function(I){return arguments.length?(l[0]=+I[0],l[1]=+I[1],C):[l[0],l[1]]},C.translateExtent=function(I){return arguments.length?(c[0][0]=+I[0][0],c[1][0]=+I[1][0],c[0][1]=+I[0][1],c[1][1]=+I[1][1],C):[[c[0][0],c[0][1]],[c[1][0],c[1][1]]]},C.constrain=function(I){return arguments.length?(n=I,C):n},C.duration=function(I){return arguments.length?(d=+I,C):d},C.interpolate=function(I){return arguments.length?(f=I,C):f},C.on=function(){var I=h.on.apply(h,arguments);return I===h?C:I},C.clickDistance=function(I){return arguments.length?(w=(I=+I)*I,C):Math.sqrt(w)},C.tapDistance=function(I){return arguments.length?(S=+I,C):S},C}const rr={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:t=>`Node type "${t}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:t=>`The old edge with id=${t} does not exist.`,error009:t=>`Marker type "${t}" doesn't exist.`,error008:(t,{id:e,sourceHandle:n,targetHandle:s})=>`Couldn't create edge for ${t} handle id: "${t==="source"?n:s}", edge id: ${e}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:t=>`Edge type "${t}" not found. Using fallback type "default".`,error012:t=>`Node with id "${t}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(t="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${t}/dist/style.css' or base.css to make sure everything is working properly.`,error014:()=>"useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID.",error015:()=>"It seems that you are trying to drag a node that is not initialized. Please use onNodesChange as explained in the docs."},Bl=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],GE=["Enter"," ","Escape"],XE={"node.a11yDescription.default":"Press enter or space to select a node. Press delete to remove it and escape to cancel.","node.a11yDescription.keyboardDisabled":"Press enter or space to select a node. You can then use the arrow keys to move the node around. Press delete to remove it and escape to cancel.","node.a11yDescription.ariaLiveMessage":({direction:t,x:e,y:n})=>`Moved selected node ${t}. New position, x: ${e}, y: ${n}`,"edge.a11yDescription.default":"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel.","controls.ariaLabel":"Control Panel","controls.zoomIn.ariaLabel":"Zoom In","controls.zoomOut.ariaLabel":"Zoom Out","controls.fitView.ariaLabel":"Fit View","controls.interactive.ariaLabel":"Toggle Interactivity","minimap.ariaLabel":"Mini Map","handle.ariaLabel":"Handle"};var Va;(function(t){t.Strict="strict",t.Loose="loose"})(Va||(Va={}));var xi;(function(t){t.Free="free",t.Vertical="vertical",t.Horizontal="horizontal"})(xi||(xi={}));var Pl;(function(t){t.Partial="partial",t.Full="full"})(Pl||(Pl={}));const KE={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null,pointer:null};var Us;(function(t){t.Bezier="default",t.Straight="straight",t.Step="step",t.SmoothStep="smoothstep",t.SimpleBezier="simplebezier"})(Us||(Us={}));var $d;(function(t){t.Arrow="arrow",t.ArrowClosed="arrowclosed"})($d||($d={}));var Ce;(function(t){t.Left="left",t.Top="top",t.Right="right",t.Bottom="bottom"})(Ce||(Ce={}));const Nw={[Ce.Left]:Ce.Right,[Ce.Right]:Ce.Left,[Ce.Top]:Ce.Bottom,[Ce.Bottom]:Ce.Top};function E3(t,e){if(!t&&!e)return!0;if(!t||!e||t.size!==e.size)return!1;if(!t.size&&!e.size)return!0;for(const n of t.keys())if(!e.has(n))return!1;return!0}function Ow(t,e,n){if(!n)return;const s=[];t.forEach((a,l)=>{e?.has(l)||s.push(a)}),s.length&&n(s)}function QE(t){return t===null?null:t?"valid":"invalid"}const WE=t=>"id"in t&&"source"in t&&"target"in t,C3=t=>"id"in t&&"position"in t&&!("source"in t)&&!("target"in t),zg=t=>"id"in t&&"internals"in t&&!("source"in t)&&!("target"in t),tc=(t,e=[0,0])=>{const{width:n,height:s}=Wr(t),a=t.origin??e,l=n*a[0],c=s*a[1];return{x:t.position.x-l,y:t.position.y-c}},A3=(t,e={nodeOrigin:[0,0]})=>{if(t.length===0)return{x:0,y:0,width:0,height:0};const n=t.reduce((s,a)=>{const l=typeof a=="string";let c=!e.nodeLookup&&!l?a:void 0;e.nodeLookup&&(c=l?e.nodeLookup.get(a):zg(a)?a:e.nodeLookup.get(a.id));const d=c?Id(c,e.nodeOrigin):{x:0,y:0,x2:0,y2:0};return lf(s,d)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return cf(n)},nc=(t,e={})=>{let n={x:1/0,y:1/0,x2:-1/0,y2:-1/0},s=!1;return t.forEach(a=>{(e.filter===void 0||e.filter(a))&&(n=lf(n,Id(a)),s=!0)}),s?cf(n):{x:0,y:0,width:0,height:0}},Bg=(t,e,[n,s,a]=[0,0,1],l=!1,c=!1)=>{const d={...sc(e,[n,s,a]),width:e.width/a,height:e.height/a},f=[];for(const h of t.values()){const{measured:g,selectable:p=!0,hidden:v=!1}=h;if(c&&!p||v)continue;const b=g.width??h.width??h.initialWidth??null,x=g.height??h.height??h.initialHeight??null,w=ql(d,Ya(h)),S=(b??0)*(x??0),C=l&&w>0;(!h.internals.handleBounds||C||w>=S||h.dragging)&&f.push(h)}return f},T3=(t,e)=>{const n=new Set;return t.forEach(s=>{n.add(s.id)}),e.filter(s=>n.has(s.source)||n.has(s.target))};function N3(t,e){const n=new Map,s=e?.nodes?new Set(e.nodes.map(a=>a.id)):null;return t.forEach(a=>{a.measured.width&&a.measured.height&&(e?.includeHiddenNodes||!a.hidden)&&(!s||s.has(a.id))&&n.set(a.id,a)}),n}async function O3({nodes:t,width:e,height:n,panZoom:s,minZoom:a,maxZoom:l},c){if(t.size===0)return Promise.resolve(!0);const d=N3(t,c),f=nc(d),h=Pg(f,e,n,c?.minZoom??a,c?.maxZoom??l,c?.padding??.1);return await s.setViewport(h,{duration:c?.duration,ease:c?.ease,interpolate:c?.interpolate}),Promise.resolve(!0)}function JE({nodeId:t,nextPosition:e,nodeLookup:n,nodeOrigin:s=[0,0],nodeExtent:a,onError:l}){const c=n.get(t),d=c.parentId?n.get(c.parentId):void 0,{x:f,y:h}=d?d.internals.positionAbsolute:{x:0,y:0},g=c.origin??s;let p=c.extent||a;if(c.extent==="parent"&&!c.expandParent)if(!d)l?.("005",rr.error005());else{const b=d.measured.width,x=d.measured.height;b&&x&&(p=[[f,h],[f+b,h+x]])}else d&&Ga(c.extent)&&(p=[[c.extent[0][0]+f,c.extent[0][1]+h],[c.extent[1][0]+f,c.extent[1][1]+h]]);const v=Ga(p)?Ci(e,p,c.measured):e;return(c.measured.width===void 0||c.measured.height===void 0)&&l?.("015",rr.error015()),{position:{x:v.x-f+(c.measured.width??0)*g[0],y:v.y-h+(c.measured.height??0)*g[1]},positionAbsolute:v}}async function R3({nodesToRemove:t=[],edgesToRemove:e=[],nodes:n,edges:s,onBeforeDelete:a}){const l=new Set(t.map(v=>v.id)),c=[];for(const v of n){if(v.deletable===!1)continue;const b=l.has(v.id),x=!b&&v.parentId&&c.find(w=>w.id===v.parentId);(b||x)&&c.push(v)}const d=new Set(e.map(v=>v.id)),f=s.filter(v=>v.deletable!==!1),g=T3(c,f);for(const v of f)d.has(v.id)&&!g.find(x=>x.id===v.id)&&g.push(v);if(!a)return{edges:g,nodes:c};const p=await a({nodes:c,edges:g});return typeof p=="boolean"?p?{edges:g,nodes:c}:{edges:[],nodes:[]}:p}const Fa=(t,e=0,n=1)=>Math.min(Math.max(t,e),n),Ci=(t={x:0,y:0},e,n)=>({x:Fa(t.x,e[0][0],e[1][0]-(n?.width??0)),y:Fa(t.y,e[0][1],e[1][1]-(n?.height??0))});function ZE(t,e,n){const{width:s,height:a}=Wr(n),{x:l,y:c}=n.internals.positionAbsolute;return Ci(t,[[l,c],[l+s,c+a]],e)}const Rw=(t,e,n)=>t<e?Fa(Math.abs(t-e),1,e)/e:t>n?-Fa(Math.abs(t-n),1,e)/e:0,e1=(t,e,n=15,s=40)=>{const a=Rw(t.x,s,e.width-s)*n,l=Rw(t.y,s,e.height-s)*n;return[a,l]},lf=(t,e)=>({x:Math.min(t.x,e.x),y:Math.min(t.y,e.y),x2:Math.max(t.x2,e.x2),y2:Math.max(t.y2,e.y2)}),Xp=({x:t,y:e,width:n,height:s})=>({x:t,y:e,x2:t+n,y2:e+s}),cf=({x:t,y:e,x2:n,y2:s})=>({x:t,y:e,width:n-t,height:s-e}),Ya=(t,e=[0,0])=>{const{x:n,y:s}=zg(t)?t.internals.positionAbsolute:tc(t,e);return{x:n,y:s,width:t.measured?.width??t.width??t.initialWidth??0,height:t.measured?.height??t.height??t.initialHeight??0}},Id=(t,e=[0,0])=>{const{x:n,y:s}=zg(t)?t.internals.positionAbsolute:tc(t,e);return{x:n,y:s,x2:n+(t.measured?.width??t.width??t.initialWidth??0),y2:s+(t.measured?.height??t.height??t.initialHeight??0)}},t1=(t,e)=>cf(lf(Xp(t),Xp(e))),ql=(t,e)=>{const n=Math.max(0,Math.min(t.x+t.width,e.x+e.width)-Math.max(t.x,e.x)),s=Math.max(0,Math.min(t.y+t.height,e.y+e.height)-Math.max(t.y,e.y));return Math.ceil(n*s)},jw=t=>tr(t.width)&&tr(t.height)&&tr(t.x)&&tr(t.y),tr=t=>!isNaN(t)&&isFinite(t),j3=(t,e)=>{},rc=(t,e=[1,1])=>({x:e[0]*Math.round(t.x/e[0]),y:e[1]*Math.round(t.y/e[1])}),sc=({x:t,y:e},[n,s,a],l=!1,c=[1,1])=>{const d={x:(t-n)/a,y:(e-s)/a};return l?rc(d,c):d},Ld=({x:t,y:e},[n,s,a])=>({x:t*a+n,y:e*a+s});function Aa(t,e){if(typeof t=="number")return Math.floor((e-e/(1+t))*.5);if(typeof t=="string"&&t.endsWith("px")){const n=parseFloat(t);if(!Number.isNaN(n))return Math.floor(n)}if(typeof t=="string"&&t.endsWith("%")){const n=parseFloat(t);if(!Number.isNaN(n))return Math.floor(e*n*.01)}return console.error(`[React Flow] The padding value "${t}" is invalid. Please provide a number or a string with a valid unit (px or %).`),0}function k3(t,e,n){if(typeof t=="string"||typeof t=="number"){const s=Aa(t,n),a=Aa(t,e);return{top:s,right:a,bottom:s,left:a,x:a*2,y:s*2}}if(typeof t=="object"){const s=Aa(t.top??t.y??0,n),a=Aa(t.bottom??t.y??0,n),l=Aa(t.left??t.x??0,e),c=Aa(t.right??t.x??0,e);return{top:s,right:c,bottom:a,left:l,x:l+c,y:s+a}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}function M3(t,e,n,s,a,l){const{x:c,y:d}=Ld(t,[e,n,s]),{x:f,y:h}=Ld({x:t.x+t.width,y:t.y+t.height},[e,n,s]),g=a-f,p=l-h;return{left:Math.floor(c),top:Math.floor(d),right:Math.floor(g),bottom:Math.floor(p)}}const Pg=(t,e,n,s,a,l)=>{const c=k3(l,e,n),d=(e-c.x)/t.width,f=(n-c.y)/t.height,h=Math.min(d,f),g=Fa(h,s,a),p=t.x+t.width/2,v=t.y+t.height/2,b=e/2-p*g,x=n/2-v*g,w=M3(t,b,x,g,e,n),S={left:Math.min(w.left-c.left,0),top:Math.min(w.top-c.top,0),right:Math.min(w.right-c.right,0),bottom:Math.min(w.bottom-c.bottom,0)};return{x:b-S.left+S.right,y:x-S.top+S.bottom,zoom:g}},Hl=()=>typeof navigator<"u"&&navigator?.userAgent?.indexOf("Mac")>=0;function Ga(t){return t!=null&&t!=="parent"}function Wr(t){return{width:t.measured?.width??t.width??t.initialWidth??0,height:t.measured?.height??t.height??t.initialHeight??0}}function n1(t){return(t.measured?.width??t.width??t.initialWidth)!==void 0&&(t.measured?.height??t.height??t.initialHeight)!==void 0}function r1(t,e={width:0,height:0},n,s,a){const l={...t},c=s.get(n);if(c){const d=c.origin||a;l.x+=c.internals.positionAbsolute.x-(e.width??0)*d[0],l.y+=c.internals.positionAbsolute.y-(e.height??0)*d[1]}return l}function kw(t,e){if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0}function D3(){let t,e;return{promise:new Promise((s,a)=>{t=s,e=a}),resolve:t,reject:e}}function U3(t){return{...XE,...t||{}}}function Tl(t,{snapGrid:e=[0,0],snapToGrid:n=!1,transform:s,containerBounds:a}){const{x:l,y:c}=nr(t),d=sc({x:l-(a?.left??0),y:c-(a?.top??0)},s),{x:f,y:h}=n?rc(d,e):d;return{xSnapped:f,ySnapped:h,...d}}const qg=t=>({width:t.offsetWidth,height:t.offsetHeight}),s1=t=>t?.getRootNode?.()||window?.document,$3=["INPUT","SELECT","TEXTAREA"];function i1(t){const e=t.composedPath?.()?.[0]||t.target;return e?.nodeType!==1?!1:$3.includes(e.nodeName)||e.hasAttribute("contenteditable")||!!e.closest(".nokey")}const a1=t=>"clientX"in t,nr=(t,e)=>{const n=a1(t),s=n?t.clientX:t.touches?.[0].clientX,a=n?t.clientY:t.touches?.[0].clientY;return{x:s-(e?.left??0),y:a-(e?.top??0)}},Mw=(t,e,n,s,a)=>{const l=e.querySelectorAll(`.${t}`);return!l||!l.length?null:Array.from(l).map(c=>{const d=c.getBoundingClientRect();return{id:c.getAttribute("data-handleid"),type:t,nodeId:a,position:c.getAttribute("data-handlepos"),x:(d.left-n.left)/s,y:(d.top-n.top)/s,...qg(c)}})};function o1({sourceX:t,sourceY:e,targetX:n,targetY:s,sourceControlX:a,sourceControlY:l,targetControlX:c,targetControlY:d}){const f=t*.125+a*.375+c*.375+n*.125,h=e*.125+l*.375+d*.375+s*.125,g=Math.abs(f-t),p=Math.abs(h-e);return[f,h,g,p]}function Ku(t,e){return t>=0?.5*t:e*25*Math.sqrt(-t)}function Dw({pos:t,x1:e,y1:n,x2:s,y2:a,c:l}){switch(t){case Ce.Left:return[e-Ku(e-s,l),n];case Ce.Right:return[e+Ku(s-e,l),n];case Ce.Top:return[e,n-Ku(n-a,l)];case Ce.Bottom:return[e,n+Ku(a-n,l)]}}function Hg({sourceX:t,sourceY:e,sourcePosition:n=Ce.Bottom,targetX:s,targetY:a,targetPosition:l=Ce.Top,curvature:c=.25}){const[d,f]=Dw({pos:n,x1:t,y1:e,x2:s,y2:a,c}),[h,g]=Dw({pos:l,x1:s,y1:a,x2:t,y2:e,c}),[p,v,b,x]=o1({sourceX:t,sourceY:e,targetX:s,targetY:a,sourceControlX:d,sourceControlY:f,targetControlX:h,targetControlY:g});return[`M${t},${e} C${d},${f} ${h},${g} ${s},${a}`,p,v,b,x]}function l1({sourceX:t,sourceY:e,targetX:n,targetY:s}){const a=Math.abs(n-t)/2,l=n<t?n+a:n-a,c=Math.abs(s-e)/2,d=s<e?s+c:s-c;return[l,d,a,c]}function I3({sourceNode:t,targetNode:e,selected:n=!1,zIndex:s,elevateOnSelect:a=!1}){if(s!==void 0)return s;const l=a&&n?1e3:0,c=Math.max(t.parentId||a&&t.selected?t.internals.z:0,e.parentId||a&&e.selected?e.internals.z:0);return l+c}function L3({sourceNode:t,targetNode:e,width:n,height:s,transform:a}){const l=lf(Id(t),Id(e));l.x===l.x2&&(l.x2+=1),l.y===l.y2&&(l.y2+=1);const c={x:-a[0]/a[2],y:-a[1]/a[2],width:n/a[2],height:s/a[2]};return ql(c,cf(l))>0}const z3=({source:t,sourceHandle:e,target:n,targetHandle:s})=>`xy-edge__${t}${e||""}-${n}${s||""}`,B3=(t,e)=>e.some(n=>n.source===t.source&&n.target===t.target&&(n.sourceHandle===t.sourceHandle||!n.sourceHandle&&!t.sourceHandle)&&(n.targetHandle===t.targetHandle||!n.targetHandle&&!t.targetHandle)),c1=(t,e)=>{if(!t.source||!t.target)return e;let n;return WE(t)?n={...t}:n={...t,id:z3(t)},B3(n,e)?e:(n.sourceHandle===null&&delete n.sourceHandle,n.targetHandle===null&&delete n.targetHandle,e.concat(n))};function u1({sourceX:t,sourceY:e,targetX:n,targetY:s}){const[a,l,c,d]=l1({sourceX:t,sourceY:e,targetX:n,targetY:s});return[`M ${t},${e}L ${n},${s}`,a,l,c,d]}const Uw={[Ce.Left]:{x:-1,y:0},[Ce.Right]:{x:1,y:0},[Ce.Top]:{x:0,y:-1},[Ce.Bottom]:{x:0,y:1}},P3=({source:t,sourcePosition:e=Ce.Bottom,target:n})=>e===Ce.Left||e===Ce.Right?t.x<n.x?{x:1,y:0}:{x:-1,y:0}:t.y<n.y?{x:0,y:1}:{x:0,y:-1},$w=(t,e)=>Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2));function q3({source:t,sourcePosition:e=Ce.Bottom,target:n,targetPosition:s=Ce.Top,center:a,offset:l,stepPosition:c}){const d=Uw[e],f=Uw[s],h={x:t.x+d.x*l,y:t.y+d.y*l},g={x:n.x+f.x*l,y:n.y+f.y*l},p=P3({source:h,sourcePosition:e,target:g}),v=p.x!==0?"x":"y",b=p[v];let x=[],w,S;const C={x:0,y:0},N={x:0,y:0},[,,E,A]=l1({sourceX:t.x,sourceY:t.y,targetX:n.x,targetY:n.y});if(d[v]*f[v]===-1){v==="x"?(w=a.x??h.x+(g.x-h.x)*c,S=a.y??(h.y+g.y)/2):(w=a.x??(h.x+g.x)/2,S=a.y??h.y+(g.y-h.y)*c);const j=[{x:w,y:h.y},{x:w,y:g.y}],D=[{x:h.x,y:S},{x:g.x,y:S}];d[v]===b?x=v==="x"?j:D:x=v==="x"?D:j}else{const j=[{x:h.x,y:g.y}],D=[{x:g.x,y:h.y}];if(v==="x"?x=d.x===b?D:j:x=d.y===b?j:D,e===s){const L=Math.abs(t[v]-n[v]);if(L<=l){const W=Math.min(l-1,l-L);d[v]===b?C[v]=(h[v]>t[v]?-1:1)*W:N[v]=(g[v]>n[v]?-1:1)*W}}if(e!==s){const L=v==="x"?"y":"x",W=d[v]===f[L],I=h[L]>g[L],Y=h[L]<g[L];(d[v]===1&&(!W&&I||W&&Y)||d[v]!==1&&(!W&&Y||W&&I))&&(x=v==="x"?j:D)}const $={x:h.x+C.x,y:h.y+C.y},P={x:g.x+N.x,y:g.y+N.y},K=Math.max(Math.abs($.x-x[0].x),Math.abs(P.x-x[0].x)),G=Math.max(Math.abs($.y-x[0].y),Math.abs(P.y-x[0].y));K>=G?(w=($.x+P.x)/2,S=x[0].y):(w=x[0].x,S=($.y+P.y)/2)}return[[t,{x:h.x+C.x,y:h.y+C.y},...x,{x:g.x+N.x,y:g.y+N.y},n],w,S,E,A]}function H3(t,e,n,s){const a=Math.min($w(t,e)/2,$w(e,n)/2,s),{x:l,y:c}=e;if(t.x===l&&l===n.x||t.y===c&&c===n.y)return`L${l} ${c}`;if(t.y===c){const h=t.x<n.x?-1:1,g=t.y<n.y?1:-1;return`L ${l+a*h},${c}Q ${l},${c} ${l},${c+a*g}`}const d=t.x<n.x?1:-1,f=t.y<n.y?-1:1;return`L ${l},${c+a*f}Q ${l},${c} ${l+a*d},${c}`}function Kp({sourceX:t,sourceY:e,sourcePosition:n=Ce.Bottom,targetX:s,targetY:a,targetPosition:l=Ce.Top,borderRadius:c=5,centerX:d,centerY:f,offset:h=20,stepPosition:g=.5}){const[p,v,b,x,w]=q3({source:{x:t,y:e},sourcePosition:n,target:{x:s,y:a},targetPosition:l,center:{x:d,y:f},offset:h,stepPosition:g});return[p.reduce((C,N,E)=>{let A="";return E>0&&E<p.length-1?A=H3(p[E-1],N,p[E+1],c):A=`${E===0?"M":"L"}${N.x} ${N.y}`,C+=A,C},""),v,b,x,w]}function Iw(t){return t&&!!(t.internals.handleBounds||t.handles?.length)&&!!(t.measured.width||t.width||t.initialWidth)}function V3(t){const{sourceNode:e,targetNode:n}=t;if(!Iw(e)||!Iw(n))return null;const s=e.internals.handleBounds||Lw(e.handles),a=n.internals.handleBounds||Lw(n.handles),l=zw(s?.source??[],t.sourceHandle),c=zw(t.connectionMode===Va.Strict?a?.target??[]:(a?.target??[]).concat(a?.source??[]),t.targetHandle);if(!l||!c)return t.onError?.("008",rr.error008(l?"target":"source",{id:t.id,sourceHandle:t.sourceHandle,targetHandle:t.targetHandle})),null;const d=l?.position||Ce.Bottom,f=c?.position||Ce.Top,h=Vl(e,l,d),g=Vl(n,c,f);return{sourceX:h.x,sourceY:h.y,targetX:g.x,targetY:g.y,sourcePosition:d,targetPosition:f}}function Lw(t){if(!t)return null;const e=[],n=[];for(const s of t)s.width=s.width??1,s.height=s.height??1,s.type==="source"?e.push(s):s.type==="target"&&n.push(s);return{source:e,target:n}}function Vl(t,e,n=Ce.Left,s=!1){const a=(e?.x??0)+t.internals.positionAbsolute.x,l=(e?.y??0)+t.internals.positionAbsolute.y,{width:c,height:d}=e??Wr(t);if(s)return{x:a+c/2,y:l+d/2};switch(e?.position??n){case Ce.Top:return{x:a+c/2,y:l};case Ce.Right:return{x:a+c,y:l+d/2};case Ce.Bottom:return{x:a+c/2,y:l+d};case Ce.Left:return{x:a,y:l+d/2}}}function zw(t,e){return t&&(e?t.find(n=>n.id===e):t[0])||null}function Qp(t,e){return t?typeof t=="string"?t:`${e?`${e}__`:""}${Object.keys(t).sort().map(s=>`${s}=${t[s]}`).join("&")}`:""}function F3(t,{id:e,defaultColor:n,defaultMarkerStart:s,defaultMarkerEnd:a}){const l=new Set;return t.reduce((c,d)=>([d.markerStart||s,d.markerEnd||a].forEach(f=>{if(f&&typeof f=="object"){const h=Qp(f,e);l.has(h)||(c.push({id:h,color:f.color||n,...f}),l.add(h))}}),c),[]).sort((c,d)=>c.id.localeCompare(d.id))}const d1=1e3,Y3=10,Vg={nodeOrigin:[0,0],nodeExtent:Bl,elevateNodesOnSelect:!0,defaults:{}},G3={...Vg,checkEquality:!0};function Fg(t,e){const n={...t};for(const s in e)e[s]!==void 0&&(n[s]=e[s]);return n}function X3(t,e,n){const s=Fg(Vg,n);for(const a of t.values())if(a.parentId)Yg(a,t,e,s);else{const l=tc(a,s.nodeOrigin),c=Ga(a.extent)?a.extent:s.nodeExtent,d=Ci(l,c,Wr(a));a.internals.positionAbsolute=d}}function K3(t,e){if(!t.handles)return t.measured?e?.internals.handleBounds:void 0;const n=[],s=[];for(const a of t.handles){const l={id:a.id,width:a.width??1,height:a.height??1,nodeId:t.id,x:a.x,y:a.y,position:a.position,type:a.type};a.type==="source"?n.push(l):a.type==="target"&&s.push(l)}return{source:n,target:s}}function Wp(t,e,n,s){const a=Fg(G3,s);let l={i:-1},c=t.length>0;const d=new Map(e),f=a?.elevateNodesOnSelect?d1:0;e.clear(),n.clear();for(const h of t){let g=d.get(h.id);if(a.checkEquality&&h===g?.internals.userNode)e.set(h.id,g);else{const p=tc(h,a.nodeOrigin),v=Ga(h.extent)?h.extent:a.nodeExtent,b=Ci(p,v,Wr(h));g={...a.defaults,...h,measured:{width:h.measured?.width,height:h.measured?.height},internals:{positionAbsolute:b,handleBounds:K3(h,g),z:f1(h,f),userNode:h}},e.set(h.id,g)}(g.measured===void 0||g.measured.width===void 0||g.measured.height===void 0)&&!g.hidden&&(c=!1),h.parentId&&Yg(g,e,n,s,l)}return c}function Q3(t,e){if(!t.parentId)return;const n=e.get(t.parentId);n?n.set(t.id,t):e.set(t.parentId,new Map([[t.id,t]]))}function Yg(t,e,n,s,a){const{elevateNodesOnSelect:l,nodeOrigin:c,nodeExtent:d}=Fg(Vg,s),f=t.parentId,h=e.get(f);if(!h){console.warn(`Parent node ${f} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}Q3(t,n),a&&!h.parentId&&h.internals.rootParentIndex===void 0&&(h.internals.rootParentIndex=++a.i,h.internals.z=h.internals.z+a.i*Y3),a&&h.internals.rootParentIndex!==void 0&&(a.i=h.internals.rootParentIndex);const g=l?d1:0,{x:p,y:v,z:b}=W3(t,h,c,d,g),{positionAbsolute:x}=t.internals,w=p!==x.x||v!==x.y;(w||b!==t.internals.z)&&e.set(t.id,{...t,internals:{...t.internals,positionAbsolute:w?{x:p,y:v}:x,z:b}})}function f1(t,e){return(tr(t.zIndex)?t.zIndex:0)+(t.selected?e:0)}function W3(t,e,n,s,a){const{x:l,y:c}=e.internals.positionAbsolute,d=Wr(t),f=tc(t,n),h=Ga(t.extent)?Ci(f,t.extent,d):f;let g=Ci({x:l+h.x,y:c+h.y},s,d);t.extent==="parent"&&(g=ZE(g,d,e));const p=f1(t,a),v=e.internals.z??0;return{x:g.x,y:g.y,z:v>=p?v+1:p}}function Gg(t,e,n,s=[0,0]){const a=[],l=new Map;for(const c of t){const d=e.get(c.parentId);if(!d)continue;const f=l.get(c.parentId)?.expandedRect??Ya(d),h=t1(f,c.rect);l.set(c.parentId,{expandedRect:h,parent:d})}return l.size>0&&l.forEach(({expandedRect:c,parent:d},f)=>{const h=d.internals.positionAbsolute,g=Wr(d),p=d.origin??s,v=c.x<h.x?Math.round(Math.abs(h.x-c.x)):0,b=c.y<h.y?Math.round(Math.abs(h.y-c.y)):0,x=Math.max(g.width,Math.round(c.width)),w=Math.max(g.height,Math.round(c.height)),S=(x-g.width)*p[0],C=(w-g.height)*p[1];(v>0||b>0||S||C)&&(a.push({id:f,type:"position",position:{x:d.position.x-v+S,y:d.position.y-b+C}}),n.get(f)?.forEach(N=>{t.some(E=>E.id===N.id)||a.push({id:N.id,type:"position",position:{x:N.position.x+v,y:N.position.y+b}})})),(g.width<c.width||g.height<c.height||v||b)&&a.push({id:f,type:"dimensions",setAttributes:!0,dimensions:{width:x+(v?p[0]*v-S:0),height:w+(b?p[1]*b-C:0)}})}),a}function J3(t,e,n,s,a,l){const c=s?.querySelector(".xyflow__viewport");let d=!1;if(!c)return{changes:[],updatedInternals:d};const f=[],h=window.getComputedStyle(c),{m22:g}=new window.DOMMatrixReadOnly(h.transform),p=[];for(const v of t.values()){const b=e.get(v.id);if(!b)continue;if(b.hidden){e.set(b.id,{...b,internals:{...b.internals,handleBounds:void 0}}),d=!0;continue}const x=qg(v.nodeElement),w=b.measured.width!==x.width||b.measured.height!==x.height;if(!!(x.width&&x.height&&(w||!b.internals.handleBounds||v.force))){const C=v.nodeElement.getBoundingClientRect(),N=Ga(b.extent)?b.extent:l;let{positionAbsolute:E}=b.internals;b.parentId&&b.extent==="parent"?E=ZE(E,x,e.get(b.parentId)):N&&(E=Ci(E,N,x));const A={...b,measured:x,internals:{...b.internals,positionAbsolute:E,handleBounds:{source:Mw("source",v.nodeElement,C,g,b.id),target:Mw("target",v.nodeElement,C,g,b.id)}}};e.set(b.id,A),b.parentId&&Yg(A,e,n,{nodeOrigin:a}),d=!0,w&&(f.push({id:b.id,type:"dimensions",dimensions:x}),b.expandParent&&b.parentId&&p.push({id:b.id,parentId:b.parentId,rect:Ya(A,a)}))}}if(p.length>0){const v=Gg(p,e,n,a);f.push(...v)}return{changes:f,updatedInternals:d}}async function Z3({delta:t,panZoom:e,transform:n,translateExtent:s,width:a,height:l}){if(!e||!t.x&&!t.y)return Promise.resolve(!1);const c=await e.setViewportConstrained({x:n[0]+t.x,y:n[1]+t.y,zoom:n[2]},[[0,0],[a,l]],s),d=!!c&&(c.x!==n[0]||c.y!==n[1]||c.k!==n[2]);return Promise.resolve(d)}function Bw(t,e,n,s,a,l){let c=a;const d=s.get(c)||new Map;s.set(c,d.set(n,e)),c=`${a}-${t}`;const f=s.get(c)||new Map;if(s.set(c,f.set(n,e)),l){c=`${a}-${t}-${l}`;const h=s.get(c)||new Map;s.set(c,h.set(n,e))}}function h1(t,e,n){t.clear(),e.clear();for(const s of n){const{source:a,target:l,sourceHandle:c=null,targetHandle:d=null}=s,f={edgeId:s.id,source:a,target:l,sourceHandle:c,targetHandle:d},h=`${a}-${c}--${l}-${d}`,g=`${l}-${d}--${a}-${c}`;Bw("source",f,g,t,a,c),Bw("target",f,h,t,l,d),e.set(s.id,s)}}function e$(t,e){if(t===null||e===null)return!1;const n=Array.isArray(t)?t:[t],s=Array.isArray(e)?e:[e];if(n.length!==s.length)return!1;for(let a=0;a<n.length;a++)if(n[a].id!==s[a].id||n[a].type!==s[a].type||!Object.is(n[a].data,s[a].data))return!1;return!0}function m1(t,e){if(!t.parentId)return!1;const n=e.get(t.parentId);return n?n.selected?!0:m1(n,e):!1}function Pw(t,e,n){let s=t;do{if(s?.matches?.(e))return!0;if(s===n)return!1;s=s?.parentElement}while(s);return!1}function t$(t,e,n,s){const a=new Map;for(const[l,c]of t)if((c.selected||c.id===s)&&(!c.parentId||!m1(c,t))&&(c.draggable||e&&typeof c.draggable>"u")){const d=t.get(l);d&&a.set(l,{id:l,position:d.position||{x:0,y:0},distance:{x:n.x-d.internals.positionAbsolute.x,y:n.y-d.internals.positionAbsolute.y},extent:d.extent,parentId:d.parentId,origin:d.origin,expandParent:d.expandParent,internals:{positionAbsolute:d.internals.positionAbsolute||{x:0,y:0}},measured:{width:d.measured.width??0,height:d.measured.height??0}})}return a}function ap({nodeId:t,dragItems:e,nodeLookup:n,dragging:s=!0}){const a=[];for(const[c,d]of e){const f=n.get(c)?.internals.userNode;f&&a.push({...f,position:d.position,dragging:s})}if(!t)return[a[0],a];const l=n.get(t)?.internals.userNode;return[l?{...l,position:e.get(t)?.position||l.position,dragging:s}:a[0],a]}function n$({dragItems:t,snapGrid:e,x:n,y:s}){const a=t.values().next().value;if(!a)return null;const l={x:n-a.distance.x,y:s-a.distance.y},c=rc(l,e);return{x:c.x-l.x,y:c.y-l.y}}function r$({onNodeMouseDown:t,getStoreItems:e,onDragStart:n,onDrag:s,onDragStop:a}){let l={x:null,y:null},c=0,d=new Map,f=!1,h={x:0,y:0},g=null,p=!1,v=null,b=!1,x=!1,w=null;function S({noDragClassName:N,handleSelector:E,domNode:A,isSelectable:O,nodeId:j,nodeClickDistance:D=0}){v=On(A);function $({x:L,y:W}){const{nodeLookup:I,nodeExtent:Y,snapGrid:k,snapToGrid:z,nodeOrigin:V,onNodeDrag:q,onSelectionDrag:H,onError:M,updateNodePositions:B}=e();l={x:L,y:W};let Q=!1;const ee=d.size>1,he=ee&&Y?Xp(nc(d)):null,ge=ee&&z?n$({dragItems:d,snapGrid:k,x:L,y:W}):null;for(const[ae,le]of d){if(!I.has(ae))continue;let Z={x:L-le.distance.x,y:W-le.distance.y};z&&(Z=ge?{x:Math.round(Z.x+ge.x),y:Math.round(Z.y+ge.y)}:rc(Z,k));let fe=null;if(ee&&Y&&!le.extent&&he){const{positionAbsolute:be}=le.internals,De=be.x-he.x+Y[0][0],oe=be.x+le.measured.width-he.x2+Y[1][0],_e=be.y-he.y+Y[0][1],Le=be.y+le.measured.height-he.y2+Y[1][1];fe=[[De,_e],[oe,Le]]}const{position:pe,positionAbsolute:ve}=JE({nodeId:ae,nextPosition:Z,nodeLookup:I,nodeExtent:fe||Y,nodeOrigin:V,onError:M});Q=Q||le.position.x!==pe.x||le.position.y!==pe.y,le.position=pe,le.internals.positionAbsolute=ve}if(x=x||Q,!!Q&&(B(d,!0),w&&(s||q||!j&&H))){const[ae,le]=ap({nodeId:j,dragItems:d,nodeLookup:I});s?.(w,d,ae,le),q?.(w,ae,le),j||H?.(w,le)}}async function P(){if(!g)return;const{transform:L,panBy:W,autoPanSpeed:I,autoPanOnNodeDrag:Y}=e();if(!Y){f=!1,cancelAnimationFrame(c);return}const[k,z]=e1(h,g,I);(k!==0||z!==0)&&(l.x=(l.x??0)-k/L[2],l.y=(l.y??0)-z/L[2],await W({x:k,y:z})&&$(l)),c=requestAnimationFrame(P)}function K(L){const{nodeLookup:W,multiSelectionActive:I,nodesDraggable:Y,transform:k,snapGrid:z,snapToGrid:V,selectNodesOnDrag:q,onNodeDragStart:H,onSelectionDragStart:M,unselectNodesAndEdges:B}=e();p=!0,(!q||!O)&&!I&&j&&(W.get(j)?.selected||B()),O&&q&&j&&t?.(j);const Q=Tl(L.sourceEvent,{transform:k,snapGrid:z,snapToGrid:V,containerBounds:g});if(l=Q,d=t$(W,Y,Q,j),d.size>0&&(n||H||!j&&M)){const[ee,he]=ap({nodeId:j,dragItems:d,nodeLookup:W});n?.(L.sourceEvent,d,ee,he),H?.(L.sourceEvent,ee,he),j||M?.(L.sourceEvent,he)}}const G=jE().clickDistance(D).on("start",L=>{const{domNode:W,nodeDragThreshold:I,transform:Y,snapGrid:k,snapToGrid:z}=e();g=W?.getBoundingClientRect()||null,b=!1,x=!1,w=L.sourceEvent,I===0&&K(L),l=Tl(L.sourceEvent,{transform:Y,snapGrid:k,snapToGrid:z,containerBounds:g}),h=nr(L.sourceEvent,g)}).on("drag",L=>{const{autoPanOnNodeDrag:W,transform:I,snapGrid:Y,snapToGrid:k,nodeDragThreshold:z,nodeLookup:V}=e(),q=Tl(L.sourceEvent,{transform:I,snapGrid:Y,snapToGrid:k,containerBounds:g});if(w=L.sourceEvent,(L.sourceEvent.type==="touchmove"&&L.sourceEvent.touches.length>1||j&&!V.has(j))&&(b=!0),!b){if(!f&&W&&p&&(f=!0,P()),!p){const H=nr(L.sourceEvent,g),M=H.x-h.x,B=H.y-h.y;Math.sqrt(M*M+B*B)>z&&K(L)}(l.x!==q.xSnapped||l.y!==q.ySnapped)&&d&&p&&(h=nr(L.sourceEvent,g),$(q))}}).on("end",L=>{if(!(!p||b)&&(f=!1,p=!1,cancelAnimationFrame(c),d.size>0)){const{nodeLookup:W,updateNodePositions:I,onNodeDragStop:Y,onSelectionDragStop:k}=e();if(x&&(I(d,!1),x=!1),a||Y||!j&&k){const[z,V]=ap({nodeId:j,dragItems:d,nodeLookup:W,dragging:!1});a?.(L.sourceEvent,d,z,V),Y?.(L.sourceEvent,z,V),j||k?.(L.sourceEvent,V)}}}).filter(L=>{const W=L.target;return!L.button&&(!N||!Pw(W,`.${N}`,A))&&(!E||Pw(W,E,A))});v.call(G)}function C(){v?.on(".drag",null)}return{update:S,destroy:C}}function s$(t,e,n){const s=[],a={x:t.x-n,y:t.y-n,width:n*2,height:n*2};for(const l of e.values())ql(a,Ya(l))>0&&s.push(l);return s}const i$=250;function a$(t,e,n,s){let a=[],l=1/0;const c=s$(t,n,e+i$);for(const d of c){const f=[...d.internals.handleBounds?.source??[],...d.internals.handleBounds?.target??[]];for(const h of f){if(s.nodeId===h.nodeId&&s.type===h.type&&s.id===h.id)continue;const{x:g,y:p}=Vl(d,h,h.position,!0),v=Math.sqrt(Math.pow(g-t.x,2)+Math.pow(p-t.y,2));v>e||(v<l?(a=[{...h,x:g,y:p}],l=v):v===l&&a.push({...h,x:g,y:p}))}}if(!a.length)return null;if(a.length>1){const d=s.type==="source"?"target":"source";return a.find(f=>f.type===d)??a[0]}return a[0]}function p1(t,e,n,s,a,l=!1){const c=s.get(t);if(!c)return null;const d=a==="strict"?c.internals.handleBounds?.[e]:[...c.internals.handleBounds?.source??[],...c.internals.handleBounds?.target??[]],f=(n?d?.find(h=>h.id===n):d?.[0])??null;return f&&l?{...f,...Vl(c,f,f.position,!0)}:f}function g1(t,e){return t||(e?.classList.contains("target")?"target":e?.classList.contains("source")?"source":null)}function o$(t,e){let n=null;return e?n=!0:t&&!e&&(n=!1),n}const y1=()=>!0;function l$(t,{connectionMode:e,connectionRadius:n,handleId:s,nodeId:a,edgeUpdaterType:l,isTarget:c,domNode:d,nodeLookup:f,lib:h,autoPanOnConnect:g,flowId:p,panBy:v,cancelConnection:b,onConnectStart:x,onConnect:w,onConnectEnd:S,isValidConnection:C=y1,onReconnectEnd:N,updateConnection:E,getTransform:A,getFromHandle:O,autoPanSpeed:j,dragThreshold:D=1,handleDomNode:$}){const P=s1(t.target);let K=0,G;const{x:L,y:W}=nr(t),I=g1(l,$),Y=d?.getBoundingClientRect();let k=!1;if(!Y||!I)return;const z=p1(a,I,s,f,e);if(!z)return;let V=nr(t,Y),q=!1,H=null,M=!1,B=null;function Q(){if(!g||!Y)return;const[pe,ve]=e1(V,Y,j);v({x:pe,y:ve}),K=requestAnimationFrame(Q)}const ee={...z,nodeId:a,type:I,position:z.position},he=f.get(a);let ae={inProgress:!0,isValid:null,from:Vl(he,ee,Ce.Left,!0),fromHandle:ee,fromPosition:ee.position,fromNode:he,to:V,toHandle:null,toPosition:Nw[ee.position],toNode:null,pointer:V};function le(){k=!0,E(ae),x?.(t,{nodeId:a,handleId:s,handleType:I})}D===0&&le();function Z(pe){if(!k){const{x:oe,y:_e}=nr(pe),Le=oe-L,Je=_e-W;if(!(Le*Le+Je*Je>D*D))return;le()}if(!O()||!ee){fe(pe);return}const ve=A();V=nr(pe,Y),G=a$(sc(V,ve,!1,[1,1]),n,f,ee),q||(Q(),q=!0);const be=v1(pe,{handle:G,connectionMode:e,fromNodeId:a,fromHandleId:s,fromType:c?"target":"source",isValidConnection:C,doc:P,lib:h,flowId:p,nodeLookup:f});B=be.handleDomNode,H=be.connection,M=o$(!!G,be.isValid);const De={...ae,isValid:M,to:be.toHandle&&M?Ld({x:be.toHandle.x,y:be.toHandle.y},ve):V,toHandle:be.toHandle,toPosition:M&&be.toHandle?be.toHandle.position:Nw[ee.position],toNode:be.toHandle?f.get(be.toHandle.nodeId):null,pointer:V};E(De),ae=De}function fe(pe){if(!("touches"in pe&&pe.touches.length>0)){if(k){(G||B)&&H&&M&&w?.(H);const{inProgress:ve,...be}=ae,De={...be,toPosition:ae.toHandle?ae.toPosition:null};S?.(pe,De),l&&N?.(pe,De)}b(),cancelAnimationFrame(K),q=!1,M=!1,H=null,B=null,P.removeEventListener("mousemove",Z),P.removeEventListener("mouseup",fe),P.removeEventListener("touchmove",Z),P.removeEventListener("touchend",fe)}}P.addEventListener("mousemove",Z),P.addEventListener("mouseup",fe),P.addEventListener("touchmove",Z),P.addEventListener("touchend",fe)}function v1(t,{handle:e,connectionMode:n,fromNodeId:s,fromHandleId:a,fromType:l,doc:c,lib:d,flowId:f,isValidConnection:h=y1,nodeLookup:g}){const p=l==="target",v=e?c.querySelector(`.${d}-flow__handle[data-id="${f}-${e?.nodeId}-${e?.id}-${e?.type}"]`):null,{x:b,y:x}=nr(t),w=c.elementFromPoint(b,x),S=w?.classList.contains(`${d}-flow__handle`)?w:v,C={handleDomNode:S,isValid:!1,connection:null,toHandle:null};if(S){const N=g1(void 0,S),E=S.getAttribute("data-nodeid"),A=S.getAttribute("data-handleid"),O=S.classList.contains("connectable"),j=S.classList.contains("connectableend");if(!E||!N)return C;const D={source:p?E:s,sourceHandle:p?A:a,target:p?s:E,targetHandle:p?a:A};C.connection=D;const P=O&&j&&(n===Va.Strict?p&&N==="source"||!p&&N==="target":E!==s||A!==a);C.isValid=P&&h(D),C.toHandle=p1(E,N,A,g,n,!0)}return C}const Jp={onPointerDown:l$,isValid:v1};function c$({domNode:t,panZoom:e,getTransform:n,getViewScale:s}){const a=On(t);function l({translateExtent:d,width:f,height:h,zoomStep:g=1,pannable:p=!0,zoomable:v=!0,inversePan:b=!1}){const x=E=>{if(E.sourceEvent.type!=="wheel"||!e)return;const A=n(),O=E.sourceEvent.ctrlKey&&Hl()?10:1,j=-E.sourceEvent.deltaY*(E.sourceEvent.deltaMode===1?.05:E.sourceEvent.deltaMode?1:.002)*g,D=A[2]*Math.pow(2,j*O);e.scaleTo(D)};let w=[0,0];const S=E=>{(E.sourceEvent.type==="mousedown"||E.sourceEvent.type==="touchstart")&&(w=[E.sourceEvent.clientX??E.sourceEvent.touches[0].clientX,E.sourceEvent.clientY??E.sourceEvent.touches[0].clientY])},C=E=>{const A=n();if(E.sourceEvent.type!=="mousemove"&&E.sourceEvent.type!=="touchmove"||!e)return;const O=[E.sourceEvent.clientX??E.sourceEvent.touches[0].clientX,E.sourceEvent.clientY??E.sourceEvent.touches[0].clientY],j=[O[0]-w[0],O[1]-w[1]];w=O;const D=s()*Math.max(A[2],Math.log(A[2]))*(b?-1:1),$={x:A[0]-j[0]*D,y:A[1]-j[1]*D},P=[[0,0],[f,h]];e.setViewportConstrained({x:$.x,y:$.y,zoom:A[2]},P,d)},N=YE().on("start",S).on("zoom",p?C:null).on("zoom.wheel",v?x:null);a.call(N,{})}function c(){a.on("zoom",null)}return{update:l,destroy:c,pointer:Zn}}const uf=t=>({x:t.x,y:t.y,zoom:t.k}),op=({x:t,y:e,zoom:n})=>of.translate(t,e).scale(n),Ua=(t,e)=>t.target.closest(`.${e}`),b1=(t,e)=>e===2&&Array.isArray(t)&&t.includes(2),u$=t=>((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2,lp=(t,e=0,n=u$,s=()=>{})=>{const a=typeof e=="number"&&e>0;return a||s(),a?t.transition().duration(e).ease(n).on("end",s):t},_1=t=>{const e=t.ctrlKey&&Hl()?10:1;return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*e};function d$({zoomPanValues:t,noWheelClassName:e,d3Selection:n,d3Zoom:s,panOnScrollMode:a,panOnScrollSpeed:l,zoomOnPinch:c,onPanZoomStart:d,onPanZoom:f,onPanZoomEnd:h}){return g=>{if(Ua(g,e))return g.ctrlKey&&g.preventDefault(),!1;g.preventDefault(),g.stopImmediatePropagation();const p=n.property("__zoom").k||1;if(g.ctrlKey&&c){const S=Zn(g),C=_1(g),N=p*Math.pow(2,C);s.scaleTo(n,N,S,g);return}const v=g.deltaMode===1?20:1;let b=a===xi.Vertical?0:g.deltaX*v,x=a===xi.Horizontal?0:g.deltaY*v;!Hl()&&g.shiftKey&&a!==xi.Vertical&&(b=g.deltaY*v,x=0),s.translateBy(n,-(b/p)*l,-(x/p)*l,{internal:!0});const w=uf(n.property("__zoom"));clearTimeout(t.panScrollTimeout),t.isPanScrolling?(f?.(g,w),t.panScrollTimeout=setTimeout(()=>{h?.(g,w),t.isPanScrolling=!1},150)):(t.isPanScrolling=!0,d?.(g,w))}}function f$({noWheelClassName:t,preventScrolling:e,d3ZoomHandler:n}){return function(s,a){const l=s.type==="wheel",c=!e&&l&&!s.ctrlKey,d=Ua(s,t);if(s.ctrlKey&&l&&d&&s.preventDefault(),c||d)return null;s.preventDefault(),n.call(this,s,a)}}function h$({zoomPanValues:t,onDraggingChange:e,onPanZoomStart:n}){return s=>{if(s.sourceEvent?.internal)return;const a=uf(s.transform);t.mouseButton=s.sourceEvent?.button||0,t.isZoomingOrPanning=!0,t.prevViewport=a,s.sourceEvent?.type==="mousedown"&&e(!0),n&&n?.(s.sourceEvent,a)}}function m$({zoomPanValues:t,panOnDrag:e,onPaneContextMenu:n,onTransformChange:s,onPanZoom:a}){return l=>{t.usedRightMouseButton=!!(n&&b1(e,t.mouseButton??0)),l.sourceEvent?.sync||s([l.transform.x,l.transform.y,l.transform.k]),a&&!l.sourceEvent?.internal&&a?.(l.sourceEvent,uf(l.transform))}}function p$({zoomPanValues:t,panOnDrag:e,panOnScroll:n,onDraggingChange:s,onPanZoomEnd:a,onPaneContextMenu:l}){return c=>{if(!c.sourceEvent?.internal&&(t.isZoomingOrPanning=!1,l&&b1(e,t.mouseButton??0)&&!t.usedRightMouseButton&&c.sourceEvent&&l(c.sourceEvent),t.usedRightMouseButton=!1,s(!1),a)){const d=uf(c.transform);t.prevViewport=d,clearTimeout(t.timerId),t.timerId=setTimeout(()=>{a?.(c.sourceEvent,d)},n?150:0)}}}function g$({zoomActivationKeyPressed:t,zoomOnScroll:e,zoomOnPinch:n,panOnDrag:s,panOnScroll:a,zoomOnDoubleClick:l,userSelectionActive:c,noWheelClassName:d,noPanClassName:f,lib:h,connectionInProgress:g}){return p=>{const v=t||e,b=n&&p.ctrlKey,x=p.type==="wheel";if(p.button===1&&p.type==="mousedown"&&(Ua(p,`${h}-flow__node`)||Ua(p,`${h}-flow__edge`)))return!0;if(!s&&!v&&!a&&!l&&!n||c||g&&!x||Ua(p,d)&&x||Ua(p,f)&&(!x||a&&x&&!t)||!n&&p.ctrlKey&&x)return!1;if(!n&&p.type==="touchstart"&&p.touches?.length>1)return p.preventDefault(),!1;if(!v&&!a&&!b&&x||!s&&(p.type==="mousedown"||p.type==="touchstart")||Array.isArray(s)&&!s.includes(p.button)&&p.type==="mousedown")return!1;const w=Array.isArray(s)&&s.includes(p.button)||!p.button||p.button<=1;return(!p.ctrlKey||x)&&w}}function y$({domNode:t,minZoom:e,maxZoom:n,translateExtent:s,viewport:a,onPanZoom:l,onPanZoomStart:c,onPanZoomEnd:d,onDraggingChange:f}){const h={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},g=t.getBoundingClientRect(),p=YE().scaleExtent([e,n]).translateExtent(s),v=On(t).call(p);N({x:a.x,y:a.y,zoom:Fa(a.zoom,e,n)},[[0,0],[g.width,g.height]],s);const b=v.on("wheel.zoom"),x=v.on("dblclick.zoom");p.wheelDelta(_1);function w(G,L){return v?new Promise(W=>{p?.interpolate(L?.interpolate==="linear"?Al:ud).transform(lp(v,L?.duration,L?.ease,()=>W(!0)),G)}):Promise.resolve(!1)}function S({noWheelClassName:G,noPanClassName:L,onPaneContextMenu:W,userSelectionActive:I,panOnScroll:Y,panOnDrag:k,panOnScrollMode:z,panOnScrollSpeed:V,preventScrolling:q,zoomOnPinch:H,zoomOnScroll:M,zoomOnDoubleClick:B,zoomActivationKeyPressed:Q,lib:ee,onTransformChange:he,connectionInProgress:ge,paneClickDistance:ae,selectionOnDrag:le}){I&&!h.isZoomingOrPanning&&C();const Z=Y&&!Q&&!I;p.clickDistance(le?1/0:!tr(ae)||ae<0?0:ae);const fe=Z?d$({zoomPanValues:h,noWheelClassName:G,d3Selection:v,d3Zoom:p,panOnScrollMode:z,panOnScrollSpeed:V,zoomOnPinch:H,onPanZoomStart:c,onPanZoom:l,onPanZoomEnd:d}):f$({noWheelClassName:G,preventScrolling:q,d3ZoomHandler:b});if(v.on("wheel.zoom",fe,{passive:!1}),!I){const ve=h$({zoomPanValues:h,onDraggingChange:f,onPanZoomStart:c});p.on("start",ve);const be=m$({zoomPanValues:h,panOnDrag:k,onPaneContextMenu:!!W,onPanZoom:l,onTransformChange:he});p.on("zoom",be);const De=p$({zoomPanValues:h,panOnDrag:k,panOnScroll:Y,onPaneContextMenu:W,onPanZoomEnd:d,onDraggingChange:f});p.on("end",De)}const pe=g$({zoomActivationKeyPressed:Q,panOnDrag:k,zoomOnScroll:M,panOnScroll:Y,zoomOnDoubleClick:B,zoomOnPinch:H,userSelectionActive:I,noPanClassName:L,noWheelClassName:G,lib:ee,connectionInProgress:ge});p.filter(pe),B?v.on("dblclick.zoom",x):v.on("dblclick.zoom",null)}function C(){p.on("zoom",null)}async function N(G,L,W){const I=op(G),Y=p?.constrain()(I,L,W);return Y&&await w(Y),new Promise(k=>k(Y))}async function E(G,L){const W=op(G);return await w(W,L),new Promise(I=>I(W))}function A(G){if(v){const L=op(G),W=v.property("__zoom");(W.k!==G.zoom||W.x!==G.x||W.y!==G.y)&&p?.transform(v,L,null,{sync:!0})}}function O(){const G=v?FE(v.node()):{x:0,y:0,k:1};return{x:G.x,y:G.y,zoom:G.k}}function j(G,L){return v?new Promise(W=>{p?.interpolate(L?.interpolate==="linear"?Al:ud).scaleTo(lp(v,L?.duration,L?.ease,()=>W(!0)),G)}):Promise.resolve(!1)}function D(G,L){return v?new Promise(W=>{p?.interpolate(L?.interpolate==="linear"?Al:ud).scaleBy(lp(v,L?.duration,L?.ease,()=>W(!0)),G)}):Promise.resolve(!1)}function $(G){p?.scaleExtent(G)}function P(G){p?.translateExtent(G)}function K(G){const L=!tr(G)||G<0?0:G;p?.clickDistance(L)}return{update:S,destroy:C,setViewport:E,setViewportConstrained:N,getViewport:O,scaleTo:j,scaleBy:D,setScaleExtent:$,setTranslateExtent:P,syncViewport:A,setClickDistance:K}}var Xa;(function(t){t.Line="line",t.Handle="handle"})(Xa||(Xa={}));function v$({width:t,prevWidth:e,height:n,prevHeight:s,affectsX:a,affectsY:l}){const c=t-e,d=n-s,f=[c>0?1:c<0?-1:0,d>0?1:d<0?-1:0];return c&&a&&(f[0]=f[0]*-1),d&&l&&(f[1]=f[1]*-1),f}function qw(t){const e=t.includes("right")||t.includes("left"),n=t.includes("bottom")||t.includes("top"),s=t.includes("left"),a=t.includes("top");return{isHorizontal:e,isVertical:n,affectsX:s,affectsY:a}}function Os(t,e){return Math.max(0,e-t)}function Rs(t,e){return Math.max(0,t-e)}function Qu(t,e,n){return Math.max(0,e-t,t-n)}function Hw(t,e){return t?!e:e}function b$(t,e,n,s,a,l,c,d){let{affectsX:f,affectsY:h}=e;const{isHorizontal:g,isVertical:p}=e,v=g&&p,{xSnapped:b,ySnapped:x}=n,{minWidth:w,maxWidth:S,minHeight:C,maxHeight:N}=s,{x:E,y:A,width:O,height:j,aspectRatio:D}=t;let $=Math.floor(g?b-t.pointerX:0),P=Math.floor(p?x-t.pointerY:0);const K=O+(f?-$:$),G=j+(h?-P:P),L=-l[0]*O,W=-l[1]*j;let I=Qu(K,w,S),Y=Qu(G,C,N);if(c){let V=0,q=0;f&&$<0?V=Os(E+$+L,c[0][0]):!f&&$>0&&(V=Rs(E+K+L,c[1][0])),h&&P<0?q=Os(A+P+W,c[0][1]):!h&&P>0&&(q=Rs(A+G+W,c[1][1])),I=Math.max(I,V),Y=Math.max(Y,q)}if(d){let V=0,q=0;f&&$>0?V=Rs(E+$,d[0][0]):!f&&$<0&&(V=Os(E+K,d[1][0])),h&&P>0?q=Rs(A+P,d[0][1]):!h&&P<0&&(q=Os(A+G,d[1][1])),I=Math.max(I,V),Y=Math.max(Y,q)}if(a){if(g){const V=Qu(K/D,C,N)*D;if(I=Math.max(I,V),c){let q=0;!f&&!h||f&&!h&&v?q=Rs(A+W+K/D,c[1][1])*D:q=Os(A+W+(f?$:-$)/D,c[0][1])*D,I=Math.max(I,q)}if(d){let q=0;!f&&!h||f&&!h&&v?q=Os(A+K/D,d[1][1])*D:q=Rs(A+(f?$:-$)/D,d[0][1])*D,I=Math.max(I,q)}}if(p){const V=Qu(G*D,w,S)/D;if(Y=Math.max(Y,V),c){let q=0;!f&&!h||h&&!f&&v?q=Rs(E+G*D+L,c[1][0])/D:q=Os(E+(h?P:-P)*D+L,c[0][0])/D,Y=Math.max(Y,q)}if(d){let q=0;!f&&!h||h&&!f&&v?q=Os(E+G*D,d[1][0])/D:q=Rs(E+(h?P:-P)*D,d[0][0])/D,Y=Math.max(Y,q)}}}P=P+(P<0?Y:-Y),$=$+($<0?I:-I),a&&(v?K>G*D?P=(Hw(f,h)?-$:$)/D:$=(Hw(f,h)?-P:P)*D:g?(P=$/D,h=f):($=P*D,f=h));const k=f?E+$:E,z=h?A+P:A;return{width:O+(f?-$:$),height:j+(h?-P:P),x:l[0]*$*(f?-1:1)+k,y:l[1]*P*(h?-1:1)+z}}const w1={width:0,height:0,x:0,y:0},_$={...w1,pointerX:0,pointerY:0,aspectRatio:1};function w$(t){return[[0,0],[t.measured.width,t.measured.height]]}function x$(t,e,n){const s=e.position.x+t.position.x,a=e.position.y+t.position.y,l=t.measured.width??0,c=t.measured.height??0,d=n[0]*l,f=n[1]*c;return[[s-d,a-f],[s+l-d,a+c-f]]}function S$({domNode:t,nodeId:e,getStoreItems:n,onChange:s,onEnd:a}){const l=On(t);let c={controlDirection:qw("bottom-right"),boundaries:{minWidth:0,minHeight:0,maxWidth:Number.MAX_VALUE,maxHeight:Number.MAX_VALUE},resizeDirection:void 0,keepAspectRatio:!1};function d({controlPosition:h,boundaries:g,keepAspectRatio:p,resizeDirection:v,onResizeStart:b,onResize:x,onResizeEnd:w,shouldResize:S}){let C={...w1},N={..._$};c={boundaries:g,resizeDirection:v,keepAspectRatio:p,controlDirection:qw(h)};let E,A=null,O=[],j,D,$,P=!1;const K=jE().on("start",G=>{const{nodeLookup:L,transform:W,snapGrid:I,snapToGrid:Y,nodeOrigin:k,paneDomNode:z}=n();if(E=L.get(e),!E)return;A=z?.getBoundingClientRect()??null;const{xSnapped:V,ySnapped:q}=Tl(G.sourceEvent,{transform:W,snapGrid:I,snapToGrid:Y,containerBounds:A});C={width:E.measured.width??0,height:E.measured.height??0,x:E.position.x??0,y:E.position.y??0},N={...C,pointerX:V,pointerY:q,aspectRatio:C.width/C.height},j=void 0,E.parentId&&(E.extent==="parent"||E.expandParent)&&(j=L.get(E.parentId),D=j&&E.extent==="parent"?w$(j):void 0),O=[],$=void 0;for(const[H,M]of L)if(M.parentId===e&&(O.push({id:H,position:{...M.position},extent:M.extent}),M.extent==="parent"||M.expandParent)){const B=x$(M,E,M.origin??k);$?$=[[Math.min(B[0][0],$[0][0]),Math.min(B[0][1],$[0][1])],[Math.max(B[1][0],$[1][0]),Math.max(B[1][1],$[1][1])]]:$=B}b?.(G,{...C})}).on("drag",G=>{const{transform:L,snapGrid:W,snapToGrid:I,nodeOrigin:Y}=n(),k=Tl(G.sourceEvent,{transform:L,snapGrid:W,snapToGrid:I,containerBounds:A}),z=[];if(!E)return;const{x:V,y:q,width:H,height:M}=C,B={},Q=E.origin??Y,{width:ee,height:he,x:ge,y:ae}=b$(N,c.controlDirection,k,c.boundaries,c.keepAspectRatio,Q,D,$),le=ee!==H,Z=he!==M,fe=ge!==V&&le,pe=ae!==q&&Z;if(!fe&&!pe&&!le&&!Z)return;if((fe||pe||Q[0]===1||Q[1]===1)&&(B.x=fe?ge:C.x,B.y=pe?ae:C.y,C.x=B.x,C.y=B.y,O.length>0)){const oe=ge-V,_e=ae-q;for(const Le of O)Le.position={x:Le.position.x-oe+Q[0]*(ee-H),y:Le.position.y-_e+Q[1]*(he-M)},z.push(Le)}if((le||Z)&&(B.width=le&&(!c.resizeDirection||c.resizeDirection==="horizontal")?ee:C.width,B.height=Z&&(!c.resizeDirection||c.resizeDirection==="vertical")?he:C.height,C.width=B.width,C.height=B.height),j&&E.expandParent){const oe=Q[0]*(B.width??0);B.x&&B.x<oe&&(C.x=oe,N.x=N.x-(B.x-oe));const _e=Q[1]*(B.height??0);B.y&&B.y<_e&&(C.y=_e,N.y=N.y-(B.y-_e))}const ve=v$({width:C.width,prevWidth:H,height:C.height,prevHeight:M,affectsX:c.controlDirection.affectsX,affectsY:c.controlDirection.affectsY}),be={...C,direction:ve};S?.(G,be)!==!1&&(P=!0,x?.(G,be),s(B,z))}).on("end",G=>{P&&(w?.(G,{...C}),a?.({...C}),P=!1)});l.call(K)}function f(){l.on(".drag",null)}return{update:d,destroy:f}}var cp={exports:{}},up={},dp={exports:{}},fp={};var Vw;function E$(){if(Vw)return fp;Vw=1;var t=Gl();function e(p,v){return p===v&&(p!==0||1/p===1/v)||p!==p&&v!==v}var n=typeof Object.is=="function"?Object.is:e,s=t.useState,a=t.useEffect,l=t.useLayoutEffect,c=t.useDebugValue;function d(p,v){var b=v(),x=s({inst:{value:b,getSnapshot:v}}),w=x[0].inst,S=x[1];return l(function(){w.value=b,w.getSnapshot=v,f(w)&&S({inst:w})},[p,b,v]),a(function(){return f(w)&&S({inst:w}),p(function(){f(w)&&S({inst:w})})},[p]),c(b),b}function f(p){var v=p.getSnapshot;p=p.value;try{var b=v();return!n(p,b)}catch{return!0}}function h(p,v){return v()}var g=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?h:d;return fp.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:g,fp}var Fw;function C$(){return Fw||(Fw=1,dp.exports=E$()),dp.exports}var Yw;function A$(){if(Yw)return up;Yw=1;var t=Gl(),e=C$();function n(h,g){return h===g&&(h!==0||1/h===1/g)||h!==h&&g!==g}var s=typeof Object.is=="function"?Object.is:n,a=e.useSyncExternalStore,l=t.useRef,c=t.useEffect,d=t.useMemo,f=t.useDebugValue;return up.useSyncExternalStoreWithSelector=function(h,g,p,v,b){var x=l(null);if(x.current===null){var w={hasValue:!1,value:null};x.current=w}else w=x.current;x=d(function(){function C(j){if(!N){if(N=!0,E=j,j=v(j),b!==void 0&&w.hasValue){var D=w.value;if(b(D,j))return A=D}return A=j}if(D=A,s(E,j))return D;var $=v(j);return b!==void 0&&b(D,$)?(E=j,D):(E=j,A=$)}var N=!1,E,A,O=p===void 0?null:p;return[function(){return C(g())},O===null?void 0:function(){return C(O())}]},[g,p,v,b]);var S=a(h,x[0],x[1]);return c(function(){w.hasValue=!0,w.value=S},[S]),f(S),S},up}var Gw;function T$(){return Gw||(Gw=1,cp.exports=A$()),cp.exports}var N$=T$();const O$=Kd(N$),R$={},Xw=t=>{let e;const n=new Set,s=(g,p)=>{const v=typeof g=="function"?g(e):g;if(!Object.is(v,e)){const b=e;e=p??(typeof v!="object"||v===null)?v:Object.assign({},e,v),n.forEach(x=>x(e,b))}},a=()=>e,f={setState:s,getState:a,getInitialState:()=>h,subscribe:g=>(n.add(g),()=>n.delete(g)),destroy:()=>{(R$?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},h=e=t(s,a,f);return f},j$=t=>t?Xw(t):Xw,{useDebugValue:k$}=YN,{useSyncExternalStoreWithSelector:M$}=O$,D$=t=>t;function x1(t,e=D$,n){const s=M$(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,n);return k$(s),s}const Kw=(t,e)=>{const n=j$(t),s=(a,l=e)=>x1(n,a,l);return Object.assign(s,n),s},U$=(t,e)=>t?Kw(t,e):Kw;function mt(t,e){if(Object.is(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;if(t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(const[s,a]of t)if(!Object.is(a,e.get(s)))return!1;return!0}if(t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(const s of t)if(!e.has(s))return!1;return!0}const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!1;for(const s of n)if(!Object.prototype.hasOwnProperty.call(e,s)||!Object.is(t[s],e[s]))return!1;return!0}const df=R.createContext(null),$$=df.Provider,S1=rr.error001();function Ge(t,e){const n=R.useContext(df);if(n===null)throw new Error(S1);return x1(n,t,e)}function dt(){const t=R.useContext(df);if(t===null)throw new Error(S1);return R.useMemo(()=>({getState:t.getState,setState:t.setState,subscribe:t.subscribe}),[t])}const Qw={display:"none"},I$={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},E1="react-flow__node-desc",C1="react-flow__edge-desc",L$="react-flow__aria-live",z$=t=>t.ariaLiveMessage,B$=t=>t.ariaLabelConfig;function P$({rfId:t}){const e=Ge(z$);return _.jsx("div",{id:`${L$}-${t}`,"aria-live":"assertive","aria-atomic":"true",style:I$,children:e})}function q$({rfId:t,disableKeyboardA11y:e}){const n=Ge(B$);return _.jsxs(_.Fragment,{children:[_.jsx("div",{id:`${E1}-${t}`,style:Qw,children:e?n["node.a11yDescription.default"]:n["node.a11yDescription.keyboardDisabled"]}),_.jsx("div",{id:`${C1}-${t}`,style:Qw,children:n["edge.a11yDescription.default"]}),!e&&_.jsx(P$,{rfId:t})]})}const ff=R.forwardRef(({position:t="top-left",children:e,className:n,style:s,...a},l)=>{const c=`${t}`.split("-");return _.jsx("div",{className:Nt(["react-flow__panel",n,...c]),style:s,ref:l,...a,children:e})});ff.displayName="Panel";function H$({proOptions:t,position:e="bottom-right"}){return t?.hideAttribution?null:_.jsx(ff,{position:e,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:_.jsx("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}const V$=t=>{const e=[],n=[];for(const[,s]of t.nodeLookup)s.selected&&e.push(s.internals.userNode);for(const[,s]of t.edgeLookup)s.selected&&n.push(s);return{selectedNodes:e,selectedEdges:n}},Wu=t=>t.id;function F$(t,e){return mt(t.selectedNodes.map(Wu),e.selectedNodes.map(Wu))&&mt(t.selectedEdges.map(Wu),e.selectedEdges.map(Wu))}function Y$({onSelectionChange:t}){const e=dt(),{selectedNodes:n,selectedEdges:s}=Ge(V$,F$);return R.useEffect(()=>{const a={nodes:n,edges:s};t?.(a),e.getState().onSelectionChangeHandlers.forEach(l=>l(a))},[n,s,t]),null}const G$=t=>!!t.onSelectionChangeHandlers;function X$({onSelectionChange:t}){const e=Ge(G$);return t||e?_.jsx(Y$,{onSelectionChange:t}):null}const A1=[0,0],K$={x:0,y:0,zoom:1},Q$=["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","autoPanOnNodeFocus","nodesConnectable","nodesFocusable","edgesFocusable","edgesReconnectable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","connectionDragThreshold","onBeforeDelete","debug","autoPanSpeed","ariaLabelConfig"],Ww=[...Q$,"rfId"],W$=t=>({setNodes:t.setNodes,setEdges:t.setEdges,setMinZoom:t.setMinZoom,setMaxZoom:t.setMaxZoom,setTranslateExtent:t.setTranslateExtent,setNodeExtent:t.setNodeExtent,reset:t.reset,setDefaultNodesAndEdges:t.setDefaultNodesAndEdges}),Jw={translateExtent:Bl,nodeOrigin:A1,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1"};function J$(t){const{setNodes:e,setEdges:n,setMinZoom:s,setMaxZoom:a,setTranslateExtent:l,setNodeExtent:c,reset:d,setDefaultNodesAndEdges:f}=Ge(W$,mt),h=dt();R.useEffect(()=>(f(t.defaultNodes,t.defaultEdges),()=>{g.current=Jw,d()}),[]);const g=R.useRef(Jw);return R.useEffect(()=>{for(const p of Ww){const v=t[p],b=g.current[p];v!==b&&(typeof t[p]>"u"||(p==="nodes"?e(v):p==="edges"?n(v):p==="minZoom"?s(v):p==="maxZoom"?a(v):p==="translateExtent"?l(v):p==="nodeExtent"?c(v):p==="ariaLabelConfig"?h.setState({ariaLabelConfig:U3(v)}):p==="fitView"?h.setState({fitViewQueued:v}):p==="fitViewOptions"?h.setState({fitViewOptions:v}):h.setState({[p]:v})))}g.current=t},Ww.map(p=>t[p])),null}function Zw(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function Z$(t){const[e,n]=R.useState(t==="system"?null:t);return R.useEffect(()=>{if(t!=="system"){n(t);return}const s=Zw(),a=()=>n(s?.matches?"dark":"light");return a(),s?.addEventListener("change",a),()=>{s?.removeEventListener("change",a)}},[t]),e!==null?e:Zw()?.matches?"dark":"light"}const ex=typeof document<"u"?document:null;function Fl(t=null,e={target:ex,actInsideInputWithModifier:!0}){const[n,s]=R.useState(!1),a=R.useRef(!1),l=R.useRef(new Set([])),[c,d]=R.useMemo(()=>{if(t!==null){const h=(Array.isArray(t)?t:[t]).filter(p=>typeof p=="string").map(p=>p.replace("+",`
`).replace(`

`,`
+`).split(`
`)),g=h.reduce((p,v)=>p.concat(...v),[]);return[h,g]}return[[],[]]},[t]);return R.useEffect(()=>{const f=e?.target??ex,h=e?.actInsideInputWithModifier??!0;if(t!==null){const g=b=>{if(a.current=b.ctrlKey||b.metaKey||b.shiftKey||b.altKey,(!a.current||a.current&&!h)&&i1(b))return!1;const w=nx(b.code,d);if(l.current.add(b[w]),tx(c,l.current,!1)){const S=b.composedPath?.()?.[0]||b.target,C=S?.nodeName==="BUTTON"||S?.nodeName==="A";e.preventDefault!==!1&&(a.current||!C)&&b.preventDefault(),s(!0)}},p=b=>{const x=nx(b.code,d);tx(c,l.current,!0)?(s(!1),l.current.clear()):l.current.delete(b[x]),b.key==="Meta"&&l.current.clear(),a.current=!1},v=()=>{l.current.clear(),s(!1)};return f?.addEventListener("keydown",g),f?.addEventListener("keyup",p),window.addEventListener("blur",v),window.addEventListener("contextmenu",v),()=>{f?.removeEventListener("keydown",g),f?.removeEventListener("keyup",p),window.removeEventListener("blur",v),window.removeEventListener("contextmenu",v)}}},[t,s]),n}function tx(t,e,n){return t.filter(s=>n||s.length===e.size).some(s=>s.every(a=>e.has(a)))}function nx(t,e){return e.includes(t)?"code":"key"}const eI=()=>{const t=dt();return R.useMemo(()=>({zoomIn:e=>{const{panZoom:n}=t.getState();return n?n.scaleBy(1.2,{duration:e?.duration}):Promise.resolve(!1)},zoomOut:e=>{const{panZoom:n}=t.getState();return n?n.scaleBy(1/1.2,{duration:e?.duration}):Promise.resolve(!1)},zoomTo:(e,n)=>{const{panZoom:s}=t.getState();return s?s.scaleTo(e,{duration:n?.duration}):Promise.resolve(!1)},getZoom:()=>t.getState().transform[2],setViewport:async(e,n)=>{const{transform:[s,a,l],panZoom:c}=t.getState();return c?(await c.setViewport({x:e.x??s,y:e.y??a,zoom:e.zoom??l},n),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{const[e,n,s]=t.getState().transform;return{x:e,y:n,zoom:s}},setCenter:async(e,n,s)=>t.getState().setCenter(e,n,s),fitBounds:async(e,n)=>{const{width:s,height:a,minZoom:l,maxZoom:c,panZoom:d}=t.getState(),f=Pg(e,s,a,l,c,n?.padding??.1);return d?(await d.setViewport(f,{duration:n?.duration,ease:n?.ease,interpolate:n?.interpolate}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:(e,n={})=>{const{transform:s,snapGrid:a,snapToGrid:l,domNode:c}=t.getState();if(!c)return e;const{x:d,y:f}=c.getBoundingClientRect(),h={x:e.x-d,y:e.y-f},g=n.snapGrid??a,p=n.snapToGrid??l;return sc(h,s,p,g)},flowToScreenPosition:e=>{const{transform:n,domNode:s}=t.getState();if(!s)return e;const{x:a,y:l}=s.getBoundingClientRect(),c=Ld(e,n);return{x:c.x+a,y:c.y+l}}}),[])};function T1(t,e){const n=[],s=new Map,a=[];for(const l of t)if(l.type==="add"){a.push(l);continue}else if(l.type==="remove"||l.type==="replace")s.set(l.id,[l]);else{const c=s.get(l.id);c?c.push(l):s.set(l.id,[l])}for(const l of e){const c=s.get(l.id);if(!c){n.push(l);continue}if(c[0].type==="remove")continue;if(c[0].type==="replace"){n.push({...c[0].item});continue}const d={...l};for(const f of c)tI(f,d);n.push(d)}return a.length&&a.forEach(l=>{l.index!==void 0?n.splice(l.index,0,{...l.item}):n.push({...l.item})}),n}function tI(t,e){switch(t.type){case"select":{e.selected=t.selected;break}case"position":{typeof t.position<"u"&&(e.position=t.position),typeof t.dragging<"u"&&(e.dragging=t.dragging);break}case"dimensions":{typeof t.dimensions<"u"&&(e.measured??={},e.measured.width=t.dimensions.width,e.measured.height=t.dimensions.height,t.setAttributes&&((t.setAttributes===!0||t.setAttributes==="width")&&(e.width=t.dimensions.width),(t.setAttributes===!0||t.setAttributes==="height")&&(e.height=t.dimensions.height))),typeof t.resizing=="boolean"&&(e.resizing=t.resizing);break}}}function N1(t,e){return T1(t,e)}function O1(t,e){return T1(t,e)}function ui(t,e){return{id:t,type:"select",selected:e}}function $a(t,e=new Set,n=!1){const s=[];for(const[a,l]of t){const c=e.has(a);!(l.selected===void 0&&!c)&&l.selected!==c&&(n&&(l.selected=c),s.push(ui(l.id,c)))}return s}function rx({items:t=[],lookup:e}){const n=[],s=new Map(t.map(a=>[a.id,a]));for(const[a,l]of t.entries()){const c=e.get(l.id),d=c?.internals?.userNode??c;d!==void 0&&d!==l&&n.push({id:l.id,item:l,type:"replace"}),d===void 0&&n.push({item:l,type:"add",index:a})}for(const[a]of e)s.get(a)===void 0&&n.push({id:a,type:"remove"});return n}function sx(t){return{id:t.id,type:"remove"}}const ix=t=>C3(t),nI=t=>WE(t);function R1(t){return R.forwardRef(t)}const rI=typeof window<"u"?R.useLayoutEffect:R.useEffect;function ax(t){const[e,n]=R.useState(BigInt(0)),[s]=R.useState(()=>sI(()=>n(a=>a+BigInt(1))));return rI(()=>{const a=s.get();a.length&&(t(a),s.reset())},[e]),s}function sI(t){let e=[];return{get:()=>e,reset:()=>{e=[]},push:n=>{e.push(n),t()}}}const j1=R.createContext(null);function iI({children:t}){const e=dt(),n=R.useCallback(d=>{const{nodes:f=[],setNodes:h,hasDefaultNodes:g,onNodesChange:p,nodeLookup:v,fitViewQueued:b}=e.getState();let x=f;for(const S of d)x=typeof S=="function"?S(x):S;const w=rx({items:x,lookup:v});g&&h(x),w.length>0?p?.(w):b&&window.requestAnimationFrame(()=>{const{fitViewQueued:S,nodes:C,setNodes:N}=e.getState();S&&N(C)})},[]),s=ax(n),a=R.useCallback(d=>{const{edges:f=[],setEdges:h,hasDefaultEdges:g,onEdgesChange:p,edgeLookup:v}=e.getState();let b=f;for(const x of d)b=typeof x=="function"?x(b):x;g?h(b):p&&p(rx({items:b,lookup:v}))},[]),l=ax(a),c=R.useMemo(()=>({nodeQueue:s,edgeQueue:l}),[]);return _.jsx(j1.Provider,{value:c,children:t})}function aI(){const t=R.useContext(j1);if(!t)throw new Error("useBatchContext must be used within a BatchProvider");return t}const oI=t=>!!t.panZoom;function Ai(){const t=eI(),e=dt(),n=aI(),s=Ge(oI),a=R.useMemo(()=>{const l=p=>e.getState().nodeLookup.get(p),c=p=>{n.nodeQueue.push(p)},d=p=>{n.edgeQueue.push(p)},f=p=>{const{nodeLookup:v,nodeOrigin:b}=e.getState(),x=ix(p)?p:v.get(p.id),w=x.parentId?r1(x.position,x.measured,x.parentId,v,b):x.position,S={...x,position:w,width:x.measured?.width??x.width,height:x.measured?.height??x.height};return Ya(S)},h=(p,v,b={replace:!1})=>{c(x=>x.map(w=>{if(w.id===p){const S=typeof v=="function"?v(w):v;return b.replace&&ix(S)?S:{...w,...S}}return w}))},g=(p,v,b={replace:!1})=>{d(x=>x.map(w=>{if(w.id===p){const S=typeof v=="function"?v(w):v;return b.replace&&nI(S)?S:{...w,...S}}return w}))};return{getNodes:()=>e.getState().nodes.map(p=>({...p})),getNode:p=>l(p)?.internals.userNode,getInternalNode:l,getEdges:()=>{const{edges:p=[]}=e.getState();return p.map(v=>({...v}))},getEdge:p=>e.getState().edgeLookup.get(p),setNodes:c,setEdges:d,addNodes:p=>{const v=Array.isArray(p)?p:[p];n.nodeQueue.push(b=>[...b,...v])},addEdges:p=>{const v=Array.isArray(p)?p:[p];n.edgeQueue.push(b=>[...b,...v])},toObject:()=>{const{nodes:p=[],edges:v=[],transform:b}=e.getState(),[x,w,S]=b;return{nodes:p.map(C=>({...C})),edges:v.map(C=>({...C})),viewport:{x,y:w,zoom:S}}},deleteElements:async({nodes:p=[],edges:v=[]})=>{const{nodes:b,edges:x,onNodesDelete:w,onEdgesDelete:S,triggerNodeChanges:C,triggerEdgeChanges:N,onDelete:E,onBeforeDelete:A}=e.getState(),{nodes:O,edges:j}=await R3({nodesToRemove:p,edgesToRemove:v,nodes:b,edges:x,onBeforeDelete:A}),D=j.length>0,$=O.length>0;if(D){const P=j.map(sx);S?.(j),N(P)}if($){const P=O.map(sx);w?.(O),C(P)}return($||D)&&E?.({nodes:O,edges:j}),{deletedNodes:O,deletedEdges:j}},getIntersectingNodes:(p,v=!0,b)=>{const x=jw(p),w=x?p:f(p),S=b!==void 0;return w?(b||e.getState().nodes).filter(C=>{const N=e.getState().nodeLookup.get(C.id);if(N&&!x&&(C.id===p.id||!N.internals.positionAbsolute))return!1;const E=Ya(S?C:N),A=ql(E,w);return v&&A>0||A>=E.width*E.height||A>=w.width*w.height}):[]},isNodeIntersecting:(p,v,b=!0)=>{const w=jw(p)?p:f(p);if(!w)return!1;const S=ql(w,v);return b&&S>0||S>=v.width*v.height||S>=w.width*w.height},updateNode:h,updateNodeData:(p,v,b={replace:!1})=>{h(p,x=>{const w=typeof v=="function"?v(x):v;return b.replace?{...x,data:w}:{...x,data:{...x.data,...w}}},b)},updateEdge:g,updateEdgeData:(p,v,b={replace:!1})=>{g(p,x=>{const w=typeof v=="function"?v(x):v;return b.replace?{...x,data:w}:{...x,data:{...x.data,...w}}},b)},getNodesBounds:p=>{const{nodeLookup:v,nodeOrigin:b}=e.getState();return A3(p,{nodeLookup:v,nodeOrigin:b})},getHandleConnections:({type:p,id:v,nodeId:b})=>Array.from(e.getState().connectionLookup.get(`${b}-${p}${v?`-${v}`:""}`)?.values()??[]),getNodeConnections:({type:p,handleId:v,nodeId:b})=>Array.from(e.getState().connectionLookup.get(`${b}${p?v?`-${p}-${v}`:`-${p}`:""}`)?.values()??[]),fitView:async p=>{const v=e.getState().fitViewResolver??D3();return e.setState({fitViewQueued:!0,fitViewOptions:p,fitViewResolver:v}),n.nodeQueue.push(b=>[...b]),v.promise}}},[]);return R.useMemo(()=>({...a,...t,viewportInitialized:s}),[s])}const ox=t=>t.selected,lI=typeof window<"u"?window:void 0;function cI({deleteKeyCode:t,multiSelectionKeyCode:e}){const n=dt(),{deleteElements:s}=Ai(),a=Fl(t,{actInsideInputWithModifier:!1}),l=Fl(e,{target:lI});R.useEffect(()=>{if(a){const{edges:c,nodes:d}=n.getState();s({nodes:d.filter(ox),edges:c.filter(ox)}),n.setState({nodesSelectionActive:!1})}},[a]),R.useEffect(()=>{n.setState({multiSelectionActive:l})},[l])}function uI(t){const e=dt();R.useEffect(()=>{const n=()=>{if(!t.current||!(t.current.checkVisibility?.()??!0))return!1;const s=qg(t.current);(s.height===0||s.width===0)&&e.getState().onError?.("004",rr.error004()),e.setState({width:s.width||500,height:s.height||500})};if(t.current){n(),window.addEventListener("resize",n);const s=new ResizeObserver(()=>n());return s.observe(t.current),()=>{window.removeEventListener("resize",n),s&&t.current&&s.unobserve(t.current)}}},[])}const hf={position:"absolute",width:"100%",height:"100%",top:0,left:0},dI=t=>({userSelectionActive:t.userSelectionActive,lib:t.lib,connectionInProgress:t.connection.inProgress});function fI({onPaneContextMenu:t,zoomOnScroll:e=!0,zoomOnPinch:n=!0,panOnScroll:s=!1,panOnScrollSpeed:a=.5,panOnScrollMode:l=xi.Free,zoomOnDoubleClick:c=!0,panOnDrag:d=!0,defaultViewport:f,translateExtent:h,minZoom:g,maxZoom:p,zoomActivationKeyCode:v,preventScrolling:b=!0,children:x,noWheelClassName:w,noPanClassName:S,onViewportChange:C,isControlledViewport:N,paneClickDistance:E,selectionOnDrag:A}){const O=dt(),j=R.useRef(null),{userSelectionActive:D,lib:$,connectionInProgress:P}=Ge(dI,mt),K=Fl(v),G=R.useRef();uI(j);const L=R.useCallback(W=>{C?.({x:W[0],y:W[1],zoom:W[2]}),N||O.setState({transform:W})},[C,N]);return R.useEffect(()=>{if(j.current){G.current=y$({domNode:j.current,minZoom:g,maxZoom:p,translateExtent:h,viewport:f,onDraggingChange:k=>O.setState({paneDragging:k}),onPanZoomStart:(k,z)=>{const{onViewportChangeStart:V,onMoveStart:q}=O.getState();q?.(k,z),V?.(z)},onPanZoom:(k,z)=>{const{onViewportChange:V,onMove:q}=O.getState();q?.(k,z),V?.(z)},onPanZoomEnd:(k,z)=>{const{onViewportChangeEnd:V,onMoveEnd:q}=O.getState();q?.(k,z),V?.(z)}});const{x:W,y:I,zoom:Y}=G.current.getViewport();return O.setState({panZoom:G.current,transform:[W,I,Y],domNode:j.current.closest(".react-flow")}),()=>{G.current?.destroy()}}},[]),R.useEffect(()=>{G.current?.update({onPaneContextMenu:t,zoomOnScroll:e,zoomOnPinch:n,panOnScroll:s,panOnScrollSpeed:a,panOnScrollMode:l,zoomOnDoubleClick:c,panOnDrag:d,zoomActivationKeyPressed:K,preventScrolling:b,noPanClassName:S,userSelectionActive:D,noWheelClassName:w,lib:$,onTransformChange:L,connectionInProgress:P,selectionOnDrag:A,paneClickDistance:E})},[t,e,n,s,a,l,c,d,K,b,S,D,w,$,L,P,A,E]),_.jsx("div",{className:"react-flow__renderer",ref:j,style:hf,children:x})}const hI=t=>({userSelectionActive:t.userSelectionActive,userSelectionRect:t.userSelectionRect});function mI(){const{userSelectionActive:t,userSelectionRect:e}=Ge(hI,mt);return t&&e?_.jsx("div",{className:"react-flow__selection react-flow__container",style:{width:e.width,height:e.height,transform:`translate(${e.x}px, ${e.y}px)`}}):null}const hp=(t,e)=>n=>{n.target===e.current&&t?.(n)},pI=t=>({userSelectionActive:t.userSelectionActive,elementsSelectable:t.elementsSelectable,connectionInProgress:t.connection.inProgress,dragging:t.paneDragging});function gI({isSelecting:t,selectionKeyPressed:e,selectionMode:n=Pl.Full,panOnDrag:s,paneClickDistance:a,selectionOnDrag:l,onSelectionStart:c,onSelectionEnd:d,onPaneClick:f,onPaneContextMenu:h,onPaneScroll:g,onPaneMouseEnter:p,onPaneMouseMove:v,onPaneMouseLeave:b,children:x}){const w=dt(),{userSelectionActive:S,elementsSelectable:C,dragging:N,connectionInProgress:E}=Ge(pI,mt),A=C&&(t||S),O=R.useRef(null),j=R.useRef(),D=R.useRef(new Set),$=R.useRef(new Set),P=R.useRef(!1),K=V=>{if(P.current||E){P.current=!1;return}f?.(V),w.getState().resetSelectedElements(),w.setState({nodesSelectionActive:!1})},G=V=>{if(Array.isArray(s)&&s?.includes(2)){V.preventDefault();return}h?.(V)},L=g?V=>g(V):void 0,W=V=>{P.current&&(V.stopPropagation(),P.current=!1)},I=V=>{const{domNode:q}=w.getState();if(j.current=q?.getBoundingClientRect(),!j.current)return;const H=V.target===O.current;if(!H&&!!V.target.closest(".nokey")||!t||!(l&&H||e)||V.button!==0||!V.isPrimary)return;V.target?.setPointerCapture?.(V.pointerId),P.current=!1;const{x:Q,y:ee}=nr(V.nativeEvent,j.current);w.setState({userSelectionRect:{width:0,height:0,startX:Q,startY:ee,x:Q,y:ee}}),H||(V.stopPropagation(),V.preventDefault())},Y=V=>{const{userSelectionRect:q,transform:H,nodeLookup:M,edgeLookup:B,connectionLookup:Q,triggerNodeChanges:ee,triggerEdgeChanges:he,defaultEdgeOptions:ge,resetSelectedElements:ae}=w.getState();if(!j.current||!q)return;const{x:le,y:Z}=nr(V.nativeEvent,j.current),{startX:fe,startY:pe}=q;if(!P.current){const _e=e?0:a;if(Math.hypot(le-fe,Z-pe)<=_e)return;ae(),c?.(V)}P.current=!0;const ve={startX:fe,startY:pe,x:le<fe?le:fe,y:Z<pe?Z:pe,width:Math.abs(le-fe),height:Math.abs(Z-pe)},be=D.current,De=$.current;D.current=new Set(Bg(M,ve,H,n===Pl.Partial,!0).map(_e=>_e.id)),$.current=new Set;const oe=ge?.selectable??!0;for(const _e of D.current){const Le=Q.get(_e);if(Le)for(const{edgeId:Je}of Le.values()){const st=B.get(Je);st&&(st.selectable??oe)&&$.current.add(Je)}}if(!kw(be,D.current)){const _e=$a(M,D.current,!0);ee(_e)}if(!kw(De,$.current)){const _e=$a(B,$.current);he(_e)}w.setState({userSelectionRect:ve,userSelectionActive:!0,nodesSelectionActive:!1})},k=V=>{V.button===0&&(V.target?.releasePointerCapture?.(V.pointerId),!S&&V.target===O.current&&w.getState().userSelectionRect&&K?.(V),w.setState({userSelectionActive:!1,userSelectionRect:null}),P.current&&(d?.(V),w.setState({nodesSelectionActive:D.current.size>0})))},z=s===!0||Array.isArray(s)&&s.includes(0);return _.jsxs("div",{className:Nt(["react-flow__pane",{draggable:z,dragging:N,selection:t}]),onClick:A?void 0:hp(K,O),onContextMenu:hp(G,O),onWheel:hp(L,O),onPointerEnter:A?void 0:p,onPointerMove:A?Y:v,onPointerUp:A?k:void 0,onPointerDownCapture:A?I:void 0,onClickCapture:A?W:void 0,onPointerLeave:b,ref:O,style:hf,children:[x,_.jsx(mI,{})]})}function Zp({id:t,store:e,unselect:n=!1,nodeRef:s}){const{addSelectedNodes:a,unselectNodesAndEdges:l,multiSelectionActive:c,nodeLookup:d,onError:f}=e.getState(),h=d.get(t);if(!h){f?.("012",rr.error012(t));return}e.setState({nodesSelectionActive:!1}),h.selected?(n||h.selected&&c)&&(l({nodes:[h],edges:[]}),requestAnimationFrame(()=>s?.current?.blur())):a([t])}function k1({nodeRef:t,disabled:e=!1,noDragClassName:n,handleSelector:s,nodeId:a,isSelectable:l,nodeClickDistance:c}){const d=dt(),[f,h]=R.useState(!1),g=R.useRef();return R.useEffect(()=>{g.current=r$({getStoreItems:()=>d.getState(),onNodeMouseDown:p=>{Zp({id:p,store:d,nodeRef:t})},onDragStart:()=>{h(!0)},onDragStop:()=>{h(!1)}})},[]),R.useEffect(()=>{if(e)g.current?.destroy();else if(t.current)return g.current?.update({noDragClassName:n,handleSelector:s,domNode:t.current,isSelectable:l,nodeId:a,nodeClickDistance:c}),()=>{g.current?.destroy()}},[n,s,e,l,t,a]),f}const yI=t=>e=>e.selected&&(e.draggable||t&&typeof e.draggable>"u");function M1(){const t=dt();return R.useCallback(n=>{const{nodeExtent:s,snapToGrid:a,snapGrid:l,nodesDraggable:c,onError:d,updateNodePositions:f,nodeLookup:h,nodeOrigin:g}=t.getState(),p=new Map,v=yI(c),b=a?l[0]:5,x=a?l[1]:5,w=n.direction.x*b*n.factor,S=n.direction.y*x*n.factor;for(const[,C]of h){if(!v(C))continue;let N={x:C.internals.positionAbsolute.x+w,y:C.internals.positionAbsolute.y+S};a&&(N=rc(N,l));const{position:E,positionAbsolute:A}=JE({nodeId:C.id,nextPosition:N,nodeLookup:h,nodeExtent:s,nodeOrigin:g,onError:d});C.position=E,C.internals.positionAbsolute=A,p.set(C.id,C)}f(p)},[])}const Xg=R.createContext(null),vI=Xg.Provider;Xg.Consumer;const Kg=()=>R.useContext(Xg),bI=t=>({connectOnClick:t.connectOnClick,noPanClassName:t.noPanClassName,rfId:t.rfId}),_I=(t,e,n)=>s=>{const{connectionClickStartHandle:a,connectionMode:l,connection:c}=s,{fromHandle:d,toHandle:f,isValid:h}=c,g=f?.nodeId===t&&f?.id===e&&f?.type===n;return{connectingFrom:d?.nodeId===t&&d?.id===e&&d?.type===n,connectingTo:g,clickConnecting:a?.nodeId===t&&a?.id===e&&a?.type===n,isPossibleEndHandle:l===Va.Strict?d?.type!==n:t!==d?.nodeId||e!==d?.id,connectionInProcess:!!d,clickConnectionInProcess:!!a,valid:g&&h}};function wI({type:t="source",position:e=Ce.Top,isValidConnection:n,isConnectable:s=!0,isConnectableStart:a=!0,isConnectableEnd:l=!0,id:c,onConnect:d,children:f,className:h,onMouseDown:g,onTouchStart:p,...v},b){const x=c||null,w=t==="target",S=dt(),C=Kg(),{connectOnClick:N,noPanClassName:E,rfId:A}=Ge(bI,mt),{connectingFrom:O,connectingTo:j,clickConnecting:D,isPossibleEndHandle:$,connectionInProcess:P,clickConnectionInProcess:K,valid:G}=Ge(_I(C,x,t),mt);C||S.getState().onError?.("010",rr.error010());const L=Y=>{const{defaultEdgeOptions:k,onConnect:z,hasDefaultEdges:V}=S.getState(),q={...k,...Y};if(V){const{edges:H,setEdges:M}=S.getState();M(c1(q,H))}z?.(q),d?.(q)},W=Y=>{if(!C)return;const k=a1(Y.nativeEvent);if(a&&(k&&Y.button===0||!k)){const z=S.getState();Jp.onPointerDown(Y.nativeEvent,{handleDomNode:Y.currentTarget,autoPanOnConnect:z.autoPanOnConnect,connectionMode:z.connectionMode,connectionRadius:z.connectionRadius,domNode:z.domNode,nodeLookup:z.nodeLookup,lib:z.lib,isTarget:w,handleId:x,nodeId:C,flowId:z.rfId,panBy:z.panBy,cancelConnection:z.cancelConnection,onConnectStart:z.onConnectStart,onConnectEnd:z.onConnectEnd,updateConnection:z.updateConnection,onConnect:L,isValidConnection:n||z.isValidConnection,getTransform:()=>S.getState().transform,getFromHandle:()=>S.getState().connection.fromHandle,autoPanSpeed:z.autoPanSpeed,dragThreshold:z.connectionDragThreshold})}k?g?.(Y):p?.(Y)},I=Y=>{const{onClickConnectStart:k,onClickConnectEnd:z,connectionClickStartHandle:V,connectionMode:q,isValidConnection:H,lib:M,rfId:B,nodeLookup:Q,connection:ee}=S.getState();if(!C||!V&&!a)return;if(!V){k?.(Y.nativeEvent,{nodeId:C,handleId:x,handleType:t}),S.setState({connectionClickStartHandle:{nodeId:C,type:t,id:x}});return}const he=s1(Y.target),ge=n||H,{connection:ae,isValid:le}=Jp.isValid(Y.nativeEvent,{handle:{nodeId:C,id:x,type:t},connectionMode:q,fromNodeId:V.nodeId,fromHandleId:V.id||null,fromType:V.type,isValidConnection:ge,flowId:B,doc:he,lib:M,nodeLookup:Q});le&&ae&&L(ae);const Z=structuredClone(ee);delete Z.inProgress,Z.toPosition=Z.toHandle?Z.toHandle.position:null,z?.(Y,Z),S.setState({connectionClickStartHandle:null})};return _.jsx("div",{"data-handleid":x,"data-nodeid":C,"data-handlepos":e,"data-id":`${A}-${C}-${x}-${t}`,className:Nt(["react-flow__handle",`react-flow__handle-${e}`,"nodrag",E,h,{source:!w,target:w,connectable:s,connectablestart:a,connectableend:l,clickconnecting:D,connectingfrom:O,connectingto:j,valid:G,connectionindicator:s&&(!P||$)&&(P||K?l:a)}]),onMouseDown:W,onTouchStart:W,onClick:N?I:void 0,ref:b,...v,children:f})}const Wt=R.memo(R1(wI));function xI({data:t,isConnectable:e,sourcePosition:n=Ce.Bottom}){return _.jsxs(_.Fragment,{children:[t?.label,_.jsx(Wt,{type:"source",position:n,isConnectable:e})]})}function SI({data:t,isConnectable:e,targetPosition:n=Ce.Top,sourcePosition:s=Ce.Bottom}){return _.jsxs(_.Fragment,{children:[_.jsx(Wt,{type:"target",position:n,isConnectable:e}),t?.label,_.jsx(Wt,{type:"source",position:s,isConnectable:e})]})}function EI(){return null}function CI({data:t,isConnectable:e,targetPosition:n=Ce.Top}){return _.jsxs(_.Fragment,{children:[_.jsx(Wt,{type:"target",position:n,isConnectable:e}),t?.label]})}const zd={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},lx={input:xI,default:SI,output:CI,group:EI};function AI(t){return t.internals.handleBounds===void 0?{width:t.width??t.initialWidth??t.style?.width,height:t.height??t.initialHeight??t.style?.height}:{width:t.width??t.style?.width,height:t.height??t.style?.height}}const TI=t=>{const{width:e,height:n,x:s,y:a}=nc(t.nodeLookup,{filter:l=>!!l.selected});return{width:tr(e)?e:null,height:tr(n)?n:null,userSelectionActive:t.userSelectionActive,transformString:`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]}) translate(${s}px,${a}px)`}};function NI({onSelectionContextMenu:t,noPanClassName:e,disableKeyboardA11y:n}){const s=dt(),{width:a,height:l,transformString:c,userSelectionActive:d}=Ge(TI,mt),f=M1(),h=R.useRef(null);if(R.useEffect(()=>{n||h.current?.focus({preventScroll:!0})},[n]),k1({nodeRef:h}),d||!a||!l)return null;const g=t?v=>{const b=s.getState().nodes.filter(x=>x.selected);t(v,b)}:void 0,p=v=>{Object.prototype.hasOwnProperty.call(zd,v.key)&&(v.preventDefault(),f({direction:zd[v.key],factor:v.shiftKey?4:1}))};return _.jsx("div",{className:Nt(["react-flow__nodesselection","react-flow__container",e]),style:{transform:c},children:_.jsx("div",{ref:h,className:"react-flow__nodesselection-rect",onContextMenu:g,tabIndex:n?void 0:-1,onKeyDown:n?void 0:p,style:{width:a,height:l}})})}const cx=typeof window<"u"?window:void 0,OI=t=>({nodesSelectionActive:t.nodesSelectionActive,userSelectionActive:t.userSelectionActive});function D1({children:t,onPaneClick:e,onPaneMouseEnter:n,onPaneMouseMove:s,onPaneMouseLeave:a,onPaneContextMenu:l,onPaneScroll:c,paneClickDistance:d,deleteKeyCode:f,selectionKeyCode:h,selectionOnDrag:g,selectionMode:p,onSelectionStart:v,onSelectionEnd:b,multiSelectionKeyCode:x,panActivationKeyCode:w,zoomActivationKeyCode:S,elementsSelectable:C,zoomOnScroll:N,zoomOnPinch:E,panOnScroll:A,panOnScrollSpeed:O,panOnScrollMode:j,zoomOnDoubleClick:D,panOnDrag:$,defaultViewport:P,translateExtent:K,minZoom:G,maxZoom:L,preventScrolling:W,onSelectionContextMenu:I,noWheelClassName:Y,noPanClassName:k,disableKeyboardA11y:z,onViewportChange:V,isControlledViewport:q}){const{nodesSelectionActive:H,userSelectionActive:M}=Ge(OI),B=Fl(h,{target:cx}),Q=Fl(w,{target:cx}),ee=Q||$,he=Q||A,ge=g&&ee!==!0,ae=B||M||ge;return cI({deleteKeyCode:f,multiSelectionKeyCode:x}),_.jsx(fI,{onPaneContextMenu:l,elementsSelectable:C,zoomOnScroll:N,zoomOnPinch:E,panOnScroll:he,panOnScrollSpeed:O,panOnScrollMode:j,zoomOnDoubleClick:D,panOnDrag:!B&&ee,defaultViewport:P,translateExtent:K,minZoom:G,maxZoom:L,zoomActivationKeyCode:S,preventScrolling:W,noWheelClassName:Y,noPanClassName:k,onViewportChange:V,isControlledViewport:q,paneClickDistance:d,selectionOnDrag:ge,children:_.jsxs(gI,{onSelectionStart:v,onSelectionEnd:b,onPaneClick:e,onPaneMouseEnter:n,onPaneMouseMove:s,onPaneMouseLeave:a,onPaneContextMenu:l,onPaneScroll:c,panOnDrag:ee,isSelecting:!!ae,selectionMode:p,selectionKeyPressed:B,paneClickDistance:d,selectionOnDrag:ge,children:[t,H&&_.jsx(NI,{onSelectionContextMenu:I,noPanClassName:k,disableKeyboardA11y:z})]})})}D1.displayName="FlowRenderer";const RI=R.memo(D1),jI=t=>e=>t?Bg(e.nodeLookup,{x:0,y:0,width:e.width,height:e.height},e.transform,!0).map(n=>n.id):Array.from(e.nodeLookup.keys());function kI(t){return Ge(R.useCallback(jI(t),[t]),mt)}const MI=t=>t.updateNodeInternals;function DI(){const t=Ge(MI),[e]=R.useState(()=>typeof ResizeObserver>"u"?null:new ResizeObserver(n=>{const s=new Map;n.forEach(a=>{const l=a.target.getAttribute("data-id");s.set(l,{id:l,nodeElement:a.target,force:!0})}),t(s)}));return R.useEffect(()=>()=>{e?.disconnect()},[e]),e}function UI({node:t,nodeType:e,hasDimensions:n,resizeObserver:s}){const a=dt(),l=R.useRef(null),c=R.useRef(null),d=R.useRef(t.sourcePosition),f=R.useRef(t.targetPosition),h=R.useRef(e),g=n&&!!t.internals.handleBounds;return R.useEffect(()=>{l.current&&!t.hidden&&(!g||c.current!==l.current)&&(c.current&&s?.unobserve(c.current),s?.observe(l.current),c.current=l.current)},[g,t.hidden]),R.useEffect(()=>()=>{c.current&&(s?.unobserve(c.current),c.current=null)},[]),R.useEffect(()=>{if(l.current){const p=h.current!==e,v=d.current!==t.sourcePosition,b=f.current!==t.targetPosition;(p||v||b)&&(h.current=e,d.current=t.sourcePosition,f.current=t.targetPosition,a.getState().updateNodeInternals(new Map([[t.id,{id:t.id,nodeElement:l.current,force:!0}]])))}},[t.id,e,t.sourcePosition,t.targetPosition]),l}function $I({id:t,onClick:e,onMouseEnter:n,onMouseMove:s,onMouseLeave:a,onContextMenu:l,onDoubleClick:c,nodesDraggable:d,elementsSelectable:f,nodesConnectable:h,nodesFocusable:g,resizeObserver:p,noDragClassName:v,noPanClassName:b,disableKeyboardA11y:x,rfId:w,nodeTypes:S,nodeClickDistance:C,onError:N}){const{node:E,internals:A,isParent:O}=Ge(le=>{const Z=le.nodeLookup.get(t),fe=le.parentLookup.has(t);return{node:Z,internals:Z.internals,isParent:fe}},mt);let j=E.type||"default",D=S?.[j]||lx[j];D===void 0&&(N?.("003",rr.error003(j)),j="default",D=S?.default||lx.default);const $=!!(E.draggable||d&&typeof E.draggable>"u"),P=!!(E.selectable||f&&typeof E.selectable>"u"),K=!!(E.connectable||h&&typeof E.connectable>"u"),G=!!(E.focusable||g&&typeof E.focusable>"u"),L=dt(),W=n1(E),I=UI({node:E,nodeType:j,hasDimensions:W,resizeObserver:p}),Y=k1({nodeRef:I,disabled:E.hidden||!$,noDragClassName:v,handleSelector:E.dragHandle,nodeId:t,isSelectable:P,nodeClickDistance:C}),k=M1();if(E.hidden)return null;const z=Wr(E),V=AI(E),q=P||$||e||n||s||a,H=n?le=>n(le,{...A.userNode}):void 0,M=s?le=>s(le,{...A.userNode}):void 0,B=a?le=>a(le,{...A.userNode}):void 0,Q=l?le=>l(le,{...A.userNode}):void 0,ee=c?le=>c(le,{...A.userNode}):void 0,he=le=>{const{selectNodesOnDrag:Z,nodeDragThreshold:fe}=L.getState();P&&(!Z||!$||fe>0)&&Zp({id:t,store:L,nodeRef:I}),e&&e(le,{...A.userNode})},ge=le=>{if(!(i1(le.nativeEvent)||x)){if(GE.includes(le.key)&&P){const Z=le.key==="Escape";Zp({id:t,store:L,unselect:Z,nodeRef:I})}else if($&&E.selected&&Object.prototype.hasOwnProperty.call(zd,le.key)){le.preventDefault();const{ariaLabelConfig:Z}=L.getState();L.setState({ariaLiveMessage:Z["node.a11yDescription.ariaLiveMessage"]({direction:le.key.replace("Arrow","").toLowerCase(),x:~~A.positionAbsolute.x,y:~~A.positionAbsolute.y})}),k({direction:zd[le.key],factor:le.shiftKey?4:1})}}},ae=()=>{if(x||!I.current?.matches(":focus-visible"))return;const{transform:le,width:Z,height:fe,autoPanOnNodeFocus:pe,setCenter:ve}=L.getState();if(!pe)return;Bg(new Map([[t,E]]),{x:0,y:0,width:Z,height:fe},le,!0).length>0||ve(E.position.x+z.width/2,E.position.y+z.height/2,{zoom:le[2]})};return _.jsx("div",{className:Nt(["react-flow__node",`react-flow__node-${j}`,{[b]:$},E.className,{selected:E.selected,selectable:P,parent:O,draggable:$,dragging:Y}]),ref:I,style:{zIndex:A.z,transform:`translate(${A.positionAbsolute.x}px,${A.positionAbsolute.y}px)`,pointerEvents:q?"all":"none",visibility:W?"visible":"hidden",...E.style,...V},"data-id":t,"data-testid":`rf__node-${t}`,onMouseEnter:H,onMouseMove:M,onMouseLeave:B,onContextMenu:Q,onClick:he,onDoubleClick:ee,onKeyDown:G?ge:void 0,tabIndex:G?0:void 0,onFocus:G?ae:void 0,role:E.ariaRole??(G?"group":void 0),"aria-roledescription":"node","aria-describedby":x?void 0:`${E1}-${w}`,"aria-label":E.ariaLabel,...E.domAttributes,children:_.jsx(vI,{value:t,children:_.jsx(D,{id:t,data:E.data,type:j,positionAbsoluteX:A.positionAbsolute.x,positionAbsoluteY:A.positionAbsolute.y,selected:E.selected??!1,selectable:P,draggable:$,deletable:E.deletable??!0,isConnectable:K,sourcePosition:E.sourcePosition,targetPosition:E.targetPosition,dragging:Y,dragHandle:E.dragHandle,zIndex:A.z,parentId:E.parentId,...z})})})}var II=R.memo($I);const LI=t=>({nodesDraggable:t.nodesDraggable,nodesConnectable:t.nodesConnectable,nodesFocusable:t.nodesFocusable,elementsSelectable:t.elementsSelectable,onError:t.onError});function U1(t){const{nodesDraggable:e,nodesConnectable:n,nodesFocusable:s,elementsSelectable:a,onError:l}=Ge(LI,mt),c=kI(t.onlyRenderVisibleElements),d=DI();return _.jsx("div",{className:"react-flow__nodes",style:hf,children:c.map(f=>_.jsx(II,{id:f,nodeTypes:t.nodeTypes,nodeExtent:t.nodeExtent,onClick:t.onNodeClick,onMouseEnter:t.onNodeMouseEnter,onMouseMove:t.onNodeMouseMove,onMouseLeave:t.onNodeMouseLeave,onContextMenu:t.onNodeContextMenu,onDoubleClick:t.onNodeDoubleClick,noDragClassName:t.noDragClassName,noPanClassName:t.noPanClassName,rfId:t.rfId,disableKeyboardA11y:t.disableKeyboardA11y,resizeObserver:d,nodesDraggable:e,nodesConnectable:n,nodesFocusable:s,elementsSelectable:a,nodeClickDistance:t.nodeClickDistance,onError:l},f))})}U1.displayName="NodeRenderer";const zI=R.memo(U1);function BI(t){return Ge(R.useCallback(n=>{if(!t)return n.edges.map(a=>a.id);const s=[];if(n.width&&n.height)for(const a of n.edges){const l=n.nodeLookup.get(a.source),c=n.nodeLookup.get(a.target);l&&c&&L3({sourceNode:l,targetNode:c,width:n.width,height:n.height,transform:n.transform})&&s.push(a.id)}return s},[t]),mt)}const PI=({color:t="none",strokeWidth:e=1})=>{const n={strokeWidth:e,...t&&{stroke:t}};return _.jsx("polyline",{className:"arrow",style:n,strokeLinecap:"round",fill:"none",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4"})},qI=({color:t="none",strokeWidth:e=1})=>{const n={strokeWidth:e,...t&&{stroke:t,fill:t}};return _.jsx("polyline",{className:"arrowclosed",style:n,strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"})},ux={[$d.Arrow]:PI,[$d.ArrowClosed]:qI};function HI(t){const e=dt();return R.useMemo(()=>Object.prototype.hasOwnProperty.call(ux,t)?ux[t]:(e.getState().onError?.("009",rr.error009(t)),null),[t])}const VI=({id:t,type:e,color:n,width:s=12.5,height:a=12.5,markerUnits:l="strokeWidth",strokeWidth:c,orient:d="auto-start-reverse"})=>{const f=HI(e);return f?_.jsx("marker",{className:"react-flow__arrowhead",id:t,markerWidth:`${s}`,markerHeight:`${a}`,viewBox:"-10 -10 20 20",markerUnits:l,orient:d,refX:"0",refY:"0",children:_.jsx(f,{color:n,strokeWidth:c})}):null},$1=({defaultColor:t,rfId:e})=>{const n=Ge(l=>l.edges),s=Ge(l=>l.defaultEdgeOptions),a=R.useMemo(()=>F3(n,{id:e,defaultColor:t,defaultMarkerStart:s?.markerStart,defaultMarkerEnd:s?.markerEnd}),[n,s,e,t]);return a.length?_.jsx("svg",{className:"react-flow__marker","aria-hidden":"true",children:_.jsx("defs",{children:a.map(l=>_.jsx(VI,{id:l.id,type:l.type,color:l.color,width:l.width,height:l.height,markerUnits:l.markerUnits,strokeWidth:l.strokeWidth,orient:l.orient},l.id))})}):null};$1.displayName="MarkerDefinitions";var FI=R.memo($1);function I1({x:t,y:e,label:n,labelStyle:s,labelShowBg:a=!0,labelBgStyle:l,labelBgPadding:c=[2,4],labelBgBorderRadius:d=2,children:f,className:h,...g}){const[p,v]=R.useState({x:1,y:0,width:0,height:0}),b=Nt(["react-flow__edge-textwrapper",h]),x=R.useRef(null);return R.useEffect(()=>{if(x.current){const w=x.current.getBBox();v({x:w.x,y:w.y,width:w.width,height:w.height})}},[n]),n?_.jsxs("g",{transform:`translate(${t-p.width/2} ${e-p.height/2})`,className:b,visibility:p.width?"visible":"hidden",...g,children:[a&&_.jsx("rect",{width:p.width+2*c[0],x:-c[0],y:-c[1],height:p.height+2*c[1],className:"react-flow__edge-textbg",style:l,rx:d,ry:d}),_.jsx("text",{className:"react-flow__edge-text",y:p.height/2,dy:"0.3em",ref:x,style:s,children:n}),f]}):null}I1.displayName="EdgeText";const YI=R.memo(I1);function mf({path:t,labelX:e,labelY:n,label:s,labelStyle:a,labelShowBg:l,labelBgStyle:c,labelBgPadding:d,labelBgBorderRadius:f,interactionWidth:h=20,...g}){return _.jsxs(_.Fragment,{children:[_.jsx("path",{...g,d:t,fill:"none",className:Nt(["react-flow__edge-path",g.className])}),h?_.jsx("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:h,className:"react-flow__edge-interaction"}):null,s&&tr(e)&&tr(n)?_.jsx(YI,{x:e,y:n,label:s,labelStyle:a,labelShowBg:l,labelBgStyle:c,labelBgPadding:d,labelBgBorderRadius:f}):null]})}function dx({pos:t,x1:e,y1:n,x2:s,y2:a}){return t===Ce.Left||t===Ce.Right?[.5*(e+s),n]:[e,.5*(n+a)]}function L1({sourceX:t,sourceY:e,sourcePosition:n=Ce.Bottom,targetX:s,targetY:a,targetPosition:l=Ce.Top}){const[c,d]=dx({pos:n,x1:t,y1:e,x2:s,y2:a}),[f,h]=dx({pos:l,x1:s,y1:a,x2:t,y2:e}),[g,p,v,b]=o1({sourceX:t,sourceY:e,targetX:s,targetY:a,sourceControlX:c,sourceControlY:d,targetControlX:f,targetControlY:h});return[`M${t},${e} C${c},${d} ${f},${h} ${s},${a}`,g,p,v,b]}function z1(t){return R.memo(({id:e,sourceX:n,sourceY:s,targetX:a,targetY:l,sourcePosition:c,targetPosition:d,label:f,labelStyle:h,labelShowBg:g,labelBgStyle:p,labelBgPadding:v,labelBgBorderRadius:b,style:x,markerEnd:w,markerStart:S,interactionWidth:C})=>{const[N,E,A]=L1({sourceX:n,sourceY:s,sourcePosition:c,targetX:a,targetY:l,targetPosition:d}),O=t.isInternal?void 0:e;return _.jsx(mf,{id:O,path:N,labelX:E,labelY:A,label:f,labelStyle:h,labelShowBg:g,labelBgStyle:p,labelBgPadding:v,labelBgBorderRadius:b,style:x,markerEnd:w,markerStart:S,interactionWidth:C})})}const GI=z1({isInternal:!1}),B1=z1({isInternal:!0});GI.displayName="SimpleBezierEdge";B1.displayName="SimpleBezierEdgeInternal";function P1(t){return R.memo(({id:e,sourceX:n,sourceY:s,targetX:a,targetY:l,label:c,labelStyle:d,labelShowBg:f,labelBgStyle:h,labelBgPadding:g,labelBgBorderRadius:p,style:v,sourcePosition:b=Ce.Bottom,targetPosition:x=Ce.Top,markerEnd:w,markerStart:S,pathOptions:C,interactionWidth:N})=>{const[E,A,O]=Kp({sourceX:n,sourceY:s,sourcePosition:b,targetX:a,targetY:l,targetPosition:x,borderRadius:C?.borderRadius,offset:C?.offset,stepPosition:C?.stepPosition}),j=t.isInternal?void 0:e;return _.jsx(mf,{id:j,path:E,labelX:A,labelY:O,label:c,labelStyle:d,labelShowBg:f,labelBgStyle:h,labelBgPadding:g,labelBgBorderRadius:p,style:v,markerEnd:w,markerStart:S,interactionWidth:N})})}const q1=P1({isInternal:!1}),H1=P1({isInternal:!0});q1.displayName="SmoothStepEdge";H1.displayName="SmoothStepEdgeInternal";function V1(t){return R.memo(({id:e,...n})=>{const s=t.isInternal?void 0:e;return _.jsx(q1,{...n,id:s,pathOptions:R.useMemo(()=>({borderRadius:0,offset:n.pathOptions?.offset}),[n.pathOptions?.offset])})})}const XI=V1({isInternal:!1}),F1=V1({isInternal:!0});XI.displayName="StepEdge";F1.displayName="StepEdgeInternal";function Y1(t){return R.memo(({id:e,sourceX:n,sourceY:s,targetX:a,targetY:l,label:c,labelStyle:d,labelShowBg:f,labelBgStyle:h,labelBgPadding:g,labelBgBorderRadius:p,style:v,markerEnd:b,markerStart:x,interactionWidth:w})=>{const[S,C,N]=u1({sourceX:n,sourceY:s,targetX:a,targetY:l}),E=t.isInternal?void 0:e;return _.jsx(mf,{id:E,path:S,labelX:C,labelY:N,label:c,labelStyle:d,labelShowBg:f,labelBgStyle:h,labelBgPadding:g,labelBgBorderRadius:p,style:v,markerEnd:b,markerStart:x,interactionWidth:w})})}const KI=Y1({isInternal:!1}),G1=Y1({isInternal:!0});KI.displayName="StraightEdge";G1.displayName="StraightEdgeInternal";function X1(t){return R.memo(({id:e,sourceX:n,sourceY:s,targetX:a,targetY:l,sourcePosition:c=Ce.Bottom,targetPosition:d=Ce.Top,label:f,labelStyle:h,labelShowBg:g,labelBgStyle:p,labelBgPadding:v,labelBgBorderRadius:b,style:x,markerEnd:w,markerStart:S,pathOptions:C,interactionWidth:N})=>{const[E,A,O]=Hg({sourceX:n,sourceY:s,sourcePosition:c,targetX:a,targetY:l,targetPosition:d,curvature:C?.curvature}),j=t.isInternal?void 0:e;return _.jsx(mf,{id:j,path:E,labelX:A,labelY:O,label:f,labelStyle:h,labelShowBg:g,labelBgStyle:p,labelBgPadding:v,labelBgBorderRadius:b,style:x,markerEnd:w,markerStart:S,interactionWidth:N})})}const QI=X1({isInternal:!1}),K1=X1({isInternal:!0});QI.displayName="BezierEdge";K1.displayName="BezierEdgeInternal";const fx={default:K1,straight:G1,step:F1,smoothstep:H1,simplebezier:B1},hx={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},WI=(t,e,n)=>n===Ce.Left?t-e:n===Ce.Right?t+e:t,JI=(t,e,n)=>n===Ce.Top?t-e:n===Ce.Bottom?t+e:t,mx="react-flow__edgeupdater";function px({position:t,centerX:e,centerY:n,radius:s=10,onMouseDown:a,onMouseEnter:l,onMouseOut:c,type:d}){return _.jsx("circle",{onMouseDown:a,onMouseEnter:l,onMouseOut:c,className:Nt([mx,`${mx}-${d}`]),cx:WI(e,s,t),cy:JI(n,s,t),r:s,stroke:"transparent",fill:"transparent"})}function ZI({isReconnectable:t,reconnectRadius:e,edge:n,sourceX:s,sourceY:a,targetX:l,targetY:c,sourcePosition:d,targetPosition:f,onReconnect:h,onReconnectStart:g,onReconnectEnd:p,setReconnecting:v,setUpdateHover:b}){const x=dt(),w=(A,O)=>{if(A.button!==0)return;const{autoPanOnConnect:j,domNode:D,isValidConnection:$,connectionMode:P,connectionRadius:K,lib:G,onConnectStart:L,onConnectEnd:W,cancelConnection:I,nodeLookup:Y,rfId:k,panBy:z,updateConnection:V}=x.getState(),q=O.type==="target",H=(Q,ee)=>{v(!1),p?.(Q,n,O.type,ee)},M=Q=>h?.(n,Q),B=(Q,ee)=>{v(!0),g?.(A,n,O.type),L?.(Q,ee)};Jp.onPointerDown(A.nativeEvent,{autoPanOnConnect:j,connectionMode:P,connectionRadius:K,domNode:D,handleId:O.id,nodeId:O.nodeId,nodeLookup:Y,isTarget:q,edgeUpdaterType:O.type,lib:G,flowId:k,cancelConnection:I,panBy:z,isValidConnection:$,onConnect:M,onConnectStart:B,onConnectEnd:W,onReconnectEnd:H,updateConnection:V,getTransform:()=>x.getState().transform,getFromHandle:()=>x.getState().connection.fromHandle,dragThreshold:x.getState().connectionDragThreshold,handleDomNode:A.currentTarget})},S=A=>w(A,{nodeId:n.target,id:n.targetHandle??null,type:"target"}),C=A=>w(A,{nodeId:n.source,id:n.sourceHandle??null,type:"source"}),N=()=>b(!0),E=()=>b(!1);return _.jsxs(_.Fragment,{children:[(t===!0||t==="source")&&_.jsx(px,{position:d,centerX:s,centerY:a,radius:e,onMouseDown:S,onMouseEnter:N,onMouseOut:E,type:"source"}),(t===!0||t==="target")&&_.jsx(px,{position:f,centerX:l,centerY:c,radius:e,onMouseDown:C,onMouseEnter:N,onMouseOut:E,type:"target"})]})}function eL({id:t,edgesFocusable:e,edgesReconnectable:n,elementsSelectable:s,onClick:a,onDoubleClick:l,onContextMenu:c,onMouseEnter:d,onMouseMove:f,onMouseLeave:h,reconnectRadius:g,onReconnect:p,onReconnectStart:v,onReconnectEnd:b,rfId:x,edgeTypes:w,noPanClassName:S,onError:C,disableKeyboardA11y:N}){let E=Ge(ve=>ve.edgeLookup.get(t));const A=Ge(ve=>ve.defaultEdgeOptions);E=A?{...A,...E}:E;let O=E.type||"default",j=w?.[O]||fx[O];j===void 0&&(C?.("011",rr.error011(O)),O="default",j=w?.default||fx.default);const D=!!(E.focusable||e&&typeof E.focusable>"u"),$=typeof p<"u"&&(E.reconnectable||n&&typeof E.reconnectable>"u"),P=!!(E.selectable||s&&typeof E.selectable>"u"),K=R.useRef(null),[G,L]=R.useState(!1),[W,I]=R.useState(!1),Y=dt(),{zIndex:k,sourceX:z,sourceY:V,targetX:q,targetY:H,sourcePosition:M,targetPosition:B}=Ge(R.useCallback(ve=>{const be=ve.nodeLookup.get(E.source),De=ve.nodeLookup.get(E.target);if(!be||!De)return{zIndex:E.zIndex,...hx};const oe=V3({id:t,sourceNode:be,targetNode:De,sourceHandle:E.sourceHandle||null,targetHandle:E.targetHandle||null,connectionMode:ve.connectionMode,onError:C});return{zIndex:I3({selected:E.selected,zIndex:E.zIndex,sourceNode:be,targetNode:De,elevateOnSelect:ve.elevateEdgesOnSelect}),...oe||hx}},[E.source,E.target,E.sourceHandle,E.targetHandle,E.selected,E.zIndex]),mt),Q=R.useMemo(()=>E.markerStart?`url('#${Qp(E.markerStart,x)}')`:void 0,[E.markerStart,x]),ee=R.useMemo(()=>E.markerEnd?`url('#${Qp(E.markerEnd,x)}')`:void 0,[E.markerEnd,x]);if(E.hidden||z===null||V===null||q===null||H===null)return null;const he=ve=>{const{addSelectedEdges:be,unselectNodesAndEdges:De,multiSelectionActive:oe}=Y.getState();P&&(Y.setState({nodesSelectionActive:!1}),E.selected&&oe?(De({nodes:[],edges:[E]}),K.current?.blur()):be([t])),a&&a(ve,E)},ge=l?ve=>{l(ve,{...E})}:void 0,ae=c?ve=>{c(ve,{...E})}:void 0,le=d?ve=>{d(ve,{...E})}:void 0,Z=f?ve=>{f(ve,{...E})}:void 0,fe=h?ve=>{h(ve,{...E})}:void 0,pe=ve=>{if(!N&&GE.includes(ve.key)&&P){const{unselectNodesAndEdges:be,addSelectedEdges:De}=Y.getState();ve.key==="Escape"?(K.current?.blur(),be({edges:[E]})):De([t])}};return _.jsx("svg",{style:{zIndex:k},children:_.jsxs("g",{className:Nt(["react-flow__edge",`react-flow__edge-${O}`,E.className,S,{selected:E.selected,animated:E.animated,inactive:!P&&!a,updating:G,selectable:P}]),onClick:he,onDoubleClick:ge,onContextMenu:ae,onMouseEnter:le,onMouseMove:Z,onMouseLeave:fe,onKeyDown:D?pe:void 0,tabIndex:D?0:void 0,role:E.ariaRole??(D?"group":"img"),"aria-roledescription":"edge","data-id":t,"data-testid":`rf__edge-${t}`,"aria-label":E.ariaLabel===null?void 0:E.ariaLabel||`Edge from ${E.source} to ${E.target}`,"aria-describedby":D?`${C1}-${x}`:void 0,ref:K,...E.domAttributes,children:[!W&&_.jsx(j,{id:t,source:E.source,target:E.target,type:E.type,selected:E.selected,animated:E.animated,selectable:P,deletable:E.deletable??!0,label:E.label,labelStyle:E.labelStyle,labelShowBg:E.labelShowBg,labelBgStyle:E.labelBgStyle,labelBgPadding:E.labelBgPadding,labelBgBorderRadius:E.labelBgBorderRadius,sourceX:z,sourceY:V,targetX:q,targetY:H,sourcePosition:M,targetPosition:B,data:E.data,style:E.style,sourceHandleId:E.sourceHandle,targetHandleId:E.targetHandle,markerStart:Q,markerEnd:ee,pathOptions:"pathOptions"in E?E.pathOptions:void 0,interactionWidth:E.interactionWidth}),$&&_.jsx(ZI,{edge:E,isReconnectable:$,reconnectRadius:g,onReconnect:p,onReconnectStart:v,onReconnectEnd:b,sourceX:z,sourceY:V,targetX:q,targetY:H,sourcePosition:M,targetPosition:B,setUpdateHover:L,setReconnecting:I})]})})}var tL=R.memo(eL);const nL=t=>({edgesFocusable:t.edgesFocusable,edgesReconnectable:t.edgesReconnectable,elementsSelectable:t.elementsSelectable,connectionMode:t.connectionMode,onError:t.onError});function Q1({defaultMarkerColor:t,onlyRenderVisibleElements:e,rfId:n,edgeTypes:s,noPanClassName:a,onReconnect:l,onEdgeContextMenu:c,onEdgeMouseEnter:d,onEdgeMouseMove:f,onEdgeMouseLeave:h,onEdgeClick:g,reconnectRadius:p,onEdgeDoubleClick:v,onReconnectStart:b,onReconnectEnd:x,disableKeyboardA11y:w}){const{edgesFocusable:S,edgesReconnectable:C,elementsSelectable:N,onError:E}=Ge(nL,mt),A=BI(e);return _.jsxs("div",{className:"react-flow__edges",children:[_.jsx(FI,{defaultColor:t,rfId:n}),A.map(O=>_.jsx(tL,{id:O,edgesFocusable:S,edgesReconnectable:C,elementsSelectable:N,noPanClassName:a,onReconnect:l,onContextMenu:c,onMouseEnter:d,onMouseMove:f,onMouseLeave:h,onClick:g,reconnectRadius:p,onDoubleClick:v,onReconnectStart:b,onReconnectEnd:x,rfId:n,onError:E,edgeTypes:s,disableKeyboardA11y:w},O))]})}Q1.displayName="EdgeRenderer";const rL=R.memo(Q1),sL=t=>`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]})`;function iL({children:t}){const e=Ge(sL);return _.jsx("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform:e},children:t})}function aL(t){const e=Ai(),n=R.useRef(!1);R.useEffect(()=>{!n.current&&e.viewportInitialized&&t&&(setTimeout(()=>t(e),1),n.current=!0)},[t,e.viewportInitialized])}const oL=t=>t.panZoom?.syncViewport;function lL(t){const e=Ge(oL),n=dt();return R.useEffect(()=>{t&&(e?.(t),n.setState({transform:[t.x,t.y,t.zoom]}))},[t,e]),null}function cL(t){return t.connection.inProgress?{...t.connection,to:sc(t.connection.to,t.transform)}:{...t.connection}}function uL(t){return cL}function dL(t){const e=uL();return Ge(e,mt)}const fL=t=>({nodesConnectable:t.nodesConnectable,isValid:t.connection.isValid,inProgress:t.connection.inProgress,width:t.width,height:t.height});function hL({containerStyle:t,style:e,type:n,component:s}){const{nodesConnectable:a,width:l,height:c,isValid:d,inProgress:f}=Ge(fL,mt);return!(l&&a&&f)?null:_.jsx("svg",{style:t,width:l,height:c,className:"react-flow__connectionline react-flow__container",children:_.jsx("g",{className:Nt(["react-flow__connection",QE(d)]),children:_.jsx(W1,{style:e,type:n,CustomComponent:s,isValid:d})})})}const W1=({style:t,type:e=Us.Bezier,CustomComponent:n,isValid:s})=>{const{inProgress:a,from:l,fromNode:c,fromHandle:d,fromPosition:f,to:h,toNode:g,toHandle:p,toPosition:v,pointer:b}=dL();if(!a)return;if(n)return _.jsx(n,{connectionLineType:e,connectionLineStyle:t,fromNode:c,fromHandle:d,fromX:l.x,fromY:l.y,toX:h.x,toY:h.y,fromPosition:f,toPosition:v,connectionStatus:QE(s),toNode:g,toHandle:p,pointer:b});let x="";const w={sourceX:l.x,sourceY:l.y,sourcePosition:f,targetX:h.x,targetY:h.y,targetPosition:v};switch(e){case Us.Bezier:[x]=Hg(w);break;case Us.SimpleBezier:[x]=L1(w);break;case Us.Step:[x]=Kp({...w,borderRadius:0});break;case Us.SmoothStep:[x]=Kp(w);break;default:[x]=u1(w)}return _.jsx("path",{d:x,fill:"none",className:"react-flow__connection-path",style:t})};W1.displayName="ConnectionLine";const mL={};function gx(t=mL){R.useRef(t),dt(),R.useEffect(()=>{},[t])}function pL(){dt(),R.useRef(!1),R.useEffect(()=>{},[])}function J1({nodeTypes:t,edgeTypes:e,onInit:n,onNodeClick:s,onEdgeClick:a,onNodeDoubleClick:l,onEdgeDoubleClick:c,onNodeMouseEnter:d,onNodeMouseMove:f,onNodeMouseLeave:h,onNodeContextMenu:g,onSelectionContextMenu:p,onSelectionStart:v,onSelectionEnd:b,connectionLineType:x,connectionLineStyle:w,connectionLineComponent:S,connectionLineContainerStyle:C,selectionKeyCode:N,selectionOnDrag:E,selectionMode:A,multiSelectionKeyCode:O,panActivationKeyCode:j,zoomActivationKeyCode:D,deleteKeyCode:$,onlyRenderVisibleElements:P,elementsSelectable:K,defaultViewport:G,translateExtent:L,minZoom:W,maxZoom:I,preventScrolling:Y,defaultMarkerColor:k,zoomOnScroll:z,zoomOnPinch:V,panOnScroll:q,panOnScrollSpeed:H,panOnScrollMode:M,zoomOnDoubleClick:B,panOnDrag:Q,onPaneClick:ee,onPaneMouseEnter:he,onPaneMouseMove:ge,onPaneMouseLeave:ae,onPaneScroll:le,onPaneContextMenu:Z,paneClickDistance:fe,nodeClickDistance:pe,onEdgeContextMenu:ve,onEdgeMouseEnter:be,onEdgeMouseMove:De,onEdgeMouseLeave:oe,reconnectRadius:_e,onReconnect:Le,onReconnectStart:Je,onReconnectEnd:st,noDragClassName:It,noWheelClassName:pt,noPanClassName:hn,disableKeyboardA11y:Jt,nodeExtent:ct,rfId:mn,viewport:pn,onViewportChange:tn}){return gx(t),gx(e),pL(),aL(n),lL(pn),_.jsx(RI,{onPaneClick:ee,onPaneMouseEnter:he,onPaneMouseMove:ge,onPaneMouseLeave:ae,onPaneContextMenu:Z,onPaneScroll:le,paneClickDistance:fe,deleteKeyCode:$,selectionKeyCode:N,selectionOnDrag:E,selectionMode:A,onSelectionStart:v,onSelectionEnd:b,multiSelectionKeyCode:O,panActivationKeyCode:j,zoomActivationKeyCode:D,elementsSelectable:K,zoomOnScroll:z,zoomOnPinch:V,zoomOnDoubleClick:B,panOnScroll:q,panOnScrollSpeed:H,panOnScrollMode:M,panOnDrag:Q,defaultViewport:G,translateExtent:L,minZoom:W,maxZoom:I,onSelectionContextMenu:p,preventScrolling:Y,noDragClassName:It,noWheelClassName:pt,noPanClassName:hn,disableKeyboardA11y:Jt,onViewportChange:tn,isControlledViewport:!!pn,children:_.jsxs(iL,{children:[_.jsx(rL,{edgeTypes:e,onEdgeClick:a,onEdgeDoubleClick:c,onReconnect:Le,onReconnectStart:Je,onReconnectEnd:st,onlyRenderVisibleElements:P,onEdgeContextMenu:ve,onEdgeMouseEnter:be,onEdgeMouseMove:De,onEdgeMouseLeave:oe,reconnectRadius:_e,defaultMarkerColor:k,noPanClassName:hn,disableKeyboardA11y:Jt,rfId:mn}),_.jsx(hL,{style:w,type:x,component:S,containerStyle:C}),_.jsx("div",{className:"react-flow__edgelabel-renderer"}),_.jsx(zI,{nodeTypes:t,onNodeClick:s,onNodeDoubleClick:l,onNodeMouseEnter:d,onNodeMouseMove:f,onNodeMouseLeave:h,onNodeContextMenu:g,nodeClickDistance:pe,onlyRenderVisibleElements:P,noPanClassName:hn,noDragClassName:It,disableKeyboardA11y:Jt,nodeExtent:ct,rfId:mn}),_.jsx("div",{className:"react-flow__viewport-portal"})]})})}J1.displayName="GraphView";const gL=R.memo(J1),yx=({nodes:t,edges:e,defaultNodes:n,defaultEdges:s,width:a,height:l,fitView:c,fitViewOptions:d,minZoom:f=.5,maxZoom:h=2,nodeOrigin:g,nodeExtent:p}={})=>{const v=new Map,b=new Map,x=new Map,w=new Map,S=s??e??[],C=n??t??[],N=g??[0,0],E=p??Bl;h1(x,w,S);const A=Wp(C,v,b,{nodeOrigin:N,nodeExtent:E,elevateNodesOnSelect:!1});let O=[0,0,1];if(c&&a&&l){const j=nc(v,{filter:K=>!!((K.width||K.initialWidth)&&(K.height||K.initialHeight))}),{x:D,y:$,zoom:P}=Pg(j,a,l,f,h,d?.padding??.1);O=[D,$,P]}return{rfId:"1",width:a??0,height:l??0,transform:O,nodes:C,nodesInitialized:A,nodeLookup:v,parentLookup:b,edges:S,edgeLookup:w,connectionLookup:x,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:n!==void 0,hasDefaultEdges:s!==void 0,panZoom:null,minZoom:f,maxZoom:h,translateExtent:Bl,nodeExtent:E,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:Va.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:N,nodeDragThreshold:1,connectionDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!1,selectNodesOnDrag:!0,multiSelectionActive:!1,fitViewQueued:c??!1,fitViewOptions:d,fitViewResolver:null,connection:{...KE},connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanOnNodeFocus:!0,autoPanSpeed:15,connectionRadius:20,onError:j3,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react",debug:!1,ariaLabelConfig:XE}},yL=({nodes:t,edges:e,defaultNodes:n,defaultEdges:s,width:a,height:l,fitView:c,fitViewOptions:d,minZoom:f,maxZoom:h,nodeOrigin:g,nodeExtent:p})=>U$((v,b)=>{async function x(){const{nodeLookup:w,panZoom:S,fitViewOptions:C,fitViewResolver:N,width:E,height:A,minZoom:O,maxZoom:j}=b();S&&(await O3({nodes:w,width:E,height:A,panZoom:S,minZoom:O,maxZoom:j},C),N?.resolve(!0),v({fitViewResolver:null}))}return{...yx({nodes:t,edges:e,width:a,height:l,fitView:c,fitViewOptions:d,minZoom:f,maxZoom:h,nodeOrigin:g,nodeExtent:p,defaultNodes:n,defaultEdges:s}),setNodes:w=>{const{nodeLookup:S,parentLookup:C,nodeOrigin:N,elevateNodesOnSelect:E,fitViewQueued:A}=b(),O=Wp(w,S,C,{nodeOrigin:N,nodeExtent:p,elevateNodesOnSelect:E,checkEquality:!0});A&&O?(x(),v({nodes:w,nodesInitialized:O,fitViewQueued:!1,fitViewOptions:void 0})):v({nodes:w,nodesInitialized:O})},setEdges:w=>{const{connectionLookup:S,edgeLookup:C}=b();h1(S,C,w),v({edges:w})},setDefaultNodesAndEdges:(w,S)=>{if(w){const{setNodes:C}=b();C(w),v({hasDefaultNodes:!0})}if(S){const{setEdges:C}=b();C(S),v({hasDefaultEdges:!0})}},updateNodeInternals:w=>{const{triggerNodeChanges:S,nodeLookup:C,parentLookup:N,domNode:E,nodeOrigin:A,nodeExtent:O,debug:j,fitViewQueued:D}=b(),{changes:$,updatedInternals:P}=J3(w,C,N,E,A,O);P&&(X3(C,N,{nodeOrigin:A,nodeExtent:O}),D?(x(),v({fitViewQueued:!1,fitViewOptions:void 0})):v({}),$?.length>0&&(j&&console.log("React Flow: trigger node changes",$),S?.($)))},updateNodePositions:(w,S=!1)=>{const C=[],N=[],{nodeLookup:E,triggerNodeChanges:A}=b();for(const[O,j]of w){const D=E.get(O),$=!!(D?.expandParent&&D?.parentId&&j?.position),P={id:O,type:"position",position:$?{x:Math.max(0,j.position.x),y:Math.max(0,j.position.y)}:j.position,dragging:S};$&&D.parentId&&C.push({id:O,parentId:D.parentId,rect:{...j.internals.positionAbsolute,width:j.measured.width??0,height:j.measured.height??0}}),N.push(P)}if(C.length>0){const{parentLookup:O,nodeOrigin:j}=b(),D=Gg(C,E,O,j);N.push(...D)}A(N)},triggerNodeChanges:w=>{const{onNodesChange:S,setNodes:C,nodes:N,hasDefaultNodes:E,debug:A}=b();if(w?.length){if(E){const O=N1(w,N);C(O)}A&&console.log("React Flow: trigger node changes",w),S?.(w)}},triggerEdgeChanges:w=>{const{onEdgesChange:S,setEdges:C,edges:N,hasDefaultEdges:E,debug:A}=b();if(w?.length){if(E){const O=O1(w,N);C(O)}A&&console.log("React Flow: trigger edge changes",w),S?.(w)}},addSelectedNodes:w=>{const{multiSelectionActive:S,edgeLookup:C,nodeLookup:N,triggerNodeChanges:E,triggerEdgeChanges:A}=b();if(S){const O=w.map(j=>ui(j,!0));E(O);return}E($a(N,new Set([...w]),!0)),A($a(C))},addSelectedEdges:w=>{const{multiSelectionActive:S,edgeLookup:C,nodeLookup:N,triggerNodeChanges:E,triggerEdgeChanges:A}=b();if(S){const O=w.map(j=>ui(j,!0));A(O);return}A($a(C,new Set([...w]))),E($a(N,new Set,!0))},unselectNodesAndEdges:({nodes:w,edges:S}={})=>{const{edges:C,nodes:N,nodeLookup:E,triggerNodeChanges:A,triggerEdgeChanges:O}=b(),j=w||N,D=S||C,$=j.map(K=>{const G=E.get(K.id);return G&&(G.selected=!1),ui(K.id,!1)}),P=D.map(K=>ui(K.id,!1));A($),O(P)},setMinZoom:w=>{const{panZoom:S,maxZoom:C}=b();S?.setScaleExtent([w,C]),v({minZoom:w})},setMaxZoom:w=>{const{panZoom:S,minZoom:C}=b();S?.setScaleExtent([C,w]),v({maxZoom:w})},setTranslateExtent:w=>{b().panZoom?.setTranslateExtent(w),v({translateExtent:w})},resetSelectedElements:()=>{const{edges:w,nodes:S,triggerNodeChanges:C,triggerEdgeChanges:N,elementsSelectable:E}=b();if(!E)return;const A=S.reduce((j,D)=>D.selected?[...j,ui(D.id,!1)]:j,[]),O=w.reduce((j,D)=>D.selected?[...j,ui(D.id,!1)]:j,[]);C(A),N(O)},setNodeExtent:w=>{const{nodes:S,nodeLookup:C,parentLookup:N,nodeOrigin:E,elevateNodesOnSelect:A,nodeExtent:O}=b();w[0][0]===O[0][0]&&w[0][1]===O[0][1]&&w[1][0]===O[1][0]&&w[1][1]===O[1][1]||(Wp(S,C,N,{nodeOrigin:E,nodeExtent:w,elevateNodesOnSelect:A,checkEquality:!1}),v({nodeExtent:w}))},panBy:w=>{const{transform:S,width:C,height:N,panZoom:E,translateExtent:A}=b();return Z3({delta:w,panZoom:E,transform:S,translateExtent:A,width:C,height:N})},setCenter:async(w,S,C)=>{const{width:N,height:E,maxZoom:A,panZoom:O}=b();if(!O)return Promise.resolve(!1);const j=typeof C?.zoom<"u"?C.zoom:A;return await O.setViewport({x:N/2-w*j,y:E/2-S*j,zoom:j},{duration:C?.duration,ease:C?.ease,interpolate:C?.interpolate}),Promise.resolve(!0)},cancelConnection:()=>{v({connection:{...KE}})},updateConnection:w=>{v({connection:w})},reset:()=>v({...yx()})}},Object.is);function vL({initialNodes:t,initialEdges:e,defaultNodes:n,defaultEdges:s,initialWidth:a,initialHeight:l,initialMinZoom:c,initialMaxZoom:d,initialFitViewOptions:f,fitView:h,nodeOrigin:g,nodeExtent:p,children:v}){const[b]=R.useState(()=>yL({nodes:t,edges:e,defaultNodes:n,defaultEdges:s,width:a,height:l,fitView:h,minZoom:c,maxZoom:d,fitViewOptions:f,nodeOrigin:g,nodeExtent:p}));return _.jsx($$,{value:b,children:_.jsx(iI,{children:v})})}function bL({children:t,nodes:e,edges:n,defaultNodes:s,defaultEdges:a,width:l,height:c,fitView:d,fitViewOptions:f,minZoom:h,maxZoom:g,nodeOrigin:p,nodeExtent:v}){return R.useContext(df)?_.jsx(_.Fragment,{children:t}):_.jsx(vL,{initialNodes:e,initialEdges:n,defaultNodes:s,defaultEdges:a,initialWidth:l,initialHeight:c,fitView:d,initialFitViewOptions:f,initialMinZoom:h,initialMaxZoom:g,nodeOrigin:p,nodeExtent:v,children:t})}const _L={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0};function wL({nodes:t,edges:e,defaultNodes:n,defaultEdges:s,className:a,nodeTypes:l,edgeTypes:c,onNodeClick:d,onEdgeClick:f,onInit:h,onMove:g,onMoveStart:p,onMoveEnd:v,onConnect:b,onConnectStart:x,onConnectEnd:w,onClickConnectStart:S,onClickConnectEnd:C,onNodeMouseEnter:N,onNodeMouseMove:E,onNodeMouseLeave:A,onNodeContextMenu:O,onNodeDoubleClick:j,onNodeDragStart:D,onNodeDrag:$,onNodeDragStop:P,onNodesDelete:K,onEdgesDelete:G,onDelete:L,onSelectionChange:W,onSelectionDragStart:I,onSelectionDrag:Y,onSelectionDragStop:k,onSelectionContextMenu:z,onSelectionStart:V,onSelectionEnd:q,onBeforeDelete:H,connectionMode:M,connectionLineType:B=Us.Bezier,connectionLineStyle:Q,connectionLineComponent:ee,connectionLineContainerStyle:he,deleteKeyCode:ge="Backspace",selectionKeyCode:ae="Shift",selectionOnDrag:le=!1,selectionMode:Z=Pl.Full,panActivationKeyCode:fe="Space",multiSelectionKeyCode:pe=Hl()?"Meta":"Control",zoomActivationKeyCode:ve=Hl()?"Meta":"Control",snapToGrid:be,snapGrid:De,onlyRenderVisibleElements:oe=!1,selectNodesOnDrag:_e,nodesDraggable:Le,autoPanOnNodeFocus:Je,nodesConnectable:st,nodesFocusable:It,nodeOrigin:pt=A1,edgesFocusable:hn,edgesReconnectable:Jt,elementsSelectable:ct=!0,defaultViewport:mn=K$,minZoom:pn=.5,maxZoom:tn=2,translateExtent:jn=Bl,preventScrolling:vr=!0,nodeExtent:Jr,defaultMarkerColor:Bs="#b1b1b7",zoomOnScroll:to=!0,zoomOnPinch:me=!0,panOnScroll:Ee=!1,panOnScrollSpeed:we=.5,panOnScrollMode:Ue=xi.Free,zoomOnDoubleClick:gt=!0,panOnDrag:Dt=!0,onPaneClick:Cf,onPaneMouseEnter:ji,onPaneMouseMove:ki,onPaneMouseLeave:Mi,onPaneScroll:br,onPaneContextMenu:Di,paneClickDistance:Ps=1,nodeClickDistance:Af=0,children:lc,onReconnect:no,onReconnectStart:qs,onReconnectEnd:Tf,onEdgeContextMenu:cc,onEdgeDoubleClick:uc,onEdgeMouseEnter:dc,onEdgeMouseMove:ro,onEdgeMouseLeave:so,reconnectRadius:fc=10,onNodesChange:hc,onEdgesChange:ir,noDragClassName:Ot="nodrag",noWheelClassName:Ft="nowheel",noPanClassName:_r="nopan",fitView:Ui,fitViewOptions:mc,connectOnClick:Nf,attributionPosition:pc,proOptions:Hs,defaultEdgeOptions:io,elevateNodesOnSelect:Zr,elevateEdgesOnSelect:es,disableKeyboardA11y:ts=!1,autoPanOnConnect:ns,autoPanOnNodeDrag:wt,autoPanSpeed:gc,connectionRadius:yc,isValidConnection:wr,onError:rs,style:Of,id:ao,nodeDragThreshold:vc,connectionDragThreshold:Rf,viewport:$i,onViewportChange:Ii,width:Hn,height:nn,colorMode:bc="light",debug:jf,onScroll:Li,ariaLabelConfig:_c,...zi},kf){const Yt=ao||"1",oo=Z$(bc),wc=R.useCallback(Bi=>{Bi.currentTarget.scrollTo({top:0,left:0,behavior:"instant"}),Li?.(Bi)},[Li]);return _.jsx("div",{"data-testid":"rf__wrapper",...zi,onScroll:wc,style:{...Of,..._L},ref:kf,className:Nt(["react-flow",a,oo]),id:ao,role:"application",children:_.jsxs(bL,{nodes:t,edges:e,width:Hn,height:nn,fitView:Ui,fitViewOptions:mc,minZoom:pn,maxZoom:tn,nodeOrigin:pt,nodeExtent:Jr,children:[_.jsx(gL,{onInit:h,onNodeClick:d,onEdgeClick:f,onNodeMouseEnter:N,onNodeMouseMove:E,onNodeMouseLeave:A,onNodeContextMenu:O,onNodeDoubleClick:j,nodeTypes:l,edgeTypes:c,connectionLineType:B,connectionLineStyle:Q,connectionLineComponent:ee,connectionLineContainerStyle:he,selectionKeyCode:ae,selectionOnDrag:le,selectionMode:Z,deleteKeyCode:ge,multiSelectionKeyCode:pe,panActivationKeyCode:fe,zoomActivationKeyCode:ve,onlyRenderVisibleElements:oe,defaultViewport:mn,translateExtent:jn,minZoom:pn,maxZoom:tn,preventScrolling:vr,zoomOnScroll:to,zoomOnPinch:me,zoomOnDoubleClick:gt,panOnScroll:Ee,panOnScrollSpeed:we,panOnScrollMode:Ue,panOnDrag:Dt,onPaneClick:Cf,onPaneMouseEnter:ji,onPaneMouseMove:ki,onPaneMouseLeave:Mi,onPaneScroll:br,onPaneContextMenu:Di,paneClickDistance:Ps,nodeClickDistance:Af,onSelectionContextMenu:z,onSelectionStart:V,onSelectionEnd:q,onReconnect:no,onReconnectStart:qs,onReconnectEnd:Tf,onEdgeContextMenu:cc,onEdgeDoubleClick:uc,onEdgeMouseEnter:dc,onEdgeMouseMove:ro,onEdgeMouseLeave:so,reconnectRadius:fc,defaultMarkerColor:Bs,noDragClassName:Ot,noWheelClassName:Ft,noPanClassName:_r,rfId:Yt,disableKeyboardA11y:ts,nodeExtent:Jr,viewport:$i,onViewportChange:Ii}),_.jsx(J$,{nodes:t,edges:e,defaultNodes:n,defaultEdges:s,onConnect:b,onConnectStart:x,onConnectEnd:w,onClickConnectStart:S,onClickConnectEnd:C,nodesDraggable:Le,autoPanOnNodeFocus:Je,nodesConnectable:st,nodesFocusable:It,edgesFocusable:hn,edgesReconnectable:Jt,elementsSelectable:ct,elevateNodesOnSelect:Zr,elevateEdgesOnSelect:es,minZoom:pn,maxZoom:tn,nodeExtent:Jr,onNodesChange:hc,onEdgesChange:ir,snapToGrid:be,snapGrid:De,connectionMode:M,translateExtent:jn,connectOnClick:Nf,defaultEdgeOptions:io,fitView:Ui,fitViewOptions:mc,onNodesDelete:K,onEdgesDelete:G,onDelete:L,onNodeDragStart:D,onNodeDrag:$,onNodeDragStop:P,onSelectionDrag:Y,onSelectionDragStart:I,onSelectionDragStop:k,onMove:g,onMoveStart:p,onMoveEnd:v,noPanClassName:_r,nodeOrigin:pt,rfId:Yt,autoPanOnConnect:ns,autoPanOnNodeDrag:wt,autoPanSpeed:gc,onError:rs,connectionRadius:yc,isValidConnection:wr,selectNodesOnDrag:_e,nodeDragThreshold:vc,connectionDragThreshold:Rf,onBeforeDelete:H,debug:jf,ariaLabelConfig:_c}),_.jsx(X$,{onSelectionChange:W}),lc,_.jsx(H$,{proOptions:Hs,position:pc}),_.jsx(q$,{rfId:Yt,disableKeyboardA11y:ts})]})})}var xL=R1(wL);const SL=rr.error014();function Z1({id:t,handleType:e,handleId:n,onConnect:s,onDisconnect:a}={}){const l=Kg(),c=t??l;if(!c)throw new Error(SL);const d=R.useRef(null),f=Ge(h=>h.connectionLookup.get(`${c}${e?n?`-${e}-${n}`:`-${e}`:""}`),E3);return R.useEffect(()=>{if(d.current&&d.current!==f){const h=f??new Map;Ow(d.current,h,a),Ow(h,d.current,s)}d.current=f??new Map},[f,s,a]),R.useMemo(()=>Array.from(f?.values()??[]),[f])}function EL(t){return Ge(R.useCallback(n=>{const s=[],a=Array.isArray(t),l=a?t:[t];for(const c of l){const d=n.nodeLookup.get(c);d&&s.push({id:d.id,type:d.type,data:d.data})}return a?s:s[0]??null},[t]),e$)}function CL({dimensions:t,lineWidth:e,variant:n,className:s}){return _.jsx("path",{strokeWidth:e,d:`M${t[0]/2} 0 V${t[1]} M0 ${t[1]/2} H${t[0]}`,className:Nt(["react-flow__background-pattern",n,s])})}function AL({radius:t,className:e}){return _.jsx("circle",{cx:t,cy:t,r:t,className:Nt(["react-flow__background-pattern","dots",e])})}var $s;(function(t){t.Lines="lines",t.Dots="dots",t.Cross="cross"})($s||($s={}));const TL={[$s.Dots]:1,[$s.Lines]:1,[$s.Cross]:6},NL=t=>({transform:t.transform,patternId:`pattern-${t.rfId}`});function eC({id:t,variant:e=$s.Dots,gap:n=20,size:s,lineWidth:a=1,offset:l=0,color:c,bgColor:d,style:f,className:h,patternClassName:g}){const p=R.useRef(null),{transform:v,patternId:b}=Ge(NL,mt),x=s||TL[e],w=e===$s.Dots,S=e===$s.Cross,C=Array.isArray(n)?n:[n,n],N=[C[0]*v[2]||1,C[1]*v[2]||1],E=x*v[2],A=Array.isArray(l)?l:[l,l],O=S?[E,E]:N,j=[A[0]*v[2]||1+O[0]/2,A[1]*v[2]||1+O[1]/2],D=`${b}${t||""}`;return _.jsxs("svg",{className:Nt(["react-flow__background",h]),style:{...f,...hf,"--xy-background-color-props":d,"--xy-background-pattern-color-props":c},ref:p,"data-testid":"rf__background",children:[_.jsx("pattern",{id:D,x:v[0]%N[0],y:v[1]%N[1],width:N[0],height:N[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${j[0]},-${j[1]})`,children:w?_.jsx(AL,{radius:E/2,className:g}):_.jsx(CL,{dimensions:O,lineWidth:a,variant:e,className:g})}),_.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${D})`})]})}eC.displayName="Background";const OL=R.memo(eC);function RL(){return _.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:_.jsx("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function jL(){return _.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:_.jsx("path",{d:"M0 0h32v4.2H0z"})})}function kL(){return _.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:_.jsx("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function ML(){return _.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:_.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function DL(){return _.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:_.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function Ju({children:t,className:e,...n}){return _.jsx("button",{type:"button",className:Nt(["react-flow__controls-button",e]),...n,children:t})}const UL=t=>({isInteractive:t.nodesDraggable||t.nodesConnectable||t.elementsSelectable,minZoomReached:t.transform[2]<=t.minZoom,maxZoomReached:t.transform[2]>=t.maxZoom,ariaLabelConfig:t.ariaLabelConfig});function tC({style:t,showZoom:e=!0,showFitView:n=!0,showInteractive:s=!0,fitViewOptions:a,onZoomIn:l,onZoomOut:c,onFitView:d,onInteractiveChange:f,className:h,children:g,position:p="bottom-left",orientation:v="vertical","aria-label":b}){const x=dt(),{isInteractive:w,minZoomReached:S,maxZoomReached:C,ariaLabelConfig:N}=Ge(UL,mt),{zoomIn:E,zoomOut:A,fitView:O}=Ai(),j=()=>{E(),l?.()},D=()=>{A(),c?.()},$=()=>{O(a),d?.()},P=()=>{x.setState({nodesDraggable:!w,nodesConnectable:!w,elementsSelectable:!w}),f?.(!w)},K=v==="horizontal"?"horizontal":"vertical";return _.jsxs(ff,{className:Nt(["react-flow__controls",K,h]),position:p,style:t,"data-testid":"rf__controls","aria-label":b??N["controls.ariaLabel"],children:[e&&_.jsxs(_.Fragment,{children:[_.jsx(Ju,{onClick:j,className:"react-flow__controls-zoomin",title:N["controls.zoomIn.ariaLabel"],"aria-label":N["controls.zoomIn.ariaLabel"],disabled:C,children:_.jsx(RL,{})}),_.jsx(Ju,{onClick:D,className:"react-flow__controls-zoomout",title:N["controls.zoomOut.ariaLabel"],"aria-label":N["controls.zoomOut.ariaLabel"],disabled:S,children:_.jsx(jL,{})})]}),n&&_.jsx(Ju,{className:"react-flow__controls-fitview",onClick:$,title:N["controls.fitView.ariaLabel"],"aria-label":N["controls.fitView.ariaLabel"],children:_.jsx(kL,{})}),s&&_.jsx(Ju,{className:"react-flow__controls-interactive",onClick:P,title:N["controls.interactive.ariaLabel"],"aria-label":N["controls.interactive.ariaLabel"],children:w?_.jsx(DL,{}):_.jsx(ML,{})}),g]})}tC.displayName="Controls";const $L=R.memo(tC);function IL({id:t,x:e,y:n,width:s,height:a,style:l,color:c,strokeColor:d,strokeWidth:f,className:h,borderRadius:g,shapeRendering:p,selected:v,onClick:b}){const{background:x,backgroundColor:w}=l||{},S=c||x||w;return _.jsx("rect",{className:Nt(["react-flow__minimap-node",{selected:v},h]),x:e,y:n,rx:g,ry:g,width:s,height:a,style:{fill:S,stroke:d,strokeWidth:f},shapeRendering:p,onClick:b?C=>b(C,t):void 0})}const LL=R.memo(IL),zL=t=>t.nodes.map(e=>e.id),mp=t=>t instanceof Function?t:()=>t;function BL({nodeStrokeColor:t,nodeColor:e,nodeClassName:n="",nodeBorderRadius:s=5,nodeStrokeWidth:a,nodeComponent:l=LL,onClick:c}){const d=Ge(zL,mt),f=mp(e),h=mp(t),g=mp(n),p=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return _.jsx(_.Fragment,{children:d.map(v=>_.jsx(qL,{id:v,nodeColorFunc:f,nodeStrokeColorFunc:h,nodeClassNameFunc:g,nodeBorderRadius:s,nodeStrokeWidth:a,NodeComponent:l,onClick:c,shapeRendering:p},v))})}function PL({id:t,nodeColorFunc:e,nodeStrokeColorFunc:n,nodeClassNameFunc:s,nodeBorderRadius:a,nodeStrokeWidth:l,shapeRendering:c,NodeComponent:d,onClick:f}){const{node:h,x:g,y:p,width:v,height:b}=Ge(x=>{const{internals:w}=x.nodeLookup.get(t),S=w.userNode,{x:C,y:N}=w.positionAbsolute,{width:E,height:A}=Wr(S);return{node:S,x:C,y:N,width:E,height:A}},mt);return!h||h.hidden||!n1(h)?null:_.jsx(d,{x:g,y:p,width:v,height:b,style:h.style,selected:!!h.selected,className:s(h),color:e(h),borderRadius:a,strokeColor:n(h),strokeWidth:l,shapeRendering:c,onClick:f,id:h.id})}const qL=R.memo(PL);var HL=R.memo(BL);const VL=200,FL=150,YL=t=>!t.hidden,GL=t=>{const e={x:-t.transform[0]/t.transform[2],y:-t.transform[1]/t.transform[2],width:t.width/t.transform[2],height:t.height/t.transform[2]};return{viewBB:e,boundingRect:t.nodeLookup.size>0?t1(nc(t.nodeLookup,{filter:YL}),e):e,rfId:t.rfId,panZoom:t.panZoom,translateExtent:t.translateExtent,flowWidth:t.width,flowHeight:t.height,ariaLabelConfig:t.ariaLabelConfig}},XL="react-flow__minimap-desc";function nC({style:t,className:e,nodeStrokeColor:n,nodeColor:s,nodeClassName:a="",nodeBorderRadius:l=5,nodeStrokeWidth:c,nodeComponent:d,bgColor:f,maskColor:h,maskStrokeColor:g,maskStrokeWidth:p,position:v="bottom-right",onClick:b,onNodeClick:x,pannable:w=!1,zoomable:S=!1,ariaLabel:C,inversePan:N,zoomStep:E=1,offsetScale:A=5}){const O=dt(),j=R.useRef(null),{boundingRect:D,viewBB:$,rfId:P,panZoom:K,translateExtent:G,flowWidth:L,flowHeight:W,ariaLabelConfig:I}=Ge(GL,mt),Y=t?.width??VL,k=t?.height??FL,z=D.width/Y,V=D.height/k,q=Math.max(z,V),H=q*Y,M=q*k,B=A*q,Q=D.x-(H-D.width)/2-B,ee=D.y-(M-D.height)/2-B,he=H+B*2,ge=M+B*2,ae=`${XL}-${P}`,le=R.useRef(0),Z=R.useRef();le.current=q,R.useEffect(()=>{if(j.current&&K)return Z.current=c$({domNode:j.current,panZoom:K,getTransform:()=>O.getState().transform,getViewScale:()=>le.current}),()=>{Z.current?.destroy()}},[K]),R.useEffect(()=>{Z.current?.update({translateExtent:G,width:L,height:W,inversePan:N,pannable:w,zoomStep:E,zoomable:S})},[w,S,N,E,G,L,W]);const fe=b?be=>{const[De,oe]=Z.current?.pointer(be)||[0,0];b(be,{x:De,y:oe})}:void 0,pe=x?R.useCallback((be,De)=>{const oe=O.getState().nodeLookup.get(De).internals.userNode;x(be,oe)},[]):void 0,ve=C??I["minimap.ariaLabel"];return _.jsx(ff,{position:v,style:{...t,"--xy-minimap-background-color-props":typeof f=="string"?f:void 0,"--xy-minimap-mask-background-color-props":typeof h=="string"?h:void 0,"--xy-minimap-mask-stroke-color-props":typeof g=="string"?g:void 0,"--xy-minimap-mask-stroke-width-props":typeof p=="number"?p*q:void 0,"--xy-minimap-node-background-color-props":typeof s=="string"?s:void 0,"--xy-minimap-node-stroke-color-props":typeof n=="string"?n:void 0,"--xy-minimap-node-stroke-width-props":typeof c=="number"?c:void 0},className:Nt(["react-flow__minimap",e]),"data-testid":"rf__minimap",children:_.jsxs("svg",{width:Y,height:k,viewBox:`${Q} ${ee} ${he} ${ge}`,className:"react-flow__minimap-svg",role:"img","aria-labelledby":ae,ref:j,onClick:fe,children:[ve&&_.jsx("title",{id:ae,children:ve}),_.jsx(HL,{onClick:pe,nodeColor:s,nodeStrokeColor:n,nodeBorderRadius:l,nodeClassName:a,nodeStrokeWidth:c,nodeComponent:d}),_.jsx("path",{className:"react-flow__minimap-mask",d:`M${Q-B},${ee-B}h${he+B*2}v${ge+B*2}h${-he-B*2}z
        M${$.x},${$.y}h${$.width}v${$.height}h${-$.width}z`,fillRule:"evenodd",pointerEvents:"none"})]})})}nC.displayName="MiniMap";R.memo(nC);const KL=t=>e=>t?`${Math.max(1/e.transform[2],1)}`:void 0,QL={[Xa.Line]:"right",[Xa.Handle]:"bottom-right"};function WL({nodeId:t,position:e,variant:n=Xa.Handle,className:s,style:a=void 0,children:l,color:c,minWidth:d=10,minHeight:f=10,maxWidth:h=Number.MAX_VALUE,maxHeight:g=Number.MAX_VALUE,keepAspectRatio:p=!1,resizeDirection:v,autoScale:b=!0,shouldResize:x,onResizeStart:w,onResize:S,onResizeEnd:C}){const N=Kg(),E=typeof t=="string"?t:N,A=dt(),O=R.useRef(null),j=n===Xa.Handle,D=Ge(R.useCallback(KL(j&&b),[j,b]),mt),$=R.useRef(null),P=e??QL[n];R.useEffect(()=>{if(!(!O.current||!E))return $.current||($.current=S$({domNode:O.current,nodeId:E,getStoreItems:()=>{const{nodeLookup:G,transform:L,snapGrid:W,snapToGrid:I,nodeOrigin:Y,domNode:k}=A.getState();return{nodeLookup:G,transform:L,snapGrid:W,snapToGrid:I,nodeOrigin:Y,paneDomNode:k}},onChange:(G,L)=>{const{triggerNodeChanges:W,nodeLookup:I,parentLookup:Y,nodeOrigin:k}=A.getState(),z=[],V={x:G.x,y:G.y},q=I.get(E);if(q&&q.expandParent&&q.parentId){const H=q.origin??k,M=G.width??q.measured.width??0,B=G.height??q.measured.height??0,Q={id:q.id,parentId:q.parentId,rect:{width:M,height:B,...r1({x:G.x??q.position.x,y:G.y??q.position.y},{width:M,height:B},q.parentId,I,H)}},ee=Gg([Q],I,Y,k);z.push(...ee),V.x=G.x?Math.max(H[0]*M,G.x):void 0,V.y=G.y?Math.max(H[1]*B,G.y):void 0}if(V.x!==void 0&&V.y!==void 0){const H={id:E,type:"position",position:{...V}};z.push(H)}if(G.width!==void 0&&G.height!==void 0){const M={id:E,type:"dimensions",resizing:!0,setAttributes:v?v==="horizontal"?"width":"height":!0,dimensions:{width:G.width,height:G.height}};z.push(M)}for(const H of L){const M={...H,type:"position"};z.push(M)}W(z)},onEnd:({width:G,height:L})=>{const W={id:E,type:"dimensions",resizing:!1,dimensions:{width:G,height:L}};A.getState().triggerNodeChanges([W])}})),$.current.update({controlPosition:P,boundaries:{minWidth:d,minHeight:f,maxWidth:h,maxHeight:g},keepAspectRatio:p,resizeDirection:v,onResizeStart:w,onResize:S,onResizeEnd:C,shouldResize:x}),()=>{$.current?.destroy()}},[P,d,f,h,g,p,w,S,C,x]);const K=P.split("-");return _.jsx("div",{className:Nt(["react-flow__resize-control","nodrag",...K,n,s]),ref:O,style:{...a,scale:D,...c&&{[j?"backgroundColor":"borderColor"]:c}},children:l})}R.memo(WL);const rC=t=>_.jsx(Wt,{...t,type:"target",position:Ce.Left,id:"exec-in",acceptHandle:"exec-out",style:{...t.style,width:8,height:8,borderRadius:"2px",backgroundColor:"#ff0072"}}),sC=t=>_.jsx(Wt,{...t,type:"source",position:Ce.Right,id:"exec-out",acceptHandle:"exec-in",acceptConnection:({connection:e})=>e.targetHandle==="exec-in",style:{width:8,height:8,borderRadius:"2px",backgroundColor:"#ff0072"}}),JL=({data:t})=>{const{updateNodeData:e}=Ai(),{shot:n={}}=t,{description:s="",prompt:a="",embodys:l=[]}=n;R.useEffect(()=>{},[]);const c=d=>[];return _.jsxs("div",{className:"common-node-area",children:[_.jsx("h4",{className:"shot-node-input-title common-node-title",children:""}),_.jsx("div",{className:"shot-node-input-handle",children:_.jsx(sC,{id:"exec-out"})}),_.jsxs("div",{className:"shot-node-input-handle",children:[_.jsx(Wt,{type:"source",position:Ce.Right,id:"description"}),_.jsx("span",{className:"handle-label",children:""})]}),_.jsxs("div",{className:"shot-node-input-handle",children:[_.jsx(Wt,{type:"source",position:Ce.Right,id:"prompt"}),_.jsx("span",{className:"handle-label",children:""})]}),l.map((d,f)=>{const h=c();return _.jsxs("div",{className:"shot-node-input-handle",children:[_.jsx(Wt,{type:"source",position:Ce.Right,id:`embody-${d}`}),_.jsx("span",{className:"handle-label",children:h.name})]},`embody-${d}`)})]})},ZL=t=>(Z1({handleType:t.type}),_.jsx(Wt,{...t}));function ez({data:t}){return _.jsxs("div",{className:"common-node-area",children:[_.jsx("h4",{className:"common-node-title console-node-title",children:""}),_.jsxs("div",{className:"common-exec-handle-area",children:[_.jsx(rC,{id:"exec-in"}),_.jsx(sC,{id:"exec-out"})]}),_.jsxs("div",{className:"shot-node-input-handle",children:[_.jsx(ZL,{type:"target",position:Ce.Left,id:"input"}),_.jsx("span",{className:"handle-label",children:""})]})]})}const tz=({data:t})=>{const{output:e={}}=t;return _.jsxs("div",{className:"common-node-area",children:[_.jsx("h4",{className:"shot-node-output-title common-node-title",children:""}),_.jsx("div",{className:"shot-node-output-handle",children:_.jsx(rC,{id:"exec-in"})}),_.jsxs("div",{className:"shot-node-output-handle",children:[_.jsx(Wt,{type:"target",position:Ce.Left,id:"image"}),_.jsx("span",{className:"handle-label",children:""})]}),_.jsxs("div",{className:"shot-node-output-handle",children:[_.jsx(Wt,{type:"target",position:Ce.Left,id:"video"}),_.jsx("span",{className:"handle-label",children:""})]}),_.jsxs("div",{className:"shot-node-output-handle",children:[_.jsx(Wt,{type:"target",position:Ce.Left,id:"audio"}),_.jsx("span",{className:"handle-label",children:""})]})]})};function nz({id:t,data:e,selected:n}){const{updateNodeData:s}=Ai(),[a,l]=R.useState(null),[c,d]=R.useState(!1),[f,h]=R.useState(!1),[g,p]=R.useState([]),[v,b]=R.useState([]),[x,w]=R.useState({}),[S,C]=R.useState(""),[N,E]=R.useState("16:9"),[A,O]=R.useState(1),[j,D]=R.useState("fal-ai/nano-banana/edit"),[$,P]=R.useState(0),[K,G]=R.useState(0),L=Ai(),W=()=>{switch(N){case"16:9":return{paddingBottom:"56.25%",width:"100%",position:"relative",height:0,overflow:"hidden"};case"9:16":return{paddingBottom:"177.78%",width:"100%",position:"relative",height:0,overflow:"hidden"};case"4:3":return{paddingBottom:"75%",width:"100%",position:"relative",height:0,overflow:"hidden"};default:return{paddingBottom:"56.25%",width:"100%",position:"relative",height:0,overflow:"hidden"}}},I=()=>({position:"absolute",top:0,left:0,width:"100%",height:"100%",objectFit:"contain"}),Y=Z1({handleType:"target",handleId:"ref_images"}),k=Y.map(H=>H.source),z=EL(k),V=()=>z?(Array.isArray(z)?z:[z]).flatMap(B=>B&&B.data&&Array.isArray(B.data.outputImages)?B.data.outputImages:[]):[];R.useEffect(()=>{console.log("sourceNodesData:",z),console.log("getAggregatedRefImages:",V()),b(V())},[z]),R.useEffect(()=>{P(g.length),g.length>0&&l(g[K].url)},[g,K]),R.useEffect(()=>{C(e.prompt),E(e.aspect_ratio),O(e.num_images),D(e.model),p(e.images||[]),console.log("embodyConnections:",Y)},[]);const q=async()=>{let H={};console.log("referenceImages:",v),j==="fal-ai/nano-banana/edit"&&(H={prompt:S,num_images:Number(A),aspect_ratio:N,output_format:"png",image_urls:v.map(M=>M!=null?M.url:"")}),j==="fal-ai/nano-banana-pro/edit"&&(H={prompt:e.prompt}),j==="fal-ai/bytedance/seedream/v4/edit"&&(H={prompt:e.prompt}),console.log(H);try{uw.fal.config({credentials:"d0f5c4fd-29b2-4024-bc64-a4719276c027:5b06c17b429cc06d2f5e044e95ca5164"});const M=await uw.fal.subscribe("fal-ai/nano-banana/edit",{input:H,logs:!0,onQueueUpdate:B=>{B.status==="IN_PROGRESS"&&d(!0),B.status==="SUCCEEDED"&&d(!1)},onResult:B=>{console.log(B)},onError:B=>{console.error("Error:",B),d(!1)}});l(null),console.log(M.data),p(M.data.images),L&&L.setNodes(B=>B.map(Q=>Q.id===t?{...Q,data:{...Q.data,images:M.data.images}}:Q)),G(0),d(!1)}catch(M){console.error("Error:",M),d(!1)}};return _.jsxs("div",{className:"txt-image-node-area",children:[_.jsxs("div",{className:"txt2img-handles-container",children:[_.jsx(Wt,{type:"target",position:Ce.Left,id:"ref_images"}),_.jsx(Wt,{type:"source",position:Ce.Right,id:"image"})]}),_.jsxs("div",{className:"txt2img-preview-container",children:[_.jsxs("div",{className:"txt2img-preview-header",children:[_.jsxs("div",{className:"txt2img-preview-title",children:["Image-",K]}),_.jsx("div",{className:"txt2img-preview-controls",children:_.jsx("span",{className:"",children:j})})]}),_.jsxs("div",{className:"txt2img-preview-image",children:[_.jsx("div",{className:"txt2img-placeholder-image",style:W(),children:a?_.jsxs(_.Fragment,{children:[_.jsx("img",{src:a,alt:"Generated",style:I()}),_.jsx("button",{className:"embody-view-large-btn",onClick:()=>{console.log("currentImageUrl",a),Qt.emit("showLargeImageModal",a)},style:{position:"absolute",top:"8px",right:"8px",zIndex:10},children:""})]}):_.jsx("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",textAlign:"center",padding:"20px"},className:"txt2img-placeholder-text",children:""})}),g.length>1&&_.jsxs("div",{className:"txt2img-pagination",children:[_.jsx("button",{className:"txt2img-pagination-btn",onClick:()=>G(H=>Math.max(H-1,0)),children:""}),_.jsxs("span",{className:"txt2img-pagination-text",children:[K+1," / ",$]}),_.jsx("button",{className:"txt2img-pagination-btn",onClick:()=>G(H=>Math.min(H+1,$-1)),children:""})]}),c&&_.jsxs("div",{className:"txt2img-loading-overlay",children:[_.jsx("div",{className:"txt2img-loading-spinner"}),_.jsx("span",{className:"txt2img-loading-text",children:"..."})]})]})]}),n&&_.jsxs(_.Fragment,{children:[_.jsx("div",{className:"txt2img-prompt-container",children:_.jsx("textarea",{className:"txt2img-prompt-textarea",value:S,onChange:H=>{const M=H.target.value;C(M),L&&L.setNodes(B=>B.map(Q=>Q.id===t?{...Q,data:{...Q.data,prompt:M}}:Q))},placeholder:"..."})}),_.jsxs("div",{className:"txt2img-reference-container",children:[_.jsxs("div",{className:"txt2img-reference-title",children:[" (",v.length,"/10)"]}),_.jsx("div",{className:"txt2img-reference-grid",children:v&&v.map((H,M)=>_.jsx("div",{className:"txt2img-reference-item",children:_.jsx("img",{src:H.url||"",alt:`Reference ${M+1}`})},M))})]}),_.jsxs("div",{className:"txt2img-bottom-controls",children:[_.jsxs("div",{className:"txt2img-controls-left",children:[_.jsx("div",{className:"txt2img-control-group",children:_.jsxs("select",{value:j,onChange:H=>{const M=H.target.value;D(M),L&&L.setNodes(B=>B.map(Q=>Q.id===t?{...Q,data:{...Q.data,model:M}}:Q))},className:"txt2img-control-select",children:[_.jsx("option",{value:"fal-ai/nano-banana/edit",children:"Nano Banana"}),_.jsx("option",{value:"fal-ai/nano-banana-pro/edit",children:"Nano Banana Pro"}),_.jsx("option",{value:"fal-ai/bytedance/seedream/v4/edit",children:"v4"})]})}),_.jsx("div",{className:"txt2img-control-group",children:_.jsxs("select",{value:N,onChange:H=>{const M=H.target.value;E(M),L&&L.setNodes(B=>B.map(Q=>Q.id===t?{...Q,data:{...Q.data,aspect_ratio:M}}:Q))},className:"txt2img-control-select",children:[_.jsx("option",{value:"16:9",children:"16:9 "}),_.jsx("option",{value:"9:16",children:"9:16 "}),_.jsx("option",{value:"4:3",children:"4:3 "})]})}),_.jsx("div",{className:"txt2img-control-group",children:_.jsxs("select",{value:A,onChange:H=>{const M=H.target.value;O(M),L&&L.setNodes(B=>B.map(Q=>Q.id===t?{...Q,data:{...Q.data,num_images:parseInt(M)}}:Q))},className:"txt2img-control-select",children:[_.jsx("option",{value:"1",children:"1"}),_.jsx("option",{value:"2",children:"2"}),_.jsx("option",{value:"3",children:"3"}),_.jsx("option",{value:"4",children:"4"})]})})]}),_.jsxs("div",{className:"txt2img-controls-right",children:[_.jsx("button",{className:"txt2img-control-button",children:""}),_.jsx("button",{disabled:c,onClick:q,className:"txt2img-generate-button",children:""})]})]})]})]})}function rz({id:t,data:e,selected:n}){const{updateNodeData:s}=Ai(),[a,l]=R.useState(null),[c,d]=R.useState(!1),[f,h]=R.useState({}),[g,p]=R.useState(""),[v,b]=R.useState(""),[x,w]=R.useState([]),[S,C]=R.useState([0]),[N,E]=R.useState([]),[A,O]=R.useState(""),[j,D]=R.useState(""),$={character:"",scene:"",item:""},K={...{characterName:"",characterDescription:"",imageUrl:"/default_avatar.png"},...e};R.useEffect(()=>{O(K.characterName),D(K.characterDescription)},[K]),R.useEffect(()=>{console.log("EmbodyNode ID:",e.id),Me.from("embodys").select(`
          *,
          embody_images(
            path
          )
        `).eq("id",e.id).single().then(k=>{h(k.data),p(k.data.name),b($[k.data.type]||"");const z=k.data.embody_images.map(V=>({path:V.path,url:gi+V.path}));if(z.length==0&&z.push({path:"/public/Common/default_charactar_big.png",url:"https://gsyznlwsezhwerypyzbe.supabase.co/storage/v1/object/public/embodys/public/Common/default_charactar_big.png"}),console.log(":",z),w(z),C([0]),l(z[0].url),k.data.embody_images&&k.data.embody_images.length>0){let V=gi+k.data.embody_images[0].path;console.log(":",V)}})},[t]),R.useEffect(()=>{x.length>0&&s(t,{outputImages:S.map(k=>x[k])})},[S]);const G=()=>{console.log("")},L=k=>{C(z=>z.includes(k)?z.filter(V=>V!==k):[...z,k]),console.log(":",S)},[W,I]=R.useState(1),Y=k=>{if(k>=1&&k<=S.length&&(I(k),S.length>0)){let z=gi+x[S[k-1]].path;l(z)}};return _.jsxs("div",{className:"embody-node-area",children:[_.jsx("div",{className:"embody-handles-container",children:_.jsx(Wt,{type:"source",position:Ce.Right,id:"embody_out"})}),_.jsxs("div",{className:"embody-preview-container",children:[_.jsxs("div",{className:"embody-preview-header",children:[_.jsx("div",{className:"embody-preview-title",children:g||""}),_.jsx("span",{children:v||""}),_.jsx("div",{className:"embody-preview-controls",children:n&&_.jsx("button",{className:"embody-control-btn",onClick:G,children:""})})]}),_.jsxs("div",{className:"embody-preview-image",children:[_.jsx("div",{className:"embody-placeholder-image",children:a?_.jsxs(_.Fragment,{children:[_.jsx("img",{src:a,alt:"Character Preview"}),_.jsx("button",{className:"embody-view-large-btn",onClick:()=>{console.log("currentImageUrl",a),Qt.emit("showLargeImageModal",a)},children:""})]}):_.jsx("div",{className:"embody-placeholder-text",children:""})}),c&&_.jsxs("div",{className:"embody-loading-overlay",children:[_.jsx("div",{className:"embody-loading-spinner"}),_.jsx("span",{className:"embody-loading-text",children:"..."})]}),S.length>1&&_.jsxs("div",{className:"embody-pagination",children:[_.jsx("button",{className:"embody-pagination-btn",onClick:()=>Y(W-1),disabled:W===1,children:""}),_.jsxs("span",{className:"embody-pagination-text",children:[W," / ",S.length]}),_.jsx("button",{className:"embody-pagination-btn",onClick:()=>Y(W+1),disabled:W===S.length,children:""})]})]})]}),n&&_.jsx(_.Fragment,{children:_.jsx("div",{className:"embody-info-container",children:_.jsxs("div",{className:"embody-info-item",children:[_.jsx("label",{className:"embody-info-label",children:""}),_.jsx("div",{className:"embody-info-images",children:x.map((k,z)=>_.jsxs("div",{className:`embody-info-image-item ${S.includes(z)?"selected":""}`,onClick:()=>L(z),children:[_.jsx("img",{src:gi+k.path,alt:`${z}`}),S.includes(z)&&_.jsx("div",{className:"embody-image-checkmark",children:""})]},z))})]})})})]})}const sz=({id:t,source:e,target:n,sourceX:s,sourceY:a,targetX:l,targetY:c,sourcePosition:d,targetPosition:f,selected:h,data:g})=>{const[p,v]=R.useMemo(()=>{const A=Hg({sourceX:s,sourceY:a,targetX:l,targetY:c,sourcePosition:d,targetPosition:f}),O=document.createElementNS("http://www.w3.org/2000/svg","path");O.setAttribute("d",A[0]),document.body.appendChild(O);const j=O.getTotalLength();return document.body.removeChild(O),[A[0],j]},[s,a,l,c,d,f]),[b,x]=R.useState(`${t}-animate`),[w,S]=R.useState(!0),C=Math.max(3,Math.min(8,v/5));R.useEffect(()=>{x(`${t}-animate-${Date.now()}`)},[t]);const N={stroke:h?"#ff4088":"#ff0072",strokeWidth:h?3:2,fill:"none",cursor:"pointer",transition:"stroke 0.2s, stroke-width 0.2s"},E={stroke:"white",strokeWidth:"3",fill:"none",strokeDasharray:"12, 8",strokeLinecap:"round",pointerEvents:"none"};return _.jsxs(_.Fragment,{children:[_.jsx("path",{id:t,d:p,className:`exec-edge ${h?"selected":""}`,style:N,onMouseEnter:A=>{A.currentTarget.style.stroke="#ff4088",A.currentTarget.style.strokeWidth="3"},onMouseLeave:A=>{A.currentTarget.style.stroke=h?"#ff4088":"#ff0072",A.currentTarget.style.strokeWidth=h?"3":"2"}}),w&&_.jsx("path",{id:b,d:p,className:"exec-edge-flow",style:{...E,animation:w?`flowAnimation ${C}s linear infinite`:"none",visibility:v>0?"visible":"hidden"}}),_.jsxs("defs",{children:[_.jsx("marker",{id:"exec-arrow",markerWidth:"10",markerHeight:"10",refX:"9",refY:"3",orient:"auto",markerUnits:"strokeWidth",children:_.jsx("path",{d:"M0,0 L0,6 L9,3 z",fill:"#ff0072"})}),_.jsx("style",{type:"text/css",children:`
            @keyframes flowAnimation {
              0% {
                stroke-dashoffset: 200; /*  */
              }
              100% {
                stroke-dashoffset: 0;
              }
            }
            
            .exec-edge-flow {
              /*  */
              filter: drop-shadow(0 0 2px rgba(255, 255, 255, 0.7));
              /*  */
              will-change: stroke-dashoffset;
            }
            
            /*  */
            .exec-edge.selected + .exec-edge-flow {
              stroke-width: 4; /*  */
              filter: drop-shadow(0 0 4px rgba(255, 255, 255, 0.9));
              animation-duration: 3s; /*  */
            }
          `})]})]})},iz=({position:t,visible:e,onClose:n,onAddConsoleNode:s,onAddShotNodeInput:a,onAddShotNodeOutput:l,onAddTxt2ImgNode:c,onAddEmbodyNode:d})=>{const f=R.useRef(null);return R.useEffect(()=>{const h=p=>{f.current&&!f.current.contains(p.target)&&n()},g=p=>{p.key==="Escape"&&n()};return e&&(document.addEventListener("mousedown",h),document.addEventListener("keydown",g)),()=>{document.removeEventListener("mousedown",h),document.removeEventListener("keydown",g)}},[e,n]),e?_.jsx("div",{ref:f,className:"context-menu",style:{position:"fixed",left:`${t.x}px`,top:`${t.y}px`,zIndex:1e3},children:_.jsxs("ul",{children:[_.jsx("li",{onClick:s,children:""}),_.jsx("li",{onClick:a,children:""}),_.jsx("li",{onClick:l,children:""}),_.jsx("li",{onClick:c,children:""}),_.jsx("li",{onClick:d,children:""})]})}):null};function az(){const{projectId:t,ep_id:e,editShotId:n,setEditShotId:s}=Qr(),[a,l]=R.useState(!1),[c,d]=R.useState(!1),[f,h]=R.useState([]),[g,p]=R.useState({}),[v,b]=R.useState(null),[x,w]=R.useState([]),[S,C]=R.useState(null),[N,E]=R.useState(!1),[A,O]=R.useState({x:0,y:0}),[j,D]=R.useState(null);R.useEffect(()=>{n||console.log(""),$()},[n]);const $=async()=>{const{data:Z,error:fe}=await Me.from("movie_scs").select(`
          *,
          movie_seqs(
            *,
            movie_shots(
              *,
              flows(
                *
              )
            )
          ).order('index', { ascending: true })
        `).order("index",{ascending:!0}).eq("ep_id",e);if(fe){console.error(":",fe);return}console.log(":",Z),Z.forEach(pe=>{pe.movie_seqs.forEach(ve=>{ve.movie_shots.forEach(be=>{g[be.id]=be})})}),h(Z),b(n)},P=Z=>{b(Z.id)},K=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(Z){var fe=Math.random()*16|0,pe=Z==="x"?fe:fe&3|8;return pe.toString(16)}),G=Z=>{console.log("setupInitNodes:",Z);const fe=K();let pe=[],ve=[];pe.push({id:fe,type:"txt2imgNode",position:{x:900,y:100},data:{prompt:Z.prompt,num_images:1,aspect_ratio:"16:9",model:"fal-ai/nano-banana/edit",images:[]},selected:S==="0",style:{border:S==="0"?"2px solid #3b82f6":"none"}});for(let be=0;be<Z.embodys.length;be++){const De=Z.embodys[be],oe=`ImageNode_${Z.embodys[be]}`;console.log(" embody _id:",De),pe.push({id:oe,type:"embodyNode",position:{x:100,y:500*be},data:{id:De,selected:S===oe},selected:S===oe,style:{border:S===oe?"2px solid #3b82f6":"none"}}),ve.push({id:K(),source:oe,sourceHandle:"embody_out",target:fe,targetHandle:"ref_images",type:"default",data:{}})}w(pe),W(ve)};R.useEffect(()=>{console.log("selectedShotId:",v),v&&(console.log(g[v]),Me.from("movie_shots").select(`
      *,
      flows(
        *
      )
    `).eq("id",v).single().then(Z=>{console.log("shot:",Z.data),g[v]=Z.data,Z.data.flows||d(Z.data.flows.length>0),Z.data.flows.length>0?(w(JSON.parse(Z.data.flows[0].nodes)),W(JSON.parse(Z.data.flows[0].edges))):G(Z.data)}))},[v]),R.useEffect(()=>{},[x]);const[L,W]=R.useState([]),I={shotNodeInput:JL,consoleNode:ez,shotNodeOutput:tz,txt2imgNode:nz,embodyNode:rz},Y={execEdge:sz},k=Z=>{l(!0),W(fe=>{if(Z.target==="2"&&fe.some(be=>be.target==="2"))return console.warn("ConsoleNode"),fe;const pe={...Z,type:Z.sourceHandle==="exec-out"&&Z.targetHandle==="exec-in"?"execEdge":"default"};return c1(pe,fe)})},z=()=>{const Z=j.toObject();console.log("flowState:",Z)};R.useEffect(()=>{const Z=setInterval(()=>{z()},1e3);return()=>clearInterval(Z)},[x,L,a]),R.useEffect(()=>{const Z=fe=>{if(fe.key==="Delete"){const pe=x.filter(ve=>ve.selected);if(pe.length>0){const ve=x.filter(oe=>!oe.selected);w(ve),l(!0);const be=pe.map(oe=>oe.id),De=L.filter(oe=>!be.includes(oe.source)&&!be.includes(oe.target));W(De)}}};return window.addEventListener("keydown",Z),()=>window.removeEventListener("keydown",Z)},[x,L]);const V=(Z,fe)=>{Z.stopPropagation();const pe=fe.id;C(pe),w(ve=>ve.map(be=>({...be,selected:be.id===pe,style:{...be.style,border:be.id===pe?"2px solid #3b82f6":"none"}}))),console.log(":",pe)},q=(Z,fe)=>{Z.preventDefault(),fe||(O({x:Z.clientX,y:Z.clientY}),E(!0))},H=()=>{E(!1)},M=()=>(x.reduce((fe,pe)=>{const ve=parseInt(pe.id);return isNaN(ve)?fe:Math.max(fe,ve)},0)+1).toString(),B=()=>{if(j){const Z=j.screenToFlowPosition(A),fe={id:M(),type:"consoleNode",position:{x:Z.x-75,y:Z.y-30},data:{},selected:!1,style:{border:"none"}};w(pe=>[...pe,fe]),console.log(":",fe.id)}H()},Q=()=>{if(j){const Z=j.screenToFlowPosition(A),fe={id:M(),type:"shotNodeInput",position:{x:Z.x-100,y:Z.y-50},data:{shot:v?g[v]:{description:"",prompt:"",embodys:[]}},selected:!1,style:{border:"none"}};w(pe=>[...pe,fe]),console.log(":",fe.id)}H()},ee=()=>{if(j){const Z=j.screenToFlowPosition(A),fe={id:M(),type:"shotNodeOutput",position:{x:Z.x-100,y:Z.y-50},data:{output:{}},selected:!1,style:{border:"none"}};w(pe=>[...pe,fe]),console.log(":",fe.id)}H()},he=()=>{if(j){const Z=j.screenToFlowPosition(A),fe={id:M(),type:"txt2imgNode",position:{x:Z.x-40,y:Z.y-50},data:{prompt:"",imageUrl:null},selected:!1,style:{border:"none"}};w(pe=>[...pe,fe]),console.log(":",fe.id)}H()},ge=()=>{if(j){const Z=j.screenToFlowPosition(A),fe={id:M(),type:"embodyNode",position:{x:Z.x-40,y:Z.y-50},data:{characterName:"",characterDescription:"",imageUrl:null},selected:!1,style:{border:"none"}};w(pe=>[...pe,fe]),console.log(":",fe.id)}H()},ae=R.useCallback(Z=>{W(fe=>O1(Z,fe)),l(!0)},[]),le=R.useCallback(Z=>{w(fe=>N1(Z,fe)),l(!0)},[]);return _.jsxs("div",{className:"editor-flow-container",children:[_.jsx("div",{className:"story-nav",children:_.jsx("div",{className:"flow-nav-info",children:f.map(Z=>_.jsxs("div",{className:"flow-nav-sc-card",children:[_.jsx("div",{className:"flow-nav-sc-name",children:_.jsx("p",{children:Z.name})}),_.jsx("div",{className:"flow-nav-sc-content",children:Z.movie_seqs.map(fe=>_.jsxs("div",{className:"flow-nav-seq-card",children:[_.jsx("div",{className:"flow-nav-seq-name",children:_.jsx("p",{children:fe.name})}),_.jsx("div",{className:"flow-nav-seq-content",children:fe.movie_shots.map(pe=>_.jsx("div",{className:`flow-nav-shot-card ${v===pe.id?"nav-selected-shot":""}`,onClick:()=>P(pe),children:_.jsx("div",{className:"flow-nav-shot-thumb",children:_.jsx("img",{src:pe.pic?pe.pic:"./shot_thumb_default.png"})})},pe.id))})]},fe.id))})]},Z.id))})}),_.jsxs("div",{className:"flow-editor",children:[_.jsxs(xL,{nodes:x,edges:L,nodeTypes:I,edgeTypes:Y,onConnect:k,onEdgesChange:ae,onNodesChange:le,onNodeClick:V,defaultViewport:{x:0,y:0,zoom:.6},onPaneClick:()=>{C(null),H(),w(Z=>Z.map(fe=>({...fe,selected:!1,style:{...fe.style,border:"none"}})))},onContextMenu:q,onInit:D,attributionPosition:"bottom-right",children:[_.jsx($L,{}),_.jsx(OL,{variant:"dots",gap:20,size:1,strokeColor:"#333"})]}),_.jsx(iz,{position:A,visible:N,onClose:H,onAddConsoleNode:B,onAddShotNodeInput:Q,onAddShotNodeOutput:ee,onAddTxt2ImgNode:he,onAddEmbodyNode:ge})]})]})}function Ie(t,e,n,s,a){if(typeof e=="function"?t!==e||!0:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(t,n),n}function re(t,e,n,s){if(n==="a"&&!s)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?s:n==="a"?s.call(t):s?s.value:e.get(t)}let iC=function(){const{crypto:t}=globalThis;if(t?.randomUUID)return iC=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),n=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,s=>(+s^n()&15>>+s/4).toString(16))};function eg(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const tg=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};class je extends Error{}class Vt extends je{constructor(e,n,s,a){super(`${Vt.makeMessage(e,n,s)}`),this.status=e,this.headers=a,this.requestID=a?.get("x-request-id"),this.error=n;const l=n;this.code=l?.code,this.param=l?.param,this.type=l?.type}static makeMessage(e,n,s){const a=n?.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):s;return e&&a?`${e} ${a}`:e?`${e} status code (no body)`:a||"(no status code or body)"}static generate(e,n,s,a){if(!e||!a)return new pf({message:s,cause:tg(n)});const l=n?.error;return e===400?new aC(e,l,s,a):e===401?new oC(e,l,s,a):e===403?new lC(e,l,s,a):e===404?new cC(e,l,s,a):e===409?new uC(e,l,s,a):e===422?new dC(e,l,s,a):e===429?new fC(e,l,s,a):e>=500?new hC(e,l,s,a):new Vt(e,l,s,a)}}class qn extends Vt{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class pf extends Vt{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}}class Qg extends pf{constructor({message:e}={}){super({message:e??"Request timed out."})}}class aC extends Vt{}class oC extends Vt{}class lC extends Vt{}class cC extends Vt{}class uC extends Vt{}class dC extends Vt{}class fC extends Vt{}class hC extends Vt{}class mC extends je{constructor(){super("Could not parse response content as the length limit was reached")}}class pC extends je{constructor(){super("Could not parse response content as the request was rejected by the content filter")}}class hl extends Error{constructor(e){super(e)}}const oz=/^[a-z][a-z0-9+.-]*:/i,lz=t=>oz.test(t);let dn=t=>(dn=Array.isArray,dn(t)),vx=dn;function gC(t){return typeof t!="object"?{}:t??{}}function cz(t){if(!t)return!0;for(const e in t)return!1;return!0}function uz(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function pp(t){return t!=null&&typeof t=="object"&&!Array.isArray(t)}const dz=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new je(`${t} must be an integer`);if(e<0)throw new je(`${t} must be a positive integer`);return e},fz=t=>{try{return JSON.parse(t)}catch{return}},ic=t=>new Promise(e=>setTimeout(e,t)),ka="6.9.1",hz=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u";function mz(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const pz=()=>{const t=mz();if(t==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ka,"X-Stainless-OS":_x(Deno.build.os),"X-Stainless-Arch":bx(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:Deno.version?.deno??"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ka,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(t==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ka,"X-Stainless-OS":_x(globalThis.process.platform??"unknown"),"X-Stainless-Arch":bx(globalThis.process.arch??"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":globalThis.process.version??"unknown"};const e=gz();return e?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ka,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${e.browser}`,"X-Stainless-Runtime-Version":e.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ka,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function gz(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const s=n.exec(navigator.userAgent);if(s){const a=s[1]||0,l=s[2]||0,c=s[3]||0;return{browser:e,version:`${a}.${l}.${c}`}}}return null}const bx=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",_x=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let wx;const yz=()=>wx??(wx=pz());function vz(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new OpenAI({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function yC(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function vC(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return yC({start(){},async pull(n){const{done:s,value:a}=await e.next();s?n.close():n.enqueue(a)},async cancel(){await e.return?.()}})}function bC(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const n=await e.read();return n?.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function bz(t){if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await t[Symbol.asyncIterator]().return?.();return}const e=t.getReader(),n=e.cancel();e.releaseLock(),await n}const _z=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)}),_C="RFC3986",wC=t=>String(t),xx={RFC1738:t=>String(t).replace(/%20/g,"+"),RFC3986:wC},wz="RFC1738";let ng=(t,e)=>(ng=Object.hasOwn??Function.prototype.call.bind(Object.prototype.hasOwnProperty),ng(t,e));const ur=(()=>{const t=[];for(let e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t})(),gp=1024,xz=(t,e,n,s,a)=>{if(t.length===0)return t;let l=t;if(typeof t=="symbol"?l=Symbol.prototype.toString.call(t):typeof t!="string"&&(l=String(t)),n==="iso-8859-1")return escape(l).replace(/%u[0-9a-f]{4}/gi,function(d){return"%26%23"+parseInt(d.slice(2),16)+"%3B"});let c="";for(let d=0;d<l.length;d+=gp){const f=l.length>=gp?l.slice(d,d+gp):l,h=[];for(let g=0;g<f.length;++g){let p=f.charCodeAt(g);if(p===45||p===46||p===95||p===126||p>=48&&p<=57||p>=65&&p<=90||p>=97&&p<=122||a===wz&&(p===40||p===41)){h[h.length]=f.charAt(g);continue}if(p<128){h[h.length]=ur[p];continue}if(p<2048){h[h.length]=ur[192|p>>6]+ur[128|p&63];continue}if(p<55296||p>=57344){h[h.length]=ur[224|p>>12]+ur[128|p>>6&63]+ur[128|p&63];continue}g+=1,p=65536+((p&1023)<<10|f.charCodeAt(g)&1023),h[h.length]=ur[240|p>>18]+ur[128|p>>12&63]+ur[128|p>>6&63]+ur[128|p&63]}c+=h.join("")}return c};function Sz(t){return!t||typeof t!="object"?!1:!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))}function Sx(t,e){if(dn(t)){const n=[];for(let s=0;s<t.length;s+=1)n.push(e(t[s]));return n}return e(t)}const xC={brackets(t){return String(t)+"[]"},comma:"comma",indices(t,e){return String(t)+"["+e+"]"},repeat(t){return String(t)}},SC=function(t,e){Array.prototype.push.apply(t,dn(e)?e:[e])};let Ex;const Mt={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:xz,encodeValuesOnly:!1,format:_C,formatter:wC,indices:!1,serializeDate(t){return(Ex??(Ex=Function.prototype.call.bind(Date.prototype.toISOString)))(t)},skipNulls:!1,strictNullHandling:!1};function Ez(t){return typeof t=="string"||typeof t=="number"||typeof t=="boolean"||typeof t=="symbol"||typeof t=="bigint"}const yp={};function EC(t,e,n,s,a,l,c,d,f,h,g,p,v,b,x,w,S,C){let N=t,E=C,A=0,O=!1;for(;(E=E.get(yp))!==void 0&&!O;){const K=E.get(t);if(A+=1,typeof K<"u"){if(K===A)throw new RangeError("Cyclic object value");O=!0}typeof E.get(yp)>"u"&&(A=0)}if(typeof h=="function"?N=h(e,N):N instanceof Date?N=v?.(N):n==="comma"&&dn(N)&&(N=Sx(N,function(K){return K instanceof Date?v?.(K):K})),N===null){if(l)return f&&!w?f(e,Mt.encoder,S,"key",b):e;N=""}if(Ez(N)||Sz(N)){if(f){const K=w?e:f(e,Mt.encoder,S,"key",b);return[x?.(K)+"="+x?.(f(N,Mt.encoder,S,"value",b))]}return[x?.(e)+"="+x?.(String(N))]}const j=[];if(typeof N>"u")return j;let D;if(n==="comma"&&dn(N))w&&f&&(N=Sx(N,f)),D=[{value:N.length>0?N.join(",")||null:void 0}];else if(dn(h))D=h;else{const K=Object.keys(N);D=g?K.sort(g):K}const $=d?String(e).replace(/\./g,"%2E"):String(e),P=s&&dn(N)&&N.length===1?$+"[]":$;if(a&&dn(N)&&N.length===0)return P+"[]";for(let K=0;K<D.length;++K){const G=D[K],L=typeof G=="object"&&typeof G.value<"u"?G.value:N[G];if(c&&L===null)continue;const W=p&&d?G.replace(/\./g,"%2E"):G,I=dn(N)?typeof n=="function"?n(P,W):P:P+(p?"."+W:"["+W+"]");C.set(t,A);const Y=new WeakMap;Y.set(yp,C),SC(j,EC(L,I,n,s,a,l,c,d,n==="comma"&&w&&dn(N)?null:f,h,g,p,v,b,x,w,S,Y))}return j}function Cz(t=Mt){if(typeof t.allowEmptyArrays<"u"&&typeof t.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof t.encodeDotInKeys<"u"&&typeof t.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(t.encoder!==null&&typeof t.encoder<"u"&&typeof t.encoder!="function")throw new TypeError("Encoder has to be a function.");const e=t.charset||Mt.charset;if(typeof t.charset<"u"&&t.charset!=="utf-8"&&t.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");let n=_C;if(typeof t.format<"u"){if(!ng(xx,t.format))throw new TypeError("Unknown format option provided.");n=t.format}const s=xx[n];let a=Mt.filter;(typeof t.filter=="function"||dn(t.filter))&&(a=t.filter);let l;if(t.arrayFormat&&t.arrayFormat in xC?l=t.arrayFormat:"indices"in t?l=t.indices?"indices":"repeat":l=Mt.arrayFormat,"commaRoundTrip"in t&&typeof t.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");const c=typeof t.allowDots>"u"?t.encodeDotInKeys?!0:Mt.allowDots:!!t.allowDots;return{addQueryPrefix:typeof t.addQueryPrefix=="boolean"?t.addQueryPrefix:Mt.addQueryPrefix,allowDots:c,allowEmptyArrays:typeof t.allowEmptyArrays=="boolean"?!!t.allowEmptyArrays:Mt.allowEmptyArrays,arrayFormat:l,charset:e,charsetSentinel:typeof t.charsetSentinel=="boolean"?t.charsetSentinel:Mt.charsetSentinel,commaRoundTrip:!!t.commaRoundTrip,delimiter:typeof t.delimiter>"u"?Mt.delimiter:t.delimiter,encode:typeof t.encode=="boolean"?t.encode:Mt.encode,encodeDotInKeys:typeof t.encodeDotInKeys=="boolean"?t.encodeDotInKeys:Mt.encodeDotInKeys,encoder:typeof t.encoder=="function"?t.encoder:Mt.encoder,encodeValuesOnly:typeof t.encodeValuesOnly=="boolean"?t.encodeValuesOnly:Mt.encodeValuesOnly,filter:a,format:n,formatter:s,serializeDate:typeof t.serializeDate=="function"?t.serializeDate:Mt.serializeDate,skipNulls:typeof t.skipNulls=="boolean"?t.skipNulls:Mt.skipNulls,sort:typeof t.sort=="function"?t.sort:null,strictNullHandling:typeof t.strictNullHandling=="boolean"?t.strictNullHandling:Mt.strictNullHandling}}function Az(t,e={}){let n=t;const s=Cz(e);let a,l;typeof s.filter=="function"?(l=s.filter,n=l("",n)):dn(s.filter)&&(l=s.filter,a=l);const c=[];if(typeof n!="object"||n===null)return"";const d=xC[s.arrayFormat],f=d==="comma"&&s.commaRoundTrip;a||(a=Object.keys(n)),s.sort&&a.sort(s.sort);const h=new WeakMap;for(let v=0;v<a.length;++v){const b=a[v];s.skipNulls&&n[b]===null||SC(c,EC(n[b],b,d,f,s.allowEmptyArrays,s.strictNullHandling,s.skipNulls,s.encodeDotInKeys,s.encode?s.encoder:null,s.filter,s.sort,s.allowDots,s.serializeDate,s.format,s.formatter,s.encodeValuesOnly,s.charset,h))}const g=c.join(s.delimiter);let p=s.addQueryPrefix===!0?"?":"";return s.charsetSentinel&&(s.charset==="iso-8859-1"?p+="utf8=%26%2310003%3B&":p+="utf8=%E2%9C%93&"),g.length>0?p+g:""}function Tz(t){let e=0;for(const a of t)e+=a.length;const n=new Uint8Array(e);let s=0;for(const a of t)n.set(a,s),s+=a.length;return n}let Cx;function Wg(t){let e;return(Cx??(e=new globalThis.TextEncoder,Cx=e.encode.bind(e)))(t)}let Ax;function Tx(t){let e;return(Ax??(e=new globalThis.TextDecoder,Ax=e.decode.bind(e)))(t)}var En,Cn;class gf{constructor(){En.set(this,void 0),Cn.set(this,void 0),Ie(this,En,new Uint8Array),Ie(this,Cn,null)}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?Wg(e):e;Ie(this,En,Tz([re(this,En,"f"),n]));const s=[];let a;for(;(a=Nz(re(this,En,"f"),re(this,Cn,"f")))!=null;){if(a.carriage&&re(this,Cn,"f")==null){Ie(this,Cn,a.index);continue}if(re(this,Cn,"f")!=null&&(a.index!==re(this,Cn,"f")+1||a.carriage)){s.push(Tx(re(this,En,"f").subarray(0,re(this,Cn,"f")-1))),Ie(this,En,re(this,En,"f").subarray(re(this,Cn,"f"))),Ie(this,Cn,null);continue}const l=re(this,Cn,"f")!==null?a.preceding-1:a.preceding,c=Tx(re(this,En,"f").subarray(0,l));s.push(c),Ie(this,En,re(this,En,"f").subarray(a.index)),Ie(this,Cn,null)}return s}flush(){return re(this,En,"f").length?this.decode(`
`):[]}}En=new WeakMap,Cn=new WeakMap;gf.NEWLINE_CHARS=new Set([`
`,"\r"]);gf.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function Nz(t,e){for(let a=e??0;a<t.length;a++){if(t[a]===10)return{preceding:a,index:a+1,carriage:!1};if(t[a]===13)return{preceding:a,index:a+1,carriage:!0}}return null}function Oz(t){for(let s=0;s<t.length-1;s++){if(t[s]===10&&t[s+1]===10||t[s]===13&&t[s+1]===13)return s+2;if(t[s]===13&&t[s+1]===10&&s+3<t.length&&t[s+2]===13&&t[s+3]===10)return s+4}return-1}const Bd={off:0,error:200,warn:300,info:400,debug:500},Nx=(t,e,n)=>{if(t){if(uz(Bd,t))return t;qt(n).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(Bd))}`)}};function ml(){}function Zu(t,e,n){return!e||Bd[t]>Bd[n]?ml:e[t].bind(e)}const Rz={error:ml,warn:ml,info:ml,debug:ml};let Ox=new WeakMap;function qt(t){const e=t.logger,n=t.logLevel??"off";if(!e)return Rz;const s=Ox.get(e);if(s&&s[0]===n)return s[1];const a={error:Zu("error",e,n),warn:Zu("warn",e,n),info:Zu("info",e,n),debug:Zu("debug",e,n)};return Ox.set(e,[n,a]),a}const di=t=>(t.options&&(t.options={...t.options},delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,n])=>[e,e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);var ll;class hr{constructor(e,n,s){this.iterator=e,ll.set(this,void 0),this.controller=n,Ie(this,ll,s)}static fromSSEResponse(e,n,s){let a=!1;const l=s?qt(s):console;async function*c(){if(a)throw new je("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");a=!0;let d=!1;try{for await(const f of jz(e,n))if(!d){if(f.data.startsWith("[DONE]")){d=!0;continue}if(f.event===null||!f.event.startsWith("thread.")){let h;try{h=JSON.parse(f.data)}catch(g){throw l.error("Could not parse message into JSON:",f.data),l.error("From chunk:",f.raw),g}if(h&&h.error)throw new Vt(void 0,h.error,void 0,e.headers);yield h}else{let h;try{h=JSON.parse(f.data)}catch(g){throw console.error("Could not parse message into JSON:",f.data),console.error("From chunk:",f.raw),g}if(f.event=="error")throw new Vt(void 0,h.error,h.message,void 0);yield{event:f.event,data:h}}}d=!0}catch(f){if(eg(f))return;throw f}finally{d||n.abort()}}return new hr(c,n,s)}static fromReadableStream(e,n,s){let a=!1;async function*l(){const d=new gf,f=bC(e);for await(const h of f)for(const g of d.decode(h))yield g;for(const h of d.flush())yield h}async function*c(){if(a)throw new je("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");a=!0;let d=!1;try{for await(const f of l())d||f&&(yield JSON.parse(f));d=!0}catch(f){if(eg(f))return;throw f}finally{d||n.abort()}}return new hr(c,n,s)}[(ll=new WeakMap,Symbol.asyncIterator)](){return this.iterator()}tee(){const e=[],n=[],s=this.iterator(),a=l=>({next:()=>{if(l.length===0){const c=s.next();e.push(c),n.push(c)}return l.shift()}});return[new hr(()=>a(e),this.controller,re(this,ll,"f")),new hr(()=>a(n),this.controller,re(this,ll,"f"))]}toReadableStream(){const e=this;let n;return yC({async start(){n=e[Symbol.asyncIterator]()},async pull(s){try{const{value:a,done:l}=await n.next();if(l)return s.close();const c=Wg(JSON.stringify(a)+`
`);s.enqueue(c)}catch(a){s.error(a)}},async cancel(){await n.return?.()}})}}async function*jz(t,e){if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new je("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new je("Attempted to iterate over a response with no body");const n=new Mz,s=new gf,a=bC(t.body);for await(const l of kz(a))for(const c of s.decode(l)){const d=n.decode(c);d&&(yield d)}for(const l of s.flush()){const c=n.decode(l);c&&(yield c)}}async function*kz(t){let e=new Uint8Array;for await(const n of t){if(n==null)continue;const s=n instanceof ArrayBuffer?new Uint8Array(n):typeof n=="string"?Wg(n):n;let a=new Uint8Array(e.length+s.length);a.set(e),a.set(s,e.length),e=a;let l;for(;(l=Oz(e))!==-1;)yield e.slice(0,l),e=e.slice(l)}e.length>0&&(yield e)}class Mz{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const l={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],l}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,s,a]=Dz(e,":");return a.startsWith(" ")&&(a=a.substring(1)),n==="event"?this.event=a:n==="data"&&this.data.push(a),null}}function Dz(t,e){const n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}async function CC(t,e){const{response:n,requestLogID:s,retryOfRequestLogID:a,startTime:l}=e,c=await(async()=>{if(e.options.stream)return qt(t).debug("response",n.status,n.url,n.headers,n.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(n,e.controller,t):hr.fromSSEResponse(n,e.controller,t);if(n.status===204)return null;if(e.options.__binaryResponse)return n;const f=n.headers.get("content-type")?.split(";")[0]?.trim();if(f?.includes("application/json")||f?.endsWith("+json")){const p=await n.json();return AC(p,n)}return await n.text()})();return qt(t).debug(`[${s}] response parsed`,di({retryOfRequestLogID:a,url:n.url,status:n.status,body:c,durationMs:Date.now()-l})),c}function AC(t,e){return!t||typeof t!="object"||Array.isArray(t)?t:Object.defineProperty(t,"_request_id",{value:e.headers.get("x-request-id"),enumerable:!1})}var pl;class yf extends Promise{constructor(e,n,s=CC){super(a=>{a(null)}),this.responsePromise=n,this.parseResponse=s,pl.set(this,void 0),Ie(this,pl,e)}_thenUnwrap(e){return new yf(re(this,pl,"f"),this.responsePromise,async(n,s)=>AC(e(await this.parseResponse(n,s),s),s.response))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n,request_id:n.headers.get("x-request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(re(this,pl,"f"),e))),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}pl=new WeakMap;var ed;class Jg{constructor(e,n,s,a){ed.set(this,void 0),Ie(this,ed,e),this.options=a,this.response=n,this.body=s}hasNextPage(){return this.getPaginatedItems().length?this.nextPageRequestOptions()!=null:!1}async getNextPage(){const e=this.nextPageRequestOptions();if(!e)throw new je("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");return await re(this,ed,"f").requestAPIList(this.constructor,e)}async*iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async*[(ed=new WeakMap,Symbol.asyncIterator)](){for await(const e of this.iterPages())for(const n of e.getPaginatedItems())yield n}}class Uz extends yf{constructor(e,n,s){super(e,n,async(a,l)=>new s(a,l.response,await CC(a,l),l.options))}async*[Symbol.asyncIterator](){const e=await this;for await(const n of e)yield n}}class vf extends Jg{constructor(e,n,s,a){super(e,n,s,a),this.data=s.data||[],this.object=s.object}getPaginatedItems(){return this.data??[]}nextPageRequestOptions(){return null}}class Tt extends Jg{constructor(e,n,s,a){super(e,n,s,a),this.data=s.data||[],this.has_more=s.has_more||!1}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageRequestOptions(){const e=this.getPaginatedItems(),n=e[e.length-1]?.id;return n?{...this.options,query:{...gC(this.options.query),after:n}}:null}}class Pd extends Jg{constructor(e,n,s,a){super(e,n,s,a),this.data=s.data||[],this.has_more=s.has_more||!1,this.last_id=s.last_id||""}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageRequestOptions(){const e=this.last_id;return e?{...this.options,query:{...gC(this.options.query),after:e}}:null}}const TC=()=>{if(typeof File>"u"){const{process:t}=globalThis,e=typeof t?.versions?.node=="string"&&parseInt(t.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(e?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function Nl(t,e,n){return TC(),new File(t,e??"unknown_file",n)}function md(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const Zg=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function",Rx=async(t,e)=>rg(t.body)?{...t,body:await NC(t.body,e)}:t,Ti=async(t,e)=>({...t,body:await NC(t.body,e)}),jx=new WeakMap;function $z(t){const e=typeof t=="function"?t:t.fetch,n=jx.get(e);if(n)return n;const s=(async()=>{try{const a="Response"in e?e.Response:(await e("data:,")).constructor,l=new FormData;return l.toString()!==await new a(l).text()}catch{return!0}})();return jx.set(e,s),s}const NC=async(t,e)=>{if(!await $z(e))throw new TypeError("The provided fetch function does not support file uploads with the current global FormData class.");const n=new FormData;return await Promise.all(Object.entries(t||{}).map(([s,a])=>sg(n,s,a))),n},OC=t=>t instanceof Blob&&"name"in t,Iz=t=>typeof t=="object"&&t!==null&&(t instanceof Response||Zg(t)||OC(t)),rg=t=>{if(Iz(t))return!0;if(Array.isArray(t))return t.some(rg);if(t&&typeof t=="object"){for(const e in t)if(rg(t[e]))return!0}return!1},sg=async(t,e,n)=>{if(n!==void 0){if(n==null)throw new TypeError(`Received null for "${e}"; to pass null in FormData, you must use the string 'null'`);if(typeof n=="string"||typeof n=="number"||typeof n=="boolean")t.append(e,String(n));else if(n instanceof Response)t.append(e,Nl([await n.blob()],md(n)));else if(Zg(n))t.append(e,Nl([await new Response(vC(n)).blob()],md(n)));else if(OC(n))t.append(e,n,md(n));else if(Array.isArray(n))await Promise.all(n.map(s=>sg(t,e+"[]",s)));else if(typeof n=="object")await Promise.all(Object.entries(n).map(([s,a])=>sg(t,`${e}[${s}]`,a)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${n} instead`)}},RC=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",Lz=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&RC(t),zz=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function Bz(t,e,n){if(TC(),t=await t,Lz(t))return t instanceof File?t:Nl([await t.arrayBuffer()],t.name);if(zz(t)){const a=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),Nl(await ig(a),e,n)}const s=await ig(t);if(e||(e=md(t)),!n?.type){const a=s.find(l=>typeof l=="object"&&"type"in l&&l.type);typeof a=="string"&&(n={...n,type:a})}return Nl(s,e,n)}async function ig(t){let e=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)e.push(t);else if(RC(t))e.push(t instanceof Blob?t:await t.arrayBuffer());else if(Zg(t))for await(const n of t)e.push(...await ig(n));else{const n=t?.constructor?.name;throw new Error(`Unexpected data type: ${typeof t}${n?`; constructor: ${n}`:""}${Pz(t)}`)}return e}function Pz(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}class Ne{constructor(e){this._client=e}}function jC(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const kx=Object.freeze(Object.create(null)),qz=(t=jC)=>function(n,...s){if(n.length===1)return n[0];let a=!1;const l=[],c=n.reduce((g,p,v)=>{/[?#]/.test(p)&&(a=!0);const b=s[v];let x=(a?encodeURIComponent:t)(""+b);return v!==s.length&&(b==null||typeof b=="object"&&b.toString===Object.getPrototypeOf(Object.getPrototypeOf(b.hasOwnProperty??kx)??kx)?.toString)&&(x=b+"",l.push({start:g.length+p.length,length:x.length,error:`Value of type ${Object.prototype.toString.call(b).slice(8,-1)} is not a valid path parameter`})),g+p+(v===s.length?"":x)},""),d=c.split(/[?#]/,1)[0],f=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let h;for(;(h=f.exec(d))!==null;)l.push({start:h.index,length:h[0].length,error:`Value "${h[0]}" can't be safely passed as a path parameter`});if(l.sort((g,p)=>g.start-p.start),l.length>0){let g=0;const p=l.reduce((v,b)=>{const x=" ".repeat(b.start-g),w="^".repeat(b.length);return g=b.start+b.length,v+x+w},"");throw new je(`Path parameters result in path with invalid segments:
${l.map(v=>v.error).join(`
`)}
${c}
${p}`)}return c},ye=qz(jC);let kC=class extends Ne{list(e,n={},s){return this._client.getAPIList(ye`/chat/completions/${e}/messages`,Tt,{query:n,...s})}};function qd(t){return t!==void 0&&"function"in t&&t.function!==void 0}function ey(t){return t?.$brand==="auto-parseable-response-format"}function ac(t){return t?.$brand==="auto-parseable-tool"}function Hz(t,e){return!e||!MC(e)?{...t,choices:t.choices.map(n=>(DC(n.message.tool_calls),{...n,message:{...n.message,parsed:null,...n.message.tool_calls?{tool_calls:n.message.tool_calls}:void 0}}))}:ty(t,e)}function ty(t,e){const n=t.choices.map(s=>{if(s.finish_reason==="length")throw new mC;if(s.finish_reason==="content_filter")throw new pC;return DC(s.message.tool_calls),{...s,message:{...s.message,...s.message.tool_calls?{tool_calls:s.message.tool_calls?.map(a=>Fz(e,a))??void 0}:void 0,parsed:s.message.content&&!s.message.refusal?Vz(e,s.message.content):null}}});return{...t,choices:n}}function Vz(t,e){return t.response_format?.type!=="json_schema"?null:t.response_format?.type==="json_schema"?"$parseRaw"in t.response_format?t.response_format.$parseRaw(e):JSON.parse(e):null}function Fz(t,e){const n=t.tools?.find(s=>qd(s)&&s.function?.name===e.function.name);return{...e,function:{...e.function,parsed_arguments:ac(n)?n.$parseRaw(e.function.arguments):n?.function.strict?JSON.parse(e.function.arguments):null}}}function Yz(t,e){if(!t||!("tools"in t)||!t.tools)return!1;const n=t.tools?.find(s=>qd(s)&&s.function?.name===e.function.name);return qd(n)&&(ac(n)||n?.function.strict||!1)}function MC(t){return ey(t.response_format)?!0:t.tools?.some(e=>ac(e)||e.type==="function"&&e.function.strict===!0)??!1}function DC(t){for(const e of t||[])if(e.type!=="function")throw new je(`Currently only \`function\` tool calls are supported; Received \`${e.type}\``)}function Gz(t){for(const e of t??[]){if(e.type!=="function")throw new je(`Currently only \`function\` tool types support auto-parsing; Received \`${e.type}\``);if(e.function.strict!==!0)throw new je(`The \`${e.function.name}\` tool is not marked with \`strict: true\`. Only strict function tools can be auto-parsed`)}}const Hd=t=>t?.role==="assistant",UC=t=>t?.role==="tool";var ag,pd,gd,gl,yl,yd,vl,Hr,bl,Vd,Fd,Ma,$C;class ny{constructor(){ag.add(this),this.controller=new AbortController,pd.set(this,void 0),gd.set(this,()=>{}),gl.set(this,()=>{}),yl.set(this,void 0),yd.set(this,()=>{}),vl.set(this,()=>{}),Hr.set(this,{}),bl.set(this,!1),Vd.set(this,!1),Fd.set(this,!1),Ma.set(this,!1),Ie(this,pd,new Promise((e,n)=>{Ie(this,gd,e,"f"),Ie(this,gl,n,"f")})),Ie(this,yl,new Promise((e,n)=>{Ie(this,yd,e,"f"),Ie(this,vl,n,"f")})),re(this,pd,"f").catch(()=>{}),re(this,yl,"f").catch(()=>{})}_run(e){setTimeout(()=>{e().then(()=>{this._emitFinal(),this._emit("end")},re(this,ag,"m",$C).bind(this))},0)}_connected(){this.ended||(re(this,gd,"f").call(this),this._emit("connect"))}get ended(){return re(this,bl,"f")}get errored(){return re(this,Vd,"f")}get aborted(){return re(this,Fd,"f")}abort(){this.controller.abort()}on(e,n){return(re(this,Hr,"f")[e]||(re(this,Hr,"f")[e]=[])).push({listener:n}),this}off(e,n){const s=re(this,Hr,"f")[e];if(!s)return this;const a=s.findIndex(l=>l.listener===n);return a>=0&&s.splice(a,1),this}once(e,n){return(re(this,Hr,"f")[e]||(re(this,Hr,"f")[e]=[])).push({listener:n,once:!0}),this}emitted(e){return new Promise((n,s)=>{Ie(this,Ma,!0),e!=="error"&&this.once("error",s),this.once(e,n)})}async done(){Ie(this,Ma,!0),await re(this,yl,"f")}_emit(e,...n){if(re(this,bl,"f"))return;e==="end"&&(Ie(this,bl,!0),re(this,yd,"f").call(this));const s=re(this,Hr,"f")[e];if(s&&(re(this,Hr,"f")[e]=s.filter(a=>!a.once),s.forEach(({listener:a})=>a(...n))),e==="abort"){const a=n[0];!re(this,Ma,"f")&&!s?.length&&Promise.reject(a),re(this,gl,"f").call(this,a),re(this,vl,"f").call(this,a),this._emit("end");return}if(e==="error"){const a=n[0];!re(this,Ma,"f")&&!s?.length&&Promise.reject(a),re(this,gl,"f").call(this,a),re(this,vl,"f").call(this,a),this._emit("end")}}_emitFinal(){}}pd=new WeakMap,gd=new WeakMap,gl=new WeakMap,yl=new WeakMap,yd=new WeakMap,vl=new WeakMap,Hr=new WeakMap,bl=new WeakMap,Vd=new WeakMap,Fd=new WeakMap,Ma=new WeakMap,ag=new WeakSet,$C=function(e){if(Ie(this,Vd,!0),e instanceof Error&&e.name==="AbortError"&&(e=new qn),e instanceof qn)return Ie(this,Fd,!0),this._emit("abort",e);if(e instanceof je)return this._emit("error",e);if(e instanceof Error){const n=new je(e.message);return n.cause=e,this._emit("error",n)}return this._emit("error",new je(String(e)))};function Xz(t){return typeof t.parse=="function"}var en,og,Yd,lg,cg,ug,IC,LC;const Kz=10;class zC extends ny{constructor(){super(...arguments),en.add(this),this._chatCompletions=[],this.messages=[]}_addChatCompletion(e){this._chatCompletions.push(e),this._emit("chatCompletion",e);const n=e.choices[0]?.message;return n&&this._addMessage(n),e}_addMessage(e,n=!0){if("content"in e||(e.content=null),this.messages.push(e),n){if(this._emit("message",e),UC(e)&&e.content)this._emit("functionToolCallResult",e.content);else if(Hd(e)&&e.tool_calls)for(const s of e.tool_calls)s.type==="function"&&this._emit("functionToolCall",s.function)}}async finalChatCompletion(){await this.done();const e=this._chatCompletions[this._chatCompletions.length-1];if(!e)throw new je("stream ended without producing a ChatCompletion");return e}async finalContent(){return await this.done(),re(this,en,"m",og).call(this)}async finalMessage(){return await this.done(),re(this,en,"m",Yd).call(this)}async finalFunctionToolCall(){return await this.done(),re(this,en,"m",lg).call(this)}async finalFunctionToolCallResult(){return await this.done(),re(this,en,"m",cg).call(this)}async totalUsage(){return await this.done(),re(this,en,"m",ug).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emitFinal(){const e=this._chatCompletions[this._chatCompletions.length-1];e&&this._emit("finalChatCompletion",e);const n=re(this,en,"m",Yd).call(this);n&&this._emit("finalMessage",n);const s=re(this,en,"m",og).call(this);s&&this._emit("finalContent",s);const a=re(this,en,"m",lg).call(this);a&&this._emit("finalFunctionToolCall",a);const l=re(this,en,"m",cg).call(this);l!=null&&this._emit("finalFunctionToolCallResult",l),this._chatCompletions.some(c=>c.usage)&&this._emit("totalUsage",re(this,en,"m",ug).call(this))}async _createChatCompletion(e,n,s){const a=s?.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",()=>this.controller.abort())),re(this,en,"m",IC).call(this,n);const l=await e.chat.completions.create({...n,stream:!1},{...s,signal:this.controller.signal});return this._connected(),this._addChatCompletion(ty(l,n))}async _runChatCompletion(e,n,s){for(const a of n.messages)this._addMessage(a,!1);return await this._createChatCompletion(e,n,s)}async _runTools(e,n,s){const a="tool",{tool_choice:l="auto",stream:c,...d}=n,f=typeof l!="string"&&l.type==="function"&&l?.function?.name,{maxChatCompletions:h=Kz}=s||{},g=n.tools.map(b=>{if(ac(b)){if(!b.$callback)throw new je("Tool given to `.runTools()` that does not have an associated function");return{type:"function",function:{function:b.$callback,name:b.function.name,description:b.function.description||"",parameters:b.function.parameters,parse:b.$parseRaw,strict:!0}}}return b}),p={};for(const b of g)b.type==="function"&&(p[b.function.name||b.function.function.name]=b.function);const v="tools"in n?g.map(b=>b.type==="function"?{type:"function",function:{name:b.function.name||b.function.function.name,parameters:b.function.parameters,description:b.function.description,strict:b.function.strict}}:b):void 0;for(const b of n.messages)this._addMessage(b,!1);for(let b=0;b<h;++b){const w=(await this._createChatCompletion(e,{...d,tool_choice:l,tools:v,messages:[...this.messages]},s)).choices[0]?.message;if(!w)throw new je("missing message in ChatCompletion response");if(!w.tool_calls?.length)return;for(const S of w.tool_calls){if(S.type!=="function")continue;const C=S.id,{name:N,arguments:E}=S.function,A=p[N];if(A){if(f&&f!==N){const $=`Invalid tool_call: ${JSON.stringify(N)}. ${JSON.stringify(f)} requested. Please try again`;this._addMessage({role:a,tool_call_id:C,content:$});continue}}else{const $=`Invalid tool_call: ${JSON.stringify(N)}. Available options are: ${Object.keys(p).map(P=>JSON.stringify(P)).join(", ")}. Please try again`;this._addMessage({role:a,tool_call_id:C,content:$});continue}let O;try{O=Xz(A)?await A.parse(E):E}catch($){const P=$ instanceof Error?$.message:String($);this._addMessage({role:a,tool_call_id:C,content:P});continue}const j=await A.function(O,this),D=re(this,en,"m",LC).call(this,j);if(this._addMessage({role:a,tool_call_id:C,content:D}),f)return}}}}en=new WeakSet,og=function(){return re(this,en,"m",Yd).call(this).content??null},Yd=function(){let e=this.messages.length;for(;e-- >0;){const n=this.messages[e];if(Hd(n))return{...n,content:n.content??null,refusal:n.refusal??null}}throw new je("stream ended without producing a ChatCompletionMessage with role=assistant")},lg=function(){for(let e=this.messages.length-1;e>=0;e--){const n=this.messages[e];if(Hd(n)&&n?.tool_calls?.length)return n.tool_calls.filter(s=>s.type==="function").at(-1)?.function}},cg=function(){for(let e=this.messages.length-1;e>=0;e--){const n=this.messages[e];if(UC(n)&&n.content!=null&&typeof n.content=="string"&&this.messages.some(s=>s.role==="assistant"&&s.tool_calls?.some(a=>a.type==="function"&&a.id===n.tool_call_id)))return n.content}},ug=function(){const e={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(const{usage:n}of this._chatCompletions)n&&(e.completion_tokens+=n.completion_tokens,e.prompt_tokens+=n.prompt_tokens,e.total_tokens+=n.total_tokens);return e},IC=function(e){if(e.n!=null&&e.n>1)throw new je("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},LC=function(e){return typeof e=="string"?e:e===void 0?"undefined":JSON.stringify(e)};class ry extends zC{static runTools(e,n,s){const a=new ry,l={...s,headers:{...s?.headers,"X-Stainless-Helper-Method":"runTools"}};return a._run(()=>a._runTools(e,n,l)),a}_addMessage(e,n=!0){super._addMessage(e,n),Hd(e)&&e.content&&this._emit("content",e.content)}}const BC=1,PC=2,qC=4,HC=8,VC=16,FC=32,YC=64,GC=128,XC=256,KC=GC|XC,QC=VC|FC|KC|YC,WC=BC|PC|QC,JC=qC|HC,Qz=WC|JC,$t={STR:BC,NUM:PC,ARR:qC,OBJ:HC,NULL:VC,BOOL:FC,NAN:YC,INFINITY:GC,MINUS_INFINITY:XC,INF:KC,SPECIAL:QC,ATOM:WC,COLLECTION:JC,ALL:Qz};class Wz extends Error{}class Jz extends Error{}function Zz(t,e=$t.ALL){if(typeof t!="string")throw new TypeError(`expecting str, got ${typeof t}`);if(!t.trim())throw new Error(`${t} is empty`);return e4(t.trim(),e)}const e4=(t,e)=>{const n=t.length;let s=0;const a=v=>{throw new Wz(`${v} at position ${s}`)},l=v=>{throw new Jz(`${v} at position ${s}`)},c=()=>(p(),s>=n&&a("Unexpected end of input"),t[s]==='"'?d():t[s]==="{"?f():t[s]==="["?h():t.substring(s,s+4)==="null"||$t.NULL&e&&n-s<4&&"null".startsWith(t.substring(s))?(s+=4,null):t.substring(s,s+4)==="true"||$t.BOOL&e&&n-s<4&&"true".startsWith(t.substring(s))?(s+=4,!0):t.substring(s,s+5)==="false"||$t.BOOL&e&&n-s<5&&"false".startsWith(t.substring(s))?(s+=5,!1):t.substring(s,s+8)==="Infinity"||$t.INFINITY&e&&n-s<8&&"Infinity".startsWith(t.substring(s))?(s+=8,1/0):t.substring(s,s+9)==="-Infinity"||$t.MINUS_INFINITY&e&&1<n-s&&n-s<9&&"-Infinity".startsWith(t.substring(s))?(s+=9,-1/0):t.substring(s,s+3)==="NaN"||$t.NAN&e&&n-s<3&&"NaN".startsWith(t.substring(s))?(s+=3,NaN):g()),d=()=>{const v=s;let b=!1;for(s++;s<n&&(t[s]!=='"'||b&&t[s-1]==="\\");)b=t[s]==="\\"?!b:!1,s++;if(t.charAt(s)=='"')try{return JSON.parse(t.substring(v,++s-Number(b)))}catch(x){l(String(x))}else if($t.STR&e)try{return JSON.parse(t.substring(v,s-Number(b))+'"')}catch{return JSON.parse(t.substring(v,t.lastIndexOf("\\"))+'"')}a("Unterminated string literal")},f=()=>{s++,p();const v={};try{for(;t[s]!=="}";){if(p(),s>=n&&$t.OBJ&e)return v;const b=d();p(),s++;try{const x=c();Object.defineProperty(v,b,{value:x,writable:!0,enumerable:!0,configurable:!0})}catch(x){if($t.OBJ&e)return v;throw x}p(),t[s]===","&&s++}}catch{if($t.OBJ&e)return v;a("Expected '}' at end of object")}return s++,v},h=()=>{s++;const v=[];try{for(;t[s]!=="]";)v.push(c()),p(),t[s]===","&&s++}catch{if($t.ARR&e)return v;a("Expected ']' at end of array")}return s++,v},g=()=>{if(s===0){t==="-"&&$t.NUM&e&&a("Not sure what '-' is");try{return JSON.parse(t)}catch(b){if($t.NUM&e)try{return t[t.length-1]==="."?JSON.parse(t.substring(0,t.lastIndexOf("."))):JSON.parse(t.substring(0,t.lastIndexOf("e")))}catch{}l(String(b))}}const v=s;for(t[s]==="-"&&s++;t[s]&&!",]}".includes(t[s]);)s++;s==n&&!($t.NUM&e)&&a("Unterminated number literal");try{return JSON.parse(t.substring(v,s))}catch{t.substring(v,s)==="-"&&$t.NUM&e&&a("Not sure what '-' is");try{return JSON.parse(t.substring(v,t.lastIndexOf("e")))}catch(x){l(String(x))}}},p=()=>{for(;s<n&&` 
\r	`.includes(t[s]);)s++};return c()},Mx=t=>Zz(t,$t.ALL^$t.NUM);var jt,qr,Ta,js,vp,td,bp,_p,wp,nd,xp,Dx;class Yl extends zC{constructor(e){super(),jt.add(this),qr.set(this,void 0),Ta.set(this,void 0),js.set(this,void 0),Ie(this,qr,e),Ie(this,Ta,[])}get currentChatCompletionSnapshot(){return re(this,js,"f")}static fromReadableStream(e){const n=new Yl(null);return n._run(()=>n._fromReadableStream(e)),n}static createChatCompletion(e,n,s){const a=new Yl(n);return a._run(()=>a._runChatCompletion(e,{...n,stream:!0},{...s,headers:{...s?.headers,"X-Stainless-Helper-Method":"stream"}})),a}async _createChatCompletion(e,n,s){super._createChatCompletion;const a=s?.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",()=>this.controller.abort())),re(this,jt,"m",vp).call(this);const l=await e.chat.completions.create({...n,stream:!0},{...s,signal:this.controller.signal});this._connected();for await(const c of l)re(this,jt,"m",bp).call(this,c);if(l.controller.signal?.aborted)throw new qn;return this._addChatCompletion(re(this,jt,"m",nd).call(this))}async _fromReadableStream(e,n){const s=n?.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort())),re(this,jt,"m",vp).call(this),this._connected();const a=hr.fromReadableStream(e,this.controller);let l;for await(const c of a)l&&l!==c.id&&this._addChatCompletion(re(this,jt,"m",nd).call(this)),re(this,jt,"m",bp).call(this,c),l=c.id;if(a.controller.signal?.aborted)throw new qn;return this._addChatCompletion(re(this,jt,"m",nd).call(this))}[(qr=new WeakMap,Ta=new WeakMap,js=new WeakMap,jt=new WeakSet,vp=function(){this.ended||Ie(this,js,void 0)},td=function(n){let s=re(this,Ta,"f")[n.index];return s||(s={content_done:!1,refusal_done:!1,logprobs_content_done:!1,logprobs_refusal_done:!1,done_tool_calls:new Set,current_tool_call_index:null},re(this,Ta,"f")[n.index]=s,s)},bp=function(n){if(this.ended)return;const s=re(this,jt,"m",Dx).call(this,n);this._emit("chunk",n,s);for(const a of n.choices){const l=s.choices[a.index];a.delta.content!=null&&l.message?.role==="assistant"&&l.message?.content&&(this._emit("content",a.delta.content,l.message.content),this._emit("content.delta",{delta:a.delta.content,snapshot:l.message.content,parsed:l.message.parsed})),a.delta.refusal!=null&&l.message?.role==="assistant"&&l.message?.refusal&&this._emit("refusal.delta",{delta:a.delta.refusal,snapshot:l.message.refusal}),a.logprobs?.content!=null&&l.message?.role==="assistant"&&this._emit("logprobs.content.delta",{content:a.logprobs?.content,snapshot:l.logprobs?.content??[]}),a.logprobs?.refusal!=null&&l.message?.role==="assistant"&&this._emit("logprobs.refusal.delta",{refusal:a.logprobs?.refusal,snapshot:l.logprobs?.refusal??[]});const c=re(this,jt,"m",td).call(this,l);l.finish_reason&&(re(this,jt,"m",wp).call(this,l),c.current_tool_call_index!=null&&re(this,jt,"m",_p).call(this,l,c.current_tool_call_index));for(const d of a.delta.tool_calls??[])c.current_tool_call_index!==d.index&&(re(this,jt,"m",wp).call(this,l),c.current_tool_call_index!=null&&re(this,jt,"m",_p).call(this,l,c.current_tool_call_index)),c.current_tool_call_index=d.index;for(const d of a.delta.tool_calls??[]){const f=l.message.tool_calls?.[d.index];f?.type&&(f?.type==="function"?this._emit("tool_calls.function.arguments.delta",{name:f.function?.name,index:d.index,arguments:f.function.arguments,parsed_arguments:f.function.parsed_arguments,arguments_delta:d.function?.arguments??""}):(f?.type,void 0))}}},_p=function(n,s){if(re(this,jt,"m",td).call(this,n).done_tool_calls.has(s))return;const l=n.message.tool_calls?.[s];if(!l)throw new Error("no tool call snapshot");if(!l.type)throw new Error("tool call snapshot missing `type`");if(l.type==="function"){const c=re(this,qr,"f")?.tools?.find(d=>qd(d)&&d.function.name===l.function.name);this._emit("tool_calls.function.arguments.done",{name:l.function.name,index:s,arguments:l.function.arguments,parsed_arguments:ac(c)?c.$parseRaw(l.function.arguments):c?.function.strict?JSON.parse(l.function.arguments):null})}else l.type},wp=function(n){const s=re(this,jt,"m",td).call(this,n);if(n.message.content&&!s.content_done){s.content_done=!0;const a=re(this,jt,"m",xp).call(this);this._emit("content.done",{content:n.message.content,parsed:a?a.$parseRaw(n.message.content):null})}n.message.refusal&&!s.refusal_done&&(s.refusal_done=!0,this._emit("refusal.done",{refusal:n.message.refusal})),n.logprobs?.content&&!s.logprobs_content_done&&(s.logprobs_content_done=!0,this._emit("logprobs.content.done",{content:n.logprobs.content})),n.logprobs?.refusal&&!s.logprobs_refusal_done&&(s.logprobs_refusal_done=!0,this._emit("logprobs.refusal.done",{refusal:n.logprobs.refusal}))},nd=function(){if(this.ended)throw new je("stream has ended, this shouldn't happen");const n=re(this,js,"f");if(!n)throw new je("request ended without sending any chunks");return Ie(this,js,void 0),Ie(this,Ta,[]),t4(n,re(this,qr,"f"))},xp=function(){const n=re(this,qr,"f")?.response_format;return ey(n)?n:null},Dx=function(n){var s,a,l,c;let d=re(this,js,"f");const{choices:f,...h}=n;d?Object.assign(d,h):d=Ie(this,js,{...h,choices:[]});for(const{delta:g,finish_reason:p,index:v,logprobs:b=null,...x}of n.choices){let w=d.choices[v];if(w||(w=d.choices[v]={finish_reason:p,index:v,message:{},logprobs:b,...x}),b)if(!w.logprobs)w.logprobs=Object.assign({},b);else{const{content:j,refusal:D,...$}=b;Object.assign(w.logprobs,$),j&&((s=w.logprobs).content??(s.content=[]),w.logprobs.content.push(...j)),D&&((a=w.logprobs).refusal??(a.refusal=[]),w.logprobs.refusal.push(...D))}if(p&&(w.finish_reason=p,re(this,qr,"f")&&MC(re(this,qr,"f")))){if(p==="length")throw new mC;if(p==="content_filter")throw new pC}if(Object.assign(w,x),!g)continue;const{content:S,refusal:C,function_call:N,role:E,tool_calls:A,...O}=g;if(Object.assign(w.message,O),C&&(w.message.refusal=(w.message.refusal||"")+C),E&&(w.message.role=E),N&&(w.message.function_call?(N.name&&(w.message.function_call.name=N.name),N.arguments&&((l=w.message.function_call).arguments??(l.arguments=""),w.message.function_call.arguments+=N.arguments)):w.message.function_call=N),S&&(w.message.content=(w.message.content||"")+S,!w.message.refusal&&re(this,jt,"m",xp).call(this)&&(w.message.parsed=Mx(w.message.content))),A){w.message.tool_calls||(w.message.tool_calls=[]);for(const{index:j,id:D,type:$,function:P,...K}of A){const G=(c=w.message.tool_calls)[j]??(c[j]={});Object.assign(G,K),D&&(G.id=D),$&&(G.type=$),P&&(G.function??(G.function={name:P.name??"",arguments:""})),P?.name&&(G.function.name=P.name),P?.arguments&&(G.function.arguments+=P.arguments,Yz(re(this,qr,"f"),G)&&(G.function.parsed_arguments=Mx(G.function.arguments)))}}}return d},Symbol.asyncIterator)](){const e=[],n=[];let s=!1;return this.on("chunk",a=>{const l=n.shift();l?l.resolve(a):e.push(a)}),this.on("end",()=>{s=!0;for(const a of n)a.resolve(void 0);n.length=0}),this.on("abort",a=>{s=!0;for(const l of n)l.reject(a);n.length=0}),this.on("error",a=>{s=!0;for(const l of n)l.reject(a);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:s?{value:void 0,done:!0}:new Promise((l,c)=>n.push({resolve:l,reject:c})).then(l=>l?{value:l,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new hr(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}function t4(t,e){const{id:n,choices:s,created:a,model:l,system_fingerprint:c,...d}=t,f={...d,id:n,choices:s.map(({message:h,finish_reason:g,index:p,logprobs:v,...b})=>{if(!g)throw new je(`missing finish_reason for choice ${p}`);const{content:x=null,function_call:w,tool_calls:S,...C}=h,N=h.role;if(!N)throw new je(`missing role for choice ${p}`);if(w){const{arguments:E,name:A}=w;if(E==null)throw new je(`missing function_call.arguments for choice ${p}`);if(!A)throw new je(`missing function_call.name for choice ${p}`);return{...b,message:{content:x,function_call:{arguments:E,name:A},role:N,refusal:h.refusal??null},finish_reason:g,index:p,logprobs:v}}return S?{...b,index:p,finish_reason:g,logprobs:v,message:{...C,role:N,content:x,refusal:h.refusal??null,tool_calls:S.map((E,A)=>{const{function:O,type:j,id:D,...$}=E,{arguments:P,name:K,...G}=O||{};if(D==null)throw new je(`missing choices[${p}].tool_calls[${A}].id
${rd(t)}`);if(j==null)throw new je(`missing choices[${p}].tool_calls[${A}].type
${rd(t)}`);if(K==null)throw new je(`missing choices[${p}].tool_calls[${A}].function.name
${rd(t)}`);if(P==null)throw new je(`missing choices[${p}].tool_calls[${A}].function.arguments
${rd(t)}`);return{...$,id:D,type:j,function:{...G,name:K,arguments:P}}})}}:{...b,message:{...C,content:x,role:N,refusal:h.refusal??null},finish_reason:g,index:p,logprobs:v}}),created:a,model:l,object:"chat.completion",...c?{system_fingerprint:c}:{}};return Hz(f,e)}function rd(t){return JSON.stringify(t)}class Gd extends Yl{static fromReadableStream(e){const n=new Gd(null);return n._run(()=>n._fromReadableStream(e)),n}static runTools(e,n,s){const a=new Gd(n),l={...s,headers:{...s?.headers,"X-Stainless-Helper-Method":"runTools"}};return a._run(()=>a._runTools(e,n,l)),a}}let sy=class extends Ne{constructor(){super(...arguments),this.messages=new kC(this._client)}create(e,n){return this._client.post("/chat/completions",{body:e,...n,stream:e.stream??!1})}retrieve(e,n){return this._client.get(ye`/chat/completions/${e}`,n)}update(e,n,s){return this._client.post(ye`/chat/completions/${e}`,{body:n,...s})}list(e={},n){return this._client.getAPIList("/chat/completions",Tt,{query:e,...n})}delete(e,n){return this._client.delete(ye`/chat/completions/${e}`,n)}parse(e,n){return Gz(e.tools),this._client.chat.completions.create(e,{...n,headers:{...n?.headers,"X-Stainless-Helper-Method":"chat.completions.parse"}})._thenUnwrap(s=>ty(s,e))}runTools(e,n){return e.stream?Gd.runTools(this._client,e,n):ry.runTools(this._client,e,n)}stream(e,n){return Yl.createChatCompletion(this._client,e,n)}};sy.Messages=kC;class iy extends Ne{constructor(){super(...arguments),this.completions=new sy(this._client)}}iy.Completions=sy;const ZC=Symbol("brand.privateNullableHeaders");function*n4(t){if(!t)return;if(ZC in t){const{values:s,nulls:a}=t;yield*s.entries();for(const l of a)yield[l,null];return}let e=!1,n;t instanceof Headers?n=t.entries():vx(t)?n=t:(e=!0,n=Object.entries(t??{}));for(let s of n){const a=s[0];if(typeof a!="string")throw new TypeError("expected header name to be a string");const l=vx(s[1])?s[1]:[s[1]];let c=!1;for(const d of l)d!==void 0&&(e&&!c&&(c=!0,yield[a,null]),yield[a,d])}}const Se=t=>{const e=new Headers,n=new Set;for(const s of t){const a=new Set;for(const[l,c]of n4(s)){const d=l.toLowerCase();a.has(d)||(e.delete(l),a.add(d)),c===null?(e.delete(l),n.add(d)):(e.append(l,c),n.delete(d))}}return{[ZC]:!0,values:e,nulls:n}};class eA extends Ne{create(e,n){return this._client.post("/audio/speech",{body:e,...n,headers:Se([{Accept:"application/octet-stream"},n?.headers]),__binaryResponse:!0})}}class tA extends Ne{create(e,n){return this._client.post("/audio/transcriptions",Ti({body:e,...n,stream:e.stream??!1,__metadata:{model:e.model}},this._client))}}class nA extends Ne{create(e,n){return this._client.post("/audio/translations",Ti({body:e,...n,__metadata:{model:e.model}},this._client))}}class oc extends Ne{constructor(){super(...arguments),this.transcriptions=new tA(this._client),this.translations=new nA(this._client),this.speech=new eA(this._client)}}oc.Transcriptions=tA;oc.Translations=nA;oc.Speech=eA;class rA extends Ne{create(e,n){return this._client.post("/batches",{body:e,...n})}retrieve(e,n){return this._client.get(ye`/batches/${e}`,n)}list(e={},n){return this._client.getAPIList("/batches",Tt,{query:e,...n})}cancel(e,n){return this._client.post(ye`/batches/${e}/cancel`,n)}}class sA extends Ne{create(e,n){return this._client.post("/assistants",{body:e,...n,headers:Se([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}retrieve(e,n){return this._client.get(ye`/assistants/${e}`,{...n,headers:Se([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}update(e,n,s){return this._client.post(ye`/assistants/${e}`,{body:n,...s,headers:Se([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}list(e={},n){return this._client.getAPIList("/assistants",Tt,{query:e,...n,headers:Se([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}delete(e,n){return this._client.delete(ye`/assistants/${e}`,{...n,headers:Se([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}}let iA=class extends Ne{create(e,n){return this._client.post("/realtime/sessions",{body:e,...n,headers:Se([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}};class aA extends Ne{create(e,n){return this._client.post("/realtime/transcription_sessions",{body:e,...n,headers:Se([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}}let bf=class extends Ne{constructor(){super(...arguments),this.sessions=new iA(this._client),this.transcriptionSessions=new aA(this._client)}};bf.Sessions=iA;bf.TranscriptionSessions=aA;class oA extends Ne{create(e,n){return this._client.post("/chatkit/sessions",{body:e,...n,headers:Se([{"OpenAI-Beta":"chatkit_beta=v1"},n?.headers])})}cancel(e,n){return this._client.post(ye`/chatkit/sessions/${e}/cancel`,{...n,headers:Se([{"OpenAI-Beta":"chatkit_beta=v1"},n?.headers])})}}let lA=class extends Ne{retrieve(e,n){return this._client.get(ye`/chatkit/threads/${e}`,{...n,headers:Se([{"OpenAI-Beta":"chatkit_beta=v1"},n?.headers])})}list(e={},n){return this._client.getAPIList("/chatkit/threads",Pd,{query:e,...n,headers:Se([{"OpenAI-Beta":"chatkit_beta=v1"},n?.headers])})}delete(e,n){return this._client.delete(ye`/chatkit/threads/${e}`,{...n,headers:Se([{"OpenAI-Beta":"chatkit_beta=v1"},n?.headers])})}listItems(e,n={},s){return this._client.getAPIList(ye`/chatkit/threads/${e}/items`,Pd,{query:n,...s,headers:Se([{"OpenAI-Beta":"chatkit_beta=v1"},s?.headers])})}};class _f extends Ne{constructor(){super(...arguments),this.sessions=new oA(this._client),this.threads=new lA(this._client)}}_f.Sessions=oA;_f.Threads=lA;class cA extends Ne{create(e,n,s){return this._client.post(ye`/threads/${e}/messages`,{body:n,...s,headers:Se([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}retrieve(e,n,s){const{thread_id:a}=n;return this._client.get(ye`/threads/${a}/messages/${e}`,{...s,headers:Se([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}update(e,n,s){const{thread_id:a,...l}=n;return this._client.post(ye`/threads/${a}/messages/${e}`,{body:l,...s,headers:Se([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}list(e,n={},s){return this._client.getAPIList(ye`/threads/${e}/messages`,Tt,{query:n,...s,headers:Se([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}delete(e,n,s){const{thread_id:a}=n;return this._client.delete(ye`/threads/${a}/messages/${e}`,{...s,headers:Se([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}}class uA extends Ne{retrieve(e,n,s){const{thread_id:a,run_id:l,...c}=n;return this._client.get(ye`/threads/${a}/runs/${l}/steps/${e}`,{query:c,...s,headers:Se([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}list(e,n,s){const{thread_id:a,...l}=n;return this._client.getAPIList(ye`/threads/${a}/runs/${e}/steps`,Tt,{query:l,...s,headers:Se([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}}const r4=t=>{if(typeof Buffer<"u"){const e=Buffer.from(t,"base64");return Array.from(new Float32Array(e.buffer,e.byteOffset,e.length/Float32Array.BYTES_PER_ELEMENT))}else{const e=atob(t),n=e.length,s=new Uint8Array(n);for(let a=0;a<n;a++)s[a]=e.charCodeAt(a);return Array.from(new Float32Array(s.buffer))}};var s4={};const Na=t=>{if(typeof globalThis.process<"u")return s4?.[t]?.trim()??void 0;if(typeof globalThis.Deno<"u")return globalThis.Deno.env?.get?.(t)?.trim()};var Ht,vi,dg,dr,vd,Wn,bi,Ia,mi,Xd,An,bd,_d,Ol,_l,wl,Ux,$x,Ix,Lx,zx,Bx,Px;class Rl extends ny{constructor(){super(...arguments),Ht.add(this),dg.set(this,[]),dr.set(this,{}),vd.set(this,{}),Wn.set(this,void 0),bi.set(this,void 0),Ia.set(this,void 0),mi.set(this,void 0),Xd.set(this,void 0),An.set(this,void 0),bd.set(this,void 0),_d.set(this,void 0),Ol.set(this,void 0)}[(dg=new WeakMap,dr=new WeakMap,vd=new WeakMap,Wn=new WeakMap,bi=new WeakMap,Ia=new WeakMap,mi=new WeakMap,Xd=new WeakMap,An=new WeakMap,bd=new WeakMap,_d=new WeakMap,Ol=new WeakMap,Ht=new WeakSet,Symbol.asyncIterator)](){const e=[],n=[];let s=!1;return this.on("event",a=>{const l=n.shift();l?l.resolve(a):e.push(a)}),this.on("end",()=>{s=!0;for(const a of n)a.resolve(void 0);n.length=0}),this.on("abort",a=>{s=!0;for(const l of n)l.reject(a);n.length=0}),this.on("error",a=>{s=!0;for(const l of n)l.reject(a);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:s?{value:void 0,done:!0}:new Promise((l,c)=>n.push({resolve:l,reject:c})).then(l=>l?{value:l,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}static fromReadableStream(e){const n=new vi;return n._run(()=>n._fromReadableStream(e)),n}async _fromReadableStream(e,n){const s=n?.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort())),this._connected();const a=hr.fromReadableStream(e,this.controller);for await(const l of a)re(this,Ht,"m",_l).call(this,l);if(a.controller.signal?.aborted)throw new qn;return this._addRun(re(this,Ht,"m",wl).call(this))}toReadableStream(){return new hr(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}static createToolAssistantStream(e,n,s,a){const l=new vi;return l._run(()=>l._runToolAssistantStream(e,n,s,{...a,headers:{...a?.headers,"X-Stainless-Helper-Method":"stream"}})),l}async _createToolAssistantStream(e,n,s,a){const l=a?.signal;l&&(l.aborted&&this.controller.abort(),l.addEventListener("abort",()=>this.controller.abort()));const c={...s,stream:!0},d=await e.submitToolOutputs(n,c,{...a,signal:this.controller.signal});this._connected();for await(const f of d)re(this,Ht,"m",_l).call(this,f);if(d.controller.signal?.aborted)throw new qn;return this._addRun(re(this,Ht,"m",wl).call(this))}static createThreadAssistantStream(e,n,s){const a=new vi;return a._run(()=>a._threadAssistantStream(e,n,{...s,headers:{...s?.headers,"X-Stainless-Helper-Method":"stream"}})),a}static createAssistantStream(e,n,s,a){const l=new vi;return l._run(()=>l._runAssistantStream(e,n,s,{...a,headers:{...a?.headers,"X-Stainless-Helper-Method":"stream"}})),l}currentEvent(){return re(this,bd,"f")}currentRun(){return re(this,_d,"f")}currentMessageSnapshot(){return re(this,Wn,"f")}currentRunStepSnapshot(){return re(this,Ol,"f")}async finalRunSteps(){return await this.done(),Object.values(re(this,dr,"f"))}async finalMessages(){return await this.done(),Object.values(re(this,vd,"f"))}async finalRun(){if(await this.done(),!re(this,bi,"f"))throw Error("Final run was not received.");return re(this,bi,"f")}async _createThreadAssistantStream(e,n,s){const a=s?.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",()=>this.controller.abort()));const l={...n,stream:!0},c=await e.createAndRun(l,{...s,signal:this.controller.signal});this._connected();for await(const d of c)re(this,Ht,"m",_l).call(this,d);if(c.controller.signal?.aborted)throw new qn;return this._addRun(re(this,Ht,"m",wl).call(this))}async _createAssistantStream(e,n,s,a){const l=a?.signal;l&&(l.aborted&&this.controller.abort(),l.addEventListener("abort",()=>this.controller.abort()));const c={...s,stream:!0},d=await e.create(n,c,{...a,signal:this.controller.signal});this._connected();for await(const f of d)re(this,Ht,"m",_l).call(this,f);if(d.controller.signal?.aborted)throw new qn;return this._addRun(re(this,Ht,"m",wl).call(this))}static accumulateDelta(e,n){for(const[s,a]of Object.entries(n)){if(!e.hasOwnProperty(s)){e[s]=a;continue}let l=e[s];if(l==null){e[s]=a;continue}if(s==="index"||s==="type"){e[s]=a;continue}if(typeof l=="string"&&typeof a=="string")l+=a;else if(typeof l=="number"&&typeof a=="number")l+=a;else if(pp(l)&&pp(a))l=this.accumulateDelta(l,a);else if(Array.isArray(l)&&Array.isArray(a)){if(l.every(c=>typeof c=="string"||typeof c=="number")){l.push(...a);continue}for(const c of a){if(!pp(c))throw new Error(`Expected array delta entry to be an object but got: ${c}`);const d=c.index;if(d==null)throw console.error(c),new Error("Expected array delta entry to have an `index` property");if(typeof d!="number")throw new Error(`Expected array delta entry \`index\` property to be a number but got ${d}`);const f=l[d];f==null?l.push(c):l[d]=this.accumulateDelta(f,c)}continue}else throw Error(`Unhandled record type: ${s}, deltaValue: ${a}, accValue: ${l}`);e[s]=l}return e}_addRun(e){return e}async _threadAssistantStream(e,n,s){return await this._createThreadAssistantStream(n,e,s)}async _runAssistantStream(e,n,s,a){return await this._createAssistantStream(n,e,s,a)}async _runToolAssistantStream(e,n,s,a){return await this._createToolAssistantStream(n,e,s,a)}}vi=Rl,_l=function(e){if(!this.ended)switch(Ie(this,bd,e),re(this,Ht,"m",Ix).call(this,e),e.event){case"thread.created":break;case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.requires_action":case"thread.run.completed":case"thread.run.incomplete":case"thread.run.failed":case"thread.run.cancelling":case"thread.run.cancelled":case"thread.run.expired":re(this,Ht,"m",Px).call(this,e);break;case"thread.run.step.created":case"thread.run.step.in_progress":case"thread.run.step.delta":case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":re(this,Ht,"m",$x).call(this,e);break;case"thread.message.created":case"thread.message.in_progress":case"thread.message.delta":case"thread.message.completed":case"thread.message.incomplete":re(this,Ht,"m",Ux).call(this,e);break;case"error":throw new Error("Encountered an error event in event processing - errors should be processed earlier")}},wl=function(){if(this.ended)throw new je("stream has ended, this shouldn't happen");if(!re(this,bi,"f"))throw Error("Final run has not been received");return re(this,bi,"f")},Ux=function(e){const[n,s]=re(this,Ht,"m",zx).call(this,e,re(this,Wn,"f"));Ie(this,Wn,n),re(this,vd,"f")[n.id]=n;for(const a of s){const l=n.content[a.index];l?.type=="text"&&this._emit("textCreated",l.text)}switch(e.event){case"thread.message.created":this._emit("messageCreated",e.data);break;case"thread.message.in_progress":break;case"thread.message.delta":if(this._emit("messageDelta",e.data.delta,n),e.data.delta.content)for(const a of e.data.delta.content){if(a.type=="text"&&a.text){let l=a.text,c=n.content[a.index];if(c&&c.type=="text")this._emit("textDelta",l,c.text);else throw Error("The snapshot associated with this text delta is not text or missing")}if(a.index!=re(this,Ia,"f")){if(re(this,mi,"f"))switch(re(this,mi,"f").type){case"text":this._emit("textDone",re(this,mi,"f").text,re(this,Wn,"f"));break;case"image_file":this._emit("imageFileDone",re(this,mi,"f").image_file,re(this,Wn,"f"));break}Ie(this,Ia,a.index)}Ie(this,mi,n.content[a.index])}break;case"thread.message.completed":case"thread.message.incomplete":if(re(this,Ia,"f")!==void 0){const a=e.data.content[re(this,Ia,"f")];if(a)switch(a.type){case"image_file":this._emit("imageFileDone",a.image_file,re(this,Wn,"f"));break;case"text":this._emit("textDone",a.text,re(this,Wn,"f"));break}}re(this,Wn,"f")&&this._emit("messageDone",e.data),Ie(this,Wn,void 0)}},$x=function(e){const n=re(this,Ht,"m",Lx).call(this,e);switch(Ie(this,Ol,n),e.event){case"thread.run.step.created":this._emit("runStepCreated",e.data);break;case"thread.run.step.delta":const s=e.data.delta;if(s.step_details&&s.step_details.type=="tool_calls"&&s.step_details.tool_calls&&n.step_details.type=="tool_calls")for(const l of s.step_details.tool_calls)l.index==re(this,Xd,"f")?this._emit("toolCallDelta",l,n.step_details.tool_calls[l.index]):(re(this,An,"f")&&this._emit("toolCallDone",re(this,An,"f")),Ie(this,Xd,l.index),Ie(this,An,n.step_details.tool_calls[l.index]),re(this,An,"f")&&this._emit("toolCallCreated",re(this,An,"f")));this._emit("runStepDelta",e.data.delta,n);break;case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":Ie(this,Ol,void 0),e.data.step_details.type=="tool_calls"&&re(this,An,"f")&&(this._emit("toolCallDone",re(this,An,"f")),Ie(this,An,void 0)),this._emit("runStepDone",e.data,n);break}},Ix=function(e){re(this,dg,"f").push(e),this._emit("event",e)},Lx=function(e){switch(e.event){case"thread.run.step.created":return re(this,dr,"f")[e.data.id]=e.data,e.data;case"thread.run.step.delta":let n=re(this,dr,"f")[e.data.id];if(!n)throw Error("Received a RunStepDelta before creation of a snapshot");let s=e.data;if(s.delta){const a=vi.accumulateDelta(n,s.delta);re(this,dr,"f")[e.data.id]=a}return re(this,dr,"f")[e.data.id];case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":case"thread.run.step.in_progress":re(this,dr,"f")[e.data.id]=e.data;break}if(re(this,dr,"f")[e.data.id])return re(this,dr,"f")[e.data.id];throw new Error("No snapshot available")},zx=function(e,n){let s=[];switch(e.event){case"thread.message.created":return[e.data,s];case"thread.message.delta":if(!n)throw Error("Received a delta with no existing snapshot (there should be one from message creation)");let a=e.data;if(a.delta.content)for(const l of a.delta.content)if(l.index in n.content){let c=n.content[l.index];n.content[l.index]=re(this,Ht,"m",Bx).call(this,l,c)}else n.content[l.index]=l,s.push(l);return[n,s];case"thread.message.in_progress":case"thread.message.completed":case"thread.message.incomplete":if(n)return[n,s];throw Error("Received thread message event with no existing snapshot")}throw Error("Tried to accumulate a non-message event")},Bx=function(e,n){return vi.accumulateDelta(n,e)},Px=function(e){switch(Ie(this,_d,e.data),e.event){case"thread.run.created":break;case"thread.run.queued":break;case"thread.run.in_progress":break;case"thread.run.requires_action":case"thread.run.cancelled":case"thread.run.failed":case"thread.run.completed":case"thread.run.expired":case"thread.run.incomplete":Ie(this,bi,e.data),re(this,An,"f")&&(this._emit("toolCallDone",re(this,An,"f")),Ie(this,An,void 0));break}};let ay=class extends Ne{constructor(){super(...arguments),this.steps=new uA(this._client)}create(e,n,s){const{include:a,...l}=n;return this._client.post(ye`/threads/${e}/runs`,{query:{include:a},body:l,...s,headers:Se([{"OpenAI-Beta":"assistants=v2"},s?.headers]),stream:n.stream??!1})}retrieve(e,n,s){const{thread_id:a}=n;return this._client.get(ye`/threads/${a}/runs/${e}`,{...s,headers:Se([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}update(e,n,s){const{thread_id:a,...l}=n;return this._client.post(ye`/threads/${a}/runs/${e}`,{body:l,...s,headers:Se([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}list(e,n={},s){return this._client.getAPIList(ye`/threads/${e}/runs`,Tt,{query:n,...s,headers:Se([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}cancel(e,n,s){const{thread_id:a}=n;return this._client.post(ye`/threads/${a}/runs/${e}/cancel`,{...s,headers:Se([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}async createAndPoll(e,n,s){const a=await this.create(e,n,s);return await this.poll(a.id,{thread_id:e},s)}createAndStream(e,n,s){return Rl.createAssistantStream(e,this._client.beta.threads.runs,n,s)}async poll(e,n,s){const a=Se([s?.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":s?.pollIntervalMs?.toString()??void 0}]);for(;;){const{data:l,response:c}=await this.retrieve(e,n,{...s,headers:{...s?.headers,...a}}).withResponse();switch(l.status){case"queued":case"in_progress":case"cancelling":let d=5e3;if(s?.pollIntervalMs)d=s.pollIntervalMs;else{const f=c.headers.get("openai-poll-after-ms");if(f){const h=parseInt(f);isNaN(h)||(d=h)}}await ic(d);break;case"requires_action":case"incomplete":case"cancelled":case"completed":case"failed":case"expired":return l}}}stream(e,n,s){return Rl.createAssistantStream(e,this._client.beta.threads.runs,n,s)}submitToolOutputs(e,n,s){const{thread_id:a,...l}=n;return this._client.post(ye`/threads/${a}/runs/${e}/submit_tool_outputs`,{body:l,...s,headers:Se([{"OpenAI-Beta":"assistants=v2"},s?.headers]),stream:n.stream??!1})}async submitToolOutputsAndPoll(e,n,s){const a=await this.submitToolOutputs(e,n,s);return await this.poll(a.id,n,s)}submitToolOutputsStream(e,n,s){return Rl.createToolAssistantStream(e,this._client.beta.threads.runs,n,s)}};ay.Steps=uA;class wf extends Ne{constructor(){super(...arguments),this.runs=new ay(this._client),this.messages=new cA(this._client)}create(e={},n){return this._client.post("/threads",{body:e,...n,headers:Se([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}retrieve(e,n){return this._client.get(ye`/threads/${e}`,{...n,headers:Se([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}update(e,n,s){return this._client.post(ye`/threads/${e}`,{body:n,...s,headers:Se([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}delete(e,n){return this._client.delete(ye`/threads/${e}`,{...n,headers:Se([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}createAndRun(e,n){return this._client.post("/threads/runs",{body:e,...n,headers:Se([{"OpenAI-Beta":"assistants=v2"},n?.headers]),stream:e.stream??!1})}async createAndRunPoll(e,n){const s=await this.createAndRun(e,n);return await this.runs.poll(s.id,{thread_id:s.thread_id},n)}createAndRunStream(e,n){return Rl.createThreadAssistantStream(e,this._client.beta.threads,n)}}wf.Runs=ay;wf.Messages=cA;class Za extends Ne{constructor(){super(...arguments),this.realtime=new bf(this._client),this.chatkit=new _f(this._client),this.assistants=new sA(this._client),this.threads=new wf(this._client)}}Za.Realtime=bf;Za.ChatKit=_f;Za.Assistants=sA;Za.Threads=wf;class dA extends Ne{create(e,n){return this._client.post("/completions",{body:e,...n,stream:e.stream??!1})}}class fA extends Ne{retrieve(e,n,s){const{container_id:a}=n;return this._client.get(ye`/containers/${a}/files/${e}/content`,{...s,headers:Se([{Accept:"application/binary"},s?.headers]),__binaryResponse:!0})}}let oy=class extends Ne{constructor(){super(...arguments),this.content=new fA(this._client)}create(e,n,s){return this._client.post(ye`/containers/${e}/files`,Ti({body:n,...s},this._client))}retrieve(e,n,s){const{container_id:a}=n;return this._client.get(ye`/containers/${a}/files/${e}`,s)}list(e,n={},s){return this._client.getAPIList(ye`/containers/${e}/files`,Tt,{query:n,...s})}delete(e,n,s){const{container_id:a}=n;return this._client.delete(ye`/containers/${a}/files/${e}`,{...s,headers:Se([{Accept:"*/*"},s?.headers])})}};oy.Content=fA;class ly extends Ne{constructor(){super(...arguments),this.files=new oy(this._client)}create(e,n){return this._client.post("/containers",{body:e,...n})}retrieve(e,n){return this._client.get(ye`/containers/${e}`,n)}list(e={},n){return this._client.getAPIList("/containers",Tt,{query:e,...n})}delete(e,n){return this._client.delete(ye`/containers/${e}`,{...n,headers:Se([{Accept:"*/*"},n?.headers])})}}ly.Files=oy;class hA extends Ne{create(e,n,s){const{include:a,...l}=n;return this._client.post(ye`/conversations/${e}/items`,{query:{include:a},body:l,...s})}retrieve(e,n,s){const{conversation_id:a,...l}=n;return this._client.get(ye`/conversations/${a}/items/${e}`,{query:l,...s})}list(e,n={},s){return this._client.getAPIList(ye`/conversations/${e}/items`,Pd,{query:n,...s})}delete(e,n,s){const{conversation_id:a}=n;return this._client.delete(ye`/conversations/${a}/items/${e}`,s)}}class cy extends Ne{constructor(){super(...arguments),this.items=new hA(this._client)}create(e={},n){return this._client.post("/conversations",{body:e,...n})}retrieve(e,n){return this._client.get(ye`/conversations/${e}`,n)}update(e,n,s){return this._client.post(ye`/conversations/${e}`,{body:n,...s})}delete(e,n){return this._client.delete(ye`/conversations/${e}`,n)}}cy.Items=hA;class mA extends Ne{create(e,n){const s=!!e.encoding_format;let a=s?e.encoding_format:"base64";s&&qt(this._client).debug("embeddings/user defined encoding_format:",e.encoding_format);const l=this._client.post("/embeddings",{body:{...e,encoding_format:a},...n});return s?l:(qt(this._client).debug("embeddings/decoding base64 embeddings from base64"),l._thenUnwrap(c=>(c&&c.data&&c.data.forEach(d=>{const f=d.embedding;d.embedding=r4(f)}),c)))}}class pA extends Ne{retrieve(e,n,s){const{eval_id:a,run_id:l}=n;return this._client.get(ye`/evals/${a}/runs/${l}/output_items/${e}`,s)}list(e,n,s){const{eval_id:a,...l}=n;return this._client.getAPIList(ye`/evals/${a}/runs/${e}/output_items`,Tt,{query:l,...s})}}class uy extends Ne{constructor(){super(...arguments),this.outputItems=new pA(this._client)}create(e,n,s){return this._client.post(ye`/evals/${e}/runs`,{body:n,...s})}retrieve(e,n,s){const{eval_id:a}=n;return this._client.get(ye`/evals/${a}/runs/${e}`,s)}list(e,n={},s){return this._client.getAPIList(ye`/evals/${e}/runs`,Tt,{query:n,...s})}delete(e,n,s){const{eval_id:a}=n;return this._client.delete(ye`/evals/${a}/runs/${e}`,s)}cancel(e,n,s){const{eval_id:a}=n;return this._client.post(ye`/evals/${a}/runs/${e}`,s)}}uy.OutputItems=pA;class dy extends Ne{constructor(){super(...arguments),this.runs=new uy(this._client)}create(e,n){return this._client.post("/evals",{body:e,...n})}retrieve(e,n){return this._client.get(ye`/evals/${e}`,n)}update(e,n,s){return this._client.post(ye`/evals/${e}`,{body:n,...s})}list(e={},n){return this._client.getAPIList("/evals",Tt,{query:e,...n})}delete(e,n){return this._client.delete(ye`/evals/${e}`,n)}}dy.Runs=uy;let gA=class extends Ne{create(e,n){return this._client.post("/files",Ti({body:e,...n},this._client))}retrieve(e,n){return this._client.get(ye`/files/${e}`,n)}list(e={},n){return this._client.getAPIList("/files",Tt,{query:e,...n})}delete(e,n){return this._client.delete(ye`/files/${e}`,n)}content(e,n){return this._client.get(ye`/files/${e}/content`,{...n,headers:Se([{Accept:"application/binary"},n?.headers]),__binaryResponse:!0})}async waitForProcessing(e,{pollInterval:n=5e3,maxWait:s=1800*1e3}={}){const a=new Set(["processed","error","deleted"]),l=Date.now();let c=await this.retrieve(e);for(;!c.status||!a.has(c.status);)if(await ic(n),c=await this.retrieve(e),Date.now()-l>s)throw new Qg({message:`Giving up on waiting for file ${e} to finish processing after ${s} milliseconds.`});return c}};class yA extends Ne{}let vA=class extends Ne{run(e,n){return this._client.post("/fine_tuning/alpha/graders/run",{body:e,...n})}validate(e,n){return this._client.post("/fine_tuning/alpha/graders/validate",{body:e,...n})}};class fy extends Ne{constructor(){super(...arguments),this.graders=new vA(this._client)}}fy.Graders=vA;class bA extends Ne{create(e,n,s){return this._client.getAPIList(ye`/fine_tuning/checkpoints/${e}/permissions`,vf,{body:n,method:"post",...s})}retrieve(e,n={},s){return this._client.get(ye`/fine_tuning/checkpoints/${e}/permissions`,{query:n,...s})}delete(e,n,s){const{fine_tuned_model_checkpoint:a}=n;return this._client.delete(ye`/fine_tuning/checkpoints/${a}/permissions/${e}`,s)}}let hy=class extends Ne{constructor(){super(...arguments),this.permissions=new bA(this._client)}};hy.Permissions=bA;class _A extends Ne{list(e,n={},s){return this._client.getAPIList(ye`/fine_tuning/jobs/${e}/checkpoints`,Tt,{query:n,...s})}}class my extends Ne{constructor(){super(...arguments),this.checkpoints=new _A(this._client)}create(e,n){return this._client.post("/fine_tuning/jobs",{body:e,...n})}retrieve(e,n){return this._client.get(ye`/fine_tuning/jobs/${e}`,n)}list(e={},n){return this._client.getAPIList("/fine_tuning/jobs",Tt,{query:e,...n})}cancel(e,n){return this._client.post(ye`/fine_tuning/jobs/${e}/cancel`,n)}listEvents(e,n={},s){return this._client.getAPIList(ye`/fine_tuning/jobs/${e}/events`,Tt,{query:n,...s})}pause(e,n){return this._client.post(ye`/fine_tuning/jobs/${e}/pause`,n)}resume(e,n){return this._client.post(ye`/fine_tuning/jobs/${e}/resume`,n)}}my.Checkpoints=_A;class eo extends Ne{constructor(){super(...arguments),this.methods=new yA(this._client),this.jobs=new my(this._client),this.checkpoints=new hy(this._client),this.alpha=new fy(this._client)}}eo.Methods=yA;eo.Jobs=my;eo.Checkpoints=hy;eo.Alpha=fy;class wA extends Ne{}class py extends Ne{constructor(){super(...arguments),this.graderModels=new wA(this._client)}}py.GraderModels=wA;class xA extends Ne{createVariation(e,n){return this._client.post("/images/variations",Ti({body:e,...n},this._client))}edit(e,n){return this._client.post("/images/edits",Ti({body:e,...n,stream:e.stream??!1},this._client))}generate(e,n){return this._client.post("/images/generations",{body:e,...n,stream:e.stream??!1})}}class SA extends Ne{retrieve(e,n){return this._client.get(ye`/models/${e}`,n)}list(e){return this._client.getAPIList("/models",vf,e)}delete(e,n){return this._client.delete(ye`/models/${e}`,n)}}class EA extends Ne{create(e,n){return this._client.post("/moderations",{body:e,...n})}}class CA extends Ne{accept(e,n,s){return this._client.post(ye`/realtime/calls/${e}/accept`,{body:n,...s,headers:Se([{Accept:"*/*"},s?.headers])})}hangup(e,n){return this._client.post(ye`/realtime/calls/${e}/hangup`,{...n,headers:Se([{Accept:"*/*"},n?.headers])})}refer(e,n,s){return this._client.post(ye`/realtime/calls/${e}/refer`,{body:n,...s,headers:Se([{Accept:"*/*"},s?.headers])})}reject(e,n={},s){return this._client.post(ye`/realtime/calls/${e}/reject`,{body:n,...s,headers:Se([{Accept:"*/*"},s?.headers])})}}class AA extends Ne{create(e,n){return this._client.post("/realtime/client_secrets",{body:e,...n})}}class xf extends Ne{constructor(){super(...arguments),this.clientSecrets=new AA(this._client),this.calls=new CA(this._client)}}xf.ClientSecrets=AA;xf.Calls=CA;function i4(t,e){return!e||!o4(e)?{...t,output_parsed:null,output:t.output.map(n=>n.type==="function_call"?{...n,parsed_arguments:null}:n.type==="message"?{...n,content:n.content.map(s=>({...s,parsed:null}))}:n)}:TA(t,e)}function TA(t,e){const n=t.output.map(a=>{if(a.type==="function_call")return{...a,parsed_arguments:u4(e,a)};if(a.type==="message"){const l=a.content.map(c=>c.type==="output_text"?{...c,parsed:a4(e,c.text)}:c);return{...a,content:l}}return a}),s=Object.assign({},t,{output:n});return Object.getOwnPropertyDescriptor(t,"output_text")||fg(s),Object.defineProperty(s,"output_parsed",{enumerable:!0,get(){for(const a of s.output)if(a.type==="message"){for(const l of a.content)if(l.type==="output_text"&&l.parsed!==null)return l.parsed}return null}}),s}function a4(t,e){return t.text?.format?.type!=="json_schema"?null:"$parseRaw"in t.text?.format?(t.text?.format).$parseRaw(e):JSON.parse(e)}function o4(t){return!!ey(t.text?.format)}function l4(t){return t?.$brand==="auto-parseable-tool"}function c4(t,e){return t.find(n=>n.type==="function"&&n.name===e)}function u4(t,e){const n=c4(t.tools??[],e.name);return{...e,...e,parsed_arguments:l4(n)?n.$parseRaw(e.arguments):n?.strict?JSON.parse(e.arguments):null}}function fg(t){const e=[];for(const n of t.output)if(n.type==="message")for(const s of n.content)s.type==="output_text"&&e.push(s.text);t.output_text=e.join("")}var Oa,sd,ks,id,qx,Hx,Vx,Fx;class gy extends ny{constructor(e){super(),Oa.add(this),sd.set(this,void 0),ks.set(this,void 0),id.set(this,void 0),Ie(this,sd,e)}static createResponse(e,n,s){const a=new gy(n);return a._run(()=>a._createOrRetrieveResponse(e,n,{...s,headers:{...s?.headers,"X-Stainless-Helper-Method":"stream"}})),a}async _createOrRetrieveResponse(e,n,s){const a=s?.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",()=>this.controller.abort())),re(this,Oa,"m",qx).call(this);let l,c=null;"response_id"in n?(l=await e.responses.retrieve(n.response_id,{stream:!0},{...s,signal:this.controller.signal,stream:!0}),c=n.starting_after??null):l=await e.responses.create({...n,stream:!0},{...s,signal:this.controller.signal}),this._connected();for await(const d of l)re(this,Oa,"m",Hx).call(this,d,c);if(l.controller.signal?.aborted)throw new qn;return re(this,Oa,"m",Vx).call(this)}[(sd=new WeakMap,ks=new WeakMap,id=new WeakMap,Oa=new WeakSet,qx=function(){this.ended||Ie(this,ks,void 0)},Hx=function(n,s){if(this.ended)return;const a=(c,d)=>{(s==null||d.sequence_number>s)&&this._emit(c,d)},l=re(this,Oa,"m",Fx).call(this,n);switch(a("event",n),n.type){case"response.output_text.delta":{const c=l.output[n.output_index];if(!c)throw new je(`missing output at index ${n.output_index}`);if(c.type==="message"){const d=c.content[n.content_index];if(!d)throw new je(`missing content at index ${n.content_index}`);if(d.type!=="output_text")throw new je(`expected content to be 'output_text', got ${d.type}`);a("response.output_text.delta",{...n,snapshot:d.text})}break}case"response.function_call_arguments.delta":{const c=l.output[n.output_index];if(!c)throw new je(`missing output at index ${n.output_index}`);c.type==="function_call"&&a("response.function_call_arguments.delta",{...n,snapshot:c.arguments});break}default:a(n.type,n);break}},Vx=function(){if(this.ended)throw new je("stream has ended, this shouldn't happen");const n=re(this,ks,"f");if(!n)throw new je("request ended without sending any events");Ie(this,ks,void 0);const s=d4(n,re(this,sd,"f"));return Ie(this,id,s),s},Fx=function(n){let s=re(this,ks,"f");if(!s){if(n.type!=="response.created")throw new je(`When snapshot hasn't been set yet, expected 'response.created' event, got ${n.type}`);return s=Ie(this,ks,n.response),s}switch(n.type){case"response.output_item.added":{s.output.push(n.item);break}case"response.content_part.added":{const a=s.output[n.output_index];if(!a)throw new je(`missing output at index ${n.output_index}`);const l=a.type,c=n.part;l==="message"&&c.type!=="reasoning_text"?a.content.push(c):l==="reasoning"&&c.type==="reasoning_text"&&(a.content||(a.content=[]),a.content.push(c));break}case"response.output_text.delta":{const a=s.output[n.output_index];if(!a)throw new je(`missing output at index ${n.output_index}`);if(a.type==="message"){const l=a.content[n.content_index];if(!l)throw new je(`missing content at index ${n.content_index}`);if(l.type!=="output_text")throw new je(`expected content to be 'output_text', got ${l.type}`);l.text+=n.delta}break}case"response.function_call_arguments.delta":{const a=s.output[n.output_index];if(!a)throw new je(`missing output at index ${n.output_index}`);a.type==="function_call"&&(a.arguments+=n.delta);break}case"response.reasoning_text.delta":{const a=s.output[n.output_index];if(!a)throw new je(`missing output at index ${n.output_index}`);if(a.type==="reasoning"){const l=a.content?.[n.content_index];if(!l)throw new je(`missing content at index ${n.content_index}`);if(l.type!=="reasoning_text")throw new je(`expected content to be 'reasoning_text', got ${l.type}`);l.text+=n.delta}break}case"response.completed":{Ie(this,ks,n.response);break}}return s},Symbol.asyncIterator)](){const e=[],n=[];let s=!1;return this.on("event",a=>{const l=n.shift();l?l.resolve(a):e.push(a)}),this.on("end",()=>{s=!0;for(const a of n)a.resolve(void 0);n.length=0}),this.on("abort",a=>{s=!0;for(const l of n)l.reject(a);n.length=0}),this.on("error",a=>{s=!0;for(const l of n)l.reject(a);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:s?{value:void 0,done:!0}:new Promise((l,c)=>n.push({resolve:l,reject:c})).then(l=>l?{value:l,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}async finalResponse(){await this.done();const e=re(this,id,"f");if(!e)throw new je("stream ended without producing a ChatCompletion");return e}}function d4(t,e){return i4(t,e)}class NA extends Ne{list(e,n={},s){return this._client.getAPIList(ye`/responses/${e}/input_items`,Tt,{query:n,...s})}}class OA extends Ne{count(e={},n){return this._client.post("/responses/input_tokens",{body:e,...n})}}class Sf extends Ne{constructor(){super(...arguments),this.inputItems=new NA(this._client),this.inputTokens=new OA(this._client)}create(e,n){return this._client.post("/responses",{body:e,...n,stream:e.stream??!1})._thenUnwrap(s=>("object"in s&&s.object==="response"&&fg(s),s))}retrieve(e,n={},s){return this._client.get(ye`/responses/${e}`,{query:n,...s,stream:n?.stream??!1})._thenUnwrap(a=>("object"in a&&a.object==="response"&&fg(a),a))}delete(e,n){return this._client.delete(ye`/responses/${e}`,{...n,headers:Se([{Accept:"*/*"},n?.headers])})}parse(e,n){return this._client.responses.create(e,n)._thenUnwrap(s=>TA(s,e))}stream(e,n){return gy.createResponse(this._client,e,n)}cancel(e,n){return this._client.post(ye`/responses/${e}/cancel`,n)}}Sf.InputItems=NA;Sf.InputTokens=OA;class RA extends Ne{create(e,n,s){return this._client.post(ye`/uploads/${e}/parts`,Ti({body:n,...s},this._client))}}class yy extends Ne{constructor(){super(...arguments),this.parts=new RA(this._client)}create(e,n){return this._client.post("/uploads",{body:e,...n})}cancel(e,n){return this._client.post(ye`/uploads/${e}/cancel`,n)}complete(e,n,s){return this._client.post(ye`/uploads/${e}/complete`,{body:n,...s})}}yy.Parts=RA;const f4=async t=>{const e=await Promise.allSettled(t),n=e.filter(a=>a.status==="rejected");if(n.length){for(const a of n)console.error(a.reason);throw new Error(`${n.length} promise(s) failed - see the above errors`)}const s=[];for(const a of e)a.status==="fulfilled"&&s.push(a.value);return s};class jA extends Ne{create(e,n,s){return this._client.post(ye`/vector_stores/${e}/file_batches`,{body:n,...s,headers:Se([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}retrieve(e,n,s){const{vector_store_id:a}=n;return this._client.get(ye`/vector_stores/${a}/file_batches/${e}`,{...s,headers:Se([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}cancel(e,n,s){const{vector_store_id:a}=n;return this._client.post(ye`/vector_stores/${a}/file_batches/${e}/cancel`,{...s,headers:Se([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}async createAndPoll(e,n,s){const a=await this.create(e,n);return await this.poll(e,a.id,s)}listFiles(e,n,s){const{vector_store_id:a,...l}=n;return this._client.getAPIList(ye`/vector_stores/${a}/file_batches/${e}/files`,Tt,{query:l,...s,headers:Se([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}async poll(e,n,s){const a=Se([s?.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":s?.pollIntervalMs?.toString()??void 0}]);for(;;){const{data:l,response:c}=await this.retrieve(n,{vector_store_id:e},{...s,headers:a}).withResponse();switch(l.status){case"in_progress":let d=5e3;if(s?.pollIntervalMs)d=s.pollIntervalMs;else{const f=c.headers.get("openai-poll-after-ms");if(f){const h=parseInt(f);isNaN(h)||(d=h)}}await ic(d);break;case"failed":case"cancelled":case"completed":return l}}}async uploadAndPoll(e,{files:n,fileIds:s=[]},a){if(n==null||n.length==0)throw new Error("No `files` provided to process. If you've already uploaded files you should use `.createAndPoll()` instead");const l=a?.maxConcurrency??5,c=Math.min(l,n.length),d=this._client,f=n.values(),h=[...s];async function g(v){for(let b of v){const x=await d.files.create({file:b,purpose:"assistants"},a);h.push(x.id)}}const p=Array(c).fill(f).map(g);return await f4(p),await this.createAndPoll(e,{file_ids:h})}}class kA extends Ne{create(e,n,s){return this._client.post(ye`/vector_stores/${e}/files`,{body:n,...s,headers:Se([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}retrieve(e,n,s){const{vector_store_id:a}=n;return this._client.get(ye`/vector_stores/${a}/files/${e}`,{...s,headers:Se([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}update(e,n,s){const{vector_store_id:a,...l}=n;return this._client.post(ye`/vector_stores/${a}/files/${e}`,{body:l,...s,headers:Se([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}list(e,n={},s){return this._client.getAPIList(ye`/vector_stores/${e}/files`,Tt,{query:n,...s,headers:Se([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}delete(e,n,s){const{vector_store_id:a}=n;return this._client.delete(ye`/vector_stores/${a}/files/${e}`,{...s,headers:Se([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}async createAndPoll(e,n,s){const a=await this.create(e,n,s);return await this.poll(e,a.id,s)}async poll(e,n,s){const a=Se([s?.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":s?.pollIntervalMs?.toString()??void 0}]);for(;;){const l=await this.retrieve(n,{vector_store_id:e},{...s,headers:a}).withResponse(),c=l.data;switch(c.status){case"in_progress":let d=5e3;if(s?.pollIntervalMs)d=s.pollIntervalMs;else{const f=l.response.headers.get("openai-poll-after-ms");if(f){const h=parseInt(f);isNaN(h)||(d=h)}}await ic(d);break;case"failed":case"completed":return c}}}async upload(e,n,s){const a=await this._client.files.create({file:n,purpose:"assistants"},s);return this.create(e,{file_id:a.id},s)}async uploadAndPoll(e,n,s){const a=await this.upload(e,n,s);return await this.poll(e,a.id,s)}content(e,n,s){const{vector_store_id:a}=n;return this._client.getAPIList(ye`/vector_stores/${a}/files/${e}/content`,vf,{...s,headers:Se([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}}class Ef extends Ne{constructor(){super(...arguments),this.files=new kA(this._client),this.fileBatches=new jA(this._client)}create(e,n){return this._client.post("/vector_stores",{body:e,...n,headers:Se([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}retrieve(e,n){return this._client.get(ye`/vector_stores/${e}`,{...n,headers:Se([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}update(e,n,s){return this._client.post(ye`/vector_stores/${e}`,{body:n,...s,headers:Se([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}list(e={},n){return this._client.getAPIList("/vector_stores",Tt,{query:e,...n,headers:Se([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}delete(e,n){return this._client.delete(ye`/vector_stores/${e}`,{...n,headers:Se([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}search(e,n,s){return this._client.getAPIList(ye`/vector_stores/${e}/search`,vf,{body:n,method:"post",...s,headers:Se([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}}Ef.Files=kA;Ef.FileBatches=jA;class MA extends Ne{create(e,n){return this._client.post("/videos",Rx({body:e,...n},this._client))}retrieve(e,n){return this._client.get(ye`/videos/${e}`,n)}list(e={},n){return this._client.getAPIList("/videos",Pd,{query:e,...n})}delete(e,n){return this._client.delete(ye`/videos/${e}`,n)}downloadContent(e,n={},s){return this._client.get(ye`/videos/${e}/content`,{query:n,...s,headers:Se([{Accept:"application/binary"},s?.headers]),__binaryResponse:!0})}remix(e,n,s){return this._client.post(ye`/videos/${e}/remix`,Rx({body:n,...s},this._client))}}var Da,DA,wd;class UA extends Ne{constructor(){super(...arguments),Da.add(this)}async unwrap(e,n,s=this._client.webhookSecret,a=300){return await this.verifySignature(e,n,s,a),JSON.parse(e)}async verifySignature(e,n,s=this._client.webhookSecret,a=300){if(typeof crypto>"u"||typeof crypto.subtle.importKey!="function"||typeof crypto.subtle.verify!="function")throw new Error("Webhook signature verification is only supported when the `crypto` global is defined");re(this,Da,"m",DA).call(this,s);const l=Se([n]).values,c=re(this,Da,"m",wd).call(this,l,"webhook-signature"),d=re(this,Da,"m",wd).call(this,l,"webhook-timestamp"),f=re(this,Da,"m",wd).call(this,l,"webhook-id"),h=parseInt(d,10);if(isNaN(h))throw new hl("Invalid webhook timestamp format");const g=Math.floor(Date.now()/1e3);if(g-h>a)throw new hl("Webhook timestamp is too old");if(h>g+a)throw new hl("Webhook timestamp is too new");const p=c.split(" ").map(w=>w.startsWith("v1,")?w.substring(3):w),v=s.startsWith("whsec_")?Buffer.from(s.replace("whsec_",""),"base64"):Buffer.from(s,"utf-8"),b=f?`${f}.${d}.${e}`:`${d}.${e}`,x=await crypto.subtle.importKey("raw",v,{name:"HMAC",hash:"SHA-256"},!1,["verify"]);for(const w of p)try{const S=Buffer.from(w,"base64");if(await crypto.subtle.verify("HMAC",x,S,new TextEncoder().encode(b)))return}catch{continue}throw new hl("The given webhook signature does not match the expected signature")}}Da=new WeakSet,DA=function(e){if(typeof e!="string"||e.length===0)throw new Error("The webhook secret must either be set using the env var, OPENAI_WEBHOOK_SECRET, on the client class, OpenAI({ webhookSecret: '123' }), or passed to this function")},wd=function(e,n){if(!e)throw new Error("Headers are required");const s=e.get(n);if(s==null)throw new Error(`Missing required header: ${n}`);return s};var hg,vy,xd,$A;class qe{constructor({baseURL:e=Na("OPENAI_BASE_URL"),apiKey:n=Na("OPENAI_API_KEY"),organization:s=Na("OPENAI_ORG_ID")??null,project:a=Na("OPENAI_PROJECT_ID")??null,webhookSecret:l=Na("OPENAI_WEBHOOK_SECRET")??null,...c}={}){if(hg.add(this),xd.set(this,void 0),this.completions=new dA(this),this.chat=new iy(this),this.embeddings=new mA(this),this.files=new gA(this),this.images=new xA(this),this.audio=new oc(this),this.moderations=new EA(this),this.models=new SA(this),this.fineTuning=new eo(this),this.graders=new py(this),this.vectorStores=new Ef(this),this.webhooks=new UA(this),this.beta=new Za(this),this.batches=new rA(this),this.uploads=new yy(this),this.responses=new Sf(this),this.realtime=new xf(this),this.conversations=new cy(this),this.evals=new dy(this),this.containers=new ly(this),this.videos=new MA(this),n===void 0)throw new je("Missing credentials. Please pass an `apiKey`, or set the `OPENAI_API_KEY` environment variable.");const d={apiKey:n,organization:s,project:a,webhookSecret:l,...c,baseURL:e||"https://api.openai.com/v1"};if(!d.dangerouslyAllowBrowser&&hz())throw new je(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new OpenAI({ apiKey, dangerouslyAllowBrowser: true });

https://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety
`);this.baseURL=d.baseURL,this.timeout=d.timeout??vy.DEFAULT_TIMEOUT,this.logger=d.logger??console;const f="warn";this.logLevel=f,this.logLevel=Nx(d.logLevel,"ClientOptions.logLevel",this)??Nx(Na("OPENAI_LOG"),"process.env['OPENAI_LOG']",this)??f,this.fetchOptions=d.fetchOptions,this.maxRetries=d.maxRetries??2,this.fetch=d.fetch??vz(),Ie(this,xd,_z),this._options=d,this.apiKey=typeof n=="string"?n:"Missing Key",this.organization=s,this.project=a,this.webhookSecret=l}withOptions(e){return new this.constructor({...this._options,baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,organization:this.organization,project:this.project,webhookSecret:this.webhookSecret,...e})}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:n}){}async authHeaders(e){return Se([{Authorization:`Bearer ${this.apiKey}`}])}stringifyQuery(e){return Az(e,{arrayFormat:"brackets"})}getUserAgent(){return`${this.constructor.name}/JS ${ka}`}defaultIdempotencyKey(){return`stainless-node-retry-${iC()}`}makeStatusError(e,n,s,a){return Vt.generate(e,n,s,a)}async _callApiKey(){const e=this._options.apiKey;if(typeof e!="function")return!1;let n;try{n=await e()}catch(s){throw s instanceof je?s:new je(`Failed to get token from 'apiKey' function: ${s.message}`,{cause:s})}if(typeof n!="string"||!n)throw new je(`Expected 'apiKey' function argument to return a string but it returned ${n}`);return this.apiKey=n,!0}buildURL(e,n,s){const a=!re(this,hg,"m",$A).call(this)&&s||this.baseURL,l=lz(e)?new URL(e):new URL(a+(a.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),c=this.defaultQuery();return cz(c)||(n={...c,...n}),typeof n=="object"&&n&&!Array.isArray(n)&&(l.search=this.stringifyQuery(n)),l.toString()}async prepareOptions(e){await this._callApiKey()}async prepareRequest(e,{url:n,options:s}){}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,s){return this.request(Promise.resolve(s).then(a=>({method:e,path:n,...a})))}request(e,n=null){return new yf(this,this.makeRequest(e,n,void 0))}async makeRequest(e,n,s){const a=await e,l=a.maxRetries??this.maxRetries;n==null&&(n=l),await this.prepareOptions(a);const{req:c,url:d,timeout:f}=await this.buildRequest(a,{retryCount:l-n});await this.prepareRequest(c,{url:d,options:a});const h="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),g=s===void 0?"":`, retryOf: ${s}`,p=Date.now();if(qt(this).debug(`[${h}] sending request`,di({retryOfRequestLogID:s,method:a.method,url:d,options:a,headers:c.headers})),a.signal?.aborted)throw new qn;const v=new AbortController,b=await this.fetchWithTimeout(d,c,f,v).catch(tg),x=Date.now();if(b instanceof globalThis.Error){const C=`retrying, ${n} attempts remaining`;if(a.signal?.aborted)throw new qn;const N=eg(b)||/timed? ?out/i.test(String(b)+("cause"in b?String(b.cause):""));if(n)return qt(this).info(`[${h}] connection ${N?"timed out":"failed"} - ${C}`),qt(this).debug(`[${h}] connection ${N?"timed out":"failed"} (${C})`,di({retryOfRequestLogID:s,url:d,durationMs:x-p,message:b.message})),this.retryRequest(a,n,s??h);throw qt(this).info(`[${h}] connection ${N?"timed out":"failed"} - error; no more retries left`),qt(this).debug(`[${h}] connection ${N?"timed out":"failed"} (error; no more retries left)`,di({retryOfRequestLogID:s,url:d,durationMs:x-p,message:b.message})),N?new Qg:new pf({cause:b})}const w=[...b.headers.entries()].filter(([C])=>C==="x-request-id").map(([C,N])=>", "+C+": "+JSON.stringify(N)).join(""),S=`[${h}${g}${w}] ${c.method} ${d} ${b.ok?"succeeded":"failed"} with status ${b.status} in ${x-p}ms`;if(!b.ok){const C=await this.shouldRetry(b);if(n&&C){const D=`retrying, ${n} attempts remaining`;return await bz(b.body),qt(this).info(`${S} - ${D}`),qt(this).debug(`[${h}] response error (${D})`,di({retryOfRequestLogID:s,url:b.url,status:b.status,headers:b.headers,durationMs:x-p})),this.retryRequest(a,n,s??h,b.headers)}const N=C?"error; no more retries left":"error; not retryable";qt(this).info(`${S} - ${N}`);const E=await b.text().catch(D=>tg(D).message),A=fz(E),O=A?void 0:E;throw qt(this).debug(`[${h}] response error (${N})`,di({retryOfRequestLogID:s,url:b.url,status:b.status,headers:b.headers,message:O,durationMs:Date.now()-p})),this.makeStatusError(b.status,A,O,b.headers)}return qt(this).info(S),qt(this).debug(`[${h}] response start`,di({retryOfRequestLogID:s,url:b.url,status:b.status,headers:b.headers,durationMs:x-p})),{response:b,options:a,controller:v,requestLogID:h,retryOfRequestLogID:s,startTime:p}}getAPIList(e,n,s){return this.requestAPIList(n,{method:"get",path:e,...s})}requestAPIList(e,n){const s=this.makeRequest(n,null,void 0);return new Uz(this,s,e)}async fetchWithTimeout(e,n,s,a){const{signal:l,method:c,...d}=n||{};l&&l.addEventListener("abort",()=>a.abort());const f=setTimeout(()=>a.abort(),s),h=globalThis.ReadableStream&&d.body instanceof globalThis.ReadableStream||typeof d.body=="object"&&d.body!==null&&Symbol.asyncIterator in d.body,g={signal:a.signal,...h?{duplex:"half"}:{},method:"GET",...d};c&&(g.method=c.toUpperCase());try{return await this.fetch.call(void 0,e,g)}finally{clearTimeout(f)}}async shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,s,a){let l;const c=a?.get("retry-after-ms");if(c){const f=parseFloat(c);Number.isNaN(f)||(l=f)}const d=a?.get("retry-after");if(d&&!l){const f=parseFloat(d);Number.isNaN(f)?l=Date.parse(d)-Date.now():l=f*1e3}if(!(l&&0<=l&&l<60*1e3)){const f=e.maxRetries??this.maxRetries;l=this.calculateDefaultRetryTimeoutMillis(n,f)}return await ic(l),this.makeRequest(e,n-1,s)}calculateDefaultRetryTimeoutMillis(e,n){const l=n-e,c=Math.min(.5*Math.pow(2,l),8),d=1-Math.random()*.25;return c*d*1e3}async buildRequest(e,{retryCount:n=0}={}){const s={...e},{method:a,path:l,query:c,defaultBaseURL:d}=s,f=this.buildURL(l,c,d);"timeout"in s&&dz("timeout",s.timeout),s.timeout=s.timeout??this.timeout;const{bodyHeaders:h,body:g}=this.buildBody({options:s}),p=await this.buildHeaders({options:e,method:a,bodyHeaders:h,retryCount:n});return{req:{method:a,headers:p,...s.signal&&{signal:s.signal},...globalThis.ReadableStream&&g instanceof globalThis.ReadableStream&&{duplex:"half"},...g&&{body:g},...this.fetchOptions??{},...s.fetchOptions??{}},url:f,timeout:s.timeout}}async buildHeaders({options:e,method:n,bodyHeaders:s,retryCount:a}){let l={};this.idempotencyHeader&&n!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),l[this.idempotencyHeader]=e.idempotencyKey);const c=Se([l,{Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(a),...e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{},...yz(),"OpenAI-Organization":this.organization,"OpenAI-Project":this.project},await this.authHeaders(e),this._options.defaultHeaders,s,e.headers]);return this.validateHeaders(c),c.values}buildBody({options:{body:e,headers:n}}){if(!e)return{bodyHeaders:void 0,body:void 0};const s=Se([n]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&s.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:vC(e)}:re(this,xd,"f").call(this,{body:e,headers:s})}}vy=qe,xd=new WeakMap,hg=new WeakSet,$A=function(){return this.baseURL!=="https://api.openai.com/v1"};qe.OpenAI=vy;qe.DEFAULT_TIMEOUT=6e5;qe.OpenAIError=je;qe.APIError=Vt;qe.APIConnectionError=pf;qe.APIConnectionTimeoutError=Qg;qe.APIUserAbortError=qn;qe.NotFoundError=cC;qe.ConflictError=uC;qe.RateLimitError=fC;qe.BadRequestError=aC;qe.AuthenticationError=oC;qe.InternalServerError=hC;qe.PermissionDeniedError=lC;qe.UnprocessableEntityError=dC;qe.InvalidWebhookSignatureError=hl;qe.toFile=Bz;qe.Completions=dA;qe.Chat=iy;qe.Embeddings=mA;qe.Files=gA;qe.Images=xA;qe.Audio=oc;qe.Moderations=EA;qe.Models=SA;qe.FineTuning=eo;qe.Graders=py;qe.VectorStores=Ef;qe.Webhooks=UA;qe.Beta=Za;qe.Batches=rA;qe.Uploads=yy;qe.Responses=Sf;qe.Realtime=xf;qe.Conversations=cy;qe.Evals=dy;qe.Containers=ly;qe.Videos=MA;function h4(){const{projectId:t,ep_id:e,setEpId:n,setDeepseekProvider:s,updateEmbodyCache:a,embodyCache:l}=Qr(),[c,d]=R.useState(null),[f,h]=R.useState([]),[g,p]=R.useState(!1),[v,b]=R.useState(""),[x,w]=R.useState("");Is();let S=[];R.useEffect(()=>{t&&(d(""),Me.from("movie_eps").select("*").eq("project_id",t).order("index",{ascending:!0}).then(({data:L,error:W})=>{if(W){d(W.message);return}h(L),console.log(L)}),Me.from("LLM").select("*").eq("provider_name","deepseek").single().then(({data:L,error:W})=>{if(W){d(W.message);return}s(L)}))},[t]);const C=()=>{p(!0)},N=()=>{if(!x.trim()){d("");return}const L=document.createElement("input");L.type="file",L.accept=".json",L.onchange=E,L.click()},E=L=>{const W=L.target.files[0];if(W){const I=new FileReader;I.readAsText(W,"utf-8"),I.onload=Y=>{const k=Y.target.result;try{const z=JSON.parse(k);console.log(z),P(z)}catch(z){console.error("JSON :",z)}}}},A=L=>{n(L),localStorage.setItem("epId",L),Qt.emit("changeEditorMode","shot")},O=()=>{p(!1),b(""),w(""),d(null)},[j,D]=R.useState(!1),$=async(L,W)=>{const I=[...W,L];let Y=[];for(let k of I){let z=S.find(V=>V.name===k);if(z)Y.push(z.id);else{const{data:V,error:q}=await Me.from("embodys").insert([{project_id:t,name:k,type:"character"}]).select("id, name,type").single();if(q){d(q.message);return}Y.push(V.id),S.push(V)}}return Y},P=async L=>{D(!0);try{const{data:W,error:I}=await Me.from("movie_eps").insert([{project_id:t,title:L.episode_name,description:L.description,index:parseInt(x)}]).select("*").single();if(I)throw I;if(L.sc&&Array.isArray(L.sc))for(let Y=0;Y<L.sc.length;Y++){const k=L.sc[Y],{data:z,error:V}=await Me.from("movie_scs").insert([{ep_id:W.id,name:k.scene_name,description:k.description,index:Y+1}]).select("*").single();if(V){console.error(":",V),D(!1);continue}if(console.log(` ${k.scene_name} `),k.seq)for(let q=0;q<k.seq.length;q++){const H=k.seq[q],{data:M,error:B}=await Me.from("movie_seqs").insert([{sc_id:z.id,name:H.sequence_name,index:q+1}]).select("*").single();if(B){console.error(":",B),D(!1);continue}console.log(` ${H.sequence_name} ${H.shots.length}  ${M.id}`);for(let Q=0;Q<H.shots.length;Q++){const ee=H.shots[Q],{data:he,error:ge}=await Me.from("movie_shots").insert([{seq_id:M.id,description:ee.description,index:Q+1,prompt:ee.prompt,duration:parseFloat(ee.duration),dialogue:ee.dialogue,embodys:await $(ee.scene,ee.embodys)}]).select("*").single()}}}h([...f,W]),O(),await a()}catch(W){d(": "+W.message)}finally{D(!1)}},K=async()=>{if(await a(),!x.trim()){d("");return}const L=parseInt(x);if(f.find(I=>I.index===L)){d(`${L}`);return}D(!0),d(null);try{let I=!1,Y={};if(!I){const z=await(await fetch("./test_story.json",{})).json();console.log("testData:",z),Y=z}return}catch(I){d(": "+I.message)}finally{D(!1)}},G=async L=>{try{const{error:W}=await Me.from("movie_eps").delete().eq("id",L.id);if(W)throw W;h(f.filter(I=>I.id!==L.id))}catch(W){d(": "+W.message)}finally{}};return _.jsxs("div",{className:"ep-editor-container",children:[_.jsx("div",{className:"ep-editor-header",children:_.jsx("button",{className:"add-ep-button",onClick:C,children:"+ "})}),c&&_.jsx("div",{className:"error-message",children:_.jsx("p",{children:c})}),_.jsx("div",{className:"ep-list",children:f.length>0?f.map(L=>_.jsxs("div",{className:"ep-card",onClick:()=>A(L.id),children:[_.jsx("div",{className:"ep-thumbnail",children:L.pic?_.jsx("img",{src:L.pic,alt:L.title}):_.jsx("span",{children:""})}),_.jsxs("div",{className:"ep-content",children:[_.jsx("h3",{className:"ep-title",children:L.title||`EP ${L.index||""}`}),_.jsx("p",{className:"ep-description",children:L.description||""}),_.jsxs("div",{className:"ep-info",children:[_.jsxs("span",{children:["",L.index||"?",""]}),_.jsx("span",{children:L.created_at?new Date(L.created_at).toLocaleDateString():""})]})]}),_.jsx("div",{className:"delete-ep-button",children:_.jsx("button",{onClick:W=>{W.stopPropagation(),G(L)},children:""})})]},L.id)):_.jsxs("div",{className:"empty-state",children:[_.jsx("h3",{children:""}),_.jsx("p",{children:'""'})]})}),g&&_.jsx("div",{className:"modal-overlay",onClick:O,children:_.jsxs("div",{className:"modal-content",onClick:L=>L.stopPropagation(),children:[_.jsxs("div",{className:"modal-header",children:[_.jsx("h3",{children:""}),_.jsx("button",{className:"close-button",onClick:O,children:""})]}),c&&_.jsx("div",{className:"error-message",children:_.jsx("p",{children:c})}),_.jsxs("div",{className:"form-group",children:[_.jsx("label",{htmlFor:"ep-number",children:" *"}),_.jsx("input",{id:"ep-number",type:"number",value:x,onChange:L=>{const W=parseInt(L.target.value),I=f.find(Y=>Y.index===W);console.log(I),I!=null?d(`${W}`):d(null),w(L.target.value)},placeholder:"",min:"1",required:!0})]}),_.jsxs("div",{className:"form-group",children:[_.jsx("label",{htmlFor:"ep-description",children:" *"}),_.jsx("textarea",{id:"ep-description",value:v,onChange:L=>b(L.target.value),placeholder:"",rows:"18"})]}),_.jsxs("div",{className:"modal-actions",children:[_.jsx("button",{className:"cancel-button",onClick:N,disabled:j,children:""}),_.jsx("button",{className:"cancel-button",onClick:O,children:""}),_.jsx("button",{className:"save-button",onClick:K,disabled:j,children:j?"...":""})]})]})})]})}function m4(){const{projectId:t,setProjectId:e}=Qr(),[n,s]=R.useState(""),[a,l]=R.useState("script"),[c,d]=R.useState(""),[f,h]=R.useState(null),g=Is();return R.useEffect(()=>{t&&(Qt.emit("StartEditorMode"),Me.from("projects").select("*").eq("id",t).single().then(({data:p,error:v})=>{v?(console.error(":",v),h(""),d("// : ")):(console.log(":",p),s(p.name||""))}),Qt.on("changeEditorMode",p=>{l(p)}),Me.from("embodys").select("*").eq("project_id",t).then(({data:p,error:v})=>{v&&(console.error(":",v),h(""),d("// : "))}))},[t]),_.jsxs("div",{className:"editor-container",children:[f&&_.jsx("div",{className:"error-message",children:_.jsx("p",{children:f})}),_.jsxs("div",{className:"editor-header",children:[_.jsx("div",{className:"project_name",onClick:()=>{g("/dashboard"),Qt.emit("EndEditorMode"),e(null)},children:_.jsxs("h3",{children:["< ",n]})}),_.jsxs("div",{className:"editor-nav",children:[_.jsx("div",{className:`editor-nav-item ${a==="script"?"editor-nav-item-selected":""}`,onClick:()=>l("script"),children:""}),_.jsx("div",{className:`editor-nav-item ${a==="shot"?"editor-nav-item-selected":""}`,onClick:()=>l("shot"),children:""}),_.jsx("div",{className:`editor-nav-item ${a==="edit"?"editor-nav-item-selected":""}`,onClick:()=>l("edit"),children:""})]})]}),_.jsxs("div",{className:"editor-content",children:[a==="script"&&_.jsx(h4,{}),a==="shot"&&_.jsx(Vk,{}),a==="edit"&&_.jsx(az,{})]})]})}function p4(){const{projectId:t}=Qr(),[e,n]=R.useState(!1),[s,a]=R.useState([]),[l,c]=R.useState([]),[d,f]=R.useState([]),[h,g]=R.useState(""),[p,v]=R.useState("all"),[b,x]=R.useState(!0),[w,S]=R.useState(""),[C,N]=R.useState([]),[E,A]=R.useState(""),O=R.useRef(null),[j,D]=R.useState(null),[$,P]=R.useState({type:"",name:"",pic:"",description:"",embody_images:[]}),[K,G]=R.useState(!1),[L,W]=R.useState(!1),[I,Y]=R.useState({project_id:t,type:"scene",name:"",prompt:"",description:"",pic:""}),[k,z]=R.useState(null),[V,q]=R.useState("");R.useEffect(()=>{if(!t){console.log("ID Embody");return}console.log("",t),M()},[t]),R.useEffect(()=>{},[K]);const H=(oe,_e)=>{const Le=C.filter(st=>st.type===_e);if(h.trim()==="")return Le;const Je=h.toLowerCase();return Le.filter(st=>st.name.toLowerCase().includes(Je)||st.description&&st.description.toLowerCase().includes(Je))},M=async()=>{if(!t){S("ID Embody"),x(!1);return}x(!0),S("");try{console.log(" ID:",t);const{data:oe}=await Me.from("embodys").select(`
                    *,
                    embody_images (
                        *
                    )
                `).eq("project_id",t);N(oe||[])}catch(oe){console.error(":",oe),S("")}finally{x(!1)}},B=oe=>{const _e=C.find(Le=>Le.id===oe);_e&&(console.log(":",_e),D(oe),P({id:_e.id,type:_e.type,name:_e.name||"",pic:_e.pic||"",description:_e.description||"",prompt:_e.prompt||"",embody_images:_e.embody_images||[]}))},Q=async()=>{if(j)try{console.log(":",j,$);const{error:oe}=await Me.from("embodys").update({name:$.name,type:$.type,description:$.description,prompt:$.prompt}).eq("id",j);if(oe){console.error(":",oe),alert("");return}M(),D(null)}catch(oe){console.error(":",oe),alert("")}},ee=async()=>{try{const oe=$.type==="scene"?"":$.type==="character"?"":"",_e=$.name||`${oe}`;alert("..."),await new Promise(Je=>setTimeout(Je,1e3));let Le="";$.type==="scene"?Le=`${_e}8K`:$.type==="character"?Le=`${_e}8K`:Le=`${_e}3D8K`,P({...$,prompt:Le}),alert("")}catch(oe){console.error(":",oe),alert("")}},he=()=>{O.current.click()},ge=async oe=>{const _e=Array.from(oe.target.files);if(_e.length>0){n(!0),console.log("Selected file:",_e),_e.forEach((pt,hn)=>{console.log(":",pt)}),console.log($);let Le=_e.map(async(pt,hn)=>{const Jt=Date.now(),ct=pt.name.split(".").pop()||"",mn=`public/${t}/${$.type}/${Jt}_${hn}${ct?"."+ct:""}`;console.log(":",mn);const{data:pn,error:tn}=await Me.storage.from("embodys").upload(mn,pt,{cacheControl:"3600",upsert:!1});if(tn)throw console.error(":",tn),new Error(": "+tn.message);const{data:jn,error:vr}=await Me.from("embody_images").insert({description:I.description,path:mn,ref_id:$.id}).select("id, path").single();if(vr)throw console.error("embody-images:",vr),new Error("images: "+vr.message);return console.log(":",jn),{insertedDataId:jn.id,fileName:mn}});const Je=await Promise.all(Le);let st=Je.map(pt=>pt.insertedDataId),It=Je.map(pt=>({path:pt.fileName}));console.log("IDs:",st),console.log(":",It),P({...$,images:It}),n(!1),M()}},ae=async()=>{try{if(!$.prompt){alert("");return}alert("..."),await new Promise(oe=>setTimeout(oe,2e3)),alert(`
AI`)}catch(oe){console.error(":",oe),alert("")}},le=async()=>{if(!I.name.trim()){alert("");return}if(!I.prompt.trim()){alert("");return}if(!I.description.trim()){alert("");return}if(!I.project_id&&(I.project_id=globalData.projectId||localStorage.getItem("projectId"),!I.project_id)){alert("ID"),W(!1);return}try{let oe=I.pic,_e="";if(k){const It=Date.now(),pt=k.name.split(".").pop()||"";_e=`${I.project_id}/${I.type}s/${It}${pt?"."+pt:""}`,console.log(":",_e);const{data:hn,error:Jt}=await Me.storage.from("embodys").upload(_e,k,{cacheControl:"3600",upsert:!1});if(Jt)throw console.error(":",Jt),new Error(": "+Jt.message);const{data:{publicUrl:ct}}=await Me.storage.from("embodys").getPublicUrl(_e);oe=ct,console.log("URL:",oe)}const Le={...I,pic:_e};console.log(":",Le);const{data:Je,error:st}=await Me.from("embodys").insert([Le]);if(st)throw console.error(":",st),st;G(It=>!It),W(!1),Y({project_id:globalData.projectId||localStorage.getItem("projectId"),type:"scene",name:"",prompt:"",description:"",pic:""}),z(null),q(""),document.getElementById("embody-file")&&(document.getElementById("embody-file").value=""),alert("")}catch(oe){console.error(":",oe),alert(""+(oe.message||""))}},Z=async(oe,_e)=>{if(window.confirm(`${_e==="scene"?"":_e==="character"?"":""}`))try{const{error:Le}=await Me.from("embodys").delete().eq("id",oe);if(Le)throw Le;console.log(":",oe),M()}catch(Le){console.error(":",Le)}},pe=(()=>{const oe=C.filter(Je=>Je.type==="scene").length,_e=C.filter(Je=>Je.type==="character").length,Le=C.filter(Je=>Je.type==="item").length;return{scene:oe,character:_e,item:Le,all:oe+_e+Le}})(),ve=H(s,"scene"),be=H(l,"character"),De=H(d,"item");return _.jsxs("div",{className:"embody-container",children:[_.jsxs("div",{className:"embody-left-panel",children:[_.jsxs("div",{className:"embody-header",children:[_.jsxs("div",{className:"header-left",children:[_.jsx("h2",{children:""}),_.jsxs("p",{className:"total-count",children:[E," -  ",pe.all," "]})]}),_.jsxs("div",{className:"header-right",children:[_.jsx("input",{type:"file",multiple:!0,ref:O,style:{display:"none"},onChange:ge}),_.jsx("div",{className:"search-bar",children:_.jsx("input",{type:"text",placeholder:"...",value:h,onChange:oe=>g(oe.target.value)})})]})]}),_.jsxs("div",{className:"category-filter",children:[_.jsxs("button",{className:`filter-btn ${p==="all"?"active":""}`,onClick:()=>v("all"),children:[" (",pe.all,")"]}),_.jsxs("button",{className:`filter-btn ${p==="scene"?"active":""}`,onClick:()=>v("scene"),children:[" (",pe.scene,")"]}),_.jsxs("button",{className:`filter-btn ${p==="character"?"active":""}`,onClick:()=>v("character"),children:[" (",pe.character,")"]}),_.jsxs("button",{className:`filter-btn ${p==="item"?"active":""}`,onClick:()=>v("item"),children:[" (",pe.item,")"]}),_.jsx("button",{onClick:()=>W(!0),className:"add-embody-btn",children:""})]}),_.jsx("div",{className:"embody-content",children:b?_.jsxs("div",{className:"loading-container",children:[_.jsx("div",{className:"loading-spinner"}),_.jsx("p",{children:"..."})]}):w?_.jsxs("div",{className:"error-container",children:[_.jsx("p",{className:"error-message",children:w}),_.jsx("button",{className:"retry-btn",onClick:M,children:""})]}):_.jsxs(_.Fragment,{children:[(p==="all"||p==="scene")&&ve.length>0&&_.jsxs("div",{className:"category-section",children:[_.jsx("h3",{className:"section-title",children:""}),_.jsx("div",{className:"card-grid",children:ve.map(oe=>_.jsx(ld,{id:oe.id,type:"scene",name:oe.name,pic:oe.embody_images,description:oe.description,onEdit:()=>B(oe.id),onDelete:()=>Z(oe.id,"scene")},oe.id))})]}),(p==="all"||p==="character")&&be.length>0&&_.jsxs("div",{className:"category-section",children:[_.jsx("h3",{className:"section-title",children:""}),_.jsx("div",{className:"card-grid",children:be.map(oe=>_.jsx(ld,{id:oe.id,type:"character",name:oe.name,pic:oe.embody_images,description:oe.description,onEdit:()=>B(oe.id),onDelete:()=>Z(oe.id,"character")},oe.id))})]}),(p==="all"||p==="item")&&De.length>0&&_.jsxs("div",{className:"category-section",children:[_.jsx("h3",{className:"section-title",children:""}),_.jsx("div",{className:"card-grid",children:De.map(oe=>_.jsx(ld,{id:oe.id,type:"item",name:oe.name,pic:oe.embody_images,description:oe.description,onEdit:()=>B(oe.id),onDelete:()=>Z(oe.id,"item")},oe.id))})]}),(p==="all"&&pe.all===0||p==="scene"&&ve.length===0||p==="character"&&be.length===0||p==="item"&&De.length===0)&&_.jsx("div",{className:"empty-container",children:_.jsx("p",{children:""})})]})})]}),_.jsx("div",{className:"embody-right-panel",children:j?_.jsxs("div",{className:"edit-panel",children:[_.jsxs("div",{className:"form-group",children:[_.jsx("label",{htmlFor:"edit-name",children:""}),_.jsx("input",{id:"edit-name",type:"text",value:$.name,onChange:oe=>P({...$,name:oe.target.value}),placeholder:""})]}),_.jsxs("div",{className:"form-group",children:[_.jsx("label",{htmlFor:"edit-type",children:""}),_.jsxs("select",{id:"edit-type",value:$.type,onChange:oe=>P({...$,type:oe.target.value}),children:[_.jsx("option",{value:"scene",children:""}),_.jsx("option",{value:"character",children:""}),_.jsx("option",{value:"item",children:""})]})]}),_.jsxs("div",{className:"form-group",children:[_.jsx("label",{htmlFor:"edit-description",children:""}),_.jsx("textarea",{id:"edit-description",value:$.description,onChange:oe=>P({...$,description:oe.target.value}),placeholder:"",rows:"3"})]}),_.jsxs("div",{className:"form-group",children:[_.jsx("label",{htmlFor:"edit-prompt",children:""}),_.jsx("textarea",{id:"edit-prompt",value:$.prompt,onChange:oe=>P({...$,prompt:oe.target.value}),placeholder:"AI",rows:"4"}),_.jsx("button",{className:"prompt-generate-btn",onClick:ee,children:""})]}),_.jsx("div",{className:"form-group",children:_.jsx("div",{className:"preview-images-container",children:$.embody_images.map((oe,_e)=>_.jsx("div",{className:"small-preview-image",children:_.jsx("img",{src:gi+oe.path,alt:$.name})},_e))})}),$.pic&&_.jsx("div",{className:"preview-image",children:_.jsx("img",{src:gi+$.pic,alt:$.name})}),_.jsxs("button",{className:"",onClick:he,disabled:e,children:[" ",e?"...":""]}),_.jsx("button",{className:"generate-image-btn",onClick:ae,children:"AI"}),_.jsx("button",{className:"save-btn",onClick:Q,children:""}),_.jsx("button",{className:"cancel-btn",onClick:()=>D(null),children:""})]}):_.jsx("div",{className:"empty-edit-panel",children:_.jsx("p",{children:""})})}),L&&_.jsx("div",{className:"modal-overlay",onClick:()=>W(!1),children:_.jsxs("div",{className:"modal-content",onClick:oe=>oe.stopPropagation(),children:[_.jsxs("div",{className:"modal-header",children:[_.jsx("h3",{children:""}),_.jsx("button",{className:"close-btn",onClick:()=>W(!1),children:""})]}),_.jsxs("div",{className:"modal-body",children:[_.jsxs("div",{className:"form-group",children:[_.jsx("label",{htmlFor:"embody-type",children:""}),_.jsxs("select",{id:"embody-type",value:I.type,onChange:oe=>Y({...I,type:oe.target.value}),children:[_.jsx("option",{value:"scene",children:""}),_.jsx("option",{value:"character",children:""}),_.jsx("option",{value:"item",children:""})]})]}),_.jsxs("div",{className:"form-group",children:[_.jsx("label",{htmlFor:"embody-name",children:""}),_.jsx("input",{type:"text",id:"embody-name",value:I.name,onChange:oe=>Y({...I,name:oe.target.value}),placeholder:""})]}),_.jsxs("div",{className:"form-group",children:[_.jsx("label",{htmlFor:"embody-prompt",children:""}),_.jsx("textarea",{id:"embody-prompt",value:I.prompt,onChange:oe=>Y({...I,prompt:oe.target.value}),placeholder:"",rows:"3"})]}),_.jsxs("div",{className:"form-group",children:[_.jsx("label",{htmlFor:"embody-description",children:""}),_.jsx("textarea",{id:"embody-description",value:I.description,onChange:oe=>Y({...I,description:oe.target.value}),placeholder:"",rows:"4"})]}),_.jsxs("div",{className:"form-group",children:[_.jsx("label",{children:""}),_.jsxs("div",{className:"file-upload-container",children:[_.jsx("input",{type:"file",multiple:!0,id:"embody-file",accept:"image/*",onChange:oe=>{const _e=oe.target.files[0];if(z(_e),_e){const Le=URL.createObjectURL(_e);q(Le)}else q("")},style:{display:"none"}}),_.jsx("button",{type:"button",className:"file-upload-btn",onClick:()=>document.getElementById("embody-file").click(),children:k?k.name:""}),V&&_.jsxs("div",{className:"image-preview",children:[_.jsx("img",{src:V,alt:""}),_.jsx("button",{type:"button",className:"remove-image-btn",onClick:()=>{z(null),q(""),document.getElementById("embody-file").value=""},children:""})]})]})]})]}),_.jsxs("div",{className:"modal-footer",children:[_.jsx("button",{className:"cancel-btn",onClick:()=>W(!1),children:""}),_.jsx("button",{className:"save-btn",onClick:()=>le(),children:""})]})]})})]})}function g4(){const[t,e]=R.useState(null),[n,s]=R.useState(!1),[a,l]=R.useState("");R.useEffect(()=>{const d=async()=>{const{data:{user:h}}=await Me.auth.getUser();e(h)},{data:f}=Me.auth.onAuthStateChange((h,g)=>{e(g?.user||null)});return d(),Qt.on("StartEditorMode",()=>{console.log(":"),c(!0)}),Qt.on("EndEditorMode",()=>{console.log(""),c(!1)}),Qt.on("showLargeImageModal",h=>{s(!0),l(h)}),()=>{}},[]);function c(d){const f=document.documentElement;d?(f.style.setProperty("--left-panel-width","40px"),f.style.setProperty("--logo-text-display","none")):(f.style.setProperty("--left-panel-width","200px"),f.style.setProperty("--logo-text-display","block"))}return c(!0),_.jsx($k,{children:_.jsxs(dR,{children:[_.jsxs("div",{className:"layout-container",children:[_.jsxs("div",{className:"left-panel",children:[_.jsxs(_i,{to:"/",className:"home-logo",children:[_.jsx("img",{className:"home-logo-img",src:"./vite.svg",alt:"home"}),_.jsx("p",{className:"home-logo-text",children:"AI"})]}),_.jsxs("div",{className:"nav-items",children:[_.jsxs(_i,{to:"/dashboard",className:"nav-item",title:"",children:[_.jsx("img",{className:"nav-item-icon",src:"./home.png",alt:""}),_.jsx("span",{children:""})]}),_.jsxs(_i,{to:"/embody",className:"nav-item",title:"",children:[_.jsx("img",{className:"nav-item-icon",src:"./layers.png",alt:""}),_.jsx("span",{children:"  "})]})]}),_.jsx(Ik,{})]}),_.jsx("div",{className:"right-panel",children:_.jsxs(qO,{children:[_.jsx(Ms,{path:"/",element:_.jsx(Hk,{})}),_.jsx(Ms,{path:"/editor",element:_.jsx(m4,{})}),_.jsx(Ms,{path:"/embody",element:_.jsx(p4,{})}),_.jsx(Ms,{path:"/login",element:_.jsx(Lk,{})}),_.jsx(Ms,{path:"/register",element:_.jsx(zk,{})}),_.jsx(Ms,{path:"/dashboard",element:_.jsx(Pk,{})}),_.jsx(Ms,{path:"/profile",element:_.jsx(qk,{})})]})})]}),n&&_.jsxs("div",{className:"large-image-modal",children:[_.jsx("img",{src:a,alt:"Large Character Preview"}),_.jsx("button",{onClick:()=>s(!1),children:""})]})]})})}JN.createRoot(document.getElementById("root")).render(_.jsx(R.StrictMode,{children:_.jsx(g4,{})}));
