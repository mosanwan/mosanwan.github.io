function HN(t,e){for(var n=0;n<e.length;n++){const s=e[n];if(typeof s!="string"&&!Array.isArray(s)){for(const a in s)if(a!=="default"&&!(a in t)){const l=Object.getOwnPropertyDescriptor(s,a);l&&Object.defineProperty(t,a,l.get?l:{enumerable:!0,get:()=>s[a]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function n(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(a){if(a.ep)return;a.ep=!0;const l=n(a);fetch(a.href,l)}})();function Wd(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Gx(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var n=function s(){var a=!1;try{a=this instanceof s}catch{}return a?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(s){var a=Object.getOwnPropertyDescriptor(t,s);Object.defineProperty(n,s,a.get?a:{enumerable:!0,get:function(){return t[s]}})}),n}var Lm={exports:{}},Wo={};var r_;function VN(){if(r_)return Wo;r_=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(s,a,l){var c=null;if(l!==void 0&&(c=""+l),a.key!==void 0&&(c=""+a.key),"key"in a){l={};for(var d in a)d!=="key"&&(l[d]=a[d])}else l=a;return a=l.ref,{$$typeof:t,type:s,key:c,ref:a!==void 0?a:null,props:l}}return Wo.Fragment=e,Wo.jsx=n,Wo.jsxs=n,Wo}var s_;function FN(){return s_||(s_=1,Lm.exports=VN()),Lm.exports}var b=FN(),zm={exports:{}},Le={};var i_;function YN(){if(i_)return Le;i_=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),p=Symbol.for("react.activity"),v=Symbol.iterator;function _(k){return k===null||typeof k!="object"?null:(k=v&&k[v]||k["@@iterator"],typeof k=="function"?k:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,S={};function C(k,B,W){this.props=k,this.context=B,this.refs=S,this.updater=W||x}C.prototype.isReactComponent={},C.prototype.setState=function(k,B){if(typeof k!="object"&&typeof k!="function"&&k!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,k,B,"setState")},C.prototype.forceUpdate=function(k){this.updater.enqueueForceUpdate(this,k,"forceUpdate")};function N(){}N.prototype=C.prototype;function E(k,B,W){this.props=k,this.context=B,this.refs=S,this.updater=W||x}var A=E.prototype=new N;A.constructor=E,w(A,C.prototype),A.isPureReactComponent=!0;var j=Array.isArray;function R(){}var D={H:null,A:null,T:null,S:null},I=Object.prototype.hasOwnProperty;function q(k,B,W){var ee=W.ref;return{$$typeof:t,type:k,key:B,ref:ee!==void 0?ee:null,props:W}}function Q(k,B){return q(k.type,B,k.props)}function G(k){return typeof k=="object"&&k!==null&&k.$$typeof===t}function L(k){var B={"=":"=0",":":"=2"};return"$"+k.replace(/[=:]/g,function(W){return B[W]})}var X=/\/+/g;function $(k,B){return typeof k=="object"&&k!==null&&k.key!=null?L(""+k.key):B.toString(36)}function F(k){switch(k.status){case"fulfilled":return k.value;case"rejected":throw k.reason;default:switch(typeof k.status=="string"?k.then(R,R):(k.status="pending",k.then(function(B){k.status==="pending"&&(k.status="fulfilled",k.value=B)},function(B){k.status==="pending"&&(k.status="rejected",k.reason=B)})),k.status){case"fulfilled":return k.value;case"rejected":throw k.reason}}throw k}function M(k,B,W,ee,he){var ge=typeof k;(ge==="undefined"||ge==="boolean")&&(k=null);var Z=!1;if(k===null)Z=!0;else switch(ge){case"bigint":case"string":case"number":Z=!0;break;case"object":switch(k.$$typeof){case t:case e:Z=!0;break;case g:return Z=k._init,M(Z(k._payload),B,W,ee,he)}}if(Z)return he=he(k),Z=ee===""?"."+$(k,0):ee,j(he)?(W="",Z!=null&&(W=Z.replace(X,"$&/")+"/"),M(he,B,W,"",function(de){return de})):he!=null&&(G(he)&&(he=Q(he,W+(he.key==null||k&&k.key===he.key?"":(""+he.key).replace(X,"$&/")+"/")+Z)),B.push(he)),1;Z=0;var ie=ee===""?".":ee+":";if(j(k))for(var oe=0;oe<k.length;oe++)ee=k[oe],ge=ie+$(ee,oe),Z+=M(ee,B,W,ge,he);else if(oe=_(k),typeof oe=="function")for(k=oe.call(k),oe=0;!(ee=k.next()).done;)ee=ee.value,ge=ie+$(ee,oe++),Z+=M(ee,B,W,ge,he);else if(ge==="object"){if(typeof k.then=="function")return M(F(k),B,W,ee,he);throw B=String(k),Error("Objects are not valid as a React child (found: "+(B==="[object Object]"?"object with keys {"+Object.keys(k).join(", ")+"}":B)+"). If you meant to render a collection of children, use an array instead.")}return Z}function z(k,B,W){if(k==null)return k;var ee=[],he=0;return M(k,ee,"","",function(ge){return B.call(W,ge,he++)}),ee}function H(k){if(k._status===-1){var B=k._result;B=B(),B.then(function(W){(k._status===0||k._status===-1)&&(k._status=1,k._result=W)},function(W){(k._status===0||k._status===-1)&&(k._status=2,k._result=W)}),k._status===-1&&(k._status=0,k._result=B)}if(k._status===1)return k._result.default;throw k._result}var P=typeof reportError=="function"?reportError:function(k){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var B=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof k=="object"&&k!==null&&typeof k.message=="string"?String(k.message):String(k),error:k});if(!window.dispatchEvent(B))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",k);return}console.error(k)},V={map:z,forEach:function(k,B,W){z(k,function(){B.apply(this,arguments)},W)},count:function(k){var B=0;return z(k,function(){B++}),B},toArray:function(k){return z(k,function(B){return B})||[]},only:function(k){if(!G(k))throw Error("React.Children.only expected to receive a single React element child.");return k}};return Le.Activity=p,Le.Children=V,Le.Component=C,Le.Fragment=n,Le.Profiler=a,Le.PureComponent=E,Le.StrictMode=s,Le.Suspense=f,Le.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=D,Le.__COMPILER_RUNTIME={__proto__:null,c:function(k){return D.H.useMemoCache(k)}},Le.cache=function(k){return function(){return k.apply(null,arguments)}},Le.cacheSignal=function(){return null},Le.cloneElement=function(k,B,W){if(k==null)throw Error("The argument must be a React element, but you passed "+k+".");var ee=w({},k.props),he=k.key;if(B!=null)for(ge in B.key!==void 0&&(he=""+B.key),B)!I.call(B,ge)||ge==="key"||ge==="__self"||ge==="__source"||ge==="ref"&&B.ref===void 0||(ee[ge]=B[ge]);var ge=arguments.length-2;if(ge===1)ee.children=W;else if(1<ge){for(var Z=Array(ge),ie=0;ie<ge;ie++)Z[ie]=arguments[ie+2];ee.children=Z}return q(k.type,he,ee)},Le.createContext=function(k){return k={$$typeof:c,_currentValue:k,_currentValue2:k,_threadCount:0,Provider:null,Consumer:null},k.Provider=k,k.Consumer={$$typeof:l,_context:k},k},Le.createElement=function(k,B,W){var ee,he={},ge=null;if(B!=null)for(ee in B.key!==void 0&&(ge=""+B.key),B)I.call(B,ee)&&ee!=="key"&&ee!=="__self"&&ee!=="__source"&&(he[ee]=B[ee]);var Z=arguments.length-2;if(Z===1)he.children=W;else if(1<Z){for(var ie=Array(Z),oe=0;oe<Z;oe++)ie[oe]=arguments[oe+2];he.children=ie}if(k&&k.defaultProps)for(ee in Z=k.defaultProps,Z)he[ee]===void 0&&(he[ee]=Z[ee]);return q(k,ge,he)},Le.createRef=function(){return{current:null}},Le.forwardRef=function(k){return{$$typeof:d,render:k}},Le.isValidElement=G,Le.lazy=function(k){return{$$typeof:g,_payload:{_status:-1,_result:k},_init:H}},Le.memo=function(k,B){return{$$typeof:h,type:k,compare:B===void 0?null:B}},Le.startTransition=function(k){var B=D.T,W={};D.T=W;try{var ee=k(),he=D.S;he!==null&&he(W,ee),typeof ee=="object"&&ee!==null&&typeof ee.then=="function"&&ee.then(R,P)}catch(ge){P(ge)}finally{B!==null&&W.types!==null&&(B.types=W.types),D.T=B}},Le.unstable_useCacheRefresh=function(){return D.H.useCacheRefresh()},Le.use=function(k){return D.H.use(k)},Le.useActionState=function(k,B,W){return D.H.useActionState(k,B,W)},Le.useCallback=function(k,B){return D.H.useCallback(k,B)},Le.useContext=function(k){return D.H.useContext(k)},Le.useDebugValue=function(){},Le.useDeferredValue=function(k,B){return D.H.useDeferredValue(k,B)},Le.useEffect=function(k,B){return D.H.useEffect(k,B)},Le.useEffectEvent=function(k){return D.H.useEffectEvent(k)},Le.useId=function(){return D.H.useId()},Le.useImperativeHandle=function(k,B,W){return D.H.useImperativeHandle(k,B,W)},Le.useInsertionEffect=function(k,B){return D.H.useInsertionEffect(k,B)},Le.useLayoutEffect=function(k,B){return D.H.useLayoutEffect(k,B)},Le.useMemo=function(k,B){return D.H.useMemo(k,B)},Le.useOptimistic=function(k,B){return D.H.useOptimistic(k,B)},Le.useReducer=function(k,B,W){return D.H.useReducer(k,B,W)},Le.useRef=function(k){return D.H.useRef(k)},Le.useState=function(k){return D.H.useState(k)},Le.useSyncExternalStore=function(k,B,W){return D.H.useSyncExternalStore(k,B,W)},Le.useTransition=function(){return D.H.useTransition()},Le.version="19.2.0",Le}var a_;function Xl(){return a_||(a_=1,zm.exports=YN()),zm.exports}var O=Xl();const GN=Wd(O);var Bm={exports:{}},Jo={},Pm={exports:{}},qm={};var o_;function XN(){return o_||(o_=1,(function(t){function e(M,z){var H=M.length;M.push(z);e:for(;0<H;){var P=H-1>>>1,V=M[P];if(0<a(V,z))M[P]=z,M[H]=V,H=P;else break e}}function n(M){return M.length===0?null:M[0]}function s(M){if(M.length===0)return null;var z=M[0],H=M.pop();if(H!==z){M[0]=H;e:for(var P=0,V=M.length,k=V>>>1;P<k;){var B=2*(P+1)-1,W=M[B],ee=B+1,he=M[ee];if(0>a(W,H))ee<V&&0>a(he,W)?(M[P]=he,M[ee]=H,P=ee):(M[P]=W,M[B]=H,P=B);else if(ee<V&&0>a(he,H))M[P]=he,M[ee]=H,P=ee;else break e}}return z}function a(M,z){var H=M.sortIndex-z.sortIndex;return H!==0?H:M.id-z.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;t.unstable_now=function(){return l.now()}}else{var c=Date,d=c.now();t.unstable_now=function(){return c.now()-d}}var f=[],h=[],g=1,p=null,v=3,_=!1,x=!1,w=!1,S=!1,C=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;function A(M){for(var z=n(h);z!==null;){if(z.callback===null)s(h);else if(z.startTime<=M)s(h),z.sortIndex=z.expirationTime,e(f,z);else break;z=n(h)}}function j(M){if(w=!1,A(M),!x)if(n(f)!==null)x=!0,R||(R=!0,L());else{var z=n(h);z!==null&&F(j,z.startTime-M)}}var R=!1,D=-1,I=5,q=-1;function Q(){return S?!0:!(t.unstable_now()-q<I)}function G(){if(S=!1,R){var M=t.unstable_now();q=M;var z=!0;try{e:{x=!1,w&&(w=!1,N(D),D=-1),_=!0;var H=v;try{t:{for(A(M),p=n(f);p!==null&&!(p.expirationTime>M&&Q());){var P=p.callback;if(typeof P=="function"){p.callback=null,v=p.priorityLevel;var V=P(p.expirationTime<=M);if(M=t.unstable_now(),typeof V=="function"){p.callback=V,A(M),z=!0;break t}p===n(f)&&s(f),A(M)}else s(f);p=n(f)}if(p!==null)z=!0;else{var k=n(h);k!==null&&F(j,k.startTime-M),z=!1}}break e}finally{p=null,v=H,_=!1}z=void 0}}finally{z?L():R=!1}}}var L;if(typeof E=="function")L=function(){E(G)};else if(typeof MessageChannel<"u"){var X=new MessageChannel,$=X.port2;X.port1.onmessage=G,L=function(){$.postMessage(null)}}else L=function(){C(G,0)};function F(M,z){D=C(function(){M(t.unstable_now())},z)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(M){M.callback=null},t.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<M?Math.floor(1e3/M):5},t.unstable_getCurrentPriorityLevel=function(){return v},t.unstable_next=function(M){switch(v){case 1:case 2:case 3:var z=3;break;default:z=v}var H=v;v=z;try{return M()}finally{v=H}},t.unstable_requestPaint=function(){S=!0},t.unstable_runWithPriority=function(M,z){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var H=v;v=M;try{return z()}finally{v=H}},t.unstable_scheduleCallback=function(M,z,H){var P=t.unstable_now();switch(typeof H=="object"&&H!==null?(H=H.delay,H=typeof H=="number"&&0<H?P+H:P):H=P,M){case 1:var V=-1;break;case 2:V=250;break;case 5:V=1073741823;break;case 4:V=1e4;break;default:V=5e3}return V=H+V,M={id:g++,callback:z,priorityLevel:M,startTime:H,expirationTime:V,sortIndex:-1},H>P?(M.sortIndex=H,e(h,M),n(f)===null&&M===n(h)&&(w?(N(D),D=-1):w=!0,F(j,H-P))):(M.sortIndex=V,e(f,M),x||_||(x=!0,R||(R=!0,L()))),M},t.unstable_shouldYield=Q,t.unstable_wrapCallback=function(M){var z=v;return function(){var H=v;v=z;try{return M.apply(this,arguments)}finally{v=H}}}})(qm)),qm}var l_;function KN(){return l_||(l_=1,Pm.exports=XN()),Pm.exports}var Hm={exports:{}},Qt={};var c_;function QN(){if(c_)return Qt;c_=1;var t=Xl();function e(f){var h="https://react.dev/errors/"+f;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)h+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+f+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(f,h,g){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:p==null?null:""+p,children:f,containerInfo:h,implementation:g}}var c=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(f,h){if(f==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return Qt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Qt.createPortal=function(f,h){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return l(f,h,null,g)},Qt.flushSync=function(f){var h=c.T,g=s.p;try{if(c.T=null,s.p=2,f)return f()}finally{c.T=h,s.p=g,s.d.f()}},Qt.preconnect=function(f,h){typeof f=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,s.d.C(f,h))},Qt.prefetchDNS=function(f){typeof f=="string"&&s.d.D(f)},Qt.preinit=function(f,h){if(typeof f=="string"&&h&&typeof h.as=="string"){var g=h.as,p=d(g,h.crossOrigin),v=typeof h.integrity=="string"?h.integrity:void 0,_=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;g==="style"?s.d.S(f,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:p,integrity:v,fetchPriority:_}):g==="script"&&s.d.X(f,{crossOrigin:p,integrity:v,fetchPriority:_,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},Qt.preinitModule=function(f,h){if(typeof f=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var g=d(h.as,h.crossOrigin);s.d.M(f,{crossOrigin:g,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&s.d.M(f)},Qt.preload=function(f,h){if(typeof f=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var g=h.as,p=d(g,h.crossOrigin);s.d.L(f,g,{crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},Qt.preloadModule=function(f,h){if(typeof f=="string")if(h){var g=d(h.as,h.crossOrigin);s.d.m(f,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:g,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else s.d.m(f)},Qt.requestFormReset=function(f){s.d.r(f)},Qt.unstable_batchedUpdates=function(f,h){return f(h)},Qt.useFormState=function(f,h,g){return c.H.useFormState(f,h,g)},Qt.useFormStatus=function(){return c.H.useHostTransitionStatus()},Qt.version="19.2.0",Qt}var u_;function Xx(){if(u_)return Hm.exports;u_=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Hm.exports=QN(),Hm.exports}var d_;function WN(){if(d_)return Jo;d_=1;var t=KN(),e=Xl(),n=Xx();function s(r){var i="https://react.dev/errors/"+r;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)i+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+r+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function l(r){var i=r,o=r;if(r.alternate)for(;i.return;)i=i.return;else{r=i;do i=r,(i.flags&4098)!==0&&(o=i.return),r=i.return;while(r)}return i.tag===3?o:null}function c(r){if(r.tag===13){var i=r.memoizedState;if(i===null&&(r=r.alternate,r!==null&&(i=r.memoizedState)),i!==null)return i.dehydrated}return null}function d(r){if(r.tag===31){var i=r.memoizedState;if(i===null&&(r=r.alternate,r!==null&&(i=r.memoizedState)),i!==null)return i.dehydrated}return null}function f(r){if(l(r)!==r)throw Error(s(188))}function h(r){var i=r.alternate;if(!i){if(i=l(r),i===null)throw Error(s(188));return i!==r?null:r}for(var o=r,u=i;;){var m=o.return;if(m===null)break;var y=m.alternate;if(y===null){if(u=m.return,u!==null){o=u;continue}break}if(m.child===y.child){for(y=m.child;y;){if(y===o)return f(m),r;if(y===u)return f(m),i;y=y.sibling}throw Error(s(188))}if(o.return!==u.return)o=m,u=y;else{for(var T=!1,U=m.child;U;){if(U===o){T=!0,o=m,u=y;break}if(U===u){T=!0,u=m,o=y;break}U=U.sibling}if(!T){for(U=y.child;U;){if(U===o){T=!0,o=y,u=m;break}if(U===u){T=!0,u=y,o=m;break}U=U.sibling}if(!T)throw Error(s(189))}}if(o.alternate!==u)throw Error(s(190))}if(o.tag!==3)throw Error(s(188));return o.stateNode.current===o?r:i}function g(r){var i=r.tag;if(i===5||i===26||i===27||i===6)return r;for(r=r.child;r!==null;){if(i=g(r),i!==null)return i;r=r.sibling}return null}var p=Object.assign,v=Symbol.for("react.element"),_=Symbol.for("react.transitional.element"),x=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),N=Symbol.for("react.consumer"),E=Symbol.for("react.context"),A=Symbol.for("react.forward_ref"),j=Symbol.for("react.suspense"),R=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),I=Symbol.for("react.lazy"),q=Symbol.for("react.activity"),Q=Symbol.for("react.memo_cache_sentinel"),G=Symbol.iterator;function L(r){return r===null||typeof r!="object"?null:(r=G&&r[G]||r["@@iterator"],typeof r=="function"?r:null)}var X=Symbol.for("react.client.reference");function $(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===X?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case w:return"Fragment";case C:return"Profiler";case S:return"StrictMode";case j:return"Suspense";case R:return"SuspenseList";case q:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case x:return"Portal";case E:return r.displayName||"Context";case N:return(r._context.displayName||"Context")+".Consumer";case A:var i=r.render;return r=r.displayName,r||(r=i.displayName||i.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case D:return i=r.displayName||null,i!==null?i:$(r.type)||"Memo";case I:i=r._payload,r=r._init;try{return $(r(i))}catch{}}return null}var F=Array.isArray,M=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,z=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,H={pending:!1,data:null,method:null,action:null},P=[],V=-1;function k(r){return{current:r}}function B(r){0>V||(r.current=P[V],P[V]=null,V--)}function W(r,i){V++,P[V]=r.current,r.current=i}var ee=k(null),he=k(null),ge=k(null),Z=k(null);function ie(r,i){switch(W(ge,i),W(he,r),W(ee,null),i.nodeType){case 9:case 11:r=(r=i.documentElement)&&(r=r.namespaceURI)?Ab(r):0;break;default:if(r=i.tagName,i=i.namespaceURI)i=Ab(i),r=Tb(i,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}B(ee),W(ee,r)}function oe(){B(ee),B(he),B(ge)}function de(r){r.memoizedState!==null&&W(Z,r);var i=ee.current,o=Tb(i,r.type);i!==o&&(W(he,r),W(ee,o))}function pe(r){he.current===r&&(B(ee),B(he)),Z.current===r&&(B(Z),Go._currentValue=H)}var be,_e;function Ue(r){if(be===void 0)try{throw Error()}catch(o){var i=o.stack.trim().match(/\n( *(at )?)/);be=i&&i[1]||"",_e=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+be+r+_e}var ce=!1;function ve(r,i){if(!r||ce)return"";ce=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(i){var fe=function(){throw Error()};if(Object.defineProperty(fe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(fe,[])}catch(ae){var se=ae}Reflect.construct(r,[],fe)}else{try{fe.call()}catch(ae){se=ae}r.call(fe.prototype)}}else{try{throw Error()}catch(ae){se=ae}(fe=r())&&typeof fe.catch=="function"&&fe.catch(function(){})}}catch(ae){if(ae&&se&&typeof ae.stack=="string")return[ae.stack,se.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var m=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");m&&m.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var y=u.DetermineComponentFrameRoot(),T=y[0],U=y[1];if(T&&U){var Y=T.split(`
`),ne=U.split(`
`);for(m=u=0;u<Y.length&&!Y[u].includes("DetermineComponentFrameRoot");)u++;for(;m<ne.length&&!ne[m].includes("DetermineComponentFrameRoot");)m++;if(u===Y.length||m===ne.length)for(u=Y.length-1,m=ne.length-1;1<=u&&0<=m&&Y[u]!==ne[m];)m--;for(;1<=u&&0<=m;u--,m--)if(Y[u]!==ne[m]){if(u!==1||m!==1)do if(u--,m--,0>m||Y[u]!==ne[m]){var le=`
`+Y[u].replace(" at new "," at ");return r.displayName&&le.includes("<anonymous>")&&(le=le.replace("<anonymous>",r.displayName)),le}while(1<=u&&0<=m);break}}}finally{ce=!1,Error.prepareStackTrace=o}return(o=r?r.displayName||r.name:"")?Ue(o):""}function Me(r,i){switch(r.tag){case 26:case 27:case 5:return Ue(r.type);case 16:return Ue("Lazy");case 13:return r.child!==i&&i!==null?Ue("Suspense Fallback"):Ue("Suspense");case 19:return Ue("SuspenseList");case 0:case 15:return ve(r.type,!1);case 11:return ve(r.type.render,!1);case 1:return ve(r.type,!0);case 31:return Ue("Activity");default:return""}}function Je(r){try{var i="",o=null;do i+=Me(r,o),o=r,r=r.return;while(r);return i}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var at=Object.prototype.hasOwnProperty,Lt=t.unstable_scheduleCallback,ut=t.unstable_cancelCallback,mn=t.unstable_shouldYield,Zt=t.unstable_requestPaint,dt=t.unstable_now,pn=t.unstable_getCurrentPriorityLevel,kn=t.unstable_ImmediatePriority,nn=t.unstable_UserBlockingPriority,gn=t.unstable_NormalPriority,_r=t.unstable_LowPriority,ts=t.unstable_IdlePriority,to=t.log,no=t.unstable_setDisableYieldValue,Vn=null,zt=null;function me(r){if(typeof to=="function"&&no(r),zt&&typeof zt.setStrictMode=="function")try{zt.setStrictMode(Vn,r)}catch{}}var Ee=Math.clz32?Math.clz32:ot,ke=Math.log,Xe=Math.LN2;function ot(r){return r>>>=0,r===0?32:31-(ke(r)/Xe|0)|0}var ft=256,ns=262144,Mi=4194304;function wr(r){var i=r&42;if(i!==0)return i;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return r&261888;case 262144:case 524288:case 1048576:case 2097152:return r&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function Di(r,i,o){var u=r.pendingLanes;if(u===0)return 0;var m=0,y=r.suspendedLanes,T=r.pingedLanes;r=r.warmLanes;var U=u&134217727;return U!==0?(u=U&~y,u!==0?m=wr(u):(T&=U,T!==0?m=wr(T):o||(o=U&~r,o!==0&&(m=wr(o))))):(U=u&~y,U!==0?m=wr(U):T!==0?m=wr(T):o||(o=u&~r,o!==0&&(m=wr(o)))),m===0?0:i!==0&&i!==m&&(i&y)===0&&(y=m&-m,o=i&-i,y>=o||y===32&&(o&4194048)!==0)?i:m}function Vs(r,i){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&i)===0}function Tf(r,i){switch(r){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function cc(){var r=Mi;return Mi<<=1,(Mi&62914560)===0&&(Mi=4194304),r}function ro(r){for(var i=[],o=0;31>o;o++)i.push(r);return i}function Fs(r,i){r.pendingLanes|=i,i!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function Nf(r,i,o,u,m,y){var T=r.pendingLanes;r.pendingLanes=o,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=o,r.entangledLanes&=o,r.errorRecoveryDisabledLanes&=o,r.shellSuspendCounter=0;var U=r.entanglements,Y=r.expirationTimes,ne=r.hiddenUpdates;for(o=T&~o;0<o;){var le=31-Ee(o),fe=1<<le;U[le]=0,Y[le]=-1;var se=ne[le];if(se!==null)for(ne[le]=null,le=0;le<se.length;le++){var ae=se[le];ae!==null&&(ae.lane&=-536870913)}o&=~fe}u!==0&&uc(r,u,0),y!==0&&m===0&&r.tag!==0&&(r.suspendedLanes|=y&~(T&~i))}function uc(r,i,o){r.pendingLanes|=i,r.suspendedLanes&=~i;var u=31-Ee(i);r.entangledLanes|=i,r.entanglements[u]=r.entanglements[u]|1073741824|o&261930}function dc(r,i){var o=r.entangledLanes|=i;for(r=r.entanglements;o;){var u=31-Ee(o),m=1<<u;m&i|r[u]&i&&(r[u]|=i),o&=~m}}function fc(r,i){var o=i&-i;return o=(o&42)!==0?1:so(o),(o&(r.suspendedLanes|i))!==0?0:o}function so(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function io(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function hc(){var r=z.p;return r!==0?r:(r=window.event,r===void 0?32:Qb(r.type))}function mc(r,i){var o=z.p;try{return z.p=r,i()}finally{z.p=o}}var or=Math.random().toString(36).slice(2),jt="__reactFiber$"+or,Xt="__reactProps$"+or,xr="__reactContainer$"+or,Ui="__reactEvents$"+or,pc="__reactListeners$"+or,Of="__reactHandles$"+or,gc="__reactResources$"+or,Ys="__reactMarker$"+or;function ao(r){delete r[jt],delete r[Xt],delete r[Ui],delete r[pc],delete r[Of]}function rs(r){var i=r[jt];if(i)return i;for(var o=r.parentNode;o;){if(i=o[xr]||o[jt]){if(o=i.alternate,i.child!==null||o!==null&&o.child!==null)for(r=Db(r);r!==null;){if(o=r[jt])return o;r=Db(r)}return i}r=o,o=r.parentNode}return null}function ss(r){if(r=r[jt]||r[xr]){var i=r.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return r}return null}function is(r){var i=r.tag;if(i===5||i===26||i===27||i===6)return r.stateNode;throw Error(s(33))}function as(r){var i=r[gc];return i||(i=r[gc]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function xt(r){r[Ys]=!0}var yc=new Set,vc={};function Sr(r,i){os(r,i),os(r+"Capture",i)}function os(r,i){for(vc[r]=i,r=0;r<i.length;r++)yc.add(i[r])}var jf=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),oo={},bc={};function Rf(r){return at.call(bc,r)?!0:at.call(oo,r)?!1:jf.test(r)?bc[r]=!0:(oo[r]=!0,!1)}function Ii(r,i,o){if(Rf(i))if(o===null)r.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":r.removeAttribute(i);return;case"boolean":var u=i.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){r.removeAttribute(i);return}}r.setAttribute(i,""+o)}}function $i(r,i,o){if(o===null)r.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(i);return}r.setAttribute(i,""+o)}}function Fn(r,i,o,u){if(u===null)r.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(o);return}r.setAttributeNS(i,o,""+u)}}function rn(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function _c(r){var i=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function kf(r,i,o){var u=Object.getOwnPropertyDescriptor(r.constructor.prototype,i);if(!r.hasOwnProperty(i)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var m=u.get,y=u.set;return Object.defineProperty(r,i,{configurable:!0,get:function(){return m.call(this)},set:function(T){o=""+T,y.call(this,T)}}),Object.defineProperty(r,i,{enumerable:u.enumerable}),{getValue:function(){return o},setValue:function(T){o=""+T},stopTracking:function(){r._valueTracker=null,delete r[i]}}}}function Li(r){if(!r._valueTracker){var i=_c(r)?"checked":"value";r._valueTracker=kf(r,i,""+r[i])}}function wc(r){if(!r)return!1;var i=r._valueTracker;if(!i)return!0;var o=i.getValue(),u="";return r&&(u=_c(r)?r.checked?"true":"false":r.value),r=u,r!==o?(i.setValue(r),!0):!1}function zi(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var Mf=/[\n"\\]/g;function Kt(r){return r.replace(Mf,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function lo(r,i,o,u,m,y,T,U){r.name="",T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?r.type=T:r.removeAttribute("type"),i!=null?T==="number"?(i===0&&r.value===""||r.value!=i)&&(r.value=""+rn(i)):r.value!==""+rn(i)&&(r.value=""+rn(i)):T!=="submit"&&T!=="reset"||r.removeAttribute("value"),i!=null?Bi(r,T,rn(i)):o!=null?Bi(r,T,rn(o)):u!=null&&r.removeAttribute("value"),m==null&&y!=null&&(r.defaultChecked=!!y),m!=null&&(r.checked=m&&typeof m!="function"&&typeof m!="symbol"),U!=null&&typeof U!="function"&&typeof U!="symbol"&&typeof U!="boolean"?r.name=""+rn(U):r.removeAttribute("name")}function xc(r,i,o,u,m,y,T,U){if(y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(r.type=y),i!=null||o!=null){if(!(y!=="submit"&&y!=="reset"||i!=null)){Li(r);return}o=o!=null?""+rn(o):"",i=i!=null?""+rn(i):o,U||i===r.value||(r.value=i),r.defaultValue=i}u=u??m,u=typeof u!="function"&&typeof u!="symbol"&&!!u,r.checked=U?r.checked:!!u,r.defaultChecked=!!u,T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(r.name=T),Li(r)}function Bi(r,i,o){i==="number"&&zi(r.ownerDocument)===r||r.defaultValue===""+o||(r.defaultValue=""+o)}function Pi(r,i,o,u){if(r=r.options,i){i={};for(var m=0;m<o.length;m++)i["$"+o[m]]=!0;for(o=0;o<r.length;o++)m=i.hasOwnProperty("$"+r[o].value),r[o].selected!==m&&(r[o].selected=m),m&&u&&(r[o].defaultSelected=!0)}else{for(o=""+rn(o),i=null,m=0;m<r.length;m++){if(r[m].value===o){r[m].selected=!0,u&&(r[m].defaultSelected=!0);return}i!==null||r[m].disabled||(i=r[m])}i!==null&&(i.selected=!0)}}function wy(r,i,o){if(i!=null&&(i=""+rn(i),i!==r.value&&(r.value=i),o==null)){r.defaultValue!==i&&(r.defaultValue=i);return}r.defaultValue=o!=null?""+rn(o):""}function xy(r,i,o,u){if(i==null){if(u!=null){if(o!=null)throw Error(s(92));if(F(u)){if(1<u.length)throw Error(s(93));u=u[0]}o=u}o==null&&(o=""),i=o}o=rn(i),r.defaultValue=o,u=r.textContent,u===o&&u!==""&&u!==null&&(r.value=u),Li(r)}function qi(r,i){if(i){var o=r.firstChild;if(o&&o===r.lastChild&&o.nodeType===3){o.nodeValue=i;return}}r.textContent=i}var LA=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Sy(r,i,o){var u=i.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?u?r.setProperty(i,""):i==="float"?r.cssFloat="":r[i]="":u?r.setProperty(i,o):typeof o!="number"||o===0||LA.has(i)?i==="float"?r.cssFloat=o:r[i]=(""+o).trim():r[i]=o+"px"}function Ey(r,i,o){if(i!=null&&typeof i!="object")throw Error(s(62));if(r=r.style,o!=null){for(var u in o)!o.hasOwnProperty(u)||i!=null&&i.hasOwnProperty(u)||(u.indexOf("--")===0?r.setProperty(u,""):u==="float"?r.cssFloat="":r[u]="");for(var m in i)u=i[m],i.hasOwnProperty(m)&&o[m]!==u&&Sy(r,m,u)}else for(var y in i)i.hasOwnProperty(y)&&Sy(r,y,i[y])}function Df(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var zA=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),BA=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Sc(r){return BA.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}function Er(){}var Uf=null;function If(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Hi=null,Vi=null;function Cy(r){var i=ss(r);if(i&&(r=i.stateNode)){var o=r[Xt]||null;e:switch(r=i.stateNode,i.type){case"input":if(lo(r,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),i=o.name,o.type==="radio"&&i!=null){for(o=r;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+Kt(""+i)+'"][type="radio"]'),i=0;i<o.length;i++){var u=o[i];if(u!==r&&u.form===r.form){var m=u[Xt]||null;if(!m)throw Error(s(90));lo(u,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name)}}for(i=0;i<o.length;i++)u=o[i],u.form===r.form&&wc(u)}break e;case"textarea":wy(r,o.value,o.defaultValue);break e;case"select":i=o.value,i!=null&&Pi(r,!!o.multiple,i,!1)}}}var $f=!1;function Ay(r,i,o){if($f)return r(i,o);$f=!0;try{var u=r(i);return u}finally{if($f=!1,(Hi!==null||Vi!==null)&&(uu(),Hi&&(i=Hi,r=Vi,Vi=Hi=null,Cy(i),r)))for(i=0;i<r.length;i++)Cy(r[i])}}function co(r,i){var o=r.stateNode;if(o===null)return null;var u=o[Xt]||null;if(u===null)return null;o=u[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(r=r.type,u=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!u;break e;default:r=!1}if(r)return null;if(o&&typeof o!="function")throw Error(s(231,i,typeof o));return o}var Cr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Lf=!1;if(Cr)try{var uo={};Object.defineProperty(uo,"passive",{get:function(){Lf=!0}}),window.addEventListener("test",uo,uo),window.removeEventListener("test",uo,uo)}catch{Lf=!1}var ls=null,zf=null,Ec=null;function Ty(){if(Ec)return Ec;var r,i=zf,o=i.length,u,m="value"in ls?ls.value:ls.textContent,y=m.length;for(r=0;r<o&&i[r]===m[r];r++);var T=o-r;for(u=1;u<=T&&i[o-u]===m[y-u];u++);return Ec=m.slice(r,1<u?1-u:void 0)}function Cc(r){var i=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&i===13&&(r=13)):r=i,r===10&&(r=13),32<=r||r===13?r:0}function Ac(){return!0}function Ny(){return!1}function sn(r){function i(o,u,m,y,T){this._reactName=o,this._targetInst=m,this.type=u,this.nativeEvent=y,this.target=T,this.currentTarget=null;for(var U in r)r.hasOwnProperty(U)&&(o=r[U],this[U]=o?o(y):y[U]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?Ac:Ny,this.isPropagationStopped=Ny,this}return p(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Ac)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Ac)},persist:function(){},isPersistent:Ac}),i}var Gs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Tc=sn(Gs),fo=p({},Gs,{view:0,detail:0}),PA=sn(fo),Bf,Pf,ho,Nc=p({},fo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Hf,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==ho&&(ho&&r.type==="mousemove"?(Bf=r.screenX-ho.screenX,Pf=r.screenY-ho.screenY):Pf=Bf=0,ho=r),Bf)},movementY:function(r){return"movementY"in r?r.movementY:Pf}}),Oy=sn(Nc),qA=p({},Nc,{dataTransfer:0}),HA=sn(qA),VA=p({},fo,{relatedTarget:0}),qf=sn(VA),FA=p({},Gs,{animationName:0,elapsedTime:0,pseudoElement:0}),YA=sn(FA),GA=p({},Gs,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),XA=sn(GA),KA=p({},Gs,{data:0}),jy=sn(KA),QA={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},WA={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},JA={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ZA(r){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(r):(r=JA[r])?!!i[r]:!1}function Hf(){return ZA}var eT=p({},fo,{key:function(r){if(r.key){var i=QA[r.key]||r.key;if(i!=="Unidentified")return i}return r.type==="keypress"?(r=Cc(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?WA[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Hf,charCode:function(r){return r.type==="keypress"?Cc(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?Cc(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),tT=sn(eT),nT=p({},Nc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ry=sn(nT),rT=p({},fo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Hf}),sT=sn(rT),iT=p({},Gs,{propertyName:0,elapsedTime:0,pseudoElement:0}),aT=sn(iT),oT=p({},Nc,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),lT=sn(oT),cT=p({},Gs,{newState:0,oldState:0}),uT=sn(cT),dT=[9,13,27,32],Vf=Cr&&"CompositionEvent"in window,mo=null;Cr&&"documentMode"in document&&(mo=document.documentMode);var fT=Cr&&"TextEvent"in window&&!mo,ky=Cr&&(!Vf||mo&&8<mo&&11>=mo),My=" ",Dy=!1;function Uy(r,i){switch(r){case"keyup":return dT.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Iy(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var Fi=!1;function hT(r,i){switch(r){case"compositionend":return Iy(i);case"keypress":return i.which!==32?null:(Dy=!0,My);case"textInput":return r=i.data,r===My&&Dy?null:r;default:return null}}function mT(r,i){if(Fi)return r==="compositionend"||!Vf&&Uy(r,i)?(r=Ty(),Ec=zf=ls=null,Fi=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return ky&&i.locale!=="ko"?null:i.data;default:return null}}var pT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function $y(r){var i=r&&r.nodeName&&r.nodeName.toLowerCase();return i==="input"?!!pT[r.type]:i==="textarea"}function Ly(r,i,o,u){Hi?Vi?Vi.push(u):Vi=[u]:Hi=u,i=yu(i,"onChange"),0<i.length&&(o=new Tc("onChange","change",null,o,u),r.push({event:o,listeners:i}))}var po=null,go=null;function gT(r){_b(r,0)}function Oc(r){var i=is(r);if(wc(i))return r}function zy(r,i){if(r==="change")return i}var By=!1;if(Cr){var Ff;if(Cr){var Yf="oninput"in document;if(!Yf){var Py=document.createElement("div");Py.setAttribute("oninput","return;"),Yf=typeof Py.oninput=="function"}Ff=Yf}else Ff=!1;By=Ff&&(!document.documentMode||9<document.documentMode)}function qy(){po&&(po.detachEvent("onpropertychange",Hy),go=po=null)}function Hy(r){if(r.propertyName==="value"&&Oc(go)){var i=[];Ly(i,go,r,If(r)),Ay(gT,i)}}function yT(r,i,o){r==="focusin"?(qy(),po=i,go=o,po.attachEvent("onpropertychange",Hy)):r==="focusout"&&qy()}function vT(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return Oc(go)}function bT(r,i){if(r==="click")return Oc(i)}function _T(r,i){if(r==="input"||r==="change")return Oc(i)}function wT(r,i){return r===i&&(r!==0||1/r===1/i)||r!==r&&i!==i}var yn=typeof Object.is=="function"?Object.is:wT;function yo(r,i){if(yn(r,i))return!0;if(typeof r!="object"||r===null||typeof i!="object"||i===null)return!1;var o=Object.keys(r),u=Object.keys(i);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var m=o[u];if(!at.call(i,m)||!yn(r[m],i[m]))return!1}return!0}function Vy(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function Fy(r,i){var o=Vy(r);r=0;for(var u;o;){if(o.nodeType===3){if(u=r+o.textContent.length,r<=i&&u>=i)return{node:o,offset:i-r};r=u}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=Vy(o)}}function Yy(r,i){return r&&i?r===i?!0:r&&r.nodeType===3?!1:i&&i.nodeType===3?Yy(r,i.parentNode):"contains"in r?r.contains(i):r.compareDocumentPosition?!!(r.compareDocumentPosition(i)&16):!1:!1}function Gy(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var i=zi(r.document);i instanceof r.HTMLIFrameElement;){try{var o=typeof i.contentWindow.location.href=="string"}catch{o=!1}if(o)r=i.contentWindow;else break;i=zi(r.document)}return i}function Gf(r){var i=r&&r.nodeName&&r.nodeName.toLowerCase();return i&&(i==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||i==="textarea"||r.contentEditable==="true")}var xT=Cr&&"documentMode"in document&&11>=document.documentMode,Yi=null,Xf=null,vo=null,Kf=!1;function Xy(r,i,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;Kf||Yi==null||Yi!==zi(u)||(u=Yi,"selectionStart"in u&&Gf(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),vo&&yo(vo,u)||(vo=u,u=yu(Xf,"onSelect"),0<u.length&&(i=new Tc("onSelect","select",null,i,o),r.push({event:i,listeners:u}),i.target=Yi)))}function Xs(r,i){var o={};return o[r.toLowerCase()]=i.toLowerCase(),o["Webkit"+r]="webkit"+i,o["Moz"+r]="moz"+i,o}var Gi={animationend:Xs("Animation","AnimationEnd"),animationiteration:Xs("Animation","AnimationIteration"),animationstart:Xs("Animation","AnimationStart"),transitionrun:Xs("Transition","TransitionRun"),transitionstart:Xs("Transition","TransitionStart"),transitioncancel:Xs("Transition","TransitionCancel"),transitionend:Xs("Transition","TransitionEnd")},Qf={},Ky={};Cr&&(Ky=document.createElement("div").style,"AnimationEvent"in window||(delete Gi.animationend.animation,delete Gi.animationiteration.animation,delete Gi.animationstart.animation),"TransitionEvent"in window||delete Gi.transitionend.transition);function Ks(r){if(Qf[r])return Qf[r];if(!Gi[r])return r;var i=Gi[r],o;for(o in i)if(i.hasOwnProperty(o)&&o in Ky)return Qf[r]=i[o];return r}var Qy=Ks("animationend"),Wy=Ks("animationiteration"),Jy=Ks("animationstart"),ST=Ks("transitionrun"),ET=Ks("transitionstart"),CT=Ks("transitioncancel"),Zy=Ks("transitionend"),e0=new Map,Wf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Wf.push("scrollEnd");function Yn(r,i){e0.set(r,i),Sr(i,[r])}var jc=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)},Mn=[],Xi=0,Jf=0;function Rc(){for(var r=Xi,i=Jf=Xi=0;i<r;){var o=Mn[i];Mn[i++]=null;var u=Mn[i];Mn[i++]=null;var m=Mn[i];Mn[i++]=null;var y=Mn[i];if(Mn[i++]=null,u!==null&&m!==null){var T=u.pending;T===null?m.next=m:(m.next=T.next,T.next=m),u.pending=m}y!==0&&t0(o,m,y)}}function kc(r,i,o,u){Mn[Xi++]=r,Mn[Xi++]=i,Mn[Xi++]=o,Mn[Xi++]=u,Jf|=u,r.lanes|=u,r=r.alternate,r!==null&&(r.lanes|=u)}function Zf(r,i,o,u){return kc(r,i,o,u),Mc(r)}function Qs(r,i){return kc(r,null,null,i),Mc(r)}function t0(r,i,o){r.lanes|=o;var u=r.alternate;u!==null&&(u.lanes|=o);for(var m=!1,y=r.return;y!==null;)y.childLanes|=o,u=y.alternate,u!==null&&(u.childLanes|=o),y.tag===22&&(r=y.stateNode,r===null||r._visibility&1||(m=!0)),r=y,y=y.return;return r.tag===3?(y=r.stateNode,m&&i!==null&&(m=31-Ee(o),r=y.hiddenUpdates,u=r[m],u===null?r[m]=[i]:u.push(i),i.lane=o|536870912),y):null}function Mc(r){if(50<Bo)throw Bo=0,lm=null,Error(s(185));for(var i=r.return;i!==null;)r=i,i=r.return;return r.tag===3?r.stateNode:null}var Ki={};function AT(r,i,o,u){this.tag=r,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function vn(r,i,o,u){return new AT(r,i,o,u)}function eh(r){return r=r.prototype,!(!r||!r.isReactComponent)}function Ar(r,i){var o=r.alternate;return o===null?(o=vn(r.tag,i,r.key,r.mode),o.elementType=r.elementType,o.type=r.type,o.stateNode=r.stateNode,o.alternate=r,r.alternate=o):(o.pendingProps=i,o.type=r.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=r.flags&65011712,o.childLanes=r.childLanes,o.lanes=r.lanes,o.child=r.child,o.memoizedProps=r.memoizedProps,o.memoizedState=r.memoizedState,o.updateQueue=r.updateQueue,i=r.dependencies,o.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},o.sibling=r.sibling,o.index=r.index,o.ref=r.ref,o.refCleanup=r.refCleanup,o}function n0(r,i){r.flags&=65011714;var o=r.alternate;return o===null?(r.childLanes=0,r.lanes=i,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=o.childLanes,r.lanes=o.lanes,r.child=o.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=o.memoizedProps,r.memoizedState=o.memoizedState,r.updateQueue=o.updateQueue,r.type=o.type,i=o.dependencies,r.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),r}function Dc(r,i,o,u,m,y){var T=0;if(u=r,typeof r=="function")eh(r)&&(T=1);else if(typeof r=="string")T=RN(r,o,ee.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case q:return r=vn(31,o,i,m),r.elementType=q,r.lanes=y,r;case w:return Ws(o.children,m,y,i);case S:T=8,m|=24;break;case C:return r=vn(12,o,i,m|2),r.elementType=C,r.lanes=y,r;case j:return r=vn(13,o,i,m),r.elementType=j,r.lanes=y,r;case R:return r=vn(19,o,i,m),r.elementType=R,r.lanes=y,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case E:T=10;break e;case N:T=9;break e;case A:T=11;break e;case D:T=14;break e;case I:T=16,u=null;break e}T=29,o=Error(s(130,r===null?"null":typeof r,"")),u=null}return i=vn(T,o,i,m),i.elementType=r,i.type=u,i.lanes=y,i}function Ws(r,i,o,u){return r=vn(7,r,u,i),r.lanes=o,r}function th(r,i,o){return r=vn(6,r,null,i),r.lanes=o,r}function r0(r){var i=vn(18,null,null,0);return i.stateNode=r,i}function nh(r,i,o){return i=vn(4,r.children!==null?r.children:[],r.key,i),i.lanes=o,i.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},i}var s0=new WeakMap;function Dn(r,i){if(typeof r=="object"&&r!==null){var o=s0.get(r);return o!==void 0?o:(i={value:r,source:i,stack:Je(i)},s0.set(r,i),i)}return{value:r,source:i,stack:Je(i)}}var Qi=[],Wi=0,Uc=null,bo=0,Un=[],In=0,cs=null,lr=1,cr="";function Tr(r,i){Qi[Wi++]=bo,Qi[Wi++]=Uc,Uc=r,bo=i}function i0(r,i,o){Un[In++]=lr,Un[In++]=cr,Un[In++]=cs,cs=r;var u=lr;r=cr;var m=32-Ee(u)-1;u&=~(1<<m),o+=1;var y=32-Ee(i)+m;if(30<y){var T=m-m%5;y=(u&(1<<T)-1).toString(32),u>>=T,m-=T,lr=1<<32-Ee(i)+m|o<<m|u,cr=y+r}else lr=1<<y|o<<m|u,cr=r}function rh(r){r.return!==null&&(Tr(r,1),i0(r,1,0))}function sh(r){for(;r===Uc;)Uc=Qi[--Wi],Qi[Wi]=null,bo=Qi[--Wi],Qi[Wi]=null;for(;r===cs;)cs=Un[--In],Un[In]=null,cr=Un[--In],Un[In]=null,lr=Un[--In],Un[In]=null}function a0(r,i){Un[In++]=lr,Un[In++]=cr,Un[In++]=cs,lr=i.id,cr=i.overflow,cs=r}var Bt=null,lt=null,Ge=!1,us=null,$n=!1,ih=Error(s(519));function ds(r){var i=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw _o(Dn(i,r)),ih}function o0(r){var i=r.stateNode,o=r.type,u=r.memoizedProps;switch(i[jt]=r,i[Xt]=u,o){case"dialog":He("cancel",i),He("close",i);break;case"iframe":case"object":case"embed":He("load",i);break;case"video":case"audio":for(o=0;o<qo.length;o++)He(qo[o],i);break;case"source":He("error",i);break;case"img":case"image":case"link":He("error",i),He("load",i);break;case"details":He("toggle",i);break;case"input":He("invalid",i),xc(i,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":He("invalid",i);break;case"textarea":He("invalid",i),xy(i,u.value,u.defaultValue,u.children)}o=u.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||i.textContent===""+o||u.suppressHydrationWarning===!0||Eb(i.textContent,o)?(u.popover!=null&&(He("beforetoggle",i),He("toggle",i)),u.onScroll!=null&&He("scroll",i),u.onScrollEnd!=null&&He("scrollend",i),u.onClick!=null&&(i.onclick=Er),i=!0):i=!1,i||ds(r,!0)}function l0(r){for(Bt=r.return;Bt;)switch(Bt.tag){case 5:case 31:case 13:$n=!1;return;case 27:case 3:$n=!0;return;default:Bt=Bt.return}}function Ji(r){if(r!==Bt)return!1;if(!Ge)return l0(r),Ge=!0,!1;var i=r.tag,o;if((o=i!==3&&i!==27)&&((o=i===5)&&(o=r.type,o=!(o!=="form"&&o!=="button")||Sm(r.type,r.memoizedProps)),o=!o),o&&lt&&ds(r),l0(r),i===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(s(317));lt=Mb(r)}else if(i===31){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(s(317));lt=Mb(r)}else i===27?(i=lt,Cs(r.type)?(r=Nm,Nm=null,lt=r):lt=i):lt=Bt?zn(r.stateNode.nextSibling):null;return!0}function Js(){lt=Bt=null,Ge=!1}function ah(){var r=us;return r!==null&&(cn===null?cn=r:cn.push.apply(cn,r),us=null),r}function _o(r){us===null?us=[r]:us.push(r)}var oh=k(null),Zs=null,Nr=null;function fs(r,i,o){W(oh,i._currentValue),i._currentValue=o}function Or(r){r._currentValue=oh.current,B(oh)}function lh(r,i,o){for(;r!==null;){var u=r.alternate;if((r.childLanes&i)!==i?(r.childLanes|=i,u!==null&&(u.childLanes|=i)):u!==null&&(u.childLanes&i)!==i&&(u.childLanes|=i),r===o)break;r=r.return}}function ch(r,i,o,u){var m=r.child;for(m!==null&&(m.return=r);m!==null;){var y=m.dependencies;if(y!==null){var T=m.child;y=y.firstContext;e:for(;y!==null;){var U=y;y=m;for(var Y=0;Y<i.length;Y++)if(U.context===i[Y]){y.lanes|=o,U=y.alternate,U!==null&&(U.lanes|=o),lh(y.return,o,r),u||(T=null);break e}y=U.next}}else if(m.tag===18){if(T=m.return,T===null)throw Error(s(341));T.lanes|=o,y=T.alternate,y!==null&&(y.lanes|=o),lh(T,o,r),T=null}else T=m.child;if(T!==null)T.return=m;else for(T=m;T!==null;){if(T===r){T=null;break}if(m=T.sibling,m!==null){m.return=T.return,T=m;break}T=T.return}m=T}}function Zi(r,i,o,u){r=null;for(var m=i,y=!1;m!==null;){if(!y){if((m.flags&524288)!==0)y=!0;else if((m.flags&262144)!==0)break}if(m.tag===10){var T=m.alternate;if(T===null)throw Error(s(387));if(T=T.memoizedProps,T!==null){var U=m.type;yn(m.pendingProps.value,T.value)||(r!==null?r.push(U):r=[U])}}else if(m===Z.current){if(T=m.alternate,T===null)throw Error(s(387));T.memoizedState.memoizedState!==m.memoizedState.memoizedState&&(r!==null?r.push(Go):r=[Go])}m=m.return}r!==null&&ch(i,r,o,u),i.flags|=262144}function Ic(r){for(r=r.firstContext;r!==null;){if(!yn(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function ei(r){Zs=r,Nr=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function Pt(r){return c0(Zs,r)}function $c(r,i){return Zs===null&&ei(r),c0(r,i)}function c0(r,i){var o=i._currentValue;if(i={context:i,memoizedValue:o,next:null},Nr===null){if(r===null)throw Error(s(308));Nr=i,r.dependencies={lanes:0,firstContext:i},r.flags|=524288}else Nr=Nr.next=i;return o}var TT=typeof AbortController<"u"?AbortController:function(){var r=[],i=this.signal={aborted:!1,addEventListener:function(o,u){r.push(u)}};this.abort=function(){i.aborted=!0,r.forEach(function(o){return o()})}},NT=t.unstable_scheduleCallback,OT=t.unstable_NormalPriority,St={$$typeof:E,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function uh(){return{controller:new TT,data:new Map,refCount:0}}function wo(r){r.refCount--,r.refCount===0&&NT(OT,function(){r.controller.abort()})}var xo=null,dh=0,ea=0,ta=null;function jT(r,i){if(xo===null){var o=xo=[];dh=0,ea=mm(),ta={status:"pending",value:void 0,then:function(u){o.push(u)}}}return dh++,i.then(u0,u0),i}function u0(){if(--dh===0&&xo!==null){ta!==null&&(ta.status="fulfilled");var r=xo;xo=null,ea=0,ta=null;for(var i=0;i<r.length;i++)(0,r[i])()}}function RT(r,i){var o=[],u={status:"pending",value:null,reason:null,then:function(m){o.push(m)}};return r.then(function(){u.status="fulfilled",u.value=i;for(var m=0;m<o.length;m++)(0,o[m])(i)},function(m){for(u.status="rejected",u.reason=m,m=0;m<o.length;m++)(0,o[m])(void 0)}),u}var d0=M.S;M.S=function(r,i){Xv=dt(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&jT(r,i),d0!==null&&d0(r,i)};var ti=k(null);function fh(){var r=ti.current;return r!==null?r:st.pooledCache}function Lc(r,i){i===null?W(ti,ti.current):W(ti,i.pool)}function f0(){var r=fh();return r===null?null:{parent:St._currentValue,pool:r}}var na=Error(s(460)),hh=Error(s(474)),zc=Error(s(542)),Bc={then:function(){}};function h0(r){return r=r.status,r==="fulfilled"||r==="rejected"}function m0(r,i,o){switch(o=r[o],o===void 0?r.push(i):o!==i&&(i.then(Er,Er),i=o),i.status){case"fulfilled":return i.value;case"rejected":throw r=i.reason,g0(r),r;default:if(typeof i.status=="string")i.then(Er,Er);else{if(r=st,r!==null&&100<r.shellSuspendCounter)throw Error(s(482));r=i,r.status="pending",r.then(function(u){if(i.status==="pending"){var m=i;m.status="fulfilled",m.value=u}},function(u){if(i.status==="pending"){var m=i;m.status="rejected",m.reason=u}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw r=i.reason,g0(r),r}throw ri=i,na}}function ni(r){try{var i=r._init;return i(r._payload)}catch(o){throw o!==null&&typeof o=="object"&&typeof o.then=="function"?(ri=o,na):o}}var ri=null;function p0(){if(ri===null)throw Error(s(459));var r=ri;return ri=null,r}function g0(r){if(r===na||r===zc)throw Error(s(483))}var ra=null,So=0;function Pc(r){var i=So;return So+=1,ra===null&&(ra=[]),m0(ra,r,i)}function Eo(r,i){i=i.props.ref,r.ref=i!==void 0?i:null}function qc(r,i){throw i.$$typeof===v?Error(s(525)):(r=Object.prototype.toString.call(i),Error(s(31,r==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":r)))}function y0(r){function i(J,K){if(r){var te=J.deletions;te===null?(J.deletions=[K],J.flags|=16):te.push(K)}}function o(J,K){if(!r)return null;for(;K!==null;)i(J,K),K=K.sibling;return null}function u(J){for(var K=new Map;J!==null;)J.key!==null?K.set(J.key,J):K.set(J.index,J),J=J.sibling;return K}function m(J,K){return J=Ar(J,K),J.index=0,J.sibling=null,J}function y(J,K,te){return J.index=te,r?(te=J.alternate,te!==null?(te=te.index,te<K?(J.flags|=67108866,K):te):(J.flags|=67108866,K)):(J.flags|=1048576,K)}function T(J){return r&&J.alternate===null&&(J.flags|=67108866),J}function U(J,K,te,ue){return K===null||K.tag!==6?(K=th(te,J.mode,ue),K.return=J,K):(K=m(K,te),K.return=J,K)}function Y(J,K,te,ue){var Oe=te.type;return Oe===w?le(J,K,te.props.children,ue,te.key):K!==null&&(K.elementType===Oe||typeof Oe=="object"&&Oe!==null&&Oe.$$typeof===I&&ni(Oe)===K.type)?(K=m(K,te.props),Eo(K,te),K.return=J,K):(K=Dc(te.type,te.key,te.props,null,J.mode,ue),Eo(K,te),K.return=J,K)}function ne(J,K,te,ue){return K===null||K.tag!==4||K.stateNode.containerInfo!==te.containerInfo||K.stateNode.implementation!==te.implementation?(K=nh(te,J.mode,ue),K.return=J,K):(K=m(K,te.children||[]),K.return=J,K)}function le(J,K,te,ue,Oe){return K===null||K.tag!==7?(K=Ws(te,J.mode,ue,Oe),K.return=J,K):(K=m(K,te),K.return=J,K)}function fe(J,K,te){if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return K=th(""+K,J.mode,te),K.return=J,K;if(typeof K=="object"&&K!==null){switch(K.$$typeof){case _:return te=Dc(K.type,K.key,K.props,null,J.mode,te),Eo(te,K),te.return=J,te;case x:return K=nh(K,J.mode,te),K.return=J,K;case I:return K=ni(K),fe(J,K,te)}if(F(K)||L(K))return K=Ws(K,J.mode,te,null),K.return=J,K;if(typeof K.then=="function")return fe(J,Pc(K),te);if(K.$$typeof===E)return fe(J,$c(J,K),te);qc(J,K)}return null}function se(J,K,te,ue){var Oe=K!==null?K.key:null;if(typeof te=="string"&&te!==""||typeof te=="number"||typeof te=="bigint")return Oe!==null?null:U(J,K,""+te,ue);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case _:return te.key===Oe?Y(J,K,te,ue):null;case x:return te.key===Oe?ne(J,K,te,ue):null;case I:return te=ni(te),se(J,K,te,ue)}if(F(te)||L(te))return Oe!==null?null:le(J,K,te,ue,null);if(typeof te.then=="function")return se(J,K,Pc(te),ue);if(te.$$typeof===E)return se(J,K,$c(J,te),ue);qc(J,te)}return null}function ae(J,K,te,ue,Oe){if(typeof ue=="string"&&ue!==""||typeof ue=="number"||typeof ue=="bigint")return J=J.get(te)||null,U(K,J,""+ue,Oe);if(typeof ue=="object"&&ue!==null){switch(ue.$$typeof){case _:return J=J.get(ue.key===null?te:ue.key)||null,Y(K,J,ue,Oe);case x:return J=J.get(ue.key===null?te:ue.key)||null,ne(K,J,ue,Oe);case I:return ue=ni(ue),ae(J,K,te,ue,Oe)}if(F(ue)||L(ue))return J=J.get(te)||null,le(K,J,ue,Oe,null);if(typeof ue.then=="function")return ae(J,K,te,Pc(ue),Oe);if(ue.$$typeof===E)return ae(J,K,te,$c(K,ue),Oe);qc(K,ue)}return null}function xe(J,K,te,ue){for(var Oe=null,Ke=null,Ce=K,Be=K=0,Fe=null;Ce!==null&&Be<te.length;Be++){Ce.index>Be?(Fe=Ce,Ce=null):Fe=Ce.sibling;var Qe=se(J,Ce,te[Be],ue);if(Qe===null){Ce===null&&(Ce=Fe);break}r&&Ce&&Qe.alternate===null&&i(J,Ce),K=y(Qe,K,Be),Ke===null?Oe=Qe:Ke.sibling=Qe,Ke=Qe,Ce=Fe}if(Be===te.length)return o(J,Ce),Ge&&Tr(J,Be),Oe;if(Ce===null){for(;Be<te.length;Be++)Ce=fe(J,te[Be],ue),Ce!==null&&(K=y(Ce,K,Be),Ke===null?Oe=Ce:Ke.sibling=Ce,Ke=Ce);return Ge&&Tr(J,Be),Oe}for(Ce=u(Ce);Be<te.length;Be++)Fe=ae(Ce,J,Be,te[Be],ue),Fe!==null&&(r&&Fe.alternate!==null&&Ce.delete(Fe.key===null?Be:Fe.key),K=y(Fe,K,Be),Ke===null?Oe=Fe:Ke.sibling=Fe,Ke=Fe);return r&&Ce.forEach(function(js){return i(J,js)}),Ge&&Tr(J,Be),Oe}function De(J,K,te,ue){if(te==null)throw Error(s(151));for(var Oe=null,Ke=null,Ce=K,Be=K=0,Fe=null,Qe=te.next();Ce!==null&&!Qe.done;Be++,Qe=te.next()){Ce.index>Be?(Fe=Ce,Ce=null):Fe=Ce.sibling;var js=se(J,Ce,Qe.value,ue);if(js===null){Ce===null&&(Ce=Fe);break}r&&Ce&&js.alternate===null&&i(J,Ce),K=y(js,K,Be),Ke===null?Oe=js:Ke.sibling=js,Ke=js,Ce=Fe}if(Qe.done)return o(J,Ce),Ge&&Tr(J,Be),Oe;if(Ce===null){for(;!Qe.done;Be++,Qe=te.next())Qe=fe(J,Qe.value,ue),Qe!==null&&(K=y(Qe,K,Be),Ke===null?Oe=Qe:Ke.sibling=Qe,Ke=Qe);return Ge&&Tr(J,Be),Oe}for(Ce=u(Ce);!Qe.done;Be++,Qe=te.next())Qe=ae(Ce,J,Be,Qe.value,ue),Qe!==null&&(r&&Qe.alternate!==null&&Ce.delete(Qe.key===null?Be:Qe.key),K=y(Qe,K,Be),Ke===null?Oe=Qe:Ke.sibling=Qe,Ke=Qe);return r&&Ce.forEach(function(qN){return i(J,qN)}),Ge&&Tr(J,Be),Oe}function rt(J,K,te,ue){if(typeof te=="object"&&te!==null&&te.type===w&&te.key===null&&(te=te.props.children),typeof te=="object"&&te!==null){switch(te.$$typeof){case _:e:{for(var Oe=te.key;K!==null;){if(K.key===Oe){if(Oe=te.type,Oe===w){if(K.tag===7){o(J,K.sibling),ue=m(K,te.props.children),ue.return=J,J=ue;break e}}else if(K.elementType===Oe||typeof Oe=="object"&&Oe!==null&&Oe.$$typeof===I&&ni(Oe)===K.type){o(J,K.sibling),ue=m(K,te.props),Eo(ue,te),ue.return=J,J=ue;break e}o(J,K);break}else i(J,K);K=K.sibling}te.type===w?(ue=Ws(te.props.children,J.mode,ue,te.key),ue.return=J,J=ue):(ue=Dc(te.type,te.key,te.props,null,J.mode,ue),Eo(ue,te),ue.return=J,J=ue)}return T(J);case x:e:{for(Oe=te.key;K!==null;){if(K.key===Oe)if(K.tag===4&&K.stateNode.containerInfo===te.containerInfo&&K.stateNode.implementation===te.implementation){o(J,K.sibling),ue=m(K,te.children||[]),ue.return=J,J=ue;break e}else{o(J,K);break}else i(J,K);K=K.sibling}ue=nh(te,J.mode,ue),ue.return=J,J=ue}return T(J);case I:return te=ni(te),rt(J,K,te,ue)}if(F(te))return xe(J,K,te,ue);if(L(te)){if(Oe=L(te),typeof Oe!="function")throw Error(s(150));return te=Oe.call(te),De(J,K,te,ue)}if(typeof te.then=="function")return rt(J,K,Pc(te),ue);if(te.$$typeof===E)return rt(J,K,$c(J,te),ue);qc(J,te)}return typeof te=="string"&&te!==""||typeof te=="number"||typeof te=="bigint"?(te=""+te,K!==null&&K.tag===6?(o(J,K.sibling),ue=m(K,te),ue.return=J,J=ue):(o(J,K),ue=th(te,J.mode,ue),ue.return=J,J=ue),T(J)):o(J,K)}return function(J,K,te,ue){try{So=0;var Oe=rt(J,K,te,ue);return ra=null,Oe}catch(Ce){if(Ce===na||Ce===zc)throw Ce;var Ke=vn(29,Ce,null,J.mode);return Ke.lanes=ue,Ke.return=J,Ke}finally{}}}var si=y0(!0),v0=y0(!1),hs=!1;function mh(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ph(r,i){r=r.updateQueue,i.updateQueue===r&&(i.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function ms(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function ps(r,i,o){var u=r.updateQueue;if(u===null)return null;if(u=u.shared,(We&2)!==0){var m=u.pending;return m===null?i.next=i:(i.next=m.next,m.next=i),u.pending=i,i=Mc(r),t0(r,null,o),i}return kc(r,u,i,o),Mc(r)}function Co(r,i,o){if(i=i.updateQueue,i!==null&&(i=i.shared,(o&4194048)!==0)){var u=i.lanes;u&=r.pendingLanes,o|=u,i.lanes=o,dc(r,o)}}function gh(r,i){var o=r.updateQueue,u=r.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var m=null,y=null;if(o=o.firstBaseUpdate,o!==null){do{var T={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};y===null?m=y=T:y=y.next=T,o=o.next}while(o!==null);y===null?m=y=i:y=y.next=i}else m=y=i;o={baseState:u.baseState,firstBaseUpdate:m,lastBaseUpdate:y,shared:u.shared,callbacks:u.callbacks},r.updateQueue=o;return}r=o.lastBaseUpdate,r===null?o.firstBaseUpdate=i:r.next=i,o.lastBaseUpdate=i}var yh=!1;function Ao(){if(yh){var r=ta;if(r!==null)throw r}}function To(r,i,o,u){yh=!1;var m=r.updateQueue;hs=!1;var y=m.firstBaseUpdate,T=m.lastBaseUpdate,U=m.shared.pending;if(U!==null){m.shared.pending=null;var Y=U,ne=Y.next;Y.next=null,T===null?y=ne:T.next=ne,T=Y;var le=r.alternate;le!==null&&(le=le.updateQueue,U=le.lastBaseUpdate,U!==T&&(U===null?le.firstBaseUpdate=ne:U.next=ne,le.lastBaseUpdate=Y))}if(y!==null){var fe=m.baseState;T=0,le=ne=Y=null,U=y;do{var se=U.lane&-536870913,ae=se!==U.lane;if(ae?(Ve&se)===se:(u&se)===se){se!==0&&se===ea&&(yh=!0),le!==null&&(le=le.next={lane:0,tag:U.tag,payload:U.payload,callback:null,next:null});e:{var xe=r,De=U;se=i;var rt=o;switch(De.tag){case 1:if(xe=De.payload,typeof xe=="function"){fe=xe.call(rt,fe,se);break e}fe=xe;break e;case 3:xe.flags=xe.flags&-65537|128;case 0:if(xe=De.payload,se=typeof xe=="function"?xe.call(rt,fe,se):xe,se==null)break e;fe=p({},fe,se);break e;case 2:hs=!0}}se=U.callback,se!==null&&(r.flags|=64,ae&&(r.flags|=8192),ae=m.callbacks,ae===null?m.callbacks=[se]:ae.push(se))}else ae={lane:se,tag:U.tag,payload:U.payload,callback:U.callback,next:null},le===null?(ne=le=ae,Y=fe):le=le.next=ae,T|=se;if(U=U.next,U===null){if(U=m.shared.pending,U===null)break;ae=U,U=ae.next,ae.next=null,m.lastBaseUpdate=ae,m.shared.pending=null}}while(!0);le===null&&(Y=fe),m.baseState=Y,m.firstBaseUpdate=ne,m.lastBaseUpdate=le,y===null&&(m.shared.lanes=0),_s|=T,r.lanes=T,r.memoizedState=fe}}function b0(r,i){if(typeof r!="function")throw Error(s(191,r));r.call(i)}function _0(r,i){var o=r.callbacks;if(o!==null)for(r.callbacks=null,r=0;r<o.length;r++)b0(o[r],i)}var sa=k(null),Hc=k(0);function w0(r,i){r=Lr,W(Hc,r),W(sa,i),Lr=r|i.baseLanes}function vh(){W(Hc,Lr),W(sa,sa.current)}function bh(){Lr=Hc.current,B(sa),B(Hc)}var bn=k(null),Ln=null;function gs(r){var i=r.alternate;W(_t,_t.current&1),W(bn,r),Ln===null&&(i===null||sa.current!==null||i.memoizedState!==null)&&(Ln=r)}function _h(r){W(_t,_t.current),W(bn,r),Ln===null&&(Ln=r)}function x0(r){r.tag===22?(W(_t,_t.current),W(bn,r),Ln===null&&(Ln=r)):ys()}function ys(){W(_t,_t.current),W(bn,bn.current)}function _n(r){B(bn),Ln===r&&(Ln=null),B(_t)}var _t=k(0);function Vc(r){for(var i=r;i!==null;){if(i.tag===13){var o=i.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||Am(o)||Tm(o)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break;for(;i.sibling===null;){if(i.return===null||i.return===r)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var jr=0,ze=null,tt=null,Et=null,Fc=!1,ia=!1,ii=!1,Yc=0,No=0,aa=null,kT=0;function vt(){throw Error(s(321))}function wh(r,i){if(i===null)return!1;for(var o=0;o<i.length&&o<r.length;o++)if(!yn(r[o],i[o]))return!1;return!0}function xh(r,i,o,u,m,y){return jr=y,ze=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,M.H=r===null||r.memoizedState===null?iv:$h,ii=!1,y=o(u,m),ii=!1,ia&&(y=E0(i,o,u,m)),S0(r),y}function S0(r){M.H=Ro;var i=tt!==null&&tt.next!==null;if(jr=0,Et=tt=ze=null,Fc=!1,No=0,aa=null,i)throw Error(s(300));r===null||Ct||(r=r.dependencies,r!==null&&Ic(r)&&(Ct=!0))}function E0(r,i,o,u){ze=r;var m=0;do{if(ia&&(aa=null),No=0,ia=!1,25<=m)throw Error(s(301));if(m+=1,Et=tt=null,r.updateQueue!=null){var y=r.updateQueue;y.lastEffect=null,y.events=null,y.stores=null,y.memoCache!=null&&(y.memoCache.index=0)}M.H=av,y=i(o,u)}while(ia);return y}function MT(){var r=M.H,i=r.useState()[0];return i=typeof i.then=="function"?Oo(i):i,r=r.useState()[0],(tt!==null?tt.memoizedState:null)!==r&&(ze.flags|=1024),i}function Sh(){var r=Yc!==0;return Yc=0,r}function Eh(r,i,o){i.updateQueue=r.updateQueue,i.flags&=-2053,r.lanes&=~o}function Ch(r){if(Fc){for(r=r.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Fc=!1}jr=0,Et=tt=ze=null,ia=!1,No=Yc=0,aa=null}function en(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Et===null?ze.memoizedState=Et=r:Et=Et.next=r,Et}function wt(){if(tt===null){var r=ze.alternate;r=r!==null?r.memoizedState:null}else r=tt.next;var i=Et===null?ze.memoizedState:Et.next;if(i!==null)Et=i,tt=r;else{if(r===null)throw ze.alternate===null?Error(s(467)):Error(s(310));tt=r,r={memoizedState:tt.memoizedState,baseState:tt.baseState,baseQueue:tt.baseQueue,queue:tt.queue,next:null},Et===null?ze.memoizedState=Et=r:Et=Et.next=r}return Et}function Gc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Oo(r){var i=No;return No+=1,aa===null&&(aa=[]),r=m0(aa,r,i),i=ze,(Et===null?i.memoizedState:Et.next)===null&&(i=i.alternate,M.H=i===null||i.memoizedState===null?iv:$h),r}function Xc(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return Oo(r);if(r.$$typeof===E)return Pt(r)}throw Error(s(438,String(r)))}function Ah(r){var i=null,o=ze.updateQueue;if(o!==null&&(i=o.memoCache),i==null){var u=ze.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(i={data:u.data.map(function(m){return m.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),o===null&&(o=Gc(),ze.updateQueue=o),o.memoCache=i,o=i.data[i.index],o===void 0)for(o=i.data[i.index]=Array(r),u=0;u<r;u++)o[u]=Q;return i.index++,o}function Rr(r,i){return typeof i=="function"?i(r):i}function Kc(r){var i=wt();return Th(i,tt,r)}function Th(r,i,o){var u=r.queue;if(u===null)throw Error(s(311));u.lastRenderedReducer=o;var m=r.baseQueue,y=u.pending;if(y!==null){if(m!==null){var T=m.next;m.next=y.next,y.next=T}i.baseQueue=m=y,u.pending=null}if(y=r.baseState,m===null)r.memoizedState=y;else{i=m.next;var U=T=null,Y=null,ne=i,le=!1;do{var fe=ne.lane&-536870913;if(fe!==ne.lane?(Ve&fe)===fe:(jr&fe)===fe){var se=ne.revertLane;if(se===0)Y!==null&&(Y=Y.next={lane:0,revertLane:0,gesture:null,action:ne.action,hasEagerState:ne.hasEagerState,eagerState:ne.eagerState,next:null}),fe===ea&&(le=!0);else if((jr&se)===se){ne=ne.next,se===ea&&(le=!0);continue}else fe={lane:0,revertLane:ne.revertLane,gesture:null,action:ne.action,hasEagerState:ne.hasEagerState,eagerState:ne.eagerState,next:null},Y===null?(U=Y=fe,T=y):Y=Y.next=fe,ze.lanes|=se,_s|=se;fe=ne.action,ii&&o(y,fe),y=ne.hasEagerState?ne.eagerState:o(y,fe)}else se={lane:fe,revertLane:ne.revertLane,gesture:ne.gesture,action:ne.action,hasEagerState:ne.hasEagerState,eagerState:ne.eagerState,next:null},Y===null?(U=Y=se,T=y):Y=Y.next=se,ze.lanes|=fe,_s|=fe;ne=ne.next}while(ne!==null&&ne!==i);if(Y===null?T=y:Y.next=U,!yn(y,r.memoizedState)&&(Ct=!0,le&&(o=ta,o!==null)))throw o;r.memoizedState=y,r.baseState=T,r.baseQueue=Y,u.lastRenderedState=y}return m===null&&(u.lanes=0),[r.memoizedState,u.dispatch]}function Nh(r){var i=wt(),o=i.queue;if(o===null)throw Error(s(311));o.lastRenderedReducer=r;var u=o.dispatch,m=o.pending,y=i.memoizedState;if(m!==null){o.pending=null;var T=m=m.next;do y=r(y,T.action),T=T.next;while(T!==m);yn(y,i.memoizedState)||(Ct=!0),i.memoizedState=y,i.baseQueue===null&&(i.baseState=y),o.lastRenderedState=y}return[y,u]}function C0(r,i,o){var u=ze,m=wt(),y=Ge;if(y){if(o===void 0)throw Error(s(407));o=o()}else o=i();var T=!yn((tt||m).memoizedState,o);if(T&&(m.memoizedState=o,Ct=!0),m=m.queue,Rh(N0.bind(null,u,m,r),[r]),m.getSnapshot!==i||T||Et!==null&&Et.memoizedState.tag&1){if(u.flags|=2048,oa(9,{destroy:void 0},T0.bind(null,u,m,o,i),null),st===null)throw Error(s(349));y||(jr&127)!==0||A0(u,i,o)}return o}function A0(r,i,o){r.flags|=16384,r={getSnapshot:i,value:o},i=ze.updateQueue,i===null?(i=Gc(),ze.updateQueue=i,i.stores=[r]):(o=i.stores,o===null?i.stores=[r]:o.push(r))}function T0(r,i,o,u){i.value=o,i.getSnapshot=u,O0(i)&&j0(r)}function N0(r,i,o){return o(function(){O0(i)&&j0(r)})}function O0(r){var i=r.getSnapshot;r=r.value;try{var o=i();return!yn(r,o)}catch{return!0}}function j0(r){var i=Qs(r,2);i!==null&&un(i,r,2)}function Oh(r){var i=en();if(typeof r=="function"){var o=r;if(r=o(),ii){me(!0);try{o()}finally{me(!1)}}}return i.memoizedState=i.baseState=r,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Rr,lastRenderedState:r},i}function R0(r,i,o,u){return r.baseState=o,Th(r,tt,typeof u=="function"?u:Rr)}function DT(r,i,o,u,m){if(Jc(r))throw Error(s(485));if(r=i.action,r!==null){var y={payload:m,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(T){y.listeners.push(T)}};M.T!==null?o(!0):y.isTransition=!1,u(y),o=i.pending,o===null?(y.next=i.pending=y,k0(i,y)):(y.next=o.next,i.pending=o.next=y)}}function k0(r,i){var o=i.action,u=i.payload,m=r.state;if(i.isTransition){var y=M.T,T={};M.T=T;try{var U=o(m,u),Y=M.S;Y!==null&&Y(T,U),M0(r,i,U)}catch(ne){jh(r,i,ne)}finally{y!==null&&T.types!==null&&(y.types=T.types),M.T=y}}else try{y=o(m,u),M0(r,i,y)}catch(ne){jh(r,i,ne)}}function M0(r,i,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(u){D0(r,i,u)},function(u){return jh(r,i,u)}):D0(r,i,o)}function D0(r,i,o){i.status="fulfilled",i.value=o,U0(i),r.state=o,i=r.pending,i!==null&&(o=i.next,o===i?r.pending=null:(o=o.next,i.next=o,k0(r,o)))}function jh(r,i,o){var u=r.pending;if(r.pending=null,u!==null){u=u.next;do i.status="rejected",i.reason=o,U0(i),i=i.next;while(i!==u)}r.action=null}function U0(r){r=r.listeners;for(var i=0;i<r.length;i++)(0,r[i])()}function I0(r,i){return i}function $0(r,i){if(Ge){var o=st.formState;if(o!==null){e:{var u=ze;if(Ge){if(lt){t:{for(var m=lt,y=$n;m.nodeType!==8;){if(!y){m=null;break t}if(m=zn(m.nextSibling),m===null){m=null;break t}}y=m.data,m=y==="F!"||y==="F"?m:null}if(m){lt=zn(m.nextSibling),u=m.data==="F!";break e}}ds(u)}u=!1}u&&(i=o[0])}}return o=en(),o.memoizedState=o.baseState=i,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:I0,lastRenderedState:i},o.queue=u,o=nv.bind(null,ze,u),u.dispatch=o,u=Oh(!1),y=Ih.bind(null,ze,!1,u.queue),u=en(),m={state:i,dispatch:null,action:r,pending:null},u.queue=m,o=DT.bind(null,ze,m,y,o),m.dispatch=o,u.memoizedState=r,[i,o,!1]}function L0(r){var i=wt();return z0(i,tt,r)}function z0(r,i,o){if(i=Th(r,i,I0)[0],r=Kc(Rr)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var u=Oo(i)}catch(T){throw T===na?zc:T}else u=i;i=wt();var m=i.queue,y=m.dispatch;return o!==i.memoizedState&&(ze.flags|=2048,oa(9,{destroy:void 0},UT.bind(null,m,o),null)),[u,y,r]}function UT(r,i){r.action=i}function B0(r){var i=wt(),o=tt;if(o!==null)return z0(i,o,r);wt(),i=i.memoizedState,o=wt();var u=o.queue.dispatch;return o.memoizedState=r,[i,u,!1]}function oa(r,i,o,u){return r={tag:r,create:o,deps:u,inst:i,next:null},i=ze.updateQueue,i===null&&(i=Gc(),ze.updateQueue=i),o=i.lastEffect,o===null?i.lastEffect=r.next=r:(u=o.next,o.next=r,r.next=u,i.lastEffect=r),r}function P0(){return wt().memoizedState}function Qc(r,i,o,u){var m=en();ze.flags|=r,m.memoizedState=oa(1|i,{destroy:void 0},o,u===void 0?null:u)}function Wc(r,i,o,u){var m=wt();u=u===void 0?null:u;var y=m.memoizedState.inst;tt!==null&&u!==null&&wh(u,tt.memoizedState.deps)?m.memoizedState=oa(i,y,o,u):(ze.flags|=r,m.memoizedState=oa(1|i,y,o,u))}function q0(r,i){Qc(8390656,8,r,i)}function Rh(r,i){Wc(2048,8,r,i)}function IT(r){ze.flags|=4;var i=ze.updateQueue;if(i===null)i=Gc(),ze.updateQueue=i,i.events=[r];else{var o=i.events;o===null?i.events=[r]:o.push(r)}}function H0(r){var i=wt().memoizedState;return IT({ref:i,nextImpl:r}),function(){if((We&2)!==0)throw Error(s(440));return i.impl.apply(void 0,arguments)}}function V0(r,i){return Wc(4,2,r,i)}function F0(r,i){return Wc(4,4,r,i)}function Y0(r,i){if(typeof i=="function"){r=r();var o=i(r);return function(){typeof o=="function"?o():i(null)}}if(i!=null)return r=r(),i.current=r,function(){i.current=null}}function G0(r,i,o){o=o!=null?o.concat([r]):null,Wc(4,4,Y0.bind(null,i,r),o)}function kh(){}function X0(r,i){var o=wt();i=i===void 0?null:i;var u=o.memoizedState;return i!==null&&wh(i,u[1])?u[0]:(o.memoizedState=[r,i],r)}function K0(r,i){var o=wt();i=i===void 0?null:i;var u=o.memoizedState;if(i!==null&&wh(i,u[1]))return u[0];if(u=r(),ii){me(!0);try{r()}finally{me(!1)}}return o.memoizedState=[u,i],u}function Mh(r,i,o){return o===void 0||(jr&1073741824)!==0&&(Ve&261930)===0?r.memoizedState=i:(r.memoizedState=o,r=Qv(),ze.lanes|=r,_s|=r,o)}function Q0(r,i,o,u){return yn(o,i)?o:sa.current!==null?(r=Mh(r,o,u),yn(r,i)||(Ct=!0),r):(jr&42)===0||(jr&1073741824)!==0&&(Ve&261930)===0?(Ct=!0,r.memoizedState=o):(r=Qv(),ze.lanes|=r,_s|=r,i)}function W0(r,i,o,u,m){var y=z.p;z.p=y!==0&&8>y?y:8;var T=M.T,U={};M.T=U,Ih(r,!1,i,o);try{var Y=m(),ne=M.S;if(ne!==null&&ne(U,Y),Y!==null&&typeof Y=="object"&&typeof Y.then=="function"){var le=RT(Y,u);jo(r,i,le,Sn(r))}else jo(r,i,u,Sn(r))}catch(fe){jo(r,i,{then:function(){},status:"rejected",reason:fe},Sn())}finally{z.p=y,T!==null&&U.types!==null&&(T.types=U.types),M.T=T}}function $T(){}function Dh(r,i,o,u){if(r.tag!==5)throw Error(s(476));var m=J0(r).queue;W0(r,m,i,H,o===null?$T:function(){return Z0(r),o(u)})}function J0(r){var i=r.memoizedState;if(i!==null)return i;i={memoizedState:H,baseState:H,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Rr,lastRenderedState:H},next:null};var o={};return i.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Rr,lastRenderedState:o},next:null},r.memoizedState=i,r=r.alternate,r!==null&&(r.memoizedState=i),i}function Z0(r){var i=J0(r);i.next===null&&(i=r.alternate.memoizedState),jo(r,i.next.queue,{},Sn())}function Uh(){return Pt(Go)}function ev(){return wt().memoizedState}function tv(){return wt().memoizedState}function LT(r){for(var i=r.return;i!==null;){switch(i.tag){case 24:case 3:var o=Sn();r=ms(o);var u=ps(i,r,o);u!==null&&(un(u,i,o),Co(u,i,o)),i={cache:uh()},r.payload=i;return}i=i.return}}function zT(r,i,o){var u=Sn();o={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},Jc(r)?rv(i,o):(o=Zf(r,i,o,u),o!==null&&(un(o,r,u),sv(o,i,u)))}function nv(r,i,o){var u=Sn();jo(r,i,o,u)}function jo(r,i,o,u){var m={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null};if(Jc(r))rv(i,m);else{var y=r.alternate;if(r.lanes===0&&(y===null||y.lanes===0)&&(y=i.lastRenderedReducer,y!==null))try{var T=i.lastRenderedState,U=y(T,o);if(m.hasEagerState=!0,m.eagerState=U,yn(U,T))return kc(r,i,m,0),st===null&&Rc(),!1}catch{}finally{}if(o=Zf(r,i,m,u),o!==null)return un(o,r,u),sv(o,i,u),!0}return!1}function Ih(r,i,o,u){if(u={lane:2,revertLane:mm(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},Jc(r)){if(i)throw Error(s(479))}else i=Zf(r,o,u,2),i!==null&&un(i,r,2)}function Jc(r){var i=r.alternate;return r===ze||i!==null&&i===ze}function rv(r,i){ia=Fc=!0;var o=r.pending;o===null?i.next=i:(i.next=o.next,o.next=i),r.pending=i}function sv(r,i,o){if((o&4194048)!==0){var u=i.lanes;u&=r.pendingLanes,o|=u,i.lanes=o,dc(r,o)}}var Ro={readContext:Pt,use:Xc,useCallback:vt,useContext:vt,useEffect:vt,useImperativeHandle:vt,useLayoutEffect:vt,useInsertionEffect:vt,useMemo:vt,useReducer:vt,useRef:vt,useState:vt,useDebugValue:vt,useDeferredValue:vt,useTransition:vt,useSyncExternalStore:vt,useId:vt,useHostTransitionStatus:vt,useFormState:vt,useActionState:vt,useOptimistic:vt,useMemoCache:vt,useCacheRefresh:vt};Ro.useEffectEvent=vt;var iv={readContext:Pt,use:Xc,useCallback:function(r,i){return en().memoizedState=[r,i===void 0?null:i],r},useContext:Pt,useEffect:q0,useImperativeHandle:function(r,i,o){o=o!=null?o.concat([r]):null,Qc(4194308,4,Y0.bind(null,i,r),o)},useLayoutEffect:function(r,i){return Qc(4194308,4,r,i)},useInsertionEffect:function(r,i){Qc(4,2,r,i)},useMemo:function(r,i){var o=en();i=i===void 0?null:i;var u=r();if(ii){me(!0);try{r()}finally{me(!1)}}return o.memoizedState=[u,i],u},useReducer:function(r,i,o){var u=en();if(o!==void 0){var m=o(i);if(ii){me(!0);try{o(i)}finally{me(!1)}}}else m=i;return u.memoizedState=u.baseState=m,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:m},u.queue=r,r=r.dispatch=zT.bind(null,ze,r),[u.memoizedState,r]},useRef:function(r){var i=en();return r={current:r},i.memoizedState=r},useState:function(r){r=Oh(r);var i=r.queue,o=nv.bind(null,ze,i);return i.dispatch=o,[r.memoizedState,o]},useDebugValue:kh,useDeferredValue:function(r,i){var o=en();return Mh(o,r,i)},useTransition:function(){var r=Oh(!1);return r=W0.bind(null,ze,r.queue,!0,!1),en().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,i,o){var u=ze,m=en();if(Ge){if(o===void 0)throw Error(s(407));o=o()}else{if(o=i(),st===null)throw Error(s(349));(Ve&127)!==0||A0(u,i,o)}m.memoizedState=o;var y={value:o,getSnapshot:i};return m.queue=y,q0(N0.bind(null,u,y,r),[r]),u.flags|=2048,oa(9,{destroy:void 0},T0.bind(null,u,y,o,i),null),o},useId:function(){var r=en(),i=st.identifierPrefix;if(Ge){var o=cr,u=lr;o=(u&~(1<<32-Ee(u)-1)).toString(32)+o,i="_"+i+"R_"+o,o=Yc++,0<o&&(i+="H"+o.toString(32)),i+="_"}else o=kT++,i="_"+i+"r_"+o.toString(32)+"_";return r.memoizedState=i},useHostTransitionStatus:Uh,useFormState:$0,useActionState:$0,useOptimistic:function(r){var i=en();i.memoizedState=i.baseState=r;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=o,i=Ih.bind(null,ze,!0,o),o.dispatch=i,[r,i]},useMemoCache:Ah,useCacheRefresh:function(){return en().memoizedState=LT.bind(null,ze)},useEffectEvent:function(r){var i=en(),o={impl:r};return i.memoizedState=o,function(){if((We&2)!==0)throw Error(s(440));return o.impl.apply(void 0,arguments)}}},$h={readContext:Pt,use:Xc,useCallback:X0,useContext:Pt,useEffect:Rh,useImperativeHandle:G0,useInsertionEffect:V0,useLayoutEffect:F0,useMemo:K0,useReducer:Kc,useRef:P0,useState:function(){return Kc(Rr)},useDebugValue:kh,useDeferredValue:function(r,i){var o=wt();return Q0(o,tt.memoizedState,r,i)},useTransition:function(){var r=Kc(Rr)[0],i=wt().memoizedState;return[typeof r=="boolean"?r:Oo(r),i]},useSyncExternalStore:C0,useId:ev,useHostTransitionStatus:Uh,useFormState:L0,useActionState:L0,useOptimistic:function(r,i){var o=wt();return R0(o,tt,r,i)},useMemoCache:Ah,useCacheRefresh:tv};$h.useEffectEvent=H0;var av={readContext:Pt,use:Xc,useCallback:X0,useContext:Pt,useEffect:Rh,useImperativeHandle:G0,useInsertionEffect:V0,useLayoutEffect:F0,useMemo:K0,useReducer:Nh,useRef:P0,useState:function(){return Nh(Rr)},useDebugValue:kh,useDeferredValue:function(r,i){var o=wt();return tt===null?Mh(o,r,i):Q0(o,tt.memoizedState,r,i)},useTransition:function(){var r=Nh(Rr)[0],i=wt().memoizedState;return[typeof r=="boolean"?r:Oo(r),i]},useSyncExternalStore:C0,useId:ev,useHostTransitionStatus:Uh,useFormState:B0,useActionState:B0,useOptimistic:function(r,i){var o=wt();return tt!==null?R0(o,tt,r,i):(o.baseState=r,[r,o.queue.dispatch])},useMemoCache:Ah,useCacheRefresh:tv};av.useEffectEvent=H0;function Lh(r,i,o,u){i=r.memoizedState,o=o(u,i),o=o==null?i:p({},i,o),r.memoizedState=o,r.lanes===0&&(r.updateQueue.baseState=o)}var zh={enqueueSetState:function(r,i,o){r=r._reactInternals;var u=Sn(),m=ms(u);m.payload=i,o!=null&&(m.callback=o),i=ps(r,m,u),i!==null&&(un(i,r,u),Co(i,r,u))},enqueueReplaceState:function(r,i,o){r=r._reactInternals;var u=Sn(),m=ms(u);m.tag=1,m.payload=i,o!=null&&(m.callback=o),i=ps(r,m,u),i!==null&&(un(i,r,u),Co(i,r,u))},enqueueForceUpdate:function(r,i){r=r._reactInternals;var o=Sn(),u=ms(o);u.tag=2,i!=null&&(u.callback=i),i=ps(r,u,o),i!==null&&(un(i,r,o),Co(i,r,o))}};function ov(r,i,o,u,m,y,T){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(u,y,T):i.prototype&&i.prototype.isPureReactComponent?!yo(o,u)||!yo(m,y):!0}function lv(r,i,o,u){r=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(o,u),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(o,u),i.state!==r&&zh.enqueueReplaceState(i,i.state,null)}function ai(r,i){var o=i;if("ref"in i){o={};for(var u in i)u!=="ref"&&(o[u]=i[u])}if(r=r.defaultProps){o===i&&(o=p({},o));for(var m in r)o[m]===void 0&&(o[m]=r[m])}return o}function cv(r){jc(r)}function uv(r){console.error(r)}function dv(r){jc(r)}function Zc(r,i){try{var o=r.onUncaughtError;o(i.value,{componentStack:i.stack})}catch(u){setTimeout(function(){throw u})}}function fv(r,i,o){try{var u=r.onCaughtError;u(o.value,{componentStack:o.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(m){setTimeout(function(){throw m})}}function Bh(r,i,o){return o=ms(o),o.tag=3,o.payload={element:null},o.callback=function(){Zc(r,i)},o}function hv(r){return r=ms(r),r.tag=3,r}function mv(r,i,o,u){var m=o.type.getDerivedStateFromError;if(typeof m=="function"){var y=u.value;r.payload=function(){return m(y)},r.callback=function(){fv(i,o,u)}}var T=o.stateNode;T!==null&&typeof T.componentDidCatch=="function"&&(r.callback=function(){fv(i,o,u),typeof m!="function"&&(ws===null?ws=new Set([this]):ws.add(this));var U=u.stack;this.componentDidCatch(u.value,{componentStack:U!==null?U:""})})}function BT(r,i,o,u,m){if(o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(i=o.alternate,i!==null&&Zi(i,o,m,!0),o=bn.current,o!==null){switch(o.tag){case 31:case 13:return Ln===null?du():o.alternate===null&&bt===0&&(bt=3),o.flags&=-257,o.flags|=65536,o.lanes=m,u===Bc?o.flags|=16384:(i=o.updateQueue,i===null?o.updateQueue=new Set([u]):i.add(u),dm(r,u,m)),!1;case 22:return o.flags|=65536,u===Bc?o.flags|=16384:(i=o.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([u])},o.updateQueue=i):(o=i.retryQueue,o===null?i.retryQueue=new Set([u]):o.add(u)),dm(r,u,m)),!1}throw Error(s(435,o.tag))}return dm(r,u,m),du(),!1}if(Ge)return i=bn.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=m,u!==ih&&(r=Error(s(422),{cause:u}),_o(Dn(r,o)))):(u!==ih&&(i=Error(s(423),{cause:u}),_o(Dn(i,o))),r=r.current.alternate,r.flags|=65536,m&=-m,r.lanes|=m,u=Dn(u,o),m=Bh(r.stateNode,u,m),gh(r,m),bt!==4&&(bt=2)),!1;var y=Error(s(520),{cause:u});if(y=Dn(y,o),zo===null?zo=[y]:zo.push(y),bt!==4&&(bt=2),i===null)return!0;u=Dn(u,o),o=i;do{switch(o.tag){case 3:return o.flags|=65536,r=m&-m,o.lanes|=r,r=Bh(o.stateNode,u,r),gh(o,r),!1;case 1:if(i=o.type,y=o.stateNode,(o.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(ws===null||!ws.has(y))))return o.flags|=65536,m&=-m,o.lanes|=m,m=hv(m),mv(m,r,o,u),gh(o,m),!1}o=o.return}while(o!==null);return!1}var Ph=Error(s(461)),Ct=!1;function qt(r,i,o,u){i.child=r===null?v0(i,null,o,u):si(i,r.child,o,u)}function pv(r,i,o,u,m){o=o.render;var y=i.ref;if("ref"in u){var T={};for(var U in u)U!=="ref"&&(T[U]=u[U])}else T=u;return ei(i),u=xh(r,i,o,T,y,m),U=Sh(),r!==null&&!Ct?(Eh(r,i,m),kr(r,i,m)):(Ge&&U&&rh(i),i.flags|=1,qt(r,i,u,m),i.child)}function gv(r,i,o,u,m){if(r===null){var y=o.type;return typeof y=="function"&&!eh(y)&&y.defaultProps===void 0&&o.compare===null?(i.tag=15,i.type=y,yv(r,i,y,u,m)):(r=Dc(o.type,null,u,i,i.mode,m),r.ref=i.ref,r.return=i,i.child=r)}if(y=r.child,!Kh(r,m)){var T=y.memoizedProps;if(o=o.compare,o=o!==null?o:yo,o(T,u)&&r.ref===i.ref)return kr(r,i,m)}return i.flags|=1,r=Ar(y,u),r.ref=i.ref,r.return=i,i.child=r}function yv(r,i,o,u,m){if(r!==null){var y=r.memoizedProps;if(yo(y,u)&&r.ref===i.ref)if(Ct=!1,i.pendingProps=u=y,Kh(r,m))(r.flags&131072)!==0&&(Ct=!0);else return i.lanes=r.lanes,kr(r,i,m)}return qh(r,i,o,u,m)}function vv(r,i,o,u){var m=u.children,y=r!==null?r.memoizedState:null;if(r===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((i.flags&128)!==0){if(y=y!==null?y.baseLanes|o:o,r!==null){for(u=i.child=r.child,m=0;u!==null;)m=m|u.lanes|u.childLanes,u=u.sibling;u=m&~y}else u=0,i.child=null;return bv(r,i,y,o,u)}if((o&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},r!==null&&Lc(i,y!==null?y.cachePool:null),y!==null?w0(i,y):vh(),x0(i);else return u=i.lanes=536870912,bv(r,i,y!==null?y.baseLanes|o:o,o,u)}else y!==null?(Lc(i,y.cachePool),w0(i,y),ys(),i.memoizedState=null):(r!==null&&Lc(i,null),vh(),ys());return qt(r,i,m,o),i.child}function ko(r,i){return r!==null&&r.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function bv(r,i,o,u,m){var y=fh();return y=y===null?null:{parent:St._currentValue,pool:y},i.memoizedState={baseLanes:o,cachePool:y},r!==null&&Lc(i,null),vh(),x0(i),r!==null&&Zi(r,i,u,!0),i.childLanes=m,null}function eu(r,i){return i=nu({mode:i.mode,children:i.children},r.mode),i.ref=r.ref,r.child=i,i.return=r,i}function _v(r,i,o){return si(i,r.child,null,o),r=eu(i,i.pendingProps),r.flags|=2,_n(i),i.memoizedState=null,r}function PT(r,i,o){var u=i.pendingProps,m=(i.flags&128)!==0;if(i.flags&=-129,r===null){if(Ge){if(u.mode==="hidden")return r=eu(i,u),i.lanes=536870912,ko(null,r);if(_h(i),(r=lt)?(r=kb(r,$n),r=r!==null&&r.data==="&"?r:null,r!==null&&(i.memoizedState={dehydrated:r,treeContext:cs!==null?{id:lr,overflow:cr}:null,retryLane:536870912,hydrationErrors:null},o=r0(r),o.return=i,i.child=o,Bt=i,lt=null)):r=null,r===null)throw ds(i);return i.lanes=536870912,null}return eu(i,u)}var y=r.memoizedState;if(y!==null){var T=y.dehydrated;if(_h(i),m)if(i.flags&256)i.flags&=-257,i=_v(r,i,o);else if(i.memoizedState!==null)i.child=r.child,i.flags|=128,i=null;else throw Error(s(558));else if(Ct||Zi(r,i,o,!1),m=(o&r.childLanes)!==0,Ct||m){if(u=st,u!==null&&(T=fc(u,o),T!==0&&T!==y.retryLane))throw y.retryLane=T,Qs(r,T),un(u,r,T),Ph;du(),i=_v(r,i,o)}else r=y.treeContext,lt=zn(T.nextSibling),Bt=i,Ge=!0,us=null,$n=!1,r!==null&&a0(i,r),i=eu(i,u),i.flags|=4096;return i}return r=Ar(r.child,{mode:u.mode,children:u.children}),r.ref=i.ref,i.child=r,r.return=i,r}function tu(r,i){var o=i.ref;if(o===null)r!==null&&r.ref!==null&&(i.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(s(284));(r===null||r.ref!==o)&&(i.flags|=4194816)}}function qh(r,i,o,u,m){return ei(i),o=xh(r,i,o,u,void 0,m),u=Sh(),r!==null&&!Ct?(Eh(r,i,m),kr(r,i,m)):(Ge&&u&&rh(i),i.flags|=1,qt(r,i,o,m),i.child)}function wv(r,i,o,u,m,y){return ei(i),i.updateQueue=null,o=E0(i,u,o,m),S0(r),u=Sh(),r!==null&&!Ct?(Eh(r,i,y),kr(r,i,y)):(Ge&&u&&rh(i),i.flags|=1,qt(r,i,o,y),i.child)}function xv(r,i,o,u,m){if(ei(i),i.stateNode===null){var y=Ki,T=o.contextType;typeof T=="object"&&T!==null&&(y=Pt(T)),y=new o(u,y),i.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=zh,i.stateNode=y,y._reactInternals=i,y=i.stateNode,y.props=u,y.state=i.memoizedState,y.refs={},mh(i),T=o.contextType,y.context=typeof T=="object"&&T!==null?Pt(T):Ki,y.state=i.memoizedState,T=o.getDerivedStateFromProps,typeof T=="function"&&(Lh(i,o,T,u),y.state=i.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(T=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),T!==y.state&&zh.enqueueReplaceState(y,y.state,null),To(i,u,y,m),Ao(),y.state=i.memoizedState),typeof y.componentDidMount=="function"&&(i.flags|=4194308),u=!0}else if(r===null){y=i.stateNode;var U=i.memoizedProps,Y=ai(o,U);y.props=Y;var ne=y.context,le=o.contextType;T=Ki,typeof le=="object"&&le!==null&&(T=Pt(le));var fe=o.getDerivedStateFromProps;le=typeof fe=="function"||typeof y.getSnapshotBeforeUpdate=="function",U=i.pendingProps!==U,le||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(U||ne!==T)&&lv(i,y,u,T),hs=!1;var se=i.memoizedState;y.state=se,To(i,u,y,m),Ao(),ne=i.memoizedState,U||se!==ne||hs?(typeof fe=="function"&&(Lh(i,o,fe,u),ne=i.memoizedState),(Y=hs||ov(i,o,Y,u,se,ne,T))?(le||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(i.flags|=4194308)):(typeof y.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=u,i.memoizedState=ne),y.props=u,y.state=ne,y.context=T,u=Y):(typeof y.componentDidMount=="function"&&(i.flags|=4194308),u=!1)}else{y=i.stateNode,ph(r,i),T=i.memoizedProps,le=ai(o,T),y.props=le,fe=i.pendingProps,se=y.context,ne=o.contextType,Y=Ki,typeof ne=="object"&&ne!==null&&(Y=Pt(ne)),U=o.getDerivedStateFromProps,(ne=typeof U=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(T!==fe||se!==Y)&&lv(i,y,u,Y),hs=!1,se=i.memoizedState,y.state=se,To(i,u,y,m),Ao();var ae=i.memoizedState;T!==fe||se!==ae||hs||r!==null&&r.dependencies!==null&&Ic(r.dependencies)?(typeof U=="function"&&(Lh(i,o,U,u),ae=i.memoizedState),(le=hs||ov(i,o,le,u,se,ae,Y)||r!==null&&r.dependencies!==null&&Ic(r.dependencies))?(ne||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(u,ae,Y),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(u,ae,Y)),typeof y.componentDidUpdate=="function"&&(i.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof y.componentDidUpdate!="function"||T===r.memoizedProps&&se===r.memoizedState||(i.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||T===r.memoizedProps&&se===r.memoizedState||(i.flags|=1024),i.memoizedProps=u,i.memoizedState=ae),y.props=u,y.state=ae,y.context=Y,u=le):(typeof y.componentDidUpdate!="function"||T===r.memoizedProps&&se===r.memoizedState||(i.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||T===r.memoizedProps&&se===r.memoizedState||(i.flags|=1024),u=!1)}return y=u,tu(r,i),u=(i.flags&128)!==0,y||u?(y=i.stateNode,o=u&&typeof o.getDerivedStateFromError!="function"?null:y.render(),i.flags|=1,r!==null&&u?(i.child=si(i,r.child,null,m),i.child=si(i,null,o,m)):qt(r,i,o,m),i.memoizedState=y.state,r=i.child):r=kr(r,i,m),r}function Sv(r,i,o,u){return Js(),i.flags|=256,qt(r,i,o,u),i.child}var Hh={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Vh(r){return{baseLanes:r,cachePool:f0()}}function Fh(r,i,o){return r=r!==null?r.childLanes&~o:0,i&&(r|=xn),r}function Ev(r,i,o){var u=i.pendingProps,m=!1,y=(i.flags&128)!==0,T;if((T=y)||(T=r!==null&&r.memoizedState===null?!1:(_t.current&2)!==0),T&&(m=!0,i.flags&=-129),T=(i.flags&32)!==0,i.flags&=-33,r===null){if(Ge){if(m?gs(i):ys(),(r=lt)?(r=kb(r,$n),r=r!==null&&r.data!=="&"?r:null,r!==null&&(i.memoizedState={dehydrated:r,treeContext:cs!==null?{id:lr,overflow:cr}:null,retryLane:536870912,hydrationErrors:null},o=r0(r),o.return=i,i.child=o,Bt=i,lt=null)):r=null,r===null)throw ds(i);return Tm(r)?i.lanes=32:i.lanes=536870912,null}var U=u.children;return u=u.fallback,m?(ys(),m=i.mode,U=nu({mode:"hidden",children:U},m),u=Ws(u,m,o,null),U.return=i,u.return=i,U.sibling=u,i.child=U,u=i.child,u.memoizedState=Vh(o),u.childLanes=Fh(r,T,o),i.memoizedState=Hh,ko(null,u)):(gs(i),Yh(i,U))}var Y=r.memoizedState;if(Y!==null&&(U=Y.dehydrated,U!==null)){if(y)i.flags&256?(gs(i),i.flags&=-257,i=Gh(r,i,o)):i.memoizedState!==null?(ys(),i.child=r.child,i.flags|=128,i=null):(ys(),U=u.fallback,m=i.mode,u=nu({mode:"visible",children:u.children},m),U=Ws(U,m,o,null),U.flags|=2,u.return=i,U.return=i,u.sibling=U,i.child=u,si(i,r.child,null,o),u=i.child,u.memoizedState=Vh(o),u.childLanes=Fh(r,T,o),i.memoizedState=Hh,i=ko(null,u));else if(gs(i),Tm(U)){if(T=U.nextSibling&&U.nextSibling.dataset,T)var ne=T.dgst;T=ne,u=Error(s(419)),u.stack="",u.digest=T,_o({value:u,source:null,stack:null}),i=Gh(r,i,o)}else if(Ct||Zi(r,i,o,!1),T=(o&r.childLanes)!==0,Ct||T){if(T=st,T!==null&&(u=fc(T,o),u!==0&&u!==Y.retryLane))throw Y.retryLane=u,Qs(r,u),un(T,r,u),Ph;Am(U)||du(),i=Gh(r,i,o)}else Am(U)?(i.flags|=192,i.child=r.child,i=null):(r=Y.treeContext,lt=zn(U.nextSibling),Bt=i,Ge=!0,us=null,$n=!1,r!==null&&a0(i,r),i=Yh(i,u.children),i.flags|=4096);return i}return m?(ys(),U=u.fallback,m=i.mode,Y=r.child,ne=Y.sibling,u=Ar(Y,{mode:"hidden",children:u.children}),u.subtreeFlags=Y.subtreeFlags&65011712,ne!==null?U=Ar(ne,U):(U=Ws(U,m,o,null),U.flags|=2),U.return=i,u.return=i,u.sibling=U,i.child=u,ko(null,u),u=i.child,U=r.child.memoizedState,U===null?U=Vh(o):(m=U.cachePool,m!==null?(Y=St._currentValue,m=m.parent!==Y?{parent:Y,pool:Y}:m):m=f0(),U={baseLanes:U.baseLanes|o,cachePool:m}),u.memoizedState=U,u.childLanes=Fh(r,T,o),i.memoizedState=Hh,ko(r.child,u)):(gs(i),o=r.child,r=o.sibling,o=Ar(o,{mode:"visible",children:u.children}),o.return=i,o.sibling=null,r!==null&&(T=i.deletions,T===null?(i.deletions=[r],i.flags|=16):T.push(r)),i.child=o,i.memoizedState=null,o)}function Yh(r,i){return i=nu({mode:"visible",children:i},r.mode),i.return=r,r.child=i}function nu(r,i){return r=vn(22,r,null,i),r.lanes=0,r}function Gh(r,i,o){return si(i,r.child,null,o),r=Yh(i,i.pendingProps.children),r.flags|=2,i.memoizedState=null,r}function Cv(r,i,o){r.lanes|=i;var u=r.alternate;u!==null&&(u.lanes|=i),lh(r.return,i,o)}function Xh(r,i,o,u,m,y){var T=r.memoizedState;T===null?r.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:m,treeForkCount:y}:(T.isBackwards=i,T.rendering=null,T.renderingStartTime=0,T.last=u,T.tail=o,T.tailMode=m,T.treeForkCount=y)}function Av(r,i,o){var u=i.pendingProps,m=u.revealOrder,y=u.tail;u=u.children;var T=_t.current,U=(T&2)!==0;if(U?(T=T&1|2,i.flags|=128):T&=1,W(_t,T),qt(r,i,u,o),u=Ge?bo:0,!U&&r!==null&&(r.flags&128)!==0)e:for(r=i.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&Cv(r,o,i);else if(r.tag===19)Cv(r,o,i);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break e;for(;r.sibling===null;){if(r.return===null||r.return===i)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}switch(m){case"forwards":for(o=i.child,m=null;o!==null;)r=o.alternate,r!==null&&Vc(r)===null&&(m=o),o=o.sibling;o=m,o===null?(m=i.child,i.child=null):(m=o.sibling,o.sibling=null),Xh(i,!1,m,o,y,u);break;case"backwards":case"unstable_legacy-backwards":for(o=null,m=i.child,i.child=null;m!==null;){if(r=m.alternate,r!==null&&Vc(r)===null){i.child=m;break}r=m.sibling,m.sibling=o,o=m,m=r}Xh(i,!0,o,null,y,u);break;case"together":Xh(i,!1,null,null,void 0,u);break;default:i.memoizedState=null}return i.child}function kr(r,i,o){if(r!==null&&(i.dependencies=r.dependencies),_s|=i.lanes,(o&i.childLanes)===0)if(r!==null){if(Zi(r,i,o,!1),(o&i.childLanes)===0)return null}else return null;if(r!==null&&i.child!==r.child)throw Error(s(153));if(i.child!==null){for(r=i.child,o=Ar(r,r.pendingProps),i.child=o,o.return=i;r.sibling!==null;)r=r.sibling,o=o.sibling=Ar(r,r.pendingProps),o.return=i;o.sibling=null}return i.child}function Kh(r,i){return(r.lanes&i)!==0?!0:(r=r.dependencies,!!(r!==null&&Ic(r)))}function qT(r,i,o){switch(i.tag){case 3:ie(i,i.stateNode.containerInfo),fs(i,St,r.memoizedState.cache),Js();break;case 27:case 5:de(i);break;case 4:ie(i,i.stateNode.containerInfo);break;case 10:fs(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,_h(i),null;break;case 13:var u=i.memoizedState;if(u!==null)return u.dehydrated!==null?(gs(i),i.flags|=128,null):(o&i.child.childLanes)!==0?Ev(r,i,o):(gs(i),r=kr(r,i,o),r!==null?r.sibling:null);gs(i);break;case 19:var m=(r.flags&128)!==0;if(u=(o&i.childLanes)!==0,u||(Zi(r,i,o,!1),u=(o&i.childLanes)!==0),m){if(u)return Av(r,i,o);i.flags|=128}if(m=i.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),W(_t,_t.current),u)break;return null;case 22:return i.lanes=0,vv(r,i,o,i.pendingProps);case 24:fs(i,St,r.memoizedState.cache)}return kr(r,i,o)}function Tv(r,i,o){if(r!==null)if(r.memoizedProps!==i.pendingProps)Ct=!0;else{if(!Kh(r,o)&&(i.flags&128)===0)return Ct=!1,qT(r,i,o);Ct=(r.flags&131072)!==0}else Ct=!1,Ge&&(i.flags&1048576)!==0&&i0(i,bo,i.index);switch(i.lanes=0,i.tag){case 16:e:{var u=i.pendingProps;if(r=ni(i.elementType),i.type=r,typeof r=="function")eh(r)?(u=ai(r,u),i.tag=1,i=xv(null,i,r,u,o)):(i.tag=0,i=qh(null,i,r,u,o));else{if(r!=null){var m=r.$$typeof;if(m===A){i.tag=11,i=pv(null,i,r,u,o);break e}else if(m===D){i.tag=14,i=gv(null,i,r,u,o);break e}}throw i=$(r)||r,Error(s(306,i,""))}}return i;case 0:return qh(r,i,i.type,i.pendingProps,o);case 1:return u=i.type,m=ai(u,i.pendingProps),xv(r,i,u,m,o);case 3:e:{if(ie(i,i.stateNode.containerInfo),r===null)throw Error(s(387));u=i.pendingProps;var y=i.memoizedState;m=y.element,ph(r,i),To(i,u,null,o);var T=i.memoizedState;if(u=T.cache,fs(i,St,u),u!==y.cache&&ch(i,[St],o,!0),Ao(),u=T.element,y.isDehydrated)if(y={element:u,isDehydrated:!1,cache:T.cache},i.updateQueue.baseState=y,i.memoizedState=y,i.flags&256){i=Sv(r,i,u,o);break e}else if(u!==m){m=Dn(Error(s(424)),i),_o(m),i=Sv(r,i,u,o);break e}else{switch(r=i.stateNode.containerInfo,r.nodeType){case 9:r=r.body;break;default:r=r.nodeName==="HTML"?r.ownerDocument.body:r}for(lt=zn(r.firstChild),Bt=i,Ge=!0,us=null,$n=!0,o=v0(i,null,u,o),i.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(Js(),u===m){i=kr(r,i,o);break e}qt(r,i,u,o)}i=i.child}return i;case 26:return tu(r,i),r===null?(o=Lb(i.type,null,i.pendingProps,null))?i.memoizedState=o:Ge||(o=i.type,r=i.pendingProps,u=vu(ge.current).createElement(o),u[jt]=i,u[Xt]=r,Ht(u,o,r),xt(u),i.stateNode=u):i.memoizedState=Lb(i.type,r.memoizedProps,i.pendingProps,r.memoizedState),null;case 27:return de(i),r===null&&Ge&&(u=i.stateNode=Ub(i.type,i.pendingProps,ge.current),Bt=i,$n=!0,m=lt,Cs(i.type)?(Nm=m,lt=zn(u.firstChild)):lt=m),qt(r,i,i.pendingProps.children,o),tu(r,i),r===null&&(i.flags|=4194304),i.child;case 5:return r===null&&Ge&&((m=u=lt)&&(u=vN(u,i.type,i.pendingProps,$n),u!==null?(i.stateNode=u,Bt=i,lt=zn(u.firstChild),$n=!1,m=!0):m=!1),m||ds(i)),de(i),m=i.type,y=i.pendingProps,T=r!==null?r.memoizedProps:null,u=y.children,Sm(m,y)?u=null:T!==null&&Sm(m,T)&&(i.flags|=32),i.memoizedState!==null&&(m=xh(r,i,MT,null,null,o),Go._currentValue=m),tu(r,i),qt(r,i,u,o),i.child;case 6:return r===null&&Ge&&((r=o=lt)&&(o=bN(o,i.pendingProps,$n),o!==null?(i.stateNode=o,Bt=i,lt=null,r=!0):r=!1),r||ds(i)),null;case 13:return Ev(r,i,o);case 4:return ie(i,i.stateNode.containerInfo),u=i.pendingProps,r===null?i.child=si(i,null,u,o):qt(r,i,u,o),i.child;case 11:return pv(r,i,i.type,i.pendingProps,o);case 7:return qt(r,i,i.pendingProps,o),i.child;case 8:return qt(r,i,i.pendingProps.children,o),i.child;case 12:return qt(r,i,i.pendingProps.children,o),i.child;case 10:return u=i.pendingProps,fs(i,i.type,u.value),qt(r,i,u.children,o),i.child;case 9:return m=i.type._context,u=i.pendingProps.children,ei(i),m=Pt(m),u=u(m),i.flags|=1,qt(r,i,u,o),i.child;case 14:return gv(r,i,i.type,i.pendingProps,o);case 15:return yv(r,i,i.type,i.pendingProps,o);case 19:return Av(r,i,o);case 31:return PT(r,i,o);case 22:return vv(r,i,o,i.pendingProps);case 24:return ei(i),u=Pt(St),r===null?(m=fh(),m===null&&(m=st,y=uh(),m.pooledCache=y,y.refCount++,y!==null&&(m.pooledCacheLanes|=o),m=y),i.memoizedState={parent:u,cache:m},mh(i),fs(i,St,m)):((r.lanes&o)!==0&&(ph(r,i),To(i,null,null,o),Ao()),m=r.memoizedState,y=i.memoizedState,m.parent!==u?(m={parent:u,cache:u},i.memoizedState=m,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=m),fs(i,St,u)):(u=y.cache,fs(i,St,u),u!==m.cache&&ch(i,[St],o,!0))),qt(r,i,i.pendingProps.children,o),i.child;case 29:throw i.pendingProps}throw Error(s(156,i.tag))}function Mr(r){r.flags|=4}function Qh(r,i,o,u,m){if((i=(r.mode&32)!==0)&&(i=!1),i){if(r.flags|=16777216,(m&335544128)===m)if(r.stateNode.complete)r.flags|=8192;else if(eb())r.flags|=8192;else throw ri=Bc,hh}else r.flags&=-16777217}function Nv(r,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!Hb(i))if(eb())r.flags|=8192;else throw ri=Bc,hh}function ru(r,i){i!==null&&(r.flags|=4),r.flags&16384&&(i=r.tag!==22?cc():536870912,r.lanes|=i,da|=i)}function Mo(r,i){if(!Ge)switch(r.tailMode){case"hidden":i=r.tail;for(var o=null;i!==null;)i.alternate!==null&&(o=i),i=i.sibling;o===null?r.tail=null:o.sibling=null;break;case"collapsed":o=r.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?i||r.tail===null?r.tail=null:r.tail.sibling=null:u.sibling=null}}function ct(r){var i=r.alternate!==null&&r.alternate.child===r.child,o=0,u=0;if(i)for(var m=r.child;m!==null;)o|=m.lanes|m.childLanes,u|=m.subtreeFlags&65011712,u|=m.flags&65011712,m.return=r,m=m.sibling;else for(m=r.child;m!==null;)o|=m.lanes|m.childLanes,u|=m.subtreeFlags,u|=m.flags,m.return=r,m=m.sibling;return r.subtreeFlags|=u,r.childLanes=o,i}function HT(r,i,o){var u=i.pendingProps;switch(sh(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ct(i),null;case 1:return ct(i),null;case 3:return o=i.stateNode,u=null,r!==null&&(u=r.memoizedState.cache),i.memoizedState.cache!==u&&(i.flags|=2048),Or(St),oe(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(r===null||r.child===null)&&(Ji(i)?Mr(i):r===null||r.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,ah())),ct(i),null;case 26:var m=i.type,y=i.memoizedState;return r===null?(Mr(i),y!==null?(ct(i),Nv(i,y)):(ct(i),Qh(i,m,null,u,o))):y?y!==r.memoizedState?(Mr(i),ct(i),Nv(i,y)):(ct(i),i.flags&=-16777217):(r=r.memoizedProps,r!==u&&Mr(i),ct(i),Qh(i,m,r,u,o)),null;case 27:if(pe(i),o=ge.current,m=i.type,r!==null&&i.stateNode!=null)r.memoizedProps!==u&&Mr(i);else{if(!u){if(i.stateNode===null)throw Error(s(166));return ct(i),null}r=ee.current,Ji(i)?o0(i):(r=Ub(m,u,o),i.stateNode=r,Mr(i))}return ct(i),null;case 5:if(pe(i),m=i.type,r!==null&&i.stateNode!=null)r.memoizedProps!==u&&Mr(i);else{if(!u){if(i.stateNode===null)throw Error(s(166));return ct(i),null}if(y=ee.current,Ji(i))o0(i);else{var T=vu(ge.current);switch(y){case 1:y=T.createElementNS("http://www.w3.org/2000/svg",m);break;case 2:y=T.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;default:switch(m){case"svg":y=T.createElementNS("http://www.w3.org/2000/svg",m);break;case"math":y=T.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;case"script":y=T.createElement("div"),y.innerHTML="<script><\/script>",y=y.removeChild(y.firstChild);break;case"select":y=typeof u.is=="string"?T.createElement("select",{is:u.is}):T.createElement("select"),u.multiple?y.multiple=!0:u.size&&(y.size=u.size);break;default:y=typeof u.is=="string"?T.createElement(m,{is:u.is}):T.createElement(m)}}y[jt]=i,y[Xt]=u;e:for(T=i.child;T!==null;){if(T.tag===5||T.tag===6)y.appendChild(T.stateNode);else if(T.tag!==4&&T.tag!==27&&T.child!==null){T.child.return=T,T=T.child;continue}if(T===i)break e;for(;T.sibling===null;){if(T.return===null||T.return===i)break e;T=T.return}T.sibling.return=T.return,T=T.sibling}i.stateNode=y;e:switch(Ht(y,m,u),m){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&Mr(i)}}return ct(i),Qh(i,i.type,r===null?null:r.memoizedProps,i.pendingProps,o),null;case 6:if(r&&i.stateNode!=null)r.memoizedProps!==u&&Mr(i);else{if(typeof u!="string"&&i.stateNode===null)throw Error(s(166));if(r=ge.current,Ji(i)){if(r=i.stateNode,o=i.memoizedProps,u=null,m=Bt,m!==null)switch(m.tag){case 27:case 5:u=m.memoizedProps}r[jt]=i,r=!!(r.nodeValue===o||u!==null&&u.suppressHydrationWarning===!0||Eb(r.nodeValue,o)),r||ds(i,!0)}else r=vu(r).createTextNode(u),r[jt]=i,i.stateNode=r}return ct(i),null;case 31:if(o=i.memoizedState,r===null||r.memoizedState!==null){if(u=Ji(i),o!==null){if(r===null){if(!u)throw Error(s(318));if(r=i.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(s(557));r[jt]=i}else Js(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;ct(i),r=!1}else o=ah(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=o),r=!0;if(!r)return i.flags&256?(_n(i),i):(_n(i),null);if((i.flags&128)!==0)throw Error(s(558))}return ct(i),null;case 13:if(u=i.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(m=Ji(i),u!==null&&u.dehydrated!==null){if(r===null){if(!m)throw Error(s(318));if(m=i.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(s(317));m[jt]=i}else Js(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;ct(i),m=!1}else m=ah(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=m),m=!0;if(!m)return i.flags&256?(_n(i),i):(_n(i),null)}return _n(i),(i.flags&128)!==0?(i.lanes=o,i):(o=u!==null,r=r!==null&&r.memoizedState!==null,o&&(u=i.child,m=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(m=u.alternate.memoizedState.cachePool.pool),y=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(y=u.memoizedState.cachePool.pool),y!==m&&(u.flags|=2048)),o!==r&&o&&(i.child.flags|=8192),ru(i,i.updateQueue),ct(i),null);case 4:return oe(),r===null&&vm(i.stateNode.containerInfo),ct(i),null;case 10:return Or(i.type),ct(i),null;case 19:if(B(_t),u=i.memoizedState,u===null)return ct(i),null;if(m=(i.flags&128)!==0,y=u.rendering,y===null)if(m)Mo(u,!1);else{if(bt!==0||r!==null&&(r.flags&128)!==0)for(r=i.child;r!==null;){if(y=Vc(r),y!==null){for(i.flags|=128,Mo(u,!1),r=y.updateQueue,i.updateQueue=r,ru(i,r),i.subtreeFlags=0,r=o,o=i.child;o!==null;)n0(o,r),o=o.sibling;return W(_t,_t.current&1|2),Ge&&Tr(i,u.treeForkCount),i.child}r=r.sibling}u.tail!==null&&dt()>lu&&(i.flags|=128,m=!0,Mo(u,!1),i.lanes=4194304)}else{if(!m)if(r=Vc(y),r!==null){if(i.flags|=128,m=!0,r=r.updateQueue,i.updateQueue=r,ru(i,r),Mo(u,!0),u.tail===null&&u.tailMode==="hidden"&&!y.alternate&&!Ge)return ct(i),null}else 2*dt()-u.renderingStartTime>lu&&o!==536870912&&(i.flags|=128,m=!0,Mo(u,!1),i.lanes=4194304);u.isBackwards?(y.sibling=i.child,i.child=y):(r=u.last,r!==null?r.sibling=y:i.child=y,u.last=y)}return u.tail!==null?(r=u.tail,u.rendering=r,u.tail=r.sibling,u.renderingStartTime=dt(),r.sibling=null,o=_t.current,W(_t,m?o&1|2:o&1),Ge&&Tr(i,u.treeForkCount),r):(ct(i),null);case 22:case 23:return _n(i),bh(),u=i.memoizedState!==null,r!==null?r.memoizedState!==null!==u&&(i.flags|=8192):u&&(i.flags|=8192),u?(o&536870912)!==0&&(i.flags&128)===0&&(ct(i),i.subtreeFlags&6&&(i.flags|=8192)):ct(i),o=i.updateQueue,o!==null&&ru(i,o.retryQueue),o=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(o=r.memoizedState.cachePool.pool),u=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(u=i.memoizedState.cachePool.pool),u!==o&&(i.flags|=2048),r!==null&&B(ti),null;case 24:return o=null,r!==null&&(o=r.memoizedState.cache),i.memoizedState.cache!==o&&(i.flags|=2048),Or(St),ct(i),null;case 25:return null;case 30:return null}throw Error(s(156,i.tag))}function VT(r,i){switch(sh(i),i.tag){case 1:return r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 3:return Or(St),oe(),r=i.flags,(r&65536)!==0&&(r&128)===0?(i.flags=r&-65537|128,i):null;case 26:case 27:case 5:return pe(i),null;case 31:if(i.memoizedState!==null){if(_n(i),i.alternate===null)throw Error(s(340));Js()}return r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 13:if(_n(i),r=i.memoizedState,r!==null&&r.dehydrated!==null){if(i.alternate===null)throw Error(s(340));Js()}return r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 19:return B(_t),null;case 4:return oe(),null;case 10:return Or(i.type),null;case 22:case 23:return _n(i),bh(),r!==null&&B(ti),r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 24:return Or(St),null;case 25:return null;default:return null}}function Ov(r,i){switch(sh(i),i.tag){case 3:Or(St),oe();break;case 26:case 27:case 5:pe(i);break;case 4:oe();break;case 31:i.memoizedState!==null&&_n(i);break;case 13:_n(i);break;case 19:B(_t);break;case 10:Or(i.type);break;case 22:case 23:_n(i),bh(),r!==null&&B(ti);break;case 24:Or(St)}}function Do(r,i){try{var o=i.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var m=u.next;o=m;do{if((o.tag&r)===r){u=void 0;var y=o.create,T=o.inst;u=y(),T.destroy=u}o=o.next}while(o!==m)}}catch(U){et(i,i.return,U)}}function vs(r,i,o){try{var u=i.updateQueue,m=u!==null?u.lastEffect:null;if(m!==null){var y=m.next;u=y;do{if((u.tag&r)===r){var T=u.inst,U=T.destroy;if(U!==void 0){T.destroy=void 0,m=i;var Y=o,ne=U;try{ne()}catch(le){et(m,Y,le)}}}u=u.next}while(u!==y)}}catch(le){et(i,i.return,le)}}function jv(r){var i=r.updateQueue;if(i!==null){var o=r.stateNode;try{_0(i,o)}catch(u){et(r,r.return,u)}}}function Rv(r,i,o){o.props=ai(r.type,r.memoizedProps),o.state=r.memoizedState;try{o.componentWillUnmount()}catch(u){et(r,i,u)}}function Uo(r,i){try{var o=r.ref;if(o!==null){switch(r.tag){case 26:case 27:case 5:var u=r.stateNode;break;case 30:u=r.stateNode;break;default:u=r.stateNode}typeof o=="function"?r.refCleanup=o(u):o.current=u}}catch(m){et(r,i,m)}}function ur(r,i){var o=r.ref,u=r.refCleanup;if(o!==null)if(typeof u=="function")try{u()}catch(m){et(r,i,m)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(m){et(r,i,m)}else o.current=null}function kv(r){var i=r.type,o=r.memoizedProps,u=r.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":o.autoFocus&&u.focus();break e;case"img":o.src?u.src=o.src:o.srcSet&&(u.srcset=o.srcSet)}}catch(m){et(r,r.return,m)}}function Wh(r,i,o){try{var u=r.stateNode;fN(u,r.type,o,i),u[Xt]=i}catch(m){et(r,r.return,m)}}function Mv(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&Cs(r.type)||r.tag===4}function Jh(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||Mv(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&Cs(r.type)||r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function Zh(r,i,o){var u=r.tag;if(u===5||u===6)r=r.stateNode,i?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(r,i):(i=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,i.appendChild(r),o=o._reactRootContainer,o!=null||i.onclick!==null||(i.onclick=Er));else if(u!==4&&(u===27&&Cs(r.type)&&(o=r.stateNode,i=null),r=r.child,r!==null))for(Zh(r,i,o),r=r.sibling;r!==null;)Zh(r,i,o),r=r.sibling}function su(r,i,o){var u=r.tag;if(u===5||u===6)r=r.stateNode,i?o.insertBefore(r,i):o.appendChild(r);else if(u!==4&&(u===27&&Cs(r.type)&&(o=r.stateNode),r=r.child,r!==null))for(su(r,i,o),r=r.sibling;r!==null;)su(r,i,o),r=r.sibling}function Dv(r){var i=r.stateNode,o=r.memoizedProps;try{for(var u=r.type,m=i.attributes;m.length;)i.removeAttributeNode(m[0]);Ht(i,u,o),i[jt]=r,i[Xt]=o}catch(y){et(r,r.return,y)}}var Dr=!1,At=!1,em=!1,Uv=typeof WeakSet=="function"?WeakSet:Set,Ut=null;function FT(r,i){if(r=r.containerInfo,wm=Cu,r=Gy(r),Gf(r)){if("selectionStart"in r)var o={start:r.selectionStart,end:r.selectionEnd};else e:{o=(o=r.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var m=u.anchorOffset,y=u.focusNode;u=u.focusOffset;try{o.nodeType,y.nodeType}catch{o=null;break e}var T=0,U=-1,Y=-1,ne=0,le=0,fe=r,se=null;t:for(;;){for(var ae;fe!==o||m!==0&&fe.nodeType!==3||(U=T+m),fe!==y||u!==0&&fe.nodeType!==3||(Y=T+u),fe.nodeType===3&&(T+=fe.nodeValue.length),(ae=fe.firstChild)!==null;)se=fe,fe=ae;for(;;){if(fe===r)break t;if(se===o&&++ne===m&&(U=T),se===y&&++le===u&&(Y=T),(ae=fe.nextSibling)!==null)break;fe=se,se=fe.parentNode}fe=ae}o=U===-1||Y===-1?null:{start:U,end:Y}}else o=null}o=o||{start:0,end:0}}else o=null;for(xm={focusedElem:r,selectionRange:o},Cu=!1,Ut=i;Ut!==null;)if(i=Ut,r=i.child,(i.subtreeFlags&1028)!==0&&r!==null)r.return=i,Ut=r;else for(;Ut!==null;){switch(i=Ut,y=i.alternate,r=i.flags,i.tag){case 0:if((r&4)!==0&&(r=i.updateQueue,r=r!==null?r.events:null,r!==null))for(o=0;o<r.length;o++)m=r[o],m.ref.impl=m.nextImpl;break;case 11:case 15:break;case 1:if((r&1024)!==0&&y!==null){r=void 0,o=i,m=y.memoizedProps,y=y.memoizedState,u=o.stateNode;try{var xe=ai(o.type,m);r=u.getSnapshotBeforeUpdate(xe,y),u.__reactInternalSnapshotBeforeUpdate=r}catch(De){et(o,o.return,De)}}break;case 3:if((r&1024)!==0){if(r=i.stateNode.containerInfo,o=r.nodeType,o===9)Cm(r);else if(o===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":Cm(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(s(163))}if(r=i.sibling,r!==null){r.return=i.return,Ut=r;break}Ut=i.return}}function Iv(r,i,o){var u=o.flags;switch(o.tag){case 0:case 11:case 15:Ir(r,o),u&4&&Do(5,o);break;case 1:if(Ir(r,o),u&4)if(r=o.stateNode,i===null)try{r.componentDidMount()}catch(T){et(o,o.return,T)}else{var m=ai(o.type,i.memoizedProps);i=i.memoizedState;try{r.componentDidUpdate(m,i,r.__reactInternalSnapshotBeforeUpdate)}catch(T){et(o,o.return,T)}}u&64&&jv(o),u&512&&Uo(o,o.return);break;case 3:if(Ir(r,o),u&64&&(r=o.updateQueue,r!==null)){if(i=null,o.child!==null)switch(o.child.tag){case 27:case 5:i=o.child.stateNode;break;case 1:i=o.child.stateNode}try{_0(r,i)}catch(T){et(o,o.return,T)}}break;case 27:i===null&&u&4&&Dv(o);case 26:case 5:Ir(r,o),i===null&&u&4&&kv(o),u&512&&Uo(o,o.return);break;case 12:Ir(r,o);break;case 31:Ir(r,o),u&4&&zv(r,o);break;case 13:Ir(r,o),u&4&&Bv(r,o),u&64&&(r=o.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(o=eN.bind(null,o),_N(r,o))));break;case 22:if(u=o.memoizedState!==null||Dr,!u){i=i!==null&&i.memoizedState!==null||At,m=Dr;var y=At;Dr=u,(At=i)&&!y?$r(r,o,(o.subtreeFlags&8772)!==0):Ir(r,o),Dr=m,At=y}break;case 30:break;default:Ir(r,o)}}function $v(r){var i=r.alternate;i!==null&&(r.alternate=null,$v(i)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(i=r.stateNode,i!==null&&ao(i)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var ht=null,an=!1;function Ur(r,i,o){for(o=o.child;o!==null;)Lv(r,i,o),o=o.sibling}function Lv(r,i,o){if(zt&&typeof zt.onCommitFiberUnmount=="function")try{zt.onCommitFiberUnmount(Vn,o)}catch{}switch(o.tag){case 26:At||ur(o,i),Ur(r,i,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:At||ur(o,i);var u=ht,m=an;Cs(o.type)&&(ht=o.stateNode,an=!1),Ur(r,i,o),Vo(o.stateNode),ht=u,an=m;break;case 5:At||ur(o,i);case 6:if(u=ht,m=an,ht=null,Ur(r,i,o),ht=u,an=m,ht!==null)if(an)try{(ht.nodeType===9?ht.body:ht.nodeName==="HTML"?ht.ownerDocument.body:ht).removeChild(o.stateNode)}catch(y){et(o,i,y)}else try{ht.removeChild(o.stateNode)}catch(y){et(o,i,y)}break;case 18:ht!==null&&(an?(r=ht,jb(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,o.stateNode),ba(r)):jb(ht,o.stateNode));break;case 4:u=ht,m=an,ht=o.stateNode.containerInfo,an=!0,Ur(r,i,o),ht=u,an=m;break;case 0:case 11:case 14:case 15:vs(2,o,i),At||vs(4,o,i),Ur(r,i,o);break;case 1:At||(ur(o,i),u=o.stateNode,typeof u.componentWillUnmount=="function"&&Rv(o,i,u)),Ur(r,i,o);break;case 21:Ur(r,i,o);break;case 22:At=(u=At)||o.memoizedState!==null,Ur(r,i,o),At=u;break;default:Ur(r,i,o)}}function zv(r,i){if(i.memoizedState===null&&(r=i.alternate,r!==null&&(r=r.memoizedState,r!==null))){r=r.dehydrated;try{ba(r)}catch(o){et(i,i.return,o)}}}function Bv(r,i){if(i.memoizedState===null&&(r=i.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{ba(r)}catch(o){et(i,i.return,o)}}function YT(r){switch(r.tag){case 31:case 13:case 19:var i=r.stateNode;return i===null&&(i=r.stateNode=new Uv),i;case 22:return r=r.stateNode,i=r._retryCache,i===null&&(i=r._retryCache=new Uv),i;default:throw Error(s(435,r.tag))}}function iu(r,i){var o=YT(r);i.forEach(function(u){if(!o.has(u)){o.add(u);var m=tN.bind(null,r,u);u.then(m,m)}})}function on(r,i){var o=i.deletions;if(o!==null)for(var u=0;u<o.length;u++){var m=o[u],y=r,T=i,U=T;e:for(;U!==null;){switch(U.tag){case 27:if(Cs(U.type)){ht=U.stateNode,an=!1;break e}break;case 5:ht=U.stateNode,an=!1;break e;case 3:case 4:ht=U.stateNode.containerInfo,an=!0;break e}U=U.return}if(ht===null)throw Error(s(160));Lv(y,T,m),ht=null,an=!1,y=m.alternate,y!==null&&(y.return=null),m.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)Pv(i,r),i=i.sibling}var Gn=null;function Pv(r,i){var o=r.alternate,u=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:on(i,r),ln(r),u&4&&(vs(3,r,r.return),Do(3,r),vs(5,r,r.return));break;case 1:on(i,r),ln(r),u&512&&(At||o===null||ur(o,o.return)),u&64&&Dr&&(r=r.updateQueue,r!==null&&(u=r.callbacks,u!==null&&(o=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=o===null?u:o.concat(u))));break;case 26:var m=Gn;if(on(i,r),ln(r),u&512&&(At||o===null||ur(o,o.return)),u&4){var y=o!==null?o.memoizedState:null;if(u=r.memoizedState,o===null)if(u===null)if(r.stateNode===null){e:{u=r.type,o=r.memoizedProps,m=m.ownerDocument||m;t:switch(u){case"title":y=m.getElementsByTagName("title")[0],(!y||y[Ys]||y[jt]||y.namespaceURI==="http://www.w3.org/2000/svg"||y.hasAttribute("itemprop"))&&(y=m.createElement(u),m.head.insertBefore(y,m.querySelector("head > title"))),Ht(y,u,o),y[jt]=r,xt(y),u=y;break e;case"link":var T=Pb("link","href",m).get(u+(o.href||""));if(T){for(var U=0;U<T.length;U++)if(y=T[U],y.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&y.getAttribute("rel")===(o.rel==null?null:o.rel)&&y.getAttribute("title")===(o.title==null?null:o.title)&&y.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){T.splice(U,1);break t}}y=m.createElement(u),Ht(y,u,o),m.head.appendChild(y);break;case"meta":if(T=Pb("meta","content",m).get(u+(o.content||""))){for(U=0;U<T.length;U++)if(y=T[U],y.getAttribute("content")===(o.content==null?null:""+o.content)&&y.getAttribute("name")===(o.name==null?null:o.name)&&y.getAttribute("property")===(o.property==null?null:o.property)&&y.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&y.getAttribute("charset")===(o.charSet==null?null:o.charSet)){T.splice(U,1);break t}}y=m.createElement(u),Ht(y,u,o),m.head.appendChild(y);break;default:throw Error(s(468,u))}y[jt]=r,xt(y),u=y}r.stateNode=u}else qb(m,r.type,r.stateNode);else r.stateNode=Bb(m,u,r.memoizedProps);else y!==u?(y===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):y.count--,u===null?qb(m,r.type,r.stateNode):Bb(m,u,r.memoizedProps)):u===null&&r.stateNode!==null&&Wh(r,r.memoizedProps,o.memoizedProps)}break;case 27:on(i,r),ln(r),u&512&&(At||o===null||ur(o,o.return)),o!==null&&u&4&&Wh(r,r.memoizedProps,o.memoizedProps);break;case 5:if(on(i,r),ln(r),u&512&&(At||o===null||ur(o,o.return)),r.flags&32){m=r.stateNode;try{qi(m,"")}catch(xe){et(r,r.return,xe)}}u&4&&r.stateNode!=null&&(m=r.memoizedProps,Wh(r,m,o!==null?o.memoizedProps:m)),u&1024&&(em=!0);break;case 6:if(on(i,r),ln(r),u&4){if(r.stateNode===null)throw Error(s(162));u=r.memoizedProps,o=r.stateNode;try{o.nodeValue=u}catch(xe){et(r,r.return,xe)}}break;case 3:if(wu=null,m=Gn,Gn=bu(i.containerInfo),on(i,r),Gn=m,ln(r),u&4&&o!==null&&o.memoizedState.isDehydrated)try{ba(i.containerInfo)}catch(xe){et(r,r.return,xe)}em&&(em=!1,qv(r));break;case 4:u=Gn,Gn=bu(r.stateNode.containerInfo),on(i,r),ln(r),Gn=u;break;case 12:on(i,r),ln(r);break;case 31:on(i,r),ln(r),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,iu(r,u)));break;case 13:on(i,r),ln(r),r.child.flags&8192&&r.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(ou=dt()),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,iu(r,u)));break;case 22:m=r.memoizedState!==null;var Y=o!==null&&o.memoizedState!==null,ne=Dr,le=At;if(Dr=ne||m,At=le||Y,on(i,r),At=le,Dr=ne,ln(r),u&8192)e:for(i=r.stateNode,i._visibility=m?i._visibility&-2:i._visibility|1,m&&(o===null||Y||Dr||At||oi(r)),o=null,i=r;;){if(i.tag===5||i.tag===26){if(o===null){Y=o=i;try{if(y=Y.stateNode,m)T=y.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none";else{U=Y.stateNode;var fe=Y.memoizedProps.style,se=fe!=null&&fe.hasOwnProperty("display")?fe.display:null;U.style.display=se==null||typeof se=="boolean"?"":(""+se).trim()}}catch(xe){et(Y,Y.return,xe)}}}else if(i.tag===6){if(o===null){Y=i;try{Y.stateNode.nodeValue=m?"":Y.memoizedProps}catch(xe){et(Y,Y.return,xe)}}}else if(i.tag===18){if(o===null){Y=i;try{var ae=Y.stateNode;m?Rb(ae,!0):Rb(Y.stateNode,!1)}catch(xe){et(Y,Y.return,xe)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===r)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break e;for(;i.sibling===null;){if(i.return===null||i.return===r)break e;o===i&&(o=null),i=i.return}o===i&&(o=null),i.sibling.return=i.return,i=i.sibling}u&4&&(u=r.updateQueue,u!==null&&(o=u.retryQueue,o!==null&&(u.retryQueue=null,iu(r,o))));break;case 19:on(i,r),ln(r),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,iu(r,u)));break;case 30:break;case 21:break;default:on(i,r),ln(r)}}function ln(r){var i=r.flags;if(i&2){try{for(var o,u=r.return;u!==null;){if(Mv(u)){o=u;break}u=u.return}if(o==null)throw Error(s(160));switch(o.tag){case 27:var m=o.stateNode,y=Jh(r);su(r,y,m);break;case 5:var T=o.stateNode;o.flags&32&&(qi(T,""),o.flags&=-33);var U=Jh(r);su(r,U,T);break;case 3:case 4:var Y=o.stateNode.containerInfo,ne=Jh(r);Zh(r,ne,Y);break;default:throw Error(s(161))}}catch(le){et(r,r.return,le)}r.flags&=-3}i&4096&&(r.flags&=-4097)}function qv(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var i=r;qv(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),r=r.sibling}}function Ir(r,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)Iv(r,i.alternate,i),i=i.sibling}function oi(r){for(r=r.child;r!==null;){var i=r;switch(i.tag){case 0:case 11:case 14:case 15:vs(4,i,i.return),oi(i);break;case 1:ur(i,i.return);var o=i.stateNode;typeof o.componentWillUnmount=="function"&&Rv(i,i.return,o),oi(i);break;case 27:Vo(i.stateNode);case 26:case 5:ur(i,i.return),oi(i);break;case 22:i.memoizedState===null&&oi(i);break;case 30:oi(i);break;default:oi(i)}r=r.sibling}}function $r(r,i,o){for(o=o&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var u=i.alternate,m=r,y=i,T=y.flags;switch(y.tag){case 0:case 11:case 15:$r(m,y,o),Do(4,y);break;case 1:if($r(m,y,o),u=y,m=u.stateNode,typeof m.componentDidMount=="function")try{m.componentDidMount()}catch(ne){et(u,u.return,ne)}if(u=y,m=u.updateQueue,m!==null){var U=u.stateNode;try{var Y=m.shared.hiddenCallbacks;if(Y!==null)for(m.shared.hiddenCallbacks=null,m=0;m<Y.length;m++)b0(Y[m],U)}catch(ne){et(u,u.return,ne)}}o&&T&64&&jv(y),Uo(y,y.return);break;case 27:Dv(y);case 26:case 5:$r(m,y,o),o&&u===null&&T&4&&kv(y),Uo(y,y.return);break;case 12:$r(m,y,o);break;case 31:$r(m,y,o),o&&T&4&&zv(m,y);break;case 13:$r(m,y,o),o&&T&4&&Bv(m,y);break;case 22:y.memoizedState===null&&$r(m,y,o),Uo(y,y.return);break;case 30:break;default:$r(m,y,o)}i=i.sibling}}function tm(r,i){var o=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(o=r.memoizedState.cachePool.pool),r=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(r=i.memoizedState.cachePool.pool),r!==o&&(r!=null&&r.refCount++,o!=null&&wo(o))}function nm(r,i){r=null,i.alternate!==null&&(r=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==r&&(i.refCount++,r!=null&&wo(r))}function Xn(r,i,o,u){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Hv(r,i,o,u),i=i.sibling}function Hv(r,i,o,u){var m=i.flags;switch(i.tag){case 0:case 11:case 15:Xn(r,i,o,u),m&2048&&Do(9,i);break;case 1:Xn(r,i,o,u);break;case 3:Xn(r,i,o,u),m&2048&&(r=null,i.alternate!==null&&(r=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==r&&(i.refCount++,r!=null&&wo(r)));break;case 12:if(m&2048){Xn(r,i,o,u),r=i.stateNode;try{var y=i.memoizedProps,T=y.id,U=y.onPostCommit;typeof U=="function"&&U(T,i.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(Y){et(i,i.return,Y)}}else Xn(r,i,o,u);break;case 31:Xn(r,i,o,u);break;case 13:Xn(r,i,o,u);break;case 23:break;case 22:y=i.stateNode,T=i.alternate,i.memoizedState!==null?y._visibility&2?Xn(r,i,o,u):Io(r,i):y._visibility&2?Xn(r,i,o,u):(y._visibility|=2,la(r,i,o,u,(i.subtreeFlags&10256)!==0||!1)),m&2048&&tm(T,i);break;case 24:Xn(r,i,o,u),m&2048&&nm(i.alternate,i);break;default:Xn(r,i,o,u)}}function la(r,i,o,u,m){for(m=m&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var y=r,T=i,U=o,Y=u,ne=T.flags;switch(T.tag){case 0:case 11:case 15:la(y,T,U,Y,m),Do(8,T);break;case 23:break;case 22:var le=T.stateNode;T.memoizedState!==null?le._visibility&2?la(y,T,U,Y,m):Io(y,T):(le._visibility|=2,la(y,T,U,Y,m)),m&&ne&2048&&tm(T.alternate,T);break;case 24:la(y,T,U,Y,m),m&&ne&2048&&nm(T.alternate,T);break;default:la(y,T,U,Y,m)}i=i.sibling}}function Io(r,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var o=r,u=i,m=u.flags;switch(u.tag){case 22:Io(o,u),m&2048&&tm(u.alternate,u);break;case 24:Io(o,u),m&2048&&nm(u.alternate,u);break;default:Io(o,u)}i=i.sibling}}var $o=8192;function ca(r,i,o){if(r.subtreeFlags&$o)for(r=r.child;r!==null;)Vv(r,i,o),r=r.sibling}function Vv(r,i,o){switch(r.tag){case 26:ca(r,i,o),r.flags&$o&&r.memoizedState!==null&&kN(o,Gn,r.memoizedState,r.memoizedProps);break;case 5:ca(r,i,o);break;case 3:case 4:var u=Gn;Gn=bu(r.stateNode.containerInfo),ca(r,i,o),Gn=u;break;case 22:r.memoizedState===null&&(u=r.alternate,u!==null&&u.memoizedState!==null?(u=$o,$o=16777216,ca(r,i,o),$o=u):ca(r,i,o));break;default:ca(r,i,o)}}function Fv(r){var i=r.alternate;if(i!==null&&(r=i.child,r!==null)){i.child=null;do i=r.sibling,r.sibling=null,r=i;while(r!==null)}}function Lo(r){var i=r.deletions;if((r.flags&16)!==0){if(i!==null)for(var o=0;o<i.length;o++){var u=i[o];Ut=u,Gv(u,r)}Fv(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)Yv(r),r=r.sibling}function Yv(r){switch(r.tag){case 0:case 11:case 15:Lo(r),r.flags&2048&&vs(9,r,r.return);break;case 3:Lo(r);break;case 12:Lo(r);break;case 22:var i=r.stateNode;r.memoizedState!==null&&i._visibility&2&&(r.return===null||r.return.tag!==13)?(i._visibility&=-3,au(r)):Lo(r);break;default:Lo(r)}}function au(r){var i=r.deletions;if((r.flags&16)!==0){if(i!==null)for(var o=0;o<i.length;o++){var u=i[o];Ut=u,Gv(u,r)}Fv(r)}for(r=r.child;r!==null;){switch(i=r,i.tag){case 0:case 11:case 15:vs(8,i,i.return),au(i);break;case 22:o=i.stateNode,o._visibility&2&&(o._visibility&=-3,au(i));break;default:au(i)}r=r.sibling}}function Gv(r,i){for(;Ut!==null;){var o=Ut;switch(o.tag){case 0:case 11:case 15:vs(8,o,i);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var u=o.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:wo(o.memoizedState.cache)}if(u=o.child,u!==null)u.return=o,Ut=u;else e:for(o=r;Ut!==null;){u=Ut;var m=u.sibling,y=u.return;if($v(u),u===o){Ut=null;break e}if(m!==null){m.return=y,Ut=m;break e}Ut=y}}}var GT={getCacheForType:function(r){var i=Pt(St),o=i.data.get(r);return o===void 0&&(o=r(),i.data.set(r,o)),o},cacheSignal:function(){return Pt(St).controller.signal}},XT=typeof WeakMap=="function"?WeakMap:Map,We=0,st=null,qe=null,Ve=0,Ze=0,wn=null,bs=!1,ua=!1,rm=!1,Lr=0,bt=0,_s=0,li=0,sm=0,xn=0,da=0,zo=null,cn=null,im=!1,ou=0,Xv=0,lu=1/0,cu=null,ws=null,Rt=0,xs=null,fa=null,zr=0,am=0,om=null,Kv=null,Bo=0,lm=null;function Sn(){return(We&2)!==0&&Ve!==0?Ve&-Ve:M.T!==null?mm():hc()}function Qv(){if(xn===0)if((Ve&536870912)===0||Ge){var r=ns;ns<<=1,(ns&3932160)===0&&(ns=262144),xn=r}else xn=536870912;return r=bn.current,r!==null&&(r.flags|=32),xn}function un(r,i,o){(r===st&&(Ze===2||Ze===9)||r.cancelPendingCommit!==null)&&(ha(r,0),Ss(r,Ve,xn,!1)),Fs(r,o),((We&2)===0||r!==st)&&(r===st&&((We&2)===0&&(li|=o),bt===4&&Ss(r,Ve,xn,!1)),dr(r))}function Wv(r,i,o){if((We&6)!==0)throw Error(s(327));var u=!o&&(i&127)===0&&(i&r.expiredLanes)===0||Vs(r,i),m=u?WT(r,i):um(r,i,!0),y=u;do{if(m===0){ua&&!u&&Ss(r,i,0,!1);break}else{if(o=r.current.alternate,y&&!KT(o)){m=um(r,i,!1),y=!1;continue}if(m===2){if(y=i,r.errorRecoveryDisabledLanes&y)var T=0;else T=r.pendingLanes&-536870913,T=T!==0?T:T&536870912?536870912:0;if(T!==0){i=T;e:{var U=r;m=zo;var Y=U.current.memoizedState.isDehydrated;if(Y&&(ha(U,T).flags|=256),T=um(U,T,!1),T!==2){if(rm&&!Y){U.errorRecoveryDisabledLanes|=y,li|=y,m=4;break e}y=cn,cn=m,y!==null&&(cn===null?cn=y:cn.push.apply(cn,y))}m=T}if(y=!1,m!==2)continue}}if(m===1){ha(r,0),Ss(r,i,0,!0);break}e:{switch(u=r,y=m,y){case 0:case 1:throw Error(s(345));case 4:if((i&4194048)!==i)break;case 6:Ss(u,i,xn,!bs);break e;case 2:cn=null;break;case 3:case 5:break;default:throw Error(s(329))}if((i&62914560)===i&&(m=ou+300-dt(),10<m)){if(Ss(u,i,xn,!bs),Di(u,0,!0)!==0)break e;zr=i,u.timeoutHandle=Nb(Jv.bind(null,u,o,cn,cu,im,i,xn,li,da,bs,y,"Throttled",-0,0),m);break e}Jv(u,o,cn,cu,im,i,xn,li,da,bs,y,null,-0,0)}}break}while(!0);dr(r)}function Jv(r,i,o,u,m,y,T,U,Y,ne,le,fe,se,ae){if(r.timeoutHandle=-1,fe=i.subtreeFlags,fe&8192||(fe&16785408)===16785408){fe={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Er},Vv(i,y,fe);var xe=(y&62914560)===y?ou-dt():(y&4194048)===y?Xv-dt():0;if(xe=MN(fe,xe),xe!==null){zr=y,r.cancelPendingCommit=xe(ab.bind(null,r,i,y,o,u,m,T,U,Y,le,fe,null,se,ae)),Ss(r,y,T,!ne);return}}ab(r,i,y,o,u,m,T,U,Y)}function KT(r){for(var i=r;;){var o=i.tag;if((o===0||o===11||o===15)&&i.flags&16384&&(o=i.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var u=0;u<o.length;u++){var m=o[u],y=m.getSnapshot;m=m.value;try{if(!yn(y(),m))return!1}catch{return!1}}if(o=i.child,i.subtreeFlags&16384&&o!==null)o.return=i,i=o;else{if(i===r)break;for(;i.sibling===null;){if(i.return===null||i.return===r)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Ss(r,i,o,u){i&=~sm,i&=~li,r.suspendedLanes|=i,r.pingedLanes&=~i,u&&(r.warmLanes|=i),u=r.expirationTimes;for(var m=i;0<m;){var y=31-Ee(m),T=1<<y;u[y]=-1,m&=~T}o!==0&&uc(r,o,i)}function uu(){return(We&6)===0?(Po(0),!1):!0}function cm(){if(qe!==null){if(Ze===0)var r=qe.return;else r=qe,Nr=Zs=null,Ch(r),ra=null,So=0,r=qe;for(;r!==null;)Ov(r.alternate,r),r=r.return;qe=null}}function ha(r,i){var o=r.timeoutHandle;o!==-1&&(r.timeoutHandle=-1,pN(o)),o=r.cancelPendingCommit,o!==null&&(r.cancelPendingCommit=null,o()),zr=0,cm(),st=r,qe=o=Ar(r.current,null),Ve=i,Ze=0,wn=null,bs=!1,ua=Vs(r,i),rm=!1,da=xn=sm=li=_s=bt=0,cn=zo=null,im=!1,(i&8)!==0&&(i|=i&32);var u=r.entangledLanes;if(u!==0)for(r=r.entanglements,u&=i;0<u;){var m=31-Ee(u),y=1<<m;i|=r[m],u&=~y}return Lr=i,Rc(),o}function Zv(r,i){ze=null,M.H=Ro,i===na||i===zc?(i=p0(),Ze=3):i===hh?(i=p0(),Ze=4):Ze=i===Ph?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,wn=i,qe===null&&(bt=1,Zc(r,Dn(i,r.current)))}function eb(){var r=bn.current;return r===null?!0:(Ve&4194048)===Ve?Ln===null:(Ve&62914560)===Ve||(Ve&536870912)!==0?r===Ln:!1}function tb(){var r=M.H;return M.H=Ro,r===null?Ro:r}function nb(){var r=M.A;return M.A=GT,r}function du(){bt=4,bs||(Ve&4194048)!==Ve&&bn.current!==null||(ua=!0),(_s&134217727)===0&&(li&134217727)===0||st===null||Ss(st,Ve,xn,!1)}function um(r,i,o){var u=We;We|=2;var m=tb(),y=nb();(st!==r||Ve!==i)&&(cu=null,ha(r,i)),i=!1;var T=bt;e:do try{if(Ze!==0&&qe!==null){var U=qe,Y=wn;switch(Ze){case 8:cm(),T=6;break e;case 3:case 2:case 9:case 6:bn.current===null&&(i=!0);var ne=Ze;if(Ze=0,wn=null,ma(r,U,Y,ne),o&&ua){T=0;break e}break;default:ne=Ze,Ze=0,wn=null,ma(r,U,Y,ne)}}QT(),T=bt;break}catch(le){Zv(r,le)}while(!0);return i&&r.shellSuspendCounter++,Nr=Zs=null,We=u,M.H=m,M.A=y,qe===null&&(st=null,Ve=0,Rc()),T}function QT(){for(;qe!==null;)rb(qe)}function WT(r,i){var o=We;We|=2;var u=tb(),m=nb();st!==r||Ve!==i?(cu=null,lu=dt()+500,ha(r,i)):ua=Vs(r,i);e:do try{if(Ze!==0&&qe!==null){i=qe;var y=wn;t:switch(Ze){case 1:Ze=0,wn=null,ma(r,i,y,1);break;case 2:case 9:if(h0(y)){Ze=0,wn=null,sb(i);break}i=function(){Ze!==2&&Ze!==9||st!==r||(Ze=7),dr(r)},y.then(i,i);break e;case 3:Ze=7;break e;case 4:Ze=5;break e;case 7:h0(y)?(Ze=0,wn=null,sb(i)):(Ze=0,wn=null,ma(r,i,y,7));break;case 5:var T=null;switch(qe.tag){case 26:T=qe.memoizedState;case 5:case 27:var U=qe;if(T?Hb(T):U.stateNode.complete){Ze=0,wn=null;var Y=U.sibling;if(Y!==null)qe=Y;else{var ne=U.return;ne!==null?(qe=ne,fu(ne)):qe=null}break t}}Ze=0,wn=null,ma(r,i,y,5);break;case 6:Ze=0,wn=null,ma(r,i,y,6);break;case 8:cm(),bt=6;break e;default:throw Error(s(462))}}JT();break}catch(le){Zv(r,le)}while(!0);return Nr=Zs=null,M.H=u,M.A=m,We=o,qe!==null?0:(st=null,Ve=0,Rc(),bt)}function JT(){for(;qe!==null&&!mn();)rb(qe)}function rb(r){var i=Tv(r.alternate,r,Lr);r.memoizedProps=r.pendingProps,i===null?fu(r):qe=i}function sb(r){var i=r,o=i.alternate;switch(i.tag){case 15:case 0:i=wv(o,i,i.pendingProps,i.type,void 0,Ve);break;case 11:i=wv(o,i,i.pendingProps,i.type.render,i.ref,Ve);break;case 5:Ch(i);default:Ov(o,i),i=qe=n0(i,Lr),i=Tv(o,i,Lr)}r.memoizedProps=r.pendingProps,i===null?fu(r):qe=i}function ma(r,i,o,u){Nr=Zs=null,Ch(i),ra=null,So=0;var m=i.return;try{if(BT(r,m,i,o,Ve)){bt=1,Zc(r,Dn(o,r.current)),qe=null;return}}catch(y){if(m!==null)throw qe=m,y;bt=1,Zc(r,Dn(o,r.current)),qe=null;return}i.flags&32768?(Ge||u===1?r=!0:ua||(Ve&536870912)!==0?r=!1:(bs=r=!0,(u===2||u===9||u===3||u===6)&&(u=bn.current,u!==null&&u.tag===13&&(u.flags|=16384))),ib(i,r)):fu(i)}function fu(r){var i=r;do{if((i.flags&32768)!==0){ib(i,bs);return}r=i.return;var o=HT(i.alternate,i,Lr);if(o!==null){qe=o;return}if(i=i.sibling,i!==null){qe=i;return}qe=i=r}while(i!==null);bt===0&&(bt=5)}function ib(r,i){do{var o=VT(r.alternate,r);if(o!==null){o.flags&=32767,qe=o;return}if(o=r.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!i&&(r=r.sibling,r!==null)){qe=r;return}qe=r=o}while(r!==null);bt=6,qe=null}function ab(r,i,o,u,m,y,T,U,Y){r.cancelPendingCommit=null;do hu();while(Rt!==0);if((We&6)!==0)throw Error(s(327));if(i!==null){if(i===r.current)throw Error(s(177));if(y=i.lanes|i.childLanes,y|=Jf,Nf(r,o,y,T,U,Y),r===st&&(qe=st=null,Ve=0),fa=i,xs=r,zr=o,am=y,om=m,Kv=u,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,nN(gn,function(){return db(),null})):(r.callbackNode=null,r.callbackPriority=0),u=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||u){u=M.T,M.T=null,m=z.p,z.p=2,T=We,We|=4;try{FT(r,i,o)}finally{We=T,z.p=m,M.T=u}}Rt=1,ob(),lb(),cb()}}function ob(){if(Rt===1){Rt=0;var r=xs,i=fa,o=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||o){o=M.T,M.T=null;var u=z.p;z.p=2;var m=We;We|=4;try{Pv(i,r);var y=xm,T=Gy(r.containerInfo),U=y.focusedElem,Y=y.selectionRange;if(T!==U&&U&&U.ownerDocument&&Yy(U.ownerDocument.documentElement,U)){if(Y!==null&&Gf(U)){var ne=Y.start,le=Y.end;if(le===void 0&&(le=ne),"selectionStart"in U)U.selectionStart=ne,U.selectionEnd=Math.min(le,U.value.length);else{var fe=U.ownerDocument||document,se=fe&&fe.defaultView||window;if(se.getSelection){var ae=se.getSelection(),xe=U.textContent.length,De=Math.min(Y.start,xe),rt=Y.end===void 0?De:Math.min(Y.end,xe);!ae.extend&&De>rt&&(T=rt,rt=De,De=T);var J=Fy(U,De),K=Fy(U,rt);if(J&&K&&(ae.rangeCount!==1||ae.anchorNode!==J.node||ae.anchorOffset!==J.offset||ae.focusNode!==K.node||ae.focusOffset!==K.offset)){var te=fe.createRange();te.setStart(J.node,J.offset),ae.removeAllRanges(),De>rt?(ae.addRange(te),ae.extend(K.node,K.offset)):(te.setEnd(K.node,K.offset),ae.addRange(te))}}}}for(fe=[],ae=U;ae=ae.parentNode;)ae.nodeType===1&&fe.push({element:ae,left:ae.scrollLeft,top:ae.scrollTop});for(typeof U.focus=="function"&&U.focus(),U=0;U<fe.length;U++){var ue=fe[U];ue.element.scrollLeft=ue.left,ue.element.scrollTop=ue.top}}Cu=!!wm,xm=wm=null}finally{We=m,z.p=u,M.T=o}}r.current=i,Rt=2}}function lb(){if(Rt===2){Rt=0;var r=xs,i=fa,o=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||o){o=M.T,M.T=null;var u=z.p;z.p=2;var m=We;We|=4;try{Iv(r,i.alternate,i)}finally{We=m,z.p=u,M.T=o}}Rt=3}}function cb(){if(Rt===4||Rt===3){Rt=0,Zt();var r=xs,i=fa,o=zr,u=Kv;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?Rt=5:(Rt=0,fa=xs=null,ub(r,r.pendingLanes));var m=r.pendingLanes;if(m===0&&(ws=null),io(o),i=i.stateNode,zt&&typeof zt.onCommitFiberRoot=="function")try{zt.onCommitFiberRoot(Vn,i,void 0,(i.current.flags&128)===128)}catch{}if(u!==null){i=M.T,m=z.p,z.p=2,M.T=null;try{for(var y=r.onRecoverableError,T=0;T<u.length;T++){var U=u[T];y(U.value,{componentStack:U.stack})}}finally{M.T=i,z.p=m}}(zr&3)!==0&&hu(),dr(r),m=r.pendingLanes,(o&261930)!==0&&(m&42)!==0?r===lm?Bo++:(Bo=0,lm=r):Bo=0,Po(0)}}function ub(r,i){(r.pooledCacheLanes&=i)===0&&(i=r.pooledCache,i!=null&&(r.pooledCache=null,wo(i)))}function hu(){return ob(),lb(),cb(),db()}function db(){if(Rt!==5)return!1;var r=xs,i=am;am=0;var o=io(zr),u=M.T,m=z.p;try{z.p=32>o?32:o,M.T=null,o=om,om=null;var y=xs,T=zr;if(Rt=0,fa=xs=null,zr=0,(We&6)!==0)throw Error(s(331));var U=We;if(We|=4,Yv(y.current),Hv(y,y.current,T,o),We=U,Po(0,!1),zt&&typeof zt.onPostCommitFiberRoot=="function")try{zt.onPostCommitFiberRoot(Vn,y)}catch{}return!0}finally{z.p=m,M.T=u,ub(r,i)}}function fb(r,i,o){i=Dn(o,i),i=Bh(r.stateNode,i,2),r=ps(r,i,2),r!==null&&(Fs(r,2),dr(r))}function et(r,i,o){if(r.tag===3)fb(r,r,o);else for(;i!==null;){if(i.tag===3){fb(i,r,o);break}else if(i.tag===1){var u=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(ws===null||!ws.has(u))){r=Dn(o,r),o=hv(2),u=ps(i,o,2),u!==null&&(mv(o,u,i,r),Fs(u,2),dr(u));break}}i=i.return}}function dm(r,i,o){var u=r.pingCache;if(u===null){u=r.pingCache=new XT;var m=new Set;u.set(i,m)}else m=u.get(i),m===void 0&&(m=new Set,u.set(i,m));m.has(o)||(rm=!0,m.add(o),r=ZT.bind(null,r,i,o),i.then(r,r))}function ZT(r,i,o){var u=r.pingCache;u!==null&&u.delete(i),r.pingedLanes|=r.suspendedLanes&o,r.warmLanes&=~o,st===r&&(Ve&o)===o&&(bt===4||bt===3&&(Ve&62914560)===Ve&&300>dt()-ou?(We&2)===0&&ha(r,0):sm|=o,da===Ve&&(da=0)),dr(r)}function hb(r,i){i===0&&(i=cc()),r=Qs(r,i),r!==null&&(Fs(r,i),dr(r))}function eN(r){var i=r.memoizedState,o=0;i!==null&&(o=i.retryLane),hb(r,o)}function tN(r,i){var o=0;switch(r.tag){case 31:case 13:var u=r.stateNode,m=r.memoizedState;m!==null&&(o=m.retryLane);break;case 19:u=r.stateNode;break;case 22:u=r.stateNode._retryCache;break;default:throw Error(s(314))}u!==null&&u.delete(i),hb(r,o)}function nN(r,i){return Lt(r,i)}var mu=null,pa=null,fm=!1,pu=!1,hm=!1,Es=0;function dr(r){r!==pa&&r.next===null&&(pa===null?mu=pa=r:pa=pa.next=r),pu=!0,fm||(fm=!0,sN())}function Po(r,i){if(!hm&&pu){hm=!0;do for(var o=!1,u=mu;u!==null;){if(r!==0){var m=u.pendingLanes;if(m===0)var y=0;else{var T=u.suspendedLanes,U=u.pingedLanes;y=(1<<31-Ee(42|r)+1)-1,y&=m&~(T&~U),y=y&201326741?y&201326741|1:y?y|2:0}y!==0&&(o=!0,yb(u,y))}else y=Ve,y=Di(u,u===st?y:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(y&3)===0||Vs(u,y)||(o=!0,yb(u,y));u=u.next}while(o);hm=!1}}function rN(){mb()}function mb(){pu=fm=!1;var r=0;Es!==0&&mN()&&(r=Es);for(var i=dt(),o=null,u=mu;u!==null;){var m=u.next,y=pb(u,i);y===0?(u.next=null,o===null?mu=m:o.next=m,m===null&&(pa=o)):(o=u,(r!==0||(y&3)!==0)&&(pu=!0)),u=m}Rt!==0&&Rt!==5||Po(r),Es!==0&&(Es=0)}function pb(r,i){for(var o=r.suspendedLanes,u=r.pingedLanes,m=r.expirationTimes,y=r.pendingLanes&-62914561;0<y;){var T=31-Ee(y),U=1<<T,Y=m[T];Y===-1?((U&o)===0||(U&u)!==0)&&(m[T]=Tf(U,i)):Y<=i&&(r.expiredLanes|=U),y&=~U}if(i=st,o=Ve,o=Di(r,r===i?o:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),u=r.callbackNode,o===0||r===i&&(Ze===2||Ze===9)||r.cancelPendingCommit!==null)return u!==null&&u!==null&&ut(u),r.callbackNode=null,r.callbackPriority=0;if((o&3)===0||Vs(r,o)){if(i=o&-o,i===r.callbackPriority)return i;switch(u!==null&&ut(u),io(o)){case 2:case 8:o=nn;break;case 32:o=gn;break;case 268435456:o=ts;break;default:o=gn}return u=gb.bind(null,r),o=Lt(o,u),r.callbackPriority=i,r.callbackNode=o,i}return u!==null&&u!==null&&ut(u),r.callbackPriority=2,r.callbackNode=null,2}function gb(r,i){if(Rt!==0&&Rt!==5)return r.callbackNode=null,r.callbackPriority=0,null;var o=r.callbackNode;if(hu()&&r.callbackNode!==o)return null;var u=Ve;return u=Di(r,r===st?u:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),u===0?null:(Wv(r,u,i),pb(r,dt()),r.callbackNode!=null&&r.callbackNode===o?gb.bind(null,r):null)}function yb(r,i){if(hu())return null;Wv(r,i,!0)}function sN(){gN(function(){(We&6)!==0?Lt(kn,rN):mb()})}function mm(){if(Es===0){var r=ea;r===0&&(r=ft,ft<<=1,(ft&261888)===0&&(ft=256)),Es=r}return Es}function vb(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:Sc(""+r)}function bb(r,i){var o=i.ownerDocument.createElement("input");return o.name=i.name,o.value=i.value,r.id&&o.setAttribute("form",r.id),i.parentNode.insertBefore(o,i),r=new FormData(r),o.parentNode.removeChild(o),r}function iN(r,i,o,u,m){if(i==="submit"&&o&&o.stateNode===m){var y=vb((m[Xt]||null).action),T=u.submitter;T&&(i=(i=T[Xt]||null)?vb(i.formAction):T.getAttribute("formAction"),i!==null&&(y=i,T=null));var U=new Tc("action","action",null,u,m);r.push({event:U,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(Es!==0){var Y=T?bb(m,T):new FormData(m);Dh(o,{pending:!0,data:Y,method:m.method,action:y},null,Y)}}else typeof y=="function"&&(U.preventDefault(),Y=T?bb(m,T):new FormData(m),Dh(o,{pending:!0,data:Y,method:m.method,action:y},y,Y))},currentTarget:m}]})}}for(var pm=0;pm<Wf.length;pm++){var gm=Wf[pm],aN=gm.toLowerCase(),oN=gm[0].toUpperCase()+gm.slice(1);Yn(aN,"on"+oN)}Yn(Qy,"onAnimationEnd"),Yn(Wy,"onAnimationIteration"),Yn(Jy,"onAnimationStart"),Yn("dblclick","onDoubleClick"),Yn("focusin","onFocus"),Yn("focusout","onBlur"),Yn(ST,"onTransitionRun"),Yn(ET,"onTransitionStart"),Yn(CT,"onTransitionCancel"),Yn(Zy,"onTransitionEnd"),os("onMouseEnter",["mouseout","mouseover"]),os("onMouseLeave",["mouseout","mouseover"]),os("onPointerEnter",["pointerout","pointerover"]),os("onPointerLeave",["pointerout","pointerover"]),Sr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Sr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Sr("onBeforeInput",["compositionend","keypress","textInput","paste"]),Sr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Sr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Sr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var qo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),lN=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(qo));function _b(r,i){i=(i&4)!==0;for(var o=0;o<r.length;o++){var u=r[o],m=u.event;u=u.listeners;e:{var y=void 0;if(i)for(var T=u.length-1;0<=T;T--){var U=u[T],Y=U.instance,ne=U.currentTarget;if(U=U.listener,Y!==y&&m.isPropagationStopped())break e;y=U,m.currentTarget=ne;try{y(m)}catch(le){jc(le)}m.currentTarget=null,y=Y}else for(T=0;T<u.length;T++){if(U=u[T],Y=U.instance,ne=U.currentTarget,U=U.listener,Y!==y&&m.isPropagationStopped())break e;y=U,m.currentTarget=ne;try{y(m)}catch(le){jc(le)}m.currentTarget=null,y=Y}}}}function He(r,i){var o=i[Ui];o===void 0&&(o=i[Ui]=new Set);var u=r+"__bubble";o.has(u)||(wb(i,r,2,!1),o.add(u))}function ym(r,i,o){var u=0;i&&(u|=4),wb(o,r,u,i)}var gu="_reactListening"+Math.random().toString(36).slice(2);function vm(r){if(!r[gu]){r[gu]=!0,yc.forEach(function(o){o!=="selectionchange"&&(lN.has(o)||ym(o,!1,r),ym(o,!0,r))});var i=r.nodeType===9?r:r.ownerDocument;i===null||i[gu]||(i[gu]=!0,ym("selectionchange",!1,i))}}function wb(r,i,o,u){switch(Qb(i)){case 2:var m=IN;break;case 8:m=$N;break;default:m=Mm}o=m.bind(null,i,o,r),m=void 0,!Lf||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(m=!0),u?m!==void 0?r.addEventListener(i,o,{capture:!0,passive:m}):r.addEventListener(i,o,!0):m!==void 0?r.addEventListener(i,o,{passive:m}):r.addEventListener(i,o,!1)}function bm(r,i,o,u,m){var y=u;if((i&1)===0&&(i&2)===0&&u!==null)e:for(;;){if(u===null)return;var T=u.tag;if(T===3||T===4){var U=u.stateNode.containerInfo;if(U===m)break;if(T===4)for(T=u.return;T!==null;){var Y=T.tag;if((Y===3||Y===4)&&T.stateNode.containerInfo===m)return;T=T.return}for(;U!==null;){if(T=rs(U),T===null)return;if(Y=T.tag,Y===5||Y===6||Y===26||Y===27){u=y=T;continue e}U=U.parentNode}}u=u.return}Ay(function(){var ne=y,le=If(o),fe=[];e:{var se=e0.get(r);if(se!==void 0){var ae=Tc,xe=r;switch(r){case"keypress":if(Cc(o)===0)break e;case"keydown":case"keyup":ae=tT;break;case"focusin":xe="focus",ae=qf;break;case"focusout":xe="blur",ae=qf;break;case"beforeblur":case"afterblur":ae=qf;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ae=Oy;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ae=HA;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ae=sT;break;case Qy:case Wy:case Jy:ae=YA;break;case Zy:ae=aT;break;case"scroll":case"scrollend":ae=PA;break;case"wheel":ae=lT;break;case"copy":case"cut":case"paste":ae=XA;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ae=Ry;break;case"toggle":case"beforetoggle":ae=uT}var De=(i&4)!==0,rt=!De&&(r==="scroll"||r==="scrollend"),J=De?se!==null?se+"Capture":null:se;De=[];for(var K=ne,te;K!==null;){var ue=K;if(te=ue.stateNode,ue=ue.tag,ue!==5&&ue!==26&&ue!==27||te===null||J===null||(ue=co(K,J),ue!=null&&De.push(Ho(K,ue,te))),rt)break;K=K.return}0<De.length&&(se=new ae(se,xe,null,o,le),fe.push({event:se,listeners:De}))}}if((i&7)===0){e:{if(se=r==="mouseover"||r==="pointerover",ae=r==="mouseout"||r==="pointerout",se&&o!==Uf&&(xe=o.relatedTarget||o.fromElement)&&(rs(xe)||xe[xr]))break e;if((ae||se)&&(se=le.window===le?le:(se=le.ownerDocument)?se.defaultView||se.parentWindow:window,ae?(xe=o.relatedTarget||o.toElement,ae=ne,xe=xe?rs(xe):null,xe!==null&&(rt=l(xe),De=xe.tag,xe!==rt||De!==5&&De!==27&&De!==6)&&(xe=null)):(ae=null,xe=ne),ae!==xe)){if(De=Oy,ue="onMouseLeave",J="onMouseEnter",K="mouse",(r==="pointerout"||r==="pointerover")&&(De=Ry,ue="onPointerLeave",J="onPointerEnter",K="pointer"),rt=ae==null?se:is(ae),te=xe==null?se:is(xe),se=new De(ue,K+"leave",ae,o,le),se.target=rt,se.relatedTarget=te,ue=null,rs(le)===ne&&(De=new De(J,K+"enter",xe,o,le),De.target=te,De.relatedTarget=rt,ue=De),rt=ue,ae&&xe)t:{for(De=cN,J=ae,K=xe,te=0,ue=J;ue;ue=De(ue))te++;ue=0;for(var Oe=K;Oe;Oe=De(Oe))ue++;for(;0<te-ue;)J=De(J),te--;for(;0<ue-te;)K=De(K),ue--;for(;te--;){if(J===K||K!==null&&J===K.alternate){De=J;break t}J=De(J),K=De(K)}De=null}else De=null;ae!==null&&xb(fe,se,ae,De,!1),xe!==null&&rt!==null&&xb(fe,rt,xe,De,!0)}}e:{if(se=ne?is(ne):window,ae=se.nodeName&&se.nodeName.toLowerCase(),ae==="select"||ae==="input"&&se.type==="file")var Ke=zy;else if($y(se))if(By)Ke=_T;else{Ke=vT;var Ce=yT}else ae=se.nodeName,!ae||ae.toLowerCase()!=="input"||se.type!=="checkbox"&&se.type!=="radio"?ne&&Df(ne.elementType)&&(Ke=zy):Ke=bT;if(Ke&&(Ke=Ke(r,ne))){Ly(fe,Ke,o,le);break e}Ce&&Ce(r,se,ne),r==="focusout"&&ne&&se.type==="number"&&ne.memoizedProps.value!=null&&Bi(se,"number",se.value)}switch(Ce=ne?is(ne):window,r){case"focusin":($y(Ce)||Ce.contentEditable==="true")&&(Yi=Ce,Xf=ne,vo=null);break;case"focusout":vo=Xf=Yi=null;break;case"mousedown":Kf=!0;break;case"contextmenu":case"mouseup":case"dragend":Kf=!1,Xy(fe,o,le);break;case"selectionchange":if(xT)break;case"keydown":case"keyup":Xy(fe,o,le)}var Be;if(Vf)e:{switch(r){case"compositionstart":var Fe="onCompositionStart";break e;case"compositionend":Fe="onCompositionEnd";break e;case"compositionupdate":Fe="onCompositionUpdate";break e}Fe=void 0}else Fi?Uy(r,o)&&(Fe="onCompositionEnd"):r==="keydown"&&o.keyCode===229&&(Fe="onCompositionStart");Fe&&(ky&&o.locale!=="ko"&&(Fi||Fe!=="onCompositionStart"?Fe==="onCompositionEnd"&&Fi&&(Be=Ty()):(ls=le,zf="value"in ls?ls.value:ls.textContent,Fi=!0)),Ce=yu(ne,Fe),0<Ce.length&&(Fe=new jy(Fe,r,null,o,le),fe.push({event:Fe,listeners:Ce}),Be?Fe.data=Be:(Be=Iy(o),Be!==null&&(Fe.data=Be)))),(Be=fT?hT(r,o):mT(r,o))&&(Fe=yu(ne,"onBeforeInput"),0<Fe.length&&(Ce=new jy("onBeforeInput","beforeinput",null,o,le),fe.push({event:Ce,listeners:Fe}),Ce.data=Be)),iN(fe,r,ne,o,le)}_b(fe,i)})}function Ho(r,i,o){return{instance:r,listener:i,currentTarget:o}}function yu(r,i){for(var o=i+"Capture",u=[];r!==null;){var m=r,y=m.stateNode;if(m=m.tag,m!==5&&m!==26&&m!==27||y===null||(m=co(r,o),m!=null&&u.unshift(Ho(r,m,y)),m=co(r,i),m!=null&&u.push(Ho(r,m,y))),r.tag===3)return u;r=r.return}return[]}function cN(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function xb(r,i,o,u,m){for(var y=i._reactName,T=[];o!==null&&o!==u;){var U=o,Y=U.alternate,ne=U.stateNode;if(U=U.tag,Y!==null&&Y===u)break;U!==5&&U!==26&&U!==27||ne===null||(Y=ne,m?(ne=co(o,y),ne!=null&&T.unshift(Ho(o,ne,Y))):m||(ne=co(o,y),ne!=null&&T.push(Ho(o,ne,Y)))),o=o.return}T.length!==0&&r.push({event:i,listeners:T})}var uN=/\r\n?/g,dN=/\u0000|\uFFFD/g;function Sb(r){return(typeof r=="string"?r:""+r).replace(uN,`
`).replace(dN,"")}function Eb(r,i){return i=Sb(i),Sb(r)===i}function nt(r,i,o,u,m,y){switch(o){case"children":typeof u=="string"?i==="body"||i==="textarea"&&u===""||qi(r,u):(typeof u=="number"||typeof u=="bigint")&&i!=="body"&&qi(r,""+u);break;case"className":$i(r,"class",u);break;case"tabIndex":$i(r,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":$i(r,o,u);break;case"style":Ey(r,u,y);break;case"data":if(i!=="object"){$i(r,"data",u);break}case"src":case"href":if(u===""&&(i!=="a"||o!=="href")){r.removeAttribute(o);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){r.removeAttribute(o);break}u=Sc(""+u),r.setAttribute(o,u);break;case"action":case"formAction":if(typeof u=="function"){r.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof y=="function"&&(o==="formAction"?(i!=="input"&&nt(r,i,"name",m.name,m,null),nt(r,i,"formEncType",m.formEncType,m,null),nt(r,i,"formMethod",m.formMethod,m,null),nt(r,i,"formTarget",m.formTarget,m,null)):(nt(r,i,"encType",m.encType,m,null),nt(r,i,"method",m.method,m,null),nt(r,i,"target",m.target,m,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){r.removeAttribute(o);break}u=Sc(""+u),r.setAttribute(o,u);break;case"onClick":u!=null&&(r.onclick=Er);break;case"onScroll":u!=null&&He("scroll",r);break;case"onScrollEnd":u!=null&&He("scrollend",r);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(o=u.__html,o!=null){if(m.children!=null)throw Error(s(60));r.innerHTML=o}}break;case"multiple":r.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":r.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){r.removeAttribute("xlink:href");break}o=Sc(""+u),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(o,""+u):r.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(o,""):r.removeAttribute(o);break;case"capture":case"download":u===!0?r.setAttribute(o,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(o,u):r.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?r.setAttribute(o,u):r.removeAttribute(o);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?r.removeAttribute(o):r.setAttribute(o,u);break;case"popover":He("beforetoggle",r),He("toggle",r),Ii(r,"popover",u);break;case"xlinkActuate":Fn(r,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":Fn(r,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":Fn(r,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":Fn(r,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":Fn(r,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":Fn(r,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":Fn(r,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":Fn(r,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":Fn(r,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":Ii(r,"is",u);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=zA.get(o)||o,Ii(r,o,u))}}function _m(r,i,o,u,m,y){switch(o){case"style":Ey(r,u,y);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(o=u.__html,o!=null){if(m.children!=null)throw Error(s(60));r.innerHTML=o}}break;case"children":typeof u=="string"?qi(r,u):(typeof u=="number"||typeof u=="bigint")&&qi(r,""+u);break;case"onScroll":u!=null&&He("scroll",r);break;case"onScrollEnd":u!=null&&He("scrollend",r);break;case"onClick":u!=null&&(r.onclick=Er);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!vc.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(m=o.endsWith("Capture"),i=o.slice(2,m?o.length-7:void 0),y=r[Xt]||null,y=y!=null?y[o]:null,typeof y=="function"&&r.removeEventListener(i,y,m),typeof u=="function")){typeof y!="function"&&y!==null&&(o in r?r[o]=null:r.hasAttribute(o)&&r.removeAttribute(o)),r.addEventListener(i,u,m);break e}o in r?r[o]=u:u===!0?r.setAttribute(o,""):Ii(r,o,u)}}}function Ht(r,i,o){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":He("error",r),He("load",r);var u=!1,m=!1,y;for(y in o)if(o.hasOwnProperty(y)){var T=o[y];if(T!=null)switch(y){case"src":u=!0;break;case"srcSet":m=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:nt(r,i,y,T,o,null)}}m&&nt(r,i,"srcSet",o.srcSet,o,null),u&&nt(r,i,"src",o.src,o,null);return;case"input":He("invalid",r);var U=y=T=m=null,Y=null,ne=null;for(u in o)if(o.hasOwnProperty(u)){var le=o[u];if(le!=null)switch(u){case"name":m=le;break;case"type":T=le;break;case"checked":Y=le;break;case"defaultChecked":ne=le;break;case"value":y=le;break;case"defaultValue":U=le;break;case"children":case"dangerouslySetInnerHTML":if(le!=null)throw Error(s(137,i));break;default:nt(r,i,u,le,o,null)}}xc(r,y,U,Y,ne,T,m,!1);return;case"select":He("invalid",r),u=T=y=null;for(m in o)if(o.hasOwnProperty(m)&&(U=o[m],U!=null))switch(m){case"value":y=U;break;case"defaultValue":T=U;break;case"multiple":u=U;default:nt(r,i,m,U,o,null)}i=y,o=T,r.multiple=!!u,i!=null?Pi(r,!!u,i,!1):o!=null&&Pi(r,!!u,o,!0);return;case"textarea":He("invalid",r),y=m=u=null;for(T in o)if(o.hasOwnProperty(T)&&(U=o[T],U!=null))switch(T){case"value":u=U;break;case"defaultValue":m=U;break;case"children":y=U;break;case"dangerouslySetInnerHTML":if(U!=null)throw Error(s(91));break;default:nt(r,i,T,U,o,null)}xy(r,u,m,y);return;case"option":for(Y in o)if(o.hasOwnProperty(Y)&&(u=o[Y],u!=null))switch(Y){case"selected":r.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:nt(r,i,Y,u,o,null)}return;case"dialog":He("beforetoggle",r),He("toggle",r),He("cancel",r),He("close",r);break;case"iframe":case"object":He("load",r);break;case"video":case"audio":for(u=0;u<qo.length;u++)He(qo[u],r);break;case"image":He("error",r),He("load",r);break;case"details":He("toggle",r);break;case"embed":case"source":case"link":He("error",r),He("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ne in o)if(o.hasOwnProperty(ne)&&(u=o[ne],u!=null))switch(ne){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:nt(r,i,ne,u,o,null)}return;default:if(Df(i)){for(le in o)o.hasOwnProperty(le)&&(u=o[le],u!==void 0&&_m(r,i,le,u,o,void 0));return}}for(U in o)o.hasOwnProperty(U)&&(u=o[U],u!=null&&nt(r,i,U,u,o,null))}function fN(r,i,o,u){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var m=null,y=null,T=null,U=null,Y=null,ne=null,le=null;for(ae in o){var fe=o[ae];if(o.hasOwnProperty(ae)&&fe!=null)switch(ae){case"checked":break;case"value":break;case"defaultValue":Y=fe;default:u.hasOwnProperty(ae)||nt(r,i,ae,null,u,fe)}}for(var se in u){var ae=u[se];if(fe=o[se],u.hasOwnProperty(se)&&(ae!=null||fe!=null))switch(se){case"type":y=ae;break;case"name":m=ae;break;case"checked":ne=ae;break;case"defaultChecked":le=ae;break;case"value":T=ae;break;case"defaultValue":U=ae;break;case"children":case"dangerouslySetInnerHTML":if(ae!=null)throw Error(s(137,i));break;default:ae!==fe&&nt(r,i,se,ae,u,fe)}}lo(r,T,U,Y,ne,le,y,m);return;case"select":ae=T=U=se=null;for(y in o)if(Y=o[y],o.hasOwnProperty(y)&&Y!=null)switch(y){case"value":break;case"multiple":ae=Y;default:u.hasOwnProperty(y)||nt(r,i,y,null,u,Y)}for(m in u)if(y=u[m],Y=o[m],u.hasOwnProperty(m)&&(y!=null||Y!=null))switch(m){case"value":se=y;break;case"defaultValue":U=y;break;case"multiple":T=y;default:y!==Y&&nt(r,i,m,y,u,Y)}i=U,o=T,u=ae,se!=null?Pi(r,!!o,se,!1):!!u!=!!o&&(i!=null?Pi(r,!!o,i,!0):Pi(r,!!o,o?[]:"",!1));return;case"textarea":ae=se=null;for(U in o)if(m=o[U],o.hasOwnProperty(U)&&m!=null&&!u.hasOwnProperty(U))switch(U){case"value":break;case"children":break;default:nt(r,i,U,null,u,m)}for(T in u)if(m=u[T],y=o[T],u.hasOwnProperty(T)&&(m!=null||y!=null))switch(T){case"value":se=m;break;case"defaultValue":ae=m;break;case"children":break;case"dangerouslySetInnerHTML":if(m!=null)throw Error(s(91));break;default:m!==y&&nt(r,i,T,m,u,y)}wy(r,se,ae);return;case"option":for(var xe in o)if(se=o[xe],o.hasOwnProperty(xe)&&se!=null&&!u.hasOwnProperty(xe))switch(xe){case"selected":r.selected=!1;break;default:nt(r,i,xe,null,u,se)}for(Y in u)if(se=u[Y],ae=o[Y],u.hasOwnProperty(Y)&&se!==ae&&(se!=null||ae!=null))switch(Y){case"selected":r.selected=se&&typeof se!="function"&&typeof se!="symbol";break;default:nt(r,i,Y,se,u,ae)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var De in o)se=o[De],o.hasOwnProperty(De)&&se!=null&&!u.hasOwnProperty(De)&&nt(r,i,De,null,u,se);for(ne in u)if(se=u[ne],ae=o[ne],u.hasOwnProperty(ne)&&se!==ae&&(se!=null||ae!=null))switch(ne){case"children":case"dangerouslySetInnerHTML":if(se!=null)throw Error(s(137,i));break;default:nt(r,i,ne,se,u,ae)}return;default:if(Df(i)){for(var rt in o)se=o[rt],o.hasOwnProperty(rt)&&se!==void 0&&!u.hasOwnProperty(rt)&&_m(r,i,rt,void 0,u,se);for(le in u)se=u[le],ae=o[le],!u.hasOwnProperty(le)||se===ae||se===void 0&&ae===void 0||_m(r,i,le,se,u,ae);return}}for(var J in o)se=o[J],o.hasOwnProperty(J)&&se!=null&&!u.hasOwnProperty(J)&&nt(r,i,J,null,u,se);for(fe in u)se=u[fe],ae=o[fe],!u.hasOwnProperty(fe)||se===ae||se==null&&ae==null||nt(r,i,fe,se,u,ae)}function Cb(r){switch(r){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function hN(){if(typeof performance.getEntriesByType=="function"){for(var r=0,i=0,o=performance.getEntriesByType("resource"),u=0;u<o.length;u++){var m=o[u],y=m.transferSize,T=m.initiatorType,U=m.duration;if(y&&U&&Cb(T)){for(T=0,U=m.responseEnd,u+=1;u<o.length;u++){var Y=o[u],ne=Y.startTime;if(ne>U)break;var le=Y.transferSize,fe=Y.initiatorType;le&&Cb(fe)&&(Y=Y.responseEnd,T+=le*(Y<U?1:(U-ne)/(Y-ne)))}if(--u,i+=8*(y+T)/(m.duration/1e3),r++,10<r)break}}if(0<r)return i/r/1e6}return navigator.connection&&(r=navigator.connection.downlink,typeof r=="number")?r:5}var wm=null,xm=null;function vu(r){return r.nodeType===9?r:r.ownerDocument}function Ab(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Tb(r,i){if(r===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&i==="foreignObject"?0:r}function Sm(r,i){return r==="textarea"||r==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Em=null;function mN(){var r=window.event;return r&&r.type==="popstate"?r===Em?!1:(Em=r,!0):(Em=null,!1)}var Nb=typeof setTimeout=="function"?setTimeout:void 0,pN=typeof clearTimeout=="function"?clearTimeout:void 0,Ob=typeof Promise=="function"?Promise:void 0,gN=typeof queueMicrotask=="function"?queueMicrotask:typeof Ob<"u"?function(r){return Ob.resolve(null).then(r).catch(yN)}:Nb;function yN(r){setTimeout(function(){throw r})}function Cs(r){return r==="head"}function jb(r,i){var o=i,u=0;do{var m=o.nextSibling;if(r.removeChild(o),m&&m.nodeType===8)if(o=m.data,o==="/$"||o==="/&"){if(u===0){r.removeChild(m),ba(i);return}u--}else if(o==="$"||o==="$?"||o==="$~"||o==="$!"||o==="&")u++;else if(o==="html")Vo(r.ownerDocument.documentElement);else if(o==="head"){o=r.ownerDocument.head,Vo(o);for(var y=o.firstChild;y;){var T=y.nextSibling,U=y.nodeName;y[Ys]||U==="SCRIPT"||U==="STYLE"||U==="LINK"&&y.rel.toLowerCase()==="stylesheet"||o.removeChild(y),y=T}}else o==="body"&&Vo(r.ownerDocument.body);o=m}while(o);ba(i)}function Rb(r,i){var o=r;r=0;do{var u=o.nextSibling;if(o.nodeType===1?i?(o._stashedDisplay=o.style.display,o.style.display="none"):(o.style.display=o._stashedDisplay||"",o.getAttribute("style")===""&&o.removeAttribute("style")):o.nodeType===3&&(i?(o._stashedText=o.nodeValue,o.nodeValue=""):o.nodeValue=o._stashedText||""),u&&u.nodeType===8)if(o=u.data,o==="/$"){if(r===0)break;r--}else o!=="$"&&o!=="$?"&&o!=="$~"&&o!=="$!"||r++;o=u}while(o)}function Cm(r){var i=r.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var o=i;switch(i=i.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":Cm(o),ao(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}r.removeChild(o)}}function vN(r,i,o,u){for(;r.nodeType===1;){var m=o;if(r.nodeName.toLowerCase()!==i.toLowerCase()){if(!u&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(u){if(!r[Ys])switch(i){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(y=r.getAttribute("rel"),y==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(y!==m.rel||r.getAttribute("href")!==(m.href==null||m.href===""?null:m.href)||r.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin)||r.getAttribute("title")!==(m.title==null?null:m.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(y=r.getAttribute("src"),(y!==(m.src==null?null:m.src)||r.getAttribute("type")!==(m.type==null?null:m.type)||r.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin))&&y&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(i==="input"&&r.type==="hidden"){var y=m.name==null?null:""+m.name;if(m.type==="hidden"&&r.getAttribute("name")===y)return r}else return r;if(r=zn(r.nextSibling),r===null)break}return null}function bN(r,i,o){if(i==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!o||(r=zn(r.nextSibling),r===null))return null;return r}function kb(r,i){for(;r.nodeType!==8;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!i||(r=zn(r.nextSibling),r===null))return null;return r}function Am(r){return r.data==="$?"||r.data==="$~"}function Tm(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState!=="loading"}function _N(r,i){var o=r.ownerDocument;if(r.data==="$~")r._reactRetry=i;else if(r.data!=="$?"||o.readyState!=="loading")i();else{var u=function(){i(),o.removeEventListener("DOMContentLoaded",u)};o.addEventListener("DOMContentLoaded",u),r._reactRetry=u}}function zn(r){for(;r!=null;r=r.nextSibling){var i=r.nodeType;if(i===1||i===3)break;if(i===8){if(i=r.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return r}var Nm=null;function Mb(r){r=r.nextSibling;for(var i=0;r;){if(r.nodeType===8){var o=r.data;if(o==="/$"||o==="/&"){if(i===0)return zn(r.nextSibling);i--}else o!=="$"&&o!=="$!"&&o!=="$?"&&o!=="$~"&&o!=="&"||i++}r=r.nextSibling}return null}function Db(r){r=r.previousSibling;for(var i=0;r;){if(r.nodeType===8){var o=r.data;if(o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"){if(i===0)return r;i--}else o!=="/$"&&o!=="/&"||i++}r=r.previousSibling}return null}function Ub(r,i,o){switch(i=vu(o),r){case"html":if(r=i.documentElement,!r)throw Error(s(452));return r;case"head":if(r=i.head,!r)throw Error(s(453));return r;case"body":if(r=i.body,!r)throw Error(s(454));return r;default:throw Error(s(451))}}function Vo(r){for(var i=r.attributes;i.length;)r.removeAttributeNode(i[0]);ao(r)}var Bn=new Map,Ib=new Set;function bu(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var Br=z.d;z.d={f:wN,r:xN,D:SN,C:EN,L:CN,m:AN,X:NN,S:TN,M:ON};function wN(){var r=Br.f(),i=uu();return r||i}function xN(r){var i=ss(r);i!==null&&i.tag===5&&i.type==="form"?Z0(i):Br.r(r)}var ga=typeof document>"u"?null:document;function $b(r,i,o){var u=ga;if(u&&typeof i=="string"&&i){var m=Kt(i);m='link[rel="'+r+'"][href="'+m+'"]',typeof o=="string"&&(m+='[crossorigin="'+o+'"]'),Ib.has(m)||(Ib.add(m),r={rel:r,crossOrigin:o,href:i},u.querySelector(m)===null&&(i=u.createElement("link"),Ht(i,"link",r),xt(i),u.head.appendChild(i)))}}function SN(r){Br.D(r),$b("dns-prefetch",r,null)}function EN(r,i){Br.C(r,i),$b("preconnect",r,i)}function CN(r,i,o){Br.L(r,i,o);var u=ga;if(u&&r&&i){var m='link[rel="preload"][as="'+Kt(i)+'"]';i==="image"&&o&&o.imageSrcSet?(m+='[imagesrcset="'+Kt(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(m+='[imagesizes="'+Kt(o.imageSizes)+'"]')):m+='[href="'+Kt(r)+'"]';var y=m;switch(i){case"style":y=ya(r);break;case"script":y=va(r)}Bn.has(y)||(r=p({rel:"preload",href:i==="image"&&o&&o.imageSrcSet?void 0:r,as:i},o),Bn.set(y,r),u.querySelector(m)!==null||i==="style"&&u.querySelector(Fo(y))||i==="script"&&u.querySelector(Yo(y))||(i=u.createElement("link"),Ht(i,"link",r),xt(i),u.head.appendChild(i)))}}function AN(r,i){Br.m(r,i);var o=ga;if(o&&r){var u=i&&typeof i.as=="string"?i.as:"script",m='link[rel="modulepreload"][as="'+Kt(u)+'"][href="'+Kt(r)+'"]',y=m;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":y=va(r)}if(!Bn.has(y)&&(r=p({rel:"modulepreload",href:r},i),Bn.set(y,r),o.querySelector(m)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(Yo(y)))return}u=o.createElement("link"),Ht(u,"link",r),xt(u),o.head.appendChild(u)}}}function TN(r,i,o){Br.S(r,i,o);var u=ga;if(u&&r){var m=as(u).hoistableStyles,y=ya(r);i=i||"default";var T=m.get(y);if(!T){var U={loading:0,preload:null};if(T=u.querySelector(Fo(y)))U.loading=5;else{r=p({rel:"stylesheet",href:r,"data-precedence":i},o),(o=Bn.get(y))&&Om(r,o);var Y=T=u.createElement("link");xt(Y),Ht(Y,"link",r),Y._p=new Promise(function(ne,le){Y.onload=ne,Y.onerror=le}),Y.addEventListener("load",function(){U.loading|=1}),Y.addEventListener("error",function(){U.loading|=2}),U.loading|=4,_u(T,i,u)}T={type:"stylesheet",instance:T,count:1,state:U},m.set(y,T)}}}function NN(r,i){Br.X(r,i);var o=ga;if(o&&r){var u=as(o).hoistableScripts,m=va(r),y=u.get(m);y||(y=o.querySelector(Yo(m)),y||(r=p({src:r,async:!0},i),(i=Bn.get(m))&&jm(r,i),y=o.createElement("script"),xt(y),Ht(y,"link",r),o.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},u.set(m,y))}}function ON(r,i){Br.M(r,i);var o=ga;if(o&&r){var u=as(o).hoistableScripts,m=va(r),y=u.get(m);y||(y=o.querySelector(Yo(m)),y||(r=p({src:r,async:!0,type:"module"},i),(i=Bn.get(m))&&jm(r,i),y=o.createElement("script"),xt(y),Ht(y,"link",r),o.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},u.set(m,y))}}function Lb(r,i,o,u){var m=(m=ge.current)?bu(m):null;if(!m)throw Error(s(446));switch(r){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(i=ya(o.href),o=as(m).hoistableStyles,u=o.get(i),u||(u={type:"style",instance:null,count:0,state:null},o.set(i,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){r=ya(o.href);var y=as(m).hoistableStyles,T=y.get(r);if(T||(m=m.ownerDocument||m,T={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},y.set(r,T),(y=m.querySelector(Fo(r)))&&!y._p&&(T.instance=y,T.state.loading=5),Bn.has(r)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},Bn.set(r,o),y||jN(m,r,o,T.state))),i&&u===null)throw Error(s(528,""));return T}if(i&&u!==null)throw Error(s(529,""));return null;case"script":return i=o.async,o=o.src,typeof o=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=va(o),o=as(m).hoistableScripts,u=o.get(i),u||(u={type:"script",instance:null,count:0,state:null},o.set(i,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,r))}}function ya(r){return'href="'+Kt(r)+'"'}function Fo(r){return'link[rel="stylesheet"]['+r+"]"}function zb(r){return p({},r,{"data-precedence":r.precedence,precedence:null})}function jN(r,i,o,u){r.querySelector('link[rel="preload"][as="style"]['+i+"]")?u.loading=1:(i=r.createElement("link"),u.preload=i,i.addEventListener("load",function(){return u.loading|=1}),i.addEventListener("error",function(){return u.loading|=2}),Ht(i,"link",o),xt(i),r.head.appendChild(i))}function va(r){return'[src="'+Kt(r)+'"]'}function Yo(r){return"script[async]"+r}function Bb(r,i,o){if(i.count++,i.instance===null)switch(i.type){case"style":var u=r.querySelector('style[data-href~="'+Kt(o.href)+'"]');if(u)return i.instance=u,xt(u),u;var m=p({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return u=(r.ownerDocument||r).createElement("style"),xt(u),Ht(u,"style",m),_u(u,o.precedence,r),i.instance=u;case"stylesheet":m=ya(o.href);var y=r.querySelector(Fo(m));if(y)return i.state.loading|=4,i.instance=y,xt(y),y;u=zb(o),(m=Bn.get(m))&&Om(u,m),y=(r.ownerDocument||r).createElement("link"),xt(y);var T=y;return T._p=new Promise(function(U,Y){T.onload=U,T.onerror=Y}),Ht(y,"link",u),i.state.loading|=4,_u(y,o.precedence,r),i.instance=y;case"script":return y=va(o.src),(m=r.querySelector(Yo(y)))?(i.instance=m,xt(m),m):(u=o,(m=Bn.get(y))&&(u=p({},o),jm(u,m)),r=r.ownerDocument||r,m=r.createElement("script"),xt(m),Ht(m,"link",u),r.head.appendChild(m),i.instance=m);case"void":return null;default:throw Error(s(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(u=i.instance,i.state.loading|=4,_u(u,o.precedence,r));return i.instance}function _u(r,i,o){for(var u=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),m=u.length?u[u.length-1]:null,y=m,T=0;T<u.length;T++){var U=u[T];if(U.dataset.precedence===i)y=U;else if(y!==m)break}y?y.parentNode.insertBefore(r,y.nextSibling):(i=o.nodeType===9?o.head:o,i.insertBefore(r,i.firstChild))}function Om(r,i){r.crossOrigin==null&&(r.crossOrigin=i.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=i.referrerPolicy),r.title==null&&(r.title=i.title)}function jm(r,i){r.crossOrigin==null&&(r.crossOrigin=i.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=i.referrerPolicy),r.integrity==null&&(r.integrity=i.integrity)}var wu=null;function Pb(r,i,o){if(wu===null){var u=new Map,m=wu=new Map;m.set(o,u)}else m=wu,u=m.get(o),u||(u=new Map,m.set(o,u));if(u.has(r))return u;for(u.set(r,null),o=o.getElementsByTagName(r),m=0;m<o.length;m++){var y=o[m];if(!(y[Ys]||y[jt]||r==="link"&&y.getAttribute("rel")==="stylesheet")&&y.namespaceURI!=="http://www.w3.org/2000/svg"){var T=y.getAttribute(i)||"";T=r+T;var U=u.get(T);U?U.push(y):u.set(T,[y])}}return u}function qb(r,i,o){r=r.ownerDocument||r,r.head.insertBefore(o,i==="title"?r.querySelector("head > title"):null)}function RN(r,i,o){if(o===1||i.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return r=i.disabled,typeof i.precedence=="string"&&r==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function Hb(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}function kN(r,i,o,u){if(o.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var m=ya(u.href),y=i.querySelector(Fo(m));if(y){i=y._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(r.count++,r=xu.bind(r),i.then(r,r)),o.state.loading|=4,o.instance=y,xt(y);return}y=i.ownerDocument||i,u=zb(u),(m=Bn.get(m))&&Om(u,m),y=y.createElement("link"),xt(y);var T=y;T._p=new Promise(function(U,Y){T.onload=U,T.onerror=Y}),Ht(y,"link",u),o.instance=y}r.stylesheets===null&&(r.stylesheets=new Map),r.stylesheets.set(o,i),(i=o.state.preload)&&(o.state.loading&3)===0&&(r.count++,o=xu.bind(r),i.addEventListener("load",o),i.addEventListener("error",o))}}var Rm=0;function MN(r,i){return r.stylesheets&&r.count===0&&Eu(r,r.stylesheets),0<r.count||0<r.imgCount?function(o){var u=setTimeout(function(){if(r.stylesheets&&Eu(r,r.stylesheets),r.unsuspend){var y=r.unsuspend;r.unsuspend=null,y()}},6e4+i);0<r.imgBytes&&Rm===0&&(Rm=62500*hN());var m=setTimeout(function(){if(r.waitingForImages=!1,r.count===0&&(r.stylesheets&&Eu(r,r.stylesheets),r.unsuspend)){var y=r.unsuspend;r.unsuspend=null,y()}},(r.imgBytes>Rm?50:800)+i);return r.unsuspend=o,function(){r.unsuspend=null,clearTimeout(u),clearTimeout(m)}}:null}function xu(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Eu(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var Su=null;function Eu(r,i){r.stylesheets=null,r.unsuspend!==null&&(r.count++,Su=new Map,i.forEach(DN,r),Su=null,xu.call(r))}function DN(r,i){if(!(i.state.loading&4)){var o=Su.get(r);if(o)var u=o.get(null);else{o=new Map,Su.set(r,o);for(var m=r.querySelectorAll("link[data-precedence],style[data-precedence]"),y=0;y<m.length;y++){var T=m[y];(T.nodeName==="LINK"||T.getAttribute("media")!=="not all")&&(o.set(T.dataset.precedence,T),u=T)}u&&o.set(null,u)}m=i.instance,T=m.getAttribute("data-precedence"),y=o.get(T)||u,y===u&&o.set(null,m),o.set(T,m),this.count++,u=xu.bind(this),m.addEventListener("load",u),m.addEventListener("error",u),y?y.parentNode.insertBefore(m,y.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(m,r.firstChild)),i.state.loading|=4}}var Go={$$typeof:E,Provider:null,Consumer:null,_currentValue:H,_currentValue2:H,_threadCount:0};function UN(r,i,o,u,m,y,T,U,Y){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ro(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ro(0),this.hiddenUpdates=ro(null),this.identifierPrefix=u,this.onUncaughtError=m,this.onCaughtError=y,this.onRecoverableError=T,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Y,this.incompleteTransitions=new Map}function Vb(r,i,o,u,m,y,T,U,Y,ne,le,fe){return r=new UN(r,i,o,T,Y,ne,le,fe,U),i=1,y===!0&&(i|=24),y=vn(3,null,null,i),r.current=y,y.stateNode=r,i=uh(),i.refCount++,r.pooledCache=i,i.refCount++,y.memoizedState={element:u,isDehydrated:o,cache:i},mh(y),r}function Fb(r){return r?(r=Ki,r):Ki}function Yb(r,i,o,u,m,y){m=Fb(m),u.context===null?u.context=m:u.pendingContext=m,u=ms(i),u.payload={element:o},y=y===void 0?null:y,y!==null&&(u.callback=y),o=ps(r,u,i),o!==null&&(un(o,r,i),Co(o,r,i))}function Gb(r,i){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var o=r.retryLane;r.retryLane=o!==0&&o<i?o:i}}function km(r,i){Gb(r,i),(r=r.alternate)&&Gb(r,i)}function Xb(r){if(r.tag===13||r.tag===31){var i=Qs(r,67108864);i!==null&&un(i,r,67108864),km(r,67108864)}}function Kb(r){if(r.tag===13||r.tag===31){var i=Sn();i=so(i);var o=Qs(r,i);o!==null&&un(o,r,i),km(r,i)}}var Cu=!0;function IN(r,i,o,u){var m=M.T;M.T=null;var y=z.p;try{z.p=2,Mm(r,i,o,u)}finally{z.p=y,M.T=m}}function $N(r,i,o,u){var m=M.T;M.T=null;var y=z.p;try{z.p=8,Mm(r,i,o,u)}finally{z.p=y,M.T=m}}function Mm(r,i,o,u){if(Cu){var m=Dm(u);if(m===null)bm(r,i,u,Au,o),Wb(r,u);else if(zN(m,r,i,o,u))u.stopPropagation();else if(Wb(r,u),i&4&&-1<LN.indexOf(r)){for(;m!==null;){var y=ss(m);if(y!==null)switch(y.tag){case 3:if(y=y.stateNode,y.current.memoizedState.isDehydrated){var T=wr(y.pendingLanes);if(T!==0){var U=y;for(U.pendingLanes|=2,U.entangledLanes|=2;T;){var Y=1<<31-Ee(T);U.entanglements[1]|=Y,T&=~Y}dr(y),(We&6)===0&&(lu=dt()+500,Po(0))}}break;case 31:case 13:U=Qs(y,2),U!==null&&un(U,y,2),uu(),km(y,2)}if(y=Dm(u),y===null&&bm(r,i,u,Au,o),y===m)break;m=y}m!==null&&u.stopPropagation()}else bm(r,i,u,null,o)}}function Dm(r){return r=If(r),Um(r)}var Au=null;function Um(r){if(Au=null,r=rs(r),r!==null){var i=l(r);if(i===null)r=null;else{var o=i.tag;if(o===13){if(r=c(i),r!==null)return r;r=null}else if(o===31){if(r=d(i),r!==null)return r;r=null}else if(o===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;r=null}else i!==r&&(r=null)}}return Au=r,null}function Qb(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(pn()){case kn:return 2;case nn:return 8;case gn:case _r:return 32;case ts:return 268435456;default:return 32}default:return 32}}var Im=!1,As=null,Ts=null,Ns=null,Xo=new Map,Ko=new Map,Os=[],LN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Wb(r,i){switch(r){case"focusin":case"focusout":As=null;break;case"dragenter":case"dragleave":Ts=null;break;case"mouseover":case"mouseout":Ns=null;break;case"pointerover":case"pointerout":Xo.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ko.delete(i.pointerId)}}function Qo(r,i,o,u,m,y){return r===null||r.nativeEvent!==y?(r={blockedOn:i,domEventName:o,eventSystemFlags:u,nativeEvent:y,targetContainers:[m]},i!==null&&(i=ss(i),i!==null&&Xb(i)),r):(r.eventSystemFlags|=u,i=r.targetContainers,m!==null&&i.indexOf(m)===-1&&i.push(m),r)}function zN(r,i,o,u,m){switch(i){case"focusin":return As=Qo(As,r,i,o,u,m),!0;case"dragenter":return Ts=Qo(Ts,r,i,o,u,m),!0;case"mouseover":return Ns=Qo(Ns,r,i,o,u,m),!0;case"pointerover":var y=m.pointerId;return Xo.set(y,Qo(Xo.get(y)||null,r,i,o,u,m)),!0;case"gotpointercapture":return y=m.pointerId,Ko.set(y,Qo(Ko.get(y)||null,r,i,o,u,m)),!0}return!1}function Jb(r){var i=rs(r.target);if(i!==null){var o=l(i);if(o!==null){if(i=o.tag,i===13){if(i=c(o),i!==null){r.blockedOn=i,mc(r.priority,function(){Kb(o)});return}}else if(i===31){if(i=d(o),i!==null){r.blockedOn=i,mc(r.priority,function(){Kb(o)});return}}else if(i===3&&o.stateNode.current.memoizedState.isDehydrated){r.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}r.blockedOn=null}function Tu(r){if(r.blockedOn!==null)return!1;for(var i=r.targetContainers;0<i.length;){var o=Dm(r.nativeEvent);if(o===null){o=r.nativeEvent;var u=new o.constructor(o.type,o);Uf=u,o.target.dispatchEvent(u),Uf=null}else return i=ss(o),i!==null&&Xb(i),r.blockedOn=o,!1;i.shift()}return!0}function Zb(r,i,o){Tu(r)&&o.delete(i)}function BN(){Im=!1,As!==null&&Tu(As)&&(As=null),Ts!==null&&Tu(Ts)&&(Ts=null),Ns!==null&&Tu(Ns)&&(Ns=null),Xo.forEach(Zb),Ko.forEach(Zb)}function Nu(r,i){r.blockedOn===i&&(r.blockedOn=null,Im||(Im=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,BN)))}var Ou=null;function e_(r){Ou!==r&&(Ou=r,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Ou===r&&(Ou=null);for(var i=0;i<r.length;i+=3){var o=r[i],u=r[i+1],m=r[i+2];if(typeof u!="function"){if(Um(u||o)===null)continue;break}var y=ss(o);y!==null&&(r.splice(i,3),i-=3,Dh(y,{pending:!0,data:m,method:o.method,action:u},u,m))}}))}function ba(r){function i(Y){return Nu(Y,r)}As!==null&&Nu(As,r),Ts!==null&&Nu(Ts,r),Ns!==null&&Nu(Ns,r),Xo.forEach(i),Ko.forEach(i);for(var o=0;o<Os.length;o++){var u=Os[o];u.blockedOn===r&&(u.blockedOn=null)}for(;0<Os.length&&(o=Os[0],o.blockedOn===null);)Jb(o),o.blockedOn===null&&Os.shift();if(o=(r.ownerDocument||r).$$reactFormReplay,o!=null)for(u=0;u<o.length;u+=3){var m=o[u],y=o[u+1],T=m[Xt]||null;if(typeof y=="function")T||e_(o);else if(T){var U=null;if(y&&y.hasAttribute("formAction")){if(m=y,T=y[Xt]||null)U=T.formAction;else if(Um(m)!==null)continue}else U=T.action;typeof U=="function"?o[u+1]=U:(o.splice(u,3),u-=3),e_(o)}}}function t_(){function r(y){y.canIntercept&&y.info==="react-transition"&&y.intercept({handler:function(){return new Promise(function(T){return m=T})},focusReset:"manual",scroll:"manual"})}function i(){m!==null&&(m(),m=null),u||setTimeout(o,20)}function o(){if(!u&&!navigation.transition){var y=navigation.currentEntry;y&&y.url!=null&&navigation.navigate(y.url,{state:y.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,m=null;return navigation.addEventListener("navigate",r),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(o,100),function(){u=!0,navigation.removeEventListener("navigate",r),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),m!==null&&(m(),m=null)}}}function $m(r){this._internalRoot=r}ju.prototype.render=$m.prototype.render=function(r){var i=this._internalRoot;if(i===null)throw Error(s(409));var o=i.current,u=Sn();Yb(o,u,r,i,null,null)},ju.prototype.unmount=$m.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var i=r.containerInfo;Yb(r.current,2,null,r,null,null),uu(),i[xr]=null}};function ju(r){this._internalRoot=r}ju.prototype.unstable_scheduleHydration=function(r){if(r){var i=hc();r={blockedOn:null,target:r,priority:i};for(var o=0;o<Os.length&&i!==0&&i<Os[o].priority;o++);Os.splice(o,0,r),o===0&&Jb(r)}};var n_=e.version;if(n_!=="19.2.0")throw Error(s(527,n_,"19.2.0"));z.findDOMNode=function(r){var i=r._reactInternals;if(i===void 0)throw typeof r.render=="function"?Error(s(188)):(r=Object.keys(r).join(","),Error(s(268,r)));return r=h(i),r=r!==null?g(r):null,r=r===null?null:r.stateNode,r};var PN={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:M,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ru=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ru.isDisabled&&Ru.supportsFiber)try{Vn=Ru.inject(PN),zt=Ru}catch{}}return Jo.createRoot=function(r,i){if(!a(r))throw Error(s(299));var o=!1,u="",m=cv,y=uv,T=dv;return i!=null&&(i.unstable_strictMode===!0&&(o=!0),i.identifierPrefix!==void 0&&(u=i.identifierPrefix),i.onUncaughtError!==void 0&&(m=i.onUncaughtError),i.onCaughtError!==void 0&&(y=i.onCaughtError),i.onRecoverableError!==void 0&&(T=i.onRecoverableError)),i=Vb(r,1,!1,null,null,o,u,null,m,y,T,t_),r[xr]=i.current,vm(r),new $m(i)},Jo.hydrateRoot=function(r,i,o){if(!a(r))throw Error(s(299));var u=!1,m="",y=cv,T=uv,U=dv,Y=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(m=o.identifierPrefix),o.onUncaughtError!==void 0&&(y=o.onUncaughtError),o.onCaughtError!==void 0&&(T=o.onCaughtError),o.onRecoverableError!==void 0&&(U=o.onRecoverableError),o.formState!==void 0&&(Y=o.formState)),i=Vb(r,1,!0,i,o??null,u,m,Y,y,T,U,t_),i.context=Fb(null),o=i.current,u=Sn(),u=so(u),m=ms(u),m.callback=null,ps(o,m,u),o=u,i.current.lanes=o,Fs(i,o),dr(i),r[xr]=i.current,vm(r),new ju(i)},Jo.version="19.2.0",Jo}var f_;function JN(){if(f_)return Bm.exports;f_=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Bm.exports=WN(),Bm.exports}var ZN=JN();var h_="popstate";function eO(t={}){function e(s,a){let{pathname:l,search:c,hash:d}=s.location;return Ep("",{pathname:l,search:c,hash:d},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function n(s,a){return typeof a=="string"?a:kl(a)}return nO(e,n,null,t)}function gt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function yr(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function tO(){return Math.random().toString(36).substring(2,10)}function m_(t,e){return{usr:t.state,key:t.key,idx:e}}function Ep(t,e,n=null,s){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?Ka(e):e,state:n,key:e&&e.key||s||tO()}}function kl({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Ka(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let s=t.indexOf("?");s>=0&&(e.search=t.substring(s),t=t.substring(0,s)),t&&(e.pathname=t)}return e}function nO(t,e,n,s={}){let{window:a=document.defaultView,v5Compat:l=!1}=s,c=a.history,d="POP",f=null,h=g();h==null&&(h=0,c.replaceState({...c.state,idx:h},""));function g(){return(c.state||{idx:null}).idx}function p(){d="POP";let S=g(),C=S==null?null:S-h;h=S,f&&f({action:d,location:w.location,delta:C})}function v(S,C){d="PUSH";let N=Ep(w.location,S,C);h=g()+1;let E=m_(N,h),A=w.createHref(N);try{c.pushState(E,"",A)}catch(j){if(j instanceof DOMException&&j.name==="DataCloneError")throw j;a.location.assign(A)}l&&f&&f({action:d,location:w.location,delta:1})}function _(S,C){d="REPLACE";let N=Ep(w.location,S,C);h=g();let E=m_(N,h),A=w.createHref(N);c.replaceState(E,"",A),l&&f&&f({action:d,location:w.location,delta:0})}function x(S){return rO(S)}let w={get action(){return d},get location(){return t(a,c)},listen(S){if(f)throw new Error("A history only accepts one active listener");return a.addEventListener(h_,p),f=S,()=>{a.removeEventListener(h_,p),f=null}},createHref(S){return e(a,S)},createURL:x,encodeLocation(S){let C=x(S);return{pathname:C.pathname,search:C.search,hash:C.hash}},push:v,replace:_,go(S){return c.go(S)}};return w}function rO(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),gt(n,"No window.location.(origin|href) available to create URL");let s=typeof t=="string"?t:kl(t);return s=s.replace(/ $/,"%20"),!e&&s.startsWith("//")&&(s=n+s),new URL(s,n)}function Kx(t,e,n="/"){return sO(t,e,n,!1)}function sO(t,e,n,s){let a=typeof e=="string"?Ka(e):e,l=Kr(a.pathname||"/",n);if(l==null)return null;let c=Qx(t);iO(c);let d=null;for(let f=0;d==null&&f<c.length;++f){let h=gO(l);d=mO(c[f],h,s)}return d}function Qx(t,e=[],n=[],s="",a=!1){let l=(c,d,f=a,h)=>{let g={relativePath:h===void 0?c.path||"":h,caseSensitive:c.caseSensitive===!0,childrenIndex:d,route:c};if(g.relativePath.startsWith("/")){if(!g.relativePath.startsWith(s)&&f)return;gt(g.relativePath.startsWith(s),`Absolute route path "${g.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),g.relativePath=g.relativePath.slice(s.length)}let p=Xr([s,g.relativePath]),v=n.concat(g);c.children&&c.children.length>0&&(gt(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${p}".`),Qx(c.children,e,v,p,f)),!(c.path==null&&!c.index)&&e.push({path:p,score:fO(p,c.index),routesMeta:v})};return t.forEach((c,d)=>{if(c.path===""||!c.path?.includes("?"))l(c,d);else for(let f of Wx(c.path))l(c,d,!0,f)}),e}function Wx(t){let e=t.split("/");if(e.length===0)return[];let[n,...s]=e,a=n.endsWith("?"),l=n.replace(/\?$/,"");if(s.length===0)return a?[l,""]:[l];let c=Wx(s.join("/")),d=[];return d.push(...c.map(f=>f===""?l:[l,f].join("/"))),a&&d.push(...c),d.map(f=>t.startsWith("/")&&f===""?"/":f)}function iO(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:hO(e.routesMeta.map(s=>s.childrenIndex),n.routesMeta.map(s=>s.childrenIndex)))}var aO=/^:[\w-]+$/,oO=3,lO=2,cO=1,uO=10,dO=-2,p_=t=>t==="*";function fO(t,e){let n=t.split("/"),s=n.length;return n.some(p_)&&(s+=dO),e&&(s+=lO),n.filter(a=>!p_(a)).reduce((a,l)=>a+(aO.test(l)?oO:l===""?cO:uO),s)}function hO(t,e){return t.length===e.length&&t.slice(0,-1).every((s,a)=>s===e[a])?t[t.length-1]-e[e.length-1]:0}function mO(t,e,n=!1){let{routesMeta:s}=t,a={},l="/",c=[];for(let d=0;d<s.length;++d){let f=s[d],h=d===s.length-1,g=l==="/"?e:e.slice(l.length)||"/",p=Ed({path:f.relativePath,caseSensitive:f.caseSensitive,end:h},g),v=f.route;if(!p&&h&&n&&!s[s.length-1].route.index&&(p=Ed({path:f.relativePath,caseSensitive:f.caseSensitive,end:!1},g)),!p)return null;Object.assign(a,p.params),c.push({params:a,pathname:Xr([l,p.pathname]),pathnameBase:_O(Xr([l,p.pathnameBase])),route:v}),p.pathnameBase!=="/"&&(l=Xr([l,p.pathnameBase]))}return c}function Ed(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,s]=pO(t.path,t.caseSensitive,t.end),a=e.match(n);if(!a)return null;let l=a[0],c=l.replace(/(.)\/+$/,"$1"),d=a.slice(1);return{params:s.reduce((h,{paramName:g,isOptional:p},v)=>{if(g==="*"){let x=d[v]||"";c=l.slice(0,l.length-x.length).replace(/(.)\/+$/,"$1")}const _=d[v];return p&&!_?h[g]=void 0:h[g]=(_||"").replace(/%2F/g,"/"),h},{}),pathname:l,pathnameBase:c,pattern:t}}function pO(t,e=!1,n=!0){yr(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let s=[],a="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,d,f)=>(s.push({paramName:d,isOptional:f!=null}),f?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(s.push({paramName:"*"}),a+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?a+="\\/*$":t!==""&&t!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),s]}function gO(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return yr(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Kr(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,s=t.charAt(n);return s&&s!=="/"?null:t.slice(n)||"/"}function yO(t,e="/"){let{pathname:n,search:s="",hash:a=""}=typeof t=="string"?Ka(t):t;return{pathname:n?n.startsWith("/")?n:vO(n,e):e,search:wO(s),hash:xO(a)}}function vO(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(a=>{a===".."?n.length>1&&n.pop():a!=="."&&n.push(a)}),n.length>1?n.join("/"):"/"}function Vm(t,e,n,s){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function bO(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Jx(t){let e=bO(t);return e.map((n,s)=>s===e.length-1?n.pathname:n.pathnameBase)}function Zx(t,e,n,s=!1){let a;typeof t=="string"?a=Ka(t):(a={...t},gt(!a.pathname||!a.pathname.includes("?"),Vm("?","pathname","search",a)),gt(!a.pathname||!a.pathname.includes("#"),Vm("#","pathname","hash",a)),gt(!a.search||!a.search.includes("#"),Vm("#","search","hash",a)));let l=t===""||a.pathname==="",c=l?"/":a.pathname,d;if(c==null)d=n;else{let p=e.length-1;if(!s&&c.startsWith("..")){let v=c.split("/");for(;v[0]==="..";)v.shift(),p-=1;a.pathname=v.join("/")}d=p>=0?e[p]:"/"}let f=yO(a,d),h=c&&c!=="/"&&c.endsWith("/"),g=(l||c===".")&&n.endsWith("/");return!f.pathname.endsWith("/")&&(h||g)&&(f.pathname+="/"),f}var Xr=t=>t.join("/").replace(/\/\/+/g,"/"),_O=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),wO=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,xO=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function SO(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var eS=["POST","PUT","PATCH","DELETE"];new Set(eS);var EO=["GET",...eS];new Set(EO);var Qa=O.createContext(null);Qa.displayName="DataRouter";var Jd=O.createContext(null);Jd.displayName="DataRouterState";O.createContext(!1);var tS=O.createContext({isTransitioning:!1});tS.displayName="ViewTransition";var CO=O.createContext(new Map);CO.displayName="Fetchers";var AO=O.createContext(null);AO.displayName="Await";var vr=O.createContext(null);vr.displayName="Navigation";var Kl=O.createContext(null);Kl.displayName="Location";var Jr=O.createContext({outlet:null,matches:[],isDataRoute:!1});Jr.displayName="Route";var pg=O.createContext(null);pg.displayName="RouteError";function TO(t,{relative:e}={}){gt(Ql(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:s}=O.useContext(vr),{hash:a,pathname:l,search:c}=Wl(t,{relative:e}),d=l;return n!=="/"&&(d=l==="/"?n:Xr([n,l])),s.createHref({pathname:d,search:c,hash:a})}function Ql(){return O.useContext(Kl)!=null}function ji(){return gt(Ql(),"useLocation() may be used only in the context of a <Router> component."),O.useContext(Kl).location}var nS="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function rS(t){O.useContext(vr).static||O.useLayoutEffect(t)}function Ps(){let{isDataRoute:t}=O.useContext(Jr);return t?BO():NO()}function NO(){gt(Ql(),"useNavigate() may be used only in the context of a <Router> component.");let t=O.useContext(Qa),{basename:e,navigator:n}=O.useContext(vr),{matches:s}=O.useContext(Jr),{pathname:a}=ji(),l=JSON.stringify(Jx(s)),c=O.useRef(!1);return rS(()=>{c.current=!0}),O.useCallback((f,h={})=>{if(yr(c.current,nS),!c.current)return;if(typeof f=="number"){n.go(f);return}let g=Zx(f,JSON.parse(l),a,h.relative==="path");t==null&&e!=="/"&&(g.pathname=g.pathname==="/"?e:Xr([e,g.pathname])),(h.replace?n.replace:n.push)(g,h.state,h)},[e,n,l,a,t])}O.createContext(null);function Wl(t,{relative:e}={}){let{matches:n}=O.useContext(Jr),{pathname:s}=ji(),a=JSON.stringify(Jx(n));return O.useMemo(()=>Zx(t,JSON.parse(a),s,e==="path"),[t,a,s,e])}function OO(t,e){return sS(t,e)}function sS(t,e,n,s,a){gt(Ql(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:l}=O.useContext(vr),{matches:c}=O.useContext(Jr),d=c[c.length-1],f=d?d.params:{},h=d?d.pathname:"/",g=d?d.pathnameBase:"/",p=d&&d.route;{let N=p&&p.path||"";iS(h,!p||N.endsWith("*")||N.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${h}" (under <Route path="${N}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${N}"> to <Route path="${N==="/"?"*":`${N}/*`}">.`)}let v=ji(),_;if(e){let N=typeof e=="string"?Ka(e):e;gt(g==="/"||N.pathname?.startsWith(g),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${g}" but pathname "${N.pathname}" was given in the \`location\` prop.`),_=N}else _=v;let x=_.pathname||"/",w=x;if(g!=="/"){let N=g.replace(/^\//,"").split("/");w="/"+x.replace(/^\//,"").split("/").slice(N.length).join("/")}let S=Kx(t,{pathname:w});yr(p||S!=null,`No routes matched location "${_.pathname}${_.search}${_.hash}" `),yr(S==null||S[S.length-1].route.element!==void 0||S[S.length-1].route.Component!==void 0||S[S.length-1].route.lazy!==void 0,`Matched leaf route at location "${_.pathname}${_.search}${_.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let C=DO(S&&S.map(N=>Object.assign({},N,{params:Object.assign({},f,N.params),pathname:Xr([g,l.encodeLocation?l.encodeLocation(N.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:N.pathname]),pathnameBase:N.pathnameBase==="/"?g:Xr([g,l.encodeLocation?l.encodeLocation(N.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:N.pathnameBase])})),c,n,s,a);return e&&C?O.createElement(Kl.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",..._},navigationType:"POP"}},C):C}function jO(){let t=zO(),e=SO(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:s},l={padding:"2px 4px",backgroundColor:s},c=null;return console.error("Error handled by React Router default ErrorBoundary:",t),c=O.createElement(O.Fragment,null,O.createElement("p",null," Hey developer "),O.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",O.createElement("code",{style:l},"ErrorBoundary")," or"," ",O.createElement("code",{style:l},"errorElement")," prop on your route.")),O.createElement(O.Fragment,null,O.createElement("h2",null,"Unexpected Application Error!"),O.createElement("h3",{style:{fontStyle:"italic"}},e),n?O.createElement("pre",{style:a},n):null,c)}var RO=O.createElement(jO,null),kO=class extends O.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.unstable_onError?this.props.unstable_onError(t,e):console.error("React Router caught the following error during render",t)}render(){return this.state.error!==void 0?O.createElement(Jr.Provider,{value:this.props.routeContext},O.createElement(pg.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function MO({routeContext:t,match:e,children:n}){let s=O.useContext(Qa);return s&&s.static&&s.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=e.route.id),O.createElement(Jr.Provider,{value:t},n)}function DO(t,e=[],n=null,s=null,a=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let l=t,c=n?.errors;if(c!=null){let h=l.findIndex(g=>g.route.id&&c?.[g.route.id]!==void 0);gt(h>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),l=l.slice(0,Math.min(l.length,h+1))}let d=!1,f=-1;if(n)for(let h=0;h<l.length;h++){let g=l[h];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(f=h),g.route.id){let{loaderData:p,errors:v}=n,_=g.route.loader&&!p.hasOwnProperty(g.route.id)&&(!v||v[g.route.id]===void 0);if(g.route.lazy||_){d=!0,f>=0?l=l.slice(0,f+1):l=[l[0]];break}}}return l.reduceRight((h,g,p)=>{let v,_=!1,x=null,w=null;n&&(v=c&&g.route.id?c[g.route.id]:void 0,x=g.route.errorElement||RO,d&&(f<0&&p===0?(iS("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),_=!0,w=null):f===p&&(_=!0,w=g.route.hydrateFallbackElement||null)));let S=e.concat(l.slice(0,p+1)),C=()=>{let N;return v?N=x:_?N=w:g.route.Component?N=O.createElement(g.route.Component,null):g.route.element?N=g.route.element:N=h,O.createElement(MO,{match:g,routeContext:{outlet:h,matches:S,isDataRoute:n!=null},children:N})};return n&&(g.route.ErrorBoundary||g.route.errorElement||p===0)?O.createElement(kO,{location:n.location,revalidation:n.revalidation,component:x,error:v,children:C(),routeContext:{outlet:null,matches:S,isDataRoute:!0},unstable_onError:s}):C()},null)}function gg(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function UO(t){let e=O.useContext(Qa);return gt(e,gg(t)),e}function IO(t){let e=O.useContext(Jd);return gt(e,gg(t)),e}function $O(t){let e=O.useContext(Jr);return gt(e,gg(t)),e}function yg(t){let e=$O(t),n=e.matches[e.matches.length-1];return gt(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function LO(){return yg("useRouteId")}function zO(){let t=O.useContext(pg),e=IO("useRouteError"),n=yg("useRouteError");return t!==void 0?t:e.errors?.[n]}function BO(){let{router:t}=UO("useNavigate"),e=yg("useNavigate"),n=O.useRef(!1);return rS(()=>{n.current=!0}),O.useCallback(async(a,l={})=>{yr(n.current,nS),n.current&&(typeof a=="number"?t.navigate(a):await t.navigate(a,{fromRouteId:e,...l}))},[t,e])}var g_={};function iS(t,e,n){!e&&!g_[t]&&(g_[t]=!0,yr(!1,n))}O.memo(PO);function PO({routes:t,future:e,state:n,unstable_onError:s}){return sS(t,void 0,n,s,e)}function $s(t){gt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function qO({basename:t="/",children:e=null,location:n,navigationType:s="POP",navigator:a,static:l=!1}){gt(!Ql(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=t.replace(/^\/*/,"/"),d=O.useMemo(()=>({basename:c,navigator:a,static:l,future:{}}),[c,a,l]);typeof n=="string"&&(n=Ka(n));let{pathname:f="/",search:h="",hash:g="",state:p=null,key:v="default"}=n,_=O.useMemo(()=>{let x=Kr(f,c);return x==null?null:{location:{pathname:x,search:h,hash:g,state:p,key:v},navigationType:s}},[c,f,h,g,p,v,s]);return yr(_!=null,`<Router basename="${c}"> is not able to match the URL "${f}${h}${g}" because it does not start with the basename, so the <Router> won't render anything.`),_==null?null:O.createElement(vr.Provider,{value:d},O.createElement(Kl.Provider,{children:e,value:_}))}function HO({children:t,location:e}){return OO(Cp(t),e)}function Cp(t,e=[]){let n=[];return O.Children.forEach(t,(s,a)=>{if(!O.isValidElement(s))return;let l=[...e,a];if(s.type===O.Fragment){n.push.apply(n,Cp(s.props.children,l));return}gt(s.type===$s,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),gt(!s.props.index||!s.props.children,"An index route cannot have child routes.");let c={id:s.props.id||l.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,middleware:s.props.middleware,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(c.children=Cp(s.props.children,l)),n.push(c)}),n}var od="get",ld="application/x-www-form-urlencoded";function Zd(t){return t!=null&&typeof t.tagName=="string"}function VO(t){return Zd(t)&&t.tagName.toLowerCase()==="button"}function FO(t){return Zd(t)&&t.tagName.toLowerCase()==="form"}function YO(t){return Zd(t)&&t.tagName.toLowerCase()==="input"}function GO(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function XO(t,e){return t.button===0&&(!e||e==="_self")&&!GO(t)}var ku=null;function KO(){if(ku===null)try{new FormData(document.createElement("form"),0),ku=!1}catch{ku=!0}return ku}var QO=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Fm(t){return t!=null&&!QO.has(t)?(yr(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${ld}"`),null):t}function WO(t,e){let n,s,a,l,c;if(FO(t)){let d=t.getAttribute("action");s=d?Kr(d,e):null,n=t.getAttribute("method")||od,a=Fm(t.getAttribute("enctype"))||ld,l=new FormData(t)}else if(VO(t)||YO(t)&&(t.type==="submit"||t.type==="image")){let d=t.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let f=t.getAttribute("formaction")||d.getAttribute("action");if(s=f?Kr(f,e):null,n=t.getAttribute("formmethod")||d.getAttribute("method")||od,a=Fm(t.getAttribute("formenctype"))||Fm(d.getAttribute("enctype"))||ld,l=new FormData(d,t),!KO()){let{name:h,type:g,value:p}=t;if(g==="image"){let v=h?`${h}.`:"";l.append(`${v}x`,"0"),l.append(`${v}y`,"0")}else h&&l.append(h,p)}}else{if(Zd(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=od,s=null,a=ld,c=t}return l&&a==="text/plain"&&(c=l,l=void 0),{action:s,method:n.toLowerCase(),encType:a,formData:l,body:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function vg(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function JO(t,e,n){let s=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return s.pathname==="/"?s.pathname=`_root.${n}`:e&&Kr(s.pathname,e)==="/"?s.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:s.pathname=`${s.pathname.replace(/\/$/,"")}.${n}`,s}async function ZO(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function ej(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function tj(t,e,n){let s=await Promise.all(t.map(async a=>{let l=e.routes[a.route.id];if(l){let c=await ZO(l,n);return c.links?c.links():[]}return[]}));return ij(s.flat(1).filter(ej).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function y_(t,e,n,s,a,l){let c=(f,h)=>n[h]?f.route.id!==n[h].route.id:!0,d=(f,h)=>n[h].pathname!==f.pathname||n[h].route.path?.endsWith("*")&&n[h].params["*"]!==f.params["*"];return l==="assets"?e.filter((f,h)=>c(f,h)||d(f,h)):l==="data"?e.filter((f,h)=>{let g=s.routes[f.route.id];if(!g||!g.hasLoader)return!1;if(c(f,h)||d(f,h))return!0;if(f.route.shouldRevalidate){let p=f.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(t,window.origin),nextParams:f.params,defaultShouldRevalidate:!0});if(typeof p=="boolean")return p}return!0}):[]}function nj(t,e,{includeHydrateFallback:n}={}){return rj(t.map(s=>{let a=e.routes[s.route.id];if(!a)return[];let l=[a.module];return a.clientActionModule&&(l=l.concat(a.clientActionModule)),a.clientLoaderModule&&(l=l.concat(a.clientLoaderModule)),n&&a.hydrateFallbackModule&&(l=l.concat(a.hydrateFallbackModule)),a.imports&&(l=l.concat(a.imports)),l}).flat(1))}function rj(t){return[...new Set(t)]}function sj(t){let e={},n=Object.keys(t).sort();for(let s of n)e[s]=t[s];return e}function ij(t,e){let n=new Set;return new Set(e),t.reduce((s,a)=>{let l=JSON.stringify(sj(a));return n.has(l)||(n.add(l),s.push({key:l,link:a})),s},[])}function aS(){let t=O.useContext(Qa);return vg(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function aj(){let t=O.useContext(Jd);return vg(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var bg=O.createContext(void 0);bg.displayName="FrameworkContext";function oS(){let t=O.useContext(bg);return vg(t,"You must render this element inside a <HydratedRouter> element"),t}function oj(t,e){let n=O.useContext(bg),[s,a]=O.useState(!1),[l,c]=O.useState(!1),{onFocus:d,onBlur:f,onMouseEnter:h,onMouseLeave:g,onTouchStart:p}=e,v=O.useRef(null);O.useEffect(()=>{if(t==="render"&&c(!0),t==="viewport"){let w=C=>{C.forEach(N=>{c(N.isIntersecting)})},S=new IntersectionObserver(w,{threshold:.5});return v.current&&S.observe(v.current),()=>{S.disconnect()}}},[t]),O.useEffect(()=>{if(s){let w=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(w)}}},[s]);let _=()=>{a(!0)},x=()=>{a(!1),c(!1)};return n?t!=="intent"?[l,v,{}]:[l,v,{onFocus:Zo(d,_),onBlur:Zo(f,x),onMouseEnter:Zo(h,_),onMouseLeave:Zo(g,x),onTouchStart:Zo(p,_)}]:[!1,v,{}]}function Zo(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function lj({page:t,...e}){let{router:n}=aS(),s=O.useMemo(()=>Kx(n.routes,t,n.basename),[n.routes,t,n.basename]);return s?O.createElement(uj,{page:t,matches:s,...e}):null}function cj(t){let{manifest:e,routeModules:n}=oS(),[s,a]=O.useState([]);return O.useEffect(()=>{let l=!1;return tj(t,e,n).then(c=>{l||a(c)}),()=>{l=!0}},[t,e,n]),s}function uj({page:t,matches:e,...n}){let s=ji(),{manifest:a,routeModules:l}=oS(),{basename:c}=aS(),{loaderData:d,matches:f}=aj(),h=O.useMemo(()=>y_(t,e,f,a,s,"data"),[t,e,f,a,s]),g=O.useMemo(()=>y_(t,e,f,a,s,"assets"),[t,e,f,a,s]),p=O.useMemo(()=>{if(t===s.pathname+s.search+s.hash)return[];let x=new Set,w=!1;if(e.forEach(C=>{let N=a.routes[C.route.id];!N||!N.hasLoader||(!h.some(E=>E.route.id===C.route.id)&&C.route.id in d&&l[C.route.id]?.shouldRevalidate||N.hasClientLoader?w=!0:x.add(C.route.id))}),x.size===0)return[];let S=JO(t,c,"data");return w&&x.size>0&&S.searchParams.set("_routes",e.filter(C=>x.has(C.route.id)).map(C=>C.route.id).join(",")),[S.pathname+S.search]},[c,d,s,a,h,e,t,l]),v=O.useMemo(()=>nj(g,a),[g,a]),_=cj(g);return O.createElement(O.Fragment,null,p.map(x=>O.createElement("link",{key:x,rel:"prefetch",as:"fetch",href:x,...n})),v.map(x=>O.createElement("link",{key:x,rel:"modulepreload",href:x,...n})),_.map(({key:x,link:w})=>O.createElement("link",{key:x,nonce:n.nonce,...w})))}function dj(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var lS=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{lS&&(window.__reactRouterVersion="7.9.5")}catch{}function fj({basename:t,children:e,window:n}){let s=O.useRef();s.current==null&&(s.current=eO({window:n,v5Compat:!0}));let a=s.current,[l,c]=O.useState({action:a.action,location:a.location}),d=O.useCallback(f=>{O.startTransition(()=>c(f))},[c]);return O.useLayoutEffect(()=>a.listen(d),[a,d]),O.createElement(qO,{basename:t,children:e,location:l.location,navigationType:l.action,navigator:a})}var cS=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Si=O.forwardRef(function({onClick:e,discover:n="render",prefetch:s="none",relative:a,reloadDocument:l,replace:c,state:d,target:f,to:h,preventScrollReset:g,viewTransition:p,...v},_){let{basename:x}=O.useContext(vr),w=typeof h=="string"&&cS.test(h),S,C=!1;if(typeof h=="string"&&w&&(S=h,lS))try{let q=new URL(window.location.href),Q=h.startsWith("//")?new URL(q.protocol+h):new URL(h),G=Kr(Q.pathname,x);Q.origin===q.origin&&G!=null?h=G+Q.search+Q.hash:C=!0}catch{yr(!1,`<Link to="${h}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let N=TO(h,{relative:a}),[E,A,j]=oj(s,v),R=gj(h,{replace:c,state:d,target:f,preventScrollReset:g,relative:a,viewTransition:p});function D(q){e&&e(q),q.defaultPrevented||R(q)}let I=O.createElement("a",{...v,...j,href:S||N,onClick:C||l?e:D,ref:dj(_,A),target:f,"data-discover":!w&&n==="render"?"true":void 0});return E&&!w?O.createElement(O.Fragment,null,I,O.createElement(lj,{page:N})):I});Si.displayName="Link";var hj=O.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:s="",end:a=!1,style:l,to:c,viewTransition:d,children:f,...h},g){let p=Wl(c,{relative:h.relative}),v=ji(),_=O.useContext(Jd),{navigator:x,basename:w}=O.useContext(vr),S=_!=null&&wj(p)&&d===!0,C=x.encodeLocation?x.encodeLocation(p).pathname:p.pathname,N=v.pathname,E=_&&_.navigation&&_.navigation.location?_.navigation.location.pathname:null;n||(N=N.toLowerCase(),E=E?E.toLowerCase():null,C=C.toLowerCase()),E&&w&&(E=Kr(E,w)||E);const A=C!=="/"&&C.endsWith("/")?C.length-1:C.length;let j=N===C||!a&&N.startsWith(C)&&N.charAt(A)==="/",R=E!=null&&(E===C||!a&&E.startsWith(C)&&E.charAt(C.length)==="/"),D={isActive:j,isPending:R,isTransitioning:S},I=j?e:void 0,q;typeof s=="function"?q=s(D):q=[s,j?"active":null,R?"pending":null,S?"transitioning":null].filter(Boolean).join(" ");let Q=typeof l=="function"?l(D):l;return O.createElement(Si,{...h,"aria-current":I,className:q,ref:g,style:Q,to:c,viewTransition:d},typeof f=="function"?f(D):f)});hj.displayName="NavLink";var mj=O.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:s,replace:a,state:l,method:c=od,action:d,onSubmit:f,relative:h,preventScrollReset:g,viewTransition:p,...v},_)=>{let x=bj(),w=_j(d,{relative:h}),S=c.toLowerCase()==="get"?"get":"post",C=typeof d=="string"&&cS.test(d),N=E=>{if(f&&f(E),E.defaultPrevented)return;E.preventDefault();let A=E.nativeEvent.submitter,j=A?.getAttribute("formmethod")||c;x(A||E.currentTarget,{fetcherKey:e,method:j,navigate:n,replace:a,state:l,relative:h,preventScrollReset:g,viewTransition:p})};return O.createElement("form",{ref:_,method:S,action:w,onSubmit:s?f:N,...v,"data-discover":!C&&t==="render"?"true":void 0})});mj.displayName="Form";function pj(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function uS(t){let e=O.useContext(Qa);return gt(e,pj(t)),e}function gj(t,{target:e,replace:n,state:s,preventScrollReset:a,relative:l,viewTransition:c}={}){let d=Ps(),f=ji(),h=Wl(t,{relative:l});return O.useCallback(g=>{if(XO(g,e)){g.preventDefault();let p=n!==void 0?n:kl(f)===kl(h);d(t,{replace:p,state:s,preventScrollReset:a,relative:l,viewTransition:c})}},[f,d,h,n,s,e,t,a,l,c])}var yj=0,vj=()=>`__${String(++yj)}__`;function bj(){let{router:t}=uS("useSubmit"),{basename:e}=O.useContext(vr),n=LO();return O.useCallback(async(s,a={})=>{let{action:l,method:c,encType:d,formData:f,body:h}=WO(s,e);if(a.navigate===!1){let g=a.fetcherKey||vj();await t.fetch(g,n,a.action||l,{preventScrollReset:a.preventScrollReset,formData:f,body:h,formMethod:a.method||c,formEncType:a.encType||d,flushSync:a.flushSync})}else await t.navigate(a.action||l,{preventScrollReset:a.preventScrollReset,formData:f,body:h,formMethod:a.method||c,formEncType:a.encType||d,replace:a.replace,state:a.state,fromRouteId:n,flushSync:a.flushSync,viewTransition:a.viewTransition})},[t,e,n])}function _j(t,{relative:e}={}){let{basename:n}=O.useContext(vr),s=O.useContext(Jr);gt(s,"useFormAction must be used inside a RouteContext");let[a]=s.matches.slice(-1),l={...Wl(t||".",{relative:e})},c=ji();if(t==null){l.search=c.search;let d=new URLSearchParams(l.search),f=d.getAll("index");if(f.some(g=>g==="")){d.delete("index"),f.filter(p=>p).forEach(p=>d.append("index",p));let g=d.toString();l.search=g?`?${g}`:""}}return(!t||t===".")&&a.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(l.pathname=l.pathname==="/"?n:Xr([n,l.pathname])),kl(l)}function wj(t,{relative:e}={}){let n=O.useContext(tS);gt(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=uS("useViewTransitionState"),a=Wl(t,{relative:e});if(!n.isTransitioning)return!1;let l=Kr(n.currentLocation.pathname,s)||n.currentLocation.pathname,c=Kr(n.nextLocation.pathname,s)||n.nextLocation.pathname;return Ed(a.pathname,c)!=null||Ed(a.pathname,l)!=null}Xx();var Ap=function(t,e){return Ap=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,s){n.__proto__=s}||function(n,s){for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(n[a]=s[a])},Ap(t,e)};function dS(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Ap(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var Cd=function(){return Cd=Object.assign||function(e){for(var n,s=1,a=arguments.length;s<a;s++){n=arguments[s];for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&(e[l]=n[l])}return e},Cd.apply(this,arguments)};function Wa(t,e){var n={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(n[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(t);a<s.length;a++)e.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(t,s[a])&&(n[s[a]]=t[s[a]]);return n}function fS(t,e,n,s){var a=arguments.length,l=a<3?e:s===null?s=Object.getOwnPropertyDescriptor(e,n):s,c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")l=Reflect.decorate(t,e,n,s);else for(var d=t.length-1;d>=0;d--)(c=t[d])&&(l=(a<3?c(l):a>3?c(e,n,l):c(e,n))||l);return a>3&&l&&Object.defineProperty(e,n,l),l}function hS(t,e){return function(n,s){e(n,s,t)}}function mS(t,e,n,s,a,l){function c(C){if(C!==void 0&&typeof C!="function")throw new TypeError("Function expected");return C}for(var d=s.kind,f=d==="getter"?"get":d==="setter"?"set":"value",h=!e&&t?s.static?t:t.prototype:null,g=e||(h?Object.getOwnPropertyDescriptor(h,s.name):{}),p,v=!1,_=n.length-1;_>=0;_--){var x={};for(var w in s)x[w]=w==="access"?{}:s[w];for(var w in s.access)x.access[w]=s.access[w];x.addInitializer=function(C){if(v)throw new TypeError("Cannot add initializers after decoration has completed");l.push(c(C||null))};var S=(0,n[_])(d==="accessor"?{get:g.get,set:g.set}:g[f],x);if(d==="accessor"){if(S===void 0)continue;if(S===null||typeof S!="object")throw new TypeError("Object expected");(p=c(S.get))&&(g.get=p),(p=c(S.set))&&(g.set=p),(p=c(S.init))&&a.unshift(p)}else(p=c(S))&&(d==="field"?a.unshift(p):g[f]=p)}h&&Object.defineProperty(h,s.name,g),v=!0}function pS(t,e,n){for(var s=arguments.length>2,a=0;a<e.length;a++)n=s?e[a].call(t,n):e[a].call(t);return s?n:void 0}function gS(t){return typeof t=="symbol"?t:"".concat(t)}function yS(t,e,n){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(t,"name",{configurable:!0,value:n?"".concat(n," ",e):e})}function vS(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function Ae(t,e,n,s){function a(l){return l instanceof n?l:new n(function(c){c(l)})}return new(n||(n=Promise))(function(l,c){function d(g){try{h(s.next(g))}catch(p){c(p)}}function f(g){try{h(s.throw(g))}catch(p){c(p)}}function h(g){g.done?l(g.value):a(g.value).then(d,f)}h((s=s.apply(t,e||[])).next())})}function bS(t,e){var n={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},s,a,l,c=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return c.next=d(0),c.throw=d(1),c.return=d(2),typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function d(h){return function(g){return f([h,g])}}function f(h){if(s)throw new TypeError("Generator is already executing.");for(;c&&(c=0,h[0]&&(n=0)),n;)try{if(s=1,a&&(l=h[0]&2?a.return:h[0]?a.throw||((l=a.return)&&l.call(a),0):a.next)&&!(l=l.call(a,h[1])).done)return l;switch(a=0,l&&(h=[h[0]&2,l.value]),h[0]){case 0:case 1:l=h;break;case 4:return n.label++,{value:h[1],done:!1};case 5:n.label++,a=h[1],h=[0];continue;case 7:h=n.ops.pop(),n.trys.pop();continue;default:if(l=n.trys,!(l=l.length>0&&l[l.length-1])&&(h[0]===6||h[0]===2)){n=0;continue}if(h[0]===3&&(!l||h[1]>l[0]&&h[1]<l[3])){n.label=h[1];break}if(h[0]===6&&n.label<l[1]){n.label=l[1],l=h;break}if(l&&n.label<l[2]){n.label=l[2],n.ops.push(h);break}l[2]&&n.ops.pop(),n.trys.pop();continue}h=e.call(t,n)}catch(g){h=[6,g],a=0}finally{s=l=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}}var ef=Object.create?(function(t,e,n,s){s===void 0&&(s=n);var a=Object.getOwnPropertyDescriptor(e,n);(!a||("get"in a?!e.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,s,a)}):(function(t,e,n,s){s===void 0&&(s=n),t[s]=e[n]});function _S(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&ef(e,t,n)}function Ad(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],s=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&s>=t.length&&(t=void 0),{value:t&&t[s++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function _g(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var s=n.call(t),a,l=[],c;try{for(;(e===void 0||e-- >0)&&!(a=s.next()).done;)l.push(a.value)}catch(d){c={error:d}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(c)throw c.error}}return l}function wS(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(_g(arguments[e]));return t}function xS(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var s=Array(t),a=0,e=0;e<n;e++)for(var l=arguments[e],c=0,d=l.length;c<d;c++,a++)s[a]=l[c];return s}function SS(t,e,n){if(n||arguments.length===2)for(var s=0,a=e.length,l;s<a;s++)(l||!(s in e))&&(l||(l=Array.prototype.slice.call(e,0,s)),l[s]=e[s]);return t.concat(l||Array.prototype.slice.call(e))}function Pa(t){return this instanceof Pa?(this.v=t,this):new Pa(t)}function ES(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=n.apply(t,e||[]),a,l=[];return a=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),d("next"),d("throw"),d("return",c),a[Symbol.asyncIterator]=function(){return this},a;function c(_){return function(x){return Promise.resolve(x).then(_,p)}}function d(_,x){s[_]&&(a[_]=function(w){return new Promise(function(S,C){l.push([_,w,S,C])>1||f(_,w)})},x&&(a[_]=x(a[_])))}function f(_,x){try{h(s[_](x))}catch(w){v(l[0][3],w)}}function h(_){_.value instanceof Pa?Promise.resolve(_.value.v).then(g,p):v(l[0][2],_)}function g(_){f("next",_)}function p(_){f("throw",_)}function v(_,x){_(x),l.shift(),l.length&&f(l[0][0],l[0][1])}}function CS(t){var e,n;return e={},s("next"),s("throw",function(a){throw a}),s("return"),e[Symbol.iterator]=function(){return this},e;function s(a,l){e[a]=t[a]?function(c){return(n=!n)?{value:Pa(t[a](c)),done:!1}:l?l(c):c}:l}}function AS(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Ad=="function"?Ad(t):t[Symbol.iterator](),n={},s("next"),s("throw"),s("return"),n[Symbol.asyncIterator]=function(){return this},n);function s(l){n[l]=t[l]&&function(c){return new Promise(function(d,f){c=t[l](c),a(d,f,c.done,c.value)})}}function a(l,c,d,f){Promise.resolve(f).then(function(h){l({value:h,done:d})},c)}}function TS(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}var xj=Object.create?(function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}):function(t,e){t.default=e},Tp=function(t){return Tp=Object.getOwnPropertyNames||function(e){var n=[];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(n[n.length]=s);return n},Tp(t)};function NS(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n=Tp(t),s=0;s<n.length;s++)n[s]!=="default"&&ef(e,t,n[s]);return xj(e,t),e}function OS(t){return t&&t.__esModule?t:{default:t}}function jS(t,e,n,s){if(n==="a"&&!s)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?s:n==="a"?s.call(t):s?s.value:e.get(t)}function RS(t,e,n,s,a){if(s==="m")throw new TypeError("Private method is not writable");if(s==="a"&&!a)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!a:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return s==="a"?a.call(t,n):a?a.value=n:e.set(t,n),n}function kS(t,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof t=="function"?e===t:t.has(e)}function MS(t,e,n){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var s,a;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");s=e[Symbol.asyncDispose]}if(s===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");s=e[Symbol.dispose],n&&(a=s)}if(typeof s!="function")throw new TypeError("Object not disposable.");a&&(s=function(){try{a.call(this)}catch(l){return Promise.reject(l)}}),t.stack.push({value:e,dispose:s,async:n})}else n&&t.stack.push({async:!0});return e}var Sj=typeof SuppressedError=="function"?SuppressedError:function(t,e,n){var s=new Error(n);return s.name="SuppressedError",s.error=t,s.suppressed=e,s};function DS(t){function e(l){t.error=t.hasError?new Sj(l,t.error,"An error was suppressed during disposal."):l,t.hasError=!0}var n,s=0;function a(){for(;n=t.stack.pop();)try{if(!n.async&&s===1)return s=0,t.stack.push(n),Promise.resolve().then(a);if(n.dispose){var l=n.dispose.call(n.value);if(n.async)return s|=2,Promise.resolve(l).then(a,function(c){return e(c),a()})}else s|=1}catch(c){e(c)}if(s===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return a()}function US(t,e){return typeof t=="string"&&/^\.\.?\//.test(t)?t.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(n,s,a,l,c){return s?e?".jsx":".js":a&&(!l||!c)?n:a+l+"."+c.toLowerCase()+"js"}):t}const Ej={__extends:dS,__assign:Cd,__rest:Wa,__decorate:fS,__param:hS,__esDecorate:mS,__runInitializers:pS,__propKey:gS,__setFunctionName:yS,__metadata:vS,__awaiter:Ae,__generator:bS,__createBinding:ef,__exportStar:_S,__values:Ad,__read:_g,__spread:wS,__spreadArrays:xS,__spreadArray:SS,__await:Pa,__asyncGenerator:ES,__asyncDelegator:CS,__asyncValues:AS,__makeTemplateObject:TS,__importStar:NS,__importDefault:OS,__classPrivateFieldGet:jS,__classPrivateFieldSet:RS,__classPrivateFieldIn:kS,__addDisposableResource:MS,__disposeResources:DS,__rewriteRelativeImportExtension:US},Cj=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:MS,get __assign(){return Cd},__asyncDelegator:CS,__asyncGenerator:ES,__asyncValues:AS,__await:Pa,__awaiter:Ae,__classPrivateFieldGet:jS,__classPrivateFieldIn:kS,__classPrivateFieldSet:RS,__createBinding:ef,__decorate:fS,__disposeResources:DS,__esDecorate:mS,__exportStar:_S,__extends:dS,__generator:bS,__importDefault:OS,__importStar:NS,__makeTemplateObject:TS,__metadata:vS,__param:hS,__propKey:gS,__read:_g,__rest:Wa,__rewriteRelativeImportExtension:US,__runInitializers:pS,__setFunctionName:yS,__spread:wS,__spreadArray:SS,__spreadArrays:xS,__values:Ad,default:Ej},Symbol.toStringTag,{value:"Module"})),Aj=t=>t?(...e)=>t(...e):(...e)=>fetch(...e);class wg extends Error{constructor(e,n="FunctionsError",s){super(e),this.name=n,this.context=s}}class v_ extends wg{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class b_ extends wg{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class __ extends wg{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Np;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Np||(Np={}));class Tj{constructor(e,{headers:n={},customFetch:s,region:a=Np.Any}={}){this.url=e,this.headers=n,this.region=a,this.fetch=Aj(s)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return Ae(this,arguments,void 0,function*(n,s={}){var a;try{const{headers:l,method:c,body:d,signal:f}=s;let h={},{region:g}=s;g||(g=this.region);const p=new URL(`${this.url}/${n}`);g&&g!=="any"&&(h["x-region"]=g,p.searchParams.set("forceFunctionRegion",g));let v;d&&(l&&!Object.prototype.hasOwnProperty.call(l,"Content-Type")||!l)?typeof Blob<"u"&&d instanceof Blob||d instanceof ArrayBuffer?(h["Content-Type"]="application/octet-stream",v=d):typeof d=="string"?(h["Content-Type"]="text/plain",v=d):typeof FormData<"u"&&d instanceof FormData?v=d:(h["Content-Type"]="application/json",v=JSON.stringify(d)):v=d;const _=yield this.fetch(p.toString(),{method:c||"POST",headers:Object.assign(Object.assign(Object.assign({},h),this.headers),l),body:v,signal:f}).catch(C=>{throw C.name==="AbortError"?C:new v_(C)}),x=_.headers.get("x-relay-error");if(x&&x==="true")throw new b_(_);if(!_.ok)throw new __(_);let w=((a=_.headers.get("Content-Type"))!==null&&a!==void 0?a:"text/plain").split(";")[0].trim(),S;return w==="application/json"?S=yield _.json():w==="application/octet-stream"||w==="application/pdf"?S=yield _.blob():w==="text/event-stream"?S=_:w==="multipart/form-data"?S=yield _.formData():S=yield _.text(),{data:S,error:null,response:_}}catch(l){return l instanceof Error&&l.name==="AbortError"?{data:null,error:new v_(l)}:{data:null,error:l,response:l instanceof __||l instanceof b_?l.context:void 0}}})}}var Wt={};const Ja=Gx(Cj);var Mu={},Du={},Uu={},Iu={},$u={},Lu={},w_;function IS(){if(w_)return Lu;w_=1,Object.defineProperty(Lu,"__esModule",{value:!0});class t extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}}return Lu.default=t,Lu}var x_;function $S(){if(x_)return $u;x_=1,Object.defineProperty($u,"__esModule",{value:!0});const e=Ja.__importDefault(IS());class n{constructor(a){var l,c;this.shouldThrowOnError=!1,this.method=a.method,this.url=a.url,this.headers=new Headers(a.headers),this.schema=a.schema,this.body=a.body,this.shouldThrowOnError=(l=a.shouldThrowOnError)!==null&&l!==void 0?l:!1,this.signal=a.signal,this.isMaybeSingle=(c=a.isMaybeSingle)!==null&&c!==void 0?c:!1,a.fetch?this.fetch=a.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(a,l){return this.headers=new Headers(this.headers),this.headers.set(a,l),this}then(a,l){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const c=this.fetch;let d=c(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async f=>{var h,g,p,v;let _=null,x=null,w=null,S=f.status,C=f.statusText;if(f.ok){if(this.method!=="HEAD"){const j=await f.text();j===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((h=this.headers.get("Accept"))===null||h===void 0)&&h.includes("application/vnd.pgrst.plan+text"))?x=j:x=JSON.parse(j))}const E=(g=this.headers.get("Prefer"))===null||g===void 0?void 0:g.match(/count=(exact|planned|estimated)/),A=(p=f.headers.get("content-range"))===null||p===void 0?void 0:p.split("/");E&&A&&A.length>1&&(w=parseInt(A[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(x)&&(x.length>1?(_={code:"PGRST116",details:`Results contain ${x.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},x=null,w=null,S=406,C="Not Acceptable"):x.length===1?x=x[0]:x=null)}else{const E=await f.text();try{_=JSON.parse(E),Array.isArray(_)&&f.status===404&&(x=[],_=null,S=200,C="OK")}catch{f.status===404&&E===""?(S=204,C="No Content"):_={message:E}}if(_&&this.isMaybeSingle&&(!((v=_?.details)===null||v===void 0)&&v.includes("0 rows"))&&(_=null,S=200,C="OK"),_&&this.shouldThrowOnError)throw new e.default(_)}return{error:_,data:x,count:w,status:S,statusText:C}});return this.shouldThrowOnError||(d=d.catch(f=>{var h,g,p;return{error:{message:`${(h=f?.name)!==null&&h!==void 0?h:"FetchError"}: ${f?.message}`,details:`${(g=f?.stack)!==null&&g!==void 0?g:""}`,hint:"",code:`${(p=f?.code)!==null&&p!==void 0?p:""}`},data:null,count:null,status:0,statusText:""}})),d.then(a,l)}returns(){return this}overrideTypes(){return this}}return $u.default=n,$u}var S_;function LS(){if(S_)return Iu;S_=1,Object.defineProperty(Iu,"__esModule",{value:!0});const e=Ja.__importDefault($S());class n extends e.default{select(a){let l=!1;const c=(a??"*").split("").map(d=>/\s/.test(d)&&!l?"":(d==='"'&&(l=!l),d)).join("");return this.url.searchParams.set("select",c),this.headers.append("Prefer","return=representation"),this}order(a,{ascending:l=!0,nullsFirst:c,foreignTable:d,referencedTable:f=d}={}){const h=f?`${f}.order`:"order",g=this.url.searchParams.get(h);return this.url.searchParams.set(h,`${g?`${g},`:""}${a}.${l?"asc":"desc"}${c===void 0?"":c?".nullsfirst":".nullslast"}`),this}limit(a,{foreignTable:l,referencedTable:c=l}={}){const d=typeof c>"u"?"limit":`${c}.limit`;return this.url.searchParams.set(d,`${a}`),this}range(a,l,{foreignTable:c,referencedTable:d=c}={}){const f=typeof d>"u"?"offset":`${d}.offset`,h=typeof d>"u"?"limit":`${d}.limit`;return this.url.searchParams.set(f,`${a}`),this.url.searchParams.set(h,`${l-a+1}`),this}abortSignal(a){return this.signal=a,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:a=!1,verbose:l=!1,settings:c=!1,buffers:d=!1,wal:f=!1,format:h="text"}={}){var g;const p=[a?"analyze":null,l?"verbose":null,c?"settings":null,d?"buffers":null,f?"wal":null].filter(Boolean).join("|"),v=(g=this.headers.get("Accept"))!==null&&g!==void 0?g:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${h}; for="${v}"; options=${p};`),h==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(a){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${a}`),this}}return Iu.default=n,Iu}var E_;function xg(){if(E_)return Uu;E_=1,Object.defineProperty(Uu,"__esModule",{value:!0});const e=Ja.__importDefault(LS()),n=new RegExp("[,()]");class s extends e.default{eq(l,c){return this.url.searchParams.append(l,`eq.${c}`),this}neq(l,c){return this.url.searchParams.append(l,`neq.${c}`),this}gt(l,c){return this.url.searchParams.append(l,`gt.${c}`),this}gte(l,c){return this.url.searchParams.append(l,`gte.${c}`),this}lt(l,c){return this.url.searchParams.append(l,`lt.${c}`),this}lte(l,c){return this.url.searchParams.append(l,`lte.${c}`),this}like(l,c){return this.url.searchParams.append(l,`like.${c}`),this}likeAllOf(l,c){return this.url.searchParams.append(l,`like(all).{${c.join(",")}}`),this}likeAnyOf(l,c){return this.url.searchParams.append(l,`like(any).{${c.join(",")}}`),this}ilike(l,c){return this.url.searchParams.append(l,`ilike.${c}`),this}ilikeAllOf(l,c){return this.url.searchParams.append(l,`ilike(all).{${c.join(",")}}`),this}ilikeAnyOf(l,c){return this.url.searchParams.append(l,`ilike(any).{${c.join(",")}}`),this}is(l,c){return this.url.searchParams.append(l,`is.${c}`),this}in(l,c){const d=Array.from(new Set(c)).map(f=>typeof f=="string"&&n.test(f)?`"${f}"`:`${f}`).join(",");return this.url.searchParams.append(l,`in.(${d})`),this}contains(l,c){return typeof c=="string"?this.url.searchParams.append(l,`cs.${c}`):Array.isArray(c)?this.url.searchParams.append(l,`cs.{${c.join(",")}}`):this.url.searchParams.append(l,`cs.${JSON.stringify(c)}`),this}containedBy(l,c){return typeof c=="string"?this.url.searchParams.append(l,`cd.${c}`):Array.isArray(c)?this.url.searchParams.append(l,`cd.{${c.join(",")}}`):this.url.searchParams.append(l,`cd.${JSON.stringify(c)}`),this}rangeGt(l,c){return this.url.searchParams.append(l,`sr.${c}`),this}rangeGte(l,c){return this.url.searchParams.append(l,`nxl.${c}`),this}rangeLt(l,c){return this.url.searchParams.append(l,`sl.${c}`),this}rangeLte(l,c){return this.url.searchParams.append(l,`nxr.${c}`),this}rangeAdjacent(l,c){return this.url.searchParams.append(l,`adj.${c}`),this}overlaps(l,c){return typeof c=="string"?this.url.searchParams.append(l,`ov.${c}`):this.url.searchParams.append(l,`ov.{${c.join(",")}}`),this}textSearch(l,c,{config:d,type:f}={}){let h="";f==="plain"?h="pl":f==="phrase"?h="ph":f==="websearch"&&(h="w");const g=d===void 0?"":`(${d})`;return this.url.searchParams.append(l,`${h}fts${g}.${c}`),this}match(l){return Object.entries(l).forEach(([c,d])=>{this.url.searchParams.append(c,`eq.${d}`)}),this}not(l,c,d){return this.url.searchParams.append(l,`not.${c}.${d}`),this}or(l,{foreignTable:c,referencedTable:d=c}={}){const f=d?`${d}.or`:"or";return this.url.searchParams.append(f,`(${l})`),this}filter(l,c,d){return this.url.searchParams.append(l,`${c}.${d}`),this}}return Uu.default=s,Uu}var C_;function zS(){if(C_)return Du;C_=1,Object.defineProperty(Du,"__esModule",{value:!0});const e=Ja.__importDefault(xg());class n{constructor(a,{headers:l={},schema:c,fetch:d}){this.url=a,this.headers=new Headers(l),this.schema=c,this.fetch=d}select(a,l){const{head:c=!1,count:d}=l??{},f=c?"HEAD":"GET";let h=!1;const g=(a??"*").split("").map(p=>/\s/.test(p)&&!h?"":(p==='"'&&(h=!h),p)).join("");return this.url.searchParams.set("select",g),d&&this.headers.append("Prefer",`count=${d}`),new e.default({method:f,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(a,{count:l,defaultToNull:c=!0}={}){var d;const f="POST";if(l&&this.headers.append("Prefer",`count=${l}`),c||this.headers.append("Prefer","missing=default"),Array.isArray(a)){const h=a.reduce((g,p)=>g.concat(Object.keys(p)),[]);if(h.length>0){const g=[...new Set(h)].map(p=>`"${p}"`);this.url.searchParams.set("columns",g.join(","))}}return new e.default({method:f,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}upsert(a,{onConflict:l,ignoreDuplicates:c=!1,count:d,defaultToNull:f=!0}={}){var h;const g="POST";if(this.headers.append("Prefer",`resolution=${c?"ignore":"merge"}-duplicates`),l!==void 0&&this.url.searchParams.set("on_conflict",l),d&&this.headers.append("Prefer",`count=${d}`),f||this.headers.append("Prefer","missing=default"),Array.isArray(a)){const p=a.reduce((v,_)=>v.concat(Object.keys(_)),[]);if(p.length>0){const v=[...new Set(p)].map(_=>`"${_}"`);this.url.searchParams.set("columns",v.join(","))}}return new e.default({method:g,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(h=this.fetch)!==null&&h!==void 0?h:fetch})}update(a,{count:l}={}){var c;const d="PATCH";return l&&this.headers.append("Prefer",`count=${l}`),new e.default({method:d,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch})}delete({count:a}={}){var l;const c="DELETE";return a&&this.headers.append("Prefer",`count=${a}`),new e.default({method:c,url:this.url,headers:this.headers,schema:this.schema,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}}return Du.default=n,Du}var A_;function Nj(){if(A_)return Mu;A_=1,Object.defineProperty(Mu,"__esModule",{value:!0});const t=Ja,e=t.__importDefault(zS()),n=t.__importDefault(xg());class s{constructor(l,{headers:c={},schema:d,fetch:f}={}){this.url=l,this.headers=new Headers(c),this.schemaName=d,this.fetch=f}from(l){const c=new URL(`${this.url}/${l}`);return new e.default(c,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(l){return new s(this.url,{headers:this.headers,schema:l,fetch:this.fetch})}rpc(l,c={},{head:d=!1,get:f=!1,count:h}={}){var g;let p;const v=new URL(`${this.url}/rpc/${l}`);let _;d||f?(p=d?"HEAD":"GET",Object.entries(c).filter(([w,S])=>S!==void 0).map(([w,S])=>[w,Array.isArray(S)?`{${S.join(",")}}`:`${S}`]).forEach(([w,S])=>{v.searchParams.append(w,S)})):(p="POST",_=c);const x=new Headers(this.headers);return h&&x.set("Prefer",`count=${h}`),new n.default({method:p,url:v,headers:x,schema:this.schemaName,body:_,fetch:(g=this.fetch)!==null&&g!==void 0?g:fetch})}}return Mu.default=s,Mu}var T_;function Oj(){if(T_)return Wt;T_=1,Object.defineProperty(Wt,"__esModule",{value:!0}),Wt.PostgrestError=Wt.PostgrestBuilder=Wt.PostgrestTransformBuilder=Wt.PostgrestFilterBuilder=Wt.PostgrestQueryBuilder=Wt.PostgrestClient=void 0;const t=Ja,e=t.__importDefault(Nj());Wt.PostgrestClient=e.default;const n=t.__importDefault(zS());Wt.PostgrestQueryBuilder=n.default;const s=t.__importDefault(xg());Wt.PostgrestFilterBuilder=s.default;const a=t.__importDefault(LS());Wt.PostgrestTransformBuilder=a.default;const l=t.__importDefault($S());Wt.PostgrestBuilder=l.default;const c=t.__importDefault(IS());return Wt.PostgrestError=c.default,Wt.default={PostgrestClient:e.default,PostgrestQueryBuilder:n.default,PostgrestFilterBuilder:s.default,PostgrestTransformBuilder:a.default,PostgrestBuilder:l.default,PostgrestError:c.default},Wt}var BS=Oj();const PS=Wd(BS),jj=HN({__proto__:null,default:PS},[BS]),{PostgrestClient:Rj,PostgrestQueryBuilder:v4,PostgrestFilterBuilder:b4,PostgrestTransformBuilder:_4,PostgrestBuilder:w4,PostgrestError:x4}=PS||jj;class kj{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const s=n.node,a=parseInt(s.replace(/^v/,"").split(".")[0]);return a>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${a} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${a} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let n=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(n+=`

Suggested solution: ${e.workaround}`),new Error(n)}static createWebSocket(e,n){const s=this.getWebSocketConstructor();return new s(e,n)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const Mj="2.79.0",Dj=`realtime-js/${Mj}`,Uj="1.0.0",Op=1e4,Ij=1e3,$j=100;var Sl;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Sl||(Sl={}));var Mt;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(Mt||(Mt={}));var er;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(er||(er={}));var jp;(function(t){t.websocket="websocket"})(jp||(jp={}));var pi;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(pi||(pi={}));class Lj{constructor(){this.HEADER_LENGTH=1}decode(e,n){return e.constructor===ArrayBuffer?n(this._binaryDecode(e)):n(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const n=new DataView(e),s=new TextDecoder;return this._decodeBroadcast(e,n,s)}_decodeBroadcast(e,n,s){const a=n.getUint8(1),l=n.getUint8(2);let c=this.HEADER_LENGTH+2;const d=s.decode(e.slice(c,c+a));c=c+a;const f=s.decode(e.slice(c,c+l));c=c+l;const h=JSON.parse(s.decode(e.slice(c,e.byteLength)));return{ref:null,topic:d,event:f,payload:h}}}let qS=class{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}};var it;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(it||(it={}));const N_=(t,e,n={})=>{var s;const a=(s=n.skipTypes)!==null&&s!==void 0?s:[];return e?Object.keys(e).reduce((l,c)=>(l[c]=zj(c,t,e,a),l),{}):{}},zj=(t,e,n,s)=>{const a=e.find(d=>d.name===t),l=a?.type,c=n[t];return l&&!s.includes(l)?HS(l,c):Rp(c)},HS=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return Hj(e,n)}switch(t){case it.bool:return Bj(e);case it.float4:case it.float8:case it.int2:case it.int4:case it.int8:case it.numeric:case it.oid:return Pj(e);case it.json:case it.jsonb:return qj(e);case it.timestamp:return Vj(e);case it.abstime:case it.date:case it.daterange:case it.int4range:case it.int8range:case it.money:case it.reltime:case it.text:case it.time:case it.timestamptz:case it.timetz:case it.tsrange:case it.tstzrange:return Rp(e);default:return Rp(e)}},Rp=t=>t,Bj=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},Pj=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},qj=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},Hj=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,s=t[n];if(t[0]==="{"&&s==="}"){let l;const c=t.slice(1,n);try{l=JSON.parse("["+c+"]")}catch{l=c?c.split(","):[]}return l.map(d=>HS(e,d))}return t},Vj=t=>typeof t=="string"?t.replace(" ","T"):t,VS=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class Ym{constructor(e,n,s={},a=Op){this.channel=e,this.event=n,this.payload=s,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var s;return this._hasReceived(e)&&n((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(s=>s.status===e).forEach(s=>s.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var O_;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(O_||(O_={}));class El{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=n?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},a=>{const{onJoin:l,onLeave:c,onSync:d}=this.caller;this.joinRef=this.channel._joinRef(),this.state=El.syncState(this.state,a,l,c),this.pendingDiffs.forEach(f=>{this.state=El.syncDiff(this.state,f,l,c)}),this.pendingDiffs=[],d()}),this.channel._on(s.diff,{},a=>{const{onJoin:l,onLeave:c,onSync:d}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=El.syncDiff(this.state,a,l,c),d())}),this.onJoin((a,l,c)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:l,newPresences:c})}),this.onLeave((a,l,c)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:l,leftPresences:c})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,s,a){const l=this.cloneDeep(e),c=this.transformState(n),d={},f={};return this.map(l,(h,g)=>{c[h]||(f[h]=g)}),this.map(c,(h,g)=>{const p=l[h];if(p){const v=g.map(S=>S.presence_ref),_=p.map(S=>S.presence_ref),x=g.filter(S=>_.indexOf(S.presence_ref)<0),w=p.filter(S=>v.indexOf(S.presence_ref)<0);x.length>0&&(d[h]=x),w.length>0&&(f[h]=w)}else d[h]=g}),this.syncDiff(l,{joins:d,leaves:f},s,a)}static syncDiff(e,n,s,a){const{joins:l,leaves:c}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return s||(s=()=>{}),a||(a=()=>{}),this.map(l,(d,f)=>{var h;const g=(h=e[d])!==null&&h!==void 0?h:[];if(e[d]=this.cloneDeep(f),g.length>0){const p=e[d].map(_=>_.presence_ref),v=g.filter(_=>p.indexOf(_.presence_ref)<0);e[d].unshift(...v)}s(d,g,f)}),this.map(c,(d,f)=>{let h=e[d];if(!h)return;const g=f.map(p=>p.presence_ref);h=h.filter(p=>g.indexOf(p.presence_ref)<0),e[d]=h,a(d,h,f),h.length===0&&delete e[d]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(s=>n(s,e[s]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,s)=>{const a=e[s];return"metas"in a?n[s]=a.metas.map(l=>(l.presence_ref=l.phx_ref,delete l.phx_ref,delete l.phx_ref_prev,l)):n[s]=a,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var j_;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(j_||(j_={}));var Cl;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(Cl||(Cl={}));var Yr;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Yr||(Yr={}));class Sg{constructor(e,n={config:{}},s){var a,l;if(this.topic=e,this.params=n,this.socket=s,this.bindings={},this.state=Mt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new Ym(this,er.join,this.params,this.timeout),this.rejoinTimer=new qS(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Mt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(c=>c.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Mt.closed,this.socket._remove(this)}),this._onError(c=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,c),this.state=Mt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Mt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",c=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,c),this.state=Mt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(er.reply,{},(c,d)=>{this._trigger(this._replyEventName(d),c)}),this.presence=new El(this),this.broadcastEndpointURL=VS(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((l=(a=this.params.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,n=this.timeout){var s,a,l;if(this.socket.isConnected()||this.socket.connect(),this.state==Mt.closed){const{config:{broadcast:c,presence:d,private:f}}=this.params,h=(a=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(_=>_.filter))!==null&&a!==void 0?a:[],g=!!this.bindings[Cl.PRESENCE]&&this.bindings[Cl.PRESENCE].length>0||((l=this.params.config.presence)===null||l===void 0?void 0:l.enabled)===!0,p={},v={broadcast:c,presence:Object.assign(Object.assign({},d),{enabled:g}),postgres_changes:h,private:f};this.socket.accessTokenValue&&(p.access_token=this.socket.accessTokenValue),this._onError(_=>e?.(Yr.CHANNEL_ERROR,_)),this._onClose(()=>e?.(Yr.CLOSED)),this.updateJoinPayload(Object.assign({config:v},p)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:_})=>{var x;if(this.socket.setAuth(),_===void 0){e?.(Yr.SUBSCRIBED);return}else{const w=this.bindings.postgres_changes,S=(x=w?.length)!==null&&x!==void 0?x:0,C=[];for(let N=0;N<S;N++){const E=w[N],{filter:{event:A,schema:j,table:R,filter:D}}=E,I=_&&_[N];if(I&&I.event===A&&I.schema===j&&I.table===R&&I.filter===D)C.push(Object.assign(Object.assign({},E),{id:I.id}));else{this.unsubscribe(),this.state=Mt.errored,e?.(Yr.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=C,e&&e(Yr.SUBSCRIBED);return}}).receive("error",_=>{this.state=Mt.errored,e?.(Yr.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(_).join(", ")||"error")))}).receive("timeout",()=>{e?.(Yr.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,s){return this.state===Mt.joined&&e===Cl.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,n,s)}async httpSend(e,n,s={}){var a;const l=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(n==null)return Promise.reject("Payload is required for httpSend()");const c={method:"POST",headers:{Authorization:l,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:n,private:this.private}]})},d=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(a=s.timeout)!==null&&a!==void 0?a:this.timeout);if(d.status===202)return{success:!0};let f=d.statusText;try{const h=await d.json();f=h.error||h.message||f}catch{}return Promise.reject(new Error(f))}async send(e,n={}){var s,a;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:l,payload:c}=e,f={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:l,payload:c,private:this.private}]})};try{const h=await this._fetchWithTimeout(this.broadcastEndpointURL,f,(s=n.timeout)!==null&&s!==void 0?s:this.timeout);return await((a=h.body)===null||a===void 0?void 0:a.cancel()),h.ok?"ok":"error"}catch(h){return h.name==="AbortError"?"timed out":"error"}}else return new Promise(l=>{var c,d,f;const h=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((f=(d=(c=this.params)===null||c===void 0?void 0:c.config)===null||d===void 0?void 0:d.broadcast)===null||f===void 0)&&f.ack)&&l("ok"),h.receive("ok",()=>l("ok")),h.receive("error",()=>l("error")),h.receive("timeout",()=>l("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Mt.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(er.close,"leave",this._joinRef())};this.joinPush.destroy();let s=null;return new Promise(a=>{s=new Ym(this,er.leave,{},e),s.receive("ok",()=>{n(),a("ok")}).receive("timeout",()=>{n(),a("timed out")}).receive("error",()=>{a("error")}),s.send(),this._canPush()||s.trigger("ok",{})}).finally(()=>{s?.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Mt.closed,this.bindings={}}async _fetchWithTimeout(e,n,s){const a=new AbortController,l=setTimeout(()=>a.abort(),s),c=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:a.signal}));return clearTimeout(l),c}_push(e,n,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new Ym(this,e,n,s);return this._canPush()?a.send():this._addToPushBuffer(a),a}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>$j){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(e,n,s){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,s){var a,l;const c=e.toLocaleLowerCase(),{close:d,error:f,leave:h,join:g}=er;if(s&&[d,f,h,g].indexOf(c)>=0&&s!==this._joinRef())return;let v=this._onMessage(c,n,s);if(n&&!v)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(c)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(_=>{var x,w,S;return((x=_.filter)===null||x===void 0?void 0:x.event)==="*"||((S=(w=_.filter)===null||w===void 0?void 0:w.event)===null||S===void 0?void 0:S.toLocaleLowerCase())===c}).map(_=>_.callback(v,s)):(l=this.bindings[c])===null||l===void 0||l.filter(_=>{var x,w,S,C,N,E;if(["broadcast","presence","postgres_changes"].includes(c))if("id"in _){const A=_.id,j=(x=_.filter)===null||x===void 0?void 0:x.event;return A&&((w=n.ids)===null||w===void 0?void 0:w.includes(A))&&(j==="*"||j?.toLocaleLowerCase()===((S=n.data)===null||S===void 0?void 0:S.type.toLocaleLowerCase()))}else{const A=(N=(C=_?.filter)===null||C===void 0?void 0:C.event)===null||N===void 0?void 0:N.toLocaleLowerCase();return A==="*"||A===((E=n?.event)===null||E===void 0?void 0:E.toLocaleLowerCase())}else return _.type.toLocaleLowerCase()===c}).map(_=>{if(typeof v=="object"&&"ids"in v){const x=v.data,{schema:w,table:S,commit_timestamp:C,type:N,errors:E}=x;v=Object.assign(Object.assign({},{schema:w,table:S,commit_timestamp:C,eventType:N,new:{},old:{},errors:E}),this._getPayloadRecords(x))}_.callback(v,s)})}_isClosed(){return this.state===Mt.closed}_isJoined(){return this.state===Mt.joined}_isJoining(){return this.state===Mt.joining}_isLeaving(){return this.state===Mt.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,s){const a=e.toLocaleLowerCase(),l={type:a,filter:n,callback:s};return this.bindings[a]?this.bindings[a].push(l):this.bindings[a]=[l],this}_off(e,n){const s=e.toLocaleLowerCase();return this.bindings[s]&&(this.bindings[s]=this.bindings[s].filter(a=>{var l;return!(((l=a.type)===null||l===void 0?void 0:l.toLocaleLowerCase())===s&&Sg.isEqual(a.filter,n))})),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const s in e)if(e[s]!==n[s])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(er.close,{},e)}_onError(e){this._on(er.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Mt.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=N_(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=N_(e.columns,e.old_record)),n}}const Gm=()=>{},zu={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Fj=[1e3,2e3,5e3,1e4],Yj=1e4,Gj=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Xj{constructor(e,n){var s;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Op,this.transport=null,this.heartbeatIntervalMs=zu.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Gm,this.ref=0,this.reconnectTimer=null,this.logger=Gm,this.conn=null,this.sendBuffer=[],this.serializer=new Lj,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=a=>a?(...l)=>a(...l):(...l)=>fetch(...l),!(!((s=n?.params)===null||s===void 0)&&s.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${e}/${jp.websocket}`,this.httpEndpoint=VS(e),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=kj.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const n=e.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Uj}))}disconnect(e,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const s=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(s),this._setConnectionState("disconnected")},e?this.conn.close(e,n??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,s){this.logger(e,n,s)}connectionState(){switch(this.conn&&this.conn.readyState){case Sl.connecting:return pi.Connecting;case Sl.open:return pi.Open;case Sl.closing:return pi.Closing;default:return pi.Closed}}isConnected(){return this.connectionState()===pi.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,n={config:{}}){const s=`realtime:${e}`,a=this.getChannels().find(l=>l.topic===s);if(a)return a;{const l=new Sg(`realtime:${e}`,n,this);return this.channels.push(l),l}}push(e){const{topic:n,event:s,payload:a,ref:l}=e,c=()=>{this.encode(e,d=>{var f;(f=this.conn)===null||f===void 0||f.send(d)})};this.log("push",`${n} ${s} (${l})`,a),this.isConnected()?c():this.sendBuffer.push(c)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(Ij,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},zu.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(s=>s.topic===e&&(s._isJoined()||s._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(h){this.log("error","error in heartbeat callback",h)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:s,event:a,payload:l,ref:c}=n,d=c?`(${c})`:"",f=l.status||"";this.log("receive",`${f} ${s} ${a} ${d}`.trim(),l),this.channels.filter(h=>h._isMember(s)).forEach(h=>h._trigger(a,l,c)),this._triggerStateCallbacks("message",n)})}_clearTimer(e){var n;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var n;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(er.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const s=e.match(/\?/)?"&":"?",a=new URLSearchParams(n);return`${e}${s}${a}`}_workerObjectUrl(e){let n;if(e)n=e;else{const s=new Blob([Gj],{type:"application/javascript"});n=URL.createObjectURL(s)}return n}_setConnectionState(e,n=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(e=null){let n;e?n=e:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(s=>{const a={access_token:n,version:Dj};n&&s.updateJoinPayload(a),s.joinedOnce&&s._isJoined()&&s._push(er.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${e}`,n)})}_triggerStateCallbacks(e,n){try{this.stateChangeCallbacks[e].forEach(s=>{try{s(n)}catch(a){this.log("error",`error in ${e} callback`,a)}})}catch(s){this.log("error",`error triggering ${e} callbacks`,s)}}_setupReconnectionTimer(){this.reconnectTimer=new qS(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},zu.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var n,s,a,l,c,d,f,h,g;if(this.transport=(n=e?.transport)!==null&&n!==void 0?n:null,this.timeout=(s=e?.timeout)!==null&&s!==void 0?s:Op,this.heartbeatIntervalMs=(a=e?.heartbeatIntervalMs)!==null&&a!==void 0?a:zu.HEARTBEAT_INTERVAL,this.worker=(l=e?.worker)!==null&&l!==void 0?l:!1,this.accessToken=(c=e?.accessToken)!==null&&c!==void 0?c:null,this.heartbeatCallback=(d=e?.heartbeatCallback)!==null&&d!==void 0?d:Gm,e?.params&&(this.params=e.params),e?.logger&&(this.logger=e.logger),(e?.logLevel||e?.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(f=e?.reconnectAfterMs)!==null&&f!==void 0?f:(p=>Fj[p-1]||Yj),this.encode=(h=e?.encode)!==null&&h!==void 0?h:((p,v)=>v(JSON.stringify(p))),this.decode=(g=e?.decode)!==null&&g!==void 0?g:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e?.workerUrl}}}class Eg extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function pt(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class Kj extends Eg{constructor(e,n,s){super(e),this.name="StorageApiError",this.status=n,this.statusCode=s}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class kp extends Eg{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}const Cg=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),Qj=()=>Response,Mp=t=>{if(Array.isArray(t))return t.map(n=>Mp(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,s])=>{const a=n.replace(/([-_][a-z])/gi,l=>l.toUpperCase().replace(/[-_]/g,""));e[a]=Mp(s)}),e},Wj=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},Xm=t=>{var e;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(e=t.error)===null||e===void 0?void 0:e.message)||JSON.stringify(t)},Jj=(t,e,n)=>Ae(void 0,void 0,void 0,function*(){const s=yield Qj();t instanceof s&&!n?.noResolveJson?t.json().then(a=>{const l=t.status||500,c=a?.statusCode||l+"";e(new Kj(Xm(a),l,c))}).catch(a=>{e(new kp(Xm(a),a))}):e(new kp(Xm(t),t))}),Zj=(t,e,n,s)=>{const a={method:t,headers:e?.headers||{}};return t==="GET"||!s?a:(Wj(s)?(a.headers=Object.assign({"Content-Type":"application/json"},e?.headers),a.body=JSON.stringify(s)):a.body=s,e?.duplex&&(a.duplex=e.duplex),Object.assign(Object.assign({},a),n))};function Jl(t,e,n,s,a,l){return Ae(this,void 0,void 0,function*(){return new Promise((c,d)=>{t(n,Zj(e,s,a,l)).then(f=>{if(!f.ok)throw f;return s?.noResolveJson?f:f.json()}).then(f=>c(f)).catch(f=>Jj(f,d,s))})})}function Ml(t,e,n,s){return Ae(this,void 0,void 0,function*(){return Jl(t,"GET",e,n,s)})}function Jn(t,e,n,s,a){return Ae(this,void 0,void 0,function*(){return Jl(t,"POST",e,s,a,n)})}function Dp(t,e,n,s,a){return Ae(this,void 0,void 0,function*(){return Jl(t,"PUT",e,s,a,n)})}function eR(t,e,n,s){return Ae(this,void 0,void 0,function*(){return Jl(t,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),s)})}function Ag(t,e,n,s,a){return Ae(this,void 0,void 0,function*(){return Jl(t,"DELETE",e,s,a,n)})}class tR{constructor(e,n){this.downloadFn=e,this.shouldThrowOnError=n}then(e,n){return this.execute().then(e,n)}execute(){return Ae(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(pt(e))return{data:null,error:e};throw e}})}}var FS;class nR{constructor(e,n){this.downloadFn=e,this.shouldThrowOnError=n,this[FS]="BlobDownloadBuilder",this.promise=null}asStream(){return new tR(this.downloadFn,this.shouldThrowOnError)}then(e,n){return this.getPromise().then(e,n)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return Ae(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(pt(e))return{data:null,error:e};throw e}})}}FS=Symbol.toStringTag;const rR={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},R_={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class sR{constructor(e,n={},s,a){this.shouldThrowOnError=!1,this.url=e,this.headers=n,this.bucketId=s,this.fetch=Cg(a)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,n,s,a){return Ae(this,void 0,void 0,function*(){try{let l;const c=Object.assign(Object.assign({},R_),a);let d=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(c.upsert)});const f=c.metadata;typeof Blob<"u"&&s instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),f&&l.append("metadata",this.encodeMetadata(f)),l.append("",s)):typeof FormData<"u"&&s instanceof FormData?(l=s,l.has("cacheControl")||l.append("cacheControl",c.cacheControl),f&&!l.has("metadata")&&l.append("metadata",this.encodeMetadata(f))):(l=s,d["cache-control"]=`max-age=${c.cacheControl}`,d["content-type"]=c.contentType,f&&(d["x-metadata"]=this.toBase64(this.encodeMetadata(f))),(typeof ReadableStream<"u"&&l instanceof ReadableStream||l&&typeof l=="object"&&"pipe"in l&&typeof l.pipe=="function")&&!c.duplex&&(c.duplex="half")),a?.headers&&(d=Object.assign(Object.assign({},d),a.headers));const h=this._removeEmptyFolders(n),g=this._getFinalPath(h),p=yield(e=="PUT"?Dp:Jn)(this.fetch,`${this.url}/object/${g}`,l,Object.assign({headers:d},c?.duplex?{duplex:c.duplex}:{}));return{data:{path:h,id:p.Id,fullPath:p.Key},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(pt(l))return{data:null,error:l};throw l}})}upload(e,n,s){return Ae(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,s)})}uploadToSignedUrl(e,n,s,a){return Ae(this,void 0,void 0,function*(){const l=this._removeEmptyFolders(e),c=this._getFinalPath(l),d=new URL(this.url+`/object/upload/sign/${c}`);d.searchParams.set("token",n);try{let f;const h=Object.assign({upsert:R_.upsert},a),g=Object.assign(Object.assign({},this.headers),{"x-upsert":String(h.upsert)});typeof Blob<"u"&&s instanceof Blob?(f=new FormData,f.append("cacheControl",h.cacheControl),f.append("",s)):typeof FormData<"u"&&s instanceof FormData?(f=s,f.append("cacheControl",h.cacheControl)):(f=s,g["cache-control"]=`max-age=${h.cacheControl}`,g["content-type"]=h.contentType);const p=yield Dp(this.fetch,d.toString(),f,{headers:g});return{data:{path:l,fullPath:p.Key},error:null}}catch(f){if(this.shouldThrowOnError)throw f;if(pt(f))return{data:null,error:f};throw f}})}createSignedUploadUrl(e,n){return Ae(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e);const a=Object.assign({},this.headers);n?.upsert&&(a["x-upsert"]="true");const l=yield Jn(this.fetch,`${this.url}/object/upload/sign/${s}`,{},{headers:a}),c=new URL(this.url+l.url),d=c.searchParams.get("token");if(!d)throw new Eg("No token returned by API");return{data:{signedUrl:c.toString(),path:e,token:d},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(pt(s))return{data:null,error:s};throw s}})}update(e,n,s){return Ae(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,s)})}move(e,n,s){return Ae(this,void 0,void 0,function*(){try{return{data:yield Jn(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:s?.destinationBucket},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(pt(a))return{data:null,error:a};throw a}})}copy(e,n,s){return Ae(this,void 0,void 0,function*(){try{return{data:{path:(yield Jn(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:s?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(pt(a))return{data:null,error:a};throw a}})}createSignedUrl(e,n,s){return Ae(this,void 0,void 0,function*(){try{let a=this._getFinalPath(e),l=yield Jn(this.fetch,`${this.url}/object/sign/${a}`,Object.assign({expiresIn:n},s?.transform?{transform:s.transform}:{}),{headers:this.headers});const c=s?.download?`&download=${s.download===!0?"":s.download}`:"";return l={signedUrl:encodeURI(`${this.url}${l.signedURL}${c}`)},{data:l,error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(pt(a))return{data:null,error:a};throw a}})}createSignedUrls(e,n,s){return Ae(this,void 0,void 0,function*(){try{const a=yield Jn(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),l=s?.download?`&download=${s.download===!0?"":s.download}`:"";return{data:a.map(c=>Object.assign(Object.assign({},c),{signedUrl:c.signedURL?encodeURI(`${this.url}${c.signedURL}${l}`):null})),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(pt(a))return{data:null,error:a};throw a}})}download(e,n){const a=typeof n?.transform<"u"?"render/image/authenticated":"object",l=this.transformOptsToQueryString(n?.transform||{}),c=l?`?${l}`:"",d=this._getFinalPath(e),f=()=>Ml(this.fetch,`${this.url}/${a}/${d}${c}`,{headers:this.headers,noResolveJson:!0});return new nR(f,this.shouldThrowOnError)}info(e){return Ae(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const s=yield Ml(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:Mp(s),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(pt(s))return{data:null,error:s};throw s}})}exists(e){return Ae(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield eR(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(pt(s)&&s instanceof kp){const a=s.originalError;if([400,404].includes(a?.status))return{data:!1,error:s}}throw s}})}getPublicUrl(e,n){const s=this._getFinalPath(e),a=[],l=n?.download?`download=${n.download===!0?"":n.download}`:"";l!==""&&a.push(l);const d=typeof n?.transform<"u"?"render/image":"object",f=this.transformOptsToQueryString(n?.transform||{});f!==""&&a.push(f);let h=a.join("&");return h!==""&&(h=`?${h}`),{data:{publicUrl:encodeURI(`${this.url}/${d}/public/${s}${h}`)}}}remove(e){return Ae(this,void 0,void 0,function*(){try{return{data:yield Ag(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(pt(n))return{data:null,error:n};throw n}})}list(e,n,s){return Ae(this,void 0,void 0,function*(){try{const a=Object.assign(Object.assign(Object.assign({},rR),n),{prefix:e||""});return{data:yield Jn(this.fetch,`${this.url}/object/list/${this.bucketId}`,a,{headers:this.headers},s),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(pt(a))return{data:null,error:a};throw a}})}listV2(e,n){return Ae(this,void 0,void 0,function*(){try{const s=Object.assign({},e);return{data:yield Jn(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,s,{headers:this.headers},n),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(pt(s))return{data:null,error:s};throw s}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const YS="2.79.0",GS={"X-Client-Info":`storage-js/${YS}`};class iR{constructor(e,n={},s,a){this.shouldThrowOnError=!1;const l=new URL(e);a?.useNewHostname&&/supabase\.(co|in|red)$/.test(l.hostname)&&!l.hostname.includes("storage.supabase.")&&(l.hostname=l.hostname.replace("supabase.","storage.supabase.")),this.url=l.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},GS),n),this.fetch=Cg(s)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(e){return Ae(this,void 0,void 0,function*(){try{const n=this.listBucketOptionsToQueryString(e);return{data:yield Ml(this.fetch,`${this.url}/bucket${n}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(pt(n))return{data:null,error:n};throw n}})}getBucket(e){return Ae(this,void 0,void 0,function*(){try{return{data:yield Ml(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(pt(n))return{data:null,error:n};throw n}})}createBucket(e){return Ae(this,arguments,void 0,function*(n,s={public:!1}){try{return{data:yield Jn(this.fetch,`${this.url}/bucket`,{id:n,name:n,type:s.type,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(pt(a))return{data:null,error:a};throw a}})}updateBucket(e,n){return Ae(this,void 0,void 0,function*(){try{return{data:yield Dp(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(pt(s))return{data:null,error:s};throw s}})}emptyBucket(e){return Ae(this,void 0,void 0,function*(){try{return{data:yield Jn(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(pt(n))return{data:null,error:n};throw n}})}deleteBucket(e){return Ae(this,void 0,void 0,function*(){try{return{data:yield Ag(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(pt(n))return{data:null,error:n};throw n}})}listBucketOptionsToQueryString(e){const n={};return e&&("limit"in e&&(n.limit=String(e.limit)),"offset"in e&&(n.offset=String(e.offset)),e.search&&(n.search=e.search),e.sortColumn&&(n.sortColumn=e.sortColumn),e.sortOrder&&(n.sortOrder=e.sortOrder)),Object.keys(n).length>0?"?"+new URLSearchParams(n).toString():""}}class aR{constructor(e,n={},s){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},GS),n),this.fetch=Cg(s)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return Ae(this,void 0,void 0,function*(){try{return{data:yield Jn(this.fetch,`${this.url}/bucket`,{name:e},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(pt(n))return{data:null,error:n};throw n}})}listBuckets(e){return Ae(this,void 0,void 0,function*(){try{const n=new URLSearchParams;e?.limit!==void 0&&n.set("limit",e.limit.toString()),e?.offset!==void 0&&n.set("offset",e.offset.toString()),e?.sortColumn&&n.set("sortColumn",e.sortColumn),e?.sortOrder&&n.set("sortOrder",e.sortOrder),e?.search&&n.set("search",e.search);const s=n.toString(),a=s?`${this.url}/bucket?${s}`:`${this.url}/bucket`;return{data:yield Ml(this.fetch,a,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(pt(n))return{data:null,error:n};throw n}})}deleteBucket(e){return Ae(this,void 0,void 0,function*(){try{return{data:yield Ag(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(pt(n))return{data:null,error:n};throw n}})}}const Tg={"X-Client-Info":`storage-js/${YS}`,"Content-Type":"application/json"};class XS extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function Nn(t){return typeof t=="object"&&t!==null&&"__isStorageVectorsError"in t}class Km extends XS{constructor(e,n,s){super(e),this.name="StorageVectorsApiError",this.status=n,this.statusCode=s}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class oR extends XS{constructor(e,n){super(e),this.name="StorageVectorsUnknownError",this.originalError=n}}var k_;(function(t){t.InternalError="InternalError",t.S3VectorConflictException="S3VectorConflictException",t.S3VectorNotFoundException="S3VectorNotFoundException",t.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",t.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",t.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(k_||(k_={}));const Ng=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),lR=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},M_=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),cR=(t,e,n)=>Ae(void 0,void 0,void 0,function*(){if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!n?.noResolveJson){const a=t.status||500,l=t;if(typeof l.json=="function")l.json().then(c=>{const d=c?.statusCode||c?.code||a+"";e(new Km(M_(c),a,d))}).catch(()=>{const c=a+"",d=l.statusText||`HTTP ${a} error`;e(new Km(d,a,c))});else{const c=a+"",d=l.statusText||`HTTP ${a} error`;e(new Km(d,a,c))}}else e(new oR(M_(t),t))}),uR=(t,e,n,s)=>{const a={method:t,headers:e?.headers||{}};return s?(lR(s)?(a.headers=Object.assign({"Content-Type":"application/json"},e?.headers),a.body=JSON.stringify(s)):a.body=s,Object.assign(Object.assign({},a),n)):a};function dR(t,e,n,s,a,l){return Ae(this,void 0,void 0,function*(){return new Promise((c,d)=>{t(n,uR(e,s,a,l)).then(f=>{if(!f.ok)throw f;if(s?.noResolveJson)return f;const h=f.headers.get("content-type");return!h||!h.includes("application/json")?{}:f.json()}).then(f=>c(f)).catch(f=>cR(f,d,s))})})}function On(t,e,n,s,a){return Ae(this,void 0,void 0,function*(){return dR(t,"POST",e,s,a,n)})}class fR{constructor(e,n={},s){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Tg),n),this.fetch=Ng(s)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(e){return Ae(this,void 0,void 0,function*(){try{return{data:(yield On(this.fetch,`${this.url}/CreateIndex`,e,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Nn(n))return{data:null,error:n};throw n}})}getIndex(e,n){return Ae(this,void 0,void 0,function*(){try{return{data:yield On(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:e,indexName:n},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Nn(s))return{data:null,error:s};throw s}})}listIndexes(e){return Ae(this,void 0,void 0,function*(){try{return{data:yield On(this.fetch,`${this.url}/ListIndexes`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Nn(n))return{data:null,error:n};throw n}})}deleteIndex(e,n){return Ae(this,void 0,void 0,function*(){try{return{data:(yield On(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:e,indexName:n},{headers:this.headers}))||{},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Nn(s))return{data:null,error:s};throw s}})}}class hR{constructor(e,n={},s){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Tg),n),this.fetch=Ng(s)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(e){return Ae(this,void 0,void 0,function*(){try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield On(this.fetch,`${this.url}/PutVectors`,e,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Nn(n))return{data:null,error:n};throw n}})}getVectors(e){return Ae(this,void 0,void 0,function*(){try{return{data:yield On(this.fetch,`${this.url}/GetVectors`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Nn(n))return{data:null,error:n};throw n}})}listVectors(e){return Ae(this,void 0,void 0,function*(){try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:yield On(this.fetch,`${this.url}/ListVectors`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Nn(n))return{data:null,error:n};throw n}})}queryVectors(e){return Ae(this,void 0,void 0,function*(){try{return{data:yield On(this.fetch,`${this.url}/QueryVectors`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Nn(n))return{data:null,error:n};throw n}})}deleteVectors(e){return Ae(this,void 0,void 0,function*(){try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield On(this.fetch,`${this.url}/DeleteVectors`,e,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Nn(n))return{data:null,error:n};throw n}})}}class mR{constructor(e,n={},s){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Tg),n),this.fetch=Ng(s)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return Ae(this,void 0,void 0,function*(){try{return{data:(yield On(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Nn(n))return{data:null,error:n};throw n}})}getBucket(e){return Ae(this,void 0,void 0,function*(){try{return{data:yield On(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:e},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Nn(n))return{data:null,error:n};throw n}})}listBuckets(){return Ae(this,arguments,void 0,function*(e={}){try{return{data:yield On(this.fetch,`${this.url}/ListVectorBuckets`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Nn(n))return{data:null,error:n};throw n}})}deleteBucket(e){return Ae(this,void 0,void 0,function*(){try{return{data:(yield On(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Nn(n))return{data:null,error:n};throw n}})}}class pR extends mR{constructor(e,n={}){super(e,n.headers||{},n.fetch)}from(e){return new gR(this.url,this.headers,e,this.fetch)}}class gR extends fR{constructor(e,n,s,a){super(e,n,a),this.vectorBucketName=s}createIndex(e){const n=Object.create(null,{createIndex:{get:()=>super.createIndex}});return Ae(this,void 0,void 0,function*(){return n.createIndex.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const e=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return Ae(this,arguments,void 0,function*(n={}){return e.listIndexes.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName}))})}getIndex(e){const n=Object.create(null,{getIndex:{get:()=>super.getIndex}});return Ae(this,void 0,void 0,function*(){return n.getIndex.call(this,this.vectorBucketName,e)})}deleteIndex(e){const n=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return Ae(this,void 0,void 0,function*(){return n.deleteIndex.call(this,this.vectorBucketName,e)})}index(e){return new yR(this.url,this.headers,this.vectorBucketName,e,this.fetch)}}class yR extends hR{constructor(e,n,s,a,l){super(e,n,l),this.vectorBucketName=s,this.indexName=a}putVectors(e){const n=Object.create(null,{putVectors:{get:()=>super.putVectors}});return Ae(this,void 0,void 0,function*(){return n.putVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(e){const n=Object.create(null,{getVectors:{get:()=>super.getVectors}});return Ae(this,void 0,void 0,function*(){return n.getVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const e=Object.create(null,{listVectors:{get:()=>super.listVectors}});return Ae(this,arguments,void 0,function*(n={}){return e.listVectors.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(e){const n=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return Ae(this,void 0,void 0,function*(){return n.queryVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(e){const n=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return Ae(this,void 0,void 0,function*(){return n.deleteVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class vR extends iR{constructor(e,n={},s,a){super(e,n,s,a)}from(e){return new sR(this.url,this.headers,e,this.fetch)}get vectors(){return new pR(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new aR(this.url+"/iceberg",this.headers,this.fetch)}}const bR="2.79.0";let ul="";typeof Deno<"u"?ul="deno":typeof document<"u"?ul="web":typeof navigator<"u"&&navigator.product==="ReactNative"?ul="react-native":ul="node";const _R={"X-Client-Info":`supabase-js-${ul}/${bR}`},wR={headers:_R},xR={schema:"public"},SR={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},ER={},CR=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),AR=()=>Headers,TR=(t,e,n)=>{const s=CR(n),a=AR();return async(l,c)=>{var d;const f=(d=await e())!==null&&d!==void 0?d:t;let h=new a(c?.headers);return h.has("apikey")||h.set("apikey",t),h.has("Authorization")||h.set("Authorization",`Bearer ${f}`),s(l,Object.assign(Object.assign({},c),{headers:h}))}};function NR(t){return t.endsWith("/")?t:t+"/"}function OR(t,e){var n,s;const{db:a,auth:l,realtime:c,global:d}=t,{db:f,auth:h,realtime:g,global:p}=e,v={db:Object.assign(Object.assign({},f),a),auth:Object.assign(Object.assign({},h),l),realtime:Object.assign(Object.assign({},g),c),storage:{},global:Object.assign(Object.assign(Object.assign({},p),d),{headers:Object.assign(Object.assign({},(n=p?.headers)!==null&&n!==void 0?n:{}),(s=d?.headers)!==null&&s!==void 0?s:{})}),accessToken:async()=>""};return t.accessToken?v.accessToken=t.accessToken:delete v.accessToken,v}function jR(t){const e=t?.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(NR(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const KS="2.79.0",ja=30*1e3,Up=3,Qm=Up*ja,RR="http://localhost:9999",kR="supabase.auth.token",MR={"X-Client-Info":`gotrue-js/${KS}`},Ip="X-Supabase-Api-Version",QS={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},DR=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,UR=600*1e3;class Dl extends Error{constructor(e,n,s){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=s}}function Ne(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class IR extends Dl{constructor(e,n,s){super(e,n,s),this.name="AuthApiError",this.status=n,this.code=s}}function $R(t){return Ne(t)&&t.name==="AuthApiError"}class gi extends Dl{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class qs extends Dl{constructor(e,n,s,a){super(e,s,a),this.name=n,this.status=s}}class Qn extends qs{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function LR(t){return Ne(t)&&t.name==="AuthSessionMissingError"}class _a extends qs{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Bu extends qs{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Pu extends qs{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function zR(t){return Ne(t)&&t.name==="AuthImplicitGrantRedirectError"}class D_ extends qs{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class $p extends qs{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function Wm(t){return Ne(t)&&t.name==="AuthRetryableFetchError"}class U_ extends qs{constructor(e,n,s){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=s}}class Lp extends qs{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Td="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),I_=` 	
\r=`.split(""),BR=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<I_.length;e+=1)t[I_[e].charCodeAt(0)]=-2;for(let e=0;e<Td.length;e+=1)t[Td[e].charCodeAt(0)]=e;return t})();function $_(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;n(Td[s]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;n(Td[s]),e.queuedBits-=6}}function WS(t,e,n){const s=BR[t];if(s>-1)for(e.queue=e.queue<<6|s,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(s===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function L_(t){const e=[],n=c=>{e.push(String.fromCodePoint(c))},s={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},l=c=>{HR(c,s,n)};for(let c=0;c<t.length;c+=1)WS(t.charCodeAt(c),a,l);return e.join("")}function PR(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function qR(t,e){for(let n=0;n<t.length;n+=1){let s=t.charCodeAt(n);if(s>55295&&s<=56319){const a=(s-55296)*1024&65535;s=(t.charCodeAt(n+1)-56320&65535|a)+65536,n+=1}PR(s,e)}}function HR(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let s=1;s<6;s+=1)if((t>>7-s&1)===0){e.utf8seq=s;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function La(t){const e=[],n={queue:0,queuedBits:0},s=a=>{e.push(a)};for(let a=0;a<t.length;a+=1)WS(t.charCodeAt(a),n,s);return new Uint8Array(e)}function VR(t){const e=[];return qR(t,n=>e.push(n)),new Uint8Array(e)}function vi(t){const e=[],n={queue:0,queuedBits:0},s=a=>{e.push(a)};return t.forEach(a=>$_(a,n,s)),$_(null,n,s),e.join("")}function FR(t){return Math.round(Date.now()/1e3)+t}function YR(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const Jt=()=>typeof window<"u"&&typeof document<"u",ci={tested:!1,writable:!1},JS=()=>{if(!Jt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(ci.tested)return ci.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),ci.tested=!0,ci.writable=!0}catch{ci.tested=!0,ci.writable=!1}return ci.writable};function GR(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((a,l)=>{e[l]=a})}catch{}return n.searchParams.forEach((s,a)=>{e[a]=s}),e}const ZS=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),XR=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",Ra=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},ui=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Rs=async(t,e)=>{await t.removeItem(e)};class tf{constructor(){this.promise=new tf.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}tf.promiseConstructor=Promise;function Jm(t){const e=t.split(".");if(e.length!==3)throw new Lp("Invalid JWT structure");for(let s=0;s<e.length;s++)if(!DR.test(e[s]))throw new Lp("JWT not in base64url format");return{header:JSON.parse(L_(e[0])),payload:JSON.parse(L_(e[1])),signature:La(e[2]),raw:{header:e[0],payload:e[1]}}}async function KR(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function QR(t,e){return new Promise((s,a)=>{(async()=>{for(let l=0;l<1/0;l++)try{const c=await t(l);if(!e(l,null,c)){s(c);return}}catch(c){if(!e(l,c)){a(c);return}}})()})}function WR(t){return("0"+t.toString(16)).substr(-2)}function JR(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=n.length;let a="";for(let l=0;l<56;l++)a+=n.charAt(Math.floor(Math.random()*s));return a}return crypto.getRandomValues(e),Array.from(e,WR).join("")}async function ZR(t){const n=new TextEncoder().encode(t),s=await crypto.subtle.digest("SHA-256",n),a=new Uint8Array(s);return Array.from(a).map(l=>String.fromCharCode(l)).join("")}async function e2(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await ZR(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function wa(t,e,n=!1){const s=JR();let a=s;n&&(a+="/PASSWORD_RECOVERY"),await Ra(t,`${e}-code-verifier`,a);const l=await e2(s);return[l,s===l?"plain":"s256"]}const t2=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function n2(t){const e=t.headers.get(Ip);if(!e||!e.match(t2))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function r2(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function s2(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const i2=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function xa(t){if(!i2.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Zm(){const t={};return new Proxy(t,{get:(e,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const s=n.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function a2(t,e){return new Proxy(t,{get:(n,s,a)=>{if(s==="__isInsecureUserWarningProxy")return!0;if(typeof s=="symbol"){const l=s.toString();if(l==="Symbol(Symbol.toPrimitive)"||l==="Symbol(Symbol.toStringTag)"||l==="Symbol(util.inspect.custom)"||l==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,s,a)}return!e.value&&typeof s=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(n,s,a)}})}function z_(t){return JSON.parse(JSON.stringify(t))}const fi=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),o2=[502,503,504];async function B_(t){var e;if(!XR(t))throw new $p(fi(t),0);if(o2.includes(t.status))throw new $p(fi(t),t.status);let n;try{n=await t.json()}catch(l){throw new gi(fi(l),l)}let s;const a=n2(t);if(a&&a.getTime()>=QS["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?s=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(s=n.error_code),s){if(s==="weak_password")throw new U_(fi(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(s==="session_not_found")throw new Qn}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((l,c)=>l&&typeof c=="string",!0))throw new U_(fi(n),t.status,n.weak_password.reasons);throw new IR(fi(n),t.status||500,s)}const l2=(t,e,n,s)=>{const a={method:t,headers:e?.headers||{}};return t==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e?.headers),a.body=JSON.stringify(s),Object.assign(Object.assign({},a),n))};async function Ie(t,e,n,s){var a;const l=Object.assign({},s?.headers);l[Ip]||(l[Ip]=QS["2024-01-01"].name),s?.jwt&&(l.Authorization=`Bearer ${s.jwt}`);const c=(a=s?.query)!==null&&a!==void 0?a:{};s?.redirectTo&&(c.redirect_to=s.redirectTo);const d=Object.keys(c).length?"?"+new URLSearchParams(c).toString():"",f=await c2(t,e,n+d,{headers:l,noResolveJson:s?.noResolveJson},{},s?.body);return s?.xform?s?.xform(f):{data:Object.assign({},f),error:null}}async function c2(t,e,n,s,a,l){const c=l2(e,s,a,l);let d;try{d=await t(n,Object.assign({},c))}catch(f){throw console.error(f),new $p(fi(f),0)}if(d.ok||await B_(d),s?.noResolveJson)return d;try{return await d.json()}catch(f){await B_(f)}}function Wn(t){var e;let n=null;f2(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=FR(t.expires_in)));const s=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:s},error:null}}function P_(t){const e=Wn(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,s)=>n&&typeof s=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Ls(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function u2(t){return{data:t,error:null}}function d2(t){const{action_link:e,email_otp:n,hashed_token:s,redirect_to:a,verification_type:l}=t,c=Wa(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),d={action_link:e,email_otp:n,hashed_token:s,redirect_to:a,verification_type:l},f=Object.assign({},c);return{data:{properties:d,user:f},error:null}}function q_(t){return t}function f2(t){return t.access_token&&t.refresh_token&&t.expires_in}const ep=["global","local","others"];class h2{constructor({url:e="",headers:n={},fetch:s}){this.url=e,this.headers=n,this.fetch=ZS(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,n=ep[0]){if(ep.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${ep.join(", ")}`);try{return await Ie(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(s){if(Ne(s))return{data:null,error:s};throw s}}async inviteUserByEmail(e,n={}){try{return await Ie(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Ls})}catch(s){if(Ne(s))return{data:{user:null},error:s};throw s}}async generateLink(e){try{const{options:n}=e,s=Wa(e,["options"]),a=Object.assign(Object.assign({},s),n);return"newEmail"in s&&(a.new_email=s?.newEmail,delete a.newEmail),await Ie(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:d2,redirectTo:n?.redirectTo})}catch(n){if(Ne(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await Ie(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Ls})}catch(n){if(Ne(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,s,a,l,c,d,f;try{const h={nextPage:null,lastPage:0,total:0},g=await Ie(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(n=e?.page)===null||n===void 0?void 0:n.toString())!==null&&s!==void 0?s:"",per_page:(l=(a=e?.perPage)===null||a===void 0?void 0:a.toString())!==null&&l!==void 0?l:""},xform:q_});if(g.error)throw g.error;const p=await g.json(),v=(c=g.headers.get("x-total-count"))!==null&&c!==void 0?c:0,_=(f=(d=g.headers.get("link"))===null||d===void 0?void 0:d.split(","))!==null&&f!==void 0?f:[];return _.length>0&&(_.forEach(x=>{const w=parseInt(x.split(";")[0].split("=")[1].substring(0,1)),S=JSON.parse(x.split(";")[1].split("=")[1]);h[`${S}Page`]=w}),h.total=parseInt(v)),{data:Object.assign(Object.assign({},p),h),error:null}}catch(h){if(Ne(h))return{data:{users:[]},error:h};throw h}}async getUserById(e){xa(e);try{return await Ie(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Ls})}catch(n){if(Ne(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){xa(e);try{return await Ie(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:Ls})}catch(s){if(Ne(s))return{data:{user:null},error:s};throw s}}async deleteUser(e,n=!1){xa(e);try{return await Ie(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:Ls})}catch(s){if(Ne(s))return{data:{user:null},error:s};throw s}}async _listFactors(e){xa(e.userId);try{const{data:n,error:s}=await Ie(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:n,error:s}}catch(n){if(Ne(n))return{data:null,error:n};throw n}}async _deleteFactor(e){xa(e.userId),xa(e.id);try{return{data:await Ie(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(Ne(n))return{data:null,error:n};throw n}}async _listOAuthClients(e){var n,s,a,l,c,d,f;try{const h={nextPage:null,lastPage:0,total:0},g=await Ie(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(n=e?.page)===null||n===void 0?void 0:n.toString())!==null&&s!==void 0?s:"",per_page:(l=(a=e?.perPage)===null||a===void 0?void 0:a.toString())!==null&&l!==void 0?l:""},xform:q_});if(g.error)throw g.error;const p=await g.json(),v=(c=g.headers.get("x-total-count"))!==null&&c!==void 0?c:0,_=(f=(d=g.headers.get("link"))===null||d===void 0?void 0:d.split(","))!==null&&f!==void 0?f:[];return _.length>0&&(_.forEach(x=>{const w=parseInt(x.split(";")[0].split("=")[1].substring(0,1)),S=JSON.parse(x.split(";")[1].split("=")[1]);h[`${S}Page`]=w}),h.total=parseInt(v)),{data:Object.assign(Object.assign({},p),h),error:null}}catch(h){if(Ne(h))return{data:{clients:[]},error:h};throw h}}async _createOAuthClient(e){try{return await Ie(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Ne(n))return{data:null,error:n};throw n}}async _getOAuthClient(e){try{return await Ie(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Ne(n))return{data:null,error:n};throw n}}async _updateOAuthClient(e,n){try{return await Ie(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:n,headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(Ne(s))return{data:null,error:s};throw s}}async _deleteOAuthClient(e){try{return await Ie(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(Ne(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(e){try{return await Ie(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Ne(n))return{data:null,error:n};throw n}}}function H_(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}const Sa={debug:!!(globalThis&&JS()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class eE extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class m2 extends eE{}async function p2(t,e,n){Sa.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const s=new globalThis.AbortController;return e>0&&setTimeout(()=>{s.abort(),Sa.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async a=>{if(a){Sa.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,a.name);try{return await n()}finally{Sa.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,a.name)}}else{if(e===0)throw Sa.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new m2(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Sa.debug)try{const l=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(l,null,"  "))}catch(l){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",l)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function g2(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function tE(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function y2(t){return parseInt(t,16)}function v2(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,s=>s.toString(16).padStart(2,"0")).join("")}function b2(t){var e;const{chainId:n,domain:s,expirationTime:a,issuedAt:l=new Date,nonce:c,notBefore:d,requestId:f,resources:h,scheme:g,uri:p,version:v}=t;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!s)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(c&&c.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${c}`);if(!p)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(v!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${v}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const _=tE(t.address),x=g?`${g}://${s}`:s,w=t.statement?`${t.statement}
`:"",S=`${x} wants you to sign in with your Ethereum account:
${_}

${w}`;let C=`URI: ${p}
Version: ${v}
Chain ID: ${n}${c?`
Nonce: ${c}`:""}
Issued At: ${l.toISOString()}`;if(a&&(C+=`
Expiration Time: ${a.toISOString()}`),d&&(C+=`
Not Before: ${d.toISOString()}`),f&&(C+=`
Request ID: ${f}`),h){let N=`
Resources:`;for(const E of h){if(!E||typeof E!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${E}`);N+=`
- ${E}`}C+=N}return`${S}
${C}`}class Tt extends Error{constructor({message:e,code:n,cause:s,name:a}){var l;super(e,{cause:s}),this.__isWebAuthnError=!0,this.name=(l=a??(s instanceof Error?s.name:void 0))!==null&&l!==void 0?l:"Unknown Error",this.code=n}}class Nd extends Tt{constructor(e,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:e}),this.name="WebAuthnUnknownError",this.originalError=n}}function _2({error:t,options:e}){var n,s,a;const{publicKey:l}=e;if(!l)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Tt({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((n=l.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new Tt({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((s=l.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new Tt({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((a=l.authenticatorSelection)===null||a===void 0?void 0:a.userVerification)==="required")return new Tt({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new Tt({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new Tt({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return l.pubKeyCredParams.filter(d=>d.type==="public-key").length===0?new Tt({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new Tt({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const c=window.location.hostname;if(nE(c)){if(l.rp.id!==c)return new Tt({message:`The RP ID "${l.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new Tt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(l.user.id.byteLength<1||l.user.id.byteLength>64)return new Tt({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new Tt({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new Tt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function w2({error:t,options:e}){const{publicKey:n}=e;if(!n)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Tt({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new Tt({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const s=window.location.hostname;if(nE(s)){if(n.rpId!==s)return new Tt({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new Tt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new Tt({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new Tt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class x2{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const S2=new x2;function E2(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:n,excludeCredentials:s}=t,a=Wa(t,["challenge","user","excludeCredentials"]),l=La(e).buffer,c=Object.assign(Object.assign({},n),{id:La(n.id).buffer}),d=Object.assign(Object.assign({},a),{challenge:l,user:c});if(s&&s.length>0){d.excludeCredentials=new Array(s.length);for(let f=0;f<s.length;f++){const h=s[f];d.excludeCredentials[f]=Object.assign(Object.assign({},h),{id:La(h.id).buffer,type:h.type||"public-key",transports:h.transports})}}return d}function C2(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:n}=t,s=Wa(t,["challenge","allowCredentials"]),a=La(e).buffer,l=Object.assign(Object.assign({},s),{challenge:a});if(n&&n.length>0){l.allowCredentials=new Array(n.length);for(let c=0;c<n.length;c++){const d=n[c];l.allowCredentials[c]=Object.assign(Object.assign({},d),{id:La(d.id).buffer,type:d.type||"public-key",transports:d.transports})}}return l}function A2(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t;return{id:t.id,rawId:t.id,response:{attestationObject:vi(new Uint8Array(t.response.attestationObject)),clientDataJSON:vi(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function T2(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t,s=t.getClientExtensionResults(),a=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:vi(new Uint8Array(a.authenticatorData)),clientDataJSON:vi(new Uint8Array(a.clientDataJSON)),signature:vi(new Uint8Array(a.signature)),userHandle:a.userHandle?vi(new Uint8Array(a.userHandle)):void 0},type:"public-key",clientExtensionResults:s,authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function nE(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function V_(){var t,e;return!!(Jt()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator?.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator?.credentials)===null||e===void 0?void 0:e.get)=="function")}async function N2(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Nd("Browser returned unexpected credential type",e)}:{data:null,error:new Nd("Empty credential response",e)}}catch(e){return{data:null,error:_2({error:e,options:t})}}}async function O2(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Nd("Browser returned unexpected credential type",e)}:{data:null,error:new Nd("Empty credential response",e)}}catch(e){return{data:null,error:w2({error:e,options:t})}}}const j2={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},R2={userVerification:"preferred",hints:["security-key"]};function Od(...t){const e=a=>a!==null&&typeof a=="object"&&!Array.isArray(a),n=a=>a instanceof ArrayBuffer||ArrayBuffer.isView(a),s={};for(const a of t)if(a)for(const l in a){const c=a[l];if(c!==void 0)if(Array.isArray(c))s[l]=c;else if(n(c))s[l]=c;else if(e(c)){const d=s[l];e(d)?s[l]=Od(d,c):s[l]=Od(c)}else s[l]=c}return s}function k2(t,e){return Od(j2,t,e||{})}function M2(t,e){return Od(R2,t,e||{})}class D2{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:n,friendlyName:s,signal:a},l){try{const{data:c,error:d}=await this.client.mfa.challenge({factorId:e,webauthn:n});if(!c)return{data:null,error:d};const f=a??S2.createNewAbortSignal();if(c.webauthn.type==="create"){const{user:h}=c.webauthn.credential_options.publicKey;h.name||(h.name=`${h.id}:${s}`),h.displayName||(h.displayName=h.name)}switch(c.webauthn.type){case"create":{const h=k2(c.webauthn.credential_options.publicKey,l?.create),{data:g,error:p}=await N2({publicKey:h,signal:f});return g?{data:{factorId:e,challengeId:c.id,webauthn:{type:c.webauthn.type,credential_response:g}},error:null}:{data:null,error:p}}case"request":{const h=M2(c.webauthn.credential_options.publicKey,l?.request),{data:g,error:p}=await O2(Object.assign(Object.assign({},c.webauthn.credential_options),{publicKey:h,signal:f}));return g?{data:{factorId:e,challengeId:c.id,webauthn:{type:c.webauthn.type,credential_response:g}},error:null}:{data:null,error:p}}}}catch(c){return Ne(c)?{data:null,error:c}:{data:null,error:new gi("Unexpected error in challenge",c)}}}async _verify({challengeId:e,factorId:n,webauthn:s}){return this.client.mfa.verify({factorId:n,challengeId:e,webauthn:s})}async _authenticate({factorId:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:s=typeof window<"u"?[window.location.origin]:void 0,signal:a}},l){if(!n)return{data:null,error:new Dl("rpId is required for WebAuthn authentication")};try{if(!V_())return{data:null,error:new gi("Browser does not support WebAuthn",null)};const{data:c,error:d}=await this.challenge({factorId:e,webauthn:{rpId:n,rpOrigins:s},signal:a},{request:l});if(!c)return{data:null,error:d};const{webauthn:f}=c;return this._verify({factorId:e,challengeId:c.challengeId,webauthn:{type:f.type,rpId:n,rpOrigins:s,credential_response:f.credential_response}})}catch(c){return Ne(c)?{data:null,error:c}:{data:null,error:new gi("Unexpected error in authenticate",c)}}}async _register({friendlyName:e,rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:s=typeof window<"u"?[window.location.origin]:void 0,signal:a},l){if(!n)return{data:null,error:new Dl("rpId is required for WebAuthn registration")};try{if(!V_())return{data:null,error:new gi("Browser does not support WebAuthn",null)};const{data:c,error:d}=await this._enroll({friendlyName:e});if(!c)return await this.client.mfa.listFactors().then(g=>{var p;return(p=g.data)===null||p===void 0?void 0:p.all.find(v=>v.factor_type==="webauthn"&&v.friendly_name===e&&v.status!=="unverified")}).then(g=>g?this.client.mfa.unenroll({factorId:g?.id}):void 0),{data:null,error:d};const{data:f,error:h}=await this._challenge({factorId:c.id,friendlyName:c.friendly_name,webauthn:{rpId:n,rpOrigins:s},signal:a},{create:l});return f?this._verify({factorId:c.id,challengeId:f.challengeId,webauthn:{rpId:n,rpOrigins:s,type:f.webauthn.type,credential_response:f.webauthn.credential_response}}):{data:null,error:h}}catch(c){return Ne(c)?{data:null,error:c}:{data:null,error:new gi("Unexpected error in register",c)}}}}g2();const U2={url:RR,storageKey:kR,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:MR,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function F_(t,e,n){return await n()}const Ea={};class Ul{get jwks(){var e,n;return(n=(e=Ea[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(e){Ea[this.storageKey]=Object.assign(Object.assign({},Ea[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,n;return(n=(e=Ea[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Ea[this.storageKey]=Object.assign(Object.assign({},Ea[this.storageKey]),{cachedAt:e})}constructor(e){var n,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Ul.nextInstanceID,Ul.nextInstanceID+=1,this.instanceID>0&&Jt()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const a=Object.assign(Object.assign({},U2),e);if(this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.persistSession=a.persistSession,this.storageKey=a.storageKey,this.autoRefreshToken=a.autoRefreshToken,this.admin=new h2({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=ZS(a.fetch),this.lock=a.lock||F_,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,this.throwOnError=a.throwOnError,a.lock?this.lock=a.lock:Jt()&&(!((n=globalThis?.navigator)===null||n===void 0)&&n.locks)?this.lock=p2:this.lock=F_,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new D2(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this)},this.persistSession?(a.storage?this.storage=a.storage:JS()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=H_(this.memoryStorage)),a.userStorage&&(this.userStorage=a.userStorage)):(this.memoryStorage={},this.storage=H_(this.memoryStorage)),Jt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(l){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",l)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async l=>{this._debug("received broadcast notification from other tab or client",l),await this._notifyAllSubscribers(l.data.event,l.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${KS}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let n={},s="none";if(Jt()&&(n=GR(window.location.href),this._isImplicitGrantCallback(n)?s="implicit":await this._isPKCECallback(n)&&(s="pkce")),Jt()&&this.detectSessionInUrl&&s!=="none"){const{data:a,error:l}=await this._getSessionFromURL(n,s);if(l){if(this._debug("#_initialize()","error detecting session from URL",l),zR(l)){const f=(e=l.details)===null||e===void 0?void 0:e.code;if(f==="identity_already_exists"||f==="identity_not_found"||f==="single_identity_not_deletable")return{error:l}}return await this._removeSession(),{error:l}}const{session:c,redirectType:d}=a;return this._debug("#_initialize()","detected session in URL",c,"redirect type",d),await this._saveSession(c),setTimeout(async()=>{d==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",c):await this._notifyAllSubscribers("SIGNED_IN",c)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return Ne(n)?this._returnResult({error:n}):this._returnResult({error:new gi("Unexpected error during initialization",n)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,s,a;try{const l=await Ie(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(n=e?.options)===null||n===void 0?void 0:n.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(a=e?.options)===null||a===void 0?void 0:a.captchaToken}},xform:Wn}),{data:c,error:d}=l;if(d||!c)return this._returnResult({data:{user:null,session:null},error:d});const f=c.session,h=c.user;return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",f)),this._returnResult({data:{user:h,session:f},error:null})}catch(l){if(Ne(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async signUp(e){var n,s,a;try{let l;if("email"in e){const{email:g,password:p,options:v}=e;let _=null,x=null;this.flowType==="pkce"&&([_,x]=await wa(this.storage,this.storageKey)),l=await Ie(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:v?.emailRedirectTo,body:{email:g,password:p,data:(n=v?.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:v?.captchaToken},code_challenge:_,code_challenge_method:x},xform:Wn})}else if("phone"in e){const{phone:g,password:p,options:v}=e;l=await Ie(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:g,password:p,data:(s=v?.data)!==null&&s!==void 0?s:{},channel:(a=v?.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:v?.captchaToken}},xform:Wn})}else throw new Bu("You must provide either an email or phone number and a password");const{data:c,error:d}=l;if(d||!c)return this._returnResult({data:{user:null,session:null},error:d});const f=c.session,h=c.user;return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",f)),this._returnResult({data:{user:h,session:f},error:null})}catch(l){if(Ne(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async signInWithPassword(e){try{let n;if("email"in e){const{email:l,password:c,options:d}=e;n=await Ie(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:l,password:c,gotrue_meta_security:{captcha_token:d?.captchaToken}},xform:P_})}else if("phone"in e){const{phone:l,password:c,options:d}=e;n=await Ie(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:l,password:c,gotrue_meta_security:{captcha_token:d?.captchaToken}},xform:P_})}else throw new Bu("You must provide either an email or phone number and a password");const{data:s,error:a}=n;if(a)return this._returnResult({data:{user:null,session:null},error:a});if(!s||!s.session||!s.user){const l=new _a;return this._returnResult({data:{user:null,session:null},error:l})}return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),this._returnResult({data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:a})}catch(n){if(Ne(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOAuth(e){var n,s,a,l;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(s=e.options)===null||s===void 0?void 0:s.scopes,queryParams:(a=e.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(l=e.options)===null||l===void 0?void 0:l.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;switch(n){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(e){var n,s,a,l,c,d,f,h,g,p,v;let _,x;if("message"in e)_=e.message,x=e.signature;else{const{chain:w,wallet:S,statement:C,options:N}=e;let E;if(Jt())if(typeof S=="object")E=S;else{const q=window;if("ethereum"in q&&typeof q.ethereum=="object"&&"request"in q.ethereum&&typeof q.ethereum.request=="function")E=q.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof S!="object"||!N?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");E=S}const A=new URL((n=N?.url)!==null&&n!==void 0?n:window.location.href),j=await E.request({method:"eth_requestAccounts"}).then(q=>q).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!j||j.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const R=tE(j[0]);let D=(s=N?.signInWithEthereum)===null||s===void 0?void 0:s.chainId;if(!D){const q=await E.request({method:"eth_chainId"});D=y2(q)}const I={domain:A.host,address:R,statement:C,uri:A.href,version:"1",chainId:D,nonce:(a=N?.signInWithEthereum)===null||a===void 0?void 0:a.nonce,issuedAt:(c=(l=N?.signInWithEthereum)===null||l===void 0?void 0:l.issuedAt)!==null&&c!==void 0?c:new Date,expirationTime:(d=N?.signInWithEthereum)===null||d===void 0?void 0:d.expirationTime,notBefore:(f=N?.signInWithEthereum)===null||f===void 0?void 0:f.notBefore,requestId:(h=N?.signInWithEthereum)===null||h===void 0?void 0:h.requestId,resources:(g=N?.signInWithEthereum)===null||g===void 0?void 0:g.resources};_=b2(I),x=await E.request({method:"personal_sign",params:[v2(_),R]})}try{const{data:w,error:S}=await Ie(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:_,signature:x},!((p=e.options)===null||p===void 0)&&p.captchaToken?{gotrue_meta_security:{captcha_token:(v=e.options)===null||v===void 0?void 0:v.captchaToken}}:null),xform:Wn});if(S)throw S;if(!w||!w.session||!w.user){const C=new _a;return this._returnResult({data:{user:null,session:null},error:C})}return w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("SIGNED_IN",w.session)),this._returnResult({data:Object.assign({},w),error:S})}catch(w){if(Ne(w))return this._returnResult({data:{user:null,session:null},error:w});throw w}}async signInWithSolana(e){var n,s,a,l,c,d,f,h,g,p,v,_;let x,w;if("message"in e)x=e.message,w=e.signature;else{const{chain:S,wallet:C,statement:N,options:E}=e;let A;if(Jt())if(typeof C=="object")A=C;else{const R=window;if("solana"in R&&typeof R.solana=="object"&&("signIn"in R.solana&&typeof R.solana.signIn=="function"||"signMessage"in R.solana&&typeof R.solana.signMessage=="function"))A=R.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof C!="object"||!E?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");A=C}const j=new URL((n=E?.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in A&&A.signIn){const R=await A.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},E?.signInWithSolana),{version:"1",domain:j.host,uri:j.href}),N?{statement:N}:null));let D;if(Array.isArray(R)&&R[0]&&typeof R[0]=="object")D=R[0];else if(R&&typeof R=="object"&&"signedMessage"in R&&"signature"in R)D=R;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in D&&"signature"in D&&(typeof D.signedMessage=="string"||D.signedMessage instanceof Uint8Array)&&D.signature instanceof Uint8Array)x=typeof D.signedMessage=="string"?D.signedMessage:new TextDecoder().decode(D.signedMessage),w=D.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in A)||typeof A.signMessage!="function"||!("publicKey"in A)||typeof A!="object"||!A.publicKey||!("toBase58"in A.publicKey)||typeof A.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");x=[`${j.host} wants you to sign in with your Solana account:`,A.publicKey.toBase58(),...N?["",N,""]:[""],"Version: 1",`URI: ${j.href}`,`Issued At: ${(a=(s=E?.signInWithSolana)===null||s===void 0?void 0:s.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((l=E?.signInWithSolana)===null||l===void 0)&&l.notBefore?[`Not Before: ${E.signInWithSolana.notBefore}`]:[],...!((c=E?.signInWithSolana)===null||c===void 0)&&c.expirationTime?[`Expiration Time: ${E.signInWithSolana.expirationTime}`]:[],...!((d=E?.signInWithSolana)===null||d===void 0)&&d.chainId?[`Chain ID: ${E.signInWithSolana.chainId}`]:[],...!((f=E?.signInWithSolana)===null||f===void 0)&&f.nonce?[`Nonce: ${E.signInWithSolana.nonce}`]:[],...!((h=E?.signInWithSolana)===null||h===void 0)&&h.requestId?[`Request ID: ${E.signInWithSolana.requestId}`]:[],...!((p=(g=E?.signInWithSolana)===null||g===void 0?void 0:g.resources)===null||p===void 0)&&p.length?["Resources",...E.signInWithSolana.resources.map(D=>`- ${D}`)]:[]].join(`
`);const R=await A.signMessage(new TextEncoder().encode(x),"utf8");if(!R||!(R instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");w=R}}try{const{data:S,error:C}=await Ie(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:x,signature:vi(w)},!((v=e.options)===null||v===void 0)&&v.captchaToken?{gotrue_meta_security:{captcha_token:(_=e.options)===null||_===void 0?void 0:_.captchaToken}}:null),xform:Wn});if(C)throw C;if(!S||!S.session||!S.user){const N=new _a;return this._returnResult({data:{user:null,session:null},error:N})}return S.session&&(await this._saveSession(S.session),await this._notifyAllSubscribers("SIGNED_IN",S.session)),this._returnResult({data:Object.assign({},S),error:C})}catch(S){if(Ne(S))return this._returnResult({data:{user:null,session:null},error:S});throw S}}async _exchangeCodeForSession(e){const n=await ui(this.storage,`${this.storageKey}-code-verifier`),[s,a]=(n??"").split("/");try{const{data:l,error:c}=await Ie(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:s},xform:Wn});if(await Rs(this.storage,`${this.storageKey}-code-verifier`),c)throw c;if(!l||!l.session||!l.user){const d=new _a;return this._returnResult({data:{user:null,session:null,redirectType:null},error:d})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:Object.assign(Object.assign({},l),{redirectType:a??null}),error:c})}catch(l){if(Ne(l))return this._returnResult({data:{user:null,session:null,redirectType:null},error:l});throw l}}async signInWithIdToken(e){try{const{options:n,provider:s,token:a,access_token:l,nonce:c}=e,d=await Ie(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:a,access_token:l,nonce:c,gotrue_meta_security:{captcha_token:n?.captchaToken}},xform:Wn}),{data:f,error:h}=d;if(h)return this._returnResult({data:{user:null,session:null},error:h});if(!f||!f.session||!f.user){const g=new _a;return this._returnResult({data:{user:null,session:null},error:g})}return f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",f.session)),this._returnResult({data:f,error:h})}catch(n){if(Ne(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOtp(e){var n,s,a,l,c;try{if("email"in e){const{email:d,options:f}=e;let h=null,g=null;this.flowType==="pkce"&&([h,g]=await wa(this.storage,this.storageKey));const{error:p}=await Ie(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:d,data:(n=f?.data)!==null&&n!==void 0?n:{},create_user:(s=f?.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:f?.captchaToken},code_challenge:h,code_challenge_method:g},redirectTo:f?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:p})}if("phone"in e){const{phone:d,options:f}=e,{data:h,error:g}=await Ie(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:d,data:(a=f?.data)!==null&&a!==void 0?a:{},create_user:(l=f?.shouldCreateUser)!==null&&l!==void 0?l:!0,gotrue_meta_security:{captcha_token:f?.captchaToken},channel:(c=f?.channel)!==null&&c!==void 0?c:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:h?.message_id},error:g})}throw new Bu("You must provide either an email or phone number.")}catch(d){if(Ne(d))return this._returnResult({data:{user:null,session:null},error:d});throw d}}async verifyOtp(e){var n,s;try{let a,l;"options"in e&&(a=(n=e.options)===null||n===void 0?void 0:n.redirectTo,l=(s=e.options)===null||s===void 0?void 0:s.captchaToken);const{data:c,error:d}=await Ie(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:l}}),redirectTo:a,xform:Wn});if(d)throw d;if(!c)throw new Error("An error occurred on token verification.");const f=c.session,h=c.user;return f?.access_token&&(await this._saveSession(f),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",f)),this._returnResult({data:{user:h,session:f},error:null})}catch(a){if(Ne(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithSSO(e){var n,s,a;try{let l=null,c=null;this.flowType==="pkce"&&([l,c]=await wa(this.storage,this.storageKey));const d=await Ie(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(s=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&s!==void 0?s:void 0}),!((a=e?.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:l,code_challenge_method:c}),headers:this.headers,xform:u2});return this._returnResult(d)}catch(l){if(Ne(l))return this._returnResult({data:null,error:l});throw l}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:s}=e;if(s)throw s;if(!n)throw new Qn;const{error:a}=await Ie(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return this._returnResult({data:{user:null,session:null},error:a})})}catch(e){if(Ne(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:s,type:a,options:l}=e,{error:c}=await Ie(this.fetch,"POST",n,{headers:this.headers,body:{email:s,type:a,gotrue_meta_security:{captcha_token:l?.captchaToken}},redirectTo:l?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:c})}else if("phone"in e){const{phone:s,type:a,options:l}=e,{data:c,error:d}=await Ie(this.fetch,"POST",n,{headers:this.headers,body:{phone:s,type:a,gotrue_meta_security:{captcha_token:l?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:c?.message_id},error:d})}throw new Bu("You must provide either an email or phone number and a type")}catch(n){if(Ne(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await s,await n()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=n();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await ui(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const s=e.expires_at?e.expires_at*1e3-Date.now()<Qm:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",e.expires_at),!s){if(this.userStorage){const c=await ui(this.userStorage,this.storageKey+"-user");c?.user?e.user=c.user:e.user=Zm()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const c={value:this.suppressGetSessionWarning};e.user=a2(e.user,c),c.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:a,error:l}=await this._callRefreshToken(e.refresh_token);return l?this._returnResult({data:{session:null},error:l}):this._returnResult({data:{session:a},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await Ie(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Ls}):await this._useSession(async n=>{var s,a,l;const{data:c,error:d}=n;if(d)throw d;return!(!((s=c.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Qn}:await Ie(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(l=(a=c.session)===null||a===void 0?void 0:a.access_token)!==null&&l!==void 0?l:void 0,xform:Ls})})}catch(n){if(Ne(n))return LR(n)&&(await this._removeSession(),await Rs(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:n});throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async s=>{const{data:a,error:l}=s;if(l)throw l;if(!a.session)throw new Qn;const c=a.session;let d=null,f=null;this.flowType==="pkce"&&e.email!=null&&([d,f]=await wa(this.storage,this.storageKey));const{data:h,error:g}=await Ie(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n?.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:d,code_challenge_method:f}),jwt:c.access_token,xform:Ls});if(g)throw g;return c.user=h.user,await this._saveSession(c),await this._notifyAllSubscribers("USER_UPDATED",c),this._returnResult({data:{user:c.user},error:null})})}catch(s){if(Ne(s))return this._returnResult({data:{user:null},error:s});throw s}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Qn;const n=Date.now()/1e3;let s=n,a=!0,l=null;const{payload:c}=Jm(e.access_token);if(c.exp&&(s=c.exp,a=s<=n),a){const{data:d,error:f}=await this._callRefreshToken(e.refresh_token);if(f)return this._returnResult({data:{user:null,session:null},error:f});if(!d)return{data:{user:null,session:null},error:null};l=d}else{const{data:d,error:f}=await this._getUser(e.access_token);if(f)throw f;l={access_token:e.access_token,refresh_token:e.refresh_token,user:d.user,token_type:"bearer",expires_in:s-n,expires_at:s},await this._saveSession(l),await this._notifyAllSubscribers("SIGNED_IN",l)}return this._returnResult({data:{user:l.user,session:l},error:null})}catch(n){if(Ne(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var s;if(!e){const{data:c,error:d}=n;if(d)throw d;e=(s=c.session)!==null&&s!==void 0?s:void 0}if(!e?.refresh_token)throw new Qn;const{data:a,error:l}=await this._callRefreshToken(e.refresh_token);return l?this._returnResult({data:{user:null,session:null},error:l}):a?this._returnResult({data:{user:a.user,session:a},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(n){if(Ne(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async _getSessionFromURL(e,n){try{if(!Jt())throw new Pu("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Pu(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new D_("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Pu("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new D_("No code detected.");const{data:N,error:E}=await this._exchangeCodeForSession(e.code);if(E)throw E;const A=new URL(window.location.href);return A.searchParams.delete("code"),window.history.replaceState(window.history.state,"",A.toString()),{data:{session:N.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:a,access_token:l,refresh_token:c,expires_in:d,expires_at:f,token_type:h}=e;if(!l||!d||!c||!h)throw new Pu("No session defined in URL");const g=Math.round(Date.now()/1e3),p=parseInt(d);let v=g+p;f&&(v=parseInt(f));const _=v-g;_*1e3<=ja&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${_}s, should have been closer to ${p}s`);const x=v-p;g-x>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",x,v,g):g-x<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",x,v,g);const{data:w,error:S}=await this._getUser(l);if(S)throw S;const C={provider_token:s,provider_refresh_token:a,access_token:l,expires_in:p,expires_at:v,refresh_token:c,token_type:h,user:w.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:C,redirectType:e.type},error:null})}catch(s){if(Ne(s))return this._returnResult({data:{session:null,redirectType:null},error:s});throw s}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await ui(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var s;const{data:a,error:l}=n;if(l)return this._returnResult({error:l});const c=(s=a.session)===null||s===void 0?void 0:s.access_token;if(c){const{error:d}=await this.admin.signOut(c,e);if(d&&!($R(d)&&(d.status===404||d.status===401||d.status===403)))return this._returnResult({error:d})}return e!=="others"&&(await this._removeSession(),await Rs(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const n=YR(),s={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,s),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:s}}}async _emitInitialSession(e){return await this._useSession(async n=>{var s,a;try{const{data:{session:l},error:c}=n;if(c)throw c;await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",l)),this._debug("INITIAL_SESSION","callback id",e,"session",l)}catch(l){await((a=this.stateChangeEmitters.get(e))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",l),console.error(l)}})}async resetPasswordForEmail(e,n={}){let s=null,a=null;this.flowType==="pkce"&&([s,a]=await wa(this.storage,this.storageKey,!0));try{return await Ie(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:s,code_challenge_method:a,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(l){if(Ne(l))return this._returnResult({data:null,error:l});throw l}}async getUserIdentities(){var e;try{const{data:n,error:s}=await this.getUser();if(s)throw s;return this._returnResult({data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(n){if(Ne(n))return this._returnResult({data:null,error:n});throw n}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var n;try{const{data:s,error:a}=await this._useSession(async l=>{var c,d,f,h,g;const{data:p,error:v}=l;if(v)throw v;const _=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(c=e.options)===null||c===void 0?void 0:c.redirectTo,scopes:(d=e.options)===null||d===void 0?void 0:d.scopes,queryParams:(f=e.options)===null||f===void 0?void 0:f.queryParams,skipBrowserRedirect:!0});return await Ie(this.fetch,"GET",_,{headers:this.headers,jwt:(g=(h=p.session)===null||h===void 0?void 0:h.access_token)!==null&&g!==void 0?g:void 0})});if(a)throw a;return Jt()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(s?.url),this._returnResult({data:{provider:e.provider,url:s?.url},error:null})}catch(s){if(Ne(s))return this._returnResult({data:{provider:e.provider,url:null},error:s});throw s}}async linkIdentityIdToken(e){return await this._useSession(async n=>{var s;try{const{error:a,data:{session:l}}=n;if(a)throw a;const{options:c,provider:d,token:f,access_token:h,nonce:g}=e,p=await Ie(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(s=l?.access_token)!==null&&s!==void 0?s:void 0,body:{provider:d,id_token:f,access_token:h,nonce:g,link_identity:!0,gotrue_meta_security:{captcha_token:c?.captchaToken}},xform:Wn}),{data:v,error:_}=p;return _?this._returnResult({data:{user:null,session:null},error:_}):!v||!v.session||!v.user?this._returnResult({data:{user:null,session:null},error:new _a}):(v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("USER_UPDATED",v.session)),this._returnResult({data:v,error:_}))}catch(a){if(Ne(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}})}async unlinkIdentity(e){try{return await this._useSession(async n=>{var s,a;const{data:l,error:c}=n;if(c)throw c;return await Ie(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(a=(s=l.session)===null||s===void 0?void 0:s.access_token)!==null&&a!==void 0?a:void 0})})}catch(n){if(Ne(n))return this._returnResult({data:null,error:n});throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const s=Date.now();return await QR(async a=>(a>0&&await KR(200*Math.pow(2,a-1)),this._debug(n,"refreshing attempt",a),await Ie(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Wn})),(a,l)=>{const c=200*Math.pow(2,a);return l&&Wm(l)&&Date.now()+c-s<ja})}catch(s){if(this._debug(n,"error",s),Ne(s))return this._returnResult({data:{session:null,user:null},error:s});throw s}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const s=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",s),Jt()&&!n.skipBrowserRedirect&&window.location.assign(s),{data:{provider:e,url:s},error:null}}async _recoverAndRefresh(){var e,n;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const a=await ui(this.storage,this.storageKey);if(a&&this.userStorage){let c=await ui(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!c&&(c={user:a.user},await Ra(this.userStorage,this.storageKey+"-user",c)),a.user=(e=c?.user)!==null&&e!==void 0?e:Zm()}else if(a&&!a.user&&!a.user){const c=await ui(this.storage,this.storageKey+"-user");c&&c?.user?(a.user=c.user,await Rs(this.storage,this.storageKey+"-user"),await Ra(this.storage,this.storageKey,a)):a.user=Zm()}if(this._debug(s,"session from storage",a),!this._isValidSession(a)){this._debug(s,"session is not valid"),a!==null&&await this._removeSession();return}const l=((n=a.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<Qm;if(this._debug(s,`session has${l?"":" not"} expired with margin of ${Qm}s`),l){if(this.autoRefreshToken&&a.refresh_token){const{error:c}=await this._callRefreshToken(a.refresh_token);c&&(console.error(c),Wm(c)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",c),await this._removeSession()))}}else if(a.user&&a.user.__isUserNotAvailableProxy===!0)try{const{data:c,error:d}=await this._getUser(a.access_token);!d&&c?.user?(a.user=c.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(s,"could not get user data, skipping SIGNED_IN notification")}catch(c){console.error("Error getting user data:",c),this._debug(s,"error getting user data, skipping SIGNED_IN notification",c)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(s,"error",a),console.error(a);return}finally{this._debug(s,"end")}}async _callRefreshToken(e){var n,s;if(!e)throw new Qn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new tf;const{data:l,error:c}=await this._refreshAccessToken(e);if(c)throw c;if(!l.session)throw new Qn;await this._saveSession(l.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",l.session);const d={data:l.session,error:null};return this.refreshingDeferred.resolve(d),d}catch(l){if(this._debug(a,"error",l),Ne(l)){const c={data:null,error:l};return Wm(l)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(c),c}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(l),l}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(e,n,s=!0){const a=`#_notifyAllSubscribers(${e})`;this._debug(a,"begin",n,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:e,session:n});const l=[],c=Array.from(this.stateChangeEmitters.values()).map(async d=>{try{await d.callback(e,n)}catch(f){l.push(f)}});if(await Promise.all(c),l.length>0){for(let d=0;d<l.length;d+=1)console.error(l[d]);throw l[0]}}finally{this._debug(a,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const n=Object.assign({},e),s=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!s&&n.user&&await Ra(this.userStorage,this.storageKey+"-user",{user:n.user});const a=Object.assign({},n);delete a.user;const l=z_(a);await Ra(this.storage,this.storageKey,l)}else{const a=z_(n);await Ra(this.storage,this.storageKey,a)}}async _removeSession(){this._debug("#_removeSession()"),await Rs(this.storage,this.storageKey),await Rs(this.storage,this.storageKey+"-code-verifier"),await Rs(this.storage,this.storageKey+"-user"),this.userStorage&&await Rs(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Jt()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),ja);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:s}}=n;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((s.expires_at*1e3-e)/ja);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${ja}ms, refresh threshold is ${Up} ticks`),a<=Up&&await this._callRefreshToken(s.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof eE)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Jt()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,s){const a=[`provider=${encodeURIComponent(n)}`];if(s?.redirectTo&&a.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s?.scopes&&a.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const[l,c]=await wa(this.storage,this.storageKey),d=new URLSearchParams({code_challenge:`${encodeURIComponent(l)}`,code_challenge_method:`${encodeURIComponent(c)}`});a.push(d.toString())}if(s?.queryParams){const l=new URLSearchParams(s.queryParams);a.push(l.toString())}return s?.skipBrowserRedirect&&a.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${e}?${a.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var s;const{data:a,error:l}=n;return l?this._returnResult({data:null,error:l}):await Ie(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(s=a?.session)===null||s===void 0?void 0:s.access_token})})}catch(n){if(Ne(n))return this._returnResult({data:null,error:n});throw n}}async _enroll(e){try{return await this._useSession(async n=>{var s,a;const{data:l,error:c}=n;if(c)return this._returnResult({data:null,error:c});const d=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:f,error:h}=await Ie(this.fetch,"POST",`${this.url}/factors`,{body:d,headers:this.headers,jwt:(s=l?.session)===null||s===void 0?void 0:s.access_token});return h?this._returnResult({data:null,error:h}):(e.factorType==="totp"&&f.type==="totp"&&(!((a=f?.totp)===null||a===void 0)&&a.qr_code)&&(f.totp.qr_code=`data:image/svg+xml;utf-8,${f.totp.qr_code}`),this._returnResult({data:f,error:null}))})}catch(n){if(Ne(n))return this._returnResult({data:null,error:n});throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var s;const{data:a,error:l}=n;if(l)return this._returnResult({data:null,error:l});const c=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?A2(e.webauthn.credential_response):T2(e.webauthn.credential_response)})}:{code:e.code}),{data:d,error:f}=await Ie(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:c,headers:this.headers,jwt:(s=a?.session)===null||s===void 0?void 0:s.access_token});return f?this._returnResult({data:null,error:f}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+d.expires_in},d)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",d),this._returnResult({data:d,error:f}))})}catch(n){if(Ne(n))return this._returnResult({data:null,error:n});throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var s;const{data:a,error:l}=n;if(l)return this._returnResult({data:null,error:l});const c=await Ie(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(s=a?.session)===null||s===void 0?void 0:s.access_token});if(c.error)return c;const{data:d}=c;if(d.type!=="webauthn")return{data:d,error:null};switch(d.webauthn.type){case"create":return{data:Object.assign(Object.assign({},d),{webauthn:Object.assign(Object.assign({},d.webauthn),{credential_options:Object.assign(Object.assign({},d.webauthn.credential_options),{publicKey:E2(d.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},d),{webauthn:Object.assign(Object.assign({},d.webauthn),{credential_options:Object.assign(Object.assign({},d.webauthn.credential_options),{publicKey:C2(d.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(Ne(n))return this._returnResult({data:null,error:n});throw n}})}async _challengeAndVerify(e){const{data:n,error:s}=await this._challenge({factorId:e.factorId});return s?this._returnResult({data:null,error:s}):await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){var e;const{data:{user:n},error:s}=await this.getUser();if(s)return{data:null,error:s};const a={all:[],phone:[],totp:[],webauthn:[]};for(const l of(e=n?.factors)!==null&&e!==void 0?e:[])a.all.push(l),l.status==="verified"&&a[l.factor_type].push(l);return{data:a,error:null}}async _getAuthenticatorAssuranceLevel(){var e,n;const{data:{session:s},error:a}=await this.getSession();if(a)return this._returnResult({data:null,error:a});if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:l}=Jm(s.access_token);let c=null;l.aal&&(c=l.aal);let d=c;((n=(e=s.user.factors)===null||e===void 0?void 0:e.filter(g=>g.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(d="aal2");const h=l.amr||[];return{data:{currentLevel:c,nextLevel:d,currentAuthenticationMethods:h},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async n=>{const{data:{session:s},error:a}=n;return a?this._returnResult({data:null,error:a}):s?await Ie(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:s.access_token,xform:l=>({data:l,error:null})}):this._returnResult({data:null,error:new Qn})})}catch(n){if(Ne(n))return this._returnResult({data:null,error:n});throw n}}async _approveAuthorization(e,n){try{return await this._useSession(async s=>{const{data:{session:a},error:l}=s;if(l)return this._returnResult({data:null,error:l});if(!a)return this._returnResult({data:null,error:new Qn});const c=await Ie(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"approve"},xform:d=>({data:d,error:null})});return c.data&&c.data.redirect_url&&Jt()&&!n?.skipBrowserRedirect&&window.location.assign(c.data.redirect_url),c})}catch(s){if(Ne(s))return this._returnResult({data:null,error:s});throw s}}async _denyAuthorization(e,n){try{return await this._useSession(async s=>{const{data:{session:a},error:l}=s;if(l)return this._returnResult({data:null,error:l});if(!a)return this._returnResult({data:null,error:new Qn});const c=await Ie(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"deny"},xform:d=>({data:d,error:null})});return c.data&&c.data.redirect_url&&Jt()&&!n?.skipBrowserRedirect&&window.location.assign(c.data.redirect_url),c})}catch(s){if(Ne(s))return this._returnResult({data:null,error:s});throw s}}async fetchJwk(e,n={keys:[]}){let s=n.keys.find(d=>d.kid===e);if(s)return s;const a=Date.now();if(s=this.jwks.keys.find(d=>d.kid===e),s&&this.jwks_cached_at+UR>a)return s;const{data:l,error:c}=await Ie(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(c)throw c;return!l.keys||l.keys.length===0||(this.jwks=l,this.jwks_cached_at=a,s=l.keys.find(d=>d.kid===e),!s)?null:s}async getClaims(e,n={}){try{let s=e;if(!s){const{data:_,error:x}=await this.getSession();if(x||!_.session)return this._returnResult({data:null,error:x});s=_.session.access_token}const{header:a,payload:l,signature:c,raw:{header:d,payload:f}}=Jm(s);n?.allowExpired||r2(l.exp);const h=!a.alg||a.alg.startsWith("HS")||!a.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(a.kid,n?.keys?{keys:n.keys}:n?.jwks);if(!h){const{error:_}=await this.getUser(s);if(_)throw _;return{data:{claims:l,header:a,signature:c},error:null}}const g=s2(a.alg),p=await crypto.subtle.importKey("jwk",h,g,!0,["verify"]);if(!await crypto.subtle.verify(g,p,c,VR(`${d}.${f}`)))throw new Lp("Invalid JWT signature");return{data:{claims:l,header:a,signature:c},error:null}}catch(s){if(Ne(s))return this._returnResult({data:null,error:s});throw s}}}Ul.nextInstanceID=0;const I2=Ul;class $2 extends I2{constructor(e){super(e)}}class L2{constructor(e,n,s){var a,l,c;this.supabaseUrl=e,this.supabaseKey=n;const d=jR(e);if(!n)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",d),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",d),this.storageUrl=new URL("storage/v1",d),this.functionsUrl=new URL("functions/v1",d);const f=`sb-${d.hostname.split(".")[0]}-auth-token`,h={db:xR,realtime:ER,auth:Object.assign(Object.assign({},SR),{storageKey:f}),global:wR},g=OR(s??{},h);this.storageKey=(a=g.auth.storageKey)!==null&&a!==void 0?a:"",this.headers=(l=g.global.headers)!==null&&l!==void 0?l:{},g.accessToken?(this.accessToken=g.accessToken,this.auth=new Proxy({},{get:(p,v)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(v)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((c=g.auth)!==null&&c!==void 0?c:{},this.headers,g.global.fetch),this.fetch=TR(n,this._getAccessToken.bind(this),g.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},g.realtime)),this.rest=new Rj(new URL("rest/v1",d).href,{headers:this.headers,schema:g.db.schema,fetch:this.fetch}),this.storage=new vR(this.storageUrl.href,this.headers,this.fetch,s?.storage),g.accessToken||this._listenForAuthEvents()}get functions(){return new Tj(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},s={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,n,s)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e,n;if(this.accessToken)return await this.accessToken();const{data:s}=await this.auth.getSession();return(n=(e=s.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:s,storage:a,userStorage:l,storageKey:c,flowType:d,lock:f,debug:h,throwOnError:g},p,v){const _={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new $2({url:this.authUrl.href,headers:Object.assign(Object.assign({},_),p),storageKey:c,autoRefreshToken:e,persistSession:n,detectSessionInUrl:s,storage:a,userStorage:l,flowType:d,lock:f,debug:h,throwOnError:g,fetch:v,hasCustomAuthorizationHeader:Object.keys(this.headers).some(x=>x.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new Xj(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,s)=>{this._handleTokenChanged(n,"CLIENT",s?.access_token)})}_handleTokenChanged(e,n,s){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==s?(this.changedAccessToken=s,this.realtime.setAuth(s)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const z2=(t,e,n)=>new L2(t,e,n);function B2(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}B2()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");var qu={exports:{}},Y_;function P2(){if(Y_)return qu.exports;Y_=1;var t=typeof Reflect=="object"?Reflect:null,e=t&&typeof t.apply=="function"?t.apply:function(j,R,D){return Function.prototype.apply.call(j,R,D)},n;t&&typeof t.ownKeys=="function"?n=t.ownKeys:Object.getOwnPropertySymbols?n=function(j){return Object.getOwnPropertyNames(j).concat(Object.getOwnPropertySymbols(j))}:n=function(j){return Object.getOwnPropertyNames(j)};function s(A){console&&console.warn&&console.warn(A)}var a=Number.isNaN||function(j){return j!==j};function l(){l.init.call(this)}qu.exports=l,qu.exports.once=C,l.EventEmitter=l,l.prototype._events=void 0,l.prototype._eventsCount=0,l.prototype._maxListeners=void 0;var c=10;function d(A){if(typeof A!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof A)}Object.defineProperty(l,"defaultMaxListeners",{enumerable:!0,get:function(){return c},set:function(A){if(typeof A!="number"||A<0||a(A))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+A+".");c=A}}),l.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},l.prototype.setMaxListeners=function(j){if(typeof j!="number"||j<0||a(j))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+j+".");return this._maxListeners=j,this};function f(A){return A._maxListeners===void 0?l.defaultMaxListeners:A._maxListeners}l.prototype.getMaxListeners=function(){return f(this)},l.prototype.emit=function(j){for(var R=[],D=1;D<arguments.length;D++)R.push(arguments[D]);var I=j==="error",q=this._events;if(q!==void 0)I=I&&q.error===void 0;else if(!I)return!1;if(I){var Q;if(R.length>0&&(Q=R[0]),Q instanceof Error)throw Q;var G=new Error("Unhandled error."+(Q?" ("+Q.message+")":""));throw G.context=Q,G}var L=q[j];if(L===void 0)return!1;if(typeof L=="function")e(L,this,R);else for(var X=L.length,$=x(L,X),D=0;D<X;++D)e($[D],this,R);return!0};function h(A,j,R,D){var I,q,Q;if(d(R),q=A._events,q===void 0?(q=A._events=Object.create(null),A._eventsCount=0):(q.newListener!==void 0&&(A.emit("newListener",j,R.listener?R.listener:R),q=A._events),Q=q[j]),Q===void 0)Q=q[j]=R,++A._eventsCount;else if(typeof Q=="function"?Q=q[j]=D?[R,Q]:[Q,R]:D?Q.unshift(R):Q.push(R),I=f(A),I>0&&Q.length>I&&!Q.warned){Q.warned=!0;var G=new Error("Possible EventEmitter memory leak detected. "+Q.length+" "+String(j)+" listeners added. Use emitter.setMaxListeners() to increase limit");G.name="MaxListenersExceededWarning",G.emitter=A,G.type=j,G.count=Q.length,s(G)}return A}l.prototype.addListener=function(j,R){return h(this,j,R,!1)},l.prototype.on=l.prototype.addListener,l.prototype.prependListener=function(j,R){return h(this,j,R,!0)};function g(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function p(A,j,R){var D={fired:!1,wrapFn:void 0,target:A,type:j,listener:R},I=g.bind(D);return I.listener=R,D.wrapFn=I,I}l.prototype.once=function(j,R){return d(R),this.on(j,p(this,j,R)),this},l.prototype.prependOnceListener=function(j,R){return d(R),this.prependListener(j,p(this,j,R)),this},l.prototype.removeListener=function(j,R){var D,I,q,Q,G;if(d(R),I=this._events,I===void 0)return this;if(D=I[j],D===void 0)return this;if(D===R||D.listener===R)--this._eventsCount===0?this._events=Object.create(null):(delete I[j],I.removeListener&&this.emit("removeListener",j,D.listener||R));else if(typeof D!="function"){for(q=-1,Q=D.length-1;Q>=0;Q--)if(D[Q]===R||D[Q].listener===R){G=D[Q].listener,q=Q;break}if(q<0)return this;q===0?D.shift():w(D,q),D.length===1&&(I[j]=D[0]),I.removeListener!==void 0&&this.emit("removeListener",j,G||R)}return this},l.prototype.off=l.prototype.removeListener,l.prototype.removeAllListeners=function(j){var R,D,I;if(D=this._events,D===void 0)return this;if(D.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):D[j]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete D[j]),this;if(arguments.length===0){var q=Object.keys(D),Q;for(I=0;I<q.length;++I)Q=q[I],Q!=="removeListener"&&this.removeAllListeners(Q);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(R=D[j],typeof R=="function")this.removeListener(j,R);else if(R!==void 0)for(I=R.length-1;I>=0;I--)this.removeListener(j,R[I]);return this};function v(A,j,R){var D=A._events;if(D===void 0)return[];var I=D[j];return I===void 0?[]:typeof I=="function"?R?[I.listener||I]:[I]:R?S(I):x(I,I.length)}l.prototype.listeners=function(j){return v(this,j,!0)},l.prototype.rawListeners=function(j){return v(this,j,!1)},l.listenerCount=function(A,j){return typeof A.listenerCount=="function"?A.listenerCount(j):_.call(A,j)},l.prototype.listenerCount=_;function _(A){var j=this._events;if(j!==void 0){var R=j[A];if(typeof R=="function")return 1;if(R!==void 0)return R.length}return 0}l.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]};function x(A,j){for(var R=new Array(j),D=0;D<j;++D)R[D]=A[D];return R}function w(A,j){for(;j+1<A.length;j++)A[j]=A[j+1];A.pop()}function S(A){for(var j=new Array(A.length),R=0;R<j.length;++R)j[R]=A[R].listener||A[R];return j}function C(A,j){return new Promise(function(R,D){function I(Q){A.removeListener(j,q),D(Q)}function q(){typeof A.removeListener=="function"&&A.removeListener("error",I),R([].slice.call(arguments))}E(A,j,q,{once:!0}),j!=="error"&&N(A,I,{once:!0})})}function N(A,j,R){typeof A.on=="function"&&E(A,"error",j,R)}function E(A,j,R,D){if(typeof A.on=="function")D.once?A.once(j,R):A.on(j,R);else if(typeof A.addEventListener=="function")A.addEventListener(j,function I(q){D.once&&A.removeEventListener(j,I),R(q)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof A)}return qu.exports}var q2=P2();const H2=Wd(q2),Yt=new H2,rE="https://gsyznlwsezhwerypyzbe.supabase.co",V2="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImdzeXpubHdzZXpod2VyeXB5emJlIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQ2MTYwMzYsImV4cCI6MjA4MDE5MjAzNn0.vLLiGKSTADkaOsUX8386m2MFIJl1Gx-EB4gQLLOAZGA",bi=rE+"/storage/v1/object/public/embodys/",Re=z2(rE,V2);var di={},Ca={},tp={},el={},G_;function sE(){return G_||(G_=1,(function(t){var e=el&&el.__awaiter||function(a,l,c,d){function f(h){return h instanceof c?h:new c(function(g){g(h)})}return new(c||(c=Promise))(function(h,g){function p(x){try{_(d.next(x))}catch(w){g(w)}}function v(x){try{_(d.throw(x))}catch(w){g(w)}}function _(x){x.done?h(x.value):f(x.value).then(p,v)}_((d=d.apply(a,l||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.TARGET_URL_HEADER=void 0,t.withMiddleware=n,t.withProxy=s;function n(...a){const l=c=>typeof c=="function";return c=>e(this,void 0,void 0,function*(){let d=Object.assign({},c);for(const f of a.filter(l))d=yield f(d);return d})}t.TARGET_URL_HEADER="x-fal-target-url";function s(a){const l=c=>Promise.resolve(c);return typeof window>"u"?l:c=>c.headers&&t.TARGET_URL_HEADER in c?l(c):Promise.resolve(Object.assign(Object.assign({},c),{url:a.targetUrl,headers:Object.assign(Object.assign({},c.headers||{}),{[t.TARGET_URL_HEADER]:c.url})}))}})(el)),el}var Kn={},X_;function Ri(){if(X_)return Kn;X_=1;var t=Kn&&Kn.__awaiter||function(c,d,f,h){function g(p){return p instanceof f?p:new f(function(v){v(p)})}return new(f||(f=Promise))(function(p,v){function _(S){try{w(h.next(S))}catch(C){v(C)}}function x(S){try{w(h.throw(S))}catch(C){v(C)}}function w(S){S.done?p(S.value):g(S.value).then(_,x)}w((h=h.apply(c,d||[])).next())})};Object.defineProperty(Kn,"__esModule",{value:!0}),Kn.ValidationError=Kn.ApiError=void 0,Kn.defaultResponseHandler=a,Kn.resultResponseHandler=l;const e="x-fal-request-id";class n extends Error{constructor({message:d,status:f,body:h,requestId:g}){super(d),this.name="ApiError",this.status=f,this.body=h,this.requestId=g||""}}Kn.ApiError=n;class s extends n{constructor(d){super(d),this.name="ValidationError"}get fieldErrors(){return typeof this.body.detail=="string"?[{loc:["body"],msg:this.body.detail,type:"value_error"}]:this.body.detail||[]}getFieldErrors(d){return this.fieldErrors.filter(f=>f.loc[f.loc.length-1]===d)}}Kn.ValidationError=s;function a(c){return t(this,void 0,void 0,function*(){var d;const{status:f,statusText:h}=c,g=(d=c.headers.get("Content-Type"))!==null&&d!==void 0?d:"",p=c.headers.get(e)||void 0;if(!c.ok){if(g.includes("application/json")){const v=yield c.json(),_=f===422?s:n;throw new _({message:v.message||h,status:f,body:v,requestId:p})}throw new n({message:`HTTP ${f}: ${h}`,status:f,requestId:p})}return g.includes("application/json")?c.json():g.includes("text/html")?c.text():g.includes("application/octet-stream")?c.arrayBuffer():c.text()})}function l(c){return t(this,void 0,void 0,function*(){return{data:yield a(c),requestId:c.headers.get(e)||""}})}return Kn}var tl={},Pn={},K_;function ki(){if(K_)return Pn;K_=1;var t=Pn&&Pn.__awaiter||function(g,p,v,_){function x(w){return w instanceof v?w:new v(function(S){S(w)})}return new(v||(v=Promise))(function(w,S){function C(A){try{E(_.next(A))}catch(j){S(j)}}function N(A){try{E(_.throw(A))}catch(j){S(j)}}function E(A){A.done?w(A.value):x(A.value).then(C,N)}E((_=_.apply(g,p||[])).next())})};Object.defineProperty(Pn,"__esModule",{value:!0}),Pn.ensureEndpointIdFormat=e,Pn.parseEndpointId=s,Pn.isValidUrl=a,Pn.throttle=l,Pn.isReact=d,Pn.isPlainObject=f,Pn.sleep=h;function e(g){if(g.split("/").length>1)return g;const[,v,_]=/^([0-9]+)-([a-zA-Z0-9-]+)$/.exec(g)||[];if(v&&_)return`${v}/${_}`;throw new Error(`Invalid app id: ${g}. Must be in the format <appOwner>/<appId>`)}const n=["workflows","comfy"];function s(g){const v=e(g).split("/");return n.includes(v[0])?{owner:v[1],alias:v[2],path:v.slice(3).join("/")||void 0,namespace:v[0]}:{owner:v[0],alias:v[1],path:v.slice(2).join("/")||void 0}}function a(g){try{const{host:p}=new URL(g);return/(fal\.(ai|run))$/.test(p)}catch{return!1}}function l(g,p,v=!1){let _,x;return(...w)=>{!x&&v?(g(...w),x=Date.now()):(_&&clearTimeout(_),_=setTimeout(()=>{Date.now()-x>=p&&(g(...w),x=Date.now())},p-(Date.now()-x)))}}let c;function d(){if(c===void 0){const g=new Error().stack;c=!!g&&(g.includes("node_modules/react-dom/")||g.includes("node_modules/next/"))}return c}function f(g){return!!g&&Object.getPrototypeOf(g)===Object.prototype}function h(g){return t(this,void 0,void 0,function*(){return new Promise(p=>setTimeout(p,g))})}return Pn}var Q_;function nf(){return Q_||(Q_=1,(function(t){var e=tl&&tl.__awaiter||function(d,f,h,g){function p(v){return v instanceof h?v:new h(function(_){_(v)})}return new(h||(h=Promise))(function(v,_){function x(C){try{S(g.next(C))}catch(N){_(N)}}function w(C){try{S(g.throw(C))}catch(N){_(N)}}function S(C){C.done?v(C.value):p(C.value).then(x,w)}S((g=g.apply(d,f||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_RETRY_OPTIONS=t.DEFAULT_RETRYABLE_STATUS_CODES=void 0,t.isRetryableError=a,t.calculateBackoffDelay=l,t.executeWithRetry=c;const n=Ri(),s=ki();t.DEFAULT_RETRYABLE_STATUS_CODES=[429,502,503,504],t.DEFAULT_RETRY_OPTIONS={maxRetries:3,baseDelay:1e3,maxDelay:3e4,backoffMultiplier:2,retryableStatusCodes:t.DEFAULT_RETRYABLE_STATUS_CODES,enableJitter:!0};function a(d,f){return d instanceof n.ApiError&&f.includes(d.status)}function l(d,f,h,g,p){const v=Math.min(f*Math.pow(g,d),h);if(p){const _=.25*v*(Math.random()*2-1);return Math.max(0,v+_)}return v}function c(d,f,h){return e(this,void 0,void 0,function*(){const g={totalAttempts:0,totalDelay:0};let p;for(let v=0;v<=f.maxRetries;v++){g.totalAttempts++;try{return{result:yield d(),metrics:g}}catch(_){if(p=_,g.lastError=_,v===f.maxRetries||!a(_,f.retryableStatusCodes))throw _;const x=l(v,f.baseDelay,f.maxDelay,f.backoffMultiplier,f.enableJitter);g.totalDelay+=x,h&&h(v+1,_,x),yield(0,s.sleep)(x)}}throw p})}})(tl)),tl}var nl={};const F2="@fal-ai/client",Y2="1.7.2",G2={name:F2,version:Y2};var W_;function Og(){if(W_)return nl;W_=1,Object.defineProperty(nl,"__esModule",{value:!0}),nl.isBrowser=t,nl.getUserAgent=n;function t(){return typeof window<"u"&&typeof window.document<"u"}let e=null;function n(){if(e!==null)return e;const s=G2;return e=`${s.name}/${s.version}`,e}return nl}var J_;function jg(){return J_||(J_=1,(function(t){var e={};Object.defineProperty(t,"__esModule",{value:!0}),t.credentialsFromEnv=void 0,t.resolveDefaultFetch=c,t.createConfig=g,t.getRestApiUrl=p;const n=sE(),s=Ri(),a=nf(),l=Og();function c(){if(typeof fetch>"u")throw new Error("Your environment does not support fetch. Please provide your own fetch implementation.");return fetch}function d(){return typeof process<"u"&&e&&(typeof e.FAL_KEY<"u"||typeof e.FAL_KEY_ID<"u"&&typeof e.FAL_KEY_SECRET<"u")}const f=()=>{if(d())return typeof e.FAL_KEY<"u"?e.FAL_KEY:e.FAL_KEY_ID?`${e.FAL_KEY_ID}:${e.FAL_KEY_SECRET}`:void 0};t.credentialsFromEnv=f;const h={credentials:t.credentialsFromEnv,suppressLocalCredentialsWarning:!1,requestMiddleware:v=>Promise.resolve(v),responseHandler:s.defaultResponseHandler,retry:a.DEFAULT_RETRY_OPTIONS};function g(v){var _;let x=Object.assign(Object.assign(Object.assign({},h),v),{fetch:(_=v.fetch)!==null&&_!==void 0?_:c(),retry:Object.assign(Object.assign({},a.DEFAULT_RETRY_OPTIONS),v.retry||{})});v.proxyUrl&&(x=Object.assign(Object.assign({},x),{requestMiddleware:(0,n.withMiddleware)(x.requestMiddleware,(0,n.withProxy)({targetUrl:v.proxyUrl}))}));const{credentials:w,suppressLocalCredentialsWarning:S}=x,C=typeof w=="function"?w():w;return(0,l.isBrowser)()&&C&&!S&&console.warn("The fal credentials are exposed in the browser's environment. That's not recommended for production use cases."),x}function p(){return"https://rest.alpha.fal.ai"}})(tp)),tp}var Pr={},qr={},Z_;function Zl(){if(Z_)return qr;Z_=1;var t=qr&&qr.__awaiter||function(f,h,g,p){function v(_){return _ instanceof g?_:new g(function(x){x(_)})}return new(g||(g=Promise))(function(_,x){function w(N){try{C(p.next(N))}catch(E){x(E)}}function S(N){try{C(p.throw(N))}catch(E){x(E)}}function C(N){N.done?_(N.value):v(N.value).then(w,S)}C((p=p.apply(f,h||[])).next())})},e=qr&&qr.__rest||function(f,h){var g={};for(var p in f)Object.prototype.hasOwnProperty.call(f,p)&&h.indexOf(p)<0&&(g[p]=f[p]);if(f!=null&&typeof Object.getOwnPropertySymbols=="function")for(var v=0,p=Object.getOwnPropertySymbols(f);v<p.length;v++)h.indexOf(p[v])<0&&Object.prototype.propertyIsEnumerable.call(f,p[v])&&(g[p[v]]=f[p[v]]);return g};Object.defineProperty(qr,"__esModule",{value:!0}),qr.dispatchRequest=c,qr.buildUrl=d;const n=nf(),s=Og(),a=ki(),l=typeof navigator<"u"&&navigator?.userAgent==="Cloudflare-Workers";function c(f){return t(this,void 0,void 0,function*(){var h;const{targetUrl:g,input:p,config:v,options:_={}}=f,{credentials:x,requestMiddleware:w,responseHandler:S,fetch:C}=v,N=Object.assign(Object.assign({},v.retry),_.retry||{}),E=()=>t(this,void 0,void 0,function*(){var j,R,D;const I=(0,s.isBrowser)()?{}:{"User-Agent":(0,s.getUserAgent)()},q=typeof x=="function"?x():x,{method:Q,url:G,headers:L}=yield w({method:((R=(j=f.method)!==null&&j!==void 0?j:_.method)!==null&&R!==void 0?R:"post").toUpperCase(),url:g,headers:f.headers}),X=q?{Authorization:`Key ${q}`}:{},$=Object.assign(Object.assign(Object.assign(Object.assign({},X),{Accept:"application/json","Content-Type":"application/json"}),I),L??{}),{responseHandler:F,retry:M}=_,z=e(_,["responseHandler","retry"]),H=yield C(G,Object.assign(Object.assign(Object.assign(Object.assign({},z),{method:Q,headers:Object.assign(Object.assign({},$),(D=z.headers)!==null&&D!==void 0?D:{})}),!l&&{mode:"cors"}),{signal:_.signal,body:Q.toLowerCase()!=="get"&&p?JSON.stringify(p):void 0}));return yield(F??S)(H)});let A;for(let j=0;j<=N.maxRetries;j++)try{return yield E()}catch(R){if(A=R,j===N.maxRetries||!(0,n.isRetryableError)(R,N.retryableStatusCodes)||((h=_.signal)===null||h===void 0?void 0:h.aborted))throw R;const I=(0,n.calculateBackoffDelay)(j,N.baseDelay,N.maxDelay,N.backoffMultiplier,N.enableJitter);yield(0,a.sleep)(I)}throw A})}function d(f,h={}){var g,p;const v=((g=h.method)!==null&&g!==void 0?g:"post").toLowerCase(),_=((p=h.path)!==null&&p!==void 0?p:"").replace(/^\//,"").replace(/\/{2,}/,"/"),x=h.input,w=Object.assign(Object.assign({},h.query||{}),v==="get"?x:{}),S=Object.keys(w).length>0?`?${new URLSearchParams(w).toString()}`:"";if((0,a.isValidUrl)(f))return`${f.endsWith("/")?f:`${f}/`}${_}${S}`;const C=(0,a.ensureEndpointIdFormat)(f);return`${`https://${h.subdomain?`${h.subdomain}.`:""}fal.run/${C}/${_}`.replace(/\/$/,"")}${S}`}return qr}var qn={},Hu={},ew;function X2(){if(ew)return Hu;ew=1,Object.defineProperty(Hu,"__esModule",{value:!0});function t(s){let a,l,c,d,f,h,g;return p(),{feed:v,reset:p};function p(){a=!0,l="",c=0,d=-1,f=void 0,h=void 0,g=""}function v(x){l=l?l+x:x,a&&n(l)&&(l=l.slice(e.length)),a=!1;const w=l.length;let S=0,C=!1;for(;S<w;){C&&(l[S]===`
`&&++S,C=!1);let N=-1,E=d,A;for(let j=c;N<0&&j<w;++j)A=l[j],A===":"&&E<0?E=j-S:A==="\r"?(C=!0,N=j-S):A===`
`&&(N=j-S);if(N<0){c=w-S,d=E;break}else c=0,d=-1;_(l,S,E,N),S+=N+1}S===w?l="":S>0&&(l=l.slice(S))}function _(x,w,S,C){if(C===0){g.length>0&&(s({type:"event",id:f,event:h||void 0,data:g.slice(0,-1)}),g="",f=void 0),h=void 0;return}const N=S<0,E=x.slice(w,w+(N?C:S));let A=0;N?A=C:x[w+S+1]===" "?A=S+2:A=S+1;const j=w+A,R=C-A,D=x.slice(j,j+R).toString();if(E==="data")g+=D?"".concat(D,`
`):`
`;else if(E==="event")h=D;else if(E==="id"&&!D.includes("\0"))f=D;else if(E==="retry"){const I=parseInt(D,10);Number.isNaN(I)||s({type:"reconnect-interval",value:I})}}}const e=[239,187,191];function n(s){return e.every((a,l)=>s.charCodeAt(l)===a)}return Hu.createParser=t,Hu}var rl={},tw;function iE(){return tw||(tw=1,(function(t){var e=rl&&rl.__awaiter||function(c,d,f,h){function g(p){return p instanceof f?p:new f(function(v){v(p)})}return new(f||(f=Promise))(function(p,v){function _(S){try{w(h.next(S))}catch(C){v(C)}}function x(S){try{w(h.throw(S))}catch(C){v(C)}}function w(S){S.done?p(S.value):g(S.value).then(_,x)}w((h=h.apply(c,d||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.TOKEN_EXPIRATION_SECONDS=void 0,t.getTemporaryAuthToken=l;const n=jg(),s=Zl(),a=ki();t.TOKEN_EXPIRATION_SECONDS=120;function l(c,d){return e(this,void 0,void 0,function*(){const f=(0,a.parseEndpointId)(c),h=yield(0,s.dispatchRequest)({method:"POST",targetUrl:`${(0,n.getRestApiUrl)()}/tokens/`,config:d,input:{allowed_apps:[f.alias],token_expiration:t.TOKEN_EXPIRATION_SECONDS}});return typeof h!="string"&&h.detail?h.detail:h})}})(rl)),rl}var nw;function aE(){if(nw)return qn;nw=1;var t=qn&&qn.__awaiter||function(p,v,_,x){function w(S){return S instanceof _?S:new _(function(C){C(S)})}return new(_||(_=Promise))(function(S,C){function N(j){try{A(x.next(j))}catch(R){C(R)}}function E(j){try{A(x.throw(j))}catch(R){C(R)}}function A(j){j.done?S(j.value):w(j.value).then(N,E)}A((x=x.apply(p,v||[])).next())})},e=qn&&qn.__await||function(p){return this instanceof e?(this.v=p,this):new e(p)},n=qn&&qn.__asyncGenerator||function(p,v,_){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var x=_.apply(p,v||[]),w,S=[];return w={},N("next"),N("throw"),N("return",C),w[Symbol.asyncIterator]=function(){return this},w;function C(I){return function(q){return Promise.resolve(q).then(I,R)}}function N(I,q){x[I]&&(w[I]=function(Q){return new Promise(function(G,L){S.push([I,Q,G,L])>1||E(I,Q)})},q&&(w[I]=q(w[I])))}function E(I,q){try{A(x[I](q))}catch(Q){D(S[0][3],Q)}}function A(I){I.value instanceof e?Promise.resolve(I.value.v).then(j,R):D(S[0][2],I)}function j(I){E("next",I)}function R(I){E("throw",I)}function D(I,q){I(q),S.shift(),S.length&&E(S[0][0],S[0][1])}};Object.defineProperty(qn,"__esModule",{value:!0}),qn.FalStream=void 0,qn.createStreamingClient=g;const s=X2(),a=iE(),l=Zl(),c=Ri(),d="text/event-stream",f=15*1e3;class h{constructor(v,_,x){var w;this.listeners=new Map,this.buffer=[],this.currentData=void 0,this.lastEventTimestamp=0,this.streamClosed=!1,this._requestId=null,this.abortController=new AbortController,this.start=()=>t(this,void 0,void 0,function*(){var S,C;const{endpointId:N,options:E}=this,{input:A,method:j="post",connectionMode:R="server"}=E;try{if(R==="client"){const D=yield(0,a.getTemporaryAuthToken)(N,this.config),{fetch:I}=this.config,q=new URL(this.url);q.searchParams.set("fal_jwt_token",D);const Q=yield I(q.toString(),{method:j.toUpperCase(),headers:{accept:(S=E.accept)!==null&&S!==void 0?S:d,"content-type":"application/json"},body:A&&j!=="get"?JSON.stringify(A):void 0,signal:this.abortController.signal});return this._requestId=Q.headers.get("x-fal-request-id"),yield this.handleResponse(Q)}return yield(0,l.dispatchRequest)({method:j.toUpperCase(),targetUrl:this.url,input:A,config:this.config,options:{headers:{accept:(C=E.accept)!==null&&C!==void 0?C:d},responseHandler:D=>t(this,void 0,void 0,function*(){return this._requestId=D.headers.get("x-fal-request-id"),yield this.handleResponse(D)}),signal:this.abortController.signal}})}catch(D){this.handleError(D)}}),this.handleResponse=S=>t(this,void 0,void 0,function*(){var C,N;if(!S.ok){try{yield(0,c.defaultResponseHandler)(S)}catch(Q){this.emit("error",Q)}return}const E=S.body;if(!E){this.emit("error",new c.ApiError({message:"Response body is empty.",status:400,body:void 0,requestId:this._requestId||void 0}));return}if(!((C=S.headers.get("content-type"))!==null&&C!==void 0?C:"").startsWith(d)){const Q=E.getReader(),G=()=>{Q.read().then(({done:L,value:X})=>{if(L){this.emit("done",this.currentData);return}this.currentData=X,this.emit("data",X),G()})};G();return}const j=new TextDecoder("utf-8"),R=S.body.getReader(),D=(0,s.createParser)(Q=>{if(Q.type==="event"){const G=Q.data;try{const L=JSON.parse(G);this.buffer.push(L),this.currentData=L,this.emit("data",L),this.emit("message",L)}catch(L){this.emit("error",L)}}}),I=(N=this.options.timeout)!==null&&N!==void 0?N:f,q=()=>t(this,void 0,void 0,function*(){const{value:Q,done:G}=yield R.read();this.lastEventTimestamp=Date.now(),D.feed(j.decode(Q)),Date.now()-this.lastEventTimestamp>I&&this.emit("error",new c.ApiError({message:`Event stream timed out after ${(I/1e3).toFixed(0)} seconds with no messages.`,status:408,requestId:this._requestId||void 0})),G?this.emit("done",this.currentData):q().catch(this.handleError)});q().catch(this.handleError)}),this.handleError=S=>{var C;if(S.name==="AbortError"||this.signal.aborted)return;const N=S instanceof c.ApiError?S:new c.ApiError({message:(C=S.message)!==null&&C!==void 0?C:"An unknown error occurred",status:500,requestId:this._requestId||void 0});this.emit("error",N)},this.on=(S,C)=>{var N;this.listeners.has(S)||this.listeners.set(S,[]),(N=this.listeners.get(S))===null||N===void 0||N.push(C)},this.emit=(S,C)=>{const N=this.listeners.get(S)||[];for(const E of N)E(C)},this.done=()=>t(this,void 0,void 0,function*(){return this.donePromise}),this.abort=S=>{this.streamClosed||this.abortController.abort(S)},this.endpointId=v,this.config=_,this.url=(w=x.url)!==null&&w!==void 0?w:(0,l.buildUrl)(v,{path:"/stream",query:x.queryParams}),this.options=x,this.donePromise=new Promise((S,C)=>{this.streamClosed&&C(new c.ApiError({message:"Streaming connection is already closed.",status:400,body:void 0,requestId:this._requestId||void 0})),this.signal.addEventListener("abort",()=>{var N;S((N=this.currentData)!==null&&N!==void 0?N:{})}),this.on("done",N=>{this.streamClosed=!0,S(N)}),this.on("error",N=>{this.streamClosed=!0,C(N)})}),x.signal&&x.signal.addEventListener("abort",()=>{this.abortController.abort()}),this.start().catch(this.handleError)}[Symbol.asyncIterator](){return n(this,arguments,function*(){let _=!0;const x=()=>_=!1;for(this.on("error",x),this.on("done",x);_||this.buffer.length>0;){const w=this.buffer.shift();w&&(yield yield e(w)),yield e(new Promise(S=>setTimeout(S,16)))}})}get signal(){return this.abortController.signal}get requestId(){return this._requestId}}qn.FalStream=h;function g({config:p,storage:v}){return{stream(_,x){return t(this,void 0,void 0,function*(){const w=x.input?yield v.transformInput(x.input):void 0;return new h(_,p,Object.assign(Object.assign({},x),{input:w}))})}}}return qn}var rw;function K2(){if(rw)return Pr;rw=1;var t=Pr&&Pr.__awaiter||function(p,v,_,x){function w(S){return S instanceof _?S:new _(function(C){C(S)})}return new(_||(_=Promise))(function(S,C){function N(j){try{A(x.next(j))}catch(R){C(R)}}function E(j){try{A(x.throw(j))}catch(R){C(R)}}function A(j){j.done?S(j.value):w(j.value).then(N,E)}A((x=x.apply(p,v||[])).next())})},e=Pr&&Pr.__rest||function(p,v){var _={};for(var x in p)Object.prototype.hasOwnProperty.call(p,x)&&v.indexOf(x)<0&&(_[x]=p[x]);if(p!=null&&typeof Object.getOwnPropertySymbols=="function")for(var w=0,x=Object.getOwnPropertySymbols(p);w<x.length;w++)v.indexOf(x[w])<0&&Object.prototype.propertyIsEnumerable.call(p,x[w])&&(_[x[w]]=p[x[w]]);return _};Object.defineProperty(Pr,"__esModule",{value:!0}),Pr.createQueueClient=void 0;const n=Zl(),s=Ri(),a=nf(),l=aE(),c=ki(),d=500,f={maxRetries:3,baseDelay:1e3,maxDelay:6e4,retryableStatusCodes:a.DEFAULT_RETRYABLE_STATUS_CODES},h={maxRetries:5,baseDelay:1e3,maxDelay:3e4,retryableStatusCodes:[...a.DEFAULT_RETRYABLE_STATUS_CODES,500]},g=({config:p,storage:v})=>{const _={submit(x,w){return t(this,void 0,void 0,function*(){const{webhookUrl:S,priority:C,hint:N}=w,E=e(w,["webhookUrl","priority","hint"]),A=w.input?yield v.transformInput(w.input):void 0;return(0,n.dispatchRequest)({method:w.method,targetUrl:(0,n.buildUrl)(x,Object.assign(Object.assign({},E),{subdomain:"queue",query:S?{fal_webhook:S}:void 0})),headers:Object.assign({"x-fal-queue-priority":C??"normal"},N&&{"x-fal-runner-hint":N}),input:A,config:p,options:{signal:w.abortSignal,retry:f}})})},status(x,w){return t(this,arguments,void 0,function*(S,{requestId:C,logs:N=!1,abortSignal:E}){const A=(0,c.parseEndpointId)(S),j=A.namespace?`${A.namespace}/`:"";return(0,n.dispatchRequest)({method:"get",targetUrl:(0,n.buildUrl)(`${j}${A.owner}/${A.alias}`,{subdomain:"queue",query:{logs:N?"1":"0"},path:`/requests/${C}/status`}),config:p,options:{signal:E,retry:h}})})},streamStatus(x,w){return t(this,arguments,void 0,function*(S,{requestId:C,logs:N=!1,connectionMode:E}){const A=(0,c.parseEndpointId)(S),j=A.namespace?`${A.namespace}/`:"",R={logs:N?"1":"0"},D=(0,n.buildUrl)(`${j}${A.owner}/${A.alias}`,{subdomain:"queue",path:`/requests/${C}/status/stream`,query:R});return new l.FalStream(S,p,{url:D,method:"get",connectionMode:E,queryParams:R})})},subscribeToStatus(x,w){return t(this,void 0,void 0,function*(){const S=w.requestId,C=w.timeout;let N;const E=()=>{};if(w.mode==="streaming"){const A=yield _.streamStatus(x,{requestId:S,logs:w.logs,connectionMode:"connectionMode"in w?w.connectionMode:void 0}),j=[];C&&(N=setTimeout(()=>{throw A.abort(),_.cancel(x,{requestId:S}).catch(E),new Error(`Client timed out waiting for the request to complete after ${C}ms`)},C)),A.on("data",D=>{w.onQueueUpdate&&("logs"in D&&Array.isArray(D.logs)&&D.logs.length>0&&j.push(...D.logs),w.onQueueUpdate("logs"in D?Object.assign(Object.assign({},D),{logs:j}):D))});const R=yield A.done();return N&&clearTimeout(N),R}return new Promise((A,j)=>{var R;let D;const I="pollInterval"in w&&typeof w.pollInterval=="number"&&(R=w.pollInterval)!==null&&R!==void 0?R:d,q=()=>{N&&clearTimeout(N),D&&clearTimeout(D)};C&&(N=setTimeout(()=>{q(),_.cancel(x,{requestId:S}).catch(E),j(new Error(`Client timed out waiting for the request to complete after ${C}ms`))},C));const Q=()=>t(this,void 0,void 0,function*(){var G;try{const L=yield _.status(x,{requestId:S,logs:(G=w.logs)!==null&&G!==void 0?G:!1,abortSignal:w.abortSignal});if(w.onQueueUpdate&&w.onQueueUpdate(L),L.status==="COMPLETED"){q(),A(L);return}D=setTimeout(Q,I)}catch(L){q(),j(L)}});Q().catch(j)})})},result(x,w){return t(this,arguments,void 0,function*(S,{requestId:C,abortSignal:N}){const E=(0,c.parseEndpointId)(S),A=E.namespace?`${E.namespace}/`:"";return(0,n.dispatchRequest)({method:"get",targetUrl:(0,n.buildUrl)(`${A}${E.owner}/${E.alias}`,{subdomain:"queue",path:`/requests/${C}`}),config:Object.assign(Object.assign({},p),{responseHandler:s.resultResponseHandler}),options:{signal:N,retry:f}})})},cancel(x,w){return t(this,arguments,void 0,function*(S,{requestId:C,abortSignal:N}){const E=(0,c.parseEndpointId)(S),A=E.namespace?`${E.namespace}/`:"";yield(0,n.dispatchRequest)({method:"put",targetUrl:(0,n.buildUrl)(`${A}${E.owner}/${E.alias}`,{subdomain:"queue",path:`/requests/${C}/cancel`}),config:p,options:{signal:N}})})}};return _};return Pr.createQueueClient=g,Pr}var Vu={};function Q2(t){const e=t.length;let n=0,s=0;for(;s<e;){let a=t.charCodeAt(s++);if((a&4294967168)===0){n++;continue}else if((a&4294965248)===0)n+=2;else{if(a>=55296&&a<=56319&&s<e){const l=t.charCodeAt(s);(l&64512)===56320&&(++s,a=((a&1023)<<10)+(l&1023)+65536)}(a&4294901760)===0?n+=3:n+=4}}return n}function W2(t,e,n){const s=t.length;let a=n,l=0;for(;l<s;){let c=t.charCodeAt(l++);if((c&4294967168)===0){e[a++]=c;continue}else if((c&4294965248)===0)e[a++]=c>>6&31|192;else{if(c>=55296&&c<=56319&&l<s){const d=t.charCodeAt(l);(d&64512)===56320&&(++l,c=((c&1023)<<10)+(d&1023)+65536)}(c&4294901760)===0?(e[a++]=c>>12&15|224,e[a++]=c>>6&63|128):(e[a++]=c>>18&7|240,e[a++]=c>>12&63|128,e[a++]=c>>6&63|128)}e[a++]=c&63|128}}const J2=new TextEncoder,Z2=50;function ek(t,e,n){J2.encodeInto(t,e.subarray(n))}function tk(t,e,n){t.length>Z2?ek(t,e,n):W2(t,e,n)}const nk=4096;function oE(t,e,n){let s=e;const a=s+n,l=[];let c="";for(;s<a;){const d=t[s++];if((d&128)===0)l.push(d);else if((d&224)===192){const f=t[s++]&63;l.push((d&31)<<6|f)}else if((d&240)===224){const f=t[s++]&63,h=t[s++]&63;l.push((d&31)<<12|f<<6|h)}else if((d&248)===240){const f=t[s++]&63,h=t[s++]&63,g=t[s++]&63;let p=(d&7)<<18|f<<12|h<<6|g;p>65535&&(p-=65536,l.push(p>>>10&1023|55296),p=56320|p&1023),l.push(p)}else l.push(d);l.length>=nk&&(c+=String.fromCharCode(...l),l.length=0)}return l.length>0&&(c+=String.fromCharCode(...l)),c}const rk=new TextDecoder,sk=200;function ik(t,e,n){const s=t.subarray(e,e+n);return rk.decode(s)}function ak(t,e,n){return n>sk?ik(t,e,n):oE(t,e,n)}class dl{constructor(e,n){this.type=e,this.data=n}}class dn extends Error{constructor(e){super(e);const n=Object.create(dn.prototype);Object.setPrototypeOf(this,n),Object.defineProperty(this,"name",{configurable:!0,enumerable:!1,value:dn.name})}}const sl=4294967295;function ok(t,e,n){const s=n/4294967296,a=n;t.setUint32(e,s),t.setUint32(e+4,a)}function lE(t,e,n){const s=Math.floor(n/4294967296),a=n;t.setUint32(e,s),t.setUint32(e+4,a)}function cE(t,e){const n=t.getInt32(e),s=t.getUint32(e+4);return n*4294967296+s}function lk(t,e){const n=t.getUint32(e),s=t.getUint32(e+4);return n*4294967296+s}const uE=-1,ck=4294967296-1,uk=17179869184-1;function dE({sec:t,nsec:e}){if(t>=0&&e>=0&&t<=uk)if(e===0&&t<=ck){const n=new Uint8Array(4);return new DataView(n.buffer).setUint32(0,t),n}else{const n=t/4294967296,s=t&4294967295,a=new Uint8Array(8),l=new DataView(a.buffer);return l.setUint32(0,e<<2|n&3),l.setUint32(4,s),a}else{const n=new Uint8Array(12),s=new DataView(n.buffer);return s.setUint32(0,e),lE(s,4,t),n}}function fE(t){const e=t.getTime(),n=Math.floor(e/1e3),s=(e-n*1e3)*1e6,a=Math.floor(s/1e9);return{sec:n+a,nsec:s-a*1e9}}function hE(t){if(t instanceof Date){const e=fE(t);return dE(e)}else return null}function mE(t){const e=new DataView(t.buffer,t.byteOffset,t.byteLength);switch(t.byteLength){case 4:return{sec:e.getUint32(0),nsec:0};case 8:{const n=e.getUint32(0),s=e.getUint32(4),a=(n&3)*4294967296+s,l=n>>>2;return{sec:a,nsec:l}}case 12:{const n=cE(e,4),s=e.getUint32(0);return{sec:n,nsec:s}}default:throw new dn(`Unrecognized data size for timestamp (expected 4, 8, or 12): ${t.length}`)}}function pE(t){const e=mE(t);return new Date(e.sec*1e3+e.nsec/1e6)}const dk={type:uE,encode:hE,decode:pE};class Il{constructor(){this.builtInEncoders=[],this.builtInDecoders=[],this.encoders=[],this.decoders=[],this.register(dk)}register({type:e,encode:n,decode:s}){if(e>=0)this.encoders[e]=n,this.decoders[e]=s;else{const a=-1-e;this.builtInEncoders[a]=n,this.builtInDecoders[a]=s}}tryToEncode(e,n){for(let s=0;s<this.builtInEncoders.length;s++){const a=this.builtInEncoders[s];if(a!=null){const l=a(e,n);if(l!=null){const c=-1-s;return new dl(c,l)}}}for(let s=0;s<this.encoders.length;s++){const a=this.encoders[s];if(a!=null){const l=a(e,n);if(l!=null){const c=s;return new dl(c,l)}}}return e instanceof dl?e:null}decode(e,n,s){const a=n<0?this.builtInDecoders[-1-n]:this.decoders[n];return a?a(e,n,s):new dl(n,e)}}Il.defaultCodec=new Il;function fk(t){return t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer}function zp(t){return t instanceof Uint8Array?t:ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):fk(t)?new Uint8Array(t):Uint8Array.from(t)}const hk=100,mk=2048;class rf{constructor(e){this.entered=!1,this.extensionCodec=e?.extensionCodec??Il.defaultCodec,this.context=e?.context,this.useBigInt64=e?.useBigInt64??!1,this.maxDepth=e?.maxDepth??hk,this.initialBufferSize=e?.initialBufferSize??mk,this.sortKeys=e?.sortKeys??!1,this.forceFloat32=e?.forceFloat32??!1,this.ignoreUndefined=e?.ignoreUndefined??!1,this.forceIntegerToFloat=e?.forceIntegerToFloat??!1,this.pos=0,this.view=new DataView(new ArrayBuffer(this.initialBufferSize)),this.bytes=new Uint8Array(this.view.buffer)}clone(){return new rf({extensionCodec:this.extensionCodec,context:this.context,useBigInt64:this.useBigInt64,maxDepth:this.maxDepth,initialBufferSize:this.initialBufferSize,sortKeys:this.sortKeys,forceFloat32:this.forceFloat32,ignoreUndefined:this.ignoreUndefined,forceIntegerToFloat:this.forceIntegerToFloat})}reinitializeState(){this.pos=0}encodeSharedRef(e){if(this.entered)return this.clone().encodeSharedRef(e);try{return this.entered=!0,this.reinitializeState(),this.doEncode(e,1),this.bytes.subarray(0,this.pos)}finally{this.entered=!1}}encode(e){if(this.entered)return this.clone().encode(e);try{return this.entered=!0,this.reinitializeState(),this.doEncode(e,1),this.bytes.slice(0,this.pos)}finally{this.entered=!1}}doEncode(e,n){if(n>this.maxDepth)throw new Error(`Too deep objects in depth ${n}`);e==null?this.encodeNil():typeof e=="boolean"?this.encodeBoolean(e):typeof e=="number"?this.forceIntegerToFloat?this.encodeNumberAsFloat(e):this.encodeNumber(e):typeof e=="string"?this.encodeString(e):this.useBigInt64&&typeof e=="bigint"?this.encodeBigInt64(e):this.encodeObject(e,n)}ensureBufferSizeToWrite(e){const n=this.pos+e;this.view.byteLength<n&&this.resizeBuffer(n*2)}resizeBuffer(e){const n=new ArrayBuffer(e),s=new Uint8Array(n),a=new DataView(n);s.set(this.bytes),this.view=a,this.bytes=s}encodeNil(){this.writeU8(192)}encodeBoolean(e){e===!1?this.writeU8(194):this.writeU8(195)}encodeNumber(e){!this.forceIntegerToFloat&&Number.isSafeInteger(e)?e>=0?e<128?this.writeU8(e):e<256?(this.writeU8(204),this.writeU8(e)):e<65536?(this.writeU8(205),this.writeU16(e)):e<4294967296?(this.writeU8(206),this.writeU32(e)):this.useBigInt64?this.encodeNumberAsFloat(e):(this.writeU8(207),this.writeU64(e)):e>=-32?this.writeU8(224|e+32):e>=-128?(this.writeU8(208),this.writeI8(e)):e>=-32768?(this.writeU8(209),this.writeI16(e)):e>=-2147483648?(this.writeU8(210),this.writeI32(e)):this.useBigInt64?this.encodeNumberAsFloat(e):(this.writeU8(211),this.writeI64(e)):this.encodeNumberAsFloat(e)}encodeNumberAsFloat(e){this.forceFloat32?(this.writeU8(202),this.writeF32(e)):(this.writeU8(203),this.writeF64(e))}encodeBigInt64(e){e>=BigInt(0)?(this.writeU8(207),this.writeBigUint64(e)):(this.writeU8(211),this.writeBigInt64(e))}writeStringHeader(e){if(e<32)this.writeU8(160+e);else if(e<256)this.writeU8(217),this.writeU8(e);else if(e<65536)this.writeU8(218),this.writeU16(e);else if(e<4294967296)this.writeU8(219),this.writeU32(e);else throw new Error(`Too long string: ${e} bytes in UTF-8`)}encodeString(e){const s=Q2(e);this.ensureBufferSizeToWrite(5+s),this.writeStringHeader(s),tk(e,this.bytes,this.pos),this.pos+=s}encodeObject(e,n){const s=this.extensionCodec.tryToEncode(e,this.context);if(s!=null)this.encodeExtension(s);else if(Array.isArray(e))this.encodeArray(e,n);else if(ArrayBuffer.isView(e))this.encodeBinary(e);else if(typeof e=="object")this.encodeMap(e,n);else throw new Error(`Unrecognized object: ${Object.prototype.toString.apply(e)}`)}encodeBinary(e){const n=e.byteLength;if(n<256)this.writeU8(196),this.writeU8(n);else if(n<65536)this.writeU8(197),this.writeU16(n);else if(n<4294967296)this.writeU8(198),this.writeU32(n);else throw new Error(`Too large binary: ${n}`);const s=zp(e);this.writeU8a(s)}encodeArray(e,n){const s=e.length;if(s<16)this.writeU8(144+s);else if(s<65536)this.writeU8(220),this.writeU16(s);else if(s<4294967296)this.writeU8(221),this.writeU32(s);else throw new Error(`Too large array: ${s}`);for(const a of e)this.doEncode(a,n+1)}countWithoutUndefined(e,n){let s=0;for(const a of n)e[a]!==void 0&&s++;return s}encodeMap(e,n){const s=Object.keys(e);this.sortKeys&&s.sort();const a=this.ignoreUndefined?this.countWithoutUndefined(e,s):s.length;if(a<16)this.writeU8(128+a);else if(a<65536)this.writeU8(222),this.writeU16(a);else if(a<4294967296)this.writeU8(223),this.writeU32(a);else throw new Error(`Too large map object: ${a}`);for(const l of s){const c=e[l];this.ignoreUndefined&&c===void 0||(this.encodeString(l),this.doEncode(c,n+1))}}encodeExtension(e){if(typeof e.data=="function"){const s=e.data(this.pos+6),a=s.length;if(a>=4294967296)throw new Error(`Too large extension object: ${a}`);this.writeU8(201),this.writeU32(a),this.writeI8(e.type),this.writeU8a(s);return}const n=e.data.length;if(n===1)this.writeU8(212);else if(n===2)this.writeU8(213);else if(n===4)this.writeU8(214);else if(n===8)this.writeU8(215);else if(n===16)this.writeU8(216);else if(n<256)this.writeU8(199),this.writeU8(n);else if(n<65536)this.writeU8(200),this.writeU16(n);else if(n<4294967296)this.writeU8(201),this.writeU32(n);else throw new Error(`Too large extension object: ${n}`);this.writeI8(e.type),this.writeU8a(e.data)}writeU8(e){this.ensureBufferSizeToWrite(1),this.view.setUint8(this.pos,e),this.pos++}writeU8a(e){const n=e.length;this.ensureBufferSizeToWrite(n),this.bytes.set(e,this.pos),this.pos+=n}writeI8(e){this.ensureBufferSizeToWrite(1),this.view.setInt8(this.pos,e),this.pos++}writeU16(e){this.ensureBufferSizeToWrite(2),this.view.setUint16(this.pos,e),this.pos+=2}writeI16(e){this.ensureBufferSizeToWrite(2),this.view.setInt16(this.pos,e),this.pos+=2}writeU32(e){this.ensureBufferSizeToWrite(4),this.view.setUint32(this.pos,e),this.pos+=4}writeI32(e){this.ensureBufferSizeToWrite(4),this.view.setInt32(this.pos,e),this.pos+=4}writeF32(e){this.ensureBufferSizeToWrite(4),this.view.setFloat32(this.pos,e),this.pos+=4}writeF64(e){this.ensureBufferSizeToWrite(8),this.view.setFloat64(this.pos,e),this.pos+=8}writeU64(e){this.ensureBufferSizeToWrite(8),ok(this.view,this.pos,e),this.pos+=8}writeI64(e){this.ensureBufferSizeToWrite(8),lE(this.view,this.pos,e),this.pos+=8}writeBigUint64(e){this.ensureBufferSizeToWrite(8),this.view.setBigUint64(this.pos,e),this.pos+=8}writeBigInt64(e){this.ensureBufferSizeToWrite(8),this.view.setBigInt64(this.pos,e),this.pos+=8}}function pk(t,e){return new rf(e).encodeSharedRef(t)}function np(t){return`${t<0?"-":""}0x${Math.abs(t).toString(16).padStart(2,"0")}`}const gk=16,yk=16;class vk{constructor(e=gk,n=yk){this.hit=0,this.miss=0,this.maxKeyLength=e,this.maxLengthPerKey=n,this.caches=[];for(let s=0;s<this.maxKeyLength;s++)this.caches.push([])}canBeCached(e){return e>0&&e<=this.maxKeyLength}find(e,n,s){const a=this.caches[s-1];e:for(const l of a){const c=l.bytes;for(let d=0;d<s;d++)if(c[d]!==e[n+d])continue e;return l.str}return null}store(e,n){const s=this.caches[e.length-1],a={bytes:e,str:n};s.length>=this.maxLengthPerKey?s[Math.random()*s.length|0]=a:s.push(a)}decode(e,n,s){const a=this.find(e,n,s);if(a!=null)return this.hit++,a;this.miss++;const l=oE(e,n,s),c=Uint8Array.prototype.slice.call(e,n,n+s);return this.store(c,l),l}}const Bp="array",Al="map_key",gE="map_value",bk=t=>{if(typeof t=="string"||typeof t=="number")return t;throw new dn("The type of key must be string or number but "+typeof t)};class _k{constructor(){this.stack=[],this.stackHeadPosition=-1}get length(){return this.stackHeadPosition+1}top(){return this.stack[this.stackHeadPosition]}pushArrayState(e){const n=this.getUninitializedStateFromPool();n.type=Bp,n.position=0,n.size=e,n.array=new Array(e)}pushMapState(e){const n=this.getUninitializedStateFromPool();n.type=Al,n.readCount=0,n.size=e,n.map={}}getUninitializedStateFromPool(){if(this.stackHeadPosition++,this.stackHeadPosition===this.stack.length){const e={type:void 0,size:0,array:void 0,position:0,readCount:0,map:void 0,key:null};this.stack.push(e)}return this.stack[this.stackHeadPosition]}release(e){if(this.stack[this.stackHeadPosition]!==e)throw new Error("Invalid stack state. Released state is not on top of the stack.");if(e.type===Bp){const s=e;s.size=0,s.array=void 0,s.position=0,s.type=void 0}if(e.type===Al||e.type===gE){const s=e;s.size=0,s.map=void 0,s.readCount=0,s.type=void 0}this.stackHeadPosition--}reset(){this.stack.length=0,this.stackHeadPosition=-1}}const il=-1,Rg=new DataView(new ArrayBuffer(0)),wk=new Uint8Array(Rg.buffer);try{Rg.getInt8(0)}catch(t){if(!(t instanceof RangeError))throw new Error("This module is not supported in the current JavaScript engine because DataView does not throw RangeError on out-of-bounds access")}const sw=new RangeError("Insufficient data"),xk=new vk;class Hs{constructor(e){this.totalPos=0,this.pos=0,this.view=Rg,this.bytes=wk,this.headByte=il,this.stack=new _k,this.entered=!1,this.extensionCodec=e?.extensionCodec??Il.defaultCodec,this.context=e?.context,this.useBigInt64=e?.useBigInt64??!1,this.rawStrings=e?.rawStrings??!1,this.maxStrLength=e?.maxStrLength??sl,this.maxBinLength=e?.maxBinLength??sl,this.maxArrayLength=e?.maxArrayLength??sl,this.maxMapLength=e?.maxMapLength??sl,this.maxExtLength=e?.maxExtLength??sl,this.keyDecoder=e?.keyDecoder!==void 0?e.keyDecoder:xk,this.mapKeyConverter=e?.mapKeyConverter??bk}clone(){return new Hs({extensionCodec:this.extensionCodec,context:this.context,useBigInt64:this.useBigInt64,rawStrings:this.rawStrings,maxStrLength:this.maxStrLength,maxBinLength:this.maxBinLength,maxArrayLength:this.maxArrayLength,maxMapLength:this.maxMapLength,maxExtLength:this.maxExtLength,keyDecoder:this.keyDecoder})}reinitializeState(){this.totalPos=0,this.headByte=il,this.stack.reset()}setBuffer(e){const n=zp(e);this.bytes=n,this.view=new DataView(n.buffer,n.byteOffset,n.byteLength),this.pos=0}appendBuffer(e){if(this.headByte===il&&!this.hasRemaining(1))this.setBuffer(e);else{const n=this.bytes.subarray(this.pos),s=zp(e),a=new Uint8Array(n.length+s.length);a.set(n),a.set(s,n.length),this.setBuffer(a)}}hasRemaining(e){return this.view.byteLength-this.pos>=e}createExtraByteError(e){const{view:n,pos:s}=this;return new RangeError(`Extra ${n.byteLength-s} of ${n.byteLength} byte(s) found at buffer[${e}]`)}decode(e){if(this.entered)return this.clone().decode(e);try{this.entered=!0,this.reinitializeState(),this.setBuffer(e);const n=this.doDecodeSync();if(this.hasRemaining(1))throw this.createExtraByteError(this.pos);return n}finally{this.entered=!1}}*decodeMulti(e){if(this.entered){yield*this.clone().decodeMulti(e);return}try{for(this.entered=!0,this.reinitializeState(),this.setBuffer(e);this.hasRemaining(1);)yield this.doDecodeSync()}finally{this.entered=!1}}async decodeAsync(e){if(this.entered)return this.clone().decodeAsync(e);try{this.entered=!0;let n=!1,s;for await(const d of e){if(n)throw this.entered=!1,this.createExtraByteError(this.totalPos);this.appendBuffer(d);try{s=this.doDecodeSync(),n=!0}catch(f){if(!(f instanceof RangeError))throw f}this.totalPos+=this.pos}if(n){if(this.hasRemaining(1))throw this.createExtraByteError(this.totalPos);return s}const{headByte:a,pos:l,totalPos:c}=this;throw new RangeError(`Insufficient data in parsing ${np(a)} at ${c} (${l} in the current buffer)`)}finally{this.entered=!1}}decodeArrayStream(e){return this.decodeMultiAsync(e,!0)}decodeStream(e){return this.decodeMultiAsync(e,!1)}async*decodeMultiAsync(e,n){if(this.entered){yield*this.clone().decodeMultiAsync(e,n);return}try{this.entered=!0;let s=n,a=-1;for await(const l of e){if(n&&a===0)throw this.createExtraByteError(this.totalPos);this.appendBuffer(l),s&&(a=this.readArraySize(),s=!1,this.complete());try{for(;yield this.doDecodeSync(),--a!==0;);}catch(c){if(!(c instanceof RangeError))throw c}this.totalPos+=this.pos}}finally{this.entered=!1}}doDecodeSync(){e:for(;;){const e=this.readHeadByte();let n;if(e>=224)n=e-256;else if(e<192)if(e<128)n=e;else if(e<144){const a=e-128;if(a!==0){this.pushMapState(a),this.complete();continue e}else n={}}else if(e<160){const a=e-144;if(a!==0){this.pushArrayState(a),this.complete();continue e}else n=[]}else{const a=e-160;n=this.decodeString(a,0)}else if(e===192)n=null;else if(e===194)n=!1;else if(e===195)n=!0;else if(e===202)n=this.readF32();else if(e===203)n=this.readF64();else if(e===204)n=this.readU8();else if(e===205)n=this.readU16();else if(e===206)n=this.readU32();else if(e===207)this.useBigInt64?n=this.readU64AsBigInt():n=this.readU64();else if(e===208)n=this.readI8();else if(e===209)n=this.readI16();else if(e===210)n=this.readI32();else if(e===211)this.useBigInt64?n=this.readI64AsBigInt():n=this.readI64();else if(e===217){const a=this.lookU8();n=this.decodeString(a,1)}else if(e===218){const a=this.lookU16();n=this.decodeString(a,2)}else if(e===219){const a=this.lookU32();n=this.decodeString(a,4)}else if(e===220){const a=this.readU16();if(a!==0){this.pushArrayState(a),this.complete();continue e}else n=[]}else if(e===221){const a=this.readU32();if(a!==0){this.pushArrayState(a),this.complete();continue e}else n=[]}else if(e===222){const a=this.readU16();if(a!==0){this.pushMapState(a),this.complete();continue e}else n={}}else if(e===223){const a=this.readU32();if(a!==0){this.pushMapState(a),this.complete();continue e}else n={}}else if(e===196){const a=this.lookU8();n=this.decodeBinary(a,1)}else if(e===197){const a=this.lookU16();n=this.decodeBinary(a,2)}else if(e===198){const a=this.lookU32();n=this.decodeBinary(a,4)}else if(e===212)n=this.decodeExtension(1,0);else if(e===213)n=this.decodeExtension(2,0);else if(e===214)n=this.decodeExtension(4,0);else if(e===215)n=this.decodeExtension(8,0);else if(e===216)n=this.decodeExtension(16,0);else if(e===199){const a=this.lookU8();n=this.decodeExtension(a,1)}else if(e===200){const a=this.lookU16();n=this.decodeExtension(a,2)}else if(e===201){const a=this.lookU32();n=this.decodeExtension(a,4)}else throw new dn(`Unrecognized type byte: ${np(e)}`);this.complete();const s=this.stack;for(;s.length>0;){const a=s.top();if(a.type===Bp)if(a.array[a.position]=n,a.position++,a.position===a.size)n=a.array,s.release(a);else continue e;else if(a.type===Al){if(n==="__proto__")throw new dn("The key __proto__ is not allowed");a.key=this.mapKeyConverter(n),a.type=gE;continue e}else if(a.map[a.key]=n,a.readCount++,a.readCount===a.size)n=a.map,s.release(a);else{a.key=null,a.type=Al;continue e}}return n}}readHeadByte(){return this.headByte===il&&(this.headByte=this.readU8()),this.headByte}complete(){this.headByte=il}readArraySize(){const e=this.readHeadByte();switch(e){case 220:return this.readU16();case 221:return this.readU32();default:{if(e<160)return e-144;throw new dn(`Unrecognized array type byte: ${np(e)}`)}}}pushMapState(e){if(e>this.maxMapLength)throw new dn(`Max length exceeded: map length (${e}) > maxMapLengthLength (${this.maxMapLength})`);this.stack.pushMapState(e)}pushArrayState(e){if(e>this.maxArrayLength)throw new dn(`Max length exceeded: array length (${e}) > maxArrayLength (${this.maxArrayLength})`);this.stack.pushArrayState(e)}decodeString(e,n){return!this.rawStrings||this.stateIsMapKey()?this.decodeUtf8String(e,n):this.decodeBinary(e,n)}decodeUtf8String(e,n){if(e>this.maxStrLength)throw new dn(`Max length exceeded: UTF-8 byte length (${e}) > maxStrLength (${this.maxStrLength})`);if(this.bytes.byteLength<this.pos+n+e)throw sw;const s=this.pos+n;let a;return this.stateIsMapKey()&&this.keyDecoder?.canBeCached(e)?a=this.keyDecoder.decode(this.bytes,s,e):a=ak(this.bytes,s,e),this.pos+=n+e,a}stateIsMapKey(){return this.stack.length>0?this.stack.top().type===Al:!1}decodeBinary(e,n){if(e>this.maxBinLength)throw new dn(`Max length exceeded: bin length (${e}) > maxBinLength (${this.maxBinLength})`);if(!this.hasRemaining(e+n))throw sw;const s=this.pos+n,a=this.bytes.subarray(s,s+e);return this.pos+=n+e,a}decodeExtension(e,n){if(e>this.maxExtLength)throw new dn(`Max length exceeded: ext length (${e}) > maxExtLength (${this.maxExtLength})`);const s=this.view.getInt8(this.pos+n),a=this.decodeBinary(e,n+1);return this.extensionCodec.decode(a,s,this.context)}lookU8(){return this.view.getUint8(this.pos)}lookU16(){return this.view.getUint16(this.pos)}lookU32(){return this.view.getUint32(this.pos)}readU8(){const e=this.view.getUint8(this.pos);return this.pos++,e}readI8(){const e=this.view.getInt8(this.pos);return this.pos++,e}readU16(){const e=this.view.getUint16(this.pos);return this.pos+=2,e}readI16(){const e=this.view.getInt16(this.pos);return this.pos+=2,e}readU32(){const e=this.view.getUint32(this.pos);return this.pos+=4,e}readI32(){const e=this.view.getInt32(this.pos);return this.pos+=4,e}readU64(){const e=lk(this.view,this.pos);return this.pos+=8,e}readI64(){const e=cE(this.view,this.pos);return this.pos+=8,e}readU64AsBigInt(){const e=this.view.getBigUint64(this.pos);return this.pos+=8,e}readI64AsBigInt(){const e=this.view.getBigInt64(this.pos);return this.pos+=8,e}readF32(){const e=this.view.getFloat32(this.pos);return this.pos+=4,e}readF64(){const e=this.view.getFloat64(this.pos);return this.pos+=8,e}}function Sk(t,e){return new Hs(e).decode(t)}function Ek(t,e){return new Hs(e).decodeMulti(t)}function Ck(t){return t[Symbol.asyncIterator]!=null}async function*Ak(t){const e=t.getReader();try{for(;;){const{done:n,value:s}=await e.read();if(n)return;yield s}}finally{e.releaseLock()}}function kg(t){return Ck(t)?t:Ak(t)}async function Tk(t,e){const n=kg(t);return new Hs(e).decodeAsync(n)}function Nk(t,e){const n=kg(t);return new Hs(e).decodeArrayStream(n)}function Ok(t,e){const n=kg(t);return new Hs(e).decodeStream(n)}const jk=Object.freeze(Object.defineProperty({__proto__:null,DecodeError:dn,Decoder:Hs,EXT_TIMESTAMP:uE,Encoder:rf,ExtData:dl,ExtensionCodec:Il,decode:Sk,decodeArrayStream:Nk,decodeAsync:Tk,decodeMulti:Ek,decodeMultiStream:Ok,decodeTimestampExtension:pE,decodeTimestampToTimeSpec:mE,encode:pk,encodeDateToTimeSpec:fE,encodeTimeSpecToTimestamp:dE,encodeTimestampExtension:hE},Symbol.toStringTag,{value:"Module"})),Rk=Gx(jk);var En={},iw;function kk(){if(iw)return En;iw=1,Object.defineProperty(En,"__esModule",{value:!0});function t(P){return{enumerable:!0,value:P}}function e(P){return{enumerable:!0,writable:!0,value:P}}let n={},s=()=>!0,a=()=>({}),l=P=>P,c=(P,V,k,B)=>P.apply(k,B)&&V.apply(k,B),d=(P,V,k,[B,W])=>V.call(k,P.call(k,B,W),W),f=(P,V)=>Object.freeze(Object.create(P,V));function h(P,V,k){return P.reduce((B,W)=>function(...ee){return k(B,W,this,ee)},V)}function g(P){return f(this,{fn:t(P)})}let p={},v=g.bind(p),_=P=>v((V,k)=>!!~P(V,k)&&V),x={},w=g.bind(x);function S(P,V){return V.filter(k=>P.isPrototypeOf(k))}function C(P,V,...k){let B=h(S(x,k).map(ee=>ee.fn),s,c),W=h(S(p,k).map(ee=>ee.fn),l,d);return f(this,{from:t(P),to:t(V),guards:t(B),reducers:t(W)})}let N={},E={},A=C.bind(N),j=C.bind(E,null);function R(P,V,k){return F(V,P,k,this.immediates)||P}function D(P){let V=new Map;for(let k of P)V.has(k.from)||V.set(k.from,[]),V.get(k.from).push(k);return V}let I={enter:l};function q(...P){let V=S(N,P),k=S(E,P),B={final:t(P.length===0),transitions:t(D(V))};return k.length&&(B.immediates=t(k),B.enter=t(R)),f(I,B)}let Q={enter(P,V,k){let B=this.fn.call(V,V.context,k);return X.isPrototypeOf(B)?f(G,{machine:t(B),transitions:t(this.transitions)}).enter(P,V,k):(B.then(W=>V.send({type:"done",data:W})).catch(W=>V.send({type:"error",error:W})),P)}},G={enter(P,V,k){if(V.child=H(this.machine,B=>{V.onChange(B),V.child==B&&B.machine.state.value.final&&(delete V.child,V.send({type:"done",data:B.context}))},V.context,k),V.child.machine.state.value.final){let B=V.child.context;return delete V.child,F(V,P,{type:"done",data:B},this.transitions.get("done"))}return P}};function L(P,...V){let k=t(D(V));return X.isPrototypeOf(P)?f(G,{machine:t(P),transitions:k}):f(Q,{fn:t(P),transitions:k})}let X={get state(){return{name:this.current,value:this.states[this.current]}}};function $(P,V,k=a){return typeof P!="string"&&(k=V||a,V=P,P=Object.keys(V)[0]),n._create&&n._create(P,V),f(X,{context:t(k),current:t(P),states:t(V)})}function F(P,V,k,B){let{context:W}=P;for(let{to:ee,guards:he,reducers:ge}of B)if(he(W,k)){P.context=ge.call(P,W,k);let Z=V.original||V,ie=f(Z,{current:t(ee),original:{value:Z}});return n._onEnter&&n._onEnter(V,ee,P.context,W,k),ie.state.value.enter(ie,P,k)}}function M(P,V){let k=V.type||V,{machine:B}=P,{value:W,name:ee}=B.state;return W.transitions.has(k)?F(P,B,V,W.transitions.get(k))||B:(n._send&&n._send(k,ee),B)}let z={send(P){this.machine=M(this,P),this.onChange(this)}};function H(P,V,k,B){let W=Object.create(z,{machine:e(P),context:e(P.context(k,B)),onChange:t(V)});return W.send=W.send.bind(W),W.machine=W.machine.state.value.enter(W.machine,W,B),W}return En.action=_,En.createMachine=$,En.d=n,En.guard=w,En.immediate=j,En.interpret=H,En.invoke=L,En.reduce=v,En.state=q,En.transition=A,En}var aw;function Mk(){if(aw)return Vu;aw=1,Object.defineProperty(Vu,"__esModule",{value:!0}),Vu.createRealtimeClient=G;const t=Rk,e=kk(),n=iE(),s=Ri(),a=Og(),l=ki(),c=()=>({enqueuedMessage:void 0});function d(L){return L.token!==void 0}function f(L){return!d(L)}function h(L,X){return Object.assign(Object.assign({},L),{enqueuedMessage:X.message})}function g(L){return L.websocket&&L.websocket.readyState===WebSocket.OPEN&&L.websocket.close(),Object.assign(Object.assign({},L),{websocket:void 0})}function p(L,X){return L.websocket&&L.websocket.readyState===WebSocket.OPEN?(X.message instanceof Uint8Array?L.websocket.send(X.message):L.websocket.send((0,t.encode)(X.message)),Object.assign(Object.assign({},L),{enqueuedMessage:void 0})):Object.assign(Object.assign({},L),{enqueuedMessage:X.message})}function v(L){return Object.assign(Object.assign({},L),{token:void 0})}function _(L,X){return Object.assign(Object.assign({},L),{token:X.token})}function x(L,X){return Object.assign(Object.assign({},L),{websocket:X.websocket})}const w=(0,e.createMachine)("idle",{idle:(0,e.state)((0,e.transition)("send","connecting",(0,e.reduce)(h)),(0,e.transition)("expireToken","idle",(0,e.reduce)(v)),(0,e.transition)("close","idle",(0,e.reduce)(g))),connecting:(0,e.state)((0,e.transition)("connecting","connecting"),(0,e.transition)("connected","active",(0,e.reduce)(x)),(0,e.transition)("connectionClosed","idle",(0,e.reduce)(g)),(0,e.transition)("send","connecting",(0,e.reduce)(h)),(0,e.transition)("close","idle",(0,e.reduce)(g)),(0,e.immediate)("authRequired",(0,e.guard)(f))),authRequired:(0,e.state)((0,e.transition)("initiateAuth","authInProgress"),(0,e.transition)("send","authRequired",(0,e.reduce)(h)),(0,e.transition)("close","idle",(0,e.reduce)(g))),authInProgress:(0,e.state)((0,e.transition)("authenticated","connecting",(0,e.reduce)(_)),(0,e.transition)("unauthorized","idle",(0,e.reduce)(v),(0,e.reduce)(g)),(0,e.transition)("send","authInProgress",(0,e.reduce)(h)),(0,e.transition)("close","idle",(0,e.reduce)(g))),active:(0,e.state)((0,e.transition)("send","active",(0,e.reduce)(p)),(0,e.transition)("unauthorized","idle",(0,e.reduce)(v)),(0,e.transition)("connectionClosed","idle",(0,e.reduce)(g)),(0,e.transition)("close","idle",(0,e.reduce)(g))),failed:(0,e.state)((0,e.transition)("send","failed"),(0,e.transition)("close","idle",(0,e.reduce)(g)))},c);function S(L,{token:X,maxBuffering:$}){if($!==void 0&&($<1||$>60))throw new Error("The `maxBuffering` must be between 1 and 60 (inclusive)");const F=new URLSearchParams({fal_jwt_token:X});return $!==void 0&&F.set("max_buffering",$.toFixed(0)),`wss://fal.run/${(0,l.ensureEndpointIdFormat)(L)}/realtime?${F.toString()}`}const C=128;function N(L){return L.status==="error"&&L.error==="Unauthorized"}const E={NORMAL_CLOSURE:1e3},A=new Map,j=new Map;function R(L,X,$){if(!A.has(L)){const F=(0,e.interpret)(w,$);A.set(L,Object.assign(Object.assign({},F),{throttledSend:X>0?(0,l.throttle)(F.send,X,!0):F.send}))}return A.get(L)}const D=()=>{},I={send:D,close:D};function q(L){return L.status!=="error"&&L.type!=="x-fal-message"&&!Q(L)}function Q(L){return L.type==="x-fal-error"}function G({config:L}){return{connect(X,$){const{clientOnly:F=(0,l.isReact)()&&!(0,a.isBrowser)(),connectionKey:M=crypto.randomUUID(),maxBuffering:z,throttleInterval:H=C}=$;if(F&&!(0,a.isBrowser)())return I;let P;j.set(M,{onError:$.onError,onResult:$.onResult});const V=()=>j.get(M),k=R(M,H,({context:ee,machine:he,send:ge})=>{const{enqueuedMessage:Z,token:ie}=ee;if(he.current==="active"&&Z&&ge({type:"send",message:Z}),he.current==="authRequired"&&ie===void 0&&P!==he.current&&(ge({type:"initiateAuth"}),(0,n.getTemporaryAuthToken)(X,L).then(oe=>{ge({type:"authenticated",token:oe});const de=Math.round(n.TOKEN_EXPIRATION_SECONDS*.9*1e3);setTimeout(()=>{ge({type:"expireToken"})},de)}).catch(oe=>{ge({type:"unauthorized",error:oe})})),he.current==="connecting"&&P!==he.current&&ie!==void 0){const oe=new WebSocket(S(X,{token:ie,maxBuffering:z}));oe.onopen=()=>{ge({type:"connected",websocket:oe})},oe.onclose=de=>{if(de.code!==E.NORMAL_CLOSURE){const{onError:pe=D}=V();pe(new s.ApiError({message:`Error closing the connection: ${de.reason}`,status:de.code}))}ge({type:"connectionClosed",code:de.code})},oe.onerror=de=>{const{onError:pe=D}=V();pe(new s.ApiError({message:"Unknown error",status:500}))},oe.onmessage=de=>{const{onResult:pe}=V();if(de.data instanceof ArrayBuffer){const _e=(0,t.decode)(new Uint8Array(de.data));pe(_e);return}if(de.data instanceof Uint8Array){const _e=(0,t.decode)(de.data);pe(_e);return}if(de.data instanceof Blob){de.data.arrayBuffer().then(_e=>{const Ue=(0,t.decode)(new Uint8Array(_e));pe(Ue)});return}const be=JSON.parse(de.data);if(N(be)){ge({type:"unauthorized",error:new Error("Unauthorized")});return}if(q(be)){pe(be);return}if(Q(be)){if(be.error==="TIMEOUT")return;const{onError:_e=D}=V();_e(new s.ApiError({message:`${be.error}: ${be.reason}`,status:400,body:be}));return}}}P=he.current});return{send:ee=>{k.throttledSend({type:"send",message:ee})},close:()=>{k.send({type:"close"})}}}}}return Vu}var ks={},ow;function Dk(){if(ow)return ks;ow=1;var t=ks&&ks.__awaiter||function(g,p,v,_){function x(w){return w instanceof v?w:new v(function(S){S(w)})}return new(v||(v=Promise))(function(w,S){function C(A){try{E(_.next(A))}catch(j){S(j)}}function N(A){try{E(_.throw(A))}catch(j){S(j)}}function E(A){A.done?w(A.value):x(A.value).then(C,N)}E((_=_.apply(g,p||[])).next())})};Object.defineProperty(ks,"__esModule",{value:!0}),ks.LIFECYCLE_DURATIONS=void 0,ks.createStorageClient=h;const e=jg(),n=Zl(),s=ki();ks.LIFECYCLE_DURATIONS={ONE_DAY:86400,ONE_WEEK:604800,ONE_MONTH:2592e3,ONE_YEAR:31536e3,UNLIMITED:31536e6};function a(g){var p;const[,v]=g.split("/");return(p=v.split(/[-;]/)[0])!==null&&p!==void 0?p:"bin"}function l(g,p,v,_){return t(this,void 0,void 0,function*(){const x=g.name||`${Date.now()}.${a(v)}`,w={};return _&&(w["X-Fal-Object-Lifecycle"]=JSON.stringify(_)),yield(0,n.dispatchRequest)({method:"POST",targetUrl:`${(0,e.getRestApiUrl)()}/storage/upload/initiate?storage_type=fal-cdn-v3`,input:{content_type:v,file_name:x},config:p,headers:w})})}function c(g,p,v,_){return t(this,void 0,void 0,function*(){const x=g.name||`${Date.now()}.${a(v)}`,w={};return _&&(w["X-Fal-Object-Lifecycle"]=JSON.stringify(_)),yield(0,n.dispatchRequest)({method:"POST",targetUrl:`${(0,e.getRestApiUrl)()}/storage/upload/initiate-multipart?storage_type=fal-cdn-v3`,input:{content_type:v,file_name:x},config:p,headers:w})})}function d(g,p,v){return t(this,arguments,void 0,function*(_,x,w,S=3){if(S===0)throw new Error("Part upload failed, retries exhausted");const{fetch:C,responseHandler:N}=w;try{const E=yield C(_,{method:"PUT",body:x});return yield N(E)}catch{return yield d(_,x,w,S-1)}})}function f(g,p,v){return t(this,void 0,void 0,function*(){const{fetch:_,responseHandler:x}=p,w=g.type||"application/octet-stream",{upload_url:S,file_url:C}=yield c(g,p,w,v),N=10*1024*1024,E=Math.ceil(g.size/N),A=new URL(S),j=[];for(let I=0;I<E;I++){const q=I*N,Q=Math.min(q+N,g.size),G=g.slice(q,Q),L=I+1,X=`${A.origin}${A.pathname}/${L}${A.search}`;j.push(yield d(X,G,p))}const R=`${A.origin}${A.pathname}/complete${A.search}`,D=yield _(R,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({parts:j.map(I=>({partNumber:I.partNumber,etag:I.etag}))})});return yield x(D),C})}function h({config:g}){const p={upload:(v,_)=>t(this,void 0,void 0,function*(){const x=_?.lifecycle;if(v.size>94371840)return yield f(v,g,x);const w=v.type||"application/octet-stream",{fetch:S,responseHandler:C}=g,{upload_url:N,file_url:E}=yield l(v,g,w,x),A=yield S(N,{method:"PUT",body:v,headers:{"Content-Type":v.type||"application/octet-stream"}});return yield C(A),E}),transformInput:v=>t(this,void 0,void 0,function*(){if(Array.isArray(v))return Promise.all(v.map(_=>p.transformInput(_)));if(v instanceof Blob)return yield p.upload(v);if((0,s.isPlainObject)(v)){const x=Object.entries(v).map(S=>t(this,[S],void 0,function*([C,N]){return[C,yield p.transformInput(N)]})),w=yield Promise.all(x);return Object.fromEntries(w)}return v})};return p}return ks}var lw;function cw(){if(lw)return Ca;lw=1;var t=Ca&&Ca.__awaiter||function(h,g,p,v){function _(x){return x instanceof p?x:new p(function(w){w(x)})}return new(p||(p=Promise))(function(x,w){function S(E){try{N(v.next(E))}catch(A){w(A)}}function C(E){try{N(v.throw(E))}catch(A){w(A)}}function N(E){E.done?x(E.value):_(E.value).then(S,C)}N((v=v.apply(h,g||[])).next())})};Object.defineProperty(Ca,"__esModule",{value:!0}),Ca.createFalClient=f;const e=jg(),n=K2(),s=Mk(),a=Zl(),l=Ri(),c=Dk(),d=aE();function f(h={}){const g=(0,e.createConfig)(h),p=(0,c.createStorageClient)({config:g}),v=(0,n.createQueueClient)({config:g,storage:p}),_=(0,d.createStreamingClient)({config:g,storage:p}),x=(0,s.createRealtimeClient)({config:g});return{queue:v,realtime:x,storage:p,streaming:_,stream:_.stream,run(w){return t(this,arguments,void 0,function*(S,C={}){const N=C.input?yield p.transformInput(C.input):void 0;return(0,a.dispatchRequest)({method:C.method,targetUrl:(0,a.buildUrl)(S,C),input:N,config:Object.assign(Object.assign({},g),{responseHandler:l.resultResponseHandler}),options:{signal:C.abortSignal,retry:{maxRetries:3,baseDelay:500,maxDelay:15e3}}})})},subscribe:(w,S)=>t(this,void 0,void 0,function*(){const{request_id:C}=yield v.submit(w,S);return S.onEnqueue&&S.onEnqueue(C),yield v.subscribeToStatus(w,Object.assign({requestId:C},S)),v.result(w,{requestId:C})})}}return Ca}var al={},uw;function Uk(){if(uw)return al;uw=1,Object.defineProperty(al,"__esModule",{value:!0}),al.isQueueStatus=t,al.isCompletedQueueStatus=e;function t(n){return n&&n.status&&n.response_url}function e(n){return t(n)&&n.status==="COMPLETED"}return al}var dw;function Ik(){return dw||(dw=1,(function(t){var e=di&&di.__createBinding||(Object.create?(function(h,g,p,v){v===void 0&&(v=p);var _=Object.getOwnPropertyDescriptor(g,p);(!_||("get"in _?!g.__esModule:_.writable||_.configurable))&&(_={enumerable:!0,get:function(){return g[p]}}),Object.defineProperty(h,v,_)}):(function(h,g,p,v){v===void 0&&(v=p),h[v]=g[p]})),n=di&&di.__exportStar||function(h,g){for(var p in h)p!=="default"&&!Object.prototype.hasOwnProperty.call(g,p)&&e(g,h,p)};Object.defineProperty(t,"__esModule",{value:!0}),t.fal=t.parseEndpointId=t.isRetryableError=t.ValidationError=t.ApiError=t.withProxy=t.withMiddleware=t.createFalClient=void 0;const s=cw();var a=cw();Object.defineProperty(t,"createFalClient",{enumerable:!0,get:function(){return a.createFalClient}});var l=sE();Object.defineProperty(t,"withMiddleware",{enumerable:!0,get:function(){return l.withMiddleware}}),Object.defineProperty(t,"withProxy",{enumerable:!0,get:function(){return l.withProxy}});var c=Ri();Object.defineProperty(t,"ApiError",{enumerable:!0,get:function(){return c.ApiError}}),Object.defineProperty(t,"ValidationError",{enumerable:!0,get:function(){return c.ValidationError}});var d=nf();Object.defineProperty(t,"isRetryableError",{enumerable:!0,get:function(){return d.isRetryableError}}),n(Uk(),t);var f=ki();Object.defineProperty(t,"parseEndpointId",{enumerable:!0,get:function(){return f.parseEndpointId}}),t.fal=(function(){let g=(0,s.createFalClient)();return{config(p){g=(0,s.createFalClient)(p)},get queue(){return g.queue},get realtime(){return g.realtime},get storage(){return g.storage},get streaming(){return g.streaming},run(p,v){return g.run(p,v)},subscribe(p,v){return g.subscribe(p,v)},stream(p,v){return g.stream(p,v)}}})()})(di)),di}var jd=Ik();const yE=O.createContext({}),$k=({children:t})=>{const[e,n]=O.useState(null),[s,a]=O.useState(null),[l,c]=O.useState(!1),[d,f]=O.useState(!1),[h,g]=O.useState(""),[p,v]=O.useState(""),[_,x]=O.useState(""),[w,S]=O.useState({}),[C,N]=O.useState({});O.useEffect(()=>{console.log("projectId :",h),h&&E()},[h]);const E=async()=>{if(console.log(" updateEmbodyCache:",h),!h){console.error("Project ID is not set");return}const{data:R,error:D}=await Re.from("embodys").select("name,type,id,prompt").eq("project_id",parseInt(h));if(D){console.error("Error fetching embody data:",D.message);return}S(R.reduce((I,q)=>({...I,[q.id]:q}),{}))},j={user:e,setUser:n,userProfile:s,setUserProfile:a,isCollapsed:l,isProfileLoading:d,projectId:h,setProjectId:g,ep_id:p,setEpId:v,editShotId:_,setEditShotId:x,embodyCache:w,setEmbodyCache:S,deepseekProvider:C,setDeepseekProvider:N,fetchUserProfile:async()=>{if(s){console.log("");return}console.log(""),f(!0);const{data:{user:R}}=await Re.auth.getUser();if(!R)return console.error("User not authenticated"),f(!1),null;n(R);const{data:D,error:I}=await Re.from("profiles").select("*").eq("id",R.id).single();if(I)return console.error("Error fetching user profile:",I.message),f(!1),null;a(D),f(!1)},updateEmbodyCache:E};return b.jsx(yE.Provider,{value:j,children:t})};function Zr(){const t=O.useContext(yE);if(!t)throw new Error("useGlobal must be used within a GlobalProvider");return t}function Lk(){const{user:t,userProfile:e,fetchUserProfile:n,projectId:s,setProjectId:a,setEpId:l,updateEmbodyCache:c}=Zr(),d=Ps();O.useEffect(()=>{n(),Yt.on("StartEditorMode",()=>{f(!0)}),Yt.on("EndEditorMode",()=>{f(!1)}),console.log("LocalStorage:",localStorage.getItem("projectId")),localStorage.getItem("projectId")&&a(localStorage.getItem("projectId")),localStorage.getItem("epId")&&l(localStorage.getItem("epId"))},[]),f(!0);function f(g){const p=document.documentElement;g?(p.style.setProperty("--avatar-size","30px"),p.style.setProperty("--avatar-bacground-color","transparent"),p.style.setProperty("--avatar-bacground-border","none"),p.style.setProperty("--user-text-display","none")):(p.style.setProperty("--avatar-size","50px"),p.style.setProperty("--avatar-bacground-color","#2a2a2a"),p.style.setProperty("--avatar-bacground-border","1px solid #333"),p.style.setProperty("--user-text-display","block"))}function h(){e?.id?d("/profile"):d("/login")}return b.jsxs("div",{className:"user-info-container",onClick:h,children:[b.jsx("img",{src:e?.avatar_url||"./default_avatar.png",alt:"",className:"avatar"}),b.jsxs("div",{className:"user-info-text",children:[b.jsx("p",{children:e?.display_name||""}),b.jsx("p",{children:" : "+e?.gold_coins||"0"})]})]})}function zk(){const[t,e]=O.useState(""),[n,s]=O.useState(""),[a,l]=O.useState(""),[c,d]=O.useState(!1),f=Ps(),h=async g=>{g.preventDefault(),l(""),d(!0);try{const{error:p}=await Re.auth.signInWithPassword({email:t,password:n});if(p){l(p.message);return}f("/profile")}catch{l("")}finally{d(!1)}};return b.jsx("div",{className:"login-container",children:b.jsxs("div",{className:"login-form",children:[b.jsx("h2",{children:""}),a&&b.jsx("p",{className:"error-message",children:a}),b.jsxs("form",{onSubmit:h,children:[b.jsxs("div",{className:"form-group",children:[b.jsx("label",{htmlFor:"email",children:""}),b.jsx("input",{type:"email",id:"email",value:t,onChange:g=>e(g.target.value),required:!0,placeholder:""})]}),b.jsxs("div",{className:"form-group",children:[b.jsx("label",{htmlFor:"password",children:""}),b.jsx("input",{type:"password",id:"password",value:n,onChange:g=>s(g.target.value),required:!0,placeholder:""})]}),b.jsx("button",{type:"submit",disabled:c,children:c?"...":""}),b.jsx("div",{className:"register-link",children:b.jsxs("p",{children:["",b.jsx(Si,{to:"/register",children:""})]})})]})]})})}function Bk(){const[t,e]=O.useState(""),[n,s]=O.useState(""),[a,l]=O.useState(""),[c,d]=O.useState(""),[f,h]=O.useState(""),[g,p]=O.useState(!1);Ps();const v=async _=>{if(_.preventDefault(),d(""),h(""),!t||!n||!a){d("");return}if(n!==a){d("");return}if(n.length<6){d("6");return}p(!0);try{const{error:x}=await Re.auth.signUp({email:t,password:n});if(x){d(x.message);return}h(""),e(""),s(""),l("")}catch{d("")}finally{p(!1)}};return b.jsx("div",{className:"register-container",children:b.jsxs("div",{className:"register-form",children:[b.jsx("h2",{children:""}),c&&b.jsx("p",{className:"error-message",children:c}),f&&b.jsx("p",{className:"success-message",children:f}),b.jsxs("form",{onSubmit:v,children:[b.jsxs("div",{className:"form-group",children:[b.jsxs("label",{htmlFor:"email",children:[" ",b.jsx("span",{className:"required",children:"*"})]}),b.jsx("input",{type:"email",id:"email",value:t,onChange:_=>e(_.target.value),required:!0,placeholder:""})]}),b.jsxs("div",{className:"form-group",children:[b.jsxs("label",{htmlFor:"password",children:[" ",b.jsx("span",{className:"required",children:"*"})]}),b.jsx("input",{type:"password",id:"password",value:n,onChange:_=>s(_.target.value),required:!0,placeholder:"6"})]}),b.jsxs("div",{className:"form-group",children:[b.jsxs("label",{htmlFor:"confirmPassword",children:[" ",b.jsx("span",{className:"required",children:"*"})]}),b.jsx("input",{type:"password",id:"confirmPassword",value:a,onChange:_=>l(_.target.value),required:!0,placeholder:""})]}),b.jsx("button",{type:"submit",disabled:g,children:g?"...":""}),b.jsx("div",{className:"login-link",children:b.jsxs("p",{children:["",b.jsx(Si,{to:"/login",children:""})]})})]})]})})}function Pk({children:t}){return b.jsx("div",{className:"main-panel-header",children:t})}function qk(){const{user:t,userProfile:e,fetchUserProfile:n,projectId:s,setProjectId:a}=Zr(),[l,c]=O.useState(!1),[d,f]=O.useState(""),[h,g]=O.useState(""),[p,v]=O.useState(!1),[_,x]=O.useState(""),[w,S]=O.useState(""),[C,N]=O.useState([]),[E,A]=O.useState(!0),j=Ps(),R=()=>{I(),c(!0)},D=()=>{I(),c(!1)},I=()=>{f(""),g(""),x(""),S("")},q=()=>d.trim()?d.trim().length>50?(x("50"),!1):h.trim().length>200?(x("200"),!1):!0:(x(""),!1),Q=()=>{e&&(A(!0),Re.from("projects").select("*").eq("team_id",e?.team_id||null).then(({data:M,error:z})=>{if(A(!1),z){console.error(":",z),x("");return}console.log("projects ",M),N(M)}))},G=async()=>{if(x(""),!!q())try{v(!0);const{error:M}=await Re.from("projects").insert({name:d.trim(),description:h.trim(),user_id:t?.id,team_id:e?.team_id||null});if(M){console.error(":",M),x(""+M.message);return}await Q(),S(""),D()}catch(M){x(""+M.message),console.error(":",M.message)}finally{v(!1)}};O.useEffect(()=>{Q()},[e]),O.useEffect(()=>{s&&j("/editor")},[]);const L=M=>{M.key==="Enter"&&!M.shiftKey&&(M.preventDefault(),G())},X=M=>{console.log("set project id ",M.id),a(M.id),Yt.emit("StartEditorMode"),localStorage.setItem("projectId",M.id),j("/editor")},$=(M,z)=>{M.stopPropagation(),globalData.projectId=z.id,localStorage.setItem("projectId",z.id),j("/editor"),Yt.emit("StartEditorMode")},F=(M,z)=>{M.stopPropagation(),window.confirm(`"${z.project_name}"`)&&(console.log(":",z.project_name),Re.from("projects").delete().eq("id",z.id).then(({error:H})=>{if(H){console.error(":",H),x("");return}Q(),S("")}))};return b.jsxs("div",{children:[b.jsx(Pk,{children:b.jsx("h2",{children:""})}),b.jsx("div",{className:"main-panel-buttons",children:b.jsx("button",{onClick:R,children:""})}),b.jsx("div",{className:`main-panel-content ${C.length===0?"empty":""}`,children:C.length>0?C.map(M=>b.jsxs("div",{className:"project-item",onClick:()=>X(M),children:[b.jsxs("div",{className:"project-item-content",children:[b.jsx("h4",{children:M.name}),b.jsx("p",{children:M.description})]}),b.jsxs("div",{className:"project-actions",children:[b.jsx("button",{className:"edit-button",onClick:z=>$(z,M),title:"",children:""}),b.jsx("button",{className:"delete-button",onClick:z=>F(z,M),title:"",children:""})]})]},M.id)):E&&b.jsx("div",{className:"loading",children:"..."})}),l&&b.jsx("div",{className:"create-panel-overlay",onClick:D,children:b.jsxs("div",{className:"create-panel",onClick:M=>M.stopPropagation(),children:[b.jsxs("div",{className:"create-panel-header",children:[b.jsx("h3",{children:""}),b.jsx("button",{className:"close-button",onClick:D,disabled:p,children:""})]}),b.jsxs("div",{className:"create-panel-content",children:[_&&b.jsx("div",{className:"error-message",children:_}),w&&b.jsx("div",{className:"success-message",children:w}),b.jsx("input",{type:"text",placeholder:"",className:"story-name-input",value:d,onChange:M=>f(M.target.value),onKeyPress:L,disabled:p||!!w}),b.jsx("textarea",{placeholder:"",className:"story-description-input",value:h,onChange:M=>g(M.target.value),onKeyPress:L,disabled:p||!!w}),b.jsxs("div",{className:"char-count",children:[b.jsxs("span",{children:[": ",d.length,"/50"]}),b.jsxs("span",{children:[": ",h.length,"/200"]})]})]}),b.jsxs("div",{className:"create-panel-footer",children:[b.jsx("button",{className:"cancel-button",onClick:D,disabled:p,children:""}),b.jsxs("button",{className:"confirm-button",onClick:G,disabled:p||!!w,children:[p&&b.jsx("span",{className:"loading-spinner"}),p?"...":""]})]})]})})]})}function Hk(){const{user:t,userProfile:e,setProjectId:n,setUserProfile:s,setUser:a,isProfileLoading:l,fetchUserProfile:c}=Zr(),[d,f]=O.useState(!1),[h,g]=O.useState(!1),[p,v]=O.useState(""),[_,x]=O.useState(!1),[w,S]=O.useState(""),[C,N]=O.useState("./default_avatar.png"),[E,A]=O.useState(!1),[j,R]=O.useState([]),[D,I]=O.useState(""),[q,Q]=O.useState(""),[G,L]=O.useState(""),[X,$]=O.useState(!1),[F,M]=O.useState("list"),z=Ps();O.useEffect(()=>{e||c()},[]),O.useEffect(()=>{H(),e?.avatar_url&&N(e.avatar_url)},[e]);const H=async()=>{if(!e?.team_id){I("");return}try{const{data:de,error:pe}=await Re.from("teams").select("name").eq("id",e.team_id).single();pe?(console.error("Error fetching team name:",pe.message),I("")):I(de.name)}catch(de){console.error("Error in fetchTeamName:",de),I("")}},P=async()=>{try{await Re.auth.signOut(),a(null),s(null),n(null),z("/")}catch(de){console.error(":",de)}},V=async()=>{try{const{data:de,error:pe}=await Re.from("teams").select("id, name").contains("members",[t.id]);if(pe)throw pe;R(de||[])}catch(de){console.error(":",de),L("")}},k=()=>{V(),L(""),I(""),Q(""),M("list"),g(!0)},B=()=>{g(!1),L("")},W=async()=>{if(!D.trim()){L("");return}if(D.length>20){L("20");return}$(!0),L("");try{const{data:de,error:pe}=await Re.from("teams").insert({name:D.trim(),create_by:t.id,members:[t.id]}).select("id, name");if(pe)throw pe;console.log("newTeam",de),R(be=>[...be,de[0]]),I(""),L("","success"),M("list")}catch(de){console.error(":",de),L("")}finally{$(!1)}},ee=async()=>{if(!q.trim()){L("");return}$(!0),L("");try{if(await new Promise(de=>setTimeout(de,1e3)),q==="INVITE1"){const de={id:Date.now().toString(),name:"",code:q};R(pe=>[...pe,de]),Q(""),L("","success"),M("list")}else L("")}catch(de){console.error(":",de),L("")}finally{$(!1)}},he=async de=>{$(!0);try{const{error:pe}=await Re.from("profiles").update({team_id:de.id}).eq("id",t.id);if(pe)throw pe;B(),Yt.emit("updateProfile")}catch(pe){console.error(":",pe),L("")}finally{$(!1)}},ge=()=>{v(profile?.display_name||""),S(""),f(!0)},Z=()=>{f(!1),S("")},ie=async de=>{const pe=de.target.files[0];if(!pe)return;if(!["image/jpeg","image/png","image/gif","image/webp"].includes(pe.type)){alert("JPG, PNG, GIF, WebP");return}if(pe.size>5*1024*1024){alert("5MB");return}A(!0);try{const _e=`${Date.now()}${pe.name.slice(pe.name.lastIndexOf("."))}`;console.log("avatar filename = ",_e);const{error:Ue}=await Re.storage.from("avatars").upload(`${t.id}/${_e}`,pe,{cacheControl:"3600",upsert:!1});if(Ue)throw Ue;const{data:ce}=Re.storage.from("avatars").getPublicUrl(`${t.id}/${_e}`);console.log("avatar url = ",ce.publicUrl),N(ce.publicUrl);const{error:ve}=await Re.from("profiles").update({avatar_url:ce.publicUrl}).eq("id",t.id);ve&&console.log("update error = ",ve)}catch(_e){console.error(":",_e),alert("")}finally{A(!1),de.target.value=""}},oe=async()=>{if(!p.trim()){S("");return}if(p.length>10){S("10");return}x(!0),S("");try{const{error:de}=await Re.from("profiles").update({display_name:p.trim()}).eq("id",t.id);if(de){console.error(":",de),S("");return}Yt.emit("updateProfile"),Z()}catch(de){console.error(":",de),S("")}finally{x(!1)}};return l?b.jsx("div",{className:"loading",children:"..."}):b.jsxs("div",{className:"profile-container",children:[b.jsxs("div",{className:"profile-header",children:[b.jsx("h1",{children:""}),b.jsx("button",{className:"logout-button",onClick:P,children:""})]}),b.jsx("div",{className:"profile-info",children:b.jsxs("div",{className:"info-section",children:[b.jsx("h2",{children:""}),b.jsxs("div",{className:"avatar-container",onClick:()=>document.getElementById("avatar-upload").click(),children:[E&&b.jsx("div",{className:"avatar-upload-overlay",children:b.jsx("span",{children:"..."})}),b.jsx("img",{src:C||"./default_avatar.png",alt:"",className:"avatar"}),b.jsx("div",{className:"avatar-hint",children:""}),b.jsx("input",{type:"file",id:"avatar-upload",accept:"image/*",style:{display:"none"},onChange:ie})]}),b.jsxs("div",{className:"info-item",children:[b.jsx("span",{className:"label",children:""}),b.jsx("span",{className:"value",children:e?.display_name||""}),b.jsx("button",{className:"",onClick:ge,children:""})]}),b.jsxs("div",{className:"info-item",children:[b.jsx("span",{className:"label",children:""}),b.jsx("span",{className:"value",children:e?.gold_coins||"0"}),b.jsx("button",{className:"",children:""})]}),b.jsxs("div",{className:"info-item",children:[b.jsx("span",{className:"label",children:""}),b.jsx("span",{className:"value",children:t?.email||""})]}),b.jsxs("div",{className:"info-item",children:[b.jsx("span",{className:"label",children:""}),b.jsx("span",{className:"value",children:D}),b.jsx("button",{className:"team-switch-button",onClick:k,children:""})]}),b.jsxs("div",{className:"info-item",children:[b.jsx("span",{className:"label",children:""}),b.jsx("span",{className:"value",children:t?.created_at?new Date(t.created_at).toLocaleString():""})]})]})}),d&&b.jsx("div",{className:"modal-overlay",onClick:Z,children:b.jsxs("div",{className:"modal-content",onClick:de=>de.stopPropagation(),children:[b.jsxs("div",{className:"modal-header",children:[b.jsx("h3",{children:""}),b.jsx("button",{className:"close-button",onClick:Z,children:""})]}),b.jsxs("div",{className:"modal-body",children:[w&&b.jsx("p",{className:"error-message",children:w}),b.jsxs("div",{className:"form-group",children:[b.jsx("label",{htmlFor:"displayName",children:""}),b.jsx("input",{type:"text",id:"displayName",value:p,onChange:de=>v(de.target.value),placeholder:"",maxLength:50})]})]}),b.jsxs("div",{className:"modal-footer",children:[b.jsx("button",{className:"cancel-button",onClick:Z,children:""}),b.jsx("button",{className:"save-button",onClick:oe,disabled:_,children:_?"...":""})]})]})}),h&&b.jsx("div",{className:"modal-overlay",onClick:B,children:b.jsxs("div",{className:"team-modal-content",onClick:de=>de.stopPropagation(),children:[b.jsxs("div",{className:"modal-header",children:[b.jsx("h3",{children:""}),b.jsx("button",{className:"close-button",onClick:B,children:""})]}),b.jsxs("div",{className:"team-modal-tabs",children:[b.jsx("button",{className:`team-tab-button ${F==="list"?"active":""}`,onClick:()=>M("list"),children:""}),b.jsx("button",{className:`team-tab-button ${F==="create"?"active":""}`,onClick:()=>M("create"),children:""}),b.jsx("button",{className:`team-tab-button ${F==="join"?"active":""}`,onClick:()=>M("join"),children:""})]}),b.jsxs("div",{className:"modal-body",children:[G&&b.jsx("p",{className:`${G.includes("")?"success-message":"error-message"}`,children:G}),F==="list"&&b.jsx("div",{className:"team-list",children:j.length===0?b.jsx("p",{className:"empty-message",children:""}):j.map(de=>b.jsxs("div",{className:"team-item",children:[b.jsx("div",{className:"team-info",children:b.jsx("h4",{children:de.name})}),b.jsx("button",{className:"switch-team-button",onClick:()=>he(de),disabled:X,children:X?"...":""})]},de.id))}),F==="create"&&b.jsxs("div",{className:"create-team-form",children:[b.jsxs("div",{className:"form-group",children:[b.jsx("label",{htmlFor:"teamName",children:""}),b.jsx("input",{type:"text",id:"teamName",value:D,onChange:de=>I(de.target.value),placeholder:"",maxLength:20,disabled:X})]}),b.jsx("p",{className:"form-hint",children:""})]}),F==="join"&&b.jsxs("div",{className:"join-team-form",children:[b.jsxs("div",{className:"form-group",children:[b.jsx("label",{htmlFor:"teamCode",children:"ID"}),b.jsx("input",{type:"text",id:"teamCode",value:q,onChange:de=>Q(de.target.value.toUpperCase()),placeholder:"ID",disabled:X})]}),b.jsx("p",{className:"form-hint",children:""})]})]}),b.jsxs("div",{className:"modal-footer",children:[F!=="list"&&b.jsx("button",{className:"action-button",onClick:F==="create"?W:ee,disabled:X,children:X?"...":F==="create"?"":""}),b.jsx("button",{className:"cancel-button",onClick:B,children:""})]})]})})]})}function Vk(){const{user:t,userProfile:e}=Zr();return b.jsxs("div",{className:"home-page",children:[b.jsx("h1",{children:""}),b.jsx("p",{children:t?`: ${t.email}`:""})]})}function cd({id:t,type:e,name:n,pic:s,description:a,onEdit:l,onDelete:c}){const[d,f]=O.useState("./no_pic.png");return O.useEffect(()=>{s&&s.length>0?f(bi+s[0].path):f("https://gsyznlwsezhwerypyzbe.supabase.co/storage/v1/object/public/embodys/public/Common/no_pic.png")},[s]),b.jsx(b.Fragment,{children:b.jsxs("div",{className:"embody-card",onClick:()=>l&&l(t),children:[b.jsx("div",{className:"embody-card-image",children:b.jsx("img",{src:d,alt:n})}),b.jsx("p",{className:"embody-card-title",children:n}),b.jsx("button",{className:"embody-delete-btn card-action-btn delete-btn",onClick:()=>c&&c(t),title:"",children:"x"})]})})}function Fk(){const{projectId:t,ep_id:e,embodyCache:n,editShotId:s,setEditShotId:a}=Zr(),[l,c]=O.useState([]),[d,f]=O.useState({}),[h,g]=O.useState({}),[p,v]=O.useState({}),[_,x]=O.useState({}),[w,S]=O.useState(null),[C,N]=O.useState(null),[E,A]=O.useState(""),[j,R]=O.useState(null),[D,I]=O.useState([]);O.useRef(null);const[q,Q]=O.useState([]),[G,L]=O.useState(""),[X,$]=O.useState(""),[F,M]=O.useState(!1),[z,H]=O.useState([]),[P,V]=O.useState(""),[k,B]=O.useState([]),[W,ee]=O.useState({}),[he,ge]=O.useState(!1),[Z,ie]=O.useState(null),[oe,de]=O.useState(null),[pe,be]=O.useState(""),[_e,Ue]=O.useState(""),[ce,ve]=O.useState(!1),Me=async me=>{ve(!0),Re.from("movie_eps").select("title,index").eq("id",e).single().abortSignal(me.signal).then(({data:Xe,error:ot})=>{if(ot){ot.name==="AbortError"?(console.log(":",ot),ve(!1)):console.log("EP:",ot),ve(!1);return}L(Xe.title||`EP ${Xe.index||""}`),$(Xe.index||"")});const{data:Ee,error:ke}=await Re.from("movie_scs").select(`
        *,
        movie_seqs(
          *,
          movie_shots(
            *
          )
        ).order(index, ascending) 
      `).order("index",{ascending:!0}).abortSignal(me.signal).eq("ep_id",e);if(ke){console.log(":",ke),ve(!1);return}console.log(":",Ee),Ee.forEach(Xe=>{Xe.movie_seqs.forEach(ot=>{ot.movie_shots.sort((ft,ns)=>ft.index-ns.index),ot.movie_shots.forEach(ft=>{d[ft.id]=ft})})}),Q(Ee),ve(!1)};O.useEffect(()=>{if(!e)return;const me=new AbortController;return Me(me),()=>{me.abort()}},[e]);const Je=me=>{alert("")},at=me=>{a(me),console.log(":",me),Yt.emit("changeEditorMode","edit")},Lt=me=>{window.confirm(""+me)&&Re.from("movie_seqs").delete().eq("id",me).then(({data:Ee,error:ke})=>{if(ke){console.error(":",ke);return}console.log(":",Ee),Me(new AbortController)})};function ut(me,Ee){console.log(":",me,Ee),N(me),A(Ee);const ke=d[me][Ee]||"";if(console.log(ke),R(ke),Ee==="embodys"){var Xe=[];ke.forEach(ot=>{n[ot]?Xe.push(n[ot]):console.error("ID:",ot)}),console.log("emlist",Xe),I(Xe)}}const mn=me=>({character:"#3498db",item:"#2ecc71",scene:"#e74c3c",:"#f39c12",:"#9b59b6"})[me]||"#95a5a6",Zt=me=>!me||me===""||me===""||!Array.isArray(me)||me.length===0?"":me.map((ke,Xe)=>{if(n&&n[ke]){const ot=n[ke],ft=mn(ot.type);return b.jsxs("span",{style:{marginRight:"8px"},children:[b.jsx("span",{style:{color:ft,fontWeight:"bold",marginRight:"2px"},children:ot.name}),Xe<me.length-1&&", "]},ke)}else return console.log("ID:",ke),b.jsxs("span",{style:{marginRight:"8px",color:"#999"},children:["",Xe<me.length-1&&", "]},ke)}),dt=me=>{B(Ee=>Ee.includes(me)?Ee.filter(ke=>ke!==me):[...Ee,me])},pn=()=>{const me=z.filter(Xe=>k.includes(Xe.id)),Ee=new Set(D.map(Xe=>Xe.name)),ke=me.filter(Xe=>!Ee.has(Xe.name)).map(Xe=>({id:Xe.id,name:Xe.name,type:Xe.type}));console.log(":",ke),I(Xe=>[...Xe,...ke]),M(!1),B([]),V("")},kn=async me=>{if(me.preventDefault(),n){const Ee=Object.values(n);H(Ee),console.log("embodyCache:",Ee.length)}else console.warn("embodyCache"),H([]);M(!0)},nn=me=>{const Ee=[...D];Ee.splice(me,1),I(Ee)},gn=()=>{},_r=me=>{window.confirm(""+me)&&Re.from("movie_shots").delete().eq("id",me).then(({data:Ee,error:ke})=>{if(ke){console.error(":",ke);return}console.log(":",Ee),Me(new AbortController)})},ts=me=>{window.confirm(""+me)&&Re.from("movie_scs").delete().eq("id",me).then(({data:Ee,error:ke})=>{if(ke){console.error(":",ke);return}console.log(":",Ee),Me(new AbortController)})},to=(me,Ee)=>{ie(me),de(Ee),be(""),Ue(""),ge(!0)},no=async()=>{if(!pe.trim()){alert("");return}try{const{data:me,error:Ee}=await Re.from("movie_seqs").select("index").eq("sc_id",Z).order("index",{ascending:!1}).limit(1);let ke=1;!Ee&&me&&me.length>0&&(ke=me[0].index+1);const Xe={sc_id:Z,name:pe.trim(),index:ke},{data:ot,error:ft}=await Re.from("movie_seqs").insert(Xe);if(ft){console.error(":",ft),alert("");return}console.log(":",ot),Me(new AbortController),ge(!1)}catch(me){console.error(":",me),alert("")}},Vn=async()=>{if(!C||!E){console.error("");return}try{let me=j;if(console.log(j),E==="embodys"){const ot=(Array.isArray(D)?D:[]).filter(ft=>ft&&ft.id);me=ot.map(ft=>ft.id),console.log(":",ot)}const{data:Ee,error:ke}=await Re.from("movie_shots").update({[E]:me}).eq("id",C);if(ke){console.error(":",ke),alert("");return}d[C]&&(d[C][E]=me,f({...d})),await Me(new AbortController)}catch(me){console.error(":",me),alert("")}finally{N(null),A(null),R(""),I([])}},zt=async()=>{try{const{data:me,error:Ee}=await Re.from("movie_scs").select("index").eq("ep_id",e).order("index",{ascending:!1}).limit(1);let ke=1;!Ee&&me&&me.length>0&&(ke=me[0].index+1);const Xe={ep_id:e,name:"",index:ke},{data:ot,error:ft}=await Re.from("movie_scs").insert(Xe);if(ft){console.error(":",ft),alert("");return}console.log(":",ot),Me(new AbortController)}catch(me){console.error(":",me),alert("")}};return b.jsxs("div",{className:"editor-shots-content",children:[b.jsxs("div",{className:"editor-shots-header",children:[b.jsxs("h3",{className:"ep-number",children:[" ",X,"   -  ",G]}),b.jsx("button",{className:"add-sc-button",onClick:zt,children:""})]}),b.jsx("div",{className:"editor-shots-container-left",children:q.map(me=>b.jsxs("div",{className:"sc-card",children:[b.jsxs("div",{className:"sc-card-header",children:[b.jsxs("h3",{className:"sc-name",children:["",me.index,"-",me.name]}),b.jsx("button",{className:"add-seq-button",title:"",onClick:()=>ts(me.id),children:"-"}),b.jsx("button",{className:"add-seq-button",title:"",onClick:()=>to(me.id,me.index),children:"+"})]}),b.jsx("div",{className:"sc-seqs",children:me.movie_seqs.map(Ee=>b.jsxs("div",{className:"seq-item",children:[b.jsxs("div",{className:"seq-item-header",children:[b.jsx("p",{className:"seq-item-name",children:Ee.name}),b.jsx("button",{className:"add-shot-button",title:"",onClick:()=>Lt(Ee.id),children:"-"}),b.jsx("button",{className:"add-shot-button",title:"",onClick:()=>Je(Ee.id),children:"+"})]}),b.jsx("div",{className:"seq-shots",children:b.jsxs("table",{className:"shot-table",children:[b.jsx("thead",{children:b.jsxs("tr",{children:[b.jsx("th",{children:""}),b.jsx("th",{children:""}),b.jsx("th",{children:""}),b.jsx("th",{children:""}),b.jsx("th",{children:""}),b.jsx("th",{children:""})]})}),b.jsx("tbody",{children:Ee.movie_shots.map((ke,Xe)=>b.jsxs("tr",{className:"shot-item",children:[b.jsx("td",{children:ke.index}),b.jsx("td",{children:ke.pic?b.jsx("img",{src:ke.pic,alt:ke.descript||"./shot_thumb_default.png",style:{width:"50px",height:"50px"}}):b.jsx("img",{src:"./shot_thumb_default.png",alt:"",style:{width:"60px",height:"50px"}})}),b.jsx("td",{onClick:()=>ut(ke.id,"description"),style:{cursor:"pointer"},children:ke.description||""}),b.jsx("td",{onClick:()=>ut(ke.id,"prompt"),style:{cursor:"pointer"},children:ke.prompt||""}),b.jsx("td",{onClick:()=>ut(ke.id,"embodys"),style:{cursor:"pointer"},children:Zt(ke.embodys)}),b.jsxs("td",{className:"shot-action-buttons",children:[b.jsx("button",{onClick:()=>at(ke.id),title:"",className:"op-button op-edit-button",children:""}),b.jsx("button",{onClick:()=>_r(ke.id),title:"",className:"op-button op-delete-button",children:""})]})]},ke.id))})]})})]},Ee.id))})]},me.index))}),b.jsxs("div",{className:"editor-shots-container-right",style:{display:C?"block":"none"},children:[E==="description"&&b.jsxs("div",{className:"right-edit-field",children:[b.jsx("label",{children:":"}),b.jsx("textarea",{className:"edit-field-textarea",value:j,onChange:me=>R(me.target.value)}),b.jsxs("div",{className:"edit-button-container",children:[b.jsx("button",{className:"expand-button",onClick:gn,children:""}),b.jsx("button",{className:"save-button",onClick:Vn,children:""})]})]}),E==="prompt"&&b.jsxs("div",{className:"right-edit-field",children:[b.jsx("label",{children:":"}),b.jsx("textarea",{className:"edit-field-textarea",value:j,onChange:me=>R(me.target.value)}),b.jsxs("div",{className:"edit-button-container",children:[b.jsx("button",{className:"expand-button",onClick:gn,children:""}),b.jsx("button",{className:"save-button",onClick:Vn,children:""})]})]}),E==="embodys"&&b.jsxs("div",{className:"right-edit-field",children:[b.jsx("label",{children:":"}),b.jsx("div",{className:"embodys-list-container",children:b.jsx("div",{className:"embodys-list",children:D.map((me,Ee)=>b.jsxs("div",{className:"embodys-item",children:[b.jsx("span",{className:"embodys-name",children:me.name}),b.jsx("span",{className:"embodys-type",children:me.type}),b.jsx("button",{className:"delete-embodys-item",onClick:()=>nn(Ee),children:""})]},Ee))})}),b.jsxs("div",{className:"edit-button-container",children:[b.jsx("button",{className:"add-embodys-button",onClick:kn,children:""}),b.jsx("button",{className:"save-button",onClick:Vn,children:""})]})]})]}),he&&b.jsx("div",{className:"modal-overlay",children:b.jsxs("div",{className:"modal-content",children:[b.jsxs("div",{className:"modal-header",children:[b.jsx("h3",{children:""}),b.jsx("button",{className:"modal-close",onClick:()=>ge(!1),children:""})]}),b.jsx("div",{className:"modal-body",children:b.jsxs("div",{className:"form-group",children:[b.jsx("label",{children:":"}),b.jsx("input",{type:"text",value:pe,onChange:me=>be(me.target.value),placeholder:"",className:"modal-input"})]})}),b.jsxs("div",{className:"modal-footer",children:[b.jsx("button",{className:"modal-cancel",onClick:()=>ge(!1),children:""}),b.jsx("button",{className:"modal-confirm",onClick:no,children:""})]})]})}),F&&b.jsx("div",{className:"modal-overlay",children:b.jsxs("div",{className:"modal-content embody-select-modal",children:[b.jsxs("div",{className:"modal-header",children:[b.jsx("h3",{children:""}),b.jsx("button",{className:"modal-close",onClick:()=>{M(!1),B([]),V("")},children:""})]}),b.jsxs("div",{className:"modal-body",children:[b.jsxs("div",{className:"form-group",children:[b.jsx("label",{children:":"}),b.jsx("input",{type:"text",value:P,onChange:me=>V(me.target.value),placeholder:"",className:"modal-input"})]}),b.jsxs("div",{className:"embodys-select-list card-view",children:[z.filter(me=>me.name.toLowerCase().includes(P.toLowerCase())||me.description?.toLowerCase().includes(P.toLowerCase())).map(me=>b.jsxs("div",{className:`embody-card-wrapper ${k.includes(me.id)?"selected":""}`,onClick:Ee=>{Ee.stopPropagation(),dt(me.id)},children:[b.jsx(cd,{id:me.id,type:me.type,name:me.name,pic:me.pic,description:me.description,onEdit:()=>{},onDelete:()=>{}}),k.includes(me.id)&&b.jsx("div",{className:"card-select-indicator",children:""})]},me.id)),z.filter(me=>me.name.toLowerCase().includes(P.toLowerCase())||me.description?.toLowerCase().includes(P.toLowerCase())).length===0&&b.jsx("p",{className:"no-results",children:""})]})]}),b.jsxs("div",{className:"modal-footer",children:[b.jsx("button",{className:"modal-cancel",onClick:()=>{M(!1),B([]),V("")},children:""}),b.jsxs("button",{className:"modal-confirm",onClick:pn,disabled:k.length===0,children:[" (",k.length,")"]})]})]})})]})}function Ot(t){if(typeof t=="string"||typeof t=="number")return""+t;let e="";if(Array.isArray(t))for(let n=0,s;n<t.length;n++)(s=Ot(t[n]))!==""&&(e+=(e&&" ")+s);else for(let n in t)t[n]&&(e+=(e&&" ")+n);return e}var Yk={value:()=>{}};function sf(){for(var t=0,e=arguments.length,n={},s;t<e;++t){if(!(s=arguments[t]+"")||s in n||/[\s.]/.test(s))throw new Error("illegal type: "+s);n[s]=[]}return new ud(n)}function ud(t){this._=t}function Gk(t,e){return t.trim().split(/^|\s+/).map(function(n){var s="",a=n.indexOf(".");if(a>=0&&(s=n.slice(a+1),n=n.slice(0,a)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:s}})}ud.prototype=sf.prototype={constructor:ud,on:function(t,e){var n=this._,s=Gk(t+"",n),a,l=-1,c=s.length;if(arguments.length<2){for(;++l<c;)if((a=(t=s[l]).type)&&(a=Xk(n[a],t.name)))return a;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++l<c;)if(a=(t=s[l]).type)n[a]=fw(n[a],t.name,e);else if(e==null)for(a in n)n[a]=fw(n[a],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new ud(t)},call:function(t,e){if((a=arguments.length-2)>0)for(var n=new Array(a),s=0,a,l;s<a;++s)n[s]=arguments[s+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(l=this._[t],s=0,a=l.length;s<a;++s)l[s].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var s=this._[t],a=0,l=s.length;a<l;++a)s[a].value.apply(e,n)}};function Xk(t,e){for(var n=0,s=t.length,a;n<s;++n)if((a=t[n]).name===e)return a.value}function fw(t,e,n){for(var s=0,a=t.length;s<a;++s)if(t[s].name===e){t[s]=Yk,t=t.slice(0,s).concat(t.slice(s+1));break}return n!=null&&t.push({name:e,value:n}),t}var Pp="http://www.w3.org/1999/xhtml";const hw={svg:"http://www.w3.org/2000/svg",xhtml:Pp,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function af(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),hw.hasOwnProperty(e)?{space:hw[e],local:t}:t}function Kk(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===Pp&&e.documentElement.namespaceURI===Pp?e.createElement(t):e.createElementNS(n,t)}}function Qk(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function vE(t){var e=af(t);return(e.local?Qk:Kk)(e)}function Wk(){}function Mg(t){return t==null?Wk:function(){return this.querySelector(t)}}function Jk(t){typeof t!="function"&&(t=Mg(t));for(var e=this._groups,n=e.length,s=new Array(n),a=0;a<n;++a)for(var l=e[a],c=l.length,d=s[a]=new Array(c),f,h,g=0;g<c;++g)(f=l[g])&&(h=t.call(f,f.__data__,g,l))&&("__data__"in f&&(h.__data__=f.__data__),d[g]=h);return new Rn(s,this._parents)}function Zk(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function eM(){return[]}function bE(t){return t==null?eM:function(){return this.querySelectorAll(t)}}function tM(t){return function(){return Zk(t.apply(this,arguments))}}function nM(t){typeof t=="function"?t=tM(t):t=bE(t);for(var e=this._groups,n=e.length,s=[],a=[],l=0;l<n;++l)for(var c=e[l],d=c.length,f,h=0;h<d;++h)(f=c[h])&&(s.push(t.call(f,f.__data__,h,c)),a.push(f));return new Rn(s,a)}function _E(t){return function(){return this.matches(t)}}function wE(t){return function(e){return e.matches(t)}}var rM=Array.prototype.find;function sM(t){return function(){return rM.call(this.children,t)}}function iM(){return this.firstElementChild}function aM(t){return this.select(t==null?iM:sM(typeof t=="function"?t:wE(t)))}var oM=Array.prototype.filter;function lM(){return Array.from(this.children)}function cM(t){return function(){return oM.call(this.children,t)}}function uM(t){return this.selectAll(t==null?lM:cM(typeof t=="function"?t:wE(t)))}function dM(t){typeof t!="function"&&(t=_E(t));for(var e=this._groups,n=e.length,s=new Array(n),a=0;a<n;++a)for(var l=e[a],c=l.length,d=s[a]=[],f,h=0;h<c;++h)(f=l[h])&&t.call(f,f.__data__,h,l)&&d.push(f);return new Rn(s,this._parents)}function xE(t){return new Array(t.length)}function fM(){return new Rn(this._enter||this._groups.map(xE),this._parents)}function Rd(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}Rd.prototype={constructor:Rd,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function hM(t){return function(){return t}}function mM(t,e,n,s,a,l){for(var c=0,d,f=e.length,h=l.length;c<h;++c)(d=e[c])?(d.__data__=l[c],s[c]=d):n[c]=new Rd(t,l[c]);for(;c<f;++c)(d=e[c])&&(a[c]=d)}function pM(t,e,n,s,a,l,c){var d,f,h=new Map,g=e.length,p=l.length,v=new Array(g),_;for(d=0;d<g;++d)(f=e[d])&&(v[d]=_=c.call(f,f.__data__,d,e)+"",h.has(_)?a[d]=f:h.set(_,f));for(d=0;d<p;++d)_=c.call(t,l[d],d,l)+"",(f=h.get(_))?(s[d]=f,f.__data__=l[d],h.delete(_)):n[d]=new Rd(t,l[d]);for(d=0;d<g;++d)(f=e[d])&&h.get(v[d])===f&&(a[d]=f)}function gM(t){return t.__data__}function yM(t,e){if(!arguments.length)return Array.from(this,gM);var n=e?pM:mM,s=this._parents,a=this._groups;typeof t!="function"&&(t=hM(t));for(var l=a.length,c=new Array(l),d=new Array(l),f=new Array(l),h=0;h<l;++h){var g=s[h],p=a[h],v=p.length,_=vM(t.call(g,g&&g.__data__,h,s)),x=_.length,w=d[h]=new Array(x),S=c[h]=new Array(x),C=f[h]=new Array(v);n(g,p,w,S,C,_,e);for(var N=0,E=0,A,j;N<x;++N)if(A=w[N]){for(N>=E&&(E=N+1);!(j=S[E])&&++E<x;);A._next=j||null}}return c=new Rn(c,s),c._enter=d,c._exit=f,c}function vM(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function bM(){return new Rn(this._exit||this._groups.map(xE),this._parents)}function _M(t,e,n){var s=this.enter(),a=this,l=this.exit();return typeof t=="function"?(s=t(s),s&&(s=s.selection())):s=s.append(t+""),e!=null&&(a=e(a),a&&(a=a.selection())),n==null?l.remove():n(l),s&&a?s.merge(a).order():a}function wM(t){for(var e=t.selection?t.selection():t,n=this._groups,s=e._groups,a=n.length,l=s.length,c=Math.min(a,l),d=new Array(a),f=0;f<c;++f)for(var h=n[f],g=s[f],p=h.length,v=d[f]=new Array(p),_,x=0;x<p;++x)(_=h[x]||g[x])&&(v[x]=_);for(;f<a;++f)d[f]=n[f];return new Rn(d,this._parents)}function xM(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var s=t[e],a=s.length-1,l=s[a],c;--a>=0;)(c=s[a])&&(l&&c.compareDocumentPosition(l)^4&&l.parentNode.insertBefore(c,l),l=c);return this}function SM(t){t||(t=EM);function e(p,v){return p&&v?t(p.__data__,v.__data__):!p-!v}for(var n=this._groups,s=n.length,a=new Array(s),l=0;l<s;++l){for(var c=n[l],d=c.length,f=a[l]=new Array(d),h,g=0;g<d;++g)(h=c[g])&&(f[g]=h);f.sort(e)}return new Rn(a,this._parents).order()}function EM(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function CM(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function AM(){return Array.from(this)}function TM(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var s=t[e],a=0,l=s.length;a<l;++a){var c=s[a];if(c)return c}return null}function NM(){let t=0;for(const e of this)++t;return t}function OM(){return!this.node()}function jM(t){for(var e=this._groups,n=0,s=e.length;n<s;++n)for(var a=e[n],l=0,c=a.length,d;l<c;++l)(d=a[l])&&t.call(d,d.__data__,l,a);return this}function RM(t){return function(){this.removeAttribute(t)}}function kM(t){return function(){this.removeAttributeNS(t.space,t.local)}}function MM(t,e){return function(){this.setAttribute(t,e)}}function DM(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function UM(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function IM(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function $M(t,e){var n=af(t);if(arguments.length<2){var s=this.node();return n.local?s.getAttributeNS(n.space,n.local):s.getAttribute(n)}return this.each((e==null?n.local?kM:RM:typeof e=="function"?n.local?IM:UM:n.local?DM:MM)(n,e))}function SE(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function LM(t){return function(){this.style.removeProperty(t)}}function zM(t,e,n){return function(){this.style.setProperty(t,e,n)}}function BM(t,e,n){return function(){var s=e.apply(this,arguments);s==null?this.style.removeProperty(t):this.style.setProperty(t,s,n)}}function PM(t,e,n){return arguments.length>1?this.each((e==null?LM:typeof e=="function"?BM:zM)(t,e,n??"")):qa(this.node(),t)}function qa(t,e){return t.style.getPropertyValue(e)||SE(t).getComputedStyle(t,null).getPropertyValue(e)}function qM(t){return function(){delete this[t]}}function HM(t,e){return function(){this[t]=e}}function VM(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function FM(t,e){return arguments.length>1?this.each((e==null?qM:typeof e=="function"?VM:HM)(t,e)):this.node()[t]}function EE(t){return t.trim().split(/^|\s+/)}function Dg(t){return t.classList||new CE(t)}function CE(t){this._node=t,this._names=EE(t.getAttribute("class")||"")}CE.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function AE(t,e){for(var n=Dg(t),s=-1,a=e.length;++s<a;)n.add(e[s])}function TE(t,e){for(var n=Dg(t),s=-1,a=e.length;++s<a;)n.remove(e[s])}function YM(t){return function(){AE(this,t)}}function GM(t){return function(){TE(this,t)}}function XM(t,e){return function(){(e.apply(this,arguments)?AE:TE)(this,t)}}function KM(t,e){var n=EE(t+"");if(arguments.length<2){for(var s=Dg(this.node()),a=-1,l=n.length;++a<l;)if(!s.contains(n[a]))return!1;return!0}return this.each((typeof e=="function"?XM:e?YM:GM)(n,e))}function QM(){this.textContent=""}function WM(t){return function(){this.textContent=t}}function JM(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function ZM(t){return arguments.length?this.each(t==null?QM:(typeof t=="function"?JM:WM)(t)):this.node().textContent}function eD(){this.innerHTML=""}function tD(t){return function(){this.innerHTML=t}}function nD(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function rD(t){return arguments.length?this.each(t==null?eD:(typeof t=="function"?nD:tD)(t)):this.node().innerHTML}function sD(){this.nextSibling&&this.parentNode.appendChild(this)}function iD(){return this.each(sD)}function aD(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function oD(){return this.each(aD)}function lD(t){var e=typeof t=="function"?t:vE(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function cD(){return null}function uD(t,e){var n=typeof t=="function"?t:vE(t),s=e==null?cD:typeof e=="function"?e:Mg(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),s.apply(this,arguments)||null)})}function dD(){var t=this.parentNode;t&&t.removeChild(this)}function fD(){return this.each(dD)}function hD(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function mD(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function pD(t){return this.select(t?mD:hD)}function gD(t){return arguments.length?this.property("__data__",t):this.node().__data__}function yD(t){return function(e){t.call(this,e,this.__data__)}}function vD(t){return t.trim().split(/^|\s+/).map(function(e){var n="",s=e.indexOf(".");return s>=0&&(n=e.slice(s+1),e=e.slice(0,s)),{type:e,name:n}})}function bD(t){return function(){var e=this.__on;if(e){for(var n=0,s=-1,a=e.length,l;n<a;++n)l=e[n],(!t.type||l.type===t.type)&&l.name===t.name?this.removeEventListener(l.type,l.listener,l.options):e[++s]=l;++s?e.length=s:delete this.__on}}}function _D(t,e,n){return function(){var s=this.__on,a,l=yD(e);if(s){for(var c=0,d=s.length;c<d;++c)if((a=s[c]).type===t.type&&a.name===t.name){this.removeEventListener(a.type,a.listener,a.options),this.addEventListener(a.type,a.listener=l,a.options=n),a.value=e;return}}this.addEventListener(t.type,l,n),a={type:t.type,name:t.name,value:e,listener:l,options:n},s?s.push(a):this.__on=[a]}}function wD(t,e,n){var s=vD(t+""),a,l=s.length,c;if(arguments.length<2){var d=this.node().__on;if(d){for(var f=0,h=d.length,g;f<h;++f)for(a=0,g=d[f];a<l;++a)if((c=s[a]).type===g.type&&c.name===g.name)return g.value}return}for(d=e?_D:bD,a=0;a<l;++a)this.each(d(s[a],e,n));return this}function NE(t,e,n){var s=SE(t),a=s.CustomEvent;typeof a=="function"?a=new a(e,n):(a=s.document.createEvent("Event"),n?(a.initEvent(e,n.bubbles,n.cancelable),a.detail=n.detail):a.initEvent(e,!1,!1)),t.dispatchEvent(a)}function xD(t,e){return function(){return NE(this,t,e)}}function SD(t,e){return function(){return NE(this,t,e.apply(this,arguments))}}function ED(t,e){return this.each((typeof e=="function"?SD:xD)(t,e))}function*CD(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var s=t[e],a=0,l=s.length,c;a<l;++a)(c=s[a])&&(yield c)}var OE=[null];function Rn(t,e){this._groups=t,this._parents=e}function ec(){return new Rn([[document.documentElement]],OE)}function AD(){return this}Rn.prototype=ec.prototype={constructor:Rn,select:Jk,selectAll:nM,selectChild:aM,selectChildren:uM,filter:dM,data:yM,enter:fM,exit:bM,join:_M,merge:wM,selection:AD,order:xM,sort:SM,call:CM,nodes:AM,node:TM,size:NM,empty:OM,each:jM,attr:$M,style:PM,property:FM,classed:KM,text:ZM,html:rD,raise:iD,lower:oD,append:lD,insert:uD,remove:fD,clone:pD,datum:gD,on:wD,dispatch:ED,[Symbol.iterator]:CD};function jn(t){return typeof t=="string"?new Rn([[document.querySelector(t)]],[document.documentElement]):new Rn([[t]],OE)}function TD(t){let e;for(;e=t.sourceEvent;)t=e;return t}function tr(t,e){if(t=TD(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var s=n.createSVGPoint();return s.x=t.clientX,s.y=t.clientY,s=s.matrixTransform(e.getScreenCTM().inverse()),[s.x,s.y]}if(e.getBoundingClientRect){var a=e.getBoundingClientRect();return[t.clientX-a.left-e.clientLeft,t.clientY-a.top-e.clientTop]}}return[t.pageX,t.pageY]}const ND={passive:!1},$l={capture:!0,passive:!1};function rp(t){t.stopImmediatePropagation()}function za(t){t.preventDefault(),t.stopImmediatePropagation()}function jE(t){var e=t.document.documentElement,n=jn(t).on("dragstart.drag",za,$l);"onselectstart"in e?n.on("selectstart.drag",za,$l):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function RE(t,e){var n=t.document.documentElement,s=jn(t).on("dragstart.drag",null);e&&(s.on("click.drag",za,$l),setTimeout(function(){s.on("click.drag",null)},0)),"onselectstart"in n?s.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const Fu=t=>()=>t;function qp(t,{sourceEvent:e,subject:n,target:s,identifier:a,active:l,x:c,y:d,dx:f,dy:h,dispatch:g}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:s,enumerable:!0,configurable:!0},identifier:{value:a,enumerable:!0,configurable:!0},active:{value:l,enumerable:!0,configurable:!0},x:{value:c,enumerable:!0,configurable:!0},y:{value:d,enumerable:!0,configurable:!0},dx:{value:f,enumerable:!0,configurable:!0},dy:{value:h,enumerable:!0,configurable:!0},_:{value:g}})}qp.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function OD(t){return!t.ctrlKey&&!t.button}function jD(){return this.parentNode}function RD(t,e){return e??{x:t.x,y:t.y}}function kD(){return navigator.maxTouchPoints||"ontouchstart"in this}function kE(){var t=OD,e=jD,n=RD,s=kD,a={},l=sf("start","drag","end"),c=0,d,f,h,g,p=0;function v(A){A.on("mousedown.drag",_).filter(s).on("touchstart.drag",S).on("touchmove.drag",C,ND).on("touchend.drag touchcancel.drag",N).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function _(A,j){if(!(g||!t.call(this,A,j))){var R=E(this,e.call(this,A,j),A,j,"mouse");R&&(jn(A.view).on("mousemove.drag",x,$l).on("mouseup.drag",w,$l),jE(A.view),rp(A),h=!1,d=A.clientX,f=A.clientY,R("start",A))}}function x(A){if(za(A),!h){var j=A.clientX-d,R=A.clientY-f;h=j*j+R*R>p}a.mouse("drag",A)}function w(A){jn(A.view).on("mousemove.drag mouseup.drag",null),RE(A.view,h),za(A),a.mouse("end",A)}function S(A,j){if(t.call(this,A,j)){var R=A.changedTouches,D=e.call(this,A,j),I=R.length,q,Q;for(q=0;q<I;++q)(Q=E(this,D,A,j,R[q].identifier,R[q]))&&(rp(A),Q("start",A,R[q]))}}function C(A){var j=A.changedTouches,R=j.length,D,I;for(D=0;D<R;++D)(I=a[j[D].identifier])&&(za(A),I("drag",A,j[D]))}function N(A){var j=A.changedTouches,R=j.length,D,I;for(g&&clearTimeout(g),g=setTimeout(function(){g=null},500),D=0;D<R;++D)(I=a[j[D].identifier])&&(rp(A),I("end",A,j[D]))}function E(A,j,R,D,I,q){var Q=l.copy(),G=tr(q||R,j),L,X,$;if(($=n.call(A,new qp("beforestart",{sourceEvent:R,target:v,identifier:I,active:c,x:G[0],y:G[1],dx:0,dy:0,dispatch:Q}),D))!=null)return L=$.x-G[0]||0,X=$.y-G[1]||0,function F(M,z,H){var P=G,V;switch(M){case"start":a[I]=F,V=c++;break;case"end":delete a[I],--c;case"drag":G=tr(H||z,j),V=c;break}Q.call(M,A,new qp(M,{sourceEvent:z,subject:$,target:v,identifier:I,active:V,x:G[0]+L,y:G[1]+X,dx:G[0]-P[0],dy:G[1]-P[1],dispatch:Q}),D)}}return v.filter=function(A){return arguments.length?(t=typeof A=="function"?A:Fu(!!A),v):t},v.container=function(A){return arguments.length?(e=typeof A=="function"?A:Fu(A),v):e},v.subject=function(A){return arguments.length?(n=typeof A=="function"?A:Fu(A),v):n},v.touchable=function(A){return arguments.length?(s=typeof A=="function"?A:Fu(!!A),v):s},v.on=function(){var A=l.on.apply(l,arguments);return A===l?v:A},v.clickDistance=function(A){return arguments.length?(p=(A=+A)*A,v):Math.sqrt(p)},v}function Ug(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function ME(t,e){var n=Object.create(t.prototype);for(var s in e)n[s]=e[s];return n}function tc(){}var Ll=.7,kd=1/Ll,Ba="\\s*([+-]?\\d+)\\s*",zl="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",gr="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",MD=/^#([0-9a-f]{3,8})$/,DD=new RegExp(`^rgb\\(${Ba},${Ba},${Ba}\\)$`),UD=new RegExp(`^rgb\\(${gr},${gr},${gr}\\)$`),ID=new RegExp(`^rgba\\(${Ba},${Ba},${Ba},${zl}\\)$`),$D=new RegExp(`^rgba\\(${gr},${gr},${gr},${zl}\\)$`),LD=new RegExp(`^hsl\\(${zl},${gr},${gr}\\)$`),zD=new RegExp(`^hsla\\(${zl},${gr},${gr},${zl}\\)$`),mw={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Ug(tc,Ai,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:pw,formatHex:pw,formatHex8:BD,formatHsl:PD,formatRgb:gw,toString:gw});function pw(){return this.rgb().formatHex()}function BD(){return this.rgb().formatHex8()}function PD(){return DE(this).formatHsl()}function gw(){return this.rgb().formatRgb()}function Ai(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=MD.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?yw(e):n===3?new hn(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?Yu(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?Yu(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=DD.exec(t))?new hn(e[1],e[2],e[3],1):(e=UD.exec(t))?new hn(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=ID.exec(t))?Yu(e[1],e[2],e[3],e[4]):(e=$D.exec(t))?Yu(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=LD.exec(t))?_w(e[1],e[2]/100,e[3]/100,1):(e=zD.exec(t))?_w(e[1],e[2]/100,e[3]/100,e[4]):mw.hasOwnProperty(t)?yw(mw[t]):t==="transparent"?new hn(NaN,NaN,NaN,0):null}function yw(t){return new hn(t>>16&255,t>>8&255,t&255,1)}function Yu(t,e,n,s){return s<=0&&(t=e=n=NaN),new hn(t,e,n,s)}function qD(t){return t instanceof tc||(t=Ai(t)),t?(t=t.rgb(),new hn(t.r,t.g,t.b,t.opacity)):new hn}function Hp(t,e,n,s){return arguments.length===1?qD(t):new hn(t,e,n,s??1)}function hn(t,e,n,s){this.r=+t,this.g=+e,this.b=+n,this.opacity=+s}Ug(hn,Hp,ME(tc,{brighter(t){return t=t==null?kd:Math.pow(kd,t),new hn(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Ll:Math.pow(Ll,t),new hn(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new hn(Ei(this.r),Ei(this.g),Ei(this.b),Md(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:vw,formatHex:vw,formatHex8:HD,formatRgb:bw,toString:bw}));function vw(){return`#${_i(this.r)}${_i(this.g)}${_i(this.b)}`}function HD(){return`#${_i(this.r)}${_i(this.g)}${_i(this.b)}${_i((isNaN(this.opacity)?1:this.opacity)*255)}`}function bw(){const t=Md(this.opacity);return`${t===1?"rgb(":"rgba("}${Ei(this.r)}, ${Ei(this.g)}, ${Ei(this.b)}${t===1?")":`, ${t})`}`}function Md(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Ei(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function _i(t){return t=Ei(t),(t<16?"0":"")+t.toString(16)}function _w(t,e,n,s){return s<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new nr(t,e,n,s)}function DE(t){if(t instanceof nr)return new nr(t.h,t.s,t.l,t.opacity);if(t instanceof tc||(t=Ai(t)),!t)return new nr;if(t instanceof nr)return t;t=t.rgb();var e=t.r/255,n=t.g/255,s=t.b/255,a=Math.min(e,n,s),l=Math.max(e,n,s),c=NaN,d=l-a,f=(l+a)/2;return d?(e===l?c=(n-s)/d+(n<s)*6:n===l?c=(s-e)/d+2:c=(e-n)/d+4,d/=f<.5?l+a:2-l-a,c*=60):d=f>0&&f<1?0:c,new nr(c,d,f,t.opacity)}function VD(t,e,n,s){return arguments.length===1?DE(t):new nr(t,e,n,s??1)}function nr(t,e,n,s){this.h=+t,this.s=+e,this.l=+n,this.opacity=+s}Ug(nr,VD,ME(tc,{brighter(t){return t=t==null?kd:Math.pow(kd,t),new nr(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Ll:Math.pow(Ll,t),new nr(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,s=n+(n<.5?n:1-n)*e,a=2*n-s;return new hn(sp(t>=240?t-240:t+120,a,s),sp(t,a,s),sp(t<120?t+240:t-120,a,s),this.opacity)},clamp(){return new nr(ww(this.h),Gu(this.s),Gu(this.l),Md(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Md(this.opacity);return`${t===1?"hsl(":"hsla("}${ww(this.h)}, ${Gu(this.s)*100}%, ${Gu(this.l)*100}%${t===1?")":`, ${t})`}`}}));function ww(t){return t=(t||0)%360,t<0?t+360:t}function Gu(t){return Math.max(0,Math.min(1,t||0))}function sp(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const Ig=t=>()=>t;function FD(t,e){return function(n){return t+n*e}}function YD(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(s){return Math.pow(t+s*e,n)}}function GD(t){return(t=+t)==1?UE:function(e,n){return n-e?YD(e,n,t):Ig(isNaN(e)?n:e)}}function UE(t,e){var n=e-t;return n?FD(t,n):Ig(isNaN(t)?e:t)}const Dd=(function t(e){var n=GD(e);function s(a,l){var c=n((a=Hp(a)).r,(l=Hp(l)).r),d=n(a.g,l.g),f=n(a.b,l.b),h=UE(a.opacity,l.opacity);return function(g){return a.r=c(g),a.g=d(g),a.b=f(g),a.opacity=h(g),a+""}}return s.gamma=t,s})(1);function XD(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,s=e.slice(),a;return function(l){for(a=0;a<n;++a)s[a]=t[a]*(1-l)+e[a]*l;return s}}function KD(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function QD(t,e){var n=e?e.length:0,s=t?Math.min(n,t.length):0,a=new Array(s),l=new Array(n),c;for(c=0;c<s;++c)a[c]=Tl(t[c],e[c]);for(;c<n;++c)l[c]=e[c];return function(d){for(c=0;c<s;++c)l[c]=a[c](d);return l}}function WD(t,e){var n=new Date;return t=+t,e=+e,function(s){return n.setTime(t*(1-s)+e*s),n}}function mr(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function JD(t,e){var n={},s={},a;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(a in e)a in t?n[a]=Tl(t[a],e[a]):s[a]=e[a];return function(l){for(a in n)s[a]=n[a](l);return s}}var Vp=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ip=new RegExp(Vp.source,"g");function ZD(t){return function(){return t}}function eU(t){return function(e){return t(e)+""}}function IE(t,e){var n=Vp.lastIndex=ip.lastIndex=0,s,a,l,c=-1,d=[],f=[];for(t=t+"",e=e+"";(s=Vp.exec(t))&&(a=ip.exec(e));)(l=a.index)>n&&(l=e.slice(n,l),d[c]?d[c]+=l:d[++c]=l),(s=s[0])===(a=a[0])?d[c]?d[c]+=a:d[++c]=a:(d[++c]=null,f.push({i:c,x:mr(s,a)})),n=ip.lastIndex;return n<e.length&&(l=e.slice(n),d[c]?d[c]+=l:d[++c]=l),d.length<2?f[0]?eU(f[0].x):ZD(e):(e=f.length,function(h){for(var g=0,p;g<e;++g)d[(p=f[g]).i]=p.x(h);return d.join("")})}function Tl(t,e){var n=typeof e,s;return e==null||n==="boolean"?Ig(e):(n==="number"?mr:n==="string"?(s=Ai(e))?(e=s,Dd):IE:e instanceof Ai?Dd:e instanceof Date?WD:KD(e)?XD:Array.isArray(e)?QD:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?JD:mr)(t,e)}var xw=180/Math.PI,Fp={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function $E(t,e,n,s,a,l){var c,d,f;return(c=Math.sqrt(t*t+e*e))&&(t/=c,e/=c),(f=t*n+e*s)&&(n-=t*f,s-=e*f),(d=Math.sqrt(n*n+s*s))&&(n/=d,s/=d,f/=d),t*s<e*n&&(t=-t,e=-e,f=-f,c=-c),{translateX:a,translateY:l,rotate:Math.atan2(e,t)*xw,skewX:Math.atan(f)*xw,scaleX:c,scaleY:d}}var Xu;function tU(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?Fp:$E(e.a,e.b,e.c,e.d,e.e,e.f)}function nU(t){return t==null||(Xu||(Xu=document.createElementNS("http://www.w3.org/2000/svg","g")),Xu.setAttribute("transform",t),!(t=Xu.transform.baseVal.consolidate()))?Fp:(t=t.matrix,$E(t.a,t.b,t.c,t.d,t.e,t.f))}function LE(t,e,n,s){function a(h){return h.length?h.pop()+" ":""}function l(h,g,p,v,_,x){if(h!==p||g!==v){var w=_.push("translate(",null,e,null,n);x.push({i:w-4,x:mr(h,p)},{i:w-2,x:mr(g,v)})}else(p||v)&&_.push("translate("+p+e+v+n)}function c(h,g,p,v){h!==g?(h-g>180?g+=360:g-h>180&&(h+=360),v.push({i:p.push(a(p)+"rotate(",null,s)-2,x:mr(h,g)})):g&&p.push(a(p)+"rotate("+g+s)}function d(h,g,p,v){h!==g?v.push({i:p.push(a(p)+"skewX(",null,s)-2,x:mr(h,g)}):g&&p.push(a(p)+"skewX("+g+s)}function f(h,g,p,v,_,x){if(h!==p||g!==v){var w=_.push(a(_)+"scale(",null,",",null,")");x.push({i:w-4,x:mr(h,p)},{i:w-2,x:mr(g,v)})}else(p!==1||v!==1)&&_.push(a(_)+"scale("+p+","+v+")")}return function(h,g){var p=[],v=[];return h=t(h),g=t(g),l(h.translateX,h.translateY,g.translateX,g.translateY,p,v),c(h.rotate,g.rotate,p,v),d(h.skewX,g.skewX,p,v),f(h.scaleX,h.scaleY,g.scaleX,g.scaleY,p,v),h=g=null,function(_){for(var x=-1,w=v.length,S;++x<w;)p[(S=v[x]).i]=S.x(_);return p.join("")}}}var rU=LE(tU,"px, ","px)","deg)"),sU=LE(nU,", ",")",")"),iU=1e-12;function Sw(t){return((t=Math.exp(t))+1/t)/2}function aU(t){return((t=Math.exp(t))-1/t)/2}function oU(t){return((t=Math.exp(2*t))-1)/(t+1)}const dd=(function t(e,n,s){function a(l,c){var d=l[0],f=l[1],h=l[2],g=c[0],p=c[1],v=c[2],_=g-d,x=p-f,w=_*_+x*x,S,C;if(w<iU)C=Math.log(v/h)/e,S=function(D){return[d+D*_,f+D*x,h*Math.exp(e*D*C)]};else{var N=Math.sqrt(w),E=(v*v-h*h+s*w)/(2*h*n*N),A=(v*v-h*h-s*w)/(2*v*n*N),j=Math.log(Math.sqrt(E*E+1)-E),R=Math.log(Math.sqrt(A*A+1)-A);C=(R-j)/e,S=function(D){var I=D*C,q=Sw(j),Q=h/(n*N)*(q*oU(e*I+j)-aU(j));return[d+Q*_,f+Q*x,h*q/Sw(e*I+j)]}}return S.duration=C*1e3*e/Math.SQRT2,S}return a.rho=function(l){var c=Math.max(.001,+l),d=c*c,f=d*d;return t(c,d,f)},a})(Math.SQRT2,2,4);var Ha=0,fl=0,ol=0,zE=1e3,Ud,hl,Id=0,Ti=0,of=0,Bl=typeof performance=="object"&&performance.now?performance:Date,BE=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function $g(){return Ti||(BE(lU),Ti=Bl.now()+of)}function lU(){Ti=0}function $d(){this._call=this._time=this._next=null}$d.prototype=PE.prototype={constructor:$d,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?$g():+n)+(e==null?0:+e),!this._next&&hl!==this&&(hl?hl._next=this:Ud=this,hl=this),this._call=t,this._time=n,Yp()},stop:function(){this._call&&(this._call=null,this._time=1/0,Yp())}};function PE(t,e,n){var s=new $d;return s.restart(t,e,n),s}function cU(){$g(),++Ha;for(var t=Ud,e;t;)(e=Ti-t._time)>=0&&t._call.call(void 0,e),t=t._next;--Ha}function Ew(){Ti=(Id=Bl.now())+of,Ha=fl=0;try{cU()}finally{Ha=0,dU(),Ti=0}}function uU(){var t=Bl.now(),e=t-Id;e>zE&&(of-=e,Id=t)}function dU(){for(var t,e=Ud,n,s=1/0;e;)e._call?(s>e._time&&(s=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:Ud=n);hl=t,Yp(s)}function Yp(t){if(!Ha){fl&&(fl=clearTimeout(fl));var e=t-Ti;e>24?(t<1/0&&(fl=setTimeout(Ew,t-Bl.now()-of)),ol&&(ol=clearInterval(ol))):(ol||(Id=Bl.now(),ol=setInterval(uU,zE)),Ha=1,BE(Ew))}}function Cw(t,e,n){var s=new $d;return e=e==null?0:+e,s.restart(a=>{s.stop(),t(a+e)},e,n),s}var fU=sf("start","end","cancel","interrupt"),hU=[],qE=0,Aw=1,Gp=2,fd=3,Tw=4,Xp=5,hd=6;function lf(t,e,n,s,a,l){var c=t.__transition;if(!c)t.__transition={};else if(n in c)return;mU(t,n,{name:e,index:s,group:a,on:fU,tween:hU,time:l.time,delay:l.delay,duration:l.duration,ease:l.ease,timer:null,state:qE})}function Lg(t,e){var n=ar(t,e);if(n.state>qE)throw new Error("too late; already scheduled");return n}function br(t,e){var n=ar(t,e);if(n.state>fd)throw new Error("too late; already running");return n}function ar(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function mU(t,e,n){var s=t.__transition,a;s[e]=n,n.timer=PE(l,0,n.time);function l(h){n.state=Aw,n.timer.restart(c,n.delay,n.time),n.delay<=h&&c(h-n.delay)}function c(h){var g,p,v,_;if(n.state!==Aw)return f();for(g in s)if(_=s[g],_.name===n.name){if(_.state===fd)return Cw(c);_.state===Tw?(_.state=hd,_.timer.stop(),_.on.call("interrupt",t,t.__data__,_.index,_.group),delete s[g]):+g<e&&(_.state=hd,_.timer.stop(),_.on.call("cancel",t,t.__data__,_.index,_.group),delete s[g])}if(Cw(function(){n.state===fd&&(n.state=Tw,n.timer.restart(d,n.delay,n.time),d(h))}),n.state=Gp,n.on.call("start",t,t.__data__,n.index,n.group),n.state===Gp){for(n.state=fd,a=new Array(v=n.tween.length),g=0,p=-1;g<v;++g)(_=n.tween[g].value.call(t,t.__data__,n.index,n.group))&&(a[++p]=_);a.length=p+1}}function d(h){for(var g=h<n.duration?n.ease.call(null,h/n.duration):(n.timer.restart(f),n.state=Xp,1),p=-1,v=a.length;++p<v;)a[p].call(t,g);n.state===Xp&&(n.on.call("end",t,t.__data__,n.index,n.group),f())}function f(){n.state=hd,n.timer.stop(),delete s[e];for(var h in s)return;delete t.__transition}}function md(t,e){var n=t.__transition,s,a,l=!0,c;if(n){e=e==null?null:e+"";for(c in n){if((s=n[c]).name!==e){l=!1;continue}a=s.state>Gp&&s.state<Xp,s.state=hd,s.timer.stop(),s.on.call(a?"interrupt":"cancel",t,t.__data__,s.index,s.group),delete n[c]}l&&delete t.__transition}}function pU(t){return this.each(function(){md(this,t)})}function gU(t,e){var n,s;return function(){var a=br(this,t),l=a.tween;if(l!==n){s=n=l;for(var c=0,d=s.length;c<d;++c)if(s[c].name===e){s=s.slice(),s.splice(c,1);break}}a.tween=s}}function yU(t,e,n){var s,a;if(typeof n!="function")throw new Error;return function(){var l=br(this,t),c=l.tween;if(c!==s){a=(s=c).slice();for(var d={name:e,value:n},f=0,h=a.length;f<h;++f)if(a[f].name===e){a[f]=d;break}f===h&&a.push(d)}l.tween=a}}function vU(t,e){var n=this._id;if(t+="",arguments.length<2){for(var s=ar(this.node(),n).tween,a=0,l=s.length,c;a<l;++a)if((c=s[a]).name===t)return c.value;return null}return this.each((e==null?gU:yU)(n,t,e))}function zg(t,e,n){var s=t._id;return t.each(function(){var a=br(this,s);(a.value||(a.value={}))[e]=n.apply(this,arguments)}),function(a){return ar(a,s).value[e]}}function HE(t,e){var n;return(typeof e=="number"?mr:e instanceof Ai?Dd:(n=Ai(e))?(e=n,Dd):IE)(t,e)}function bU(t){return function(){this.removeAttribute(t)}}function _U(t){return function(){this.removeAttributeNS(t.space,t.local)}}function wU(t,e,n){var s,a=n+"",l;return function(){var c=this.getAttribute(t);return c===a?null:c===s?l:l=e(s=c,n)}}function xU(t,e,n){var s,a=n+"",l;return function(){var c=this.getAttributeNS(t.space,t.local);return c===a?null:c===s?l:l=e(s=c,n)}}function SU(t,e,n){var s,a,l;return function(){var c,d=n(this),f;return d==null?void this.removeAttribute(t):(c=this.getAttribute(t),f=d+"",c===f?null:c===s&&f===a?l:(a=f,l=e(s=c,d)))}}function EU(t,e,n){var s,a,l;return function(){var c,d=n(this),f;return d==null?void this.removeAttributeNS(t.space,t.local):(c=this.getAttributeNS(t.space,t.local),f=d+"",c===f?null:c===s&&f===a?l:(a=f,l=e(s=c,d)))}}function CU(t,e){var n=af(t),s=n==="transform"?sU:HE;return this.attrTween(t,typeof e=="function"?(n.local?EU:SU)(n,s,zg(this,"attr."+t,e)):e==null?(n.local?_U:bU)(n):(n.local?xU:wU)(n,s,e))}function AU(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function TU(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function NU(t,e){var n,s;function a(){var l=e.apply(this,arguments);return l!==s&&(n=(s=l)&&TU(t,l)),n}return a._value=e,a}function OU(t,e){var n,s;function a(){var l=e.apply(this,arguments);return l!==s&&(n=(s=l)&&AU(t,l)),n}return a._value=e,a}function jU(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var s=af(t);return this.tween(n,(s.local?NU:OU)(s,e))}function RU(t,e){return function(){Lg(this,t).delay=+e.apply(this,arguments)}}function kU(t,e){return e=+e,function(){Lg(this,t).delay=e}}function MU(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?RU:kU)(e,t)):ar(this.node(),e).delay}function DU(t,e){return function(){br(this,t).duration=+e.apply(this,arguments)}}function UU(t,e){return e=+e,function(){br(this,t).duration=e}}function IU(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?DU:UU)(e,t)):ar(this.node(),e).duration}function $U(t,e){if(typeof e!="function")throw new Error;return function(){br(this,t).ease=e}}function LU(t){var e=this._id;return arguments.length?this.each($U(e,t)):ar(this.node(),e).ease}function zU(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;br(this,t).ease=n}}function BU(t){if(typeof t!="function")throw new Error;return this.each(zU(this._id,t))}function PU(t){typeof t!="function"&&(t=_E(t));for(var e=this._groups,n=e.length,s=new Array(n),a=0;a<n;++a)for(var l=e[a],c=l.length,d=s[a]=[],f,h=0;h<c;++h)(f=l[h])&&t.call(f,f.__data__,h,l)&&d.push(f);return new Qr(s,this._parents,this._name,this._id)}function qU(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,s=e.length,a=n.length,l=Math.min(s,a),c=new Array(s),d=0;d<l;++d)for(var f=e[d],h=n[d],g=f.length,p=c[d]=new Array(g),v,_=0;_<g;++_)(v=f[_]||h[_])&&(p[_]=v);for(;d<s;++d)c[d]=e[d];return new Qr(c,this._parents,this._name,this._id)}function HU(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function VU(t,e,n){var s,a,l=HU(e)?Lg:br;return function(){var c=l(this,t),d=c.on;d!==s&&(a=(s=d).copy()).on(e,n),c.on=a}}function FU(t,e){var n=this._id;return arguments.length<2?ar(this.node(),n).on.on(t):this.each(VU(n,t,e))}function YU(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function GU(){return this.on("end.remove",YU(this._id))}function XU(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Mg(t));for(var s=this._groups,a=s.length,l=new Array(a),c=0;c<a;++c)for(var d=s[c],f=d.length,h=l[c]=new Array(f),g,p,v=0;v<f;++v)(g=d[v])&&(p=t.call(g,g.__data__,v,d))&&("__data__"in g&&(p.__data__=g.__data__),h[v]=p,lf(h[v],e,n,v,h,ar(g,n)));return new Qr(l,this._parents,e,n)}function KU(t){var e=this._name,n=this._id;typeof t!="function"&&(t=bE(t));for(var s=this._groups,a=s.length,l=[],c=[],d=0;d<a;++d)for(var f=s[d],h=f.length,g,p=0;p<h;++p)if(g=f[p]){for(var v=t.call(g,g.__data__,p,f),_,x=ar(g,n),w=0,S=v.length;w<S;++w)(_=v[w])&&lf(_,e,n,w,v,x);l.push(v),c.push(g)}return new Qr(l,c,e,n)}var QU=ec.prototype.constructor;function WU(){return new QU(this._groups,this._parents)}function JU(t,e){var n,s,a;return function(){var l=qa(this,t),c=(this.style.removeProperty(t),qa(this,t));return l===c?null:l===n&&c===s?a:a=e(n=l,s=c)}}function VE(t){return function(){this.style.removeProperty(t)}}function ZU(t,e,n){var s,a=n+"",l;return function(){var c=qa(this,t);return c===a?null:c===s?l:l=e(s=c,n)}}function eI(t,e,n){var s,a,l;return function(){var c=qa(this,t),d=n(this),f=d+"";return d==null&&(f=d=(this.style.removeProperty(t),qa(this,t))),c===f?null:c===s&&f===a?l:(a=f,l=e(s=c,d))}}function tI(t,e){var n,s,a,l="style."+e,c="end."+l,d;return function(){var f=br(this,t),h=f.on,g=f.value[l]==null?d||(d=VE(e)):void 0;(h!==n||a!==g)&&(s=(n=h).copy()).on(c,a=g),f.on=s}}function nI(t,e,n){var s=(t+="")=="transform"?rU:HE;return e==null?this.styleTween(t,JU(t,s)).on("end.style."+t,VE(t)):typeof e=="function"?this.styleTween(t,eI(t,s,zg(this,"style."+t,e))).each(tI(this._id,t)):this.styleTween(t,ZU(t,s,e),n).on("end.style."+t,null)}function rI(t,e,n){return function(s){this.style.setProperty(t,e.call(this,s),n)}}function sI(t,e,n){var s,a;function l(){var c=e.apply(this,arguments);return c!==a&&(s=(a=c)&&rI(t,c,n)),s}return l._value=e,l}function iI(t,e,n){var s="style."+(t+="");if(arguments.length<2)return(s=this.tween(s))&&s._value;if(e==null)return this.tween(s,null);if(typeof e!="function")throw new Error;return this.tween(s,sI(t,e,n??""))}function aI(t){return function(){this.textContent=t}}function oI(t){return function(){var e=t(this);this.textContent=e??""}}function lI(t){return this.tween("text",typeof t=="function"?oI(zg(this,"text",t)):aI(t==null?"":t+""))}function cI(t){return function(e){this.textContent=t.call(this,e)}}function uI(t){var e,n;function s(){var a=t.apply(this,arguments);return a!==n&&(e=(n=a)&&cI(a)),e}return s._value=t,s}function dI(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,uI(t))}function fI(){for(var t=this._name,e=this._id,n=FE(),s=this._groups,a=s.length,l=0;l<a;++l)for(var c=s[l],d=c.length,f,h=0;h<d;++h)if(f=c[h]){var g=ar(f,e);lf(f,t,n,h,c,{time:g.time+g.delay+g.duration,delay:0,duration:g.duration,ease:g.ease})}return new Qr(s,this._parents,t,n)}function hI(){var t,e,n=this,s=n._id,a=n.size();return new Promise(function(l,c){var d={value:c},f={value:function(){--a===0&&l()}};n.each(function(){var h=br(this,s),g=h.on;g!==t&&(e=(t=g).copy(),e._.cancel.push(d),e._.interrupt.push(d),e._.end.push(f)),h.on=e}),a===0&&l()})}var mI=0;function Qr(t,e,n,s){this._groups=t,this._parents=e,this._name=n,this._id=s}function FE(){return++mI}var Hr=ec.prototype;Qr.prototype={constructor:Qr,select:XU,selectAll:KU,selectChild:Hr.selectChild,selectChildren:Hr.selectChildren,filter:PU,merge:qU,selection:WU,transition:fI,call:Hr.call,nodes:Hr.nodes,node:Hr.node,size:Hr.size,empty:Hr.empty,each:Hr.each,on:FU,attr:CU,attrTween:jU,style:nI,styleTween:iI,text:lI,textTween:dI,remove:GU,tween:vU,delay:MU,duration:IU,ease:LU,easeVarying:BU,end:hI,[Symbol.iterator]:Hr[Symbol.iterator]};function pI(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var gI={time:null,delay:0,duration:250,ease:pI};function yI(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function vI(t){var e,n;t instanceof Qr?(e=t._id,t=t._name):(e=FE(),(n=gI).time=$g(),t=t==null?null:t+"");for(var s=this._groups,a=s.length,l=0;l<a;++l)for(var c=s[l],d=c.length,f,h=0;h<d;++h)(f=c[h])&&lf(f,t,e,h,c,n||yI(f,e));return new Qr(s,this._parents,t,e)}ec.prototype.interrupt=pU;ec.prototype.transition=vI;const Ku=t=>()=>t;function bI(t,{sourceEvent:e,target:n,transform:s,dispatch:a}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:s,enumerable:!0,configurable:!0},_:{value:a}})}function Gr(t,e,n){this.k=t,this.x=e,this.y=n}Gr.prototype={constructor:Gr,scale:function(t){return t===1?this:new Gr(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new Gr(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var cf=new Gr(1,0,0);YE.prototype=Gr.prototype;function YE(t){for(;!t.__zoom;)if(!(t=t.parentNode))return cf;return t.__zoom}function ap(t){t.stopImmediatePropagation()}function ll(t){t.preventDefault(),t.stopImmediatePropagation()}function _I(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function wI(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function Nw(){return this.__zoom||cf}function xI(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function SI(){return navigator.maxTouchPoints||"ontouchstart"in this}function EI(t,e,n){var s=t.invertX(e[0][0])-n[0][0],a=t.invertX(e[1][0])-n[1][0],l=t.invertY(e[0][1])-n[0][1],c=t.invertY(e[1][1])-n[1][1];return t.translate(a>s?(s+a)/2:Math.min(0,s)||Math.max(0,a),c>l?(l+c)/2:Math.min(0,l)||Math.max(0,c))}function GE(){var t=_I,e=wI,n=EI,s=xI,a=SI,l=[0,1/0],c=[[-1/0,-1/0],[1/0,1/0]],d=250,f=dd,h=sf("start","zoom","end"),g,p,v,_=500,x=150,w=0,S=10;function C($){$.property("__zoom",Nw).on("wheel.zoom",I,{passive:!1}).on("mousedown.zoom",q).on("dblclick.zoom",Q).filter(a).on("touchstart.zoom",G).on("touchmove.zoom",L).on("touchend.zoom touchcancel.zoom",X).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}C.transform=function($,F,M,z){var H=$.selection?$.selection():$;H.property("__zoom",Nw),$!==H?j($,F,M,z):H.interrupt().each(function(){R(this,arguments).event(z).start().zoom(null,typeof F=="function"?F.apply(this,arguments):F).end()})},C.scaleBy=function($,F,M,z){C.scaleTo($,function(){var H=this.__zoom.k,P=typeof F=="function"?F.apply(this,arguments):F;return H*P},M,z)},C.scaleTo=function($,F,M,z){C.transform($,function(){var H=e.apply(this,arguments),P=this.__zoom,V=M==null?A(H):typeof M=="function"?M.apply(this,arguments):M,k=P.invert(V),B=typeof F=="function"?F.apply(this,arguments):F;return n(E(N(P,B),V,k),H,c)},M,z)},C.translateBy=function($,F,M,z){C.transform($,function(){return n(this.__zoom.translate(typeof F=="function"?F.apply(this,arguments):F,typeof M=="function"?M.apply(this,arguments):M),e.apply(this,arguments),c)},null,z)},C.translateTo=function($,F,M,z,H){C.transform($,function(){var P=e.apply(this,arguments),V=this.__zoom,k=z==null?A(P):typeof z=="function"?z.apply(this,arguments):z;return n(cf.translate(k[0],k[1]).scale(V.k).translate(typeof F=="function"?-F.apply(this,arguments):-F,typeof M=="function"?-M.apply(this,arguments):-M),P,c)},z,H)};function N($,F){return F=Math.max(l[0],Math.min(l[1],F)),F===$.k?$:new Gr(F,$.x,$.y)}function E($,F,M){var z=F[0]-M[0]*$.k,H=F[1]-M[1]*$.k;return z===$.x&&H===$.y?$:new Gr($.k,z,H)}function A($){return[(+$[0][0]+ +$[1][0])/2,(+$[0][1]+ +$[1][1])/2]}function j($,F,M,z){$.on("start.zoom",function(){R(this,arguments).event(z).start()}).on("interrupt.zoom end.zoom",function(){R(this,arguments).event(z).end()}).tween("zoom",function(){var H=this,P=arguments,V=R(H,P).event(z),k=e.apply(H,P),B=M==null?A(k):typeof M=="function"?M.apply(H,P):M,W=Math.max(k[1][0]-k[0][0],k[1][1]-k[0][1]),ee=H.__zoom,he=typeof F=="function"?F.apply(H,P):F,ge=f(ee.invert(B).concat(W/ee.k),he.invert(B).concat(W/he.k));return function(Z){if(Z===1)Z=he;else{var ie=ge(Z),oe=W/ie[2];Z=new Gr(oe,B[0]-ie[0]*oe,B[1]-ie[1]*oe)}V.zoom(null,Z)}})}function R($,F,M){return!M&&$.__zooming||new D($,F)}function D($,F){this.that=$,this.args=F,this.active=0,this.sourceEvent=null,this.extent=e.apply($,F),this.taps=0}D.prototype={event:function($){return $&&(this.sourceEvent=$),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function($,F){return this.mouse&&$!=="mouse"&&(this.mouse[1]=F.invert(this.mouse[0])),this.touch0&&$!=="touch"&&(this.touch0[1]=F.invert(this.touch0[0])),this.touch1&&$!=="touch"&&(this.touch1[1]=F.invert(this.touch1[0])),this.that.__zoom=F,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function($){var F=jn(this.that).datum();h.call($,this.that,new bI($,{sourceEvent:this.sourceEvent,target:C,transform:this.that.__zoom,dispatch:h}),F)}};function I($,...F){if(!t.apply(this,arguments))return;var M=R(this,F).event($),z=this.__zoom,H=Math.max(l[0],Math.min(l[1],z.k*Math.pow(2,s.apply(this,arguments)))),P=tr($);if(M.wheel)(M.mouse[0][0]!==P[0]||M.mouse[0][1]!==P[1])&&(M.mouse[1]=z.invert(M.mouse[0]=P)),clearTimeout(M.wheel);else{if(z.k===H)return;M.mouse=[P,z.invert(P)],md(this),M.start()}ll($),M.wheel=setTimeout(V,x),M.zoom("mouse",n(E(N(z,H),M.mouse[0],M.mouse[1]),M.extent,c));function V(){M.wheel=null,M.end()}}function q($,...F){if(v||!t.apply(this,arguments))return;var M=$.currentTarget,z=R(this,F,!0).event($),H=jn($.view).on("mousemove.zoom",B,!0).on("mouseup.zoom",W,!0),P=tr($,M),V=$.clientX,k=$.clientY;jE($.view),ap($),z.mouse=[P,this.__zoom.invert(P)],md(this),z.start();function B(ee){if(ll(ee),!z.moved){var he=ee.clientX-V,ge=ee.clientY-k;z.moved=he*he+ge*ge>w}z.event(ee).zoom("mouse",n(E(z.that.__zoom,z.mouse[0]=tr(ee,M),z.mouse[1]),z.extent,c))}function W(ee){H.on("mousemove.zoom mouseup.zoom",null),RE(ee.view,z.moved),ll(ee),z.event(ee).end()}}function Q($,...F){if(t.apply(this,arguments)){var M=this.__zoom,z=tr($.changedTouches?$.changedTouches[0]:$,this),H=M.invert(z),P=M.k*($.shiftKey?.5:2),V=n(E(N(M,P),z,H),e.apply(this,F),c);ll($),d>0?jn(this).transition().duration(d).call(j,V,z,$):jn(this).call(C.transform,V,z,$)}}function G($,...F){if(t.apply(this,arguments)){var M=$.touches,z=M.length,H=R(this,F,$.changedTouches.length===z).event($),P,V,k,B;for(ap($),V=0;V<z;++V)k=M[V],B=tr(k,this),B=[B,this.__zoom.invert(B),k.identifier],H.touch0?!H.touch1&&H.touch0[2]!==B[2]&&(H.touch1=B,H.taps=0):(H.touch0=B,P=!0,H.taps=1+!!g);g&&(g=clearTimeout(g)),P&&(H.taps<2&&(p=B[0],g=setTimeout(function(){g=null},_)),md(this),H.start())}}function L($,...F){if(this.__zooming){var M=R(this,F).event($),z=$.changedTouches,H=z.length,P,V,k,B;for(ll($),P=0;P<H;++P)V=z[P],k=tr(V,this),M.touch0&&M.touch0[2]===V.identifier?M.touch0[0]=k:M.touch1&&M.touch1[2]===V.identifier&&(M.touch1[0]=k);if(V=M.that.__zoom,M.touch1){var W=M.touch0[0],ee=M.touch0[1],he=M.touch1[0],ge=M.touch1[1],Z=(Z=he[0]-W[0])*Z+(Z=he[1]-W[1])*Z,ie=(ie=ge[0]-ee[0])*ie+(ie=ge[1]-ee[1])*ie;V=N(V,Math.sqrt(Z/ie)),k=[(W[0]+he[0])/2,(W[1]+he[1])/2],B=[(ee[0]+ge[0])/2,(ee[1]+ge[1])/2]}else if(M.touch0)k=M.touch0[0],B=M.touch0[1];else return;M.zoom("touch",n(E(V,k,B),M.extent,c))}}function X($,...F){if(this.__zooming){var M=R(this,F).event($),z=$.changedTouches,H=z.length,P,V;for(ap($),v&&clearTimeout(v),v=setTimeout(function(){v=null},_),P=0;P<H;++P)V=z[P],M.touch0&&M.touch0[2]===V.identifier?delete M.touch0:M.touch1&&M.touch1[2]===V.identifier&&delete M.touch1;if(M.touch1&&!M.touch0&&(M.touch0=M.touch1,delete M.touch1),M.touch0)M.touch0[1]=this.__zoom.invert(M.touch0[0]);else if(M.end(),M.taps===2&&(V=tr(V,this),Math.hypot(p[0]-V[0],p[1]-V[1])<S)){var k=jn(this).on("dblclick.zoom");k&&k.apply(this,arguments)}}}return C.wheelDelta=function($){return arguments.length?(s=typeof $=="function"?$:Ku(+$),C):s},C.filter=function($){return arguments.length?(t=typeof $=="function"?$:Ku(!!$),C):t},C.touchable=function($){return arguments.length?(a=typeof $=="function"?$:Ku(!!$),C):a},C.extent=function($){return arguments.length?(e=typeof $=="function"?$:Ku([[+$[0][0],+$[0][1]],[+$[1][0],+$[1][1]]]),C):e},C.scaleExtent=function($){return arguments.length?(l[0]=+$[0],l[1]=+$[1],C):[l[0],l[1]]},C.translateExtent=function($){return arguments.length?(c[0][0]=+$[0][0],c[1][0]=+$[1][0],c[0][1]=+$[0][1],c[1][1]=+$[1][1],C):[[c[0][0],c[0][1]],[c[1][0],c[1][1]]]},C.constrain=function($){return arguments.length?(n=$,C):n},C.duration=function($){return arguments.length?(d=+$,C):d},C.interpolate=function($){return arguments.length?(f=$,C):f},C.on=function(){var $=h.on.apply(h,arguments);return $===h?C:$},C.clickDistance=function($){return arguments.length?(w=($=+$)*$,C):Math.sqrt(w)},C.tapDistance=function($){return arguments.length?(S=+$,C):S},C}const ir={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:t=>`Node type "${t}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:t=>`The old edge with id=${t} does not exist.`,error009:t=>`Marker type "${t}" doesn't exist.`,error008:(t,{id:e,sourceHandle:n,targetHandle:s})=>`Couldn't create edge for ${t} handle id: "${t==="source"?n:s}", edge id: ${e}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:t=>`Edge type "${t}" not found. Using fallback type "default".`,error012:t=>`Node with id "${t}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(t="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${t}/dist/style.css' or base.css to make sure everything is working properly.`,error014:()=>"useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID.",error015:()=>"It seems that you are trying to drag a node that is not initialized. Please use onNodesChange as explained in the docs."},Pl=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],XE=["Enter"," ","Escape"],KE={"node.a11yDescription.default":"Press enter or space to select a node. Press delete to remove it and escape to cancel.","node.a11yDescription.keyboardDisabled":"Press enter or space to select a node. You can then use the arrow keys to move the node around. Press delete to remove it and escape to cancel.","node.a11yDescription.ariaLiveMessage":({direction:t,x:e,y:n})=>`Moved selected node ${t}. New position, x: ${e}, y: ${n}`,"edge.a11yDescription.default":"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel.","controls.ariaLabel":"Control Panel","controls.zoomIn.ariaLabel":"Zoom In","controls.zoomOut.ariaLabel":"Zoom Out","controls.fitView.ariaLabel":"Fit View","controls.interactive.ariaLabel":"Toggle Interactivity","minimap.ariaLabel":"Mini Map","handle.ariaLabel":"Handle"};var Va;(function(t){t.Strict="strict",t.Loose="loose"})(Va||(Va={}));var Ci;(function(t){t.Free="free",t.Vertical="vertical",t.Horizontal="horizontal"})(Ci||(Ci={}));var ql;(function(t){t.Partial="partial",t.Full="full"})(ql||(ql={}));const QE={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null,pointer:null};var zs;(function(t){t.Bezier="default",t.Straight="straight",t.Step="step",t.SmoothStep="smoothstep",t.SimpleBezier="simplebezier"})(zs||(zs={}));var Ld;(function(t){t.Arrow="arrow",t.ArrowClosed="arrowclosed"})(Ld||(Ld={}));var we;(function(t){t.Left="left",t.Top="top",t.Right="right",t.Bottom="bottom"})(we||(we={}));const Ow={[we.Left]:we.Right,[we.Right]:we.Left,[we.Top]:we.Bottom,[we.Bottom]:we.Top};function CI(t,e){if(!t&&!e)return!0;if(!t||!e||t.size!==e.size)return!1;if(!t.size&&!e.size)return!0;for(const n of t.keys())if(!e.has(n))return!1;return!0}function jw(t,e,n){if(!n)return;const s=[];t.forEach((a,l)=>{e?.has(l)||s.push(a)}),s.length&&n(s)}function WE(t){return t===null?null:t?"valid":"invalid"}const JE=t=>"id"in t&&"source"in t&&"target"in t,AI=t=>"id"in t&&"position"in t&&!("source"in t)&&!("target"in t),Bg=t=>"id"in t&&"internals"in t&&!("source"in t)&&!("target"in t),nc=(t,e=[0,0])=>{const{width:n,height:s}=es(t),a=t.origin??e,l=n*a[0],c=s*a[1];return{x:t.position.x-l,y:t.position.y-c}},TI=(t,e={nodeOrigin:[0,0]})=>{if(t.length===0)return{x:0,y:0,width:0,height:0};const n=t.reduce((s,a)=>{const l=typeof a=="string";let c=!e.nodeLookup&&!l?a:void 0;e.nodeLookup&&(c=l?e.nodeLookup.get(a):Bg(a)?a:e.nodeLookup.get(a.id));const d=c?zd(c,e.nodeOrigin):{x:0,y:0,x2:0,y2:0};return uf(s,d)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return df(n)},rc=(t,e={})=>{let n={x:1/0,y:1/0,x2:-1/0,y2:-1/0},s=!1;return t.forEach(a=>{(e.filter===void 0||e.filter(a))&&(n=uf(n,zd(a)),s=!0)}),s?df(n):{x:0,y:0,width:0,height:0}},Pg=(t,e,[n,s,a]=[0,0,1],l=!1,c=!1)=>{const d={...ic(e,[n,s,a]),width:e.width/a,height:e.height/a},f=[];for(const h of t.values()){const{measured:g,selectable:p=!0,hidden:v=!1}=h;if(c&&!p||v)continue;const _=g.width??h.width??h.initialWidth??null,x=g.height??h.height??h.initialHeight??null,w=Hl(d,Ya(h)),S=(_??0)*(x??0),C=l&&w>0;(!h.internals.handleBounds||C||w>=S||h.dragging)&&f.push(h)}return f},NI=(t,e)=>{const n=new Set;return t.forEach(s=>{n.add(s.id)}),e.filter(s=>n.has(s.source)||n.has(s.target))};function OI(t,e){const n=new Map,s=e?.nodes?new Set(e.nodes.map(a=>a.id)):null;return t.forEach(a=>{a.measured.width&&a.measured.height&&(e?.includeHiddenNodes||!a.hidden)&&(!s||s.has(a.id))&&n.set(a.id,a)}),n}async function jI({nodes:t,width:e,height:n,panZoom:s,minZoom:a,maxZoom:l},c){if(t.size===0)return Promise.resolve(!0);const d=OI(t,c),f=rc(d),h=qg(f,e,n,c?.minZoom??a,c?.maxZoom??l,c?.padding??.1);return await s.setViewport(h,{duration:c?.duration,ease:c?.ease,interpolate:c?.interpolate}),Promise.resolve(!0)}function ZE({nodeId:t,nextPosition:e,nodeLookup:n,nodeOrigin:s=[0,0],nodeExtent:a,onError:l}){const c=n.get(t),d=c.parentId?n.get(c.parentId):void 0,{x:f,y:h}=d?d.internals.positionAbsolute:{x:0,y:0},g=c.origin??s;let p=c.extent||a;if(c.extent==="parent"&&!c.expandParent)if(!d)l?.("005",ir.error005());else{const _=d.measured.width,x=d.measured.height;_&&x&&(p=[[f,h],[f+_,h+x]])}else d&&Ga(c.extent)&&(p=[[c.extent[0][0]+f,c.extent[0][1]+h],[c.extent[1][0]+f,c.extent[1][1]+h]]);const v=Ga(p)?Ni(e,p,c.measured):e;return(c.measured.width===void 0||c.measured.height===void 0)&&l?.("015",ir.error015()),{position:{x:v.x-f+(c.measured.width??0)*g[0],y:v.y-h+(c.measured.height??0)*g[1]},positionAbsolute:v}}async function RI({nodesToRemove:t=[],edgesToRemove:e=[],nodes:n,edges:s,onBeforeDelete:a}){const l=new Set(t.map(v=>v.id)),c=[];for(const v of n){if(v.deletable===!1)continue;const _=l.has(v.id),x=!_&&v.parentId&&c.find(w=>w.id===v.parentId);(_||x)&&c.push(v)}const d=new Set(e.map(v=>v.id)),f=s.filter(v=>v.deletable!==!1),g=NI(c,f);for(const v of f)d.has(v.id)&&!g.find(x=>x.id===v.id)&&g.push(v);if(!a)return{edges:g,nodes:c};const p=await a({nodes:c,edges:g});return typeof p=="boolean"?p?{edges:g,nodes:c}:{edges:[],nodes:[]}:p}const Fa=(t,e=0,n=1)=>Math.min(Math.max(t,e),n),Ni=(t={x:0,y:0},e,n)=>({x:Fa(t.x,e[0][0],e[1][0]-(n?.width??0)),y:Fa(t.y,e[0][1],e[1][1]-(n?.height??0))});function e1(t,e,n){const{width:s,height:a}=es(n),{x:l,y:c}=n.internals.positionAbsolute;return Ni(t,[[l,c],[l+s,c+a]],e)}const Rw=(t,e,n)=>t<e?Fa(Math.abs(t-e),1,e)/e:t>n?-Fa(Math.abs(t-n),1,e)/e:0,t1=(t,e,n=15,s=40)=>{const a=Rw(t.x,s,e.width-s)*n,l=Rw(t.y,s,e.height-s)*n;return[a,l]},uf=(t,e)=>({x:Math.min(t.x,e.x),y:Math.min(t.y,e.y),x2:Math.max(t.x2,e.x2),y2:Math.max(t.y2,e.y2)}),Kp=({x:t,y:e,width:n,height:s})=>({x:t,y:e,x2:t+n,y2:e+s}),df=({x:t,y:e,x2:n,y2:s})=>({x:t,y:e,width:n-t,height:s-e}),Ya=(t,e=[0,0])=>{const{x:n,y:s}=Bg(t)?t.internals.positionAbsolute:nc(t,e);return{x:n,y:s,width:t.measured?.width??t.width??t.initialWidth??0,height:t.measured?.height??t.height??t.initialHeight??0}},zd=(t,e=[0,0])=>{const{x:n,y:s}=Bg(t)?t.internals.positionAbsolute:nc(t,e);return{x:n,y:s,x2:n+(t.measured?.width??t.width??t.initialWidth??0),y2:s+(t.measured?.height??t.height??t.initialHeight??0)}},n1=(t,e)=>df(uf(Kp(t),Kp(e))),Hl=(t,e)=>{const n=Math.max(0,Math.min(t.x+t.width,e.x+e.width)-Math.max(t.x,e.x)),s=Math.max(0,Math.min(t.y+t.height,e.y+e.height)-Math.max(t.y,e.y));return Math.ceil(n*s)},kw=t=>rr(t.width)&&rr(t.height)&&rr(t.x)&&rr(t.y),rr=t=>!isNaN(t)&&isFinite(t),kI=(t,e)=>{},sc=(t,e=[1,1])=>({x:e[0]*Math.round(t.x/e[0]),y:e[1]*Math.round(t.y/e[1])}),ic=({x:t,y:e},[n,s,a],l=!1,c=[1,1])=>{const d={x:(t-n)/a,y:(e-s)/a};return l?sc(d,c):d},Bd=({x:t,y:e},[n,s,a])=>({x:t*a+n,y:e*a+s});function Aa(t,e){if(typeof t=="number")return Math.floor((e-e/(1+t))*.5);if(typeof t=="string"&&t.endsWith("px")){const n=parseFloat(t);if(!Number.isNaN(n))return Math.floor(n)}if(typeof t=="string"&&t.endsWith("%")){const n=parseFloat(t);if(!Number.isNaN(n))return Math.floor(e*n*.01)}return console.error(`[React Flow] The padding value "${t}" is invalid. Please provide a number or a string with a valid unit (px or %).`),0}function MI(t,e,n){if(typeof t=="string"||typeof t=="number"){const s=Aa(t,n),a=Aa(t,e);return{top:s,right:a,bottom:s,left:a,x:a*2,y:s*2}}if(typeof t=="object"){const s=Aa(t.top??t.y??0,n),a=Aa(t.bottom??t.y??0,n),l=Aa(t.left??t.x??0,e),c=Aa(t.right??t.x??0,e);return{top:s,right:c,bottom:a,left:l,x:l+c,y:s+a}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}function DI(t,e,n,s,a,l){const{x:c,y:d}=Bd(t,[e,n,s]),{x:f,y:h}=Bd({x:t.x+t.width,y:t.y+t.height},[e,n,s]),g=a-f,p=l-h;return{left:Math.floor(c),top:Math.floor(d),right:Math.floor(g),bottom:Math.floor(p)}}const qg=(t,e,n,s,a,l)=>{const c=MI(l,e,n),d=(e-c.x)/t.width,f=(n-c.y)/t.height,h=Math.min(d,f),g=Fa(h,s,a),p=t.x+t.width/2,v=t.y+t.height/2,_=e/2-p*g,x=n/2-v*g,w=DI(t,_,x,g,e,n),S={left:Math.min(w.left-c.left,0),top:Math.min(w.top-c.top,0),right:Math.min(w.right-c.right,0),bottom:Math.min(w.bottom-c.bottom,0)};return{x:_-S.left+S.right,y:x-S.top+S.bottom,zoom:g}},Vl=()=>typeof navigator<"u"&&navigator?.userAgent?.indexOf("Mac")>=0;function Ga(t){return t!=null&&t!=="parent"}function es(t){return{width:t.measured?.width??t.width??t.initialWidth??0,height:t.measured?.height??t.height??t.initialHeight??0}}function r1(t){return(t.measured?.width??t.width??t.initialWidth)!==void 0&&(t.measured?.height??t.height??t.initialHeight)!==void 0}function s1(t,e={width:0,height:0},n,s,a){const l={...t},c=s.get(n);if(c){const d=c.origin||a;l.x+=c.internals.positionAbsolute.x-(e.width??0)*d[0],l.y+=c.internals.positionAbsolute.y-(e.height??0)*d[1]}return l}function Mw(t,e){if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0}function UI(){let t,e;return{promise:new Promise((s,a)=>{t=s,e=a}),resolve:t,reject:e}}function II(t){return{...KE,...t||{}}}function Nl(t,{snapGrid:e=[0,0],snapToGrid:n=!1,transform:s,containerBounds:a}){const{x:l,y:c}=sr(t),d=ic({x:l-(a?.left??0),y:c-(a?.top??0)},s),{x:f,y:h}=n?sc(d,e):d;return{xSnapped:f,ySnapped:h,...d}}const Hg=t=>({width:t.offsetWidth,height:t.offsetHeight}),i1=t=>t?.getRootNode?.()||window?.document,$I=["INPUT","SELECT","TEXTAREA"];function a1(t){const e=t.composedPath?.()?.[0]||t.target;return e?.nodeType!==1?!1:$I.includes(e.nodeName)||e.hasAttribute("contenteditable")||!!e.closest(".nokey")}const o1=t=>"clientX"in t,sr=(t,e)=>{const n=o1(t),s=n?t.clientX:t.touches?.[0].clientX,a=n?t.clientY:t.touches?.[0].clientY;return{x:s-(e?.left??0),y:a-(e?.top??0)}},Dw=(t,e,n,s,a)=>{const l=e.querySelectorAll(`.${t}`);return!l||!l.length?null:Array.from(l).map(c=>{const d=c.getBoundingClientRect();return{id:c.getAttribute("data-handleid"),type:t,nodeId:a,position:c.getAttribute("data-handlepos"),x:(d.left-n.left)/s,y:(d.top-n.top)/s,...Hg(c)}})};function l1({sourceX:t,sourceY:e,targetX:n,targetY:s,sourceControlX:a,sourceControlY:l,targetControlX:c,targetControlY:d}){const f=t*.125+a*.375+c*.375+n*.125,h=e*.125+l*.375+d*.375+s*.125,g=Math.abs(f-t),p=Math.abs(h-e);return[f,h,g,p]}function Qu(t,e){return t>=0?.5*t:e*25*Math.sqrt(-t)}function Uw({pos:t,x1:e,y1:n,x2:s,y2:a,c:l}){switch(t){case we.Left:return[e-Qu(e-s,l),n];case we.Right:return[e+Qu(s-e,l),n];case we.Top:return[e,n-Qu(n-a,l)];case we.Bottom:return[e,n+Qu(a-n,l)]}}function Vg({sourceX:t,sourceY:e,sourcePosition:n=we.Bottom,targetX:s,targetY:a,targetPosition:l=we.Top,curvature:c=.25}){const[d,f]=Uw({pos:n,x1:t,y1:e,x2:s,y2:a,c}),[h,g]=Uw({pos:l,x1:s,y1:a,x2:t,y2:e,c}),[p,v,_,x]=l1({sourceX:t,sourceY:e,targetX:s,targetY:a,sourceControlX:d,sourceControlY:f,targetControlX:h,targetControlY:g});return[`M${t},${e} C${d},${f} ${h},${g} ${s},${a}`,p,v,_,x]}function c1({sourceX:t,sourceY:e,targetX:n,targetY:s}){const a=Math.abs(n-t)/2,l=n<t?n+a:n-a,c=Math.abs(s-e)/2,d=s<e?s+c:s-c;return[l,d,a,c]}function LI({sourceNode:t,targetNode:e,selected:n=!1,zIndex:s,elevateOnSelect:a=!1}){if(s!==void 0)return s;const l=a&&n?1e3:0,c=Math.max(t.parentId||a&&t.selected?t.internals.z:0,e.parentId||a&&e.selected?e.internals.z:0);return l+c}function zI({sourceNode:t,targetNode:e,width:n,height:s,transform:a}){const l=uf(zd(t),zd(e));l.x===l.x2&&(l.x2+=1),l.y===l.y2&&(l.y2+=1);const c={x:-a[0]/a[2],y:-a[1]/a[2],width:n/a[2],height:s/a[2]};return Hl(c,df(l))>0}const BI=({source:t,sourceHandle:e,target:n,targetHandle:s})=>`xy-edge__${t}${e||""}-${n}${s||""}`,PI=(t,e)=>e.some(n=>n.source===t.source&&n.target===t.target&&(n.sourceHandle===t.sourceHandle||!n.sourceHandle&&!t.sourceHandle)&&(n.targetHandle===t.targetHandle||!n.targetHandle&&!t.targetHandle)),u1=(t,e)=>{if(!t.source||!t.target)return e;let n;return JE(t)?n={...t}:n={...t,id:BI(t)},PI(n,e)?e:(n.sourceHandle===null&&delete n.sourceHandle,n.targetHandle===null&&delete n.targetHandle,e.concat(n))};function d1({sourceX:t,sourceY:e,targetX:n,targetY:s}){const[a,l,c,d]=c1({sourceX:t,sourceY:e,targetX:n,targetY:s});return[`M ${t},${e}L ${n},${s}`,a,l,c,d]}const Iw={[we.Left]:{x:-1,y:0},[we.Right]:{x:1,y:0},[we.Top]:{x:0,y:-1},[we.Bottom]:{x:0,y:1}},qI=({source:t,sourcePosition:e=we.Bottom,target:n})=>e===we.Left||e===we.Right?t.x<n.x?{x:1,y:0}:{x:-1,y:0}:t.y<n.y?{x:0,y:1}:{x:0,y:-1},$w=(t,e)=>Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2));function HI({source:t,sourcePosition:e=we.Bottom,target:n,targetPosition:s=we.Top,center:a,offset:l,stepPosition:c}){const d=Iw[e],f=Iw[s],h={x:t.x+d.x*l,y:t.y+d.y*l},g={x:n.x+f.x*l,y:n.y+f.y*l},p=qI({source:h,sourcePosition:e,target:g}),v=p.x!==0?"x":"y",_=p[v];let x=[],w,S;const C={x:0,y:0},N={x:0,y:0},[,,E,A]=c1({sourceX:t.x,sourceY:t.y,targetX:n.x,targetY:n.y});if(d[v]*f[v]===-1){v==="x"?(w=a.x??h.x+(g.x-h.x)*c,S=a.y??(h.y+g.y)/2):(w=a.x??(h.x+g.x)/2,S=a.y??h.y+(g.y-h.y)*c);const R=[{x:w,y:h.y},{x:w,y:g.y}],D=[{x:h.x,y:S},{x:g.x,y:S}];d[v]===_?x=v==="x"?R:D:x=v==="x"?D:R}else{const R=[{x:h.x,y:g.y}],D=[{x:g.x,y:h.y}];if(v==="x"?x=d.x===_?D:R:x=d.y===_?R:D,e===s){const L=Math.abs(t[v]-n[v]);if(L<=l){const X=Math.min(l-1,l-L);d[v]===_?C[v]=(h[v]>t[v]?-1:1)*X:N[v]=(g[v]>n[v]?-1:1)*X}}if(e!==s){const L=v==="x"?"y":"x",X=d[v]===f[L],$=h[L]>g[L],F=h[L]<g[L];(d[v]===1&&(!X&&$||X&&F)||d[v]!==1&&(!X&&F||X&&$))&&(x=v==="x"?R:D)}const I={x:h.x+C.x,y:h.y+C.y},q={x:g.x+N.x,y:g.y+N.y},Q=Math.max(Math.abs(I.x-x[0].x),Math.abs(q.x-x[0].x)),G=Math.max(Math.abs(I.y-x[0].y),Math.abs(q.y-x[0].y));Q>=G?(w=(I.x+q.x)/2,S=x[0].y):(w=x[0].x,S=(I.y+q.y)/2)}return[[t,{x:h.x+C.x,y:h.y+C.y},...x,{x:g.x+N.x,y:g.y+N.y},n],w,S,E,A]}function VI(t,e,n,s){const a=Math.min($w(t,e)/2,$w(e,n)/2,s),{x:l,y:c}=e;if(t.x===l&&l===n.x||t.y===c&&c===n.y)return`L${l} ${c}`;if(t.y===c){const h=t.x<n.x?-1:1,g=t.y<n.y?1:-1;return`L ${l+a*h},${c}Q ${l},${c} ${l},${c+a*g}`}const d=t.x<n.x?1:-1,f=t.y<n.y?-1:1;return`L ${l},${c+a*f}Q ${l},${c} ${l+a*d},${c}`}function Qp({sourceX:t,sourceY:e,sourcePosition:n=we.Bottom,targetX:s,targetY:a,targetPosition:l=we.Top,borderRadius:c=5,centerX:d,centerY:f,offset:h=20,stepPosition:g=.5}){const[p,v,_,x,w]=HI({source:{x:t,y:e},sourcePosition:n,target:{x:s,y:a},targetPosition:l,center:{x:d,y:f},offset:h,stepPosition:g});return[p.reduce((C,N,E)=>{let A="";return E>0&&E<p.length-1?A=VI(p[E-1],N,p[E+1],c):A=`${E===0?"M":"L"}${N.x} ${N.y}`,C+=A,C},""),v,_,x,w]}function Lw(t){return t&&!!(t.internals.handleBounds||t.handles?.length)&&!!(t.measured.width||t.width||t.initialWidth)}function FI(t){const{sourceNode:e,targetNode:n}=t;if(!Lw(e)||!Lw(n))return null;const s=e.internals.handleBounds||zw(e.handles),a=n.internals.handleBounds||zw(n.handles),l=Bw(s?.source??[],t.sourceHandle),c=Bw(t.connectionMode===Va.Strict?a?.target??[]:(a?.target??[]).concat(a?.source??[]),t.targetHandle);if(!l||!c)return t.onError?.("008",ir.error008(l?"target":"source",{id:t.id,sourceHandle:t.sourceHandle,targetHandle:t.targetHandle})),null;const d=l?.position||we.Bottom,f=c?.position||we.Top,h=Fl(e,l,d),g=Fl(n,c,f);return{sourceX:h.x,sourceY:h.y,targetX:g.x,targetY:g.y,sourcePosition:d,targetPosition:f}}function zw(t){if(!t)return null;const e=[],n=[];for(const s of t)s.width=s.width??1,s.height=s.height??1,s.type==="source"?e.push(s):s.type==="target"&&n.push(s);return{source:e,target:n}}function Fl(t,e,n=we.Left,s=!1){const a=(e?.x??0)+t.internals.positionAbsolute.x,l=(e?.y??0)+t.internals.positionAbsolute.y,{width:c,height:d}=e??es(t);if(s)return{x:a+c/2,y:l+d/2};switch(e?.position??n){case we.Top:return{x:a+c/2,y:l};case we.Right:return{x:a+c,y:l+d/2};case we.Bottom:return{x:a+c/2,y:l+d};case we.Left:return{x:a,y:l+d/2}}}function Bw(t,e){return t&&(e?t.find(n=>n.id===e):t[0])||null}function Wp(t,e){return t?typeof t=="string"?t:`${e?`${e}__`:""}${Object.keys(t).sort().map(s=>`${s}=${t[s]}`).join("&")}`:""}function YI(t,{id:e,defaultColor:n,defaultMarkerStart:s,defaultMarkerEnd:a}){const l=new Set;return t.reduce((c,d)=>([d.markerStart||s,d.markerEnd||a].forEach(f=>{if(f&&typeof f=="object"){const h=Wp(f,e);l.has(h)||(c.push({id:h,color:f.color||n,...f}),l.add(h))}}),c),[]).sort((c,d)=>c.id.localeCompare(d.id))}const f1=1e3,GI=10,Fg={nodeOrigin:[0,0],nodeExtent:Pl,elevateNodesOnSelect:!0,defaults:{}},XI={...Fg,checkEquality:!0};function Yg(t,e){const n={...t};for(const s in e)e[s]!==void 0&&(n[s]=e[s]);return n}function KI(t,e,n){const s=Yg(Fg,n);for(const a of t.values())if(a.parentId)Gg(a,t,e,s);else{const l=nc(a,s.nodeOrigin),c=Ga(a.extent)?a.extent:s.nodeExtent,d=Ni(l,c,es(a));a.internals.positionAbsolute=d}}function QI(t,e){if(!t.handles)return t.measured?e?.internals.handleBounds:void 0;const n=[],s=[];for(const a of t.handles){const l={id:a.id,width:a.width??1,height:a.height??1,nodeId:t.id,x:a.x,y:a.y,position:a.position,type:a.type};a.type==="source"?n.push(l):a.type==="target"&&s.push(l)}return{source:n,target:s}}function Jp(t,e,n,s){const a=Yg(XI,s);let l={i:-1},c=t.length>0;const d=new Map(e),f=a?.elevateNodesOnSelect?f1:0;e.clear(),n.clear();for(const h of t){let g=d.get(h.id);if(a.checkEquality&&h===g?.internals.userNode)e.set(h.id,g);else{const p=nc(h,a.nodeOrigin),v=Ga(h.extent)?h.extent:a.nodeExtent,_=Ni(p,v,es(h));g={...a.defaults,...h,measured:{width:h.measured?.width,height:h.measured?.height},internals:{positionAbsolute:_,handleBounds:QI(h,g),z:h1(h,f),userNode:h}},e.set(h.id,g)}(g.measured===void 0||g.measured.width===void 0||g.measured.height===void 0)&&!g.hidden&&(c=!1),h.parentId&&Gg(g,e,n,s,l)}return c}function WI(t,e){if(!t.parentId)return;const n=e.get(t.parentId);n?n.set(t.id,t):e.set(t.parentId,new Map([[t.id,t]]))}function Gg(t,e,n,s,a){const{elevateNodesOnSelect:l,nodeOrigin:c,nodeExtent:d}=Yg(Fg,s),f=t.parentId,h=e.get(f);if(!h){console.warn(`Parent node ${f} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}WI(t,n),a&&!h.parentId&&h.internals.rootParentIndex===void 0&&(h.internals.rootParentIndex=++a.i,h.internals.z=h.internals.z+a.i*GI),a&&h.internals.rootParentIndex!==void 0&&(a.i=h.internals.rootParentIndex);const g=l?f1:0,{x:p,y:v,z:_}=JI(t,h,c,d,g),{positionAbsolute:x}=t.internals,w=p!==x.x||v!==x.y;(w||_!==t.internals.z)&&e.set(t.id,{...t,internals:{...t.internals,positionAbsolute:w?{x:p,y:v}:x,z:_}})}function h1(t,e){return(rr(t.zIndex)?t.zIndex:0)+(t.selected?e:0)}function JI(t,e,n,s,a){const{x:l,y:c}=e.internals.positionAbsolute,d=es(t),f=nc(t,n),h=Ga(t.extent)?Ni(f,t.extent,d):f;let g=Ni({x:l+h.x,y:c+h.y},s,d);t.extent==="parent"&&(g=e1(g,d,e));const p=h1(t,a),v=e.internals.z??0;return{x:g.x,y:g.y,z:v>=p?v+1:p}}function Xg(t,e,n,s=[0,0]){const a=[],l=new Map;for(const c of t){const d=e.get(c.parentId);if(!d)continue;const f=l.get(c.parentId)?.expandedRect??Ya(d),h=n1(f,c.rect);l.set(c.parentId,{expandedRect:h,parent:d})}return l.size>0&&l.forEach(({expandedRect:c,parent:d},f)=>{const h=d.internals.positionAbsolute,g=es(d),p=d.origin??s,v=c.x<h.x?Math.round(Math.abs(h.x-c.x)):0,_=c.y<h.y?Math.round(Math.abs(h.y-c.y)):0,x=Math.max(g.width,Math.round(c.width)),w=Math.max(g.height,Math.round(c.height)),S=(x-g.width)*p[0],C=(w-g.height)*p[1];(v>0||_>0||S||C)&&(a.push({id:f,type:"position",position:{x:d.position.x-v+S,y:d.position.y-_+C}}),n.get(f)?.forEach(N=>{t.some(E=>E.id===N.id)||a.push({id:N.id,type:"position",position:{x:N.position.x+v,y:N.position.y+_}})})),(g.width<c.width||g.height<c.height||v||_)&&a.push({id:f,type:"dimensions",setAttributes:!0,dimensions:{width:x+(v?p[0]*v-S:0),height:w+(_?p[1]*_-C:0)}})}),a}function ZI(t,e,n,s,a,l){const c=s?.querySelector(".xyflow__viewport");let d=!1;if(!c)return{changes:[],updatedInternals:d};const f=[],h=window.getComputedStyle(c),{m22:g}=new window.DOMMatrixReadOnly(h.transform),p=[];for(const v of t.values()){const _=e.get(v.id);if(!_)continue;if(_.hidden){e.set(_.id,{..._,internals:{..._.internals,handleBounds:void 0}}),d=!0;continue}const x=Hg(v.nodeElement),w=_.measured.width!==x.width||_.measured.height!==x.height;if(!!(x.width&&x.height&&(w||!_.internals.handleBounds||v.force))){const C=v.nodeElement.getBoundingClientRect(),N=Ga(_.extent)?_.extent:l;let{positionAbsolute:E}=_.internals;_.parentId&&_.extent==="parent"?E=e1(E,x,e.get(_.parentId)):N&&(E=Ni(E,N,x));const A={..._,measured:x,internals:{..._.internals,positionAbsolute:E,handleBounds:{source:Dw("source",v.nodeElement,C,g,_.id),target:Dw("target",v.nodeElement,C,g,_.id)}}};e.set(_.id,A),_.parentId&&Gg(A,e,n,{nodeOrigin:a}),d=!0,w&&(f.push({id:_.id,type:"dimensions",dimensions:x}),_.expandParent&&_.parentId&&p.push({id:_.id,parentId:_.parentId,rect:Ya(A,a)}))}}if(p.length>0){const v=Xg(p,e,n,a);f.push(...v)}return{changes:f,updatedInternals:d}}async function e3({delta:t,panZoom:e,transform:n,translateExtent:s,width:a,height:l}){if(!e||!t.x&&!t.y)return Promise.resolve(!1);const c=await e.setViewportConstrained({x:n[0]+t.x,y:n[1]+t.y,zoom:n[2]},[[0,0],[a,l]],s),d=!!c&&(c.x!==n[0]||c.y!==n[1]||c.k!==n[2]);return Promise.resolve(d)}function Pw(t,e,n,s,a,l){let c=a;const d=s.get(c)||new Map;s.set(c,d.set(n,e)),c=`${a}-${t}`;const f=s.get(c)||new Map;if(s.set(c,f.set(n,e)),l){c=`${a}-${t}-${l}`;const h=s.get(c)||new Map;s.set(c,h.set(n,e))}}function m1(t,e,n){t.clear(),e.clear();for(const s of n){const{source:a,target:l,sourceHandle:c=null,targetHandle:d=null}=s,f={edgeId:s.id,source:a,target:l,sourceHandle:c,targetHandle:d},h=`${a}-${c}--${l}-${d}`,g=`${l}-${d}--${a}-${c}`;Pw("source",f,g,t,a,c),Pw("target",f,h,t,l,d),e.set(s.id,s)}}function t3(t,e){if(t===null||e===null)return!1;const n=Array.isArray(t)?t:[t],s=Array.isArray(e)?e:[e];if(n.length!==s.length)return!1;for(let a=0;a<n.length;a++)if(n[a].id!==s[a].id||n[a].type!==s[a].type||!Object.is(n[a].data,s[a].data))return!1;return!0}function p1(t,e){if(!t.parentId)return!1;const n=e.get(t.parentId);return n?n.selected?!0:p1(n,e):!1}function qw(t,e,n){let s=t;do{if(s?.matches?.(e))return!0;if(s===n)return!1;s=s?.parentElement}while(s);return!1}function n3(t,e,n,s){const a=new Map;for(const[l,c]of t)if((c.selected||c.id===s)&&(!c.parentId||!p1(c,t))&&(c.draggable||e&&typeof c.draggable>"u")){const d=t.get(l);d&&a.set(l,{id:l,position:d.position||{x:0,y:0},distance:{x:n.x-d.internals.positionAbsolute.x,y:n.y-d.internals.positionAbsolute.y},extent:d.extent,parentId:d.parentId,origin:d.origin,expandParent:d.expandParent,internals:{positionAbsolute:d.internals.positionAbsolute||{x:0,y:0}},measured:{width:d.measured.width??0,height:d.measured.height??0}})}return a}function op({nodeId:t,dragItems:e,nodeLookup:n,dragging:s=!0}){const a=[];for(const[c,d]of e){const f=n.get(c)?.internals.userNode;f&&a.push({...f,position:d.position,dragging:s})}if(!t)return[a[0],a];const l=n.get(t)?.internals.userNode;return[l?{...l,position:e.get(t)?.position||l.position,dragging:s}:a[0],a]}function r3({dragItems:t,snapGrid:e,x:n,y:s}){const a=t.values().next().value;if(!a)return null;const l={x:n-a.distance.x,y:s-a.distance.y},c=sc(l,e);return{x:c.x-l.x,y:c.y-l.y}}function s3({onNodeMouseDown:t,getStoreItems:e,onDragStart:n,onDrag:s,onDragStop:a}){let l={x:null,y:null},c=0,d=new Map,f=!1,h={x:0,y:0},g=null,p=!1,v=null,_=!1,x=!1,w=null;function S({noDragClassName:N,handleSelector:E,domNode:A,isSelectable:j,nodeId:R,nodeClickDistance:D=0}){v=jn(A);function I({x:L,y:X}){const{nodeLookup:$,nodeExtent:F,snapGrid:M,snapToGrid:z,nodeOrigin:H,onNodeDrag:P,onSelectionDrag:V,onError:k,updateNodePositions:B}=e();l={x:L,y:X};let W=!1;const ee=d.size>1,he=ee&&F?Kp(rc(d)):null,ge=ee&&z?r3({dragItems:d,snapGrid:M,x:L,y:X}):null;for(const[Z,ie]of d){if(!$.has(Z))continue;let oe={x:L-ie.distance.x,y:X-ie.distance.y};z&&(oe=ge?{x:Math.round(oe.x+ge.x),y:Math.round(oe.y+ge.y)}:sc(oe,M));let de=null;if(ee&&F&&!ie.extent&&he){const{positionAbsolute:_e}=ie.internals,Ue=_e.x-he.x+F[0][0],ce=_e.x+ie.measured.width-he.x2+F[1][0],ve=_e.y-he.y+F[0][1],Me=_e.y+ie.measured.height-he.y2+F[1][1];de=[[Ue,ve],[ce,Me]]}const{position:pe,positionAbsolute:be}=ZE({nodeId:Z,nextPosition:oe,nodeLookup:$,nodeExtent:de||F,nodeOrigin:H,onError:k});W=W||ie.position.x!==pe.x||ie.position.y!==pe.y,ie.position=pe,ie.internals.positionAbsolute=be}if(x=x||W,!!W&&(B(d,!0),w&&(s||P||!R&&V))){const[Z,ie]=op({nodeId:R,dragItems:d,nodeLookup:$});s?.(w,d,Z,ie),P?.(w,Z,ie),R||V?.(w,ie)}}async function q(){if(!g)return;const{transform:L,panBy:X,autoPanSpeed:$,autoPanOnNodeDrag:F}=e();if(!F){f=!1,cancelAnimationFrame(c);return}const[M,z]=t1(h,g,$);(M!==0||z!==0)&&(l.x=(l.x??0)-M/L[2],l.y=(l.y??0)-z/L[2],await X({x:M,y:z})&&I(l)),c=requestAnimationFrame(q)}function Q(L){const{nodeLookup:X,multiSelectionActive:$,nodesDraggable:F,transform:M,snapGrid:z,snapToGrid:H,selectNodesOnDrag:P,onNodeDragStart:V,onSelectionDragStart:k,unselectNodesAndEdges:B}=e();p=!0,(!P||!j)&&!$&&R&&(X.get(R)?.selected||B()),j&&P&&R&&t?.(R);const W=Nl(L.sourceEvent,{transform:M,snapGrid:z,snapToGrid:H,containerBounds:g});if(l=W,d=n3(X,F,W,R),d.size>0&&(n||V||!R&&k)){const[ee,he]=op({nodeId:R,dragItems:d,nodeLookup:X});n?.(L.sourceEvent,d,ee,he),V?.(L.sourceEvent,ee,he),R||k?.(L.sourceEvent,he)}}const G=kE().clickDistance(D).on("start",L=>{const{domNode:X,nodeDragThreshold:$,transform:F,snapGrid:M,snapToGrid:z}=e();g=X?.getBoundingClientRect()||null,_=!1,x=!1,w=L.sourceEvent,$===0&&Q(L),l=Nl(L.sourceEvent,{transform:F,snapGrid:M,snapToGrid:z,containerBounds:g}),h=sr(L.sourceEvent,g)}).on("drag",L=>{const{autoPanOnNodeDrag:X,transform:$,snapGrid:F,snapToGrid:M,nodeDragThreshold:z,nodeLookup:H}=e(),P=Nl(L.sourceEvent,{transform:$,snapGrid:F,snapToGrid:M,containerBounds:g});if(w=L.sourceEvent,(L.sourceEvent.type==="touchmove"&&L.sourceEvent.touches.length>1||R&&!H.has(R))&&(_=!0),!_){if(!f&&X&&p&&(f=!0,q()),!p){const V=sr(L.sourceEvent,g),k=V.x-h.x,B=V.y-h.y;Math.sqrt(k*k+B*B)>z&&Q(L)}(l.x!==P.xSnapped||l.y!==P.ySnapped)&&d&&p&&(h=sr(L.sourceEvent,g),I(P))}}).on("end",L=>{if(!(!p||_)&&(f=!1,p=!1,cancelAnimationFrame(c),d.size>0)){const{nodeLookup:X,updateNodePositions:$,onNodeDragStop:F,onSelectionDragStop:M}=e();if(x&&($(d,!1),x=!1),a||F||!R&&M){const[z,H]=op({nodeId:R,dragItems:d,nodeLookup:X,dragging:!1});a?.(L.sourceEvent,d,z,H),F?.(L.sourceEvent,z,H),R||M?.(L.sourceEvent,H)}}}).filter(L=>{const X=L.target;return!L.button&&(!N||!qw(X,`.${N}`,A))&&(!E||qw(X,E,A))});v.call(G)}function C(){v?.on(".drag",null)}return{update:S,destroy:C}}function i3(t,e,n){const s=[],a={x:t.x-n,y:t.y-n,width:n*2,height:n*2};for(const l of e.values())Hl(a,Ya(l))>0&&s.push(l);return s}const a3=250;function o3(t,e,n,s){let a=[],l=1/0;const c=i3(t,n,e+a3);for(const d of c){const f=[...d.internals.handleBounds?.source??[],...d.internals.handleBounds?.target??[]];for(const h of f){if(s.nodeId===h.nodeId&&s.type===h.type&&s.id===h.id)continue;const{x:g,y:p}=Fl(d,h,h.position,!0),v=Math.sqrt(Math.pow(g-t.x,2)+Math.pow(p-t.y,2));v>e||(v<l?(a=[{...h,x:g,y:p}],l=v):v===l&&a.push({...h,x:g,y:p}))}}if(!a.length)return null;if(a.length>1){const d=s.type==="source"?"target":"source";return a.find(f=>f.type===d)??a[0]}return a[0]}function g1(t,e,n,s,a,l=!1){const c=s.get(t);if(!c)return null;const d=a==="strict"?c.internals.handleBounds?.[e]:[...c.internals.handleBounds?.source??[],...c.internals.handleBounds?.target??[]],f=(n?d?.find(h=>h.id===n):d?.[0])??null;return f&&l?{...f,...Fl(c,f,f.position,!0)}:f}function y1(t,e){return t||(e?.classList.contains("target")?"target":e?.classList.contains("source")?"source":null)}function l3(t,e){let n=null;return e?n=!0:t&&!e&&(n=!1),n}const v1=()=>!0;function c3(t,{connectionMode:e,connectionRadius:n,handleId:s,nodeId:a,edgeUpdaterType:l,isTarget:c,domNode:d,nodeLookup:f,lib:h,autoPanOnConnect:g,flowId:p,panBy:v,cancelConnection:_,onConnectStart:x,onConnect:w,onConnectEnd:S,isValidConnection:C=v1,onReconnectEnd:N,updateConnection:E,getTransform:A,getFromHandle:j,autoPanSpeed:R,dragThreshold:D=1,handleDomNode:I}){const q=i1(t.target);let Q=0,G;const{x:L,y:X}=sr(t),$=y1(l,I),F=d?.getBoundingClientRect();let M=!1;if(!F||!$)return;const z=g1(a,$,s,f,e);if(!z)return;let H=sr(t,F),P=!1,V=null,k=!1,B=null;function W(){if(!g||!F)return;const[pe,be]=t1(H,F,R);v({x:pe,y:be}),Q=requestAnimationFrame(W)}const ee={...z,nodeId:a,type:$,position:z.position},he=f.get(a);let Z={inProgress:!0,isValid:null,from:Fl(he,ee,we.Left,!0),fromHandle:ee,fromPosition:ee.position,fromNode:he,to:H,toHandle:null,toPosition:Ow[ee.position],toNode:null,pointer:H};function ie(){M=!0,E(Z),x?.(t,{nodeId:a,handleId:s,handleType:$})}D===0&&ie();function oe(pe){if(!M){const{x:ce,y:ve}=sr(pe),Me=ce-L,Je=ve-X;if(!(Me*Me+Je*Je>D*D))return;ie()}if(!j()||!ee){de(pe);return}const be=A();H=sr(pe,F),G=o3(ic(H,be,!1,[1,1]),n,f,ee),P||(W(),P=!0);const _e=b1(pe,{handle:G,connectionMode:e,fromNodeId:a,fromHandleId:s,fromType:c?"target":"source",isValidConnection:C,doc:q,lib:h,flowId:p,nodeLookup:f});B=_e.handleDomNode,V=_e.connection,k=l3(!!G,_e.isValid);const Ue={...Z,isValid:k,to:_e.toHandle&&k?Bd({x:_e.toHandle.x,y:_e.toHandle.y},be):H,toHandle:_e.toHandle,toPosition:k&&_e.toHandle?_e.toHandle.position:Ow[ee.position],toNode:_e.toHandle?f.get(_e.toHandle.nodeId):null,pointer:H};E(Ue),Z=Ue}function de(pe){if(!("touches"in pe&&pe.touches.length>0)){if(M){(G||B)&&V&&k&&w?.(V);const{inProgress:be,..._e}=Z,Ue={..._e,toPosition:Z.toHandle?Z.toPosition:null};S?.(pe,Ue),l&&N?.(pe,Ue)}_(),cancelAnimationFrame(Q),P=!1,k=!1,V=null,B=null,q.removeEventListener("mousemove",oe),q.removeEventListener("mouseup",de),q.removeEventListener("touchmove",oe),q.removeEventListener("touchend",de)}}q.addEventListener("mousemove",oe),q.addEventListener("mouseup",de),q.addEventListener("touchmove",oe),q.addEventListener("touchend",de)}function b1(t,{handle:e,connectionMode:n,fromNodeId:s,fromHandleId:a,fromType:l,doc:c,lib:d,flowId:f,isValidConnection:h=v1,nodeLookup:g}){const p=l==="target",v=e?c.querySelector(`.${d}-flow__handle[data-id="${f}-${e?.nodeId}-${e?.id}-${e?.type}"]`):null,{x:_,y:x}=sr(t),w=c.elementFromPoint(_,x),S=w?.classList.contains(`${d}-flow__handle`)?w:v,C={handleDomNode:S,isValid:!1,connection:null,toHandle:null};if(S){const N=y1(void 0,S),E=S.getAttribute("data-nodeid"),A=S.getAttribute("data-handleid"),j=S.classList.contains("connectable"),R=S.classList.contains("connectableend");if(!E||!N)return C;const D={source:p?E:s,sourceHandle:p?A:a,target:p?s:E,targetHandle:p?a:A};C.connection=D;const q=j&&R&&(n===Va.Strict?p&&N==="source"||!p&&N==="target":E!==s||A!==a);C.isValid=q&&h(D),C.toHandle=g1(E,N,A,g,n,!0)}return C}const Zp={onPointerDown:c3,isValid:b1};function u3({domNode:t,panZoom:e,getTransform:n,getViewScale:s}){const a=jn(t);function l({translateExtent:d,width:f,height:h,zoomStep:g=1,pannable:p=!0,zoomable:v=!0,inversePan:_=!1}){const x=E=>{if(E.sourceEvent.type!=="wheel"||!e)return;const A=n(),j=E.sourceEvent.ctrlKey&&Vl()?10:1,R=-E.sourceEvent.deltaY*(E.sourceEvent.deltaMode===1?.05:E.sourceEvent.deltaMode?1:.002)*g,D=A[2]*Math.pow(2,R*j);e.scaleTo(D)};let w=[0,0];const S=E=>{(E.sourceEvent.type==="mousedown"||E.sourceEvent.type==="touchstart")&&(w=[E.sourceEvent.clientX??E.sourceEvent.touches[0].clientX,E.sourceEvent.clientY??E.sourceEvent.touches[0].clientY])},C=E=>{const A=n();if(E.sourceEvent.type!=="mousemove"&&E.sourceEvent.type!=="touchmove"||!e)return;const j=[E.sourceEvent.clientX??E.sourceEvent.touches[0].clientX,E.sourceEvent.clientY??E.sourceEvent.touches[0].clientY],R=[j[0]-w[0],j[1]-w[1]];w=j;const D=s()*Math.max(A[2],Math.log(A[2]))*(_?-1:1),I={x:A[0]-R[0]*D,y:A[1]-R[1]*D},q=[[0,0],[f,h]];e.setViewportConstrained({x:I.x,y:I.y,zoom:A[2]},q,d)},N=GE().on("start",S).on("zoom",p?C:null).on("zoom.wheel",v?x:null);a.call(N,{})}function c(){a.on("zoom",null)}return{update:l,destroy:c,pointer:tr}}const ff=t=>({x:t.x,y:t.y,zoom:t.k}),lp=({x:t,y:e,zoom:n})=>cf.translate(t,e).scale(n),Ua=(t,e)=>t.target.closest(`.${e}`),_1=(t,e)=>e===2&&Array.isArray(t)&&t.includes(2),d3=t=>((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2,cp=(t,e=0,n=d3,s=()=>{})=>{const a=typeof e=="number"&&e>0;return a||s(),a?t.transition().duration(e).ease(n).on("end",s):t},w1=t=>{const e=t.ctrlKey&&Vl()?10:1;return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*e};function f3({zoomPanValues:t,noWheelClassName:e,d3Selection:n,d3Zoom:s,panOnScrollMode:a,panOnScrollSpeed:l,zoomOnPinch:c,onPanZoomStart:d,onPanZoom:f,onPanZoomEnd:h}){return g=>{if(Ua(g,e))return g.ctrlKey&&g.preventDefault(),!1;g.preventDefault(),g.stopImmediatePropagation();const p=n.property("__zoom").k||1;if(g.ctrlKey&&c){const S=tr(g),C=w1(g),N=p*Math.pow(2,C);s.scaleTo(n,N,S,g);return}const v=g.deltaMode===1?20:1;let _=a===Ci.Vertical?0:g.deltaX*v,x=a===Ci.Horizontal?0:g.deltaY*v;!Vl()&&g.shiftKey&&a!==Ci.Vertical&&(_=g.deltaY*v,x=0),s.translateBy(n,-(_/p)*l,-(x/p)*l,{internal:!0});const w=ff(n.property("__zoom"));clearTimeout(t.panScrollTimeout),t.isPanScrolling?(f?.(g,w),t.panScrollTimeout=setTimeout(()=>{h?.(g,w),t.isPanScrolling=!1},150)):(t.isPanScrolling=!0,d?.(g,w))}}function h3({noWheelClassName:t,preventScrolling:e,d3ZoomHandler:n}){return function(s,a){const l=s.type==="wheel",c=!e&&l&&!s.ctrlKey,d=Ua(s,t);if(s.ctrlKey&&l&&d&&s.preventDefault(),c||d)return null;s.preventDefault(),n.call(this,s,a)}}function m3({zoomPanValues:t,onDraggingChange:e,onPanZoomStart:n}){return s=>{if(s.sourceEvent?.internal)return;const a=ff(s.transform);t.mouseButton=s.sourceEvent?.button||0,t.isZoomingOrPanning=!0,t.prevViewport=a,s.sourceEvent?.type==="mousedown"&&e(!0),n&&n?.(s.sourceEvent,a)}}function p3({zoomPanValues:t,panOnDrag:e,onPaneContextMenu:n,onTransformChange:s,onPanZoom:a}){return l=>{t.usedRightMouseButton=!!(n&&_1(e,t.mouseButton??0)),l.sourceEvent?.sync||s([l.transform.x,l.transform.y,l.transform.k]),a&&!l.sourceEvent?.internal&&a?.(l.sourceEvent,ff(l.transform))}}function g3({zoomPanValues:t,panOnDrag:e,panOnScroll:n,onDraggingChange:s,onPanZoomEnd:a,onPaneContextMenu:l}){return c=>{if(!c.sourceEvent?.internal&&(t.isZoomingOrPanning=!1,l&&_1(e,t.mouseButton??0)&&!t.usedRightMouseButton&&c.sourceEvent&&l(c.sourceEvent),t.usedRightMouseButton=!1,s(!1),a)){const d=ff(c.transform);t.prevViewport=d,clearTimeout(t.timerId),t.timerId=setTimeout(()=>{a?.(c.sourceEvent,d)},n?150:0)}}}function y3({zoomActivationKeyPressed:t,zoomOnScroll:e,zoomOnPinch:n,panOnDrag:s,panOnScroll:a,zoomOnDoubleClick:l,userSelectionActive:c,noWheelClassName:d,noPanClassName:f,lib:h,connectionInProgress:g}){return p=>{const v=t||e,_=n&&p.ctrlKey,x=p.type==="wheel";if(p.button===1&&p.type==="mousedown"&&(Ua(p,`${h}-flow__node`)||Ua(p,`${h}-flow__edge`)))return!0;if(!s&&!v&&!a&&!l&&!n||c||g&&!x||Ua(p,d)&&x||Ua(p,f)&&(!x||a&&x&&!t)||!n&&p.ctrlKey&&x)return!1;if(!n&&p.type==="touchstart"&&p.touches?.length>1)return p.preventDefault(),!1;if(!v&&!a&&!_&&x||!s&&(p.type==="mousedown"||p.type==="touchstart")||Array.isArray(s)&&!s.includes(p.button)&&p.type==="mousedown")return!1;const w=Array.isArray(s)&&s.includes(p.button)||!p.button||p.button<=1;return(!p.ctrlKey||x)&&w}}function v3({domNode:t,minZoom:e,maxZoom:n,translateExtent:s,viewport:a,onPanZoom:l,onPanZoomStart:c,onPanZoomEnd:d,onDraggingChange:f}){const h={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},g=t.getBoundingClientRect(),p=GE().scaleExtent([e,n]).translateExtent(s),v=jn(t).call(p);N({x:a.x,y:a.y,zoom:Fa(a.zoom,e,n)},[[0,0],[g.width,g.height]],s);const _=v.on("wheel.zoom"),x=v.on("dblclick.zoom");p.wheelDelta(w1);function w(G,L){return v?new Promise(X=>{p?.interpolate(L?.interpolate==="linear"?Tl:dd).transform(cp(v,L?.duration,L?.ease,()=>X(!0)),G)}):Promise.resolve(!1)}function S({noWheelClassName:G,noPanClassName:L,onPaneContextMenu:X,userSelectionActive:$,panOnScroll:F,panOnDrag:M,panOnScrollMode:z,panOnScrollSpeed:H,preventScrolling:P,zoomOnPinch:V,zoomOnScroll:k,zoomOnDoubleClick:B,zoomActivationKeyPressed:W,lib:ee,onTransformChange:he,connectionInProgress:ge,paneClickDistance:Z,selectionOnDrag:ie}){$&&!h.isZoomingOrPanning&&C();const oe=F&&!W&&!$;p.clickDistance(ie?1/0:!rr(Z)||Z<0?0:Z);const de=oe?f3({zoomPanValues:h,noWheelClassName:G,d3Selection:v,d3Zoom:p,panOnScrollMode:z,panOnScrollSpeed:H,zoomOnPinch:V,onPanZoomStart:c,onPanZoom:l,onPanZoomEnd:d}):h3({noWheelClassName:G,preventScrolling:P,d3ZoomHandler:_});if(v.on("wheel.zoom",de,{passive:!1}),!$){const be=m3({zoomPanValues:h,onDraggingChange:f,onPanZoomStart:c});p.on("start",be);const _e=p3({zoomPanValues:h,panOnDrag:M,onPaneContextMenu:!!X,onPanZoom:l,onTransformChange:he});p.on("zoom",_e);const Ue=g3({zoomPanValues:h,panOnDrag:M,panOnScroll:F,onPaneContextMenu:X,onPanZoomEnd:d,onDraggingChange:f});p.on("end",Ue)}const pe=y3({zoomActivationKeyPressed:W,panOnDrag:M,zoomOnScroll:k,panOnScroll:F,zoomOnDoubleClick:B,zoomOnPinch:V,userSelectionActive:$,noPanClassName:L,noWheelClassName:G,lib:ee,connectionInProgress:ge});p.filter(pe),B?v.on("dblclick.zoom",x):v.on("dblclick.zoom",null)}function C(){p.on("zoom",null)}async function N(G,L,X){const $=lp(G),F=p?.constrain()($,L,X);return F&&await w(F),new Promise(M=>M(F))}async function E(G,L){const X=lp(G);return await w(X,L),new Promise($=>$(X))}function A(G){if(v){const L=lp(G),X=v.property("__zoom");(X.k!==G.zoom||X.x!==G.x||X.y!==G.y)&&p?.transform(v,L,null,{sync:!0})}}function j(){const G=v?YE(v.node()):{x:0,y:0,k:1};return{x:G.x,y:G.y,zoom:G.k}}function R(G,L){return v?new Promise(X=>{p?.interpolate(L?.interpolate==="linear"?Tl:dd).scaleTo(cp(v,L?.duration,L?.ease,()=>X(!0)),G)}):Promise.resolve(!1)}function D(G,L){return v?new Promise(X=>{p?.interpolate(L?.interpolate==="linear"?Tl:dd).scaleBy(cp(v,L?.duration,L?.ease,()=>X(!0)),G)}):Promise.resolve(!1)}function I(G){p?.scaleExtent(G)}function q(G){p?.translateExtent(G)}function Q(G){const L=!rr(G)||G<0?0:G;p?.clickDistance(L)}return{update:S,destroy:C,setViewport:E,setViewportConstrained:N,getViewport:j,scaleTo:R,scaleBy:D,setScaleExtent:I,setTranslateExtent:q,syncViewport:A,setClickDistance:Q}}var Xa;(function(t){t.Line="line",t.Handle="handle"})(Xa||(Xa={}));function b3({width:t,prevWidth:e,height:n,prevHeight:s,affectsX:a,affectsY:l}){const c=t-e,d=n-s,f=[c>0?1:c<0?-1:0,d>0?1:d<0?-1:0];return c&&a&&(f[0]=f[0]*-1),d&&l&&(f[1]=f[1]*-1),f}function Hw(t){const e=t.includes("right")||t.includes("left"),n=t.includes("bottom")||t.includes("top"),s=t.includes("left"),a=t.includes("top");return{isHorizontal:e,isVertical:n,affectsX:s,affectsY:a}}function Ms(t,e){return Math.max(0,e-t)}function Ds(t,e){return Math.max(0,t-e)}function Wu(t,e,n){return Math.max(0,e-t,t-n)}function Vw(t,e){return t?!e:e}function _3(t,e,n,s,a,l,c,d){let{affectsX:f,affectsY:h}=e;const{isHorizontal:g,isVertical:p}=e,v=g&&p,{xSnapped:_,ySnapped:x}=n,{minWidth:w,maxWidth:S,minHeight:C,maxHeight:N}=s,{x:E,y:A,width:j,height:R,aspectRatio:D}=t;let I=Math.floor(g?_-t.pointerX:0),q=Math.floor(p?x-t.pointerY:0);const Q=j+(f?-I:I),G=R+(h?-q:q),L=-l[0]*j,X=-l[1]*R;let $=Wu(Q,w,S),F=Wu(G,C,N);if(c){let H=0,P=0;f&&I<0?H=Ms(E+I+L,c[0][0]):!f&&I>0&&(H=Ds(E+Q+L,c[1][0])),h&&q<0?P=Ms(A+q+X,c[0][1]):!h&&q>0&&(P=Ds(A+G+X,c[1][1])),$=Math.max($,H),F=Math.max(F,P)}if(d){let H=0,P=0;f&&I>0?H=Ds(E+I,d[0][0]):!f&&I<0&&(H=Ms(E+Q,d[1][0])),h&&q>0?P=Ds(A+q,d[0][1]):!h&&q<0&&(P=Ms(A+G,d[1][1])),$=Math.max($,H),F=Math.max(F,P)}if(a){if(g){const H=Wu(Q/D,C,N)*D;if($=Math.max($,H),c){let P=0;!f&&!h||f&&!h&&v?P=Ds(A+X+Q/D,c[1][1])*D:P=Ms(A+X+(f?I:-I)/D,c[0][1])*D,$=Math.max($,P)}if(d){let P=0;!f&&!h||f&&!h&&v?P=Ms(A+Q/D,d[1][1])*D:P=Ds(A+(f?I:-I)/D,d[0][1])*D,$=Math.max($,P)}}if(p){const H=Wu(G*D,w,S)/D;if(F=Math.max(F,H),c){let P=0;!f&&!h||h&&!f&&v?P=Ds(E+G*D+L,c[1][0])/D:P=Ms(E+(h?q:-q)*D+L,c[0][0])/D,F=Math.max(F,P)}if(d){let P=0;!f&&!h||h&&!f&&v?P=Ms(E+G*D,d[1][0])/D:P=Ds(E+(h?q:-q)*D,d[0][0])/D,F=Math.max(F,P)}}}q=q+(q<0?F:-F),I=I+(I<0?$:-$),a&&(v?Q>G*D?q=(Vw(f,h)?-I:I)/D:I=(Vw(f,h)?-q:q)*D:g?(q=I/D,h=f):(I=q*D,f=h));const M=f?E+I:E,z=h?A+q:A;return{width:j+(f?-I:I),height:R+(h?-q:q),x:l[0]*I*(f?-1:1)+M,y:l[1]*q*(h?-1:1)+z}}const x1={width:0,height:0,x:0,y:0},w3={...x1,pointerX:0,pointerY:0,aspectRatio:1};function x3(t){return[[0,0],[t.measured.width,t.measured.height]]}function S3(t,e,n){const s=e.position.x+t.position.x,a=e.position.y+t.position.y,l=t.measured.width??0,c=t.measured.height??0,d=n[0]*l,f=n[1]*c;return[[s-d,a-f],[s+l-d,a+c-f]]}function E3({domNode:t,nodeId:e,getStoreItems:n,onChange:s,onEnd:a}){const l=jn(t);let c={controlDirection:Hw("bottom-right"),boundaries:{minWidth:0,minHeight:0,maxWidth:Number.MAX_VALUE,maxHeight:Number.MAX_VALUE},resizeDirection:void 0,keepAspectRatio:!1};function d({controlPosition:h,boundaries:g,keepAspectRatio:p,resizeDirection:v,onResizeStart:_,onResize:x,onResizeEnd:w,shouldResize:S}){let C={...x1},N={...w3};c={boundaries:g,resizeDirection:v,keepAspectRatio:p,controlDirection:Hw(h)};let E,A=null,j=[],R,D,I,q=!1;const Q=kE().on("start",G=>{const{nodeLookup:L,transform:X,snapGrid:$,snapToGrid:F,nodeOrigin:M,paneDomNode:z}=n();if(E=L.get(e),!E)return;A=z?.getBoundingClientRect()??null;const{xSnapped:H,ySnapped:P}=Nl(G.sourceEvent,{transform:X,snapGrid:$,snapToGrid:F,containerBounds:A});C={width:E.measured.width??0,height:E.measured.height??0,x:E.position.x??0,y:E.position.y??0},N={...C,pointerX:H,pointerY:P,aspectRatio:C.width/C.height},R=void 0,E.parentId&&(E.extent==="parent"||E.expandParent)&&(R=L.get(E.parentId),D=R&&E.extent==="parent"?x3(R):void 0),j=[],I=void 0;for(const[V,k]of L)if(k.parentId===e&&(j.push({id:V,position:{...k.position},extent:k.extent}),k.extent==="parent"||k.expandParent)){const B=S3(k,E,k.origin??M);I?I=[[Math.min(B[0][0],I[0][0]),Math.min(B[0][1],I[0][1])],[Math.max(B[1][0],I[1][0]),Math.max(B[1][1],I[1][1])]]:I=B}_?.(G,{...C})}).on("drag",G=>{const{transform:L,snapGrid:X,snapToGrid:$,nodeOrigin:F}=n(),M=Nl(G.sourceEvent,{transform:L,snapGrid:X,snapToGrid:$,containerBounds:A}),z=[];if(!E)return;const{x:H,y:P,width:V,height:k}=C,B={},W=E.origin??F,{width:ee,height:he,x:ge,y:Z}=_3(N,c.controlDirection,M,c.boundaries,c.keepAspectRatio,W,D,I),ie=ee!==V,oe=he!==k,de=ge!==H&&ie,pe=Z!==P&&oe;if(!de&&!pe&&!ie&&!oe)return;if((de||pe||W[0]===1||W[1]===1)&&(B.x=de?ge:C.x,B.y=pe?Z:C.y,C.x=B.x,C.y=B.y,j.length>0)){const ce=ge-H,ve=Z-P;for(const Me of j)Me.position={x:Me.position.x-ce+W[0]*(ee-V),y:Me.position.y-ve+W[1]*(he-k)},z.push(Me)}if((ie||oe)&&(B.width=ie&&(!c.resizeDirection||c.resizeDirection==="horizontal")?ee:C.width,B.height=oe&&(!c.resizeDirection||c.resizeDirection==="vertical")?he:C.height,C.width=B.width,C.height=B.height),R&&E.expandParent){const ce=W[0]*(B.width??0);B.x&&B.x<ce&&(C.x=ce,N.x=N.x-(B.x-ce));const ve=W[1]*(B.height??0);B.y&&B.y<ve&&(C.y=ve,N.y=N.y-(B.y-ve))}const be=b3({width:C.width,prevWidth:V,height:C.height,prevHeight:k,affectsX:c.controlDirection.affectsX,affectsY:c.controlDirection.affectsY}),_e={...C,direction:be};S?.(G,_e)!==!1&&(q=!0,x?.(G,_e),s(B,z))}).on("end",G=>{q&&(w?.(G,{...C}),a?.({...C}),q=!1)});l.call(Q)}function f(){l.on(".drag",null)}return{update:d,destroy:f}}var up={exports:{}},dp={},fp={exports:{}},hp={};var Fw;function C3(){if(Fw)return hp;Fw=1;var t=Xl();function e(p,v){return p===v&&(p!==0||1/p===1/v)||p!==p&&v!==v}var n=typeof Object.is=="function"?Object.is:e,s=t.useState,a=t.useEffect,l=t.useLayoutEffect,c=t.useDebugValue;function d(p,v){var _=v(),x=s({inst:{value:_,getSnapshot:v}}),w=x[0].inst,S=x[1];return l(function(){w.value=_,w.getSnapshot=v,f(w)&&S({inst:w})},[p,_,v]),a(function(){return f(w)&&S({inst:w}),p(function(){f(w)&&S({inst:w})})},[p]),c(_),_}function f(p){var v=p.getSnapshot;p=p.value;try{var _=v();return!n(p,_)}catch{return!0}}function h(p,v){return v()}var g=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?h:d;return hp.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:g,hp}var Yw;function A3(){return Yw||(Yw=1,fp.exports=C3()),fp.exports}var Gw;function T3(){if(Gw)return dp;Gw=1;var t=Xl(),e=A3();function n(h,g){return h===g&&(h!==0||1/h===1/g)||h!==h&&g!==g}var s=typeof Object.is=="function"?Object.is:n,a=e.useSyncExternalStore,l=t.useRef,c=t.useEffect,d=t.useMemo,f=t.useDebugValue;return dp.useSyncExternalStoreWithSelector=function(h,g,p,v,_){var x=l(null);if(x.current===null){var w={hasValue:!1,value:null};x.current=w}else w=x.current;x=d(function(){function C(R){if(!N){if(N=!0,E=R,R=v(R),_!==void 0&&w.hasValue){var D=w.value;if(_(D,R))return A=D}return A=R}if(D=A,s(E,R))return D;var I=v(R);return _!==void 0&&_(D,I)?(E=R,D):(E=R,A=I)}var N=!1,E,A,j=p===void 0?null:p;return[function(){return C(g())},j===null?void 0:function(){return C(j())}]},[g,p,v,_]);var S=a(h,x[0],x[1]);return c(function(){w.hasValue=!0,w.value=S},[S]),f(S),S},dp}var Xw;function N3(){return Xw||(Xw=1,up.exports=T3()),up.exports}var O3=N3();const j3=Wd(O3),R3={},Kw=t=>{let e;const n=new Set,s=(g,p)=>{const v=typeof g=="function"?g(e):g;if(!Object.is(v,e)){const _=e;e=p??(typeof v!="object"||v===null)?v:Object.assign({},e,v),n.forEach(x=>x(e,_))}},a=()=>e,f={setState:s,getState:a,getInitialState:()=>h,subscribe:g=>(n.add(g),()=>n.delete(g)),destroy:()=>{(R3?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},h=e=t(s,a,f);return f},k3=t=>t?Kw(t):Kw,{useDebugValue:M3}=GN,{useSyncExternalStoreWithSelector:D3}=j3,U3=t=>t;function S1(t,e=U3,n){const s=D3(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,n);return M3(s),s}const Qw=(t,e)=>{const n=k3(t),s=(a,l=e)=>S1(n,a,l);return Object.assign(s,n),s},I3=(t,e)=>t?Qw(t,e):Qw;function yt(t,e){if(Object.is(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;if(t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(const[s,a]of t)if(!Object.is(a,e.get(s)))return!1;return!0}if(t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(const s of t)if(!e.has(s))return!1;return!0}const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!1;for(const s of n)if(!Object.prototype.hasOwnProperty.call(e,s)||!Object.is(t[s],e[s]))return!1;return!0}const hf=O.createContext(null),$3=hf.Provider,E1=ir.error001();function Ye(t,e){const n=O.useContext(hf);if(n===null)throw new Error(E1);return S1(n,t,e)}function mt(){const t=O.useContext(hf);if(t===null)throw new Error(E1);return O.useMemo(()=>({getState:t.getState,setState:t.setState,subscribe:t.subscribe}),[t])}const Ww={display:"none"},L3={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},C1="react-flow__node-desc",A1="react-flow__edge-desc",z3="react-flow__aria-live",B3=t=>t.ariaLiveMessage,P3=t=>t.ariaLabelConfig;function q3({rfId:t}){const e=Ye(B3);return b.jsx("div",{id:`${z3}-${t}`,"aria-live":"assertive","aria-atomic":"true",style:L3,children:e})}function H3({rfId:t,disableKeyboardA11y:e}){const n=Ye(P3);return b.jsxs(b.Fragment,{children:[b.jsx("div",{id:`${C1}-${t}`,style:Ww,children:e?n["node.a11yDescription.default"]:n["node.a11yDescription.keyboardDisabled"]}),b.jsx("div",{id:`${A1}-${t}`,style:Ww,children:n["edge.a11yDescription.default"]}),!e&&b.jsx(q3,{rfId:t})]})}const mf=O.forwardRef(({position:t="top-left",children:e,className:n,style:s,...a},l)=>{const c=`${t}`.split("-");return b.jsx("div",{className:Ot(["react-flow__panel",n,...c]),style:s,ref:l,...a,children:e})});mf.displayName="Panel";function V3({proOptions:t,position:e="bottom-right"}){return t?.hideAttribution?null:b.jsx(mf,{position:e,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:b.jsx("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}const F3=t=>{const e=[],n=[];for(const[,s]of t.nodeLookup)s.selected&&e.push(s.internals.userNode);for(const[,s]of t.edgeLookup)s.selected&&n.push(s);return{selectedNodes:e,selectedEdges:n}},Ju=t=>t.id;function Y3(t,e){return yt(t.selectedNodes.map(Ju),e.selectedNodes.map(Ju))&&yt(t.selectedEdges.map(Ju),e.selectedEdges.map(Ju))}function G3({onSelectionChange:t}){const e=mt(),{selectedNodes:n,selectedEdges:s}=Ye(F3,Y3);return O.useEffect(()=>{const a={nodes:n,edges:s};t?.(a),e.getState().onSelectionChangeHandlers.forEach(l=>l(a))},[n,s,t]),null}const X3=t=>!!t.onSelectionChangeHandlers;function K3({onSelectionChange:t}){const e=Ye(X3);return t||e?b.jsx(G3,{onSelectionChange:t}):null}const T1=[0,0],Q3={x:0,y:0,zoom:1},W3=["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","autoPanOnNodeFocus","nodesConnectable","nodesFocusable","edgesFocusable","edgesReconnectable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","connectionDragThreshold","onBeforeDelete","debug","autoPanSpeed","ariaLabelConfig"],Jw=[...W3,"rfId"],J3=t=>({setNodes:t.setNodes,setEdges:t.setEdges,setMinZoom:t.setMinZoom,setMaxZoom:t.setMaxZoom,setTranslateExtent:t.setTranslateExtent,setNodeExtent:t.setNodeExtent,reset:t.reset,setDefaultNodesAndEdges:t.setDefaultNodesAndEdges}),Zw={translateExtent:Pl,nodeOrigin:T1,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1"};function Z3(t){const{setNodes:e,setEdges:n,setMinZoom:s,setMaxZoom:a,setTranslateExtent:l,setNodeExtent:c,reset:d,setDefaultNodesAndEdges:f}=Ye(J3,yt),h=mt();O.useEffect(()=>(f(t.defaultNodes,t.defaultEdges),()=>{g.current=Zw,d()}),[]);const g=O.useRef(Zw);return O.useEffect(()=>{for(const p of Jw){const v=t[p],_=g.current[p];v!==_&&(typeof t[p]>"u"||(p==="nodes"?e(v):p==="edges"?n(v):p==="minZoom"?s(v):p==="maxZoom"?a(v):p==="translateExtent"?l(v):p==="nodeExtent"?c(v):p==="ariaLabelConfig"?h.setState({ariaLabelConfig:II(v)}):p==="fitView"?h.setState({fitViewQueued:v}):p==="fitViewOptions"?h.setState({fitViewOptions:v}):h.setState({[p]:v})))}g.current=t},Jw.map(p=>t[p])),null}function ex(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function e$(t){const[e,n]=O.useState(t==="system"?null:t);return O.useEffect(()=>{if(t!=="system"){n(t);return}const s=ex(),a=()=>n(s?.matches?"dark":"light");return a(),s?.addEventListener("change",a),()=>{s?.removeEventListener("change",a)}},[t]),e!==null?e:ex()?.matches?"dark":"light"}const tx=typeof document<"u"?document:null;function Yl(t=null,e={target:tx,actInsideInputWithModifier:!0}){const[n,s]=O.useState(!1),a=O.useRef(!1),l=O.useRef(new Set([])),[c,d]=O.useMemo(()=>{if(t!==null){const h=(Array.isArray(t)?t:[t]).filter(p=>typeof p=="string").map(p=>p.replace("+",`
`).replace(`

`,`
+`).split(`
`)),g=h.reduce((p,v)=>p.concat(...v),[]);return[h,g]}return[[],[]]},[t]);return O.useEffect(()=>{const f=e?.target??tx,h=e?.actInsideInputWithModifier??!0;if(t!==null){const g=_=>{if(a.current=_.ctrlKey||_.metaKey||_.shiftKey||_.altKey,(!a.current||a.current&&!h)&&a1(_))return!1;const w=rx(_.code,d);if(l.current.add(_[w]),nx(c,l.current,!1)){const S=_.composedPath?.()?.[0]||_.target,C=S?.nodeName==="BUTTON"||S?.nodeName==="A";e.preventDefault!==!1&&(a.current||!C)&&_.preventDefault(),s(!0)}},p=_=>{const x=rx(_.code,d);nx(c,l.current,!0)?(s(!1),l.current.clear()):l.current.delete(_[x]),_.key==="Meta"&&l.current.clear(),a.current=!1},v=()=>{l.current.clear(),s(!1)};return f?.addEventListener("keydown",g),f?.addEventListener("keyup",p),window.addEventListener("blur",v),window.addEventListener("contextmenu",v),()=>{f?.removeEventListener("keydown",g),f?.removeEventListener("keyup",p),window.removeEventListener("blur",v),window.removeEventListener("contextmenu",v)}}},[t,s]),n}function nx(t,e,n){return t.filter(s=>n||s.length===e.size).some(s=>s.every(a=>e.has(a)))}function rx(t,e){return e.includes(t)?"code":"key"}const t$=()=>{const t=mt();return O.useMemo(()=>({zoomIn:e=>{const{panZoom:n}=t.getState();return n?n.scaleBy(1.2,{duration:e?.duration}):Promise.resolve(!1)},zoomOut:e=>{const{panZoom:n}=t.getState();return n?n.scaleBy(1/1.2,{duration:e?.duration}):Promise.resolve(!1)},zoomTo:(e,n)=>{const{panZoom:s}=t.getState();return s?s.scaleTo(e,{duration:n?.duration}):Promise.resolve(!1)},getZoom:()=>t.getState().transform[2],setViewport:async(e,n)=>{const{transform:[s,a,l],panZoom:c}=t.getState();return c?(await c.setViewport({x:e.x??s,y:e.y??a,zoom:e.zoom??l},n),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{const[e,n,s]=t.getState().transform;return{x:e,y:n,zoom:s}},setCenter:async(e,n,s)=>t.getState().setCenter(e,n,s),fitBounds:async(e,n)=>{const{width:s,height:a,minZoom:l,maxZoom:c,panZoom:d}=t.getState(),f=qg(e,s,a,l,c,n?.padding??.1);return d?(await d.setViewport(f,{duration:n?.duration,ease:n?.ease,interpolate:n?.interpolate}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:(e,n={})=>{const{transform:s,snapGrid:a,snapToGrid:l,domNode:c}=t.getState();if(!c)return e;const{x:d,y:f}=c.getBoundingClientRect(),h={x:e.x-d,y:e.y-f},g=n.snapGrid??a,p=n.snapToGrid??l;return ic(h,s,p,g)},flowToScreenPosition:e=>{const{transform:n,domNode:s}=t.getState();if(!s)return e;const{x:a,y:l}=s.getBoundingClientRect(),c=Bd(e,n);return{x:c.x+a,y:c.y+l}}}),[])};function N1(t,e){const n=[],s=new Map,a=[];for(const l of t)if(l.type==="add"){a.push(l);continue}else if(l.type==="remove"||l.type==="replace")s.set(l.id,[l]);else{const c=s.get(l.id);c?c.push(l):s.set(l.id,[l])}for(const l of e){const c=s.get(l.id);if(!c){n.push(l);continue}if(c[0].type==="remove")continue;if(c[0].type==="replace"){n.push({...c[0].item});continue}const d={...l};for(const f of c)n$(f,d);n.push(d)}return a.length&&a.forEach(l=>{l.index!==void 0?n.splice(l.index,0,{...l.item}):n.push({...l.item})}),n}function n$(t,e){switch(t.type){case"select":{e.selected=t.selected;break}case"position":{typeof t.position<"u"&&(e.position=t.position),typeof t.dragging<"u"&&(e.dragging=t.dragging);break}case"dimensions":{typeof t.dimensions<"u"&&(e.measured??={},e.measured.width=t.dimensions.width,e.measured.height=t.dimensions.height,t.setAttributes&&((t.setAttributes===!0||t.setAttributes==="width")&&(e.width=t.dimensions.width),(t.setAttributes===!0||t.setAttributes==="height")&&(e.height=t.dimensions.height))),typeof t.resizing=="boolean"&&(e.resizing=t.resizing);break}}}function O1(t,e){return N1(t,e)}function j1(t,e){return N1(t,e)}function hi(t,e){return{id:t,type:"select",selected:e}}function Ia(t,e=new Set,n=!1){const s=[];for(const[a,l]of t){const c=e.has(a);!(l.selected===void 0&&!c)&&l.selected!==c&&(n&&(l.selected=c),s.push(hi(l.id,c)))}return s}function sx({items:t=[],lookup:e}){const n=[],s=new Map(t.map(a=>[a.id,a]));for(const[a,l]of t.entries()){const c=e.get(l.id),d=c?.internals?.userNode??c;d!==void 0&&d!==l&&n.push({id:l.id,item:l,type:"replace"}),d===void 0&&n.push({item:l,type:"add",index:a})}for(const[a]of e)s.get(a)===void 0&&n.push({id:a,type:"remove"});return n}function ix(t){return{id:t.id,type:"remove"}}const ax=t=>AI(t),r$=t=>JE(t);function R1(t){return O.forwardRef(t)}const s$=typeof window<"u"?O.useLayoutEffect:O.useEffect;function ox(t){const[e,n]=O.useState(BigInt(0)),[s]=O.useState(()=>i$(()=>n(a=>a+BigInt(1))));return s$(()=>{const a=s.get();a.length&&(t(a),s.reset())},[e]),s}function i$(t){let e=[];return{get:()=>e,reset:()=>{e=[]},push:n=>{e.push(n),t()}}}const k1=O.createContext(null);function a$({children:t}){const e=mt(),n=O.useCallback(d=>{const{nodes:f=[],setNodes:h,hasDefaultNodes:g,onNodesChange:p,nodeLookup:v,fitViewQueued:_}=e.getState();let x=f;for(const S of d)x=typeof S=="function"?S(x):S;const w=sx({items:x,lookup:v});g&&h(x),w.length>0?p?.(w):_&&window.requestAnimationFrame(()=>{const{fitViewQueued:S,nodes:C,setNodes:N}=e.getState();S&&N(C)})},[]),s=ox(n),a=O.useCallback(d=>{const{edges:f=[],setEdges:h,hasDefaultEdges:g,onEdgesChange:p,edgeLookup:v}=e.getState();let _=f;for(const x of d)_=typeof x=="function"?x(_):x;g?h(_):p&&p(sx({items:_,lookup:v}))},[]),l=ox(a),c=O.useMemo(()=>({nodeQueue:s,edgeQueue:l}),[]);return b.jsx(k1.Provider,{value:c,children:t})}function o$(){const t=O.useContext(k1);if(!t)throw new Error("useBatchContext must be used within a BatchProvider");return t}const l$=t=>!!t.panZoom;function Wr(){const t=t$(),e=mt(),n=o$(),s=Ye(l$),a=O.useMemo(()=>{const l=p=>e.getState().nodeLookup.get(p),c=p=>{n.nodeQueue.push(p)},d=p=>{n.edgeQueue.push(p)},f=p=>{const{nodeLookup:v,nodeOrigin:_}=e.getState(),x=ax(p)?p:v.get(p.id),w=x.parentId?s1(x.position,x.measured,x.parentId,v,_):x.position,S={...x,position:w,width:x.measured?.width??x.width,height:x.measured?.height??x.height};return Ya(S)},h=(p,v,_={replace:!1})=>{c(x=>x.map(w=>{if(w.id===p){const S=typeof v=="function"?v(w):v;return _.replace&&ax(S)?S:{...w,...S}}return w}))},g=(p,v,_={replace:!1})=>{d(x=>x.map(w=>{if(w.id===p){const S=typeof v=="function"?v(w):v;return _.replace&&r$(S)?S:{...w,...S}}return w}))};return{getNodes:()=>e.getState().nodes.map(p=>({...p})),getNode:p=>l(p)?.internals.userNode,getInternalNode:l,getEdges:()=>{const{edges:p=[]}=e.getState();return p.map(v=>({...v}))},getEdge:p=>e.getState().edgeLookup.get(p),setNodes:c,setEdges:d,addNodes:p=>{const v=Array.isArray(p)?p:[p];n.nodeQueue.push(_=>[..._,...v])},addEdges:p=>{const v=Array.isArray(p)?p:[p];n.edgeQueue.push(_=>[..._,...v])},toObject:()=>{const{nodes:p=[],edges:v=[],transform:_}=e.getState(),[x,w,S]=_;return{nodes:p.map(C=>({...C})),edges:v.map(C=>({...C})),viewport:{x,y:w,zoom:S}}},deleteElements:async({nodes:p=[],edges:v=[]})=>{const{nodes:_,edges:x,onNodesDelete:w,onEdgesDelete:S,triggerNodeChanges:C,triggerEdgeChanges:N,onDelete:E,onBeforeDelete:A}=e.getState(),{nodes:j,edges:R}=await RI({nodesToRemove:p,edgesToRemove:v,nodes:_,edges:x,onBeforeDelete:A}),D=R.length>0,I=j.length>0;if(D){const q=R.map(ix);S?.(R),N(q)}if(I){const q=j.map(ix);w?.(j),C(q)}return(I||D)&&E?.({nodes:j,edges:R}),{deletedNodes:j,deletedEdges:R}},getIntersectingNodes:(p,v=!0,_)=>{const x=kw(p),w=x?p:f(p),S=_!==void 0;return w?(_||e.getState().nodes).filter(C=>{const N=e.getState().nodeLookup.get(C.id);if(N&&!x&&(C.id===p.id||!N.internals.positionAbsolute))return!1;const E=Ya(S?C:N),A=Hl(E,w);return v&&A>0||A>=E.width*E.height||A>=w.width*w.height}):[]},isNodeIntersecting:(p,v,_=!0)=>{const w=kw(p)?p:f(p);if(!w)return!1;const S=Hl(w,v);return _&&S>0||S>=v.width*v.height||S>=w.width*w.height},updateNode:h,updateNodeData:(p,v,_={replace:!1})=>{h(p,x=>{const w=typeof v=="function"?v(x):v;return _.replace?{...x,data:w}:{...x,data:{...x.data,...w}}},_)},updateEdge:g,updateEdgeData:(p,v,_={replace:!1})=>{g(p,x=>{const w=typeof v=="function"?v(x):v;return _.replace?{...x,data:w}:{...x,data:{...x.data,...w}}},_)},getNodesBounds:p=>{const{nodeLookup:v,nodeOrigin:_}=e.getState();return TI(p,{nodeLookup:v,nodeOrigin:_})},getHandleConnections:({type:p,id:v,nodeId:_})=>Array.from(e.getState().connectionLookup.get(`${_}-${p}${v?`-${v}`:""}`)?.values()??[]),getNodeConnections:({type:p,handleId:v,nodeId:_})=>Array.from(e.getState().connectionLookup.get(`${_}${p?v?`-${p}-${v}`:`-${p}`:""}`)?.values()??[]),fitView:async p=>{const v=e.getState().fitViewResolver??UI();return e.setState({fitViewQueued:!0,fitViewOptions:p,fitViewResolver:v}),n.nodeQueue.push(_=>[..._]),v.promise}}},[]);return O.useMemo(()=>({...a,...t,viewportInitialized:s}),[s])}const lx=t=>t.selected,c$=typeof window<"u"?window:void 0;function u$({deleteKeyCode:t,multiSelectionKeyCode:e}){const n=mt(),{deleteElements:s}=Wr(),a=Yl(t,{actInsideInputWithModifier:!1}),l=Yl(e,{target:c$});O.useEffect(()=>{if(a){const{edges:c,nodes:d}=n.getState();s({nodes:d.filter(lx),edges:c.filter(lx)}),n.setState({nodesSelectionActive:!1})}},[a]),O.useEffect(()=>{n.setState({multiSelectionActive:l})},[l])}function d$(t){const e=mt();O.useEffect(()=>{const n=()=>{if(!t.current||!(t.current.checkVisibility?.()??!0))return!1;const s=Hg(t.current);(s.height===0||s.width===0)&&e.getState().onError?.("004",ir.error004()),e.setState({width:s.width||500,height:s.height||500})};if(t.current){n(),window.addEventListener("resize",n);const s=new ResizeObserver(()=>n());return s.observe(t.current),()=>{window.removeEventListener("resize",n),s&&t.current&&s.unobserve(t.current)}}},[])}const pf={position:"absolute",width:"100%",height:"100%",top:0,left:0},f$=t=>({userSelectionActive:t.userSelectionActive,lib:t.lib,connectionInProgress:t.connection.inProgress});function h$({onPaneContextMenu:t,zoomOnScroll:e=!0,zoomOnPinch:n=!0,panOnScroll:s=!1,panOnScrollSpeed:a=.5,panOnScrollMode:l=Ci.Free,zoomOnDoubleClick:c=!0,panOnDrag:d=!0,defaultViewport:f,translateExtent:h,minZoom:g,maxZoom:p,zoomActivationKeyCode:v,preventScrolling:_=!0,children:x,noWheelClassName:w,noPanClassName:S,onViewportChange:C,isControlledViewport:N,paneClickDistance:E,selectionOnDrag:A}){const j=mt(),R=O.useRef(null),{userSelectionActive:D,lib:I,connectionInProgress:q}=Ye(f$,yt),Q=Yl(v),G=O.useRef();d$(R);const L=O.useCallback(X=>{C?.({x:X[0],y:X[1],zoom:X[2]}),N||j.setState({transform:X})},[C,N]);return O.useEffect(()=>{if(R.current){G.current=v3({domNode:R.current,minZoom:g,maxZoom:p,translateExtent:h,viewport:f,onDraggingChange:M=>j.setState({paneDragging:M}),onPanZoomStart:(M,z)=>{const{onViewportChangeStart:H,onMoveStart:P}=j.getState();P?.(M,z),H?.(z)},onPanZoom:(M,z)=>{const{onViewportChange:H,onMove:P}=j.getState();P?.(M,z),H?.(z)},onPanZoomEnd:(M,z)=>{const{onViewportChangeEnd:H,onMoveEnd:P}=j.getState();P?.(M,z),H?.(z)}});const{x:X,y:$,zoom:F}=G.current.getViewport();return j.setState({panZoom:G.current,transform:[X,$,F],domNode:R.current.closest(".react-flow")}),()=>{G.current?.destroy()}}},[]),O.useEffect(()=>{G.current?.update({onPaneContextMenu:t,zoomOnScroll:e,zoomOnPinch:n,panOnScroll:s,panOnScrollSpeed:a,panOnScrollMode:l,zoomOnDoubleClick:c,panOnDrag:d,zoomActivationKeyPressed:Q,preventScrolling:_,noPanClassName:S,userSelectionActive:D,noWheelClassName:w,lib:I,onTransformChange:L,connectionInProgress:q,selectionOnDrag:A,paneClickDistance:E})},[t,e,n,s,a,l,c,d,Q,_,S,D,w,I,L,q,A,E]),b.jsx("div",{className:"react-flow__renderer",ref:R,style:pf,children:x})}const m$=t=>({userSelectionActive:t.userSelectionActive,userSelectionRect:t.userSelectionRect});function p$(){const{userSelectionActive:t,userSelectionRect:e}=Ye(m$,yt);return t&&e?b.jsx("div",{className:"react-flow__selection react-flow__container",style:{width:e.width,height:e.height,transform:`translate(${e.x}px, ${e.y}px)`}}):null}const mp=(t,e)=>n=>{n.target===e.current&&t?.(n)},g$=t=>({userSelectionActive:t.userSelectionActive,elementsSelectable:t.elementsSelectable,connectionInProgress:t.connection.inProgress,dragging:t.paneDragging});function y$({isSelecting:t,selectionKeyPressed:e,selectionMode:n=ql.Full,panOnDrag:s,paneClickDistance:a,selectionOnDrag:l,onSelectionStart:c,onSelectionEnd:d,onPaneClick:f,onPaneContextMenu:h,onPaneScroll:g,onPaneMouseEnter:p,onPaneMouseMove:v,onPaneMouseLeave:_,children:x}){const w=mt(),{userSelectionActive:S,elementsSelectable:C,dragging:N,connectionInProgress:E}=Ye(g$,yt),A=C&&(t||S),j=O.useRef(null),R=O.useRef(),D=O.useRef(new Set),I=O.useRef(new Set),q=O.useRef(!1),Q=H=>{if(q.current||E){q.current=!1;return}f?.(H),w.getState().resetSelectedElements(),w.setState({nodesSelectionActive:!1})},G=H=>{if(Array.isArray(s)&&s?.includes(2)){H.preventDefault();return}h?.(H)},L=g?H=>g(H):void 0,X=H=>{q.current&&(H.stopPropagation(),q.current=!1)},$=H=>{const{domNode:P}=w.getState();if(R.current=P?.getBoundingClientRect(),!R.current)return;const V=H.target===j.current;if(!V&&!!H.target.closest(".nokey")||!t||!(l&&V||e)||H.button!==0||!H.isPrimary)return;H.target?.setPointerCapture?.(H.pointerId),q.current=!1;const{x:W,y:ee}=sr(H.nativeEvent,R.current);w.setState({userSelectionRect:{width:0,height:0,startX:W,startY:ee,x:W,y:ee}}),V||(H.stopPropagation(),H.preventDefault())},F=H=>{const{userSelectionRect:P,transform:V,nodeLookup:k,edgeLookup:B,connectionLookup:W,triggerNodeChanges:ee,triggerEdgeChanges:he,defaultEdgeOptions:ge,resetSelectedElements:Z}=w.getState();if(!R.current||!P)return;const{x:ie,y:oe}=sr(H.nativeEvent,R.current),{startX:de,startY:pe}=P;if(!q.current){const ve=e?0:a;if(Math.hypot(ie-de,oe-pe)<=ve)return;Z(),c?.(H)}q.current=!0;const be={startX:de,startY:pe,x:ie<de?ie:de,y:oe<pe?oe:pe,width:Math.abs(ie-de),height:Math.abs(oe-pe)},_e=D.current,Ue=I.current;D.current=new Set(Pg(k,be,V,n===ql.Partial,!0).map(ve=>ve.id)),I.current=new Set;const ce=ge?.selectable??!0;for(const ve of D.current){const Me=W.get(ve);if(Me)for(const{edgeId:Je}of Me.values()){const at=B.get(Je);at&&(at.selectable??ce)&&I.current.add(Je)}}if(!Mw(_e,D.current)){const ve=Ia(k,D.current,!0);ee(ve)}if(!Mw(Ue,I.current)){const ve=Ia(B,I.current);he(ve)}w.setState({userSelectionRect:be,userSelectionActive:!0,nodesSelectionActive:!1})},M=H=>{H.button===0&&(H.target?.releasePointerCapture?.(H.pointerId),!S&&H.target===j.current&&w.getState().userSelectionRect&&Q?.(H),w.setState({userSelectionActive:!1,userSelectionRect:null}),q.current&&(d?.(H),w.setState({nodesSelectionActive:D.current.size>0})))},z=s===!0||Array.isArray(s)&&s.includes(0);return b.jsxs("div",{className:Ot(["react-flow__pane",{draggable:z,dragging:N,selection:t}]),onClick:A?void 0:mp(Q,j),onContextMenu:mp(G,j),onWheel:mp(L,j),onPointerEnter:A?void 0:p,onPointerMove:A?F:v,onPointerUp:A?M:void 0,onPointerDownCapture:A?$:void 0,onClickCapture:A?X:void 0,onPointerLeave:_,ref:j,style:pf,children:[x,b.jsx(p$,{})]})}function eg({id:t,store:e,unselect:n=!1,nodeRef:s}){const{addSelectedNodes:a,unselectNodesAndEdges:l,multiSelectionActive:c,nodeLookup:d,onError:f}=e.getState(),h=d.get(t);if(!h){f?.("012",ir.error012(t));return}e.setState({nodesSelectionActive:!1}),h.selected?(n||h.selected&&c)&&(l({nodes:[h],edges:[]}),requestAnimationFrame(()=>s?.current?.blur())):a([t])}function M1({nodeRef:t,disabled:e=!1,noDragClassName:n,handleSelector:s,nodeId:a,isSelectable:l,nodeClickDistance:c}){const d=mt(),[f,h]=O.useState(!1),g=O.useRef();return O.useEffect(()=>{g.current=s3({getStoreItems:()=>d.getState(),onNodeMouseDown:p=>{eg({id:p,store:d,nodeRef:t})},onDragStart:()=>{h(!0)},onDragStop:()=>{h(!1)}})},[]),O.useEffect(()=>{if(e)g.current?.destroy();else if(t.current)return g.current?.update({noDragClassName:n,handleSelector:s,domNode:t.current,isSelectable:l,nodeId:a,nodeClickDistance:c}),()=>{g.current?.destroy()}},[n,s,e,l,t,a]),f}const v$=t=>e=>e.selected&&(e.draggable||t&&typeof e.draggable>"u");function D1(){const t=mt();return O.useCallback(n=>{const{nodeExtent:s,snapToGrid:a,snapGrid:l,nodesDraggable:c,onError:d,updateNodePositions:f,nodeLookup:h,nodeOrigin:g}=t.getState(),p=new Map,v=v$(c),_=a?l[0]:5,x=a?l[1]:5,w=n.direction.x*_*n.factor,S=n.direction.y*x*n.factor;for(const[,C]of h){if(!v(C))continue;let N={x:C.internals.positionAbsolute.x+w,y:C.internals.positionAbsolute.y+S};a&&(N=sc(N,l));const{position:E,positionAbsolute:A}=ZE({nodeId:C.id,nextPosition:N,nodeLookup:h,nodeExtent:s,nodeOrigin:g,onError:d});C.position=E,C.internals.positionAbsolute=A,p.set(C.id,C)}f(p)},[])}const Kg=O.createContext(null),b$=Kg.Provider;Kg.Consumer;const Qg=()=>O.useContext(Kg),_$=t=>({connectOnClick:t.connectOnClick,noPanClassName:t.noPanClassName,rfId:t.rfId}),w$=(t,e,n)=>s=>{const{connectionClickStartHandle:a,connectionMode:l,connection:c}=s,{fromHandle:d,toHandle:f,isValid:h}=c,g=f?.nodeId===t&&f?.id===e&&f?.type===n;return{connectingFrom:d?.nodeId===t&&d?.id===e&&d?.type===n,connectingTo:g,clickConnecting:a?.nodeId===t&&a?.id===e&&a?.type===n,isPossibleEndHandle:l===Va.Strict?d?.type!==n:t!==d?.nodeId||e!==d?.id,connectionInProcess:!!d,clickConnectionInProcess:!!a,valid:g&&h}};function x$({type:t="source",position:e=we.Top,isValidConnection:n,isConnectable:s=!0,isConnectableStart:a=!0,isConnectableEnd:l=!0,id:c,onConnect:d,children:f,className:h,onMouseDown:g,onTouchStart:p,...v},_){const x=c||null,w=t==="target",S=mt(),C=Qg(),{connectOnClick:N,noPanClassName:E,rfId:A}=Ye(_$,yt),{connectingFrom:j,connectingTo:R,clickConnecting:D,isPossibleEndHandle:I,connectionInProcess:q,clickConnectionInProcess:Q,valid:G}=Ye(w$(C,x,t),yt);C||S.getState().onError?.("010",ir.error010());const L=F=>{const{defaultEdgeOptions:M,onConnect:z,hasDefaultEdges:H}=S.getState(),P={...M,...F};if(H){const{edges:V,setEdges:k}=S.getState();k(u1(P,V))}z?.(P),d?.(P)},X=F=>{if(!C)return;const M=o1(F.nativeEvent);if(a&&(M&&F.button===0||!M)){const z=S.getState();Zp.onPointerDown(F.nativeEvent,{handleDomNode:F.currentTarget,autoPanOnConnect:z.autoPanOnConnect,connectionMode:z.connectionMode,connectionRadius:z.connectionRadius,domNode:z.domNode,nodeLookup:z.nodeLookup,lib:z.lib,isTarget:w,handleId:x,nodeId:C,flowId:z.rfId,panBy:z.panBy,cancelConnection:z.cancelConnection,onConnectStart:z.onConnectStart,onConnectEnd:z.onConnectEnd,updateConnection:z.updateConnection,onConnect:L,isValidConnection:n||z.isValidConnection,getTransform:()=>S.getState().transform,getFromHandle:()=>S.getState().connection.fromHandle,autoPanSpeed:z.autoPanSpeed,dragThreshold:z.connectionDragThreshold})}M?g?.(F):p?.(F)},$=F=>{const{onClickConnectStart:M,onClickConnectEnd:z,connectionClickStartHandle:H,connectionMode:P,isValidConnection:V,lib:k,rfId:B,nodeLookup:W,connection:ee}=S.getState();if(!C||!H&&!a)return;if(!H){M?.(F.nativeEvent,{nodeId:C,handleId:x,handleType:t}),S.setState({connectionClickStartHandle:{nodeId:C,type:t,id:x}});return}const he=i1(F.target),ge=n||V,{connection:Z,isValid:ie}=Zp.isValid(F.nativeEvent,{handle:{nodeId:C,id:x,type:t},connectionMode:P,fromNodeId:H.nodeId,fromHandleId:H.id||null,fromType:H.type,isValidConnection:ge,flowId:B,doc:he,lib:k,nodeLookup:W});ie&&Z&&L(Z);const oe=structuredClone(ee);delete oe.inProgress,oe.toPosition=oe.toHandle?oe.toHandle.position:null,z?.(F,oe),S.setState({connectionClickStartHandle:null})};return b.jsx("div",{"data-handleid":x,"data-nodeid":C,"data-handlepos":e,"data-id":`${A}-${C}-${x}-${t}`,className:Ot(["react-flow__handle",`react-flow__handle-${e}`,"nodrag",E,h,{source:!w,target:w,connectable:s,connectablestart:a,connectableend:l,clickconnecting:D,connectingfrom:j,connectingto:R,valid:G,connectionindicator:s&&(!q||I)&&(q||Q?l:a)}]),onMouseDown:X,onTouchStart:X,onClick:N?$:void 0,ref:_,...v,children:f})}const $t=O.memo(R1(x$));function S$({data:t,isConnectable:e,sourcePosition:n=we.Bottom}){return b.jsxs(b.Fragment,{children:[t?.label,b.jsx($t,{type:"source",position:n,isConnectable:e})]})}function E$({data:t,isConnectable:e,targetPosition:n=we.Top,sourcePosition:s=we.Bottom}){return b.jsxs(b.Fragment,{children:[b.jsx($t,{type:"target",position:n,isConnectable:e}),t?.label,b.jsx($t,{type:"source",position:s,isConnectable:e})]})}function C$(){return null}function A$({data:t,isConnectable:e,targetPosition:n=we.Top}){return b.jsxs(b.Fragment,{children:[b.jsx($t,{type:"target",position:n,isConnectable:e}),t?.label]})}const Pd={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},cx={input:S$,default:E$,output:A$,group:C$};function T$(t){return t.internals.handleBounds===void 0?{width:t.width??t.initialWidth??t.style?.width,height:t.height??t.initialHeight??t.style?.height}:{width:t.width??t.style?.width,height:t.height??t.style?.height}}const N$=t=>{const{width:e,height:n,x:s,y:a}=rc(t.nodeLookup,{filter:l=>!!l.selected});return{width:rr(e)?e:null,height:rr(n)?n:null,userSelectionActive:t.userSelectionActive,transformString:`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]}) translate(${s}px,${a}px)`}};function O$({onSelectionContextMenu:t,noPanClassName:e,disableKeyboardA11y:n}){const s=mt(),{width:a,height:l,transformString:c,userSelectionActive:d}=Ye(N$,yt),f=D1(),h=O.useRef(null);if(O.useEffect(()=>{n||h.current?.focus({preventScroll:!0})},[n]),M1({nodeRef:h}),d||!a||!l)return null;const g=t?v=>{const _=s.getState().nodes.filter(x=>x.selected);t(v,_)}:void 0,p=v=>{Object.prototype.hasOwnProperty.call(Pd,v.key)&&(v.preventDefault(),f({direction:Pd[v.key],factor:v.shiftKey?4:1}))};return b.jsx("div",{className:Ot(["react-flow__nodesselection","react-flow__container",e]),style:{transform:c},children:b.jsx("div",{ref:h,className:"react-flow__nodesselection-rect",onContextMenu:g,tabIndex:n?void 0:-1,onKeyDown:n?void 0:p,style:{width:a,height:l}})})}const ux=typeof window<"u"?window:void 0,j$=t=>({nodesSelectionActive:t.nodesSelectionActive,userSelectionActive:t.userSelectionActive});function U1({children:t,onPaneClick:e,onPaneMouseEnter:n,onPaneMouseMove:s,onPaneMouseLeave:a,onPaneContextMenu:l,onPaneScroll:c,paneClickDistance:d,deleteKeyCode:f,selectionKeyCode:h,selectionOnDrag:g,selectionMode:p,onSelectionStart:v,onSelectionEnd:_,multiSelectionKeyCode:x,panActivationKeyCode:w,zoomActivationKeyCode:S,elementsSelectable:C,zoomOnScroll:N,zoomOnPinch:E,panOnScroll:A,panOnScrollSpeed:j,panOnScrollMode:R,zoomOnDoubleClick:D,panOnDrag:I,defaultViewport:q,translateExtent:Q,minZoom:G,maxZoom:L,preventScrolling:X,onSelectionContextMenu:$,noWheelClassName:F,noPanClassName:M,disableKeyboardA11y:z,onViewportChange:H,isControlledViewport:P}){const{nodesSelectionActive:V,userSelectionActive:k}=Ye(j$),B=Yl(h,{target:ux}),W=Yl(w,{target:ux}),ee=W||I,he=W||A,ge=g&&ee!==!0,Z=B||k||ge;return u$({deleteKeyCode:f,multiSelectionKeyCode:x}),b.jsx(h$,{onPaneContextMenu:l,elementsSelectable:C,zoomOnScroll:N,zoomOnPinch:E,panOnScroll:he,panOnScrollSpeed:j,panOnScrollMode:R,zoomOnDoubleClick:D,panOnDrag:!B&&ee,defaultViewport:q,translateExtent:Q,minZoom:G,maxZoom:L,zoomActivationKeyCode:S,preventScrolling:X,noWheelClassName:F,noPanClassName:M,onViewportChange:H,isControlledViewport:P,paneClickDistance:d,selectionOnDrag:ge,children:b.jsxs(y$,{onSelectionStart:v,onSelectionEnd:_,onPaneClick:e,onPaneMouseEnter:n,onPaneMouseMove:s,onPaneMouseLeave:a,onPaneContextMenu:l,onPaneScroll:c,panOnDrag:ee,isSelecting:!!Z,selectionMode:p,selectionKeyPressed:B,paneClickDistance:d,selectionOnDrag:ge,children:[t,V&&b.jsx(O$,{onSelectionContextMenu:$,noPanClassName:M,disableKeyboardA11y:z})]})})}U1.displayName="FlowRenderer";const R$=O.memo(U1),k$=t=>e=>t?Pg(e.nodeLookup,{x:0,y:0,width:e.width,height:e.height},e.transform,!0).map(n=>n.id):Array.from(e.nodeLookup.keys());function M$(t){return Ye(O.useCallback(k$(t),[t]),yt)}const D$=t=>t.updateNodeInternals;function U$(){const t=Ye(D$),[e]=O.useState(()=>typeof ResizeObserver>"u"?null:new ResizeObserver(n=>{const s=new Map;n.forEach(a=>{const l=a.target.getAttribute("data-id");s.set(l,{id:l,nodeElement:a.target,force:!0})}),t(s)}));return O.useEffect(()=>()=>{e?.disconnect()},[e]),e}function I$({node:t,nodeType:e,hasDimensions:n,resizeObserver:s}){const a=mt(),l=O.useRef(null),c=O.useRef(null),d=O.useRef(t.sourcePosition),f=O.useRef(t.targetPosition),h=O.useRef(e),g=n&&!!t.internals.handleBounds;return O.useEffect(()=>{l.current&&!t.hidden&&(!g||c.current!==l.current)&&(c.current&&s?.unobserve(c.current),s?.observe(l.current),c.current=l.current)},[g,t.hidden]),O.useEffect(()=>()=>{c.current&&(s?.unobserve(c.current),c.current=null)},[]),O.useEffect(()=>{if(l.current){const p=h.current!==e,v=d.current!==t.sourcePosition,_=f.current!==t.targetPosition;(p||v||_)&&(h.current=e,d.current=t.sourcePosition,f.current=t.targetPosition,a.getState().updateNodeInternals(new Map([[t.id,{id:t.id,nodeElement:l.current,force:!0}]])))}},[t.id,e,t.sourcePosition,t.targetPosition]),l}function $$({id:t,onClick:e,onMouseEnter:n,onMouseMove:s,onMouseLeave:a,onContextMenu:l,onDoubleClick:c,nodesDraggable:d,elementsSelectable:f,nodesConnectable:h,nodesFocusable:g,resizeObserver:p,noDragClassName:v,noPanClassName:_,disableKeyboardA11y:x,rfId:w,nodeTypes:S,nodeClickDistance:C,onError:N}){const{node:E,internals:A,isParent:j}=Ye(ie=>{const oe=ie.nodeLookup.get(t),de=ie.parentLookup.has(t);return{node:oe,internals:oe.internals,isParent:de}},yt);let R=E.type||"default",D=S?.[R]||cx[R];D===void 0&&(N?.("003",ir.error003(R)),R="default",D=S?.default||cx.default);const I=!!(E.draggable||d&&typeof E.draggable>"u"),q=!!(E.selectable||f&&typeof E.selectable>"u"),Q=!!(E.connectable||h&&typeof E.connectable>"u"),G=!!(E.focusable||g&&typeof E.focusable>"u"),L=mt(),X=r1(E),$=I$({node:E,nodeType:R,hasDimensions:X,resizeObserver:p}),F=M1({nodeRef:$,disabled:E.hidden||!I,noDragClassName:v,handleSelector:E.dragHandle,nodeId:t,isSelectable:q,nodeClickDistance:C}),M=D1();if(E.hidden)return null;const z=es(E),H=T$(E),P=q||I||e||n||s||a,V=n?ie=>n(ie,{...A.userNode}):void 0,k=s?ie=>s(ie,{...A.userNode}):void 0,B=a?ie=>a(ie,{...A.userNode}):void 0,W=l?ie=>l(ie,{...A.userNode}):void 0,ee=c?ie=>c(ie,{...A.userNode}):void 0,he=ie=>{const{selectNodesOnDrag:oe,nodeDragThreshold:de}=L.getState();q&&(!oe||!I||de>0)&&eg({id:t,store:L,nodeRef:$}),e&&e(ie,{...A.userNode})},ge=ie=>{if(!(a1(ie.nativeEvent)||x)){if(XE.includes(ie.key)&&q){const oe=ie.key==="Escape";eg({id:t,store:L,unselect:oe,nodeRef:$})}else if(I&&E.selected&&Object.prototype.hasOwnProperty.call(Pd,ie.key)){ie.preventDefault();const{ariaLabelConfig:oe}=L.getState();L.setState({ariaLiveMessage:oe["node.a11yDescription.ariaLiveMessage"]({direction:ie.key.replace("Arrow","").toLowerCase(),x:~~A.positionAbsolute.x,y:~~A.positionAbsolute.y})}),M({direction:Pd[ie.key],factor:ie.shiftKey?4:1})}}},Z=()=>{if(x||!$.current?.matches(":focus-visible"))return;const{transform:ie,width:oe,height:de,autoPanOnNodeFocus:pe,setCenter:be}=L.getState();if(!pe)return;Pg(new Map([[t,E]]),{x:0,y:0,width:oe,height:de},ie,!0).length>0||be(E.position.x+z.width/2,E.position.y+z.height/2,{zoom:ie[2]})};return b.jsx("div",{className:Ot(["react-flow__node",`react-flow__node-${R}`,{[_]:I},E.className,{selected:E.selected,selectable:q,parent:j,draggable:I,dragging:F}]),ref:$,style:{zIndex:A.z,transform:`translate(${A.positionAbsolute.x}px,${A.positionAbsolute.y}px)`,pointerEvents:P?"all":"none",visibility:X?"visible":"hidden",...E.style,...H},"data-id":t,"data-testid":`rf__node-${t}`,onMouseEnter:V,onMouseMove:k,onMouseLeave:B,onContextMenu:W,onClick:he,onDoubleClick:ee,onKeyDown:G?ge:void 0,tabIndex:G?0:void 0,onFocus:G?Z:void 0,role:E.ariaRole??(G?"group":void 0),"aria-roledescription":"node","aria-describedby":x?void 0:`${C1}-${w}`,"aria-label":E.ariaLabel,...E.domAttributes,children:b.jsx(b$,{value:t,children:b.jsx(D,{id:t,data:E.data,type:R,positionAbsoluteX:A.positionAbsolute.x,positionAbsoluteY:A.positionAbsolute.y,selected:E.selected??!1,selectable:q,draggable:I,deletable:E.deletable??!0,isConnectable:Q,sourcePosition:E.sourcePosition,targetPosition:E.targetPosition,dragging:F,dragHandle:E.dragHandle,zIndex:A.z,parentId:E.parentId,...z})})})}var L$=O.memo($$);const z$=t=>({nodesDraggable:t.nodesDraggable,nodesConnectable:t.nodesConnectable,nodesFocusable:t.nodesFocusable,elementsSelectable:t.elementsSelectable,onError:t.onError});function I1(t){const{nodesDraggable:e,nodesConnectable:n,nodesFocusable:s,elementsSelectable:a,onError:l}=Ye(z$,yt),c=M$(t.onlyRenderVisibleElements),d=U$();return b.jsx("div",{className:"react-flow__nodes",style:pf,children:c.map(f=>b.jsx(L$,{id:f,nodeTypes:t.nodeTypes,nodeExtent:t.nodeExtent,onClick:t.onNodeClick,onMouseEnter:t.onNodeMouseEnter,onMouseMove:t.onNodeMouseMove,onMouseLeave:t.onNodeMouseLeave,onContextMenu:t.onNodeContextMenu,onDoubleClick:t.onNodeDoubleClick,noDragClassName:t.noDragClassName,noPanClassName:t.noPanClassName,rfId:t.rfId,disableKeyboardA11y:t.disableKeyboardA11y,resizeObserver:d,nodesDraggable:e,nodesConnectable:n,nodesFocusable:s,elementsSelectable:a,nodeClickDistance:t.nodeClickDistance,onError:l},f))})}I1.displayName="NodeRenderer";const B$=O.memo(I1);function P$(t){return Ye(O.useCallback(n=>{if(!t)return n.edges.map(a=>a.id);const s=[];if(n.width&&n.height)for(const a of n.edges){const l=n.nodeLookup.get(a.source),c=n.nodeLookup.get(a.target);l&&c&&zI({sourceNode:l,targetNode:c,width:n.width,height:n.height,transform:n.transform})&&s.push(a.id)}return s},[t]),yt)}const q$=({color:t="none",strokeWidth:e=1})=>{const n={strokeWidth:e,...t&&{stroke:t}};return b.jsx("polyline",{className:"arrow",style:n,strokeLinecap:"round",fill:"none",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4"})},H$=({color:t="none",strokeWidth:e=1})=>{const n={strokeWidth:e,...t&&{stroke:t,fill:t}};return b.jsx("polyline",{className:"arrowclosed",style:n,strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"})},dx={[Ld.Arrow]:q$,[Ld.ArrowClosed]:H$};function V$(t){const e=mt();return O.useMemo(()=>Object.prototype.hasOwnProperty.call(dx,t)?dx[t]:(e.getState().onError?.("009",ir.error009(t)),null),[t])}const F$=({id:t,type:e,color:n,width:s=12.5,height:a=12.5,markerUnits:l="strokeWidth",strokeWidth:c,orient:d="auto-start-reverse"})=>{const f=V$(e);return f?b.jsx("marker",{className:"react-flow__arrowhead",id:t,markerWidth:`${s}`,markerHeight:`${a}`,viewBox:"-10 -10 20 20",markerUnits:l,orient:d,refX:"0",refY:"0",children:b.jsx(f,{color:n,strokeWidth:c})}):null},$1=({defaultColor:t,rfId:e})=>{const n=Ye(l=>l.edges),s=Ye(l=>l.defaultEdgeOptions),a=O.useMemo(()=>YI(n,{id:e,defaultColor:t,defaultMarkerStart:s?.markerStart,defaultMarkerEnd:s?.markerEnd}),[n,s,e,t]);return a.length?b.jsx("svg",{className:"react-flow__marker","aria-hidden":"true",children:b.jsx("defs",{children:a.map(l=>b.jsx(F$,{id:l.id,type:l.type,color:l.color,width:l.width,height:l.height,markerUnits:l.markerUnits,strokeWidth:l.strokeWidth,orient:l.orient},l.id))})}):null};$1.displayName="MarkerDefinitions";var Y$=O.memo($1);function L1({x:t,y:e,label:n,labelStyle:s,labelShowBg:a=!0,labelBgStyle:l,labelBgPadding:c=[2,4],labelBgBorderRadius:d=2,children:f,className:h,...g}){const[p,v]=O.useState({x:1,y:0,width:0,height:0}),_=Ot(["react-flow__edge-textwrapper",h]),x=O.useRef(null);return O.useEffect(()=>{if(x.current){const w=x.current.getBBox();v({x:w.x,y:w.y,width:w.width,height:w.height})}},[n]),n?b.jsxs("g",{transform:`translate(${t-p.width/2} ${e-p.height/2})`,className:_,visibility:p.width?"visible":"hidden",...g,children:[a&&b.jsx("rect",{width:p.width+2*c[0],x:-c[0],y:-c[1],height:p.height+2*c[1],className:"react-flow__edge-textbg",style:l,rx:d,ry:d}),b.jsx("text",{className:"react-flow__edge-text",y:p.height/2,dy:"0.3em",ref:x,style:s,children:n}),f]}):null}L1.displayName="EdgeText";const G$=O.memo(L1);function gf({path:t,labelX:e,labelY:n,label:s,labelStyle:a,labelShowBg:l,labelBgStyle:c,labelBgPadding:d,labelBgBorderRadius:f,interactionWidth:h=20,...g}){return b.jsxs(b.Fragment,{children:[b.jsx("path",{...g,d:t,fill:"none",className:Ot(["react-flow__edge-path",g.className])}),h?b.jsx("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:h,className:"react-flow__edge-interaction"}):null,s&&rr(e)&&rr(n)?b.jsx(G$,{x:e,y:n,label:s,labelStyle:a,labelShowBg:l,labelBgStyle:c,labelBgPadding:d,labelBgBorderRadius:f}):null]})}function fx({pos:t,x1:e,y1:n,x2:s,y2:a}){return t===we.Left||t===we.Right?[.5*(e+s),n]:[e,.5*(n+a)]}function z1({sourceX:t,sourceY:e,sourcePosition:n=we.Bottom,targetX:s,targetY:a,targetPosition:l=we.Top}){const[c,d]=fx({pos:n,x1:t,y1:e,x2:s,y2:a}),[f,h]=fx({pos:l,x1:s,y1:a,x2:t,y2:e}),[g,p,v,_]=l1({sourceX:t,sourceY:e,targetX:s,targetY:a,sourceControlX:c,sourceControlY:d,targetControlX:f,targetControlY:h});return[`M${t},${e} C${c},${d} ${f},${h} ${s},${a}`,g,p,v,_]}function B1(t){return O.memo(({id:e,sourceX:n,sourceY:s,targetX:a,targetY:l,sourcePosition:c,targetPosition:d,label:f,labelStyle:h,labelShowBg:g,labelBgStyle:p,labelBgPadding:v,labelBgBorderRadius:_,style:x,markerEnd:w,markerStart:S,interactionWidth:C})=>{const[N,E,A]=z1({sourceX:n,sourceY:s,sourcePosition:c,targetX:a,targetY:l,targetPosition:d}),j=t.isInternal?void 0:e;return b.jsx(gf,{id:j,path:N,labelX:E,labelY:A,label:f,labelStyle:h,labelShowBg:g,labelBgStyle:p,labelBgPadding:v,labelBgBorderRadius:_,style:x,markerEnd:w,markerStart:S,interactionWidth:C})})}const X$=B1({isInternal:!1}),P1=B1({isInternal:!0});X$.displayName="SimpleBezierEdge";P1.displayName="SimpleBezierEdgeInternal";function q1(t){return O.memo(({id:e,sourceX:n,sourceY:s,targetX:a,targetY:l,label:c,labelStyle:d,labelShowBg:f,labelBgStyle:h,labelBgPadding:g,labelBgBorderRadius:p,style:v,sourcePosition:_=we.Bottom,targetPosition:x=we.Top,markerEnd:w,markerStart:S,pathOptions:C,interactionWidth:N})=>{const[E,A,j]=Qp({sourceX:n,sourceY:s,sourcePosition:_,targetX:a,targetY:l,targetPosition:x,borderRadius:C?.borderRadius,offset:C?.offset,stepPosition:C?.stepPosition}),R=t.isInternal?void 0:e;return b.jsx(gf,{id:R,path:E,labelX:A,labelY:j,label:c,labelStyle:d,labelShowBg:f,labelBgStyle:h,labelBgPadding:g,labelBgBorderRadius:p,style:v,markerEnd:w,markerStart:S,interactionWidth:N})})}const H1=q1({isInternal:!1}),V1=q1({isInternal:!0});H1.displayName="SmoothStepEdge";V1.displayName="SmoothStepEdgeInternal";function F1(t){return O.memo(({id:e,...n})=>{const s=t.isInternal?void 0:e;return b.jsx(H1,{...n,id:s,pathOptions:O.useMemo(()=>({borderRadius:0,offset:n.pathOptions?.offset}),[n.pathOptions?.offset])})})}const K$=F1({isInternal:!1}),Y1=F1({isInternal:!0});K$.displayName="StepEdge";Y1.displayName="StepEdgeInternal";function G1(t){return O.memo(({id:e,sourceX:n,sourceY:s,targetX:a,targetY:l,label:c,labelStyle:d,labelShowBg:f,labelBgStyle:h,labelBgPadding:g,labelBgBorderRadius:p,style:v,markerEnd:_,markerStart:x,interactionWidth:w})=>{const[S,C,N]=d1({sourceX:n,sourceY:s,targetX:a,targetY:l}),E=t.isInternal?void 0:e;return b.jsx(gf,{id:E,path:S,labelX:C,labelY:N,label:c,labelStyle:d,labelShowBg:f,labelBgStyle:h,labelBgPadding:g,labelBgBorderRadius:p,style:v,markerEnd:_,markerStart:x,interactionWidth:w})})}const Q$=G1({isInternal:!1}),X1=G1({isInternal:!0});Q$.displayName="StraightEdge";X1.displayName="StraightEdgeInternal";function K1(t){return O.memo(({id:e,sourceX:n,sourceY:s,targetX:a,targetY:l,sourcePosition:c=we.Bottom,targetPosition:d=we.Top,label:f,labelStyle:h,labelShowBg:g,labelBgStyle:p,labelBgPadding:v,labelBgBorderRadius:_,style:x,markerEnd:w,markerStart:S,pathOptions:C,interactionWidth:N})=>{const[E,A,j]=Vg({sourceX:n,sourceY:s,sourcePosition:c,targetX:a,targetY:l,targetPosition:d,curvature:C?.curvature}),R=t.isInternal?void 0:e;return b.jsx(gf,{id:R,path:E,labelX:A,labelY:j,label:f,labelStyle:h,labelShowBg:g,labelBgStyle:p,labelBgPadding:v,labelBgBorderRadius:_,style:x,markerEnd:w,markerStart:S,interactionWidth:N})})}const W$=K1({isInternal:!1}),Q1=K1({isInternal:!0});W$.displayName="BezierEdge";Q1.displayName="BezierEdgeInternal";const hx={default:Q1,straight:X1,step:Y1,smoothstep:V1,simplebezier:P1},mx={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},J$=(t,e,n)=>n===we.Left?t-e:n===we.Right?t+e:t,Z$=(t,e,n)=>n===we.Top?t-e:n===we.Bottom?t+e:t,px="react-flow__edgeupdater";function gx({position:t,centerX:e,centerY:n,radius:s=10,onMouseDown:a,onMouseEnter:l,onMouseOut:c,type:d}){return b.jsx("circle",{onMouseDown:a,onMouseEnter:l,onMouseOut:c,className:Ot([px,`${px}-${d}`]),cx:J$(e,s,t),cy:Z$(n,s,t),r:s,stroke:"transparent",fill:"transparent"})}function eL({isReconnectable:t,reconnectRadius:e,edge:n,sourceX:s,sourceY:a,targetX:l,targetY:c,sourcePosition:d,targetPosition:f,onReconnect:h,onReconnectStart:g,onReconnectEnd:p,setReconnecting:v,setUpdateHover:_}){const x=mt(),w=(A,j)=>{if(A.button!==0)return;const{autoPanOnConnect:R,domNode:D,isValidConnection:I,connectionMode:q,connectionRadius:Q,lib:G,onConnectStart:L,onConnectEnd:X,cancelConnection:$,nodeLookup:F,rfId:M,panBy:z,updateConnection:H}=x.getState(),P=j.type==="target",V=(W,ee)=>{v(!1),p?.(W,n,j.type,ee)},k=W=>h?.(n,W),B=(W,ee)=>{v(!0),g?.(A,n,j.type),L?.(W,ee)};Zp.onPointerDown(A.nativeEvent,{autoPanOnConnect:R,connectionMode:q,connectionRadius:Q,domNode:D,handleId:j.id,nodeId:j.nodeId,nodeLookup:F,isTarget:P,edgeUpdaterType:j.type,lib:G,flowId:M,cancelConnection:$,panBy:z,isValidConnection:I,onConnect:k,onConnectStart:B,onConnectEnd:X,onReconnectEnd:V,updateConnection:H,getTransform:()=>x.getState().transform,getFromHandle:()=>x.getState().connection.fromHandle,dragThreshold:x.getState().connectionDragThreshold,handleDomNode:A.currentTarget})},S=A=>w(A,{nodeId:n.target,id:n.targetHandle??null,type:"target"}),C=A=>w(A,{nodeId:n.source,id:n.sourceHandle??null,type:"source"}),N=()=>_(!0),E=()=>_(!1);return b.jsxs(b.Fragment,{children:[(t===!0||t==="source")&&b.jsx(gx,{position:d,centerX:s,centerY:a,radius:e,onMouseDown:S,onMouseEnter:N,onMouseOut:E,type:"source"}),(t===!0||t==="target")&&b.jsx(gx,{position:f,centerX:l,centerY:c,radius:e,onMouseDown:C,onMouseEnter:N,onMouseOut:E,type:"target"})]})}function tL({id:t,edgesFocusable:e,edgesReconnectable:n,elementsSelectable:s,onClick:a,onDoubleClick:l,onContextMenu:c,onMouseEnter:d,onMouseMove:f,onMouseLeave:h,reconnectRadius:g,onReconnect:p,onReconnectStart:v,onReconnectEnd:_,rfId:x,edgeTypes:w,noPanClassName:S,onError:C,disableKeyboardA11y:N}){let E=Ye(be=>be.edgeLookup.get(t));const A=Ye(be=>be.defaultEdgeOptions);E=A?{...A,...E}:E;let j=E.type||"default",R=w?.[j]||hx[j];R===void 0&&(C?.("011",ir.error011(j)),j="default",R=w?.default||hx.default);const D=!!(E.focusable||e&&typeof E.focusable>"u"),I=typeof p<"u"&&(E.reconnectable||n&&typeof E.reconnectable>"u"),q=!!(E.selectable||s&&typeof E.selectable>"u"),Q=O.useRef(null),[G,L]=O.useState(!1),[X,$]=O.useState(!1),F=mt(),{zIndex:M,sourceX:z,sourceY:H,targetX:P,targetY:V,sourcePosition:k,targetPosition:B}=Ye(O.useCallback(be=>{const _e=be.nodeLookup.get(E.source),Ue=be.nodeLookup.get(E.target);if(!_e||!Ue)return{zIndex:E.zIndex,...mx};const ce=FI({id:t,sourceNode:_e,targetNode:Ue,sourceHandle:E.sourceHandle||null,targetHandle:E.targetHandle||null,connectionMode:be.connectionMode,onError:C});return{zIndex:LI({selected:E.selected,zIndex:E.zIndex,sourceNode:_e,targetNode:Ue,elevateOnSelect:be.elevateEdgesOnSelect}),...ce||mx}},[E.source,E.target,E.sourceHandle,E.targetHandle,E.selected,E.zIndex]),yt),W=O.useMemo(()=>E.markerStart?`url('#${Wp(E.markerStart,x)}')`:void 0,[E.markerStart,x]),ee=O.useMemo(()=>E.markerEnd?`url('#${Wp(E.markerEnd,x)}')`:void 0,[E.markerEnd,x]);if(E.hidden||z===null||H===null||P===null||V===null)return null;const he=be=>{const{addSelectedEdges:_e,unselectNodesAndEdges:Ue,multiSelectionActive:ce}=F.getState();q&&(F.setState({nodesSelectionActive:!1}),E.selected&&ce?(Ue({nodes:[],edges:[E]}),Q.current?.blur()):_e([t])),a&&a(be,E)},ge=l?be=>{l(be,{...E})}:void 0,Z=c?be=>{c(be,{...E})}:void 0,ie=d?be=>{d(be,{...E})}:void 0,oe=f?be=>{f(be,{...E})}:void 0,de=h?be=>{h(be,{...E})}:void 0,pe=be=>{if(!N&&XE.includes(be.key)&&q){const{unselectNodesAndEdges:_e,addSelectedEdges:Ue}=F.getState();be.key==="Escape"?(Q.current?.blur(),_e({edges:[E]})):Ue([t])}};return b.jsx("svg",{style:{zIndex:M},children:b.jsxs("g",{className:Ot(["react-flow__edge",`react-flow__edge-${j}`,E.className,S,{selected:E.selected,animated:E.animated,inactive:!q&&!a,updating:G,selectable:q}]),onClick:he,onDoubleClick:ge,onContextMenu:Z,onMouseEnter:ie,onMouseMove:oe,onMouseLeave:de,onKeyDown:D?pe:void 0,tabIndex:D?0:void 0,role:E.ariaRole??(D?"group":"img"),"aria-roledescription":"edge","data-id":t,"data-testid":`rf__edge-${t}`,"aria-label":E.ariaLabel===null?void 0:E.ariaLabel||`Edge from ${E.source} to ${E.target}`,"aria-describedby":D?`${A1}-${x}`:void 0,ref:Q,...E.domAttributes,children:[!X&&b.jsx(R,{id:t,source:E.source,target:E.target,type:E.type,selected:E.selected,animated:E.animated,selectable:q,deletable:E.deletable??!0,label:E.label,labelStyle:E.labelStyle,labelShowBg:E.labelShowBg,labelBgStyle:E.labelBgStyle,labelBgPadding:E.labelBgPadding,labelBgBorderRadius:E.labelBgBorderRadius,sourceX:z,sourceY:H,targetX:P,targetY:V,sourcePosition:k,targetPosition:B,data:E.data,style:E.style,sourceHandleId:E.sourceHandle,targetHandleId:E.targetHandle,markerStart:W,markerEnd:ee,pathOptions:"pathOptions"in E?E.pathOptions:void 0,interactionWidth:E.interactionWidth}),I&&b.jsx(eL,{edge:E,isReconnectable:I,reconnectRadius:g,onReconnect:p,onReconnectStart:v,onReconnectEnd:_,sourceX:z,sourceY:H,targetX:P,targetY:V,sourcePosition:k,targetPosition:B,setUpdateHover:L,setReconnecting:$})]})})}var nL=O.memo(tL);const rL=t=>({edgesFocusable:t.edgesFocusable,edgesReconnectable:t.edgesReconnectable,elementsSelectable:t.elementsSelectable,connectionMode:t.connectionMode,onError:t.onError});function W1({defaultMarkerColor:t,onlyRenderVisibleElements:e,rfId:n,edgeTypes:s,noPanClassName:a,onReconnect:l,onEdgeContextMenu:c,onEdgeMouseEnter:d,onEdgeMouseMove:f,onEdgeMouseLeave:h,onEdgeClick:g,reconnectRadius:p,onEdgeDoubleClick:v,onReconnectStart:_,onReconnectEnd:x,disableKeyboardA11y:w}){const{edgesFocusable:S,edgesReconnectable:C,elementsSelectable:N,onError:E}=Ye(rL,yt),A=P$(e);return b.jsxs("div",{className:"react-flow__edges",children:[b.jsx(Y$,{defaultColor:t,rfId:n}),A.map(j=>b.jsx(nL,{id:j,edgesFocusable:S,edgesReconnectable:C,elementsSelectable:N,noPanClassName:a,onReconnect:l,onContextMenu:c,onMouseEnter:d,onMouseMove:f,onMouseLeave:h,onClick:g,reconnectRadius:p,onDoubleClick:v,onReconnectStart:_,onReconnectEnd:x,rfId:n,onError:E,edgeTypes:s,disableKeyboardA11y:w},j))]})}W1.displayName="EdgeRenderer";const sL=O.memo(W1),iL=t=>`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]})`;function aL({children:t}){const e=Ye(iL);return b.jsx("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform:e},children:t})}function oL(t){const e=Wr(),n=O.useRef(!1);O.useEffect(()=>{!n.current&&e.viewportInitialized&&t&&(setTimeout(()=>t(e),1),n.current=!0)},[t,e.viewportInitialized])}const lL=t=>t.panZoom?.syncViewport;function cL(t){const e=Ye(lL),n=mt();return O.useEffect(()=>{t&&(e?.(t),n.setState({transform:[t.x,t.y,t.zoom]}))},[t,e]),null}function uL(t){return t.connection.inProgress?{...t.connection,to:ic(t.connection.to,t.transform)}:{...t.connection}}function dL(t){return uL}function fL(t){const e=dL();return Ye(e,yt)}const hL=t=>({nodesConnectable:t.nodesConnectable,isValid:t.connection.isValid,inProgress:t.connection.inProgress,width:t.width,height:t.height});function mL({containerStyle:t,style:e,type:n,component:s}){const{nodesConnectable:a,width:l,height:c,isValid:d,inProgress:f}=Ye(hL,yt);return!(l&&a&&f)?null:b.jsx("svg",{style:t,width:l,height:c,className:"react-flow__connectionline react-flow__container",children:b.jsx("g",{className:Ot(["react-flow__connection",WE(d)]),children:b.jsx(J1,{style:e,type:n,CustomComponent:s,isValid:d})})})}const J1=({style:t,type:e=zs.Bezier,CustomComponent:n,isValid:s})=>{const{inProgress:a,from:l,fromNode:c,fromHandle:d,fromPosition:f,to:h,toNode:g,toHandle:p,toPosition:v,pointer:_}=fL();if(!a)return;if(n)return b.jsx(n,{connectionLineType:e,connectionLineStyle:t,fromNode:c,fromHandle:d,fromX:l.x,fromY:l.y,toX:h.x,toY:h.y,fromPosition:f,toPosition:v,connectionStatus:WE(s),toNode:g,toHandle:p,pointer:_});let x="";const w={sourceX:l.x,sourceY:l.y,sourcePosition:f,targetX:h.x,targetY:h.y,targetPosition:v};switch(e){case zs.Bezier:[x]=Vg(w);break;case zs.SimpleBezier:[x]=z1(w);break;case zs.Step:[x]=Qp({...w,borderRadius:0});break;case zs.SmoothStep:[x]=Qp(w);break;default:[x]=d1(w)}return b.jsx("path",{d:x,fill:"none",className:"react-flow__connection-path",style:t})};J1.displayName="ConnectionLine";const pL={};function yx(t=pL){O.useRef(t),mt(),O.useEffect(()=>{},[t])}function gL(){mt(),O.useRef(!1),O.useEffect(()=>{},[])}function Z1({nodeTypes:t,edgeTypes:e,onInit:n,onNodeClick:s,onEdgeClick:a,onNodeDoubleClick:l,onEdgeDoubleClick:c,onNodeMouseEnter:d,onNodeMouseMove:f,onNodeMouseLeave:h,onNodeContextMenu:g,onSelectionContextMenu:p,onSelectionStart:v,onSelectionEnd:_,connectionLineType:x,connectionLineStyle:w,connectionLineComponent:S,connectionLineContainerStyle:C,selectionKeyCode:N,selectionOnDrag:E,selectionMode:A,multiSelectionKeyCode:j,panActivationKeyCode:R,zoomActivationKeyCode:D,deleteKeyCode:I,onlyRenderVisibleElements:q,elementsSelectable:Q,defaultViewport:G,translateExtent:L,minZoom:X,maxZoom:$,preventScrolling:F,defaultMarkerColor:M,zoomOnScroll:z,zoomOnPinch:H,panOnScroll:P,panOnScrollSpeed:V,panOnScrollMode:k,zoomOnDoubleClick:B,panOnDrag:W,onPaneClick:ee,onPaneMouseEnter:he,onPaneMouseMove:ge,onPaneMouseLeave:Z,onPaneScroll:ie,onPaneContextMenu:oe,paneClickDistance:de,nodeClickDistance:pe,onEdgeContextMenu:be,onEdgeMouseEnter:_e,onEdgeMouseMove:Ue,onEdgeMouseLeave:ce,reconnectRadius:ve,onReconnect:Me,onReconnectStart:Je,onReconnectEnd:at,noDragClassName:Lt,noWheelClassName:ut,noPanClassName:mn,disableKeyboardA11y:Zt,nodeExtent:dt,rfId:pn,viewport:kn,onViewportChange:nn}){return yx(t),yx(e),gL(),oL(n),cL(kn),b.jsx(R$,{onPaneClick:ee,onPaneMouseEnter:he,onPaneMouseMove:ge,onPaneMouseLeave:Z,onPaneContextMenu:oe,onPaneScroll:ie,paneClickDistance:de,deleteKeyCode:I,selectionKeyCode:N,selectionOnDrag:E,selectionMode:A,onSelectionStart:v,onSelectionEnd:_,multiSelectionKeyCode:j,panActivationKeyCode:R,zoomActivationKeyCode:D,elementsSelectable:Q,zoomOnScroll:z,zoomOnPinch:H,zoomOnDoubleClick:B,panOnScroll:P,panOnScrollSpeed:V,panOnScrollMode:k,panOnDrag:W,defaultViewport:G,translateExtent:L,minZoom:X,maxZoom:$,onSelectionContextMenu:p,preventScrolling:F,noDragClassName:Lt,noWheelClassName:ut,noPanClassName:mn,disableKeyboardA11y:Zt,onViewportChange:nn,isControlledViewport:!!kn,children:b.jsxs(aL,{children:[b.jsx(sL,{edgeTypes:e,onEdgeClick:a,onEdgeDoubleClick:c,onReconnect:Me,onReconnectStart:Je,onReconnectEnd:at,onlyRenderVisibleElements:q,onEdgeContextMenu:be,onEdgeMouseEnter:_e,onEdgeMouseMove:Ue,onEdgeMouseLeave:ce,reconnectRadius:ve,defaultMarkerColor:M,noPanClassName:mn,disableKeyboardA11y:Zt,rfId:pn}),b.jsx(mL,{style:w,type:x,component:S,containerStyle:C}),b.jsx("div",{className:"react-flow__edgelabel-renderer"}),b.jsx(B$,{nodeTypes:t,onNodeClick:s,onNodeDoubleClick:l,onNodeMouseEnter:d,onNodeMouseMove:f,onNodeMouseLeave:h,onNodeContextMenu:g,nodeClickDistance:pe,onlyRenderVisibleElements:q,noPanClassName:mn,noDragClassName:Lt,disableKeyboardA11y:Zt,nodeExtent:dt,rfId:pn}),b.jsx("div",{className:"react-flow__viewport-portal"})]})})}Z1.displayName="GraphView";const yL=O.memo(Z1),vx=({nodes:t,edges:e,defaultNodes:n,defaultEdges:s,width:a,height:l,fitView:c,fitViewOptions:d,minZoom:f=.5,maxZoom:h=2,nodeOrigin:g,nodeExtent:p}={})=>{const v=new Map,_=new Map,x=new Map,w=new Map,S=s??e??[],C=n??t??[],N=g??[0,0],E=p??Pl;m1(x,w,S);const A=Jp(C,v,_,{nodeOrigin:N,nodeExtent:E,elevateNodesOnSelect:!1});let j=[0,0,1];if(c&&a&&l){const R=rc(v,{filter:Q=>!!((Q.width||Q.initialWidth)&&(Q.height||Q.initialHeight))}),{x:D,y:I,zoom:q}=qg(R,a,l,f,h,d?.padding??.1);j=[D,I,q]}return{rfId:"1",width:a??0,height:l??0,transform:j,nodes:C,nodesInitialized:A,nodeLookup:v,parentLookup:_,edges:S,edgeLookup:w,connectionLookup:x,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:n!==void 0,hasDefaultEdges:s!==void 0,panZoom:null,minZoom:f,maxZoom:h,translateExtent:Pl,nodeExtent:E,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:Va.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:N,nodeDragThreshold:1,connectionDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!1,selectNodesOnDrag:!0,multiSelectionActive:!1,fitViewQueued:c??!1,fitViewOptions:d,fitViewResolver:null,connection:{...QE},connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanOnNodeFocus:!0,autoPanSpeed:15,connectionRadius:20,onError:kI,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react",debug:!1,ariaLabelConfig:KE}},vL=({nodes:t,edges:e,defaultNodes:n,defaultEdges:s,width:a,height:l,fitView:c,fitViewOptions:d,minZoom:f,maxZoom:h,nodeOrigin:g,nodeExtent:p})=>I3((v,_)=>{async function x(){const{nodeLookup:w,panZoom:S,fitViewOptions:C,fitViewResolver:N,width:E,height:A,minZoom:j,maxZoom:R}=_();S&&(await jI({nodes:w,width:E,height:A,panZoom:S,minZoom:j,maxZoom:R},C),N?.resolve(!0),v({fitViewResolver:null}))}return{...vx({nodes:t,edges:e,width:a,height:l,fitView:c,fitViewOptions:d,minZoom:f,maxZoom:h,nodeOrigin:g,nodeExtent:p,defaultNodes:n,defaultEdges:s}),setNodes:w=>{const{nodeLookup:S,parentLookup:C,nodeOrigin:N,elevateNodesOnSelect:E,fitViewQueued:A}=_(),j=Jp(w,S,C,{nodeOrigin:N,nodeExtent:p,elevateNodesOnSelect:E,checkEquality:!0});A&&j?(x(),v({nodes:w,nodesInitialized:j,fitViewQueued:!1,fitViewOptions:void 0})):v({nodes:w,nodesInitialized:j})},setEdges:w=>{const{connectionLookup:S,edgeLookup:C}=_();m1(S,C,w),v({edges:w})},setDefaultNodesAndEdges:(w,S)=>{if(w){const{setNodes:C}=_();C(w),v({hasDefaultNodes:!0})}if(S){const{setEdges:C}=_();C(S),v({hasDefaultEdges:!0})}},updateNodeInternals:w=>{const{triggerNodeChanges:S,nodeLookup:C,parentLookup:N,domNode:E,nodeOrigin:A,nodeExtent:j,debug:R,fitViewQueued:D}=_(),{changes:I,updatedInternals:q}=ZI(w,C,N,E,A,j);q&&(KI(C,N,{nodeOrigin:A,nodeExtent:j}),D?(x(),v({fitViewQueued:!1,fitViewOptions:void 0})):v({}),I?.length>0&&(R&&console.log("React Flow: trigger node changes",I),S?.(I)))},updateNodePositions:(w,S=!1)=>{const C=[],N=[],{nodeLookup:E,triggerNodeChanges:A}=_();for(const[j,R]of w){const D=E.get(j),I=!!(D?.expandParent&&D?.parentId&&R?.position),q={id:j,type:"position",position:I?{x:Math.max(0,R.position.x),y:Math.max(0,R.position.y)}:R.position,dragging:S};I&&D.parentId&&C.push({id:j,parentId:D.parentId,rect:{...R.internals.positionAbsolute,width:R.measured.width??0,height:R.measured.height??0}}),N.push(q)}if(C.length>0){const{parentLookup:j,nodeOrigin:R}=_(),D=Xg(C,E,j,R);N.push(...D)}A(N)},triggerNodeChanges:w=>{const{onNodesChange:S,setNodes:C,nodes:N,hasDefaultNodes:E,debug:A}=_();if(w?.length){if(E){const j=O1(w,N);C(j)}A&&console.log("React Flow: trigger node changes",w),S?.(w)}},triggerEdgeChanges:w=>{const{onEdgesChange:S,setEdges:C,edges:N,hasDefaultEdges:E,debug:A}=_();if(w?.length){if(E){const j=j1(w,N);C(j)}A&&console.log("React Flow: trigger edge changes",w),S?.(w)}},addSelectedNodes:w=>{const{multiSelectionActive:S,edgeLookup:C,nodeLookup:N,triggerNodeChanges:E,triggerEdgeChanges:A}=_();if(S){const j=w.map(R=>hi(R,!0));E(j);return}E(Ia(N,new Set([...w]),!0)),A(Ia(C))},addSelectedEdges:w=>{const{multiSelectionActive:S,edgeLookup:C,nodeLookup:N,triggerNodeChanges:E,triggerEdgeChanges:A}=_();if(S){const j=w.map(R=>hi(R,!0));A(j);return}A(Ia(C,new Set([...w]))),E(Ia(N,new Set,!0))},unselectNodesAndEdges:({nodes:w,edges:S}={})=>{const{edges:C,nodes:N,nodeLookup:E,triggerNodeChanges:A,triggerEdgeChanges:j}=_(),R=w||N,D=S||C,I=R.map(Q=>{const G=E.get(Q.id);return G&&(G.selected=!1),hi(Q.id,!1)}),q=D.map(Q=>hi(Q.id,!1));A(I),j(q)},setMinZoom:w=>{const{panZoom:S,maxZoom:C}=_();S?.setScaleExtent([w,C]),v({minZoom:w})},setMaxZoom:w=>{const{panZoom:S,minZoom:C}=_();S?.setScaleExtent([C,w]),v({maxZoom:w})},setTranslateExtent:w=>{_().panZoom?.setTranslateExtent(w),v({translateExtent:w})},resetSelectedElements:()=>{const{edges:w,nodes:S,triggerNodeChanges:C,triggerEdgeChanges:N,elementsSelectable:E}=_();if(!E)return;const A=S.reduce((R,D)=>D.selected?[...R,hi(D.id,!1)]:R,[]),j=w.reduce((R,D)=>D.selected?[...R,hi(D.id,!1)]:R,[]);C(A),N(j)},setNodeExtent:w=>{const{nodes:S,nodeLookup:C,parentLookup:N,nodeOrigin:E,elevateNodesOnSelect:A,nodeExtent:j}=_();w[0][0]===j[0][0]&&w[0][1]===j[0][1]&&w[1][0]===j[1][0]&&w[1][1]===j[1][1]||(Jp(S,C,N,{nodeOrigin:E,nodeExtent:w,elevateNodesOnSelect:A,checkEquality:!1}),v({nodeExtent:w}))},panBy:w=>{const{transform:S,width:C,height:N,panZoom:E,translateExtent:A}=_();return e3({delta:w,panZoom:E,transform:S,translateExtent:A,width:C,height:N})},setCenter:async(w,S,C)=>{const{width:N,height:E,maxZoom:A,panZoom:j}=_();if(!j)return Promise.resolve(!1);const R=typeof C?.zoom<"u"?C.zoom:A;return await j.setViewport({x:N/2-w*R,y:E/2-S*R,zoom:R},{duration:C?.duration,ease:C?.ease,interpolate:C?.interpolate}),Promise.resolve(!0)},cancelConnection:()=>{v({connection:{...QE}})},updateConnection:w=>{v({connection:w})},reset:()=>v({...vx()})}},Object.is);function bL({initialNodes:t,initialEdges:e,defaultNodes:n,defaultEdges:s,initialWidth:a,initialHeight:l,initialMinZoom:c,initialMaxZoom:d,initialFitViewOptions:f,fitView:h,nodeOrigin:g,nodeExtent:p,children:v}){const[_]=O.useState(()=>vL({nodes:t,edges:e,defaultNodes:n,defaultEdges:s,width:a,height:l,fitView:h,minZoom:c,maxZoom:d,fitViewOptions:f,nodeOrigin:g,nodeExtent:p}));return b.jsx($3,{value:_,children:b.jsx(a$,{children:v})})}function _L({children:t,nodes:e,edges:n,defaultNodes:s,defaultEdges:a,width:l,height:c,fitView:d,fitViewOptions:f,minZoom:h,maxZoom:g,nodeOrigin:p,nodeExtent:v}){return O.useContext(hf)?b.jsx(b.Fragment,{children:t}):b.jsx(bL,{initialNodes:e,initialEdges:n,defaultNodes:s,defaultEdges:a,initialWidth:l,initialHeight:c,fitView:d,initialFitViewOptions:f,initialMinZoom:h,initialMaxZoom:g,nodeOrigin:p,nodeExtent:v,children:t})}const wL={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0};function xL({nodes:t,edges:e,defaultNodes:n,defaultEdges:s,className:a,nodeTypes:l,edgeTypes:c,onNodeClick:d,onEdgeClick:f,onInit:h,onMove:g,onMoveStart:p,onMoveEnd:v,onConnect:_,onConnectStart:x,onConnectEnd:w,onClickConnectStart:S,onClickConnectEnd:C,onNodeMouseEnter:N,onNodeMouseMove:E,onNodeMouseLeave:A,onNodeContextMenu:j,onNodeDoubleClick:R,onNodeDragStart:D,onNodeDrag:I,onNodeDragStop:q,onNodesDelete:Q,onEdgesDelete:G,onDelete:L,onSelectionChange:X,onSelectionDragStart:$,onSelectionDrag:F,onSelectionDragStop:M,onSelectionContextMenu:z,onSelectionStart:H,onSelectionEnd:P,onBeforeDelete:V,connectionMode:k,connectionLineType:B=zs.Bezier,connectionLineStyle:W,connectionLineComponent:ee,connectionLineContainerStyle:he,deleteKeyCode:ge="Backspace",selectionKeyCode:Z="Shift",selectionOnDrag:ie=!1,selectionMode:oe=ql.Full,panActivationKeyCode:de="Space",multiSelectionKeyCode:pe=Vl()?"Meta":"Control",zoomActivationKeyCode:be=Vl()?"Meta":"Control",snapToGrid:_e,snapGrid:Ue,onlyRenderVisibleElements:ce=!1,selectNodesOnDrag:ve,nodesDraggable:Me,autoPanOnNodeFocus:Je,nodesConnectable:at,nodesFocusable:Lt,nodeOrigin:ut=T1,edgesFocusable:mn,edgesReconnectable:Zt,elementsSelectable:dt=!0,defaultViewport:pn=Q3,minZoom:kn=.5,maxZoom:nn=2,translateExtent:gn=Pl,preventScrolling:_r=!0,nodeExtent:ts,defaultMarkerColor:to="#b1b1b7",zoomOnScroll:no=!0,zoomOnPinch:Vn=!0,panOnScroll:zt=!1,panOnScrollSpeed:me=.5,panOnScrollMode:Ee=Ci.Free,zoomOnDoubleClick:ke=!0,panOnDrag:Xe=!0,onPaneClick:ot,onPaneMouseEnter:ft,onPaneMouseMove:ns,onPaneMouseLeave:Mi,onPaneScroll:wr,onPaneContextMenu:Di,paneClickDistance:Vs=1,nodeClickDistance:Tf=0,children:cc,onReconnect:ro,onReconnectStart:Fs,onReconnectEnd:Nf,onEdgeContextMenu:uc,onEdgeDoubleClick:dc,onEdgeMouseEnter:fc,onEdgeMouseMove:so,onEdgeMouseLeave:io,reconnectRadius:hc=10,onNodesChange:mc,onEdgesChange:or,noDragClassName:jt="nodrag",noWheelClassName:Xt="nowheel",noPanClassName:xr="nopan",fitView:Ui,fitViewOptions:pc,connectOnClick:Of,attributionPosition:gc,proOptions:Ys,defaultEdgeOptions:ao,elevateNodesOnSelect:rs,elevateEdgesOnSelect:ss,disableKeyboardA11y:is=!1,autoPanOnConnect:as,autoPanOnNodeDrag:xt,autoPanSpeed:yc,connectionRadius:vc,isValidConnection:Sr,onError:os,style:jf,id:oo,nodeDragThreshold:bc,connectionDragThreshold:Rf,viewport:Ii,onViewportChange:$i,width:Fn,height:rn,colorMode:_c="light",debug:kf,onScroll:Li,ariaLabelConfig:wc,...zi},Mf){const Kt=oo||"1",lo=e$(_c),xc=O.useCallback(Bi=>{Bi.currentTarget.scrollTo({top:0,left:0,behavior:"instant"}),Li?.(Bi)},[Li]);return b.jsx("div",{"data-testid":"rf__wrapper",...zi,onScroll:xc,style:{...jf,...wL},ref:Mf,className:Ot(["react-flow",a,lo]),id:oo,role:"application",children:b.jsxs(_L,{nodes:t,edges:e,width:Fn,height:rn,fitView:Ui,fitViewOptions:pc,minZoom:kn,maxZoom:nn,nodeOrigin:ut,nodeExtent:ts,children:[b.jsx(yL,{onInit:h,onNodeClick:d,onEdgeClick:f,onNodeMouseEnter:N,onNodeMouseMove:E,onNodeMouseLeave:A,onNodeContextMenu:j,onNodeDoubleClick:R,nodeTypes:l,edgeTypes:c,connectionLineType:B,connectionLineStyle:W,connectionLineComponent:ee,connectionLineContainerStyle:he,selectionKeyCode:Z,selectionOnDrag:ie,selectionMode:oe,deleteKeyCode:ge,multiSelectionKeyCode:pe,panActivationKeyCode:de,zoomActivationKeyCode:be,onlyRenderVisibleElements:ce,defaultViewport:pn,translateExtent:gn,minZoom:kn,maxZoom:nn,preventScrolling:_r,zoomOnScroll:no,zoomOnPinch:Vn,zoomOnDoubleClick:ke,panOnScroll:zt,panOnScrollSpeed:me,panOnScrollMode:Ee,panOnDrag:Xe,onPaneClick:ot,onPaneMouseEnter:ft,onPaneMouseMove:ns,onPaneMouseLeave:Mi,onPaneScroll:wr,onPaneContextMenu:Di,paneClickDistance:Vs,nodeClickDistance:Tf,onSelectionContextMenu:z,onSelectionStart:H,onSelectionEnd:P,onReconnect:ro,onReconnectStart:Fs,onReconnectEnd:Nf,onEdgeContextMenu:uc,onEdgeDoubleClick:dc,onEdgeMouseEnter:fc,onEdgeMouseMove:so,onEdgeMouseLeave:io,reconnectRadius:hc,defaultMarkerColor:to,noDragClassName:jt,noWheelClassName:Xt,noPanClassName:xr,rfId:Kt,disableKeyboardA11y:is,nodeExtent:ts,viewport:Ii,onViewportChange:$i}),b.jsx(Z3,{nodes:t,edges:e,defaultNodes:n,defaultEdges:s,onConnect:_,onConnectStart:x,onConnectEnd:w,onClickConnectStart:S,onClickConnectEnd:C,nodesDraggable:Me,autoPanOnNodeFocus:Je,nodesConnectable:at,nodesFocusable:Lt,edgesFocusable:mn,edgesReconnectable:Zt,elementsSelectable:dt,elevateNodesOnSelect:rs,elevateEdgesOnSelect:ss,minZoom:kn,maxZoom:nn,nodeExtent:ts,onNodesChange:mc,onEdgesChange:or,snapToGrid:_e,snapGrid:Ue,connectionMode:k,translateExtent:gn,connectOnClick:Of,defaultEdgeOptions:ao,fitView:Ui,fitViewOptions:pc,onNodesDelete:Q,onEdgesDelete:G,onDelete:L,onNodeDragStart:D,onNodeDrag:I,onNodeDragStop:q,onSelectionDrag:F,onSelectionDragStart:$,onSelectionDragStop:M,onMove:g,onMoveStart:p,onMoveEnd:v,noPanClassName:xr,nodeOrigin:ut,rfId:Kt,autoPanOnConnect:as,autoPanOnNodeDrag:xt,autoPanSpeed:yc,onError:os,connectionRadius:vc,isValidConnection:Sr,selectNodesOnDrag:ve,nodeDragThreshold:bc,connectionDragThreshold:Rf,onBeforeDelete:V,debug:kf,ariaLabelConfig:wc}),b.jsx(K3,{onSelectionChange:X}),cc,b.jsx(V3,{proOptions:Ys,position:gc}),b.jsx(H3,{rfId:Kt,disableKeyboardA11y:is})]})})}var SL=R1(xL);const EL=ir.error014();function Wg({id:t,handleType:e,handleId:n,onConnect:s,onDisconnect:a}={}){const l=Qg(),c=t??l;if(!c)throw new Error(EL);const d=O.useRef(null),f=Ye(h=>h.connectionLookup.get(`${c}${e?n?`-${e}-${n}`:`-${e}`:""}`),CI);return O.useEffect(()=>{if(d.current&&d.current!==f){const h=f??new Map;jw(d.current,h,a),jw(h,d.current,s)}d.current=f??new Map},[f,s,a]),O.useMemo(()=>Array.from(f?.values()??[]),[f])}function eC(t){return Ye(O.useCallback(n=>{const s=[],a=Array.isArray(t),l=a?t:[t];for(const c of l){const d=n.nodeLookup.get(c);d&&s.push({id:d.id,type:d.type,data:d.data})}return a?s:s[0]??null},[t]),t3)}function CL({dimensions:t,lineWidth:e,variant:n,className:s}){return b.jsx("path",{strokeWidth:e,d:`M${t[0]/2} 0 V${t[1]} M0 ${t[1]/2} H${t[0]}`,className:Ot(["react-flow__background-pattern",n,s])})}function AL({radius:t,className:e}){return b.jsx("circle",{cx:t,cy:t,r:t,className:Ot(["react-flow__background-pattern","dots",e])})}var Bs;(function(t){t.Lines="lines",t.Dots="dots",t.Cross="cross"})(Bs||(Bs={}));const TL={[Bs.Dots]:1,[Bs.Lines]:1,[Bs.Cross]:6},NL=t=>({transform:t.transform,patternId:`pattern-${t.rfId}`});function tC({id:t,variant:e=Bs.Dots,gap:n=20,size:s,lineWidth:a=1,offset:l=0,color:c,bgColor:d,style:f,className:h,patternClassName:g}){const p=O.useRef(null),{transform:v,patternId:_}=Ye(NL,yt),x=s||TL[e],w=e===Bs.Dots,S=e===Bs.Cross,C=Array.isArray(n)?n:[n,n],N=[C[0]*v[2]||1,C[1]*v[2]||1],E=x*v[2],A=Array.isArray(l)?l:[l,l],j=S?[E,E]:N,R=[A[0]*v[2]||1+j[0]/2,A[1]*v[2]||1+j[1]/2],D=`${_}${t||""}`;return b.jsxs("svg",{className:Ot(["react-flow__background",h]),style:{...f,...pf,"--xy-background-color-props":d,"--xy-background-pattern-color-props":c},ref:p,"data-testid":"rf__background",children:[b.jsx("pattern",{id:D,x:v[0]%N[0],y:v[1]%N[1],width:N[0],height:N[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${R[0]},-${R[1]})`,children:w?b.jsx(AL,{radius:E/2,className:g}):b.jsx(CL,{dimensions:j,lineWidth:a,variant:e,className:g})}),b.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${D})`})]})}tC.displayName="Background";const OL=O.memo(tC);function jL(){return b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:b.jsx("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function RL(){return b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:b.jsx("path",{d:"M0 0h32v4.2H0z"})})}function kL(){return b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:b.jsx("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function ML(){return b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:b.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function DL(){return b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:b.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function Zu({children:t,className:e,...n}){return b.jsx("button",{type:"button",className:Ot(["react-flow__controls-button",e]),...n,children:t})}const UL=t=>({isInteractive:t.nodesDraggable||t.nodesConnectable||t.elementsSelectable,minZoomReached:t.transform[2]<=t.minZoom,maxZoomReached:t.transform[2]>=t.maxZoom,ariaLabelConfig:t.ariaLabelConfig});function nC({style:t,showZoom:e=!0,showFitView:n=!0,showInteractive:s=!0,fitViewOptions:a,onZoomIn:l,onZoomOut:c,onFitView:d,onInteractiveChange:f,className:h,children:g,position:p="bottom-left",orientation:v="vertical","aria-label":_}){const x=mt(),{isInteractive:w,minZoomReached:S,maxZoomReached:C,ariaLabelConfig:N}=Ye(UL,yt),{zoomIn:E,zoomOut:A,fitView:j}=Wr(),R=()=>{E(),l?.()},D=()=>{A(),c?.()},I=()=>{j(a),d?.()},q=()=>{x.setState({nodesDraggable:!w,nodesConnectable:!w,elementsSelectable:!w}),f?.(!w)},Q=v==="horizontal"?"horizontal":"vertical";return b.jsxs(mf,{className:Ot(["react-flow__controls",Q,h]),position:p,style:t,"data-testid":"rf__controls","aria-label":_??N["controls.ariaLabel"],children:[e&&b.jsxs(b.Fragment,{children:[b.jsx(Zu,{onClick:R,className:"react-flow__controls-zoomin",title:N["controls.zoomIn.ariaLabel"],"aria-label":N["controls.zoomIn.ariaLabel"],disabled:C,children:b.jsx(jL,{})}),b.jsx(Zu,{onClick:D,className:"react-flow__controls-zoomout",title:N["controls.zoomOut.ariaLabel"],"aria-label":N["controls.zoomOut.ariaLabel"],disabled:S,children:b.jsx(RL,{})})]}),n&&b.jsx(Zu,{className:"react-flow__controls-fitview",onClick:I,title:N["controls.fitView.ariaLabel"],"aria-label":N["controls.fitView.ariaLabel"],children:b.jsx(kL,{})}),s&&b.jsx(Zu,{className:"react-flow__controls-interactive",onClick:q,title:N["controls.interactive.ariaLabel"],"aria-label":N["controls.interactive.ariaLabel"],children:w?b.jsx(DL,{}):b.jsx(ML,{})}),g]})}nC.displayName="Controls";const IL=O.memo(nC);function $L({id:t,x:e,y:n,width:s,height:a,style:l,color:c,strokeColor:d,strokeWidth:f,className:h,borderRadius:g,shapeRendering:p,selected:v,onClick:_}){const{background:x,backgroundColor:w}=l||{},S=c||x||w;return b.jsx("rect",{className:Ot(["react-flow__minimap-node",{selected:v},h]),x:e,y:n,rx:g,ry:g,width:s,height:a,style:{fill:S,stroke:d,strokeWidth:f},shapeRendering:p,onClick:_?C=>_(C,t):void 0})}const LL=O.memo($L),zL=t=>t.nodes.map(e=>e.id),pp=t=>t instanceof Function?t:()=>t;function BL({nodeStrokeColor:t,nodeColor:e,nodeClassName:n="",nodeBorderRadius:s=5,nodeStrokeWidth:a,nodeComponent:l=LL,onClick:c}){const d=Ye(zL,yt),f=pp(e),h=pp(t),g=pp(n),p=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return b.jsx(b.Fragment,{children:d.map(v=>b.jsx(qL,{id:v,nodeColorFunc:f,nodeStrokeColorFunc:h,nodeClassNameFunc:g,nodeBorderRadius:s,nodeStrokeWidth:a,NodeComponent:l,onClick:c,shapeRendering:p},v))})}function PL({id:t,nodeColorFunc:e,nodeStrokeColorFunc:n,nodeClassNameFunc:s,nodeBorderRadius:a,nodeStrokeWidth:l,shapeRendering:c,NodeComponent:d,onClick:f}){const{node:h,x:g,y:p,width:v,height:_}=Ye(x=>{const{internals:w}=x.nodeLookup.get(t),S=w.userNode,{x:C,y:N}=w.positionAbsolute,{width:E,height:A}=es(S);return{node:S,x:C,y:N,width:E,height:A}},yt);return!h||h.hidden||!r1(h)?null:b.jsx(d,{x:g,y:p,width:v,height:_,style:h.style,selected:!!h.selected,className:s(h),color:e(h),borderRadius:a,strokeColor:n(h),strokeWidth:l,shapeRendering:c,onClick:f,id:h.id})}const qL=O.memo(PL);var HL=O.memo(BL);const VL=200,FL=150,YL=t=>!t.hidden,GL=t=>{const e={x:-t.transform[0]/t.transform[2],y:-t.transform[1]/t.transform[2],width:t.width/t.transform[2],height:t.height/t.transform[2]};return{viewBB:e,boundingRect:t.nodeLookup.size>0?n1(rc(t.nodeLookup,{filter:YL}),e):e,rfId:t.rfId,panZoom:t.panZoom,translateExtent:t.translateExtent,flowWidth:t.width,flowHeight:t.height,ariaLabelConfig:t.ariaLabelConfig}},XL="react-flow__minimap-desc";function rC({style:t,className:e,nodeStrokeColor:n,nodeColor:s,nodeClassName:a="",nodeBorderRadius:l=5,nodeStrokeWidth:c,nodeComponent:d,bgColor:f,maskColor:h,maskStrokeColor:g,maskStrokeWidth:p,position:v="bottom-right",onClick:_,onNodeClick:x,pannable:w=!1,zoomable:S=!1,ariaLabel:C,inversePan:N,zoomStep:E=1,offsetScale:A=5}){const j=mt(),R=O.useRef(null),{boundingRect:D,viewBB:I,rfId:q,panZoom:Q,translateExtent:G,flowWidth:L,flowHeight:X,ariaLabelConfig:$}=Ye(GL,yt),F=t?.width??VL,M=t?.height??FL,z=D.width/F,H=D.height/M,P=Math.max(z,H),V=P*F,k=P*M,B=A*P,W=D.x-(V-D.width)/2-B,ee=D.y-(k-D.height)/2-B,he=V+B*2,ge=k+B*2,Z=`${XL}-${q}`,ie=O.useRef(0),oe=O.useRef();ie.current=P,O.useEffect(()=>{if(R.current&&Q)return oe.current=u3({domNode:R.current,panZoom:Q,getTransform:()=>j.getState().transform,getViewScale:()=>ie.current}),()=>{oe.current?.destroy()}},[Q]),O.useEffect(()=>{oe.current?.update({translateExtent:G,width:L,height:X,inversePan:N,pannable:w,zoomStep:E,zoomable:S})},[w,S,N,E,G,L,X]);const de=_?_e=>{const[Ue,ce]=oe.current?.pointer(_e)||[0,0];_(_e,{x:Ue,y:ce})}:void 0,pe=x?O.useCallback((_e,Ue)=>{const ce=j.getState().nodeLookup.get(Ue).internals.userNode;x(_e,ce)},[]):void 0,be=C??$["minimap.ariaLabel"];return b.jsx(mf,{position:v,style:{...t,"--xy-minimap-background-color-props":typeof f=="string"?f:void 0,"--xy-minimap-mask-background-color-props":typeof h=="string"?h:void 0,"--xy-minimap-mask-stroke-color-props":typeof g=="string"?g:void 0,"--xy-minimap-mask-stroke-width-props":typeof p=="number"?p*P:void 0,"--xy-minimap-node-background-color-props":typeof s=="string"?s:void 0,"--xy-minimap-node-stroke-color-props":typeof n=="string"?n:void 0,"--xy-minimap-node-stroke-width-props":typeof c=="number"?c:void 0},className:Ot(["react-flow__minimap",e]),"data-testid":"rf__minimap",children:b.jsxs("svg",{width:F,height:M,viewBox:`${W} ${ee} ${he} ${ge}`,className:"react-flow__minimap-svg",role:"img","aria-labelledby":Z,ref:R,onClick:de,children:[be&&b.jsx("title",{id:Z,children:be}),b.jsx(HL,{onClick:pe,nodeColor:s,nodeStrokeColor:n,nodeBorderRadius:l,nodeClassName:a,nodeStrokeWidth:c,nodeComponent:d}),b.jsx("path",{className:"react-flow__minimap-mask",d:`M${W-B},${ee-B}h${he+B*2}v${ge+B*2}h${-he-B*2}z
        M${I.x},${I.y}h${I.width}v${I.height}h${-I.width}z`,fillRule:"evenodd",pointerEvents:"none"})]})})}rC.displayName="MiniMap";O.memo(rC);const KL=t=>e=>t?`${Math.max(1/e.transform[2],1)}`:void 0,QL={[Xa.Line]:"right",[Xa.Handle]:"bottom-right"};function WL({nodeId:t,position:e,variant:n=Xa.Handle,className:s,style:a=void 0,children:l,color:c,minWidth:d=10,minHeight:f=10,maxWidth:h=Number.MAX_VALUE,maxHeight:g=Number.MAX_VALUE,keepAspectRatio:p=!1,resizeDirection:v,autoScale:_=!0,shouldResize:x,onResizeStart:w,onResize:S,onResizeEnd:C}){const N=Qg(),E=typeof t=="string"?t:N,A=mt(),j=O.useRef(null),R=n===Xa.Handle,D=Ye(O.useCallback(KL(R&&_),[R,_]),yt),I=O.useRef(null),q=e??QL[n];O.useEffect(()=>{if(!(!j.current||!E))return I.current||(I.current=E3({domNode:j.current,nodeId:E,getStoreItems:()=>{const{nodeLookup:G,transform:L,snapGrid:X,snapToGrid:$,nodeOrigin:F,domNode:M}=A.getState();return{nodeLookup:G,transform:L,snapGrid:X,snapToGrid:$,nodeOrigin:F,paneDomNode:M}},onChange:(G,L)=>{const{triggerNodeChanges:X,nodeLookup:$,parentLookup:F,nodeOrigin:M}=A.getState(),z=[],H={x:G.x,y:G.y},P=$.get(E);if(P&&P.expandParent&&P.parentId){const V=P.origin??M,k=G.width??P.measured.width??0,B=G.height??P.measured.height??0,W={id:P.id,parentId:P.parentId,rect:{width:k,height:B,...s1({x:G.x??P.position.x,y:G.y??P.position.y},{width:k,height:B},P.parentId,$,V)}},ee=Xg([W],$,F,M);z.push(...ee),H.x=G.x?Math.max(V[0]*k,G.x):void 0,H.y=G.y?Math.max(V[1]*B,G.y):void 0}if(H.x!==void 0&&H.y!==void 0){const V={id:E,type:"position",position:{...H}};z.push(V)}if(G.width!==void 0&&G.height!==void 0){const k={id:E,type:"dimensions",resizing:!0,setAttributes:v?v==="horizontal"?"width":"height":!0,dimensions:{width:G.width,height:G.height}};z.push(k)}for(const V of L){const k={...V,type:"position"};z.push(k)}X(z)},onEnd:({width:G,height:L})=>{const X={id:E,type:"dimensions",resizing:!1,dimensions:{width:G,height:L}};A.getState().triggerNodeChanges([X])}})),I.current.update({controlPosition:q,boundaries:{minWidth:d,minHeight:f,maxWidth:h,maxHeight:g},keepAspectRatio:p,resizeDirection:v,onResizeStart:w,onResize:S,onResizeEnd:C,shouldResize:x}),()=>{I.current?.destroy()}},[q,d,f,h,g,p,w,S,C,x]);const Q=q.split("-");return b.jsx("div",{className:Ot(["react-flow__resize-control","nodrag",...Q,n,s]),ref:j,style:{...a,scale:D,...c&&{[R?"backgroundColor":"borderColor"]:c}},children:l})}O.memo(WL);const sC=t=>b.jsx($t,{...t,type:"target",position:we.Left,id:"exec-in",acceptHandle:"exec-out",style:{...t.style,width:8,height:8,borderRadius:"2px",backgroundColor:"#ff0072"}}),iC=t=>b.jsx($t,{...t,type:"source",position:we.Right,id:"exec-out",acceptHandle:"exec-in",acceptConnection:({connection:e})=>e.targetHandle==="exec-in",style:{width:8,height:8,borderRadius:"2px",backgroundColor:"#ff0072"}}),JL=({data:t})=>{const{updateNodeData:e}=Wr(),{shot:n={}}=t,{description:s="",prompt:a="",embodys:l=[]}=n;O.useEffect(()=>{},[]);const c=d=>[];return b.jsxs("div",{className:"common-node-area",children:[b.jsx("h4",{className:"shot-node-input-title common-node-title",children:""}),b.jsx("div",{className:"shot-node-input-handle",children:b.jsx(iC,{id:"exec-out"})}),b.jsxs("div",{className:"shot-node-input-handle",children:[b.jsx($t,{type:"source",position:we.Right,id:"description"}),b.jsx("span",{className:"handle-label",children:""})]}),b.jsxs("div",{className:"shot-node-input-handle",children:[b.jsx($t,{type:"source",position:we.Right,id:"prompt"}),b.jsx("span",{className:"handle-label",children:""})]}),l.map((d,f)=>{const h=c();return b.jsxs("div",{className:"shot-node-input-handle",children:[b.jsx($t,{type:"source",position:we.Right,id:`embody-${d}`}),b.jsx("span",{className:"handle-label",children:h.name})]},`embody-${d}`)})]})},ZL=t=>(Wg({handleType:t.type}),b.jsx($t,{...t}));function ez({data:t}){return b.jsxs("div",{className:"common-node-area",children:[b.jsx("h4",{className:"common-node-title console-node-title",children:""}),b.jsxs("div",{className:"common-exec-handle-area",children:[b.jsx(sC,{id:"exec-in"}),b.jsx(iC,{id:"exec-out"})]}),b.jsxs("div",{className:"shot-node-input-handle",children:[b.jsx(ZL,{type:"target",position:we.Left,id:"input"}),b.jsx("span",{className:"handle-label",children:""})]})]})}const tz=({data:t})=>{const{output:e={}}=t;return b.jsxs("div",{className:"common-node-area",children:[b.jsx("h4",{className:"shot-node-output-title common-node-title",children:""}),b.jsx("div",{className:"shot-node-output-handle",children:b.jsx(sC,{id:"exec-in"})}),b.jsxs("div",{className:"shot-node-output-handle",children:[b.jsx($t,{type:"target",position:we.Left,id:"image"}),b.jsx("span",{className:"handle-label",children:""})]}),b.jsxs("div",{className:"shot-node-output-handle",children:[b.jsx($t,{type:"target",position:we.Left,id:"video"}),b.jsx("span",{className:"handle-label",children:""})]}),b.jsxs("div",{className:"shot-node-output-handle",children:[b.jsx($t,{type:"target",position:we.Left,id:"audio"}),b.jsx("span",{className:"handle-label",children:""})]})]})};function nz({id:t,data:e,selected:n}){const{updateNodeData:s}=Wr(),[a,l]=O.useState(null),[c,d]=O.useState(!1),[f,h]=O.useState(!1),[g,p]=O.useState([]),[v,_]=O.useState([]),[x,w]=O.useState({}),[S,C]=O.useState(""),[N,E]=O.useState("16:9"),[A,j]=O.useState(1),[R,D]=O.useState("fal-ai/nano-banana/edit"),[I,q]=O.useState(0),[Q,G]=O.useState(0),L=Wr(),X=()=>{switch(N){case"16:9":return{paddingBottom:"56.25%",width:"100%",position:"relative",height:0,overflow:"hidden"};case"9:16":return{paddingBottom:"177.78%",width:"100%",position:"relative",height:0,overflow:"hidden"};case"4:3":return{paddingBottom:"75%",width:"100%",position:"relative",height:0,overflow:"hidden"};default:return{paddingBottom:"56.25%",width:"100%",position:"relative",height:0,overflow:"hidden"}}},$=()=>({position:"absolute",top:0,left:0,width:"100%",height:"100%",objectFit:"contain"}),M=Wg({handleType:"target",handleId:"ref_images"}).map(V=>V.source),z=eC(M),H=()=>z?(Array.isArray(z)?z:[z]).flatMap(B=>B&&B.data&&Array.isArray(B.data.outputImages)?B.data.outputImages:[]):[];O.useEffect(()=>{_(H())},[z]),O.useEffect(()=>{q(g.length),g.length>0&&l(g[Q].url)},[g,Q]),O.useEffect(()=>{C(e.prompt),E(e.aspect_ratio),j(e.num_images),D(e.model),p(e.images||[])},[]),O.useEffect(()=>{s(t,{images:g,aspect_ratio:N,num_images:A,model:R,prompt:S,outputImages:g})},[g,N,A,R,S]);const P=async()=>{let V={};console.log("referenceImages:",v),R==="fal-ai/nano-banana/edit"&&(V={prompt:S,num_images:Number(A),aspect_ratio:N,output_format:"png",image_urls:v.map(k=>k!=null?k.url:"")}),R==="fal-ai/nano-banana-pro/edit"&&(V={prompt:e.prompt}),R==="fal-ai/bytedance/seedream/v4/edit"&&(V={prompt:e.prompt}),console.log(V);try{jd.fal.config({credentials:"d0f5c4fd-29b2-4024-bc64-a4719276c027:5b06c17b429cc06d2f5e044e95ca5164"});const k=await jd.fal.subscribe(R,{input:V,logs:!0,onQueueUpdate:B=>{B.status==="IN_PROGRESS"&&d(!0),B.status==="SUCCEEDED"&&d(!1)},onResult:B=>{console.log(B)},onError:B=>{console.error("Error:",B),d(!1)}});l(null),console.log(k.data),p(k.data.images),L&&L.setNodes(B=>B.map(W=>W.id===t?{...W,data:{...W.data,images:k.data.images}}:W)),G(0),d(!1)}catch(k){console.error("Error:",k),d(!1)}};return b.jsxs("div",{className:"txt-image-node-area",children:[b.jsxs("div",{className:"txt2img-handles-container",children:[b.jsx($t,{type:"target",position:we.Left,id:"ref_images"}),b.jsx($t,{type:"source",position:we.Right,id:"out_image"})]}),b.jsxs("div",{className:"txt2img-preview-container",children:[b.jsxs("div",{className:"txt2img-preview-header",children:[b.jsxs("div",{className:"txt2img-preview-title",children:["Image-",Q]}),b.jsx("div",{className:"txt2img-preview-controls",children:b.jsx("span",{className:"",children:R})})]}),b.jsxs("div",{className:"txt2img-preview-image",children:[b.jsx("div",{className:"txt2img-placeholder-image",style:X(),children:a?b.jsxs(b.Fragment,{children:[b.jsx("img",{src:a,alt:"Generated",style:$()}),b.jsx("button",{className:"embody-view-large-btn",onClick:()=>{console.log("currentImageUrl",a),Yt.emit("showLargeImageModal",a)},style:{position:"absolute",top:"8px",right:"8px",zIndex:10},children:""})]}):b.jsx("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",textAlign:"center",padding:"20px"},className:"txt2img-placeholder-text",children:""})}),g.length>1&&b.jsxs("div",{className:"txt2img-pagination",children:[b.jsx("button",{className:"txt2img-pagination-btn",onClick:()=>G(V=>Math.max(V-1,0)),children:""}),b.jsxs("span",{className:"txt2img-pagination-text",children:[Q+1," / ",I]}),b.jsx("button",{className:"txt2img-pagination-btn",onClick:()=>G(V=>Math.min(V+1,I-1)),children:""})]}),c&&b.jsxs("div",{className:"txt2img-loading-overlay",children:[b.jsx("div",{className:"txt2img-loading-spinner"}),b.jsx("span",{className:"txt2img-loading-text",children:"..."})]})]})]}),n&&b.jsxs(b.Fragment,{children:[b.jsx("div",{className:"txt2img-prompt-container",children:b.jsx("textarea",{className:"txt2img-prompt-textarea",value:S,onChange:V=>{const k=V.target.value;C(k)},placeholder:"..."})}),b.jsxs("div",{className:"txt2img-reference-container",children:[b.jsxs("div",{className:"txt2img-reference-title",children:[" (",v.length,"/10)"]}),b.jsx("div",{className:"txt2img-reference-grid",children:v&&v.map((V,k)=>b.jsx("div",{className:"txt2img-reference-item",children:b.jsx("img",{src:V.url||"",alt:`Reference ${k+1}`})},k))})]}),b.jsxs("div",{className:"txt2img-bottom-controls",children:[b.jsxs("div",{className:"txt2img-controls-left",children:[b.jsx("div",{className:"txt2img-control-group",children:b.jsxs("select",{value:R,onChange:V=>{const k=V.target.value;D(k)},className:"txt2img-control-select",children:[b.jsx("option",{value:"fal-ai/nano-banana/edit",children:"Nano Banana"}),b.jsx("option",{value:"fal-ai/nano-banana-pro/edit",children:"Nano Banana Pro"}),b.jsx("option",{value:"fal-ai/bytedance/seedream/v4/edit",children:"v4"})]})}),b.jsx("div",{className:"txt2img-control-group",children:b.jsxs("select",{value:N,onChange:V=>{const k=V.target.value;E(k)},className:"txt2img-control-select",children:[b.jsx("option",{value:"16:9",children:"16:9 "}),b.jsx("option",{value:"9:16",children:"9:16 "}),b.jsx("option",{value:"4:3",children:"4:3 "})]})}),b.jsx("div",{className:"txt2img-control-group",children:b.jsxs("select",{value:A,onChange:V=>{const k=V.target.value;j(k)},className:"txt2img-control-select",children:[b.jsx("option",{value:"1",children:"1"}),b.jsx("option",{value:"2",children:"2"}),b.jsx("option",{value:"3",children:"3"}),b.jsx("option",{value:"4",children:"4"})]})})]}),b.jsxs("div",{className:"txt2img-controls-right",children:[b.jsx("button",{className:"txt2img-control-button",children:""}),b.jsx("button",{disabled:c,onClick:P,className:"txt2img-generate-button",children:""})]})]})]})]})}function rz({id:t,data:e,selected:n}){const{updateNodeData:s}=Wr(),[a,l]=O.useState(null),[c,d]=O.useState(!1),[f,h]=O.useState({}),[g,p]=O.useState(""),[v,_]=O.useState(""),[x,w]=O.useState([]),[S,C]=O.useState([0]),[N,E]=O.useState([]),[A,j]=O.useState(""),[R,D]=O.useState(""),[I,q]=O.useState(1),Q={character:"",scene:"",item:""},L={...{characterName:"",characterDescription:"",imageUrl:"/default_avatar.png"},...e};O.useEffect(()=>{j(L.characterName),D(L.characterDescription)},[L]),O.useEffect(()=>{Re.from("embodys").select(`
          *,
          embody_images(
            path
          )
        `).eq("id",e.id).single().then(M=>{h(M.data),p(M.data.name),_(Q[M.data.type]||"");const z=M.data.embody_images.map(P=>({path:P.path,url:bi+P.path}));z.length==0&&z.push({path:"/public/Common/default_charactar_big.png",url:"https://gsyznlwsezhwerypyzbe.supabase.co/storage/v1/object/public/embodys/public/Common/no_pic.png"}),w(z),C([0]),l(z[0].url),M.data.embody_images&&M.data.embody_images.length>0&&bi+M.data.embody_images[0].path;let H=[];e.outputImages.forEach(P=>{for(let V=0;V<z.length;V++)P.path==z[V].path&&H.push(V)}),C(H)})},[t]),O.useEffect(()=>{x.length>0&&s(t,{outputImages:S.map(M=>x[M])})},[S]);const X=()=>{console.log("")},$=M=>{C(z=>z.includes(M)?z.filter(H=>H!==M):[...z,M]),console.log(":",S)},F=M=>{if(M>=1&&M<=S.length&&(q(M),S.length>0)){let z=bi+x[S[M-1]].path;l(z)}};return b.jsxs("div",{className:"embody-node-area",children:[b.jsx("div",{className:"embody-handles-container",children:b.jsx($t,{type:"source",position:we.Right,id:"embody_out"})}),b.jsxs("div",{className:"embody-preview-container",children:[b.jsxs("div",{className:"embody-preview-header",children:[b.jsx("div",{className:"embody-preview-title",children:g||""}),b.jsx("span",{children:v||""}),b.jsx("div",{className:"embody-preview-controls",children:n&&b.jsx("button",{className:"embody-control-btn",onClick:X,children:""})})]}),b.jsxs("div",{className:"embody-preview-image",children:[b.jsx("div",{className:"embody-placeholder-image",children:a?b.jsxs(b.Fragment,{children:[b.jsx("img",{src:a,alt:"Character Preview"}),b.jsx("button",{className:"embody-view-large-btn",onClick:()=>{console.log("currentImageUrl",a),Yt.emit("showLargeImageModal",a)},children:""})]}):b.jsx("div",{className:"embody-placeholder-text",children:""})}),c&&b.jsxs("div",{className:"embody-loading-overlay",children:[b.jsx("div",{className:"embody-loading-spinner"}),b.jsx("span",{className:"embody-loading-text",children:"..."})]}),S.length>1&&b.jsxs("div",{className:"embody-pagination",children:[b.jsx("button",{className:"embody-pagination-btn",onClick:()=>F(I-1),disabled:I===1,children:""}),b.jsxs("span",{className:"embody-pagination-text",children:[I," / ",S.length]}),b.jsx("button",{className:"embody-pagination-btn",onClick:()=>F(I+1),disabled:I===S.length,children:""})]})]})]}),n&&b.jsx(b.Fragment,{children:b.jsx("div",{className:"embody-info-container",children:b.jsxs("div",{className:"embody-info-item",children:[b.jsx("label",{className:"embody-info-label",children:""}),b.jsx("div",{className:"embody-info-images",children:x.map((M,z)=>b.jsxs("div",{className:`embody-info-image-item ${S.includes(z)?"selected":""}`,onClick:()=>$(z),children:[b.jsx("img",{src:bi+M.path,alt:`${z}`}),S.includes(z)&&b.jsx("div",{className:"embody-image-checkmark",children:""})]},z))})]})})})]})}function sz({id:t,data:e,selected:n}){const{updateNodeData:s}=Wr(),[a,l]=O.useState(null),[c,d]=O.useState(!1),[f,h]=O.useState([]),[g,p]=O.useState([]),[v,_]=O.useState(""),[x,w]=O.useState("blur, distort, and low quality"),[S,C]=O.useState(.5),[N,E]=O.useState(5),[A,j]=O.useState(24),[R,D]=O.useState("fal-ai/kling-video/v2.1/master/image-to-video"),[I,q]=O.useState(0),[Q,G]=O.useState(0),[L,X]=O.useState("");Wr();const $=()=>({paddingBottom:"56.25%",width:"100%",position:"relative",height:0,overflow:"hidden"}),F=()=>({position:"absolute",top:0,left:0,width:"100%",height:"100%",objectFit:"contain"}),z=Wg({handleType:"target",handleId:"ref_images"}).map(k=>k.source),H=eC(z),P=()=>H?(Array.isArray(H)?H:[H]).flatMap(W=>W&&W.data&&Array.isArray(W.data.outputImages)?W.data.outputImages:[]):[];O.useEffect(()=>{p(P())},[H]),O.useEffect(()=>{q(f.length),f.length>0&&l(f[Q].url)},[f,Q]),O.useEffect(()=>{_(e.prompt||""),E(e.duration||5),D(e.model||"fal-ai/kling-video/v2.1/master/image-to-video"),h(e.videos||[]),w(e.negative_prompt||"blur, distort, and low quality"),C(e.cfg_scale||.5)},[]),O.useEffect(()=>{s(t,{videos:f,duration:N,fps:A,model:R,prompt:v,negative_prompt:x,cfg_scale:S})},[f,N,R,v,x,S]);const V=async()=>{X("");let k={};if(console.log("referenceImages:",g),!v.trim()){X("");return}if(g.length===0){X("");return}R==="fal-ai/kling-video/v2.5-turbo/pro/image-to-video"&&(k={prompt:v,negative_prompt:x,duration:N,cfg_scale:S,image_url:g[0].url}),console.log("model:",R),console.log("inputData:",k);try{jd.fal.config({credentials:"d0f5c4fd-29b2-4024-bc64-a4719276c027:5b06c17b429cc06d2f5e044e95ca5164"});const B=await jd.fal.subscribe(R,{input:k,logs:!0,onQueueUpdate:W=>{W.status==="IN_PROGRESS"&&d(!0),W.status==="SUCCEEDED"&&d(!1)},onResult:W=>{console.log(W)},onError:W=>{console.error("Error:",W),X(": "+(W.message||"")),d(!1)}});l(null),console.log(B.data),h([B.data.video]),G(0),d(!1)}catch(B){console.error("Error:",B),X(": "+(B.message||"")),d(!1)}};return b.jsxs("div",{className:"image2video-node-area",children:[b.jsxs("div",{className:"image2video-handles-container",children:[b.jsx($t,{type:"target",position:we.Left,id:"ref_images"}),b.jsx($t,{type:"source",position:we.Right,id:"video"})]}),b.jsxs("div",{className:"image2video-preview-container",children:[b.jsxs("div",{className:"image2video-preview-header",children:[b.jsxs("div",{className:"image2video-preview-title",children:["ref-",g.length]}),b.jsx("div",{className:"image2video-preview-controls",children:b.jsx("span",{className:"",children:R})})]}),L&&b.jsxs("div",{className:"image2video-error-message",children:[b.jsx("span",{className:"image2video-error-icon",children:""}),b.jsx("span",{className:"image2video-error-text",children:L}),b.jsx("button",{className:"image2video-error-close",onClick:()=>X(""),children:""})]}),b.jsxs("div",{className:"image2video-preview-video",children:[b.jsx("div",{className:"image2video-placeholder-video",style:$(),children:a?b.jsxs(b.Fragment,{children:[b.jsx("video",{src:a,alt:"Generated Video",style:F(),controls:!0,autoPlay:!0,muted:!0}),b.jsx("button",{className:"embody-view-large-btn",onClick:()=>{console.log("currentVideoUrl",a),Yt.emit("showLargeVideoModal",a)},style:{position:"absolute",top:"8px",right:"8px",zIndex:10},children:""})]}):b.jsx("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",textAlign:"center",padding:"20px"},className:"image2video-placeholder-text",children:""})}),f.length>1&&b.jsxs("div",{className:"image2video-pagination",children:[b.jsx("button",{className:"image2video-pagination-btn",onClick:()=>G(k=>Math.max(k-1,0)),children:""}),b.jsxs("span",{className:"image2video-pagination-text",children:[Q+1," / ",I]}),b.jsx("button",{className:"image2video-pagination-btn",onClick:()=>G(k=>Math.min(k+1,I-1)),children:""})]}),c&&b.jsxs("div",{className:"image2video-loading-overlay",children:[b.jsx("div",{className:"image2video-loading-spinner"}),b.jsx("span",{className:"image2video-loading-text",children:"..."})]})]})]}),n&&b.jsxs(b.Fragment,{children:[b.jsx("div",{className:"image2video-prompt-container",children:b.jsx("textarea",{className:"image2video-prompt-textarea",value:v,onChange:k=>{const B=k.target.value;_(B)},placeholder:"..."})}),b.jsx("div",{className:"image2video-prompt-container",children:b.jsx("textarea",{className:"image2video-prompt-textarea",value:x,onChange:k=>{const B=k.target.value;w(B)},placeholder:"..."})}),b.jsxs("div",{className:"image2video-bottom-controls",children:[b.jsxs("div",{className:"image2video-controls-left",children:[b.jsx("div",{className:"image2video-control-group",children:b.jsxs("select",{value:R,onChange:k=>{const B=k.target.value;D(B)},className:"image2video-control-select",children:[b.jsx("option",{value:"fal-ai/kling-video/v2.5-turbo/pro/image-to-video",children:"kling-video/v2.5-turbo"}),b.jsx("option",{value:"fal-ai/kling-video/v2.1/master/image-to-video",children:"kling-video/v2.1/master"})]})}),b.jsx("div",{className:"image2video-control-group",children:b.jsx("input",{type:"number",value:N,onChange:k=>{const B=parseFloat(k.target.value);E(`${B}`)},className:"image2video-control-input",min:"5",max:"30",placeholder:" ()"})}),b.jsx("div",{className:"image2video-control-group",children:b.jsx("input",{type:"number",value:S,onChange:k=>{const B=parseFloat(k.target.value);C(isNaN(B)?.5:B)},className:"image2video-control-input",min:"0",max:"1",placeholder:" (CFG Scale)"})})]}),b.jsxs("div",{className:"image2video-controls-right",children:[b.jsx("button",{className:"image2video-control-button",children:""}),b.jsx("button",{disabled:c,onClick:V,className:"image2video-generate-button",children:""})]})]})]})]})}const iz=({id:t,source:e,target:n,sourceX:s,sourceY:a,targetX:l,targetY:c,sourcePosition:d,targetPosition:f,selected:h,data:g})=>{const[p,v]=O.useMemo(()=>{const A=Vg({sourceX:s,sourceY:a,targetX:l,targetY:c,sourcePosition:d,targetPosition:f}),j=document.createElementNS("http://www.w3.org/2000/svg","path");j.setAttribute("d",A[0]),document.body.appendChild(j);const R=j.getTotalLength();return document.body.removeChild(j),[A[0],R]},[s,a,l,c,d,f]),[_,x]=O.useState(`${t}-animate`),[w,S]=O.useState(!0),C=Math.max(3,Math.min(8,v/5));O.useEffect(()=>{x(`${t}-animate-${Date.now()}`)},[t]);const N={stroke:h?"#ff4088":"#ff0072",strokeWidth:h?3:2,fill:"none",cursor:"pointer",transition:"stroke 0.2s, stroke-width 0.2s"},E={stroke:"white",strokeWidth:"3",fill:"none",strokeDasharray:"12, 8",strokeLinecap:"round",pointerEvents:"none"};return b.jsxs(b.Fragment,{children:[b.jsx("path",{id:t,d:p,className:`exec-edge ${h?"selected":""}`,style:N,onMouseEnter:A=>{A.currentTarget.style.stroke="#ff4088",A.currentTarget.style.strokeWidth="3"},onMouseLeave:A=>{A.currentTarget.style.stroke=h?"#ff4088":"#ff0072",A.currentTarget.style.strokeWidth=h?"3":"2"}}),w&&b.jsx("path",{id:_,d:p,className:"exec-edge-flow",style:{...E,animation:w?`flowAnimation ${C}s linear infinite`:"none",visibility:v>0?"visible":"hidden"}}),b.jsxs("defs",{children:[b.jsx("marker",{id:"exec-arrow",markerWidth:"10",markerHeight:"10",refX:"9",refY:"3",orient:"auto",markerUnits:"strokeWidth",children:b.jsx("path",{d:"M0,0 L0,6 L9,3 z",fill:"#ff0072"})}),b.jsx("style",{type:"text/css",children:`
            @keyframes flowAnimation {
              0% {
                stroke-dashoffset: 200; /*  */
              }
              100% {
                stroke-dashoffset: 0;
              }
            }
            
            .exec-edge-flow {
              /*  */
              filter: drop-shadow(0 0 2px rgba(255, 255, 255, 0.7));
              /*  */
              will-change: stroke-dashoffset;
            }
            
            /*  */
            .exec-edge.selected + .exec-edge-flow {
              stroke-width: 4; /*  */
              filter: drop-shadow(0 0 4px rgba(255, 255, 255, 0.9));
              animation-duration: 3s; /*  */
            }
          `})]})]})},az=({position:t,visible:e,onClose:n,onAddTxt2ImgNode:s,onAddImage2VideoNode:a,onAddEmbodyNode:l})=>{const c=O.useRef(null);return O.useEffect(()=>{const d=h=>{c.current&&!c.current.contains(h.target)&&n()},f=h=>{h.key==="Escape"&&n()};return e&&(document.addEventListener("mousedown",d),document.addEventListener("keydown",f)),()=>{document.removeEventListener("mousedown",d),document.removeEventListener("keydown",f)}},[e,n]),e?b.jsx("div",{ref:c,className:"context-menu",style:{position:"fixed",left:`${t.x}px`,top:`${t.y}px`,zIndex:1e3},children:b.jsxs("ul",{children:[b.jsx("li",{onClick:s,children:""}),b.jsx("li",{onClick:a,children:""}),b.jsx("li",{onClick:l,children:""})]})}):null};function oz(){const{projectId:t,ep_id:e,editShotId:n,setEditShotId:s}=Zr(),[a,l]=O.useState(!1),[c,d]=O.useState(!1),[f,h]=O.useState([]),[g,p]=O.useState({}),[v,_]=O.useState(null),[x,w]=O.useState([]),[S,C]=O.useState(null),[N,E]=O.useState(!1),[A,j]=O.useState({x:0,y:0}),[R,D]=O.useState(null);O.useEffect(()=>{n||console.log(""),I()},[n]);const I=async()=>{const{data:Z,error:ie}=await Re.from("movie_scs").select(`
          *,
          movie_seqs(
            *,
            movie_shots(
              *,
              flows(
                *
              )
            )
          ).order('index', { ascending: true })
        `).order("index",{ascending:!0}).eq("ep_id",e);if(ie){console.error(":",ie);return}console.log(":",Z),Z.forEach(oe=>{oe.movie_seqs.forEach(de=>{de.movie_shots.forEach(pe=>{g[pe.id]=pe})})}),h(Z),_(n)},q=Z=>{_(Z.id)},Q=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(Z){var ie=Math.random()*16|0,oe=Z==="x"?ie:ie&3|8;return oe.toString(16)}),G=Z=>{console.log("setupInitNodes:",Z);const ie=Q();let oe=[],de=[];oe.push({id:ie,type:"txt2imgNode",position:{x:900,y:100},data:{prompt:Z.prompt,num_images:1,aspect_ratio:"16:9",model:"fal-ai/nano-banana/edit",images:[]},selected:S==="0",style:{border:S==="0"?"2px solid #3b82f6":"none"}});for(let pe=0;pe<Z.embodys.length;pe++){const be=Z.embodys[pe],_e=Q();console.log(" embody _id:",be),oe.push({id:_e,type:"embodyNode",position:{x:100,y:500*pe},data:{id:be,selected:S===_e},selected:S===_e,style:{border:S===_e?"2px solid #3b82f6":"none"}}),de.push({id:Q(),source:_e,sourceHandle:"embody_out",target:ie,targetHandle:"ref_images",type:"default",data:{}})}w(oe),X(de)};O.useEffect(()=>{console.log("selectedShotId:",v),v&&(console.log(g[v]),Re.from("movie_shots").select(`
      *,
      flows(
        *
      )
    `).eq("id",v).single().then(Z=>{console.log("shot:",Z.data),g[v]=Z.data,Z.data.flows||d(Z.data.flows.length>0),Z.data.flows.length>0?(w(JSON.parse(Z.data.flows[0].nodes)),X(JSON.parse(Z.data.flows[0].edges))):G(Z.data)}))},[v]),O.useEffect(()=>{},[x]);const[L,X]=O.useState([]),$={shotNodeInput:JL,consoleNode:ez,shotNodeOutput:tz,txt2imgNode:nz,embodyNode:rz,image2videoNode:sz},F={execEdge:iz},M=Z=>{l(!0),X(ie=>{if(Z.target==="2"&&ie.some(pe=>pe.target==="2"))return console.warn("ConsoleNode"),ie;const oe={...Z,type:Z.sourceHandle==="exec-out"&&Z.targetHandle==="exec-in"?"execEdge":"default"};return u1(oe,ie)})},z=()=>{a&&(c?(console.log("flow"),Re.from("flows").update({nodes:JSON.stringify(x),edges:JSON.stringify(L)}).eq("shot_id",v).select("*").then(Z=>{Z.error?console.error(":",Z.error.message):(l(!1),d(!0))})):(d(!0),Re.from("flows").insert({shot_id:v,nodes:JSON.stringify(x),edges:JSON.stringify(L)}).then(Z=>{Z.error?console.error(":",Z.error.message):l(!1)})))};O.useEffect(()=>{const Z=setInterval(()=>{z()},1e3);return()=>clearInterval(Z)},[x,L,a]),O.useEffect(()=>{const Z=ie=>{if(ie.key==="Delete"){const oe=x.filter(be=>be.selected),de=L.filter(be=>be.selected);let pe=!1;if(oe.length>0){const be=x.filter(ce=>!ce.selected);w(be),pe=!0;const _e=oe.map(ce=>ce.id),Ue=L.filter(ce=>!_e.includes(ce.source)&&!_e.includes(ce.target));X(Ue)}else if(de.length>0){const be=L.filter(_e=>!_e.selected);X(be),pe=!0}pe&&l(!0)}};return window.addEventListener("keydown",Z),()=>window.removeEventListener("keydown",Z)},[x,L]);const H=(Z,ie)=>{Z.stopPropagation();const oe=ie.id;C(oe),w(de=>de.map(pe=>({...pe,selected:pe.id===oe,style:{...pe.style,border:pe.id===oe?"2px solid #3b82f6":"none"}}))),console.log(":",oe)},P=(Z,ie)=>{Z.preventDefault(),ie||(j({x:Z.clientX,y:Z.clientY}),E(!0))},V=()=>{E(!1)},k=()=>(x.reduce((ie,oe)=>{const de=parseInt(oe.id);return isNaN(de)?ie:Math.max(ie,de)},0)+1).toString(),B=()=>{if(R){const Z=R.screenToFlowPosition(A),ie={id:k(),type:"txt2imgNode",position:{x:Z.x-40,y:Z.y-50},data:{prompt:"",imageUrl:null},selected:!1,style:{border:"none"}};w(oe=>[...oe,ie]),console.log(":",ie.id)}V()},W=()=>{if(R){const Z=R.screenToFlowPosition(A),ie={id:k(),type:"image2videoNode",position:{x:Z.x-40,y:Z.y-50},data:{prompt:"",imageUrl:null},selected:!1,style:{border:"none"}};w(oe=>[...oe,ie]),console.log(":",ie.id)}V()},ee=()=>{if(R){const Z=R.screenToFlowPosition(A),ie={id:k(),type:"embodyNode",position:{x:Z.x-40,y:Z.y-50},data:{characterName:"",characterDescription:"",imageUrl:null},selected:!1,style:{border:"none"}};w(oe=>[...oe,ie]),console.log(":",ie.id)}V()},he=O.useCallback(Z=>{X(ie=>j1(Z,ie)),l(!0)},[]),ge=O.useCallback(Z=>{w(ie=>O1(Z,ie)),l(!0)},[]);return b.jsxs("div",{className:"editor-flow-container",children:[b.jsx("div",{className:"story-nav",children:b.jsx("div",{className:"flow-nav-info",children:f.map(Z=>b.jsxs("div",{className:"flow-nav-sc-card",children:[b.jsx("div",{className:"flow-nav-sc-name",children:b.jsx("p",{children:Z.name})}),b.jsx("div",{className:"flow-nav-sc-content",children:Z.movie_seqs.map(ie=>b.jsxs("div",{className:"flow-nav-seq-card",children:[b.jsx("div",{className:"flow-nav-seq-name",children:b.jsx("p",{children:ie.name})}),b.jsx("div",{className:"flow-nav-seq-content",children:ie.movie_shots.map(oe=>b.jsx("div",{className:`flow-nav-shot-card ${v===oe.id?"nav-selected-shot":""}`,onClick:()=>q(oe),children:b.jsx("div",{className:"flow-nav-shot-thumb",children:b.jsx("img",{src:oe.pic?oe.pic:"./shot_thumb_default.png"})})},oe.id))})]},ie.id))})]},Z.id))})}),b.jsxs("div",{className:"flow-editor",children:[b.jsxs(SL,{nodes:x,edges:L,nodeTypes:$,edgeTypes:F,onConnect:M,onEdgesChange:he,onNodesChange:ge,onNodeClick:H,defaultViewport:{x:0,y:0,zoom:.6},onPaneClick:()=>{C(null),V(),w(Z=>Z.map(ie=>({...ie,selected:!1,style:{...ie.style,border:"none"}})))},onContextMenu:P,onInit:D,attributionPosition:"bottom-right",children:[b.jsx(IL,{}),b.jsx(OL,{variant:"dots",gap:20,size:1,strokeColor:"#333"})]}),b.jsx(az,{position:A,visible:N,onClose:V,onAddTxt2ImgNode:B,onAddImage2VideoNode:W,onAddEmbodyNode:ee})]})]})}function $e(t,e,n,s,a){if(typeof e=="function"?t!==e||!0:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(t,n),n}function re(t,e,n,s){if(n==="a"&&!s)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?s:n==="a"?s.call(t):s?s.value:e.get(t)}let aC=function(){const{crypto:t}=globalThis;if(t?.randomUUID)return aC=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),n=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,s=>(+s^n()&15>>+s/4).toString(16))};function tg(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const ng=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};class je extends Error{}class Gt extends je{constructor(e,n,s,a){super(`${Gt.makeMessage(e,n,s)}`),this.status=e,this.headers=a,this.requestID=a?.get("x-request-id"),this.error=n;const l=n;this.code=l?.code,this.param=l?.param,this.type=l?.type}static makeMessage(e,n,s){const a=n?.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):s;return e&&a?`${e} ${a}`:e?`${e} status code (no body)`:a||"(no status code or body)"}static generate(e,n,s,a){if(!e||!a)return new yf({message:s,cause:ng(n)});const l=n?.error;return e===400?new oC(e,l,s,a):e===401?new lC(e,l,s,a):e===403?new cC(e,l,s,a):e===404?new uC(e,l,s,a):e===409?new dC(e,l,s,a):e===422?new fC(e,l,s,a):e===429?new hC(e,l,s,a):e>=500?new mC(e,l,s,a):new Gt(e,l,s,a)}}class Hn extends Gt{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class yf extends Gt{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}}class Jg extends yf{constructor({message:e}={}){super({message:e??"Request timed out."})}}class oC extends Gt{}class lC extends Gt{}class cC extends Gt{}class uC extends Gt{}class dC extends Gt{}class fC extends Gt{}class hC extends Gt{}class mC extends Gt{}class pC extends je{constructor(){super("Could not parse response content as the length limit was reached")}}class gC extends je{constructor(){super("Could not parse response content as the request was rejected by the content filter")}}class ml extends Error{constructor(e){super(e)}}const lz=/^[a-z][a-z0-9+.-]*:/i,cz=t=>lz.test(t);let fn=t=>(fn=Array.isArray,fn(t)),bx=fn;function yC(t){return typeof t!="object"?{}:t??{}}function uz(t){if(!t)return!0;for(const e in t)return!1;return!0}function dz(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function gp(t){return t!=null&&typeof t=="object"&&!Array.isArray(t)}const fz=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new je(`${t} must be an integer`);if(e<0)throw new je(`${t} must be a positive integer`);return e},hz=t=>{try{return JSON.parse(t)}catch{return}},ac=t=>new Promise(e=>setTimeout(e,t)),ka="6.9.1",mz=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u";function pz(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const gz=()=>{const t=pz();if(t==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ka,"X-Stainless-OS":wx(Deno.build.os),"X-Stainless-Arch":_x(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:Deno.version?.deno??"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ka,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(t==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ka,"X-Stainless-OS":wx(globalThis.process.platform??"unknown"),"X-Stainless-Arch":_x(globalThis.process.arch??"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":globalThis.process.version??"unknown"};const e=yz();return e?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ka,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${e.browser}`,"X-Stainless-Runtime-Version":e.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ka,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function yz(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const s=n.exec(navigator.userAgent);if(s){const a=s[1]||0,l=s[2]||0,c=s[3]||0;return{browser:e,version:`${a}.${l}.${c}`}}}return null}const _x=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",wx=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let xx;const vz=()=>xx??(xx=gz());function bz(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new OpenAI({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function vC(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function bC(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return vC({start(){},async pull(n){const{done:s,value:a}=await e.next();s?n.close():n.enqueue(a)},async cancel(){await e.return?.()}})}function _C(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const n=await e.read();return n?.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function _z(t){if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await t[Symbol.asyncIterator]().return?.();return}const e=t.getReader(),n=e.cancel();e.releaseLock(),await n}const wz=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)}),wC="RFC3986",xC=t=>String(t),Sx={RFC1738:t=>String(t).replace(/%20/g,"+"),RFC3986:xC},xz="RFC1738";let rg=(t,e)=>(rg=Object.hasOwn??Function.prototype.call.bind(Object.prototype.hasOwnProperty),rg(t,e));const fr=(()=>{const t=[];for(let e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t})(),yp=1024,Sz=(t,e,n,s,a)=>{if(t.length===0)return t;let l=t;if(typeof t=="symbol"?l=Symbol.prototype.toString.call(t):typeof t!="string"&&(l=String(t)),n==="iso-8859-1")return escape(l).replace(/%u[0-9a-f]{4}/gi,function(d){return"%26%23"+parseInt(d.slice(2),16)+"%3B"});let c="";for(let d=0;d<l.length;d+=yp){const f=l.length>=yp?l.slice(d,d+yp):l,h=[];for(let g=0;g<f.length;++g){let p=f.charCodeAt(g);if(p===45||p===46||p===95||p===126||p>=48&&p<=57||p>=65&&p<=90||p>=97&&p<=122||a===xz&&(p===40||p===41)){h[h.length]=f.charAt(g);continue}if(p<128){h[h.length]=fr[p];continue}if(p<2048){h[h.length]=fr[192|p>>6]+fr[128|p&63];continue}if(p<55296||p>=57344){h[h.length]=fr[224|p>>12]+fr[128|p>>6&63]+fr[128|p&63];continue}g+=1,p=65536+((p&1023)<<10|f.charCodeAt(g)&1023),h[h.length]=fr[240|p>>18]+fr[128|p>>12&63]+fr[128|p>>6&63]+fr[128|p&63]}c+=h.join("")}return c};function Ez(t){return!t||typeof t!="object"?!1:!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))}function Ex(t,e){if(fn(t)){const n=[];for(let s=0;s<t.length;s+=1)n.push(e(t[s]));return n}return e(t)}const SC={brackets(t){return String(t)+"[]"},comma:"comma",indices(t,e){return String(t)+"["+e+"]"},repeat(t){return String(t)}},EC=function(t,e){Array.prototype.push.apply(t,fn(e)?e:[e])};let Cx;const Dt={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:Sz,encodeValuesOnly:!1,format:wC,formatter:xC,indices:!1,serializeDate(t){return(Cx??(Cx=Function.prototype.call.bind(Date.prototype.toISOString)))(t)},skipNulls:!1,strictNullHandling:!1};function Cz(t){return typeof t=="string"||typeof t=="number"||typeof t=="boolean"||typeof t=="symbol"||typeof t=="bigint"}const vp={};function CC(t,e,n,s,a,l,c,d,f,h,g,p,v,_,x,w,S,C){let N=t,E=C,A=0,j=!1;for(;(E=E.get(vp))!==void 0&&!j;){const Q=E.get(t);if(A+=1,typeof Q<"u"){if(Q===A)throw new RangeError("Cyclic object value");j=!0}typeof E.get(vp)>"u"&&(A=0)}if(typeof h=="function"?N=h(e,N):N instanceof Date?N=v?.(N):n==="comma"&&fn(N)&&(N=Ex(N,function(Q){return Q instanceof Date?v?.(Q):Q})),N===null){if(l)return f&&!w?f(e,Dt.encoder,S,"key",_):e;N=""}if(Cz(N)||Ez(N)){if(f){const Q=w?e:f(e,Dt.encoder,S,"key",_);return[x?.(Q)+"="+x?.(f(N,Dt.encoder,S,"value",_))]}return[x?.(e)+"="+x?.(String(N))]}const R=[];if(typeof N>"u")return R;let D;if(n==="comma"&&fn(N))w&&f&&(N=Ex(N,f)),D=[{value:N.length>0?N.join(",")||null:void 0}];else if(fn(h))D=h;else{const Q=Object.keys(N);D=g?Q.sort(g):Q}const I=d?String(e).replace(/\./g,"%2E"):String(e),q=s&&fn(N)&&N.length===1?I+"[]":I;if(a&&fn(N)&&N.length===0)return q+"[]";for(let Q=0;Q<D.length;++Q){const G=D[Q],L=typeof G=="object"&&typeof G.value<"u"?G.value:N[G];if(c&&L===null)continue;const X=p&&d?G.replace(/\./g,"%2E"):G,$=fn(N)?typeof n=="function"?n(q,X):q:q+(p?"."+X:"["+X+"]");C.set(t,A);const F=new WeakMap;F.set(vp,C),EC(R,CC(L,$,n,s,a,l,c,d,n==="comma"&&w&&fn(N)?null:f,h,g,p,v,_,x,w,S,F))}return R}function Az(t=Dt){if(typeof t.allowEmptyArrays<"u"&&typeof t.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof t.encodeDotInKeys<"u"&&typeof t.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(t.encoder!==null&&typeof t.encoder<"u"&&typeof t.encoder!="function")throw new TypeError("Encoder has to be a function.");const e=t.charset||Dt.charset;if(typeof t.charset<"u"&&t.charset!=="utf-8"&&t.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");let n=wC;if(typeof t.format<"u"){if(!rg(Sx,t.format))throw new TypeError("Unknown format option provided.");n=t.format}const s=Sx[n];let a=Dt.filter;(typeof t.filter=="function"||fn(t.filter))&&(a=t.filter);let l;if(t.arrayFormat&&t.arrayFormat in SC?l=t.arrayFormat:"indices"in t?l=t.indices?"indices":"repeat":l=Dt.arrayFormat,"commaRoundTrip"in t&&typeof t.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");const c=typeof t.allowDots>"u"?t.encodeDotInKeys?!0:Dt.allowDots:!!t.allowDots;return{addQueryPrefix:typeof t.addQueryPrefix=="boolean"?t.addQueryPrefix:Dt.addQueryPrefix,allowDots:c,allowEmptyArrays:typeof t.allowEmptyArrays=="boolean"?!!t.allowEmptyArrays:Dt.allowEmptyArrays,arrayFormat:l,charset:e,charsetSentinel:typeof t.charsetSentinel=="boolean"?t.charsetSentinel:Dt.charsetSentinel,commaRoundTrip:!!t.commaRoundTrip,delimiter:typeof t.delimiter>"u"?Dt.delimiter:t.delimiter,encode:typeof t.encode=="boolean"?t.encode:Dt.encode,encodeDotInKeys:typeof t.encodeDotInKeys=="boolean"?t.encodeDotInKeys:Dt.encodeDotInKeys,encoder:typeof t.encoder=="function"?t.encoder:Dt.encoder,encodeValuesOnly:typeof t.encodeValuesOnly=="boolean"?t.encodeValuesOnly:Dt.encodeValuesOnly,filter:a,format:n,formatter:s,serializeDate:typeof t.serializeDate=="function"?t.serializeDate:Dt.serializeDate,skipNulls:typeof t.skipNulls=="boolean"?t.skipNulls:Dt.skipNulls,sort:typeof t.sort=="function"?t.sort:null,strictNullHandling:typeof t.strictNullHandling=="boolean"?t.strictNullHandling:Dt.strictNullHandling}}function Tz(t,e={}){let n=t;const s=Az(e);let a,l;typeof s.filter=="function"?(l=s.filter,n=l("",n)):fn(s.filter)&&(l=s.filter,a=l);const c=[];if(typeof n!="object"||n===null)return"";const d=SC[s.arrayFormat],f=d==="comma"&&s.commaRoundTrip;a||(a=Object.keys(n)),s.sort&&a.sort(s.sort);const h=new WeakMap;for(let v=0;v<a.length;++v){const _=a[v];s.skipNulls&&n[_]===null||EC(c,CC(n[_],_,d,f,s.allowEmptyArrays,s.strictNullHandling,s.skipNulls,s.encodeDotInKeys,s.encode?s.encoder:null,s.filter,s.sort,s.allowDots,s.serializeDate,s.format,s.formatter,s.encodeValuesOnly,s.charset,h))}const g=c.join(s.delimiter);let p=s.addQueryPrefix===!0?"?":"";return s.charsetSentinel&&(s.charset==="iso-8859-1"?p+="utf8=%26%2310003%3B&":p+="utf8=%E2%9C%93&"),g.length>0?p+g:""}function Nz(t){let e=0;for(const a of t)e+=a.length;const n=new Uint8Array(e);let s=0;for(const a of t)n.set(a,s),s+=a.length;return n}let Ax;function Zg(t){let e;return(Ax??(e=new globalThis.TextEncoder,Ax=e.encode.bind(e)))(t)}let Tx;function Nx(t){let e;return(Tx??(e=new globalThis.TextDecoder,Tx=e.decode.bind(e)))(t)}var Cn,An;class vf{constructor(){Cn.set(this,void 0),An.set(this,void 0),$e(this,Cn,new Uint8Array),$e(this,An,null)}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?Zg(e):e;$e(this,Cn,Nz([re(this,Cn,"f"),n]));const s=[];let a;for(;(a=Oz(re(this,Cn,"f"),re(this,An,"f")))!=null;){if(a.carriage&&re(this,An,"f")==null){$e(this,An,a.index);continue}if(re(this,An,"f")!=null&&(a.index!==re(this,An,"f")+1||a.carriage)){s.push(Nx(re(this,Cn,"f").subarray(0,re(this,An,"f")-1))),$e(this,Cn,re(this,Cn,"f").subarray(re(this,An,"f"))),$e(this,An,null);continue}const l=re(this,An,"f")!==null?a.preceding-1:a.preceding,c=Nx(re(this,Cn,"f").subarray(0,l));s.push(c),$e(this,Cn,re(this,Cn,"f").subarray(a.index)),$e(this,An,null)}return s}flush(){return re(this,Cn,"f").length?this.decode(`
`):[]}}Cn=new WeakMap,An=new WeakMap;vf.NEWLINE_CHARS=new Set([`
`,"\r"]);vf.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function Oz(t,e){for(let a=e??0;a<t.length;a++){if(t[a]===10)return{preceding:a,index:a+1,carriage:!1};if(t[a]===13)return{preceding:a,index:a+1,carriage:!0}}return null}function jz(t){for(let s=0;s<t.length-1;s++){if(t[s]===10&&t[s+1]===10||t[s]===13&&t[s+1]===13)return s+2;if(t[s]===13&&t[s+1]===10&&s+3<t.length&&t[s+2]===13&&t[s+3]===10)return s+4}return-1}const qd={off:0,error:200,warn:300,info:400,debug:500},Ox=(t,e,n)=>{if(t){if(dz(qd,t))return t;Vt(n).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(qd))}`)}};function pl(){}function ed(t,e,n){return!e||qd[t]>qd[n]?pl:e[t].bind(e)}const Rz={error:pl,warn:pl,info:pl,debug:pl};let jx=new WeakMap;function Vt(t){const e=t.logger,n=t.logLevel??"off";if(!e)return Rz;const s=jx.get(e);if(s&&s[0]===n)return s[1];const a={error:ed("error",e,n),warn:ed("warn",e,n),info:ed("info",e,n),debug:ed("debug",e,n)};return jx.set(e,[n,a]),a}const mi=t=>(t.options&&(t.options={...t.options},delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,n])=>[e,e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);var cl;class pr{constructor(e,n,s){this.iterator=e,cl.set(this,void 0),this.controller=n,$e(this,cl,s)}static fromSSEResponse(e,n,s){let a=!1;const l=s?Vt(s):console;async function*c(){if(a)throw new je("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");a=!0;let d=!1;try{for await(const f of kz(e,n))if(!d){if(f.data.startsWith("[DONE]")){d=!0;continue}if(f.event===null||!f.event.startsWith("thread.")){let h;try{h=JSON.parse(f.data)}catch(g){throw l.error("Could not parse message into JSON:",f.data),l.error("From chunk:",f.raw),g}if(h&&h.error)throw new Gt(void 0,h.error,void 0,e.headers);yield h}else{let h;try{h=JSON.parse(f.data)}catch(g){throw console.error("Could not parse message into JSON:",f.data),console.error("From chunk:",f.raw),g}if(f.event=="error")throw new Gt(void 0,h.error,h.message,void 0);yield{event:f.event,data:h}}}d=!0}catch(f){if(tg(f))return;throw f}finally{d||n.abort()}}return new pr(c,n,s)}static fromReadableStream(e,n,s){let a=!1;async function*l(){const d=new vf,f=_C(e);for await(const h of f)for(const g of d.decode(h))yield g;for(const h of d.flush())yield h}async function*c(){if(a)throw new je("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");a=!0;let d=!1;try{for await(const f of l())d||f&&(yield JSON.parse(f));d=!0}catch(f){if(tg(f))return;throw f}finally{d||n.abort()}}return new pr(c,n,s)}[(cl=new WeakMap,Symbol.asyncIterator)](){return this.iterator()}tee(){const e=[],n=[],s=this.iterator(),a=l=>({next:()=>{if(l.length===0){const c=s.next();e.push(c),n.push(c)}return l.shift()}});return[new pr(()=>a(e),this.controller,re(this,cl,"f")),new pr(()=>a(n),this.controller,re(this,cl,"f"))]}toReadableStream(){const e=this;let n;return vC({async start(){n=e[Symbol.asyncIterator]()},async pull(s){try{const{value:a,done:l}=await n.next();if(l)return s.close();const c=Zg(JSON.stringify(a)+`
`);s.enqueue(c)}catch(a){s.error(a)}},async cancel(){await n.return?.()}})}}async function*kz(t,e){if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new je("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new je("Attempted to iterate over a response with no body");const n=new Dz,s=new vf,a=_C(t.body);for await(const l of Mz(a))for(const c of s.decode(l)){const d=n.decode(c);d&&(yield d)}for(const l of s.flush()){const c=n.decode(l);c&&(yield c)}}async function*Mz(t){let e=new Uint8Array;for await(const n of t){if(n==null)continue;const s=n instanceof ArrayBuffer?new Uint8Array(n):typeof n=="string"?Zg(n):n;let a=new Uint8Array(e.length+s.length);a.set(e),a.set(s,e.length),e=a;let l;for(;(l=jz(e))!==-1;)yield e.slice(0,l),e=e.slice(l)}e.length>0&&(yield e)}class Dz{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const l={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],l}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,s,a]=Uz(e,":");return a.startsWith(" ")&&(a=a.substring(1)),n==="event"?this.event=a:n==="data"&&this.data.push(a),null}}function Uz(t,e){const n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}async function AC(t,e){const{response:n,requestLogID:s,retryOfRequestLogID:a,startTime:l}=e,c=await(async()=>{if(e.options.stream)return Vt(t).debug("response",n.status,n.url,n.headers,n.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(n,e.controller,t):pr.fromSSEResponse(n,e.controller,t);if(n.status===204)return null;if(e.options.__binaryResponse)return n;const f=n.headers.get("content-type")?.split(";")[0]?.trim();if(f?.includes("application/json")||f?.endsWith("+json")){const p=await n.json();return TC(p,n)}return await n.text()})();return Vt(t).debug(`[${s}] response parsed`,mi({retryOfRequestLogID:a,url:n.url,status:n.status,body:c,durationMs:Date.now()-l})),c}function TC(t,e){return!t||typeof t!="object"||Array.isArray(t)?t:Object.defineProperty(t,"_request_id",{value:e.headers.get("x-request-id"),enumerable:!1})}var gl;class bf extends Promise{constructor(e,n,s=AC){super(a=>{a(null)}),this.responsePromise=n,this.parseResponse=s,gl.set(this,void 0),$e(this,gl,e)}_thenUnwrap(e){return new bf(re(this,gl,"f"),this.responsePromise,async(n,s)=>TC(e(await this.parseResponse(n,s),s),s.response))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n,request_id:n.headers.get("x-request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(re(this,gl,"f"),e))),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}gl=new WeakMap;var td;class ey{constructor(e,n,s,a){td.set(this,void 0),$e(this,td,e),this.options=a,this.response=n,this.body=s}hasNextPage(){return this.getPaginatedItems().length?this.nextPageRequestOptions()!=null:!1}async getNextPage(){const e=this.nextPageRequestOptions();if(!e)throw new je("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");return await re(this,td,"f").requestAPIList(this.constructor,e)}async*iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async*[(td=new WeakMap,Symbol.asyncIterator)](){for await(const e of this.iterPages())for(const n of e.getPaginatedItems())yield n}}class Iz extends bf{constructor(e,n,s){super(e,n,async(a,l)=>new s(a,l.response,await AC(a,l),l.options))}async*[Symbol.asyncIterator](){const e=await this;for await(const n of e)yield n}}class _f extends ey{constructor(e,n,s,a){super(e,n,s,a),this.data=s.data||[],this.object=s.object}getPaginatedItems(){return this.data??[]}nextPageRequestOptions(){return null}}class Nt extends ey{constructor(e,n,s,a){super(e,n,s,a),this.data=s.data||[],this.has_more=s.has_more||!1}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageRequestOptions(){const e=this.getPaginatedItems(),n=e[e.length-1]?.id;return n?{...this.options,query:{...yC(this.options.query),after:n}}:null}}class Hd extends ey{constructor(e,n,s,a){super(e,n,s,a),this.data=s.data||[],this.has_more=s.has_more||!1,this.last_id=s.last_id||""}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageRequestOptions(){const e=this.last_id;return e?{...this.options,query:{...yC(this.options.query),after:e}}:null}}const NC=()=>{if(typeof File>"u"){const{process:t}=globalThis,e=typeof t?.versions?.node=="string"&&parseInt(t.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(e?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function Ol(t,e,n){return NC(),new File(t,e??"unknown_file",n)}function pd(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const ty=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function",Rx=async(t,e)=>sg(t.body)?{...t,body:await OC(t.body,e)}:t,Oi=async(t,e)=>({...t,body:await OC(t.body,e)}),kx=new WeakMap;function $z(t){const e=typeof t=="function"?t:t.fetch,n=kx.get(e);if(n)return n;const s=(async()=>{try{const a="Response"in e?e.Response:(await e("data:,")).constructor,l=new FormData;return l.toString()!==await new a(l).text()}catch{return!0}})();return kx.set(e,s),s}const OC=async(t,e)=>{if(!await $z(e))throw new TypeError("The provided fetch function does not support file uploads with the current global FormData class.");const n=new FormData;return await Promise.all(Object.entries(t||{}).map(([s,a])=>ig(n,s,a))),n},jC=t=>t instanceof Blob&&"name"in t,Lz=t=>typeof t=="object"&&t!==null&&(t instanceof Response||ty(t)||jC(t)),sg=t=>{if(Lz(t))return!0;if(Array.isArray(t))return t.some(sg);if(t&&typeof t=="object"){for(const e in t)if(sg(t[e]))return!0}return!1},ig=async(t,e,n)=>{if(n!==void 0){if(n==null)throw new TypeError(`Received null for "${e}"; to pass null in FormData, you must use the string 'null'`);if(typeof n=="string"||typeof n=="number"||typeof n=="boolean")t.append(e,String(n));else if(n instanceof Response)t.append(e,Ol([await n.blob()],pd(n)));else if(ty(n))t.append(e,Ol([await new Response(bC(n)).blob()],pd(n)));else if(jC(n))t.append(e,n,pd(n));else if(Array.isArray(n))await Promise.all(n.map(s=>ig(t,e+"[]",s)));else if(typeof n=="object")await Promise.all(Object.entries(n).map(([s,a])=>ig(t,`${e}[${s}]`,a)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${n} instead`)}},RC=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",zz=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&RC(t),Bz=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function Pz(t,e,n){if(NC(),t=await t,zz(t))return t instanceof File?t:Ol([await t.arrayBuffer()],t.name);if(Bz(t)){const a=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),Ol(await ag(a),e,n)}const s=await ag(t);if(e||(e=pd(t)),!n?.type){const a=s.find(l=>typeof l=="object"&&"type"in l&&l.type);typeof a=="string"&&(n={...n,type:a})}return Ol(s,e,n)}async function ag(t){let e=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)e.push(t);else if(RC(t))e.push(t instanceof Blob?t:await t.arrayBuffer());else if(ty(t))for await(const n of t)e.push(...await ag(n));else{const n=t?.constructor?.name;throw new Error(`Unexpected data type: ${typeof t}${n?`; constructor: ${n}`:""}${qz(t)}`)}return e}function qz(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}class Te{constructor(e){this._client=e}}function kC(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const Mx=Object.freeze(Object.create(null)),Hz=(t=kC)=>function(n,...s){if(n.length===1)return n[0];let a=!1;const l=[],c=n.reduce((g,p,v)=>{/[?#]/.test(p)&&(a=!0);const _=s[v];let x=(a?encodeURIComponent:t)(""+_);return v!==s.length&&(_==null||typeof _=="object"&&_.toString===Object.getPrototypeOf(Object.getPrototypeOf(_.hasOwnProperty??Mx)??Mx)?.toString)&&(x=_+"",l.push({start:g.length+p.length,length:x.length,error:`Value of type ${Object.prototype.toString.call(_).slice(8,-1)} is not a valid path parameter`})),g+p+(v===s.length?"":x)},""),d=c.split(/[?#]/,1)[0],f=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let h;for(;(h=f.exec(d))!==null;)l.push({start:h.index,length:h[0].length,error:`Value "${h[0]}" can't be safely passed as a path parameter`});if(l.sort((g,p)=>g.start-p.start),l.length>0){let g=0;const p=l.reduce((v,_)=>{const x=" ".repeat(_.start-g),w="^".repeat(_.length);return g=_.start+_.length,v+x+w},"");throw new je(`Path parameters result in path with invalid segments:
${l.map(v=>v.error).join(`
`)}
${c}
${p}`)}return c},ye=Hz(kC);let MC=class extends Te{list(e,n={},s){return this._client.getAPIList(ye`/chat/completions/${e}/messages`,Nt,{query:n,...s})}};function Vd(t){return t!==void 0&&"function"in t&&t.function!==void 0}function ny(t){return t?.$brand==="auto-parseable-response-format"}function oc(t){return t?.$brand==="auto-parseable-tool"}function Vz(t,e){return!e||!DC(e)?{...t,choices:t.choices.map(n=>(UC(n.message.tool_calls),{...n,message:{...n.message,parsed:null,...n.message.tool_calls?{tool_calls:n.message.tool_calls}:void 0}}))}:ry(t,e)}function ry(t,e){const n=t.choices.map(s=>{if(s.finish_reason==="length")throw new pC;if(s.finish_reason==="content_filter")throw new gC;return UC(s.message.tool_calls),{...s,message:{...s.message,...s.message.tool_calls?{tool_calls:s.message.tool_calls?.map(a=>Yz(e,a))??void 0}:void 0,parsed:s.message.content&&!s.message.refusal?Fz(e,s.message.content):null}}});return{...t,choices:n}}function Fz(t,e){return t.response_format?.type!=="json_schema"?null:t.response_format?.type==="json_schema"?"$parseRaw"in t.response_format?t.response_format.$parseRaw(e):JSON.parse(e):null}function Yz(t,e){const n=t.tools?.find(s=>Vd(s)&&s.function?.name===e.function.name);return{...e,function:{...e.function,parsed_arguments:oc(n)?n.$parseRaw(e.function.arguments):n?.function.strict?JSON.parse(e.function.arguments):null}}}function Gz(t,e){if(!t||!("tools"in t)||!t.tools)return!1;const n=t.tools?.find(s=>Vd(s)&&s.function?.name===e.function.name);return Vd(n)&&(oc(n)||n?.function.strict||!1)}function DC(t){return ny(t.response_format)?!0:t.tools?.some(e=>oc(e)||e.type==="function"&&e.function.strict===!0)??!1}function UC(t){for(const e of t||[])if(e.type!=="function")throw new je(`Currently only \`function\` tool calls are supported; Received \`${e.type}\``)}function Xz(t){for(const e of t??[]){if(e.type!=="function")throw new je(`Currently only \`function\` tool types support auto-parsing; Received \`${e.type}\``);if(e.function.strict!==!0)throw new je(`The \`${e.function.name}\` tool is not marked with \`strict: true\`. Only strict function tools can be auto-parsed`)}}const Fd=t=>t?.role==="assistant",IC=t=>t?.role==="tool";var og,gd,yd,yl,vl,vd,bl,Fr,_l,Yd,Gd,Ma,$C;class sy{constructor(){og.add(this),this.controller=new AbortController,gd.set(this,void 0),yd.set(this,()=>{}),yl.set(this,()=>{}),vl.set(this,void 0),vd.set(this,()=>{}),bl.set(this,()=>{}),Fr.set(this,{}),_l.set(this,!1),Yd.set(this,!1),Gd.set(this,!1),Ma.set(this,!1),$e(this,gd,new Promise((e,n)=>{$e(this,yd,e,"f"),$e(this,yl,n,"f")})),$e(this,vl,new Promise((e,n)=>{$e(this,vd,e,"f"),$e(this,bl,n,"f")})),re(this,gd,"f").catch(()=>{}),re(this,vl,"f").catch(()=>{})}_run(e){setTimeout(()=>{e().then(()=>{this._emitFinal(),this._emit("end")},re(this,og,"m",$C).bind(this))},0)}_connected(){this.ended||(re(this,yd,"f").call(this),this._emit("connect"))}get ended(){return re(this,_l,"f")}get errored(){return re(this,Yd,"f")}get aborted(){return re(this,Gd,"f")}abort(){this.controller.abort()}on(e,n){return(re(this,Fr,"f")[e]||(re(this,Fr,"f")[e]=[])).push({listener:n}),this}off(e,n){const s=re(this,Fr,"f")[e];if(!s)return this;const a=s.findIndex(l=>l.listener===n);return a>=0&&s.splice(a,1),this}once(e,n){return(re(this,Fr,"f")[e]||(re(this,Fr,"f")[e]=[])).push({listener:n,once:!0}),this}emitted(e){return new Promise((n,s)=>{$e(this,Ma,!0),e!=="error"&&this.once("error",s),this.once(e,n)})}async done(){$e(this,Ma,!0),await re(this,vl,"f")}_emit(e,...n){if(re(this,_l,"f"))return;e==="end"&&($e(this,_l,!0),re(this,vd,"f").call(this));const s=re(this,Fr,"f")[e];if(s&&(re(this,Fr,"f")[e]=s.filter(a=>!a.once),s.forEach(({listener:a})=>a(...n))),e==="abort"){const a=n[0];!re(this,Ma,"f")&&!s?.length&&Promise.reject(a),re(this,yl,"f").call(this,a),re(this,bl,"f").call(this,a),this._emit("end");return}if(e==="error"){const a=n[0];!re(this,Ma,"f")&&!s?.length&&Promise.reject(a),re(this,yl,"f").call(this,a),re(this,bl,"f").call(this,a),this._emit("end")}}_emitFinal(){}}gd=new WeakMap,yd=new WeakMap,yl=new WeakMap,vl=new WeakMap,vd=new WeakMap,bl=new WeakMap,Fr=new WeakMap,_l=new WeakMap,Yd=new WeakMap,Gd=new WeakMap,Ma=new WeakMap,og=new WeakSet,$C=function(e){if($e(this,Yd,!0),e instanceof Error&&e.name==="AbortError"&&(e=new Hn),e instanceof Hn)return $e(this,Gd,!0),this._emit("abort",e);if(e instanceof je)return this._emit("error",e);if(e instanceof Error){const n=new je(e.message);return n.cause=e,this._emit("error",n)}return this._emit("error",new je(String(e)))};function Kz(t){return typeof t.parse=="function"}var tn,lg,Xd,cg,ug,dg,LC,zC;const Qz=10;class BC extends sy{constructor(){super(...arguments),tn.add(this),this._chatCompletions=[],this.messages=[]}_addChatCompletion(e){this._chatCompletions.push(e),this._emit("chatCompletion",e);const n=e.choices[0]?.message;return n&&this._addMessage(n),e}_addMessage(e,n=!0){if("content"in e||(e.content=null),this.messages.push(e),n){if(this._emit("message",e),IC(e)&&e.content)this._emit("functionToolCallResult",e.content);else if(Fd(e)&&e.tool_calls)for(const s of e.tool_calls)s.type==="function"&&this._emit("functionToolCall",s.function)}}async finalChatCompletion(){await this.done();const e=this._chatCompletions[this._chatCompletions.length-1];if(!e)throw new je("stream ended without producing a ChatCompletion");return e}async finalContent(){return await this.done(),re(this,tn,"m",lg).call(this)}async finalMessage(){return await this.done(),re(this,tn,"m",Xd).call(this)}async finalFunctionToolCall(){return await this.done(),re(this,tn,"m",cg).call(this)}async finalFunctionToolCallResult(){return await this.done(),re(this,tn,"m",ug).call(this)}async totalUsage(){return await this.done(),re(this,tn,"m",dg).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emitFinal(){const e=this._chatCompletions[this._chatCompletions.length-1];e&&this._emit("finalChatCompletion",e);const n=re(this,tn,"m",Xd).call(this);n&&this._emit("finalMessage",n);const s=re(this,tn,"m",lg).call(this);s&&this._emit("finalContent",s);const a=re(this,tn,"m",cg).call(this);a&&this._emit("finalFunctionToolCall",a);const l=re(this,tn,"m",ug).call(this);l!=null&&this._emit("finalFunctionToolCallResult",l),this._chatCompletions.some(c=>c.usage)&&this._emit("totalUsage",re(this,tn,"m",dg).call(this))}async _createChatCompletion(e,n,s){const a=s?.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",()=>this.controller.abort())),re(this,tn,"m",LC).call(this,n);const l=await e.chat.completions.create({...n,stream:!1},{...s,signal:this.controller.signal});return this._connected(),this._addChatCompletion(ry(l,n))}async _runChatCompletion(e,n,s){for(const a of n.messages)this._addMessage(a,!1);return await this._createChatCompletion(e,n,s)}async _runTools(e,n,s){const a="tool",{tool_choice:l="auto",stream:c,...d}=n,f=typeof l!="string"&&l.type==="function"&&l?.function?.name,{maxChatCompletions:h=Qz}=s||{},g=n.tools.map(_=>{if(oc(_)){if(!_.$callback)throw new je("Tool given to `.runTools()` that does not have an associated function");return{type:"function",function:{function:_.$callback,name:_.function.name,description:_.function.description||"",parameters:_.function.parameters,parse:_.$parseRaw,strict:!0}}}return _}),p={};for(const _ of g)_.type==="function"&&(p[_.function.name||_.function.function.name]=_.function);const v="tools"in n?g.map(_=>_.type==="function"?{type:"function",function:{name:_.function.name||_.function.function.name,parameters:_.function.parameters,description:_.function.description,strict:_.function.strict}}:_):void 0;for(const _ of n.messages)this._addMessage(_,!1);for(let _=0;_<h;++_){const w=(await this._createChatCompletion(e,{...d,tool_choice:l,tools:v,messages:[...this.messages]},s)).choices[0]?.message;if(!w)throw new je("missing message in ChatCompletion response");if(!w.tool_calls?.length)return;for(const S of w.tool_calls){if(S.type!=="function")continue;const C=S.id,{name:N,arguments:E}=S.function,A=p[N];if(A){if(f&&f!==N){const I=`Invalid tool_call: ${JSON.stringify(N)}. ${JSON.stringify(f)} requested. Please try again`;this._addMessage({role:a,tool_call_id:C,content:I});continue}}else{const I=`Invalid tool_call: ${JSON.stringify(N)}. Available options are: ${Object.keys(p).map(q=>JSON.stringify(q)).join(", ")}. Please try again`;this._addMessage({role:a,tool_call_id:C,content:I});continue}let j;try{j=Kz(A)?await A.parse(E):E}catch(I){const q=I instanceof Error?I.message:String(I);this._addMessage({role:a,tool_call_id:C,content:q});continue}const R=await A.function(j,this),D=re(this,tn,"m",zC).call(this,R);if(this._addMessage({role:a,tool_call_id:C,content:D}),f)return}}}}tn=new WeakSet,lg=function(){return re(this,tn,"m",Xd).call(this).content??null},Xd=function(){let e=this.messages.length;for(;e-- >0;){const n=this.messages[e];if(Fd(n))return{...n,content:n.content??null,refusal:n.refusal??null}}throw new je("stream ended without producing a ChatCompletionMessage with role=assistant")},cg=function(){for(let e=this.messages.length-1;e>=0;e--){const n=this.messages[e];if(Fd(n)&&n?.tool_calls?.length)return n.tool_calls.filter(s=>s.type==="function").at(-1)?.function}},ug=function(){for(let e=this.messages.length-1;e>=0;e--){const n=this.messages[e];if(IC(n)&&n.content!=null&&typeof n.content=="string"&&this.messages.some(s=>s.role==="assistant"&&s.tool_calls?.some(a=>a.type==="function"&&a.id===n.tool_call_id)))return n.content}},dg=function(){const e={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(const{usage:n}of this._chatCompletions)n&&(e.completion_tokens+=n.completion_tokens,e.prompt_tokens+=n.prompt_tokens,e.total_tokens+=n.total_tokens);return e},LC=function(e){if(e.n!=null&&e.n>1)throw new je("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},zC=function(e){return typeof e=="string"?e:e===void 0?"undefined":JSON.stringify(e)};class iy extends BC{static runTools(e,n,s){const a=new iy,l={...s,headers:{...s?.headers,"X-Stainless-Helper-Method":"runTools"}};return a._run(()=>a._runTools(e,n,l)),a}_addMessage(e,n=!0){super._addMessage(e,n),Fd(e)&&e.content&&this._emit("content",e.content)}}const PC=1,qC=2,HC=4,VC=8,FC=16,YC=32,GC=64,XC=128,KC=256,QC=XC|KC,WC=FC|YC|QC|GC,JC=PC|qC|WC,ZC=HC|VC,Wz=JC|ZC,It={STR:PC,NUM:qC,ARR:HC,OBJ:VC,NULL:FC,BOOL:YC,NAN:GC,INFINITY:XC,MINUS_INFINITY:KC,INF:QC,SPECIAL:WC,ATOM:JC,COLLECTION:ZC,ALL:Wz};class Jz extends Error{}class Zz extends Error{}function e4(t,e=It.ALL){if(typeof t!="string")throw new TypeError(`expecting str, got ${typeof t}`);if(!t.trim())throw new Error(`${t} is empty`);return t4(t.trim(),e)}const t4=(t,e)=>{const n=t.length;let s=0;const a=v=>{throw new Jz(`${v} at position ${s}`)},l=v=>{throw new Zz(`${v} at position ${s}`)},c=()=>(p(),s>=n&&a("Unexpected end of input"),t[s]==='"'?d():t[s]==="{"?f():t[s]==="["?h():t.substring(s,s+4)==="null"||It.NULL&e&&n-s<4&&"null".startsWith(t.substring(s))?(s+=4,null):t.substring(s,s+4)==="true"||It.BOOL&e&&n-s<4&&"true".startsWith(t.substring(s))?(s+=4,!0):t.substring(s,s+5)==="false"||It.BOOL&e&&n-s<5&&"false".startsWith(t.substring(s))?(s+=5,!1):t.substring(s,s+8)==="Infinity"||It.INFINITY&e&&n-s<8&&"Infinity".startsWith(t.substring(s))?(s+=8,1/0):t.substring(s,s+9)==="-Infinity"||It.MINUS_INFINITY&e&&1<n-s&&n-s<9&&"-Infinity".startsWith(t.substring(s))?(s+=9,-1/0):t.substring(s,s+3)==="NaN"||It.NAN&e&&n-s<3&&"NaN".startsWith(t.substring(s))?(s+=3,NaN):g()),d=()=>{const v=s;let _=!1;for(s++;s<n&&(t[s]!=='"'||_&&t[s-1]==="\\");)_=t[s]==="\\"?!_:!1,s++;if(t.charAt(s)=='"')try{return JSON.parse(t.substring(v,++s-Number(_)))}catch(x){l(String(x))}else if(It.STR&e)try{return JSON.parse(t.substring(v,s-Number(_))+'"')}catch{return JSON.parse(t.substring(v,t.lastIndexOf("\\"))+'"')}a("Unterminated string literal")},f=()=>{s++,p();const v={};try{for(;t[s]!=="}";){if(p(),s>=n&&It.OBJ&e)return v;const _=d();p(),s++;try{const x=c();Object.defineProperty(v,_,{value:x,writable:!0,enumerable:!0,configurable:!0})}catch(x){if(It.OBJ&e)return v;throw x}p(),t[s]===","&&s++}}catch{if(It.OBJ&e)return v;a("Expected '}' at end of object")}return s++,v},h=()=>{s++;const v=[];try{for(;t[s]!=="]";)v.push(c()),p(),t[s]===","&&s++}catch{if(It.ARR&e)return v;a("Expected ']' at end of array")}return s++,v},g=()=>{if(s===0){t==="-"&&It.NUM&e&&a("Not sure what '-' is");try{return JSON.parse(t)}catch(_){if(It.NUM&e)try{return t[t.length-1]==="."?JSON.parse(t.substring(0,t.lastIndexOf("."))):JSON.parse(t.substring(0,t.lastIndexOf("e")))}catch{}l(String(_))}}const v=s;for(t[s]==="-"&&s++;t[s]&&!",]}".includes(t[s]);)s++;s==n&&!(It.NUM&e)&&a("Unterminated number literal");try{return JSON.parse(t.substring(v,s))}catch{t.substring(v,s)==="-"&&It.NUM&e&&a("Not sure what '-' is");try{return JSON.parse(t.substring(v,t.lastIndexOf("e")))}catch(x){l(String(x))}}},p=()=>{for(;s<n&&` 
\r	`.includes(t[s]);)s++};return c()},Dx=t=>e4(t,It.ALL^It.NUM);var kt,Vr,Ta,Us,bp,nd,_p,wp,xp,rd,Sp,Ux;class Gl extends BC{constructor(e){super(),kt.add(this),Vr.set(this,void 0),Ta.set(this,void 0),Us.set(this,void 0),$e(this,Vr,e),$e(this,Ta,[])}get currentChatCompletionSnapshot(){return re(this,Us,"f")}static fromReadableStream(e){const n=new Gl(null);return n._run(()=>n._fromReadableStream(e)),n}static createChatCompletion(e,n,s){const a=new Gl(n);return a._run(()=>a._runChatCompletion(e,{...n,stream:!0},{...s,headers:{...s?.headers,"X-Stainless-Helper-Method":"stream"}})),a}async _createChatCompletion(e,n,s){super._createChatCompletion;const a=s?.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",()=>this.controller.abort())),re(this,kt,"m",bp).call(this);const l=await e.chat.completions.create({...n,stream:!0},{...s,signal:this.controller.signal});this._connected();for await(const c of l)re(this,kt,"m",_p).call(this,c);if(l.controller.signal?.aborted)throw new Hn;return this._addChatCompletion(re(this,kt,"m",rd).call(this))}async _fromReadableStream(e,n){const s=n?.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort())),re(this,kt,"m",bp).call(this),this._connected();const a=pr.fromReadableStream(e,this.controller);let l;for await(const c of a)l&&l!==c.id&&this._addChatCompletion(re(this,kt,"m",rd).call(this)),re(this,kt,"m",_p).call(this,c),l=c.id;if(a.controller.signal?.aborted)throw new Hn;return this._addChatCompletion(re(this,kt,"m",rd).call(this))}[(Vr=new WeakMap,Ta=new WeakMap,Us=new WeakMap,kt=new WeakSet,bp=function(){this.ended||$e(this,Us,void 0)},nd=function(n){let s=re(this,Ta,"f")[n.index];return s||(s={content_done:!1,refusal_done:!1,logprobs_content_done:!1,logprobs_refusal_done:!1,done_tool_calls:new Set,current_tool_call_index:null},re(this,Ta,"f")[n.index]=s,s)},_p=function(n){if(this.ended)return;const s=re(this,kt,"m",Ux).call(this,n);this._emit("chunk",n,s);for(const a of n.choices){const l=s.choices[a.index];a.delta.content!=null&&l.message?.role==="assistant"&&l.message?.content&&(this._emit("content",a.delta.content,l.message.content),this._emit("content.delta",{delta:a.delta.content,snapshot:l.message.content,parsed:l.message.parsed})),a.delta.refusal!=null&&l.message?.role==="assistant"&&l.message?.refusal&&this._emit("refusal.delta",{delta:a.delta.refusal,snapshot:l.message.refusal}),a.logprobs?.content!=null&&l.message?.role==="assistant"&&this._emit("logprobs.content.delta",{content:a.logprobs?.content,snapshot:l.logprobs?.content??[]}),a.logprobs?.refusal!=null&&l.message?.role==="assistant"&&this._emit("logprobs.refusal.delta",{refusal:a.logprobs?.refusal,snapshot:l.logprobs?.refusal??[]});const c=re(this,kt,"m",nd).call(this,l);l.finish_reason&&(re(this,kt,"m",xp).call(this,l),c.current_tool_call_index!=null&&re(this,kt,"m",wp).call(this,l,c.current_tool_call_index));for(const d of a.delta.tool_calls??[])c.current_tool_call_index!==d.index&&(re(this,kt,"m",xp).call(this,l),c.current_tool_call_index!=null&&re(this,kt,"m",wp).call(this,l,c.current_tool_call_index)),c.current_tool_call_index=d.index;for(const d of a.delta.tool_calls??[]){const f=l.message.tool_calls?.[d.index];f?.type&&(f?.type==="function"?this._emit("tool_calls.function.arguments.delta",{name:f.function?.name,index:d.index,arguments:f.function.arguments,parsed_arguments:f.function.parsed_arguments,arguments_delta:d.function?.arguments??""}):(f?.type,void 0))}}},wp=function(n,s){if(re(this,kt,"m",nd).call(this,n).done_tool_calls.has(s))return;const l=n.message.tool_calls?.[s];if(!l)throw new Error("no tool call snapshot");if(!l.type)throw new Error("tool call snapshot missing `type`");if(l.type==="function"){const c=re(this,Vr,"f")?.tools?.find(d=>Vd(d)&&d.function.name===l.function.name);this._emit("tool_calls.function.arguments.done",{name:l.function.name,index:s,arguments:l.function.arguments,parsed_arguments:oc(c)?c.$parseRaw(l.function.arguments):c?.function.strict?JSON.parse(l.function.arguments):null})}else l.type},xp=function(n){const s=re(this,kt,"m",nd).call(this,n);if(n.message.content&&!s.content_done){s.content_done=!0;const a=re(this,kt,"m",Sp).call(this);this._emit("content.done",{content:n.message.content,parsed:a?a.$parseRaw(n.message.content):null})}n.message.refusal&&!s.refusal_done&&(s.refusal_done=!0,this._emit("refusal.done",{refusal:n.message.refusal})),n.logprobs?.content&&!s.logprobs_content_done&&(s.logprobs_content_done=!0,this._emit("logprobs.content.done",{content:n.logprobs.content})),n.logprobs?.refusal&&!s.logprobs_refusal_done&&(s.logprobs_refusal_done=!0,this._emit("logprobs.refusal.done",{refusal:n.logprobs.refusal}))},rd=function(){if(this.ended)throw new je("stream has ended, this shouldn't happen");const n=re(this,Us,"f");if(!n)throw new je("request ended without sending any chunks");return $e(this,Us,void 0),$e(this,Ta,[]),n4(n,re(this,Vr,"f"))},Sp=function(){const n=re(this,Vr,"f")?.response_format;return ny(n)?n:null},Ux=function(n){var s,a,l,c;let d=re(this,Us,"f");const{choices:f,...h}=n;d?Object.assign(d,h):d=$e(this,Us,{...h,choices:[]});for(const{delta:g,finish_reason:p,index:v,logprobs:_=null,...x}of n.choices){let w=d.choices[v];if(w||(w=d.choices[v]={finish_reason:p,index:v,message:{},logprobs:_,...x}),_)if(!w.logprobs)w.logprobs=Object.assign({},_);else{const{content:R,refusal:D,...I}=_;Object.assign(w.logprobs,I),R&&((s=w.logprobs).content??(s.content=[]),w.logprobs.content.push(...R)),D&&((a=w.logprobs).refusal??(a.refusal=[]),w.logprobs.refusal.push(...D))}if(p&&(w.finish_reason=p,re(this,Vr,"f")&&DC(re(this,Vr,"f")))){if(p==="length")throw new pC;if(p==="content_filter")throw new gC}if(Object.assign(w,x),!g)continue;const{content:S,refusal:C,function_call:N,role:E,tool_calls:A,...j}=g;if(Object.assign(w.message,j),C&&(w.message.refusal=(w.message.refusal||"")+C),E&&(w.message.role=E),N&&(w.message.function_call?(N.name&&(w.message.function_call.name=N.name),N.arguments&&((l=w.message.function_call).arguments??(l.arguments=""),w.message.function_call.arguments+=N.arguments)):w.message.function_call=N),S&&(w.message.content=(w.message.content||"")+S,!w.message.refusal&&re(this,kt,"m",Sp).call(this)&&(w.message.parsed=Dx(w.message.content))),A){w.message.tool_calls||(w.message.tool_calls=[]);for(const{index:R,id:D,type:I,function:q,...Q}of A){const G=(c=w.message.tool_calls)[R]??(c[R]={});Object.assign(G,Q),D&&(G.id=D),I&&(G.type=I),q&&(G.function??(G.function={name:q.name??"",arguments:""})),q?.name&&(G.function.name=q.name),q?.arguments&&(G.function.arguments+=q.arguments,Gz(re(this,Vr,"f"),G)&&(G.function.parsed_arguments=Dx(G.function.arguments)))}}}return d},Symbol.asyncIterator)](){const e=[],n=[];let s=!1;return this.on("chunk",a=>{const l=n.shift();l?l.resolve(a):e.push(a)}),this.on("end",()=>{s=!0;for(const a of n)a.resolve(void 0);n.length=0}),this.on("abort",a=>{s=!0;for(const l of n)l.reject(a);n.length=0}),this.on("error",a=>{s=!0;for(const l of n)l.reject(a);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:s?{value:void 0,done:!0}:new Promise((l,c)=>n.push({resolve:l,reject:c})).then(l=>l?{value:l,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new pr(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}function n4(t,e){const{id:n,choices:s,created:a,model:l,system_fingerprint:c,...d}=t,f={...d,id:n,choices:s.map(({message:h,finish_reason:g,index:p,logprobs:v,..._})=>{if(!g)throw new je(`missing finish_reason for choice ${p}`);const{content:x=null,function_call:w,tool_calls:S,...C}=h,N=h.role;if(!N)throw new je(`missing role for choice ${p}`);if(w){const{arguments:E,name:A}=w;if(E==null)throw new je(`missing function_call.arguments for choice ${p}`);if(!A)throw new je(`missing function_call.name for choice ${p}`);return{..._,message:{content:x,function_call:{arguments:E,name:A},role:N,refusal:h.refusal??null},finish_reason:g,index:p,logprobs:v}}return S?{..._,index:p,finish_reason:g,logprobs:v,message:{...C,role:N,content:x,refusal:h.refusal??null,tool_calls:S.map((E,A)=>{const{function:j,type:R,id:D,...I}=E,{arguments:q,name:Q,...G}=j||{};if(D==null)throw new je(`missing choices[${p}].tool_calls[${A}].id
${sd(t)}`);if(R==null)throw new je(`missing choices[${p}].tool_calls[${A}].type
${sd(t)}`);if(Q==null)throw new je(`missing choices[${p}].tool_calls[${A}].function.name
${sd(t)}`);if(q==null)throw new je(`missing choices[${p}].tool_calls[${A}].function.arguments
${sd(t)}`);return{...I,id:D,type:R,function:{...G,name:Q,arguments:q}}})}}:{..._,message:{...C,content:x,role:N,refusal:h.refusal??null},finish_reason:g,index:p,logprobs:v}}),created:a,model:l,object:"chat.completion",...c?{system_fingerprint:c}:{}};return Vz(f,e)}function sd(t){return JSON.stringify(t)}class Kd extends Gl{static fromReadableStream(e){const n=new Kd(null);return n._run(()=>n._fromReadableStream(e)),n}static runTools(e,n,s){const a=new Kd(n),l={...s,headers:{...s?.headers,"X-Stainless-Helper-Method":"runTools"}};return a._run(()=>a._runTools(e,n,l)),a}}let ay=class extends Te{constructor(){super(...arguments),this.messages=new MC(this._client)}create(e,n){return this._client.post("/chat/completions",{body:e,...n,stream:e.stream??!1})}retrieve(e,n){return this._client.get(ye`/chat/completions/${e}`,n)}update(e,n,s){return this._client.post(ye`/chat/completions/${e}`,{body:n,...s})}list(e={},n){return this._client.getAPIList("/chat/completions",Nt,{query:e,...n})}delete(e,n){return this._client.delete(ye`/chat/completions/${e}`,n)}parse(e,n){return Xz(e.tools),this._client.chat.completions.create(e,{...n,headers:{...n?.headers,"X-Stainless-Helper-Method":"chat.completions.parse"}})._thenUnwrap(s=>ry(s,e))}runTools(e,n){return e.stream?Kd.runTools(this._client,e,n):iy.runTools(this._client,e,n)}stream(e,n){return Gl.createChatCompletion(this._client,e,n)}};ay.Messages=MC;class oy extends Te{constructor(){super(...arguments),this.completions=new ay(this._client)}}oy.Completions=ay;const eA=Symbol("brand.privateNullableHeaders");function*r4(t){if(!t)return;if(eA in t){const{values:s,nulls:a}=t;yield*s.entries();for(const l of a)yield[l,null];return}let e=!1,n;t instanceof Headers?n=t.entries():bx(t)?n=t:(e=!0,n=Object.entries(t??{}));for(let s of n){const a=s[0];if(typeof a!="string")throw new TypeError("expected header name to be a string");const l=bx(s[1])?s[1]:[s[1]];let c=!1;for(const d of l)d!==void 0&&(e&&!c&&(c=!0,yield[a,null]),yield[a,d])}}const Se=t=>{const e=new Headers,n=new Set;for(const s of t){const a=new Set;for(const[l,c]of r4(s)){const d=l.toLowerCase();a.has(d)||(e.delete(l),a.add(d)),c===null?(e.delete(l),n.add(d)):(e.append(l,c),n.delete(d))}}return{[eA]:!0,values:e,nulls:n}};class tA extends Te{create(e,n){return this._client.post("/audio/speech",{body:e,...n,headers:Se([{Accept:"application/octet-stream"},n?.headers]),__binaryResponse:!0})}}class nA extends Te{create(e,n){return this._client.post("/audio/transcriptions",Oi({body:e,...n,stream:e.stream??!1,__metadata:{model:e.model}},this._client))}}class rA extends Te{create(e,n){return this._client.post("/audio/translations",Oi({body:e,...n,__metadata:{model:e.model}},this._client))}}class lc extends Te{constructor(){super(...arguments),this.transcriptions=new nA(this._client),this.translations=new rA(this._client),this.speech=new tA(this._client)}}lc.Transcriptions=nA;lc.Translations=rA;lc.Speech=tA;class sA extends Te{create(e,n){return this._client.post("/batches",{body:e,...n})}retrieve(e,n){return this._client.get(ye`/batches/${e}`,n)}list(e={},n){return this._client.getAPIList("/batches",Nt,{query:e,...n})}cancel(e,n){return this._client.post(ye`/batches/${e}/cancel`,n)}}class iA extends Te{create(e,n){return this._client.post("/assistants",{body:e,...n,headers:Se([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}retrieve(e,n){return this._client.get(ye`/assistants/${e}`,{...n,headers:Se([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}update(e,n,s){return this._client.post(ye`/assistants/${e}`,{body:n,...s,headers:Se([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}list(e={},n){return this._client.getAPIList("/assistants",Nt,{query:e,...n,headers:Se([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}delete(e,n){return this._client.delete(ye`/assistants/${e}`,{...n,headers:Se([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}}let aA=class extends Te{create(e,n){return this._client.post("/realtime/sessions",{body:e,...n,headers:Se([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}};class oA extends Te{create(e,n){return this._client.post("/realtime/transcription_sessions",{body:e,...n,headers:Se([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}}let wf=class extends Te{constructor(){super(...arguments),this.sessions=new aA(this._client),this.transcriptionSessions=new oA(this._client)}};wf.Sessions=aA;wf.TranscriptionSessions=oA;class lA extends Te{create(e,n){return this._client.post("/chatkit/sessions",{body:e,...n,headers:Se([{"OpenAI-Beta":"chatkit_beta=v1"},n?.headers])})}cancel(e,n){return this._client.post(ye`/chatkit/sessions/${e}/cancel`,{...n,headers:Se([{"OpenAI-Beta":"chatkit_beta=v1"},n?.headers])})}}let cA=class extends Te{retrieve(e,n){return this._client.get(ye`/chatkit/threads/${e}`,{...n,headers:Se([{"OpenAI-Beta":"chatkit_beta=v1"},n?.headers])})}list(e={},n){return this._client.getAPIList("/chatkit/threads",Hd,{query:e,...n,headers:Se([{"OpenAI-Beta":"chatkit_beta=v1"},n?.headers])})}delete(e,n){return this._client.delete(ye`/chatkit/threads/${e}`,{...n,headers:Se([{"OpenAI-Beta":"chatkit_beta=v1"},n?.headers])})}listItems(e,n={},s){return this._client.getAPIList(ye`/chatkit/threads/${e}/items`,Hd,{query:n,...s,headers:Se([{"OpenAI-Beta":"chatkit_beta=v1"},s?.headers])})}};class xf extends Te{constructor(){super(...arguments),this.sessions=new lA(this._client),this.threads=new cA(this._client)}}xf.Sessions=lA;xf.Threads=cA;class uA extends Te{create(e,n,s){return this._client.post(ye`/threads/${e}/messages`,{body:n,...s,headers:Se([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}retrieve(e,n,s){const{thread_id:a}=n;return this._client.get(ye`/threads/${a}/messages/${e}`,{...s,headers:Se([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}update(e,n,s){const{thread_id:a,...l}=n;return this._client.post(ye`/threads/${a}/messages/${e}`,{body:l,...s,headers:Se([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}list(e,n={},s){return this._client.getAPIList(ye`/threads/${e}/messages`,Nt,{query:n,...s,headers:Se([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}delete(e,n,s){const{thread_id:a}=n;return this._client.delete(ye`/threads/${a}/messages/${e}`,{...s,headers:Se([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}}class dA extends Te{retrieve(e,n,s){const{thread_id:a,run_id:l,...c}=n;return this._client.get(ye`/threads/${a}/runs/${l}/steps/${e}`,{query:c,...s,headers:Se([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}list(e,n,s){const{thread_id:a,...l}=n;return this._client.getAPIList(ye`/threads/${a}/runs/${e}/steps`,Nt,{query:l,...s,headers:Se([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}}const s4=t=>{if(typeof Buffer<"u"){const e=Buffer.from(t,"base64");return Array.from(new Float32Array(e.buffer,e.byteOffset,e.length/Float32Array.BYTES_PER_ELEMENT))}else{const e=atob(t),n=e.length,s=new Uint8Array(n);for(let a=0;a<n;a++)s[a]=e.charCodeAt(a);return Array.from(new Float32Array(s.buffer))}};var i4={};const Na=t=>{if(typeof globalThis.process<"u")return i4?.[t]?.trim()??void 0;if(typeof globalThis.Deno<"u")return globalThis.Deno.env?.get?.(t)?.trim()};var Ft,wi,fg,hr,bd,Zn,xi,$a,yi,Qd,Tn,_d,wd,jl,wl,xl,Ix,$x,Lx,zx,Bx,Px,qx;class Rl extends sy{constructor(){super(...arguments),Ft.add(this),fg.set(this,[]),hr.set(this,{}),bd.set(this,{}),Zn.set(this,void 0),xi.set(this,void 0),$a.set(this,void 0),yi.set(this,void 0),Qd.set(this,void 0),Tn.set(this,void 0),_d.set(this,void 0),wd.set(this,void 0),jl.set(this,void 0)}[(fg=new WeakMap,hr=new WeakMap,bd=new WeakMap,Zn=new WeakMap,xi=new WeakMap,$a=new WeakMap,yi=new WeakMap,Qd=new WeakMap,Tn=new WeakMap,_d=new WeakMap,wd=new WeakMap,jl=new WeakMap,Ft=new WeakSet,Symbol.asyncIterator)](){const e=[],n=[];let s=!1;return this.on("event",a=>{const l=n.shift();l?l.resolve(a):e.push(a)}),this.on("end",()=>{s=!0;for(const a of n)a.resolve(void 0);n.length=0}),this.on("abort",a=>{s=!0;for(const l of n)l.reject(a);n.length=0}),this.on("error",a=>{s=!0;for(const l of n)l.reject(a);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:s?{value:void 0,done:!0}:new Promise((l,c)=>n.push({resolve:l,reject:c})).then(l=>l?{value:l,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}static fromReadableStream(e){const n=new wi;return n._run(()=>n._fromReadableStream(e)),n}async _fromReadableStream(e,n){const s=n?.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort())),this._connected();const a=pr.fromReadableStream(e,this.controller);for await(const l of a)re(this,Ft,"m",wl).call(this,l);if(a.controller.signal?.aborted)throw new Hn;return this._addRun(re(this,Ft,"m",xl).call(this))}toReadableStream(){return new pr(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}static createToolAssistantStream(e,n,s,a){const l=new wi;return l._run(()=>l._runToolAssistantStream(e,n,s,{...a,headers:{...a?.headers,"X-Stainless-Helper-Method":"stream"}})),l}async _createToolAssistantStream(e,n,s,a){const l=a?.signal;l&&(l.aborted&&this.controller.abort(),l.addEventListener("abort",()=>this.controller.abort()));const c={...s,stream:!0},d=await e.submitToolOutputs(n,c,{...a,signal:this.controller.signal});this._connected();for await(const f of d)re(this,Ft,"m",wl).call(this,f);if(d.controller.signal?.aborted)throw new Hn;return this._addRun(re(this,Ft,"m",xl).call(this))}static createThreadAssistantStream(e,n,s){const a=new wi;return a._run(()=>a._threadAssistantStream(e,n,{...s,headers:{...s?.headers,"X-Stainless-Helper-Method":"stream"}})),a}static createAssistantStream(e,n,s,a){const l=new wi;return l._run(()=>l._runAssistantStream(e,n,s,{...a,headers:{...a?.headers,"X-Stainless-Helper-Method":"stream"}})),l}currentEvent(){return re(this,_d,"f")}currentRun(){return re(this,wd,"f")}currentMessageSnapshot(){return re(this,Zn,"f")}currentRunStepSnapshot(){return re(this,jl,"f")}async finalRunSteps(){return await this.done(),Object.values(re(this,hr,"f"))}async finalMessages(){return await this.done(),Object.values(re(this,bd,"f"))}async finalRun(){if(await this.done(),!re(this,xi,"f"))throw Error("Final run was not received.");return re(this,xi,"f")}async _createThreadAssistantStream(e,n,s){const a=s?.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",()=>this.controller.abort()));const l={...n,stream:!0},c=await e.createAndRun(l,{...s,signal:this.controller.signal});this._connected();for await(const d of c)re(this,Ft,"m",wl).call(this,d);if(c.controller.signal?.aborted)throw new Hn;return this._addRun(re(this,Ft,"m",xl).call(this))}async _createAssistantStream(e,n,s,a){const l=a?.signal;l&&(l.aborted&&this.controller.abort(),l.addEventListener("abort",()=>this.controller.abort()));const c={...s,stream:!0},d=await e.create(n,c,{...a,signal:this.controller.signal});this._connected();for await(const f of d)re(this,Ft,"m",wl).call(this,f);if(d.controller.signal?.aborted)throw new Hn;return this._addRun(re(this,Ft,"m",xl).call(this))}static accumulateDelta(e,n){for(const[s,a]of Object.entries(n)){if(!e.hasOwnProperty(s)){e[s]=a;continue}let l=e[s];if(l==null){e[s]=a;continue}if(s==="index"||s==="type"){e[s]=a;continue}if(typeof l=="string"&&typeof a=="string")l+=a;else if(typeof l=="number"&&typeof a=="number")l+=a;else if(gp(l)&&gp(a))l=this.accumulateDelta(l,a);else if(Array.isArray(l)&&Array.isArray(a)){if(l.every(c=>typeof c=="string"||typeof c=="number")){l.push(...a);continue}for(const c of a){if(!gp(c))throw new Error(`Expected array delta entry to be an object but got: ${c}`);const d=c.index;if(d==null)throw console.error(c),new Error("Expected array delta entry to have an `index` property");if(typeof d!="number")throw new Error(`Expected array delta entry \`index\` property to be a number but got ${d}`);const f=l[d];f==null?l.push(c):l[d]=this.accumulateDelta(f,c)}continue}else throw Error(`Unhandled record type: ${s}, deltaValue: ${a}, accValue: ${l}`);e[s]=l}return e}_addRun(e){return e}async _threadAssistantStream(e,n,s){return await this._createThreadAssistantStream(n,e,s)}async _runAssistantStream(e,n,s,a){return await this._createAssistantStream(n,e,s,a)}async _runToolAssistantStream(e,n,s,a){return await this._createToolAssistantStream(n,e,s,a)}}wi=Rl,wl=function(e){if(!this.ended)switch($e(this,_d,e),re(this,Ft,"m",Lx).call(this,e),e.event){case"thread.created":break;case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.requires_action":case"thread.run.completed":case"thread.run.incomplete":case"thread.run.failed":case"thread.run.cancelling":case"thread.run.cancelled":case"thread.run.expired":re(this,Ft,"m",qx).call(this,e);break;case"thread.run.step.created":case"thread.run.step.in_progress":case"thread.run.step.delta":case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":re(this,Ft,"m",$x).call(this,e);break;case"thread.message.created":case"thread.message.in_progress":case"thread.message.delta":case"thread.message.completed":case"thread.message.incomplete":re(this,Ft,"m",Ix).call(this,e);break;case"error":throw new Error("Encountered an error event in event processing - errors should be processed earlier")}},xl=function(){if(this.ended)throw new je("stream has ended, this shouldn't happen");if(!re(this,xi,"f"))throw Error("Final run has not been received");return re(this,xi,"f")},Ix=function(e){const[n,s]=re(this,Ft,"m",Bx).call(this,e,re(this,Zn,"f"));$e(this,Zn,n),re(this,bd,"f")[n.id]=n;for(const a of s){const l=n.content[a.index];l?.type=="text"&&this._emit("textCreated",l.text)}switch(e.event){case"thread.message.created":this._emit("messageCreated",e.data);break;case"thread.message.in_progress":break;case"thread.message.delta":if(this._emit("messageDelta",e.data.delta,n),e.data.delta.content)for(const a of e.data.delta.content){if(a.type=="text"&&a.text){let l=a.text,c=n.content[a.index];if(c&&c.type=="text")this._emit("textDelta",l,c.text);else throw Error("The snapshot associated with this text delta is not text or missing")}if(a.index!=re(this,$a,"f")){if(re(this,yi,"f"))switch(re(this,yi,"f").type){case"text":this._emit("textDone",re(this,yi,"f").text,re(this,Zn,"f"));break;case"image_file":this._emit("imageFileDone",re(this,yi,"f").image_file,re(this,Zn,"f"));break}$e(this,$a,a.index)}$e(this,yi,n.content[a.index])}break;case"thread.message.completed":case"thread.message.incomplete":if(re(this,$a,"f")!==void 0){const a=e.data.content[re(this,$a,"f")];if(a)switch(a.type){case"image_file":this._emit("imageFileDone",a.image_file,re(this,Zn,"f"));break;case"text":this._emit("textDone",a.text,re(this,Zn,"f"));break}}re(this,Zn,"f")&&this._emit("messageDone",e.data),$e(this,Zn,void 0)}},$x=function(e){const n=re(this,Ft,"m",zx).call(this,e);switch($e(this,jl,n),e.event){case"thread.run.step.created":this._emit("runStepCreated",e.data);break;case"thread.run.step.delta":const s=e.data.delta;if(s.step_details&&s.step_details.type=="tool_calls"&&s.step_details.tool_calls&&n.step_details.type=="tool_calls")for(const l of s.step_details.tool_calls)l.index==re(this,Qd,"f")?this._emit("toolCallDelta",l,n.step_details.tool_calls[l.index]):(re(this,Tn,"f")&&this._emit("toolCallDone",re(this,Tn,"f")),$e(this,Qd,l.index),$e(this,Tn,n.step_details.tool_calls[l.index]),re(this,Tn,"f")&&this._emit("toolCallCreated",re(this,Tn,"f")));this._emit("runStepDelta",e.data.delta,n);break;case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":$e(this,jl,void 0),e.data.step_details.type=="tool_calls"&&re(this,Tn,"f")&&(this._emit("toolCallDone",re(this,Tn,"f")),$e(this,Tn,void 0)),this._emit("runStepDone",e.data,n);break}},Lx=function(e){re(this,fg,"f").push(e),this._emit("event",e)},zx=function(e){switch(e.event){case"thread.run.step.created":return re(this,hr,"f")[e.data.id]=e.data,e.data;case"thread.run.step.delta":let n=re(this,hr,"f")[e.data.id];if(!n)throw Error("Received a RunStepDelta before creation of a snapshot");let s=e.data;if(s.delta){const a=wi.accumulateDelta(n,s.delta);re(this,hr,"f")[e.data.id]=a}return re(this,hr,"f")[e.data.id];case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":case"thread.run.step.in_progress":re(this,hr,"f")[e.data.id]=e.data;break}if(re(this,hr,"f")[e.data.id])return re(this,hr,"f")[e.data.id];throw new Error("No snapshot available")},Bx=function(e,n){let s=[];switch(e.event){case"thread.message.created":return[e.data,s];case"thread.message.delta":if(!n)throw Error("Received a delta with no existing snapshot (there should be one from message creation)");let a=e.data;if(a.delta.content)for(const l of a.delta.content)if(l.index in n.content){let c=n.content[l.index];n.content[l.index]=re(this,Ft,"m",Px).call(this,l,c)}else n.content[l.index]=l,s.push(l);return[n,s];case"thread.message.in_progress":case"thread.message.completed":case"thread.message.incomplete":if(n)return[n,s];throw Error("Received thread message event with no existing snapshot")}throw Error("Tried to accumulate a non-message event")},Px=function(e,n){return wi.accumulateDelta(n,e)},qx=function(e){switch($e(this,wd,e.data),e.event){case"thread.run.created":break;case"thread.run.queued":break;case"thread.run.in_progress":break;case"thread.run.requires_action":case"thread.run.cancelled":case"thread.run.failed":case"thread.run.completed":case"thread.run.expired":case"thread.run.incomplete":$e(this,xi,e.data),re(this,Tn,"f")&&(this._emit("toolCallDone",re(this,Tn,"f")),$e(this,Tn,void 0));break}};let ly=class extends Te{constructor(){super(...arguments),this.steps=new dA(this._client)}create(e,n,s){const{include:a,...l}=n;return this._client.post(ye`/threads/${e}/runs`,{query:{include:a},body:l,...s,headers:Se([{"OpenAI-Beta":"assistants=v2"},s?.headers]),stream:n.stream??!1})}retrieve(e,n,s){const{thread_id:a}=n;return this._client.get(ye`/threads/${a}/runs/${e}`,{...s,headers:Se([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}update(e,n,s){const{thread_id:a,...l}=n;return this._client.post(ye`/threads/${a}/runs/${e}`,{body:l,...s,headers:Se([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}list(e,n={},s){return this._client.getAPIList(ye`/threads/${e}/runs`,Nt,{query:n,...s,headers:Se([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}cancel(e,n,s){const{thread_id:a}=n;return this._client.post(ye`/threads/${a}/runs/${e}/cancel`,{...s,headers:Se([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}async createAndPoll(e,n,s){const a=await this.create(e,n,s);return await this.poll(a.id,{thread_id:e},s)}createAndStream(e,n,s){return Rl.createAssistantStream(e,this._client.beta.threads.runs,n,s)}async poll(e,n,s){const a=Se([s?.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":s?.pollIntervalMs?.toString()??void 0}]);for(;;){const{data:l,response:c}=await this.retrieve(e,n,{...s,headers:{...s?.headers,...a}}).withResponse();switch(l.status){case"queued":case"in_progress":case"cancelling":let d=5e3;if(s?.pollIntervalMs)d=s.pollIntervalMs;else{const f=c.headers.get("openai-poll-after-ms");if(f){const h=parseInt(f);isNaN(h)||(d=h)}}await ac(d);break;case"requires_action":case"incomplete":case"cancelled":case"completed":case"failed":case"expired":return l}}}stream(e,n,s){return Rl.createAssistantStream(e,this._client.beta.threads.runs,n,s)}submitToolOutputs(e,n,s){const{thread_id:a,...l}=n;return this._client.post(ye`/threads/${a}/runs/${e}/submit_tool_outputs`,{body:l,...s,headers:Se([{"OpenAI-Beta":"assistants=v2"},s?.headers]),stream:n.stream??!1})}async submitToolOutputsAndPoll(e,n,s){const a=await this.submitToolOutputs(e,n,s);return await this.poll(a.id,n,s)}submitToolOutputsStream(e,n,s){return Rl.createToolAssistantStream(e,this._client.beta.threads.runs,n,s)}};ly.Steps=dA;class Sf extends Te{constructor(){super(...arguments),this.runs=new ly(this._client),this.messages=new uA(this._client)}create(e={},n){return this._client.post("/threads",{body:e,...n,headers:Se([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}retrieve(e,n){return this._client.get(ye`/threads/${e}`,{...n,headers:Se([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}update(e,n,s){return this._client.post(ye`/threads/${e}`,{body:n,...s,headers:Se([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}delete(e,n){return this._client.delete(ye`/threads/${e}`,{...n,headers:Se([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}createAndRun(e,n){return this._client.post("/threads/runs",{body:e,...n,headers:Se([{"OpenAI-Beta":"assistants=v2"},n?.headers]),stream:e.stream??!1})}async createAndRunPoll(e,n){const s=await this.createAndRun(e,n);return await this.runs.poll(s.id,{thread_id:s.thread_id},n)}createAndRunStream(e,n){return Rl.createThreadAssistantStream(e,this._client.beta.threads,n)}}Sf.Runs=ly;Sf.Messages=uA;class Za extends Te{constructor(){super(...arguments),this.realtime=new wf(this._client),this.chatkit=new xf(this._client),this.assistants=new iA(this._client),this.threads=new Sf(this._client)}}Za.Realtime=wf;Za.ChatKit=xf;Za.Assistants=iA;Za.Threads=Sf;class fA extends Te{create(e,n){return this._client.post("/completions",{body:e,...n,stream:e.stream??!1})}}class hA extends Te{retrieve(e,n,s){const{container_id:a}=n;return this._client.get(ye`/containers/${a}/files/${e}/content`,{...s,headers:Se([{Accept:"application/binary"},s?.headers]),__binaryResponse:!0})}}let cy=class extends Te{constructor(){super(...arguments),this.content=new hA(this._client)}create(e,n,s){return this._client.post(ye`/containers/${e}/files`,Oi({body:n,...s},this._client))}retrieve(e,n,s){const{container_id:a}=n;return this._client.get(ye`/containers/${a}/files/${e}`,s)}list(e,n={},s){return this._client.getAPIList(ye`/containers/${e}/files`,Nt,{query:n,...s})}delete(e,n,s){const{container_id:a}=n;return this._client.delete(ye`/containers/${a}/files/${e}`,{...s,headers:Se([{Accept:"*/*"},s?.headers])})}};cy.Content=hA;class uy extends Te{constructor(){super(...arguments),this.files=new cy(this._client)}create(e,n){return this._client.post("/containers",{body:e,...n})}retrieve(e,n){return this._client.get(ye`/containers/${e}`,n)}list(e={},n){return this._client.getAPIList("/containers",Nt,{query:e,...n})}delete(e,n){return this._client.delete(ye`/containers/${e}`,{...n,headers:Se([{Accept:"*/*"},n?.headers])})}}uy.Files=cy;class mA extends Te{create(e,n,s){const{include:a,...l}=n;return this._client.post(ye`/conversations/${e}/items`,{query:{include:a},body:l,...s})}retrieve(e,n,s){const{conversation_id:a,...l}=n;return this._client.get(ye`/conversations/${a}/items/${e}`,{query:l,...s})}list(e,n={},s){return this._client.getAPIList(ye`/conversations/${e}/items`,Hd,{query:n,...s})}delete(e,n,s){const{conversation_id:a}=n;return this._client.delete(ye`/conversations/${a}/items/${e}`,s)}}class dy extends Te{constructor(){super(...arguments),this.items=new mA(this._client)}create(e={},n){return this._client.post("/conversations",{body:e,...n})}retrieve(e,n){return this._client.get(ye`/conversations/${e}`,n)}update(e,n,s){return this._client.post(ye`/conversations/${e}`,{body:n,...s})}delete(e,n){return this._client.delete(ye`/conversations/${e}`,n)}}dy.Items=mA;class pA extends Te{create(e,n){const s=!!e.encoding_format;let a=s?e.encoding_format:"base64";s&&Vt(this._client).debug("embeddings/user defined encoding_format:",e.encoding_format);const l=this._client.post("/embeddings",{body:{...e,encoding_format:a},...n});return s?l:(Vt(this._client).debug("embeddings/decoding base64 embeddings from base64"),l._thenUnwrap(c=>(c&&c.data&&c.data.forEach(d=>{const f=d.embedding;d.embedding=s4(f)}),c)))}}class gA extends Te{retrieve(e,n,s){const{eval_id:a,run_id:l}=n;return this._client.get(ye`/evals/${a}/runs/${l}/output_items/${e}`,s)}list(e,n,s){const{eval_id:a,...l}=n;return this._client.getAPIList(ye`/evals/${a}/runs/${e}/output_items`,Nt,{query:l,...s})}}class fy extends Te{constructor(){super(...arguments),this.outputItems=new gA(this._client)}create(e,n,s){return this._client.post(ye`/evals/${e}/runs`,{body:n,...s})}retrieve(e,n,s){const{eval_id:a}=n;return this._client.get(ye`/evals/${a}/runs/${e}`,s)}list(e,n={},s){return this._client.getAPIList(ye`/evals/${e}/runs`,Nt,{query:n,...s})}delete(e,n,s){const{eval_id:a}=n;return this._client.delete(ye`/evals/${a}/runs/${e}`,s)}cancel(e,n,s){const{eval_id:a}=n;return this._client.post(ye`/evals/${a}/runs/${e}`,s)}}fy.OutputItems=gA;class hy extends Te{constructor(){super(...arguments),this.runs=new fy(this._client)}create(e,n){return this._client.post("/evals",{body:e,...n})}retrieve(e,n){return this._client.get(ye`/evals/${e}`,n)}update(e,n,s){return this._client.post(ye`/evals/${e}`,{body:n,...s})}list(e={},n){return this._client.getAPIList("/evals",Nt,{query:e,...n})}delete(e,n){return this._client.delete(ye`/evals/${e}`,n)}}hy.Runs=fy;let yA=class extends Te{create(e,n){return this._client.post("/files",Oi({body:e,...n},this._client))}retrieve(e,n){return this._client.get(ye`/files/${e}`,n)}list(e={},n){return this._client.getAPIList("/files",Nt,{query:e,...n})}delete(e,n){return this._client.delete(ye`/files/${e}`,n)}content(e,n){return this._client.get(ye`/files/${e}/content`,{...n,headers:Se([{Accept:"application/binary"},n?.headers]),__binaryResponse:!0})}async waitForProcessing(e,{pollInterval:n=5e3,maxWait:s=1800*1e3}={}){const a=new Set(["processed","error","deleted"]),l=Date.now();let c=await this.retrieve(e);for(;!c.status||!a.has(c.status);)if(await ac(n),c=await this.retrieve(e),Date.now()-l>s)throw new Jg({message:`Giving up on waiting for file ${e} to finish processing after ${s} milliseconds.`});return c}};class vA extends Te{}let bA=class extends Te{run(e,n){return this._client.post("/fine_tuning/alpha/graders/run",{body:e,...n})}validate(e,n){return this._client.post("/fine_tuning/alpha/graders/validate",{body:e,...n})}};class my extends Te{constructor(){super(...arguments),this.graders=new bA(this._client)}}my.Graders=bA;class _A extends Te{create(e,n,s){return this._client.getAPIList(ye`/fine_tuning/checkpoints/${e}/permissions`,_f,{body:n,method:"post",...s})}retrieve(e,n={},s){return this._client.get(ye`/fine_tuning/checkpoints/${e}/permissions`,{query:n,...s})}delete(e,n,s){const{fine_tuned_model_checkpoint:a}=n;return this._client.delete(ye`/fine_tuning/checkpoints/${a}/permissions/${e}`,s)}}let py=class extends Te{constructor(){super(...arguments),this.permissions=new _A(this._client)}};py.Permissions=_A;class wA extends Te{list(e,n={},s){return this._client.getAPIList(ye`/fine_tuning/jobs/${e}/checkpoints`,Nt,{query:n,...s})}}class gy extends Te{constructor(){super(...arguments),this.checkpoints=new wA(this._client)}create(e,n){return this._client.post("/fine_tuning/jobs",{body:e,...n})}retrieve(e,n){return this._client.get(ye`/fine_tuning/jobs/${e}`,n)}list(e={},n){return this._client.getAPIList("/fine_tuning/jobs",Nt,{query:e,...n})}cancel(e,n){return this._client.post(ye`/fine_tuning/jobs/${e}/cancel`,n)}listEvents(e,n={},s){return this._client.getAPIList(ye`/fine_tuning/jobs/${e}/events`,Nt,{query:n,...s})}pause(e,n){return this._client.post(ye`/fine_tuning/jobs/${e}/pause`,n)}resume(e,n){return this._client.post(ye`/fine_tuning/jobs/${e}/resume`,n)}}gy.Checkpoints=wA;class eo extends Te{constructor(){super(...arguments),this.methods=new vA(this._client),this.jobs=new gy(this._client),this.checkpoints=new py(this._client),this.alpha=new my(this._client)}}eo.Methods=vA;eo.Jobs=gy;eo.Checkpoints=py;eo.Alpha=my;class xA extends Te{}class yy extends Te{constructor(){super(...arguments),this.graderModels=new xA(this._client)}}yy.GraderModels=xA;class SA extends Te{createVariation(e,n){return this._client.post("/images/variations",Oi({body:e,...n},this._client))}edit(e,n){return this._client.post("/images/edits",Oi({body:e,...n,stream:e.stream??!1},this._client))}generate(e,n){return this._client.post("/images/generations",{body:e,...n,stream:e.stream??!1})}}class EA extends Te{retrieve(e,n){return this._client.get(ye`/models/${e}`,n)}list(e){return this._client.getAPIList("/models",_f,e)}delete(e,n){return this._client.delete(ye`/models/${e}`,n)}}class CA extends Te{create(e,n){return this._client.post("/moderations",{body:e,...n})}}class AA extends Te{accept(e,n,s){return this._client.post(ye`/realtime/calls/${e}/accept`,{body:n,...s,headers:Se([{Accept:"*/*"},s?.headers])})}hangup(e,n){return this._client.post(ye`/realtime/calls/${e}/hangup`,{...n,headers:Se([{Accept:"*/*"},n?.headers])})}refer(e,n,s){return this._client.post(ye`/realtime/calls/${e}/refer`,{body:n,...s,headers:Se([{Accept:"*/*"},s?.headers])})}reject(e,n={},s){return this._client.post(ye`/realtime/calls/${e}/reject`,{body:n,...s,headers:Se([{Accept:"*/*"},s?.headers])})}}class TA extends Te{create(e,n){return this._client.post("/realtime/client_secrets",{body:e,...n})}}class Ef extends Te{constructor(){super(...arguments),this.clientSecrets=new TA(this._client),this.calls=new AA(this._client)}}Ef.ClientSecrets=TA;Ef.Calls=AA;function a4(t,e){return!e||!l4(e)?{...t,output_parsed:null,output:t.output.map(n=>n.type==="function_call"?{...n,parsed_arguments:null}:n.type==="message"?{...n,content:n.content.map(s=>({...s,parsed:null}))}:n)}:NA(t,e)}function NA(t,e){const n=t.output.map(a=>{if(a.type==="function_call")return{...a,parsed_arguments:d4(e,a)};if(a.type==="message"){const l=a.content.map(c=>c.type==="output_text"?{...c,parsed:o4(e,c.text)}:c);return{...a,content:l}}return a}),s=Object.assign({},t,{output:n});return Object.getOwnPropertyDescriptor(t,"output_text")||hg(s),Object.defineProperty(s,"output_parsed",{enumerable:!0,get(){for(const a of s.output)if(a.type==="message"){for(const l of a.content)if(l.type==="output_text"&&l.parsed!==null)return l.parsed}return null}}),s}function o4(t,e){return t.text?.format?.type!=="json_schema"?null:"$parseRaw"in t.text?.format?(t.text?.format).$parseRaw(e):JSON.parse(e)}function l4(t){return!!ny(t.text?.format)}function c4(t){return t?.$brand==="auto-parseable-tool"}function u4(t,e){return t.find(n=>n.type==="function"&&n.name===e)}function d4(t,e){const n=u4(t.tools??[],e.name);return{...e,...e,parsed_arguments:c4(n)?n.$parseRaw(e.arguments):n?.strict?JSON.parse(e.arguments):null}}function hg(t){const e=[];for(const n of t.output)if(n.type==="message")for(const s of n.content)s.type==="output_text"&&e.push(s.text);t.output_text=e.join("")}var Oa,id,Is,ad,Hx,Vx,Fx,Yx;class vy extends sy{constructor(e){super(),Oa.add(this),id.set(this,void 0),Is.set(this,void 0),ad.set(this,void 0),$e(this,id,e)}static createResponse(e,n,s){const a=new vy(n);return a._run(()=>a._createOrRetrieveResponse(e,n,{...s,headers:{...s?.headers,"X-Stainless-Helper-Method":"stream"}})),a}async _createOrRetrieveResponse(e,n,s){const a=s?.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",()=>this.controller.abort())),re(this,Oa,"m",Hx).call(this);let l,c=null;"response_id"in n?(l=await e.responses.retrieve(n.response_id,{stream:!0},{...s,signal:this.controller.signal,stream:!0}),c=n.starting_after??null):l=await e.responses.create({...n,stream:!0},{...s,signal:this.controller.signal}),this._connected();for await(const d of l)re(this,Oa,"m",Vx).call(this,d,c);if(l.controller.signal?.aborted)throw new Hn;return re(this,Oa,"m",Fx).call(this)}[(id=new WeakMap,Is=new WeakMap,ad=new WeakMap,Oa=new WeakSet,Hx=function(){this.ended||$e(this,Is,void 0)},Vx=function(n,s){if(this.ended)return;const a=(c,d)=>{(s==null||d.sequence_number>s)&&this._emit(c,d)},l=re(this,Oa,"m",Yx).call(this,n);switch(a("event",n),n.type){case"response.output_text.delta":{const c=l.output[n.output_index];if(!c)throw new je(`missing output at index ${n.output_index}`);if(c.type==="message"){const d=c.content[n.content_index];if(!d)throw new je(`missing content at index ${n.content_index}`);if(d.type!=="output_text")throw new je(`expected content to be 'output_text', got ${d.type}`);a("response.output_text.delta",{...n,snapshot:d.text})}break}case"response.function_call_arguments.delta":{const c=l.output[n.output_index];if(!c)throw new je(`missing output at index ${n.output_index}`);c.type==="function_call"&&a("response.function_call_arguments.delta",{...n,snapshot:c.arguments});break}default:a(n.type,n);break}},Fx=function(){if(this.ended)throw new je("stream has ended, this shouldn't happen");const n=re(this,Is,"f");if(!n)throw new je("request ended without sending any events");$e(this,Is,void 0);const s=f4(n,re(this,id,"f"));return $e(this,ad,s),s},Yx=function(n){let s=re(this,Is,"f");if(!s){if(n.type!=="response.created")throw new je(`When snapshot hasn't been set yet, expected 'response.created' event, got ${n.type}`);return s=$e(this,Is,n.response),s}switch(n.type){case"response.output_item.added":{s.output.push(n.item);break}case"response.content_part.added":{const a=s.output[n.output_index];if(!a)throw new je(`missing output at index ${n.output_index}`);const l=a.type,c=n.part;l==="message"&&c.type!=="reasoning_text"?a.content.push(c):l==="reasoning"&&c.type==="reasoning_text"&&(a.content||(a.content=[]),a.content.push(c));break}case"response.output_text.delta":{const a=s.output[n.output_index];if(!a)throw new je(`missing output at index ${n.output_index}`);if(a.type==="message"){const l=a.content[n.content_index];if(!l)throw new je(`missing content at index ${n.content_index}`);if(l.type!=="output_text")throw new je(`expected content to be 'output_text', got ${l.type}`);l.text+=n.delta}break}case"response.function_call_arguments.delta":{const a=s.output[n.output_index];if(!a)throw new je(`missing output at index ${n.output_index}`);a.type==="function_call"&&(a.arguments+=n.delta);break}case"response.reasoning_text.delta":{const a=s.output[n.output_index];if(!a)throw new je(`missing output at index ${n.output_index}`);if(a.type==="reasoning"){const l=a.content?.[n.content_index];if(!l)throw new je(`missing content at index ${n.content_index}`);if(l.type!=="reasoning_text")throw new je(`expected content to be 'reasoning_text', got ${l.type}`);l.text+=n.delta}break}case"response.completed":{$e(this,Is,n.response);break}}return s},Symbol.asyncIterator)](){const e=[],n=[];let s=!1;return this.on("event",a=>{const l=n.shift();l?l.resolve(a):e.push(a)}),this.on("end",()=>{s=!0;for(const a of n)a.resolve(void 0);n.length=0}),this.on("abort",a=>{s=!0;for(const l of n)l.reject(a);n.length=0}),this.on("error",a=>{s=!0;for(const l of n)l.reject(a);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:s?{value:void 0,done:!0}:new Promise((l,c)=>n.push({resolve:l,reject:c})).then(l=>l?{value:l,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}async finalResponse(){await this.done();const e=re(this,ad,"f");if(!e)throw new je("stream ended without producing a ChatCompletion");return e}}function f4(t,e){return a4(t,e)}class OA extends Te{list(e,n={},s){return this._client.getAPIList(ye`/responses/${e}/input_items`,Nt,{query:n,...s})}}class jA extends Te{count(e={},n){return this._client.post("/responses/input_tokens",{body:e,...n})}}class Cf extends Te{constructor(){super(...arguments),this.inputItems=new OA(this._client),this.inputTokens=new jA(this._client)}create(e,n){return this._client.post("/responses",{body:e,...n,stream:e.stream??!1})._thenUnwrap(s=>("object"in s&&s.object==="response"&&hg(s),s))}retrieve(e,n={},s){return this._client.get(ye`/responses/${e}`,{query:n,...s,stream:n?.stream??!1})._thenUnwrap(a=>("object"in a&&a.object==="response"&&hg(a),a))}delete(e,n){return this._client.delete(ye`/responses/${e}`,{...n,headers:Se([{Accept:"*/*"},n?.headers])})}parse(e,n){return this._client.responses.create(e,n)._thenUnwrap(s=>NA(s,e))}stream(e,n){return vy.createResponse(this._client,e,n)}cancel(e,n){return this._client.post(ye`/responses/${e}/cancel`,n)}}Cf.InputItems=OA;Cf.InputTokens=jA;class RA extends Te{create(e,n,s){return this._client.post(ye`/uploads/${e}/parts`,Oi({body:n,...s},this._client))}}class by extends Te{constructor(){super(...arguments),this.parts=new RA(this._client)}create(e,n){return this._client.post("/uploads",{body:e,...n})}cancel(e,n){return this._client.post(ye`/uploads/${e}/cancel`,n)}complete(e,n,s){return this._client.post(ye`/uploads/${e}/complete`,{body:n,...s})}}by.Parts=RA;const h4=async t=>{const e=await Promise.allSettled(t),n=e.filter(a=>a.status==="rejected");if(n.length){for(const a of n)console.error(a.reason);throw new Error(`${n.length} promise(s) failed - see the above errors`)}const s=[];for(const a of e)a.status==="fulfilled"&&s.push(a.value);return s};class kA extends Te{create(e,n,s){return this._client.post(ye`/vector_stores/${e}/file_batches`,{body:n,...s,headers:Se([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}retrieve(e,n,s){const{vector_store_id:a}=n;return this._client.get(ye`/vector_stores/${a}/file_batches/${e}`,{...s,headers:Se([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}cancel(e,n,s){const{vector_store_id:a}=n;return this._client.post(ye`/vector_stores/${a}/file_batches/${e}/cancel`,{...s,headers:Se([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}async createAndPoll(e,n,s){const a=await this.create(e,n);return await this.poll(e,a.id,s)}listFiles(e,n,s){const{vector_store_id:a,...l}=n;return this._client.getAPIList(ye`/vector_stores/${a}/file_batches/${e}/files`,Nt,{query:l,...s,headers:Se([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}async poll(e,n,s){const a=Se([s?.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":s?.pollIntervalMs?.toString()??void 0}]);for(;;){const{data:l,response:c}=await this.retrieve(n,{vector_store_id:e},{...s,headers:a}).withResponse();switch(l.status){case"in_progress":let d=5e3;if(s?.pollIntervalMs)d=s.pollIntervalMs;else{const f=c.headers.get("openai-poll-after-ms");if(f){const h=parseInt(f);isNaN(h)||(d=h)}}await ac(d);break;case"failed":case"cancelled":case"completed":return l}}}async uploadAndPoll(e,{files:n,fileIds:s=[]},a){if(n==null||n.length==0)throw new Error("No `files` provided to process. If you've already uploaded files you should use `.createAndPoll()` instead");const l=a?.maxConcurrency??5,c=Math.min(l,n.length),d=this._client,f=n.values(),h=[...s];async function g(v){for(let _ of v){const x=await d.files.create({file:_,purpose:"assistants"},a);h.push(x.id)}}const p=Array(c).fill(f).map(g);return await h4(p),await this.createAndPoll(e,{file_ids:h})}}class MA extends Te{create(e,n,s){return this._client.post(ye`/vector_stores/${e}/files`,{body:n,...s,headers:Se([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}retrieve(e,n,s){const{vector_store_id:a}=n;return this._client.get(ye`/vector_stores/${a}/files/${e}`,{...s,headers:Se([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}update(e,n,s){const{vector_store_id:a,...l}=n;return this._client.post(ye`/vector_stores/${a}/files/${e}`,{body:l,...s,headers:Se([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}list(e,n={},s){return this._client.getAPIList(ye`/vector_stores/${e}/files`,Nt,{query:n,...s,headers:Se([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}delete(e,n,s){const{vector_store_id:a}=n;return this._client.delete(ye`/vector_stores/${a}/files/${e}`,{...s,headers:Se([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}async createAndPoll(e,n,s){const a=await this.create(e,n,s);return await this.poll(e,a.id,s)}async poll(e,n,s){const a=Se([s?.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":s?.pollIntervalMs?.toString()??void 0}]);for(;;){const l=await this.retrieve(n,{vector_store_id:e},{...s,headers:a}).withResponse(),c=l.data;switch(c.status){case"in_progress":let d=5e3;if(s?.pollIntervalMs)d=s.pollIntervalMs;else{const f=l.response.headers.get("openai-poll-after-ms");if(f){const h=parseInt(f);isNaN(h)||(d=h)}}await ac(d);break;case"failed":case"completed":return c}}}async upload(e,n,s){const a=await this._client.files.create({file:n,purpose:"assistants"},s);return this.create(e,{file_id:a.id},s)}async uploadAndPoll(e,n,s){const a=await this.upload(e,n,s);return await this.poll(e,a.id,s)}content(e,n,s){const{vector_store_id:a}=n;return this._client.getAPIList(ye`/vector_stores/${a}/files/${e}/content`,_f,{...s,headers:Se([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}}class Af extends Te{constructor(){super(...arguments),this.files=new MA(this._client),this.fileBatches=new kA(this._client)}create(e,n){return this._client.post("/vector_stores",{body:e,...n,headers:Se([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}retrieve(e,n){return this._client.get(ye`/vector_stores/${e}`,{...n,headers:Se([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}update(e,n,s){return this._client.post(ye`/vector_stores/${e}`,{body:n,...s,headers:Se([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}list(e={},n){return this._client.getAPIList("/vector_stores",Nt,{query:e,...n,headers:Se([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}delete(e,n){return this._client.delete(ye`/vector_stores/${e}`,{...n,headers:Se([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}search(e,n,s){return this._client.getAPIList(ye`/vector_stores/${e}/search`,_f,{body:n,method:"post",...s,headers:Se([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}}Af.Files=MA;Af.FileBatches=kA;class DA extends Te{create(e,n){return this._client.post("/videos",Rx({body:e,...n},this._client))}retrieve(e,n){return this._client.get(ye`/videos/${e}`,n)}list(e={},n){return this._client.getAPIList("/videos",Hd,{query:e,...n})}delete(e,n){return this._client.delete(ye`/videos/${e}`,n)}downloadContent(e,n={},s){return this._client.get(ye`/videos/${e}/content`,{query:n,...s,headers:Se([{Accept:"application/binary"},s?.headers]),__binaryResponse:!0})}remix(e,n,s){return this._client.post(ye`/videos/${e}/remix`,Rx({body:n,...s},this._client))}}var Da,UA,xd;class IA extends Te{constructor(){super(...arguments),Da.add(this)}async unwrap(e,n,s=this._client.webhookSecret,a=300){return await this.verifySignature(e,n,s,a),JSON.parse(e)}async verifySignature(e,n,s=this._client.webhookSecret,a=300){if(typeof crypto>"u"||typeof crypto.subtle.importKey!="function"||typeof crypto.subtle.verify!="function")throw new Error("Webhook signature verification is only supported when the `crypto` global is defined");re(this,Da,"m",UA).call(this,s);const l=Se([n]).values,c=re(this,Da,"m",xd).call(this,l,"webhook-signature"),d=re(this,Da,"m",xd).call(this,l,"webhook-timestamp"),f=re(this,Da,"m",xd).call(this,l,"webhook-id"),h=parseInt(d,10);if(isNaN(h))throw new ml("Invalid webhook timestamp format");const g=Math.floor(Date.now()/1e3);if(g-h>a)throw new ml("Webhook timestamp is too old");if(h>g+a)throw new ml("Webhook timestamp is too new");const p=c.split(" ").map(w=>w.startsWith("v1,")?w.substring(3):w),v=s.startsWith("whsec_")?Buffer.from(s.replace("whsec_",""),"base64"):Buffer.from(s,"utf-8"),_=f?`${f}.${d}.${e}`:`${d}.${e}`,x=await crypto.subtle.importKey("raw",v,{name:"HMAC",hash:"SHA-256"},!1,["verify"]);for(const w of p)try{const S=Buffer.from(w,"base64");if(await crypto.subtle.verify("HMAC",x,S,new TextEncoder().encode(_)))return}catch{continue}throw new ml("The given webhook signature does not match the expected signature")}}Da=new WeakSet,UA=function(e){if(typeof e!="string"||e.length===0)throw new Error("The webhook secret must either be set using the env var, OPENAI_WEBHOOK_SECRET, on the client class, OpenAI({ webhookSecret: '123' }), or passed to this function")},xd=function(e,n){if(!e)throw new Error("Headers are required");const s=e.get(n);if(s==null)throw new Error(`Missing required header: ${n}`);return s};var mg,_y,Sd,$A;class Pe{constructor({baseURL:e=Na("OPENAI_BASE_URL"),apiKey:n=Na("OPENAI_API_KEY"),organization:s=Na("OPENAI_ORG_ID")??null,project:a=Na("OPENAI_PROJECT_ID")??null,webhookSecret:l=Na("OPENAI_WEBHOOK_SECRET")??null,...c}={}){if(mg.add(this),Sd.set(this,void 0),this.completions=new fA(this),this.chat=new oy(this),this.embeddings=new pA(this),this.files=new yA(this),this.images=new SA(this),this.audio=new lc(this),this.moderations=new CA(this),this.models=new EA(this),this.fineTuning=new eo(this),this.graders=new yy(this),this.vectorStores=new Af(this),this.webhooks=new IA(this),this.beta=new Za(this),this.batches=new sA(this),this.uploads=new by(this),this.responses=new Cf(this),this.realtime=new Ef(this),this.conversations=new dy(this),this.evals=new hy(this),this.containers=new uy(this),this.videos=new DA(this),n===void 0)throw new je("Missing credentials. Please pass an `apiKey`, or set the `OPENAI_API_KEY` environment variable.");const d={apiKey:n,organization:s,project:a,webhookSecret:l,...c,baseURL:e||"https://api.openai.com/v1"};if(!d.dangerouslyAllowBrowser&&mz())throw new je(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new OpenAI({ apiKey, dangerouslyAllowBrowser: true });

https://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety
`);this.baseURL=d.baseURL,this.timeout=d.timeout??_y.DEFAULT_TIMEOUT,this.logger=d.logger??console;const f="warn";this.logLevel=f,this.logLevel=Ox(d.logLevel,"ClientOptions.logLevel",this)??Ox(Na("OPENAI_LOG"),"process.env['OPENAI_LOG']",this)??f,this.fetchOptions=d.fetchOptions,this.maxRetries=d.maxRetries??2,this.fetch=d.fetch??bz(),$e(this,Sd,wz),this._options=d,this.apiKey=typeof n=="string"?n:"Missing Key",this.organization=s,this.project=a,this.webhookSecret=l}withOptions(e){return new this.constructor({...this._options,baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,organization:this.organization,project:this.project,webhookSecret:this.webhookSecret,...e})}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:n}){}async authHeaders(e){return Se([{Authorization:`Bearer ${this.apiKey}`}])}stringifyQuery(e){return Tz(e,{arrayFormat:"brackets"})}getUserAgent(){return`${this.constructor.name}/JS ${ka}`}defaultIdempotencyKey(){return`stainless-node-retry-${aC()}`}makeStatusError(e,n,s,a){return Gt.generate(e,n,s,a)}async _callApiKey(){const e=this._options.apiKey;if(typeof e!="function")return!1;let n;try{n=await e()}catch(s){throw s instanceof je?s:new je(`Failed to get token from 'apiKey' function: ${s.message}`,{cause:s})}if(typeof n!="string"||!n)throw new je(`Expected 'apiKey' function argument to return a string but it returned ${n}`);return this.apiKey=n,!0}buildURL(e,n,s){const a=!re(this,mg,"m",$A).call(this)&&s||this.baseURL,l=cz(e)?new URL(e):new URL(a+(a.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),c=this.defaultQuery();return uz(c)||(n={...c,...n}),typeof n=="object"&&n&&!Array.isArray(n)&&(l.search=this.stringifyQuery(n)),l.toString()}async prepareOptions(e){await this._callApiKey()}async prepareRequest(e,{url:n,options:s}){}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,s){return this.request(Promise.resolve(s).then(a=>({method:e,path:n,...a})))}request(e,n=null){return new bf(this,this.makeRequest(e,n,void 0))}async makeRequest(e,n,s){const a=await e,l=a.maxRetries??this.maxRetries;n==null&&(n=l),await this.prepareOptions(a);const{req:c,url:d,timeout:f}=await this.buildRequest(a,{retryCount:l-n});await this.prepareRequest(c,{url:d,options:a});const h="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),g=s===void 0?"":`, retryOf: ${s}`,p=Date.now();if(Vt(this).debug(`[${h}] sending request`,mi({retryOfRequestLogID:s,method:a.method,url:d,options:a,headers:c.headers})),a.signal?.aborted)throw new Hn;const v=new AbortController,_=await this.fetchWithTimeout(d,c,f,v).catch(ng),x=Date.now();if(_ instanceof globalThis.Error){const C=`retrying, ${n} attempts remaining`;if(a.signal?.aborted)throw new Hn;const N=tg(_)||/timed? ?out/i.test(String(_)+("cause"in _?String(_.cause):""));if(n)return Vt(this).info(`[${h}] connection ${N?"timed out":"failed"} - ${C}`),Vt(this).debug(`[${h}] connection ${N?"timed out":"failed"} (${C})`,mi({retryOfRequestLogID:s,url:d,durationMs:x-p,message:_.message})),this.retryRequest(a,n,s??h);throw Vt(this).info(`[${h}] connection ${N?"timed out":"failed"} - error; no more retries left`),Vt(this).debug(`[${h}] connection ${N?"timed out":"failed"} (error; no more retries left)`,mi({retryOfRequestLogID:s,url:d,durationMs:x-p,message:_.message})),N?new Jg:new yf({cause:_})}const w=[..._.headers.entries()].filter(([C])=>C==="x-request-id").map(([C,N])=>", "+C+": "+JSON.stringify(N)).join(""),S=`[${h}${g}${w}] ${c.method} ${d} ${_.ok?"succeeded":"failed"} with status ${_.status} in ${x-p}ms`;if(!_.ok){const C=await this.shouldRetry(_);if(n&&C){const D=`retrying, ${n} attempts remaining`;return await _z(_.body),Vt(this).info(`${S} - ${D}`),Vt(this).debug(`[${h}] response error (${D})`,mi({retryOfRequestLogID:s,url:_.url,status:_.status,headers:_.headers,durationMs:x-p})),this.retryRequest(a,n,s??h,_.headers)}const N=C?"error; no more retries left":"error; not retryable";Vt(this).info(`${S} - ${N}`);const E=await _.text().catch(D=>ng(D).message),A=hz(E),j=A?void 0:E;throw Vt(this).debug(`[${h}] response error (${N})`,mi({retryOfRequestLogID:s,url:_.url,status:_.status,headers:_.headers,message:j,durationMs:Date.now()-p})),this.makeStatusError(_.status,A,j,_.headers)}return Vt(this).info(S),Vt(this).debug(`[${h}] response start`,mi({retryOfRequestLogID:s,url:_.url,status:_.status,headers:_.headers,durationMs:x-p})),{response:_,options:a,controller:v,requestLogID:h,retryOfRequestLogID:s,startTime:p}}getAPIList(e,n,s){return this.requestAPIList(n,{method:"get",path:e,...s})}requestAPIList(e,n){const s=this.makeRequest(n,null,void 0);return new Iz(this,s,e)}async fetchWithTimeout(e,n,s,a){const{signal:l,method:c,...d}=n||{};l&&l.addEventListener("abort",()=>a.abort());const f=setTimeout(()=>a.abort(),s),h=globalThis.ReadableStream&&d.body instanceof globalThis.ReadableStream||typeof d.body=="object"&&d.body!==null&&Symbol.asyncIterator in d.body,g={signal:a.signal,...h?{duplex:"half"}:{},method:"GET",...d};c&&(g.method=c.toUpperCase());try{return await this.fetch.call(void 0,e,g)}finally{clearTimeout(f)}}async shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,s,a){let l;const c=a?.get("retry-after-ms");if(c){const f=parseFloat(c);Number.isNaN(f)||(l=f)}const d=a?.get("retry-after");if(d&&!l){const f=parseFloat(d);Number.isNaN(f)?l=Date.parse(d)-Date.now():l=f*1e3}if(!(l&&0<=l&&l<60*1e3)){const f=e.maxRetries??this.maxRetries;l=this.calculateDefaultRetryTimeoutMillis(n,f)}return await ac(l),this.makeRequest(e,n-1,s)}calculateDefaultRetryTimeoutMillis(e,n){const l=n-e,c=Math.min(.5*Math.pow(2,l),8),d=1-Math.random()*.25;return c*d*1e3}async buildRequest(e,{retryCount:n=0}={}){const s={...e},{method:a,path:l,query:c,defaultBaseURL:d}=s,f=this.buildURL(l,c,d);"timeout"in s&&fz("timeout",s.timeout),s.timeout=s.timeout??this.timeout;const{bodyHeaders:h,body:g}=this.buildBody({options:s}),p=await this.buildHeaders({options:e,method:a,bodyHeaders:h,retryCount:n});return{req:{method:a,headers:p,...s.signal&&{signal:s.signal},...globalThis.ReadableStream&&g instanceof globalThis.ReadableStream&&{duplex:"half"},...g&&{body:g},...this.fetchOptions??{},...s.fetchOptions??{}},url:f,timeout:s.timeout}}async buildHeaders({options:e,method:n,bodyHeaders:s,retryCount:a}){let l={};this.idempotencyHeader&&n!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),l[this.idempotencyHeader]=e.idempotencyKey);const c=Se([l,{Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(a),...e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{},...vz(),"OpenAI-Organization":this.organization,"OpenAI-Project":this.project},await this.authHeaders(e),this._options.defaultHeaders,s,e.headers]);return this.validateHeaders(c),c.values}buildBody({options:{body:e,headers:n}}){if(!e)return{bodyHeaders:void 0,body:void 0};const s=Se([n]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&s.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:bC(e)}:re(this,Sd,"f").call(this,{body:e,headers:s})}}_y=Pe,Sd=new WeakMap,mg=new WeakSet,$A=function(){return this.baseURL!=="https://api.openai.com/v1"};Pe.OpenAI=_y;Pe.DEFAULT_TIMEOUT=6e5;Pe.OpenAIError=je;Pe.APIError=Gt;Pe.APIConnectionError=yf;Pe.APIConnectionTimeoutError=Jg;Pe.APIUserAbortError=Hn;Pe.NotFoundError=uC;Pe.ConflictError=dC;Pe.RateLimitError=hC;Pe.BadRequestError=oC;Pe.AuthenticationError=lC;Pe.InternalServerError=mC;Pe.PermissionDeniedError=cC;Pe.UnprocessableEntityError=fC;Pe.InvalidWebhookSignatureError=ml;Pe.toFile=Pz;Pe.Completions=fA;Pe.Chat=oy;Pe.Embeddings=pA;Pe.Files=yA;Pe.Images=SA;Pe.Audio=lc;Pe.Moderations=CA;Pe.Models=EA;Pe.FineTuning=eo;Pe.Graders=yy;Pe.VectorStores=Af;Pe.Webhooks=IA;Pe.Beta=Za;Pe.Batches=sA;Pe.Uploads=by;Pe.Responses=Cf;Pe.Realtime=Ef;Pe.Conversations=dy;Pe.Evals=hy;Pe.Containers=uy;Pe.Videos=DA;function m4(){const{projectId:t,ep_id:e,setEpId:n,setDeepseekProvider:s,updateEmbodyCache:a,embodyCache:l}=Zr(),[c,d]=O.useState(null),[f,h]=O.useState([]),[g,p]=O.useState(!1),[v,_]=O.useState(""),[x,w]=O.useState("");Ps();let S=[];O.useEffect(()=>{t&&(d(""),Re.from("movie_eps").select("*").eq("project_id",t).order("index",{ascending:!0}).then(({data:L,error:X})=>{if(X){d(X.message);return}h(L),console.log(L)}),Re.from("LLM").select("*").eq("provider_name","deepseek").single().then(({data:L,error:X})=>{if(X){d(X.message);return}s(L)}))},[t]);const C=()=>{p(!0)},N=()=>{if(!x.trim()){d("");return}const L=document.createElement("input");L.type="file",L.accept=".json",L.onchange=E,L.click()},E=L=>{const X=L.target.files[0];if(X){const $=new FileReader;$.readAsText(X,"utf-8"),$.onload=F=>{const M=F.target.result;try{const z=JSON.parse(M);console.log(z),q(z)}catch(z){console.error("JSON :",z)}}}},A=L=>{n(L),localStorage.setItem("epId",L),Yt.emit("changeEditorMode","shot")},j=()=>{p(!1),_(""),w(""),d(null)},[R,D]=O.useState(!1),I=async(L,X,$)=>{let F=[];console.log(S);for(let M of X){let z=S.find(H=>H.name===M);if(z)F.push(z.id);else{const{data:H,error:P}=await Re.from("embodys").insert([{project_id:t,name:M,type:"character"}]).select("id, name,type").single();if(P){d(P.message);return}F.push(H.id),S.push(H)}}{let M=S.find(z=>z.name===L);if(M)F.push(M.id);else{const{data:z,error:H}=await Re.from("embodys").insert([{project_id:t,name:L,type:"scene"}]).select("id, name,type").single();if(H){d(H.message);return}F.push(z.id),S.push(z)}}for(let M of $){let z=S.find(H=>H.name===M);if(z)F.push(z.id);else{const{data:H,error:P}=await Re.from("embodys").insert([{project_id:t,name:M,type:"item"}]).select("id, name,type").single();if(P){d(P.message);return}F.push(H.id),S.push(H)}}return F},q=async L=>{D(!0),await a(),S=Object.values(l);try{const{data:X,error:$}=await Re.from("movie_eps").insert([{project_id:t,title:L.episode_name,description:L.description,index:parseInt(x)}]).select("*").single();if($)throw $;if(L.sc&&Array.isArray(L.sc))for(let F=0;F<L.sc.length;F++){const M=L.sc[F],{data:z,error:H}=await Re.from("movie_scs").insert([{ep_id:X.id,name:M.scene_name,description:M.description,index:F+1}]).select("*").single();if(H){console.error(":",H),D(!1);continue}if(console.log(` ${M.scene_name} `),M.seq)for(let P=0;P<M.seq.length;P++){const V=M.seq[P],{data:k,error:B}=await Re.from("movie_seqs").insert([{sc_id:z.id,name:V.sequence_name,index:P+1}]).select("*").single();if(B){console.error(":",B),D(!1);continue}console.log(` ${V.sequence_name} ${V.shots.length}  ${k.id}`);for(let W=0;W<V.shots.length;W++){const ee=V.shots[W],{data:he,error:ge}=await Re.from("movie_shots").insert([{seq_id:k.id,description:ee.description,index:W+1,prompt:ee.prompt,duration:parseFloat(ee.duration),dialogue:ee.dialogue,embodys:await I(ee.scene,ee.Character,ee.Prop)}]).select("*").single()}}}h([...f,X]),j(),await a()}catch(X){d(": "+X.message)}finally{D(!1)}},Q=async()=>{if(!x.trim()){d("");return}const L=parseInt(x);if(f.find($=>$.index===L)){d(`${L}`);return}D(!0),d(null);try{let $=!1,F={};if(!$){const z=await(await fetch("./test_story.json",{})).json();console.log("testData:",z),F=z}return}catch($){d(": "+$.message)}finally{D(!1)}},G=async L=>{try{const{error:X}=await Re.from("movie_eps").delete().eq("id",L.id);if(X)throw X;h(f.filter($=>$.id!==L.id))}catch(X){d(": "+X.message)}finally{}};return b.jsxs("div",{className:"ep-editor-container",children:[b.jsx("div",{className:"ep-editor-header",children:b.jsx("button",{className:"add-ep-button",onClick:C,children:"+ "})}),c&&b.jsx("div",{className:"error-message",children:b.jsx("p",{children:c})}),b.jsx("div",{className:"ep-list",children:f.length>0?f.map(L=>b.jsxs("div",{className:"ep-card",onClick:()=>A(L.id),children:[b.jsx("div",{className:"ep-thumbnail",children:L.pic?b.jsx("img",{src:L.pic,alt:L.title}):b.jsx("span",{children:""})}),b.jsxs("div",{className:"ep-content",children:[b.jsx("h3",{className:"ep-title",children:L.title||`EP ${L.index||""}`}),b.jsx("p",{className:"ep-description",children:L.description||""}),b.jsxs("div",{className:"ep-info",children:[b.jsxs("span",{children:["",L.index||"?",""]}),b.jsx("span",{children:L.created_at?new Date(L.created_at).toLocaleDateString():""})]})]}),b.jsx("div",{className:"delete-ep-button",children:b.jsx("button",{onClick:X=>{X.stopPropagation(),G(L)},children:""})})]},L.id)):b.jsxs("div",{className:"empty-state",children:[b.jsx("h3",{children:""}),b.jsx("p",{children:'""'})]})}),g&&b.jsx("div",{className:"modal-overlay",onClick:j,children:b.jsxs("div",{className:"modal-content",onClick:L=>L.stopPropagation(),children:[b.jsxs("div",{className:"modal-header",children:[b.jsx("h3",{children:""}),b.jsx("button",{className:"close-button",onClick:j,children:""})]}),c&&b.jsx("div",{className:"error-message",children:b.jsx("p",{children:c})}),b.jsxs("div",{className:"form-group",children:[b.jsx("label",{htmlFor:"ep-number",children:" *"}),b.jsx("input",{id:"ep-number",type:"number",value:x,onChange:L=>{const X=parseInt(L.target.value),$=f.find(F=>F.index===X);console.log($),$!=null?d(`${X}`):d(null),w(L.target.value)},placeholder:"",min:"1",required:!0})]}),b.jsxs("div",{className:"form-group",children:[b.jsx("label",{htmlFor:"ep-description",children:" *"}),b.jsx("textarea",{id:"ep-description",value:v,onChange:L=>_(L.target.value),placeholder:"",rows:"18"})]}),b.jsxs("div",{className:"modal-actions",children:[b.jsx("button",{className:"cancel-button",onClick:N,disabled:R,children:""}),b.jsx("button",{className:"cancel-button",onClick:j,children:""}),b.jsx("button",{className:"save-button",onClick:Q,disabled:R,children:R?"...":""})]})]})})]})}function p4(){const{projectId:t,setProjectId:e}=Zr(),[n,s]=O.useState(""),[a,l]=O.useState("script"),[c,d]=O.useState(""),[f,h]=O.useState(null),g=Ps();return O.useEffect(()=>{t&&(Yt.emit("StartEditorMode"),Re.from("projects").select("*").eq("id",t).single().then(({data:p,error:v})=>{v?(console.error(":",v),h(""),d("// : ")):s(p.name||"")}),Yt.on("changeEditorMode",p=>{l(p)}),Re.from("embodys").select("*").eq("project_id",t).then(({data:p,error:v})=>{v&&(console.error(":",v),h(""),d("// : "))}))},[t]),b.jsxs("div",{className:"editor-container",children:[f&&b.jsx("div",{className:"error-message",children:b.jsx("p",{children:f})}),b.jsxs("div",{className:"editor-header",children:[b.jsx("div",{className:"project_name",onClick:()=>{g("/dashboard"),Yt.emit("EndEditorMode"),e(null)},children:b.jsxs("h3",{children:["< ",n]})}),b.jsxs("div",{className:"editor-nav",children:[b.jsx("div",{className:`editor-nav-item ${a==="script"?"editor-nav-item-selected":""}`,onClick:()=>l("script"),children:""}),b.jsx("div",{className:`editor-nav-item ${a==="shot"?"editor-nav-item-selected":""}`,onClick:()=>l("shot"),children:""}),b.jsx("div",{className:`editor-nav-item ${a==="edit"?"editor-nav-item-selected":""}`,onClick:()=>l("edit"),children:""})]})]}),b.jsxs("div",{className:"editor-content",children:[a==="script"&&b.jsx(m4,{}),a==="shot"&&b.jsx(Fk,{}),a==="edit"&&b.jsx(oz,{})]})]})}function g4(){const{projectId:t}=Zr(),[e,n]=O.useState(!1),[s,a]=O.useState([]),[l,c]=O.useState([]),[d,f]=O.useState([]),[h,g]=O.useState(""),[p,v]=O.useState("all"),[_,x]=O.useState(!0),[w,S]=O.useState(""),[C,N]=O.useState([]),[E,A]=O.useState(""),j=O.useRef(null),[R,D]=O.useState(null),[I,q]=O.useState({type:"",name:"",pic:"",description:"",embody_images:[]}),[Q,G]=O.useState(!1),[L,X]=O.useState(!1),[$,F]=O.useState({project_id:t,type:"scene",name:"",prompt:"",description:"",pic:""}),[M,z]=O.useState(null),[H,P]=O.useState("");O.useEffect(()=>{if(!t){S("ID Embody"),x(!1);return}const ce=new AbortController;return k(ce),()=>{console.log("FetchEmboody:",ce.signal),ce.abort()}},[t]),O.useEffect(()=>{},[Q]);const V=(ce,ve)=>{const Me=C.filter(at=>at.type===ve);if(h.trim()==="")return Me;const Je=h.toLowerCase();return Me.filter(at=>at.name.toLowerCase().includes(Je)||at.description&&at.description.toLowerCase().includes(Je))},k=async ce=>{if(!t)return S("ID Embody"),alert("ID Embody"),x(!1),null;x(!0),S("");try{console.log(" ID:",t);const{data:ve}=await Re.from("embodys").select(`
                    *,
                    embody_images (
                        *
                    )
                `).abortSignal(ce.signal).eq("project_id",t);N(ve||[]),console.log(":",ve||[])}catch(ve){ve.name==="AbortError"?console.log("FetchEmboody:",ve):(console.error(":",ve),S(""))}finally{x(!1)}},B=ce=>{const ve=C.find(Me=>Me.id===ce);ve&&(console.log(":",ve),D(ce),q({id:ve.id,type:ve.type,name:ve.name||"",pic:ve.pic||"",description:ve.description||"",prompt:ve.prompt||"",embody_images:ve.embody_images||[]}))},W=async()=>{if(R)try{console.log(":",R,I);const{error:ce}=await Re.from("embodys").update({name:I.name,type:I.type,description:I.description,prompt:I.prompt}).eq("id",R);if(ce){console.error(":",ce),alert("");return}k(new AbortController),D(null)}catch(ce){console.error(":",ce),alert("")}},ee=async()=>{try{const ce=I.type==="scene"?"":I.type==="character"?"":"",ve=I.name||`${ce}`;alert("..."),await new Promise(Je=>setTimeout(Je,1e3));let Me="";I.type==="scene"?Me=`${ve}8K`:I.type==="character"?Me=`${ve}8K`:Me=`${ve}3D8K`,q({...I,prompt:Me}),alert("")}catch(ce){console.error(":",ce),alert("")}},he=()=>{j.current.click()},ge=async ce=>{const ve=Array.from(ce.target.files);if(ve.length>0){n(!0),console.log("Selected file:",ve),ve.forEach((ut,mn)=>{console.log(":",ut)}),console.log(I);let Me=ve.map(async(ut,mn)=>{const Zt=Date.now(),dt=ut.name.split(".").pop()||"",pn=`public/${t}/${I.type}/${Zt}_${mn}${dt?"."+dt:""}`;console.log(":",pn);const{data:kn,error:nn}=await Re.storage.from("embodys").upload(pn,ut,{cacheControl:"3600",upsert:!1});if(nn)throw console.error(":",nn),new Error(": "+nn.message);const{data:gn,error:_r}=await Re.from("embody_images").insert({description:$.description,path:pn,ref_id:I.id}).select("id, path").single();if(_r)throw console.error("embody-images:",_r),new Error("images: "+_r.message);return console.log(":",gn),{insertedDataId:gn.id,fileName:pn}});const Je=await Promise.all(Me);let at=Je.map(ut=>ut.insertedDataId),Lt=Je.map(ut=>({path:ut.fileName}));console.log("IDs:",at),console.log(":",Lt),q({...I,images:Lt}),n(!1),k(new AbortController)}},Z=async()=>{try{if(!I.prompt){alert("");return}alert("..."),await new Promise(ce=>setTimeout(ce,2e3)),alert(`
AI`)}catch(ce){console.error(":",ce),alert("")}},ie=async()=>{if(!$.name.trim()){alert("");return}if(!$.prompt.trim()){alert("");return}if(!$.description.trim()){alert("");return}if(!$.project_id&&($.project_id=globalData.projectId||localStorage.getItem("projectId"),!$.project_id)){alert("ID"),X(!1);return}try{let ce=$.pic,ve="";if(M){const Lt=Date.now(),ut=M.name.split(".").pop()||"";ve=`${$.project_id}/${$.type}s/${Lt}${ut?"."+ut:""}`,console.log(":",ve);const{data:mn,error:Zt}=await Re.storage.from("embodys").upload(ve,M,{cacheControl:"3600",upsert:!1});if(Zt)throw console.error(":",Zt),new Error(": "+Zt.message);const{data:{publicUrl:dt}}=await Re.storage.from("embodys").getPublicUrl(ve);ce=dt,console.log("URL:",ce)}const Me={...$,pic:ve};console.log(":",Me);const{data:Je,error:at}=await Re.from("embodys").insert([Me]);if(at)throw console.error(":",at),at;G(Lt=>!Lt),X(!1),F({project_id:globalData.projectId||localStorage.getItem("projectId"),type:"scene",name:"",prompt:"",description:"",pic:""}),z(null),P(""),document.getElementById("embody-file")&&(document.getElementById("embody-file").value=""),alert("")}catch(ce){console.error(":",ce),alert(""+(ce.message||""))}},oe=async(ce,ve)=>{if(window.confirm(`${ve==="scene"?"":ve==="character"?"":""}`))try{const{error:Me}=await Re.from("embodys").delete().eq("id",ce);if(Me)throw Me;console.log(":",ce),k(new AbortController)}catch(Me){console.error(":",Me)}},pe=(()=>{const ce=C.filter(Je=>Je.type==="scene").length,ve=C.filter(Je=>Je.type==="character").length,Me=C.filter(Je=>Je.type==="item").length;return{scene:ce,character:ve,item:Me,all:ce+ve+Me}})(),be=V(s,"scene"),_e=V(l,"character"),Ue=V(d,"item");return b.jsxs("div",{className:"embody-container",children:[b.jsxs("div",{className:"embody-left-panel",children:[b.jsxs("div",{className:"embody-header",children:[b.jsxs("div",{className:"header-left",children:[b.jsx("h2",{children:""}),b.jsxs("p",{className:"total-count",children:[E," -  ",pe.all," "]})]}),b.jsxs("div",{className:"header-right",children:[b.jsx("input",{type:"file",multiple:!0,ref:j,style:{display:"none"},onChange:ge}),b.jsx("div",{className:"search-bar",children:b.jsx("input",{type:"text",placeholder:"...",value:h,onChange:ce=>g(ce.target.value)})})]})]}),b.jsxs("div",{className:"category-filter",children:[b.jsxs("button",{className:`filter-btn ${p==="all"?"active":""}`,onClick:()=>v("all"),children:[" (",pe.all,")"]}),b.jsxs("button",{className:`filter-btn ${p==="scene"?"active":""}`,onClick:()=>v("scene"),children:[" (",pe.scene,")"]}),b.jsxs("button",{className:`filter-btn ${p==="character"?"active":""}`,onClick:()=>v("character"),children:[" (",pe.character,")"]}),b.jsxs("button",{className:`filter-btn ${p==="item"?"active":""}`,onClick:()=>v("item"),children:[" (",pe.item,")"]}),b.jsx("button",{onClick:()=>X(!0),className:"add-embody-btn",children:""})]}),b.jsx("div",{className:"embody-content",children:_?b.jsxs("div",{className:"loading-container",children:[b.jsx("div",{className:"loading-spinner"}),b.jsx("p",{children:"..."})]}):w?b.jsxs("div",{className:"error-container",children:[b.jsx("p",{className:"error-message",children:w}),b.jsx("button",{className:"retry-btn",onClick:()=>k(new AbortController),children:""})]}):b.jsxs(b.Fragment,{children:[(p==="all"||p==="scene")&&be.length>0&&b.jsxs("div",{className:"category-section",children:[b.jsx("h3",{className:"section-title",children:""}),b.jsx("div",{className:"card-grid",children:be.map(ce=>b.jsx(cd,{id:ce.id,type:"scene",name:ce.name,pic:ce.embody_images,description:ce.description,onEdit:()=>B(ce.id),onDelete:()=>oe(ce.id,"scene")},ce.id))})]}),(p==="all"||p==="character")&&_e.length>0&&b.jsxs("div",{className:"category-section",children:[b.jsx("h3",{className:"section-title",children:""}),b.jsx("div",{className:"card-grid",children:_e.map(ce=>b.jsx(cd,{id:ce.id,type:"character",name:ce.name,pic:ce.embody_images,description:ce.description,onEdit:()=>B(ce.id),onDelete:()=>oe(ce.id,"character")},ce.id))})]}),(p==="all"||p==="item")&&Ue.length>0&&b.jsxs("div",{className:"category-section",children:[b.jsx("h3",{className:"section-title",children:""}),b.jsx("div",{className:"card-grid",children:Ue.map(ce=>b.jsx(cd,{id:ce.id,type:"item",name:ce.name,pic:ce.embody_images,description:ce.description,onEdit:()=>B(ce.id),onDelete:()=>oe(ce.id,"item")},ce.id))})]}),(p==="all"&&pe.all===0||p==="scene"&&be.length===0||p==="character"&&_e.length===0||p==="item"&&Ue.length===0)&&b.jsx("div",{className:"empty-container",children:b.jsx("p",{children:""})})]})})]}),b.jsx("div",{className:"embody-right-panel",children:R?b.jsxs("div",{className:"edit-panel",children:[b.jsxs("div",{className:"form-group",children:[b.jsx("label",{htmlFor:"edit-name",children:""}),b.jsx("input",{id:"edit-name",type:"text",value:I.name,onChange:ce=>q({...I,name:ce.target.value}),placeholder:""})]}),b.jsxs("div",{className:"form-group",children:[b.jsx("label",{htmlFor:"edit-type",children:""}),b.jsxs("select",{id:"edit-type",value:I.type,onChange:ce=>q({...I,type:ce.target.value}),children:[b.jsx("option",{value:"scene",children:""}),b.jsx("option",{value:"character",children:""}),b.jsx("option",{value:"item",children:""})]})]}),b.jsxs("div",{className:"form-group",children:[b.jsx("label",{htmlFor:"edit-description",children:""}),b.jsx("textarea",{id:"edit-description",value:I.description,onChange:ce=>q({...I,description:ce.target.value}),placeholder:"",rows:"3"})]}),b.jsxs("div",{className:"form-group",children:[b.jsx("label",{htmlFor:"edit-prompt",children:""}),b.jsx("textarea",{id:"edit-prompt",value:I.prompt,onChange:ce=>q({...I,prompt:ce.target.value}),placeholder:"AI",rows:"4"}),b.jsx("button",{className:"prompt-generate-btn",onClick:ee,children:""})]}),b.jsx("div",{className:"form-group",children:b.jsx("div",{className:"preview-images-container",children:I.embody_images.map((ce,ve)=>b.jsx("div",{className:"small-preview-image",children:b.jsx("img",{src:bi+ce.path,alt:I.name})},ve))})}),I.pic&&b.jsx("div",{className:"preview-image",children:b.jsx("img",{src:bi+I.pic,alt:I.name})}),b.jsxs("button",{className:"",onClick:he,disabled:e,children:[" ",e?"...":""]}),b.jsx("button",{className:"generate-image-btn",onClick:Z,children:"AI"}),b.jsx("button",{className:"save-btn",onClick:W,children:""}),b.jsx("button",{className:"cancel-btn",onClick:()=>D(null),children:""})]}):b.jsx("div",{className:"empty-edit-panel",children:b.jsx("p",{children:""})})}),L&&b.jsx("div",{className:"modal-overlay",onClick:()=>X(!1),children:b.jsxs("div",{className:"modal-content",onClick:ce=>ce.stopPropagation(),children:[b.jsxs("div",{className:"modal-header",children:[b.jsx("h3",{children:""}),b.jsx("button",{className:"close-btn",onClick:()=>X(!1),children:""})]}),b.jsxs("div",{className:"modal-body",children:[b.jsxs("div",{className:"form-group",children:[b.jsx("label",{htmlFor:"embody-type",children:""}),b.jsxs("select",{id:"embody-type",value:$.type,onChange:ce=>F({...$,type:ce.target.value}),children:[b.jsx("option",{value:"scene",children:""}),b.jsx("option",{value:"character",children:""}),b.jsx("option",{value:"item",children:""})]})]}),b.jsxs("div",{className:"form-group",children:[b.jsx("label",{htmlFor:"embody-name",children:""}),b.jsx("input",{type:"text",id:"embody-name",value:$.name,onChange:ce=>F({...$,name:ce.target.value}),placeholder:""})]}),b.jsxs("div",{className:"form-group",children:[b.jsx("label",{htmlFor:"embody-prompt",children:""}),b.jsx("textarea",{id:"embody-prompt",value:$.prompt,onChange:ce=>F({...$,prompt:ce.target.value}),placeholder:"",rows:"3"})]}),b.jsxs("div",{className:"form-group",children:[b.jsx("label",{htmlFor:"embody-description",children:""}),b.jsx("textarea",{id:"embody-description",value:$.description,onChange:ce=>F({...$,description:ce.target.value}),placeholder:"",rows:"4"})]}),b.jsxs("div",{className:"form-group",children:[b.jsx("label",{children:""}),b.jsxs("div",{className:"file-upload-container",children:[b.jsx("input",{type:"file",multiple:!0,id:"embody-file",accept:"image/*",onChange:ce=>{const ve=ce.target.files[0];if(z(ve),ve){const Me=URL.createObjectURL(ve);P(Me)}else P("")},style:{display:"none"}}),b.jsx("button",{type:"button",className:"file-upload-btn",onClick:()=>document.getElementById("embody-file").click(),children:M?M.name:""}),H&&b.jsxs("div",{className:"image-preview",children:[b.jsx("img",{src:H,alt:""}),b.jsx("button",{type:"button",className:"remove-image-btn",onClick:()=>{z(null),P(""),document.getElementById("embody-file").value=""},children:""})]})]})]})]}),b.jsxs("div",{className:"modal-footer",children:[b.jsx("button",{className:"cancel-btn",onClick:()=>X(!1),children:""}),b.jsx("button",{className:"save-btn",onClick:()=>ie(),children:""})]})]})})]})}function y4(){const[t,e]=O.useState(null),[n,s]=O.useState(!1),[a,l]=O.useState("");O.useEffect(()=>{const d=async()=>{const{data:{user:h}}=await Re.auth.getUser();e(h)},{data:f}=Re.auth.onAuthStateChange((h,g)=>{e(g?.user||null)});return d(),Yt.on("StartEditorMode",()=>{console.log(":"),c(!0)}),Yt.on("EndEditorMode",()=>{console.log(""),c(!1)}),Yt.on("showLargeImageModal",h=>{s(!0),l(h)}),()=>{}},[]);function c(d){const f=document.documentElement;d?(f.style.setProperty("--left-panel-width","40px"),f.style.setProperty("--logo-text-display","none")):(f.style.setProperty("--left-panel-width","200px"),f.style.setProperty("--logo-text-display","block"))}return c(!0),b.jsx($k,{children:b.jsxs(fj,{children:[b.jsxs("div",{className:"layout-container",children:[b.jsxs("div",{className:"left-panel",children:[b.jsxs(Si,{to:"/",className:"home-logo",children:[b.jsx("img",{className:"home-logo-img",src:"./vite.svg",alt:"home"}),b.jsx("p",{className:"home-logo-text",children:"AI"})]}),b.jsxs("div",{className:"nav-items",children:[b.jsxs(Si,{to:"/dashboard",className:"nav-item",title:"",children:[b.jsx("img",{className:"nav-item-icon",src:"./home.png",alt:""}),b.jsx("span",{children:""})]}),b.jsxs(Si,{to:"/embody",className:"nav-item",title:"",children:[b.jsx("img",{className:"nav-item-icon",src:"./layers.png",alt:""}),b.jsx("span",{children:"  "})]})]}),b.jsx(Lk,{})]}),b.jsx("div",{className:"right-panel",children:b.jsxs(HO,{children:[b.jsx($s,{path:"/",element:b.jsx(Vk,{})}),b.jsx($s,{path:"/editor",element:b.jsx(p4,{})}),b.jsx($s,{path:"/embody",element:b.jsx(g4,{})}),b.jsx($s,{path:"/login",element:b.jsx(zk,{})}),b.jsx($s,{path:"/register",element:b.jsx(Bk,{})}),b.jsx($s,{path:"/dashboard",element:b.jsx(qk,{})}),b.jsx($s,{path:"/profile",element:b.jsx(Hk,{})})]})})]}),n&&b.jsxs("div",{className:"large-image-modal",children:[b.jsx("img",{src:a,alt:"Large Character Preview"}),b.jsx("button",{onClick:()=>s(!1),children:""})]})]})})}ZN.createRoot(document.getElementById("root")).render(b.jsx(O.StrictMode,{children:b.jsx(y4,{})}));
