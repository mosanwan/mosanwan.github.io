function VN(t,e){for(var n=0;n<e.length;n++){const s=e[n];if(typeof s!="string"&&!Array.isArray(s)){for(const a in s)if(a!=="default"&&!(a in t)){const l=Object.getOwnPropertyDescriptor(s,a);l&&Object.defineProperty(t,a,l.get?l:{enumerable:!0,get:()=>s[a]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function n(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(a){if(a.ep)return;a.ep=!0;const l=n(a);fetch(a.href,l)}})();function Gd(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Xx(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var n=function s(){var a=!1;try{a=this instanceof s}catch{}return a?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(s){var a=Object.getOwnPropertyDescriptor(t,s);Object.defineProperty(n,s,a.get?a:{enumerable:!0,get:function(){return t[s]}})}),n}var Lm={exports:{}},Xo={};var rb;function FN(){if(rb)return Xo;rb=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(s,a,l){var c=null;if(l!==void 0&&(c=""+l),a.key!==void 0&&(c=""+a.key),"key"in a){l={};for(var d in a)d!=="key"&&(l[d]=a[d])}else l=a;return a=l.ref,{$$typeof:t,type:s,key:c,ref:a!==void 0?a:null,props:l}}return Xo.Fragment=e,Xo.jsx=n,Xo.jsxs=n,Xo}var sb;function YN(){return sb||(sb=1,Lm.exports=FN()),Lm.exports}var b=YN(),zm={exports:{}},Be={};var ib;function GN(){if(ib)return Be;ib=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),g=Symbol.for("react.activity"),v=Symbol.iterator;function _(D){return D===null||typeof D!="object"?null:(D=v&&D[v]||D["@@iterator"],typeof D=="function"?D:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,S={};function A(D,P,Z){this.props=D,this.context=P,this.refs=S,this.updater=Z||x}A.prototype.isReactComponent={},A.prototype.setState=function(D,P){if(typeof D!="object"&&typeof D!="function"&&D!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,D,P,"setState")},A.prototype.forceUpdate=function(D){this.updater.enqueueForceUpdate(this,D,"forceUpdate")};function N(){}N.prototype=A.prototype;function E(D,P,Z){this.props=D,this.context=P,this.refs=S,this.updater=Z||x}var C=E.prototype=new N;C.constructor=E,w(C,A.prototype),C.isPureReactComponent=!0;var O=Array.isArray;function k(){}var R={H:null,A:null,T:null,S:null},$=Object.prototype.hasOwnProperty;function L(D,P,Z){var K=Z.ref;return{$$typeof:t,type:D,key:P,ref:K!==void 0?K:null,props:Z}}function X(D,P){return L(D.type,P,D.props)}function F(D){return typeof D=="object"&&D!==null&&D.$$typeof===t}function H(D){var P={"=":"=0",":":"=2"};return"$"+D.replace(/[=:]/g,function(Z){return P[Z]})}var W=/\/+/g;function I(D,P){return typeof D=="object"&&D!==null&&D.key!=null?H(""+D.key):P.toString(36)}function V(D){switch(D.status){case"fulfilled":return D.value;case"rejected":throw D.reason;default:switch(typeof D.status=="string"?D.then(k,k):(D.status="pending",D.then(function(P){D.status==="pending"&&(D.status="fulfilled",D.value=P)},function(P){D.status==="pending"&&(D.status="rejected",D.reason=P)})),D.status){case"fulfilled":return D.value;case"rejected":throw D.reason}}throw D}function U(D,P,Z,K,re){var ee=typeof D;(ee==="undefined"||ee==="boolean")&&(D=null);var oe=!1;if(D===null)oe=!0;else switch(ee){case"bigint":case"string":case"number":oe=!0;break;case"object":switch(D.$$typeof){case t:case e:oe=!0;break;case p:return oe=D._init,U(oe(D._payload),P,Z,K,re)}}if(oe)return re=re(D),oe=K===""?"."+I(D,0):K,O(re)?(Z="",oe!=null&&(Z=oe.replace(W,"$&/")+"/"),U(re,P,Z,"",function(ye){return ye})):re!=null&&(F(re)&&(re=X(re,Z+(re.key==null||D&&D.key===re.key?"":(""+re.key).replace(W,"$&/")+"/")+oe)),P.push(re)),1;oe=0;var ce=K===""?".":K+":";if(O(D))for(var he=0;he<D.length;he++)K=D[he],ee=ce+I(K,he),oe+=U(K,P,Z,ee,re);else if(he=_(D),typeof he=="function")for(D=he.call(D),he=0;!(K=D.next()).done;)K=K.value,ee=ce+I(K,he++),oe+=U(K,P,Z,ee,re);else if(ee==="object"){if(typeof D.then=="function")return U(V(D),P,Z,K,re);throw P=String(D),Error("Objects are not valid as a React child (found: "+(P==="[object Object]"?"object with keys {"+Object.keys(D).join(", ")+"}":P)+"). If you meant to render a collection of children, use an array instead.")}return oe}function z(D,P,Z){if(D==null)return D;var K=[],re=0;return U(D,K,"","",function(ee){return P.call(Z,ee,re++)}),K}function q(D){if(D._status===-1){var P=D._result;P=P(),P.then(function(Z){(D._status===0||D._status===-1)&&(D._status=1,D._result=Z)},function(Z){(D._status===0||D._status===-1)&&(D._status=2,D._result=Z)}),D._status===-1&&(D._status=0,D._result=P)}if(D._status===1)return D._result.default;throw D._result}var B=typeof reportError=="function"?reportError:function(D){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var P=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof D=="object"&&D!==null&&typeof D.message=="string"?String(D.message):String(D),error:D});if(!window.dispatchEvent(P))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",D);return}console.error(D)},G={map:z,forEach:function(D,P,Z){z(D,function(){P.apply(this,arguments)},Z)},count:function(D){var P=0;return z(D,function(){P++}),P},toArray:function(D){return z(D,function(P){return P})||[]},only:function(D){if(!F(D))throw Error("React.Children.only expected to receive a single React element child.");return D}};return Be.Activity=g,Be.Children=G,Be.Component=A,Be.Fragment=n,Be.Profiler=a,Be.PureComponent=E,Be.StrictMode=s,Be.Suspense=f,Be.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=R,Be.__COMPILER_RUNTIME={__proto__:null,c:function(D){return R.H.useMemoCache(D)}},Be.cache=function(D){return function(){return D.apply(null,arguments)}},Be.cacheSignal=function(){return null},Be.cloneElement=function(D,P,Z){if(D==null)throw Error("The argument must be a React element, but you passed "+D+".");var K=w({},D.props),re=D.key;if(P!=null)for(ee in P.key!==void 0&&(re=""+P.key),P)!$.call(P,ee)||ee==="key"||ee==="__self"||ee==="__source"||ee==="ref"&&P.ref===void 0||(K[ee]=P[ee]);var ee=arguments.length-2;if(ee===1)K.children=Z;else if(1<ee){for(var oe=Array(ee),ce=0;ce<ee;ce++)oe[ce]=arguments[ce+2];K.children=oe}return L(D.type,re,K)},Be.createContext=function(D){return D={$$typeof:c,_currentValue:D,_currentValue2:D,_threadCount:0,Provider:null,Consumer:null},D.Provider=D,D.Consumer={$$typeof:l,_context:D},D},Be.createElement=function(D,P,Z){var K,re={},ee=null;if(P!=null)for(K in P.key!==void 0&&(ee=""+P.key),P)$.call(P,K)&&K!=="key"&&K!=="__self"&&K!=="__source"&&(re[K]=P[K]);var oe=arguments.length-2;if(oe===1)re.children=Z;else if(1<oe){for(var ce=Array(oe),he=0;he<oe;he++)ce[he]=arguments[he+2];re.children=ce}if(D&&D.defaultProps)for(K in oe=D.defaultProps,oe)re[K]===void 0&&(re[K]=oe[K]);return L(D,ee,re)},Be.createRef=function(){return{current:null}},Be.forwardRef=function(D){return{$$typeof:d,render:D}},Be.isValidElement=F,Be.lazy=function(D){return{$$typeof:p,_payload:{_status:-1,_result:D},_init:q}},Be.memo=function(D,P){return{$$typeof:h,type:D,compare:P===void 0?null:P}},Be.startTransition=function(D){var P=R.T,Z={};R.T=Z;try{var K=D(),re=R.S;re!==null&&re(Z,K),typeof K=="object"&&K!==null&&typeof K.then=="function"&&K.then(k,B)}catch(ee){B(ee)}finally{P!==null&&Z.types!==null&&(P.types=Z.types),R.T=P}},Be.unstable_useCacheRefresh=function(){return R.H.useCacheRefresh()},Be.use=function(D){return R.H.use(D)},Be.useActionState=function(D,P,Z){return R.H.useActionState(D,P,Z)},Be.useCallback=function(D,P){return R.H.useCallback(D,P)},Be.useContext=function(D){return R.H.useContext(D)},Be.useDebugValue=function(){},Be.useDeferredValue=function(D,P){return R.H.useDeferredValue(D,P)},Be.useEffect=function(D,P){return R.H.useEffect(D,P)},Be.useEffectEvent=function(D){return R.H.useEffectEvent(D)},Be.useId=function(){return R.H.useId()},Be.useImperativeHandle=function(D,P,Z){return R.H.useImperativeHandle(D,P,Z)},Be.useInsertionEffect=function(D,P){return R.H.useInsertionEffect(D,P)},Be.useLayoutEffect=function(D,P){return R.H.useLayoutEffect(D,P)},Be.useMemo=function(D,P){return R.H.useMemo(D,P)},Be.useOptimistic=function(D,P){return R.H.useOptimistic(D,P)},Be.useReducer=function(D,P,Z){return R.H.useReducer(D,P,Z)},Be.useRef=function(D){return R.H.useRef(D)},Be.useState=function(D){return R.H.useState(D)},Be.useSyncExternalStore=function(D,P,Z){return R.H.useSyncExternalStore(D,P,Z)},Be.useTransition=function(){return R.H.useTransition()},Be.version="19.2.0",Be}var ab;function Fl(){return ab||(ab=1,zm.exports=GN()),zm.exports}var j=Fl();const XN=Gd(j);var Bm={exports:{}},Ko={},Pm={exports:{}},qm={};var ob;function KN(){return ob||(ob=1,(function(t){function e(U,z){var q=U.length;U.push(z);e:for(;0<q;){var B=q-1>>>1,G=U[B];if(0<a(G,z))U[B]=z,U[q]=G,q=B;else break e}}function n(U){return U.length===0?null:U[0]}function s(U){if(U.length===0)return null;var z=U[0],q=U.pop();if(q!==z){U[0]=q;e:for(var B=0,G=U.length,D=G>>>1;B<D;){var P=2*(B+1)-1,Z=U[P],K=P+1,re=U[K];if(0>a(Z,q))K<G&&0>a(re,Z)?(U[B]=re,U[K]=q,B=K):(U[B]=Z,U[P]=q,B=P);else if(K<G&&0>a(re,q))U[B]=re,U[K]=q,B=K;else break e}}return z}function a(U,z){var q=U.sortIndex-z.sortIndex;return q!==0?q:U.id-z.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;t.unstable_now=function(){return l.now()}}else{var c=Date,d=c.now();t.unstable_now=function(){return c.now()-d}}var f=[],h=[],p=1,g=null,v=3,_=!1,x=!1,w=!1,S=!1,A=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;function C(U){for(var z=n(h);z!==null;){if(z.callback===null)s(h);else if(z.startTime<=U)s(h),z.sortIndex=z.expirationTime,e(f,z);else break;z=n(h)}}function O(U){if(w=!1,C(U),!x)if(n(f)!==null)x=!0,k||(k=!0,H());else{var z=n(h);z!==null&&V(O,z.startTime-U)}}var k=!1,R=-1,$=5,L=-1;function X(){return S?!0:!(t.unstable_now()-L<$)}function F(){if(S=!1,k){var U=t.unstable_now();L=U;var z=!0;try{e:{x=!1,w&&(w=!1,N(R),R=-1),_=!0;var q=v;try{t:{for(C(U),g=n(f);g!==null&&!(g.expirationTime>U&&X());){var B=g.callback;if(typeof B=="function"){g.callback=null,v=g.priorityLevel;var G=B(g.expirationTime<=U);if(U=t.unstable_now(),typeof G=="function"){g.callback=G,C(U),z=!0;break t}g===n(f)&&s(f),C(U)}else s(f);g=n(f)}if(g!==null)z=!0;else{var D=n(h);D!==null&&V(O,D.startTime-U),z=!1}}break e}finally{g=null,v=q,_=!1}z=void 0}}finally{z?H():k=!1}}}var H;if(typeof E=="function")H=function(){E(F)};else if(typeof MessageChannel<"u"){var W=new MessageChannel,I=W.port2;W.port1.onmessage=F,H=function(){I.postMessage(null)}}else H=function(){A(F,0)};function V(U,z){R=A(function(){U(t.unstable_now())},z)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(U){U.callback=null},t.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):$=0<U?Math.floor(1e3/U):5},t.unstable_getCurrentPriorityLevel=function(){return v},t.unstable_next=function(U){switch(v){case 1:case 2:case 3:var z=3;break;default:z=v}var q=v;v=z;try{return U()}finally{v=q}},t.unstable_requestPaint=function(){S=!0},t.unstable_runWithPriority=function(U,z){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var q=v;v=U;try{return z()}finally{v=q}},t.unstable_scheduleCallback=function(U,z,q){var B=t.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?B+q:B):q=B,U){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=q+G,U={id:p++,callback:z,priorityLevel:U,startTime:q,expirationTime:G,sortIndex:-1},q>B?(U.sortIndex=q,e(h,U),n(f)===null&&U===n(h)&&(w?(N(R),R=-1):w=!0,V(O,q-B))):(U.sortIndex=G,e(f,U),x||_||(x=!0,k||(k=!0,H()))),U},t.unstable_shouldYield=X,t.unstable_wrapCallback=function(U){var z=v;return function(){var q=v;v=z;try{return U.apply(this,arguments)}finally{v=q}}}})(qm)),qm}var lb;function QN(){return lb||(lb=1,Pm.exports=KN()),Pm.exports}var Hm={exports:{}},Jt={};var cb;function WN(){if(cb)return Jt;cb=1;var t=Fl();function e(f){var h="https://react.dev/errors/"+f;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)h+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+f+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(f,h,p){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:g==null?null:""+g,children:f,containerInfo:h,implementation:p}}var c=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(f,h){if(f==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return Jt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Jt.createPortal=function(f,h){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return l(f,h,null,p)},Jt.flushSync=function(f){var h=c.T,p=s.p;try{if(c.T=null,s.p=2,f)return f()}finally{c.T=h,s.p=p,s.d.f()}},Jt.preconnect=function(f,h){typeof f=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,s.d.C(f,h))},Jt.prefetchDNS=function(f){typeof f=="string"&&s.d.D(f)},Jt.preinit=function(f,h){if(typeof f=="string"&&h&&typeof h.as=="string"){var p=h.as,g=d(p,h.crossOrigin),v=typeof h.integrity=="string"?h.integrity:void 0,_=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;p==="style"?s.d.S(f,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:g,integrity:v,fetchPriority:_}):p==="script"&&s.d.X(f,{crossOrigin:g,integrity:v,fetchPriority:_,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},Jt.preinitModule=function(f,h){if(typeof f=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var p=d(h.as,h.crossOrigin);s.d.M(f,{crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&s.d.M(f)},Jt.preload=function(f,h){if(typeof f=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var p=h.as,g=d(p,h.crossOrigin);s.d.L(f,p,{crossOrigin:g,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},Jt.preloadModule=function(f,h){if(typeof f=="string")if(h){var p=d(h.as,h.crossOrigin);s.d.m(f,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else s.d.m(f)},Jt.requestFormReset=function(f){s.d.r(f)},Jt.unstable_batchedUpdates=function(f,h){return f(h)},Jt.useFormState=function(f,h,p){return c.H.useFormState(f,h,p)},Jt.useFormStatus=function(){return c.H.useHostTransitionStatus()},Jt.version="19.2.0",Jt}var ub;function Kx(){if(ub)return Hm.exports;ub=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Hm.exports=WN(),Hm.exports}var db;function JN(){if(db)return Ko;db=1;var t=QN(),e=Fl(),n=Kx();function s(r){var i="https://react.dev/errors/"+r;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)i+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+r+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function l(r){var i=r,o=r;if(r.alternate)for(;i.return;)i=i.return;else{r=i;do i=r,(i.flags&4098)!==0&&(o=i.return),r=i.return;while(r)}return i.tag===3?o:null}function c(r){if(r.tag===13){var i=r.memoizedState;if(i===null&&(r=r.alternate,r!==null&&(i=r.memoizedState)),i!==null)return i.dehydrated}return null}function d(r){if(r.tag===31){var i=r.memoizedState;if(i===null&&(r=r.alternate,r!==null&&(i=r.memoizedState)),i!==null)return i.dehydrated}return null}function f(r){if(l(r)!==r)throw Error(s(188))}function h(r){var i=r.alternate;if(!i){if(i=l(r),i===null)throw Error(s(188));return i!==r?null:r}for(var o=r,u=i;;){var m=o.return;if(m===null)break;var y=m.alternate;if(y===null){if(u=m.return,u!==null){o=u;continue}break}if(m.child===y.child){for(y=m.child;y;){if(y===o)return f(m),r;if(y===u)return f(m),i;y=y.sibling}throw Error(s(188))}if(o.return!==u.return)o=m,u=y;else{for(var T=!1,M=m.child;M;){if(M===o){T=!0,o=m,u=y;break}if(M===u){T=!0,u=m,o=y;break}M=M.sibling}if(!T){for(M=y.child;M;){if(M===o){T=!0,o=y,u=m;break}if(M===u){T=!0,u=y,o=m;break}M=M.sibling}if(!T)throw Error(s(189))}}if(o.alternate!==u)throw Error(s(190))}if(o.tag!==3)throw Error(s(188));return o.stateNode.current===o?r:i}function p(r){var i=r.tag;if(i===5||i===26||i===27||i===6)return r;for(r=r.child;r!==null;){if(i=p(r),i!==null)return i;r=r.sibling}return null}var g=Object.assign,v=Symbol.for("react.element"),_=Symbol.for("react.transitional.element"),x=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),N=Symbol.for("react.consumer"),E=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),O=Symbol.for("react.suspense"),k=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),$=Symbol.for("react.lazy"),L=Symbol.for("react.activity"),X=Symbol.for("react.memo_cache_sentinel"),F=Symbol.iterator;function H(r){return r===null||typeof r!="object"?null:(r=F&&r[F]||r["@@iterator"],typeof r=="function"?r:null)}var W=Symbol.for("react.client.reference");function I(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===W?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case w:return"Fragment";case A:return"Profiler";case S:return"StrictMode";case O:return"Suspense";case k:return"SuspenseList";case L:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case x:return"Portal";case E:return r.displayName||"Context";case N:return(r._context.displayName||"Context")+".Consumer";case C:var i=r.render;return r=r.displayName,r||(r=i.displayName||i.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case R:return i=r.displayName||null,i!==null?i:I(r.type)||"Memo";case $:i=r._payload,r=r._init;try{return I(r(i))}catch{}}return null}var V=Array.isArray,U=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,z=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,q={pending:!1,data:null,method:null,action:null},B=[],G=-1;function D(r){return{current:r}}function P(r){0>G||(r.current=B[G],B[G]=null,G--)}function Z(r,i){G++,B[G]=r.current,r.current=i}var K=D(null),re=D(null),ee=D(null),oe=D(null);function ce(r,i){switch(Z(ee,i),Z(re,r),Z(K,null),i.nodeType){case 9:case 11:r=(r=i.documentElement)&&(r=r.namespaceURI)?A_(r):0;break;default:if(r=i.tagName,i=i.namespaceURI)i=A_(i),r=T_(i,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}P(K),Z(K,r)}function he(){P(K),P(re),P(ee)}function ye(r){r.memoizedState!==null&&Z(oe,r);var i=K.current,o=T_(i,r.type);i!==o&&(Z(re,r),Z(K,o))}function xe(r){re.current===r&&(P(K),P(re)),oe.current===r&&(P(oe),Vo._currentValue=q)}var ve,Ce;function ze(r){if(ve===void 0)try{throw Error()}catch(o){var i=o.stack.trim().match(/\n( *(at )?)/);ve=i&&i[1]||"",Ce=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ve+r+Ce}var me=!1;function ge(r,i){if(!r||me)return"";me=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(i){var de=function(){throw Error()};if(Object.defineProperty(de.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(de,[])}catch(ae){var ie=ae}Reflect.construct(r,[],de)}else{try{de.call()}catch(ae){ie=ae}r.call(de.prototype)}}else{try{throw Error()}catch(ae){ie=ae}(de=r())&&typeof de.catch=="function"&&de.catch(function(){})}}catch(ae){if(ae&&ie&&typeof ae.stack=="string")return[ae.stack,ie.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var m=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");m&&m.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var y=u.DetermineComponentFrameRoot(),T=y[0],M=y[1];if(T&&M){var Y=T.split(`
`),ne=M.split(`
`);for(m=u=0;u<Y.length&&!Y[u].includes("DetermineComponentFrameRoot");)u++;for(;m<ne.length&&!ne[m].includes("DetermineComponentFrameRoot");)m++;if(u===Y.length||m===ne.length)for(u=Y.length-1,m=ne.length-1;1<=u&&0<=m&&Y[u]!==ne[m];)m--;for(;1<=u&&0<=m;u--,m--)if(Y[u]!==ne[m]){if(u!==1||m!==1)do if(u--,m--,0>m||Y[u]!==ne[m]){var le=`
`+Y[u].replace(" at new "," at ");return r.displayName&&le.includes("<anonymous>")&&(le=le.replace("<anonymous>",r.displayName)),le}while(1<=u&&0<=m);break}}}finally{me=!1,Error.prepareStackTrace=o}return(o=r?r.displayName||r.name:"")?ze(o):""}function Me(r,i){switch(r.tag){case 26:case 27:case 5:return ze(r.type);case 16:return ze("Lazy");case 13:return r.child!==i&&i!==null?ze("Suspense Fallback"):ze("Suspense");case 19:return ze("SuspenseList");case 0:case 15:return ge(r.type,!1);case 11:return ge(r.type.render,!1);case 1:return ge(r.type,!0);case 31:return ze("Activity");default:return""}}function Pe(r){try{var i="",o=null;do i+=Me(r,o),o=r,r=r.return;while(r);return i}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var ct=Object.prototype.hasOwnProperty,ln=t.unstable_scheduleCallback,ut=t.unstable_cancelCallback,nn=t.unstable_shouldYield,It=t.unstable_requestPaint,dt=t.unstable_now,rn=t.unstable_getCurrentPriorityLevel,Bt=t.unstable_ImmediatePriority,jt=t.unstable_UserBlockingPriority,fe=t.unstable_NormalPriority,_e=t.unstable_LowPriority,Ae=t.unstable_IdlePriority,Le=t.log,ft=t.unstable_setDisableYieldValue,pt=null,Pt=null;function or(r){if(typeof Le=="function"&&ft(r),Pt&&typeof Pt.setStrictMode=="function")try{Pt.setStrictMode(pt,r)}catch{}}var sn=Math.clz32?Math.clz32:Af,Ef=Math.log,Cf=Math.LN2;function Af(r){return r>>>=0,r===0?32:31-(Ef(r)/Cf|0)|0}var Ni=256,Oi=262144,Ri=4194304;function wr(r){var i=r&42;if(i!==0)return i;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return r&261888;case 262144:case 524288:case 1048576:case 2097152:return r&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function ji(r,i,o){var u=r.pendingLanes;if(u===0)return 0;var m=0,y=r.suspendedLanes,T=r.pingedLanes;r=r.warmLanes;var M=u&134217727;return M!==0?(u=M&~y,u!==0?m=wr(u):(T&=M,T!==0?m=wr(T):o||(o=M&~r,o!==0&&(m=wr(o))))):(M=u&~y,M!==0?m=wr(M):T!==0?m=wr(T):o||(o=u&~r,o!==0&&(m=wr(o)))),m===0?0:i!==0&&i!==m&&(i&y)===0&&(y=m&-m,o=i&-i,y>=o||y===32&&(o&4194048)!==0)?i:m}function Bs(r,i){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&i)===0}function Tf(r,i){switch(r){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ac(){var r=Ri;return Ri<<=1,(Ri&62914560)===0&&(Ri=4194304),r}function eo(r){for(var i=[],o=0;31>o;o++)i.push(r);return i}function Ps(r,i){r.pendingLanes|=i,i!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function Nf(r,i,o,u,m,y){var T=r.pendingLanes;r.pendingLanes=o,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=o,r.entangledLanes&=o,r.errorRecoveryDisabledLanes&=o,r.shellSuspendCounter=0;var M=r.entanglements,Y=r.expirationTimes,ne=r.hiddenUpdates;for(o=T&~o;0<o;){var le=31-sn(o),de=1<<le;M[le]=0,Y[le]=-1;var ie=ne[le];if(ie!==null)for(ne[le]=null,le=0;le<ie.length;le++){var ae=ie[le];ae!==null&&(ae.lane&=-536870913)}o&=~de}u!==0&&oc(r,u,0),y!==0&&m===0&&r.tag!==0&&(r.suspendedLanes|=y&~(T&~i))}function oc(r,i,o){r.pendingLanes|=i,r.suspendedLanes&=~i;var u=31-sn(i);r.entangledLanes|=i,r.entanglements[u]=r.entanglements[u]|1073741824|o&261930}function lc(r,i){var o=r.entangledLanes|=i;for(r=r.entanglements;o;){var u=31-sn(o),m=1<<u;m&i|r[u]&i&&(r[u]|=i),o&=~m}}function cc(r,i){var o=i&-i;return o=(o&42)!==0?1:to(o),(o&(r.suspendedLanes|i))!==0?0:o}function to(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function no(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function uc(){var r=z.p;return r!==0?r:(r=window.event,r===void 0?32:Q_(r.type))}function dc(r,i){var o=z.p;try{return z.p=r,i()}finally{z.p=o}}var lr=Math.random().toString(36).slice(2),kt="__reactFiber$"+lr,Qt="__reactProps$"+lr,xr="__reactContainer$"+lr,ki="__reactEvents$"+lr,fc="__reactListeners$"+lr,Of="__reactHandles$"+lr,hc="__reactResources$"+lr,qs="__reactMarker$"+lr;function ro(r){delete r[kt],delete r[Qt],delete r[ki],delete r[fc],delete r[Of]}function Zr(r){var i=r[kt];if(i)return i;for(var o=r.parentNode;o;){if(i=o[xr]||o[kt]){if(o=i.alternate,i.child!==null||o!==null&&o.child!==null)for(r=D_(r);r!==null;){if(o=r[kt])return o;r=D_(r)}return i}r=o,o=r.parentNode}return null}function es(r){if(r=r[kt]||r[xr]){var i=r.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return r}return null}function ts(r){var i=r.tag;if(i===5||i===26||i===27||i===6)return r.stateNode;throw Error(s(33))}function ns(r){var i=r[hc];return i||(i=r[hc]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function St(r){r[qs]=!0}var mc=new Set,pc={};function Sr(r,i){rs(r,i),rs(r+"Capture",i)}function rs(r,i){for(pc[r]=i,r=0;r<i.length;r++)mc.add(i[r])}var Rf=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),so={},gc={};function jf(r){return ct.call(gc,r)?!0:ct.call(so,r)?!1:Rf.test(r)?gc[r]=!0:(so[r]=!0,!1)}function Mi(r,i,o){if(jf(i))if(o===null)r.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":r.removeAttribute(i);return;case"boolean":var u=i.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){r.removeAttribute(i);return}}r.setAttribute(i,""+o)}}function Di(r,i,o){if(o===null)r.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(i);return}r.setAttribute(i,""+o)}}function Fn(r,i,o,u){if(u===null)r.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(o);return}r.setAttributeNS(i,o,""+u)}}function cn(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function yc(r){var i=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function kf(r,i,o){var u=Object.getOwnPropertyDescriptor(r.constructor.prototype,i);if(!r.hasOwnProperty(i)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var m=u.get,y=u.set;return Object.defineProperty(r,i,{configurable:!0,get:function(){return m.call(this)},set:function(T){o=""+T,y.call(this,T)}}),Object.defineProperty(r,i,{enumerable:u.enumerable}),{getValue:function(){return o},setValue:function(T){o=""+T},stopTracking:function(){r._valueTracker=null,delete r[i]}}}}function Ui(r){if(!r._valueTracker){var i=yc(r)?"checked":"value";r._valueTracker=kf(r,i,""+r[i])}}function vc(r){if(!r)return!1;var i=r._valueTracker;if(!i)return!0;var o=i.getValue(),u="";return r&&(u=yc(r)?r.checked?"true":"false":r.value),r=u,r!==o?(i.setValue(r),!0):!1}function $i(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var Mf=/[\n"\\]/g;function Wt(r){return r.replace(Mf,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function io(r,i,o,u,m,y,T,M){r.name="",T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?r.type=T:r.removeAttribute("type"),i!=null?T==="number"?(i===0&&r.value===""||r.value!=i)&&(r.value=""+cn(i)):r.value!==""+cn(i)&&(r.value=""+cn(i)):T!=="submit"&&T!=="reset"||r.removeAttribute("value"),i!=null?Ii(r,T,cn(i)):o!=null?Ii(r,T,cn(o)):u!=null&&r.removeAttribute("value"),m==null&&y!=null&&(r.defaultChecked=!!y),m!=null&&(r.checked=m&&typeof m!="function"&&typeof m!="symbol"),M!=null&&typeof M!="function"&&typeof M!="symbol"&&typeof M!="boolean"?r.name=""+cn(M):r.removeAttribute("name")}function _c(r,i,o,u,m,y,T,M){if(y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(r.type=y),i!=null||o!=null){if(!(y!=="submit"&&y!=="reset"||i!=null)){Ui(r);return}o=o!=null?""+cn(o):"",i=i!=null?""+cn(i):o,M||i===r.value||(r.value=i),r.defaultValue=i}u=u??m,u=typeof u!="function"&&typeof u!="symbol"&&!!u,r.checked=M?r.checked:!!u,r.defaultChecked=!!u,T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(r.name=T),Ui(r)}function Ii(r,i,o){i==="number"&&$i(r.ownerDocument)===r||r.defaultValue===""+o||(r.defaultValue=""+o)}function Li(r,i,o,u){if(r=r.options,i){i={};for(var m=0;m<o.length;m++)i["$"+o[m]]=!0;for(o=0;o<r.length;o++)m=i.hasOwnProperty("$"+r[o].value),r[o].selected!==m&&(r[o].selected=m),m&&u&&(r[o].defaultSelected=!0)}else{for(o=""+cn(o),i=null,m=0;m<r.length;m++){if(r[m].value===o){r[m].selected=!0,u&&(r[m].defaultSelected=!0);return}i!==null||r[m].disabled||(i=r[m])}i!==null&&(i.selected=!0)}}function wy(r,i,o){if(i!=null&&(i=""+cn(i),i!==r.value&&(r.value=i),o==null)){r.defaultValue!==i&&(r.defaultValue=i);return}r.defaultValue=o!=null?""+cn(o):""}function xy(r,i,o,u){if(i==null){if(u!=null){if(o!=null)throw Error(s(92));if(V(u)){if(1<u.length)throw Error(s(93));u=u[0]}o=u}o==null&&(o=""),i=o}o=cn(i),r.defaultValue=o,u=r.textContent,u===o&&u!==""&&u!==null&&(r.value=u),Ui(r)}function zi(r,i){if(i){var o=r.firstChild;if(o&&o===r.lastChild&&o.nodeType===3){o.nodeValue=i;return}}r.textContent=i}var zA=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Sy(r,i,o){var u=i.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?u?r.setProperty(i,""):i==="float"?r.cssFloat="":r[i]="":u?r.setProperty(i,o):typeof o!="number"||o===0||zA.has(i)?i==="float"?r.cssFloat=o:r[i]=(""+o).trim():r[i]=o+"px"}function Ey(r,i,o){if(i!=null&&typeof i!="object")throw Error(s(62));if(r=r.style,o!=null){for(var u in o)!o.hasOwnProperty(u)||i!=null&&i.hasOwnProperty(u)||(u.indexOf("--")===0?r.setProperty(u,""):u==="float"?r.cssFloat="":r[u]="");for(var m in i)u=i[m],i.hasOwnProperty(m)&&o[m]!==u&&Sy(r,m,u)}else for(var y in i)i.hasOwnProperty(y)&&Sy(r,y,i[y])}function Df(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var BA=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),PA=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function bc(r){return PA.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}function Er(){}var Uf=null;function $f(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Bi=null,Pi=null;function Cy(r){var i=es(r);if(i&&(r=i.stateNode)){var o=r[Qt]||null;e:switch(r=i.stateNode,i.type){case"input":if(io(r,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),i=o.name,o.type==="radio"&&i!=null){for(o=r;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+Wt(""+i)+'"][type="radio"]'),i=0;i<o.length;i++){var u=o[i];if(u!==r&&u.form===r.form){var m=u[Qt]||null;if(!m)throw Error(s(90));io(u,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name)}}for(i=0;i<o.length;i++)u=o[i],u.form===r.form&&vc(u)}break e;case"textarea":wy(r,o.value,o.defaultValue);break e;case"select":i=o.value,i!=null&&Li(r,!!o.multiple,i,!1)}}}var If=!1;function Ay(r,i,o){if(If)return r(i,o);If=!0;try{var u=r(i);return u}finally{if(If=!1,(Bi!==null||Pi!==null)&&(ou(),Bi&&(i=Bi,r=Pi,Pi=Bi=null,Cy(i),r)))for(i=0;i<r.length;i++)Cy(r[i])}}function ao(r,i){var o=r.stateNode;if(o===null)return null;var u=o[Qt]||null;if(u===null)return null;o=u[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(r=r.type,u=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!u;break e;default:r=!1}if(r)return null;if(o&&typeof o!="function")throw Error(s(231,i,typeof o));return o}var Cr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Lf=!1;if(Cr)try{var oo={};Object.defineProperty(oo,"passive",{get:function(){Lf=!0}}),window.addEventListener("test",oo,oo),window.removeEventListener("test",oo,oo)}catch{Lf=!1}var ss=null,zf=null,wc=null;function Ty(){if(wc)return wc;var r,i=zf,o=i.length,u,m="value"in ss?ss.value:ss.textContent,y=m.length;for(r=0;r<o&&i[r]===m[r];r++);var T=o-r;for(u=1;u<=T&&i[o-u]===m[y-u];u++);return wc=m.slice(r,1<u?1-u:void 0)}function xc(r){var i=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&i===13&&(r=13)):r=i,r===10&&(r=13),32<=r||r===13?r:0}function Sc(){return!0}function Ny(){return!1}function un(r){function i(o,u,m,y,T){this._reactName=o,this._targetInst=m,this.type=u,this.nativeEvent=y,this.target=T,this.currentTarget=null;for(var M in r)r.hasOwnProperty(M)&&(o=r[M],this[M]=o?o(y):y[M]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?Sc:Ny,this.isPropagationStopped=Ny,this}return g(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Sc)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Sc)},persist:function(){},isPersistent:Sc}),i}var Hs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ec=un(Hs),lo=g({},Hs,{view:0,detail:0}),qA=un(lo),Bf,Pf,co,Cc=g({},lo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Hf,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==co&&(co&&r.type==="mousemove"?(Bf=r.screenX-co.screenX,Pf=r.screenY-co.screenY):Pf=Bf=0,co=r),Bf)},movementY:function(r){return"movementY"in r?r.movementY:Pf}}),Oy=un(Cc),HA=g({},Cc,{dataTransfer:0}),VA=un(HA),FA=g({},lo,{relatedTarget:0}),qf=un(FA),YA=g({},Hs,{animationName:0,elapsedTime:0,pseudoElement:0}),GA=un(YA),XA=g({},Hs,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),KA=un(XA),QA=g({},Hs,{data:0}),Ry=un(QA),WA={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},JA={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ZA={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function eT(r){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(r):(r=ZA[r])?!!i[r]:!1}function Hf(){return eT}var tT=g({},lo,{key:function(r){if(r.key){var i=WA[r.key]||r.key;if(i!=="Unidentified")return i}return r.type==="keypress"?(r=xc(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?JA[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Hf,charCode:function(r){return r.type==="keypress"?xc(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?xc(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),nT=un(tT),rT=g({},Cc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),jy=un(rT),sT=g({},lo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Hf}),iT=un(sT),aT=g({},Hs,{propertyName:0,elapsedTime:0,pseudoElement:0}),oT=un(aT),lT=g({},Cc,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),cT=un(lT),uT=g({},Hs,{newState:0,oldState:0}),dT=un(uT),fT=[9,13,27,32],Vf=Cr&&"CompositionEvent"in window,uo=null;Cr&&"documentMode"in document&&(uo=document.documentMode);var hT=Cr&&"TextEvent"in window&&!uo,ky=Cr&&(!Vf||uo&&8<uo&&11>=uo),My=" ",Dy=!1;function Uy(r,i){switch(r){case"keyup":return fT.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function $y(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var qi=!1;function mT(r,i){switch(r){case"compositionend":return $y(i);case"keypress":return i.which!==32?null:(Dy=!0,My);case"textInput":return r=i.data,r===My&&Dy?null:r;default:return null}}function pT(r,i){if(qi)return r==="compositionend"||!Vf&&Uy(r,i)?(r=Ty(),wc=zf=ss=null,qi=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return ky&&i.locale!=="ko"?null:i.data;default:return null}}var gT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Iy(r){var i=r&&r.nodeName&&r.nodeName.toLowerCase();return i==="input"?!!gT[r.type]:i==="textarea"}function Ly(r,i,o,u){Bi?Pi?Pi.push(u):Pi=[u]:Bi=u,i=mu(i,"onChange"),0<i.length&&(o=new Ec("onChange","change",null,o,u),r.push({event:o,listeners:i}))}var fo=null,ho=null;function yT(r){b_(r,0)}function Ac(r){var i=ts(r);if(vc(i))return r}function zy(r,i){if(r==="change")return i}var By=!1;if(Cr){var Ff;if(Cr){var Yf="oninput"in document;if(!Yf){var Py=document.createElement("div");Py.setAttribute("oninput","return;"),Yf=typeof Py.oninput=="function"}Ff=Yf}else Ff=!1;By=Ff&&(!document.documentMode||9<document.documentMode)}function qy(){fo&&(fo.detachEvent("onpropertychange",Hy),ho=fo=null)}function Hy(r){if(r.propertyName==="value"&&Ac(ho)){var i=[];Ly(i,ho,r,$f(r)),Ay(yT,i)}}function vT(r,i,o){r==="focusin"?(qy(),fo=i,ho=o,fo.attachEvent("onpropertychange",Hy)):r==="focusout"&&qy()}function _T(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return Ac(ho)}function bT(r,i){if(r==="click")return Ac(i)}function wT(r,i){if(r==="input"||r==="change")return Ac(i)}function xT(r,i){return r===i&&(r!==0||1/r===1/i)||r!==r&&i!==i}var _n=typeof Object.is=="function"?Object.is:xT;function mo(r,i){if(_n(r,i))return!0;if(typeof r!="object"||r===null||typeof i!="object"||i===null)return!1;var o=Object.keys(r),u=Object.keys(i);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var m=o[u];if(!ct.call(i,m)||!_n(r[m],i[m]))return!1}return!0}function Vy(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function Fy(r,i){var o=Vy(r);r=0;for(var u;o;){if(o.nodeType===3){if(u=r+o.textContent.length,r<=i&&u>=i)return{node:o,offset:i-r};r=u}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=Vy(o)}}function Yy(r,i){return r&&i?r===i?!0:r&&r.nodeType===3?!1:i&&i.nodeType===3?Yy(r,i.parentNode):"contains"in r?r.contains(i):r.compareDocumentPosition?!!(r.compareDocumentPosition(i)&16):!1:!1}function Gy(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var i=$i(r.document);i instanceof r.HTMLIFrameElement;){try{var o=typeof i.contentWindow.location.href=="string"}catch{o=!1}if(o)r=i.contentWindow;else break;i=$i(r.document)}return i}function Gf(r){var i=r&&r.nodeName&&r.nodeName.toLowerCase();return i&&(i==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||i==="textarea"||r.contentEditable==="true")}var ST=Cr&&"documentMode"in document&&11>=document.documentMode,Hi=null,Xf=null,po=null,Kf=!1;function Xy(r,i,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;Kf||Hi==null||Hi!==$i(u)||(u=Hi,"selectionStart"in u&&Gf(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),po&&mo(po,u)||(po=u,u=mu(Xf,"onSelect"),0<u.length&&(i=new Ec("onSelect","select",null,i,o),r.push({event:i,listeners:u}),i.target=Hi)))}function Vs(r,i){var o={};return o[r.toLowerCase()]=i.toLowerCase(),o["Webkit"+r]="webkit"+i,o["Moz"+r]="moz"+i,o}var Vi={animationend:Vs("Animation","AnimationEnd"),animationiteration:Vs("Animation","AnimationIteration"),animationstart:Vs("Animation","AnimationStart"),transitionrun:Vs("Transition","TransitionRun"),transitionstart:Vs("Transition","TransitionStart"),transitioncancel:Vs("Transition","TransitionCancel"),transitionend:Vs("Transition","TransitionEnd")},Qf={},Ky={};Cr&&(Ky=document.createElement("div").style,"AnimationEvent"in window||(delete Vi.animationend.animation,delete Vi.animationiteration.animation,delete Vi.animationstart.animation),"TransitionEvent"in window||delete Vi.transitionend.transition);function Fs(r){if(Qf[r])return Qf[r];if(!Vi[r])return r;var i=Vi[r],o;for(o in i)if(i.hasOwnProperty(o)&&o in Ky)return Qf[r]=i[o];return r}var Qy=Fs("animationend"),Wy=Fs("animationiteration"),Jy=Fs("animationstart"),ET=Fs("transitionrun"),CT=Fs("transitionstart"),AT=Fs("transitioncancel"),Zy=Fs("transitionend"),e0=new Map,Wf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Wf.push("scrollEnd");function Yn(r,i){e0.set(r,i),Sr(i,[r])}var Tc=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)},Dn=[],Fi=0,Jf=0;function Nc(){for(var r=Fi,i=Jf=Fi=0;i<r;){var o=Dn[i];Dn[i++]=null;var u=Dn[i];Dn[i++]=null;var m=Dn[i];Dn[i++]=null;var y=Dn[i];if(Dn[i++]=null,u!==null&&m!==null){var T=u.pending;T===null?m.next=m:(m.next=T.next,T.next=m),u.pending=m}y!==0&&t0(o,m,y)}}function Oc(r,i,o,u){Dn[Fi++]=r,Dn[Fi++]=i,Dn[Fi++]=o,Dn[Fi++]=u,Jf|=u,r.lanes|=u,r=r.alternate,r!==null&&(r.lanes|=u)}function Zf(r,i,o,u){return Oc(r,i,o,u),Rc(r)}function Ys(r,i){return Oc(r,null,null,i),Rc(r)}function t0(r,i,o){r.lanes|=o;var u=r.alternate;u!==null&&(u.lanes|=o);for(var m=!1,y=r.return;y!==null;)y.childLanes|=o,u=y.alternate,u!==null&&(u.childLanes|=o),y.tag===22&&(r=y.stateNode,r===null||r._visibility&1||(m=!0)),r=y,y=y.return;return r.tag===3?(y=r.stateNode,m&&i!==null&&(m=31-sn(o),r=y.hiddenUpdates,u=r[m],u===null?r[m]=[i]:u.push(i),i.lane=o|536870912),y):null}function Rc(r){if(50<Io)throw Io=0,lm=null,Error(s(185));for(var i=r.return;i!==null;)r=i,i=r.return;return r.tag===3?r.stateNode:null}var Yi={};function TT(r,i,o,u){this.tag=r,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function bn(r,i,o,u){return new TT(r,i,o,u)}function eh(r){return r=r.prototype,!(!r||!r.isReactComponent)}function Ar(r,i){var o=r.alternate;return o===null?(o=bn(r.tag,i,r.key,r.mode),o.elementType=r.elementType,o.type=r.type,o.stateNode=r.stateNode,o.alternate=r,r.alternate=o):(o.pendingProps=i,o.type=r.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=r.flags&65011712,o.childLanes=r.childLanes,o.lanes=r.lanes,o.child=r.child,o.memoizedProps=r.memoizedProps,o.memoizedState=r.memoizedState,o.updateQueue=r.updateQueue,i=r.dependencies,o.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},o.sibling=r.sibling,o.index=r.index,o.ref=r.ref,o.refCleanup=r.refCleanup,o}function n0(r,i){r.flags&=65011714;var o=r.alternate;return o===null?(r.childLanes=0,r.lanes=i,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=o.childLanes,r.lanes=o.lanes,r.child=o.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=o.memoizedProps,r.memoizedState=o.memoizedState,r.updateQueue=o.updateQueue,r.type=o.type,i=o.dependencies,r.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),r}function jc(r,i,o,u,m,y){var T=0;if(u=r,typeof r=="function")eh(r)&&(T=1);else if(typeof r=="string")T=kN(r,o,K.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case L:return r=bn(31,o,i,m),r.elementType=L,r.lanes=y,r;case w:return Gs(o.children,m,y,i);case S:T=8,m|=24;break;case A:return r=bn(12,o,i,m|2),r.elementType=A,r.lanes=y,r;case O:return r=bn(13,o,i,m),r.elementType=O,r.lanes=y,r;case k:return r=bn(19,o,i,m),r.elementType=k,r.lanes=y,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case E:T=10;break e;case N:T=9;break e;case C:T=11;break e;case R:T=14;break e;case $:T=16,u=null;break e}T=29,o=Error(s(130,r===null?"null":typeof r,"")),u=null}return i=bn(T,o,i,m),i.elementType=r,i.type=u,i.lanes=y,i}function Gs(r,i,o,u){return r=bn(7,r,u,i),r.lanes=o,r}function th(r,i,o){return r=bn(6,r,null,i),r.lanes=o,r}function r0(r){var i=bn(18,null,null,0);return i.stateNode=r,i}function nh(r,i,o){return i=bn(4,r.children!==null?r.children:[],r.key,i),i.lanes=o,i.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},i}var s0=new WeakMap;function Un(r,i){if(typeof r=="object"&&r!==null){var o=s0.get(r);return o!==void 0?o:(i={value:r,source:i,stack:Pe(i)},s0.set(r,i),i)}return{value:r,source:i,stack:Pe(i)}}var Gi=[],Xi=0,kc=null,go=0,$n=[],In=0,is=null,cr=1,ur="";function Tr(r,i){Gi[Xi++]=go,Gi[Xi++]=kc,kc=r,go=i}function i0(r,i,o){$n[In++]=cr,$n[In++]=ur,$n[In++]=is,is=r;var u=cr;r=ur;var m=32-sn(u)-1;u&=~(1<<m),o+=1;var y=32-sn(i)+m;if(30<y){var T=m-m%5;y=(u&(1<<T)-1).toString(32),u>>=T,m-=T,cr=1<<32-sn(i)+m|o<<m|u,ur=y+r}else cr=1<<y|o<<m|u,ur=r}function rh(r){r.return!==null&&(Tr(r,1),i0(r,1,0))}function sh(r){for(;r===kc;)kc=Gi[--Xi],Gi[Xi]=null,go=Gi[--Xi],Gi[Xi]=null;for(;r===is;)is=$n[--In],$n[In]=null,ur=$n[--In],$n[In]=null,cr=$n[--In],$n[In]=null}function a0(r,i){$n[In++]=cr,$n[In++]=ur,$n[In++]=is,cr=i.id,ur=i.overflow,is=r}var qt=null,ot=null,Qe=!1,as=null,Ln=!1,ih=Error(s(519));function os(r){var i=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw yo(Un(i,r)),ih}function o0(r){var i=r.stateNode,o=r.type,u=r.memoizedProps;switch(i[kt]=r,i[Qt]=u,o){case"dialog":Ye("cancel",i),Ye("close",i);break;case"iframe":case"object":case"embed":Ye("load",i);break;case"video":case"audio":for(o=0;o<zo.length;o++)Ye(zo[o],i);break;case"source":Ye("error",i);break;case"img":case"image":case"link":Ye("error",i),Ye("load",i);break;case"details":Ye("toggle",i);break;case"input":Ye("invalid",i),_c(i,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":Ye("invalid",i);break;case"textarea":Ye("invalid",i),xy(i,u.value,u.defaultValue,u.children)}o=u.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||i.textContent===""+o||u.suppressHydrationWarning===!0||E_(i.textContent,o)?(u.popover!=null&&(Ye("beforetoggle",i),Ye("toggle",i)),u.onScroll!=null&&Ye("scroll",i),u.onScrollEnd!=null&&Ye("scrollend",i),u.onClick!=null&&(i.onclick=Er),i=!0):i=!1,i||os(r,!0)}function l0(r){for(qt=r.return;qt;)switch(qt.tag){case 5:case 31:case 13:Ln=!1;return;case 27:case 3:Ln=!0;return;default:qt=qt.return}}function Ki(r){if(r!==qt)return!1;if(!Qe)return l0(r),Qe=!0,!1;var i=r.tag,o;if((o=i!==3&&i!==27)&&((o=i===5)&&(o=r.type,o=!(o!=="form"&&o!=="button")||Sm(r.type,r.memoizedProps)),o=!o),o&&ot&&os(r),l0(r),i===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(s(317));ot=M_(r)}else if(i===31){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(s(317));ot=M_(r)}else i===27?(i=ot,ws(r.type)?(r=Nm,Nm=null,ot=r):ot=i):ot=qt?Bn(r.stateNode.nextSibling):null;return!0}function Xs(){ot=qt=null,Qe=!1}function ah(){var r=as;return r!==null&&(mn===null?mn=r:mn.push.apply(mn,r),as=null),r}function yo(r){as===null?as=[r]:as.push(r)}var oh=D(null),Ks=null,Nr=null;function ls(r,i,o){Z(oh,i._currentValue),i._currentValue=o}function Or(r){r._currentValue=oh.current,P(oh)}function lh(r,i,o){for(;r!==null;){var u=r.alternate;if((r.childLanes&i)!==i?(r.childLanes|=i,u!==null&&(u.childLanes|=i)):u!==null&&(u.childLanes&i)!==i&&(u.childLanes|=i),r===o)break;r=r.return}}function ch(r,i,o,u){var m=r.child;for(m!==null&&(m.return=r);m!==null;){var y=m.dependencies;if(y!==null){var T=m.child;y=y.firstContext;e:for(;y!==null;){var M=y;y=m;for(var Y=0;Y<i.length;Y++)if(M.context===i[Y]){y.lanes|=o,M=y.alternate,M!==null&&(M.lanes|=o),lh(y.return,o,r),u||(T=null);break e}y=M.next}}else if(m.tag===18){if(T=m.return,T===null)throw Error(s(341));T.lanes|=o,y=T.alternate,y!==null&&(y.lanes|=o),lh(T,o,r),T=null}else T=m.child;if(T!==null)T.return=m;else for(T=m;T!==null;){if(T===r){T=null;break}if(m=T.sibling,m!==null){m.return=T.return,T=m;break}T=T.return}m=T}}function Qi(r,i,o,u){r=null;for(var m=i,y=!1;m!==null;){if(!y){if((m.flags&524288)!==0)y=!0;else if((m.flags&262144)!==0)break}if(m.tag===10){var T=m.alternate;if(T===null)throw Error(s(387));if(T=T.memoizedProps,T!==null){var M=m.type;_n(m.pendingProps.value,T.value)||(r!==null?r.push(M):r=[M])}}else if(m===oe.current){if(T=m.alternate,T===null)throw Error(s(387));T.memoizedState.memoizedState!==m.memoizedState.memoizedState&&(r!==null?r.push(Vo):r=[Vo])}m=m.return}r!==null&&ch(i,r,o,u),i.flags|=262144}function Mc(r){for(r=r.firstContext;r!==null;){if(!_n(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function Qs(r){Ks=r,Nr=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function Ht(r){return c0(Ks,r)}function Dc(r,i){return Ks===null&&Qs(r),c0(r,i)}function c0(r,i){var o=i._currentValue;if(i={context:i,memoizedValue:o,next:null},Nr===null){if(r===null)throw Error(s(308));Nr=i,r.dependencies={lanes:0,firstContext:i},r.flags|=524288}else Nr=Nr.next=i;return o}var NT=typeof AbortController<"u"?AbortController:function(){var r=[],i=this.signal={aborted:!1,addEventListener:function(o,u){r.push(u)}};this.abort=function(){i.aborted=!0,r.forEach(function(o){return o()})}},OT=t.unstable_scheduleCallback,RT=t.unstable_NormalPriority,Et={$$typeof:E,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function uh(){return{controller:new NT,data:new Map,refCount:0}}function vo(r){r.refCount--,r.refCount===0&&OT(RT,function(){r.controller.abort()})}var _o=null,dh=0,Wi=0,Ji=null;function jT(r,i){if(_o===null){var o=_o=[];dh=0,Wi=mm(),Ji={status:"pending",value:void 0,then:function(u){o.push(u)}}}return dh++,i.then(u0,u0),i}function u0(){if(--dh===0&&_o!==null){Ji!==null&&(Ji.status="fulfilled");var r=_o;_o=null,Wi=0,Ji=null;for(var i=0;i<r.length;i++)(0,r[i])()}}function kT(r,i){var o=[],u={status:"pending",value:null,reason:null,then:function(m){o.push(m)}};return r.then(function(){u.status="fulfilled",u.value=i;for(var m=0;m<o.length;m++)(0,o[m])(i)},function(m){for(u.status="rejected",u.reason=m,m=0;m<o.length;m++)(0,o[m])(void 0)}),u}var d0=U.S;U.S=function(r,i){Xv=dt(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&jT(r,i),d0!==null&&d0(r,i)};var Ws=D(null);function fh(){var r=Ws.current;return r!==null?r:it.pooledCache}function Uc(r,i){i===null?Z(Ws,Ws.current):Z(Ws,i.pool)}function f0(){var r=fh();return r===null?null:{parent:Et._currentValue,pool:r}}var Zi=Error(s(460)),hh=Error(s(474)),$c=Error(s(542)),Ic={then:function(){}};function h0(r){return r=r.status,r==="fulfilled"||r==="rejected"}function m0(r,i,o){switch(o=r[o],o===void 0?r.push(i):o!==i&&(i.then(Er,Er),i=o),i.status){case"fulfilled":return i.value;case"rejected":throw r=i.reason,g0(r),r;default:if(typeof i.status=="string")i.then(Er,Er);else{if(r=it,r!==null&&100<r.shellSuspendCounter)throw Error(s(482));r=i,r.status="pending",r.then(function(u){if(i.status==="pending"){var m=i;m.status="fulfilled",m.value=u}},function(u){if(i.status==="pending"){var m=i;m.status="rejected",m.reason=u}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw r=i.reason,g0(r),r}throw Zs=i,Zi}}function Js(r){try{var i=r._init;return i(r._payload)}catch(o){throw o!==null&&typeof o=="object"&&typeof o.then=="function"?(Zs=o,Zi):o}}var Zs=null;function p0(){if(Zs===null)throw Error(s(459));var r=Zs;return Zs=null,r}function g0(r){if(r===Zi||r===$c)throw Error(s(483))}var ea=null,bo=0;function Lc(r){var i=bo;return bo+=1,ea===null&&(ea=[]),m0(ea,r,i)}function wo(r,i){i=i.props.ref,r.ref=i!==void 0?i:null}function zc(r,i){throw i.$$typeof===v?Error(s(525)):(r=Object.prototype.toString.call(i),Error(s(31,r==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":r)))}function y0(r){function i(J,Q){if(r){var te=J.deletions;te===null?(J.deletions=[Q],J.flags|=16):te.push(Q)}}function o(J,Q){if(!r)return null;for(;Q!==null;)i(J,Q),Q=Q.sibling;return null}function u(J){for(var Q=new Map;J!==null;)J.key!==null?Q.set(J.key,J):Q.set(J.index,J),J=J.sibling;return Q}function m(J,Q){return J=Ar(J,Q),J.index=0,J.sibling=null,J}function y(J,Q,te){return J.index=te,r?(te=J.alternate,te!==null?(te=te.index,te<Q?(J.flags|=67108866,Q):te):(J.flags|=67108866,Q)):(J.flags|=1048576,Q)}function T(J){return r&&J.alternate===null&&(J.flags|=67108866),J}function M(J,Q,te,ue){return Q===null||Q.tag!==6?(Q=th(te,J.mode,ue),Q.return=J,Q):(Q=m(Q,te),Q.return=J,Q)}function Y(J,Q,te,ue){var Re=te.type;return Re===w?le(J,Q,te.props.children,ue,te.key):Q!==null&&(Q.elementType===Re||typeof Re=="object"&&Re!==null&&Re.$$typeof===$&&Js(Re)===Q.type)?(Q=m(Q,te.props),wo(Q,te),Q.return=J,Q):(Q=jc(te.type,te.key,te.props,null,J.mode,ue),wo(Q,te),Q.return=J,Q)}function ne(J,Q,te,ue){return Q===null||Q.tag!==4||Q.stateNode.containerInfo!==te.containerInfo||Q.stateNode.implementation!==te.implementation?(Q=nh(te,J.mode,ue),Q.return=J,Q):(Q=m(Q,te.children||[]),Q.return=J,Q)}function le(J,Q,te,ue,Re){return Q===null||Q.tag!==7?(Q=Gs(te,J.mode,ue,Re),Q.return=J,Q):(Q=m(Q,te),Q.return=J,Q)}function de(J,Q,te){if(typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint")return Q=th(""+Q,J.mode,te),Q.return=J,Q;if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case _:return te=jc(Q.type,Q.key,Q.props,null,J.mode,te),wo(te,Q),te.return=J,te;case x:return Q=nh(Q,J.mode,te),Q.return=J,Q;case $:return Q=Js(Q),de(J,Q,te)}if(V(Q)||H(Q))return Q=Gs(Q,J.mode,te,null),Q.return=J,Q;if(typeof Q.then=="function")return de(J,Lc(Q),te);if(Q.$$typeof===E)return de(J,Dc(J,Q),te);zc(J,Q)}return null}function ie(J,Q,te,ue){var Re=Q!==null?Q.key:null;if(typeof te=="string"&&te!==""||typeof te=="number"||typeof te=="bigint")return Re!==null?null:M(J,Q,""+te,ue);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case _:return te.key===Re?Y(J,Q,te,ue):null;case x:return te.key===Re?ne(J,Q,te,ue):null;case $:return te=Js(te),ie(J,Q,te,ue)}if(V(te)||H(te))return Re!==null?null:le(J,Q,te,ue,null);if(typeof te.then=="function")return ie(J,Q,Lc(te),ue);if(te.$$typeof===E)return ie(J,Q,Dc(J,te),ue);zc(J,te)}return null}function ae(J,Q,te,ue,Re){if(typeof ue=="string"&&ue!==""||typeof ue=="number"||typeof ue=="bigint")return J=J.get(te)||null,M(Q,J,""+ue,Re);if(typeof ue=="object"&&ue!==null){switch(ue.$$typeof){case _:return J=J.get(ue.key===null?te:ue.key)||null,Y(Q,J,ue,Re);case x:return J=J.get(ue.key===null?te:ue.key)||null,ne(Q,J,ue,Re);case $:return ue=Js(ue),ae(J,Q,te,ue,Re)}if(V(ue)||H(ue))return J=J.get(te)||null,le(Q,J,ue,Re,null);if(typeof ue.then=="function")return ae(J,Q,te,Lc(ue),Re);if(ue.$$typeof===E)return ae(J,Q,te,Dc(Q,ue),Re);zc(Q,ue)}return null}function be(J,Q,te,ue){for(var Re=null,We=null,Ee=Q,He=Q=0,Xe=null;Ee!==null&&He<te.length;He++){Ee.index>He?(Xe=Ee,Ee=null):Xe=Ee.sibling;var Je=ie(J,Ee,te[He],ue);if(Je===null){Ee===null&&(Ee=Xe);break}r&&Ee&&Je.alternate===null&&i(J,Ee),Q=y(Je,Q,He),We===null?Re=Je:We.sibling=Je,We=Je,Ee=Xe}if(He===te.length)return o(J,Ee),Qe&&Tr(J,He),Re;if(Ee===null){for(;He<te.length;He++)Ee=de(J,te[He],ue),Ee!==null&&(Q=y(Ee,Q,He),We===null?Re=Ee:We.sibling=Ee,We=Ee);return Qe&&Tr(J,He),Re}for(Ee=u(Ee);He<te.length;He++)Xe=ae(Ee,J,He,te[He],ue),Xe!==null&&(r&&Xe.alternate!==null&&Ee.delete(Xe.key===null?He:Xe.key),Q=y(Xe,Q,He),We===null?Re=Xe:We.sibling=Xe,We=Xe);return r&&Ee.forEach(function(As){return i(J,As)}),Qe&&Tr(J,He),Re}function De(J,Q,te,ue){if(te==null)throw Error(s(151));for(var Re=null,We=null,Ee=Q,He=Q=0,Xe=null,Je=te.next();Ee!==null&&!Je.done;He++,Je=te.next()){Ee.index>He?(Xe=Ee,Ee=null):Xe=Ee.sibling;var As=ie(J,Ee,Je.value,ue);if(As===null){Ee===null&&(Ee=Xe);break}r&&Ee&&As.alternate===null&&i(J,Ee),Q=y(As,Q,He),We===null?Re=As:We.sibling=As,We=As,Ee=Xe}if(Je.done)return o(J,Ee),Qe&&Tr(J,He),Re;if(Ee===null){for(;!Je.done;He++,Je=te.next())Je=de(J,Je.value,ue),Je!==null&&(Q=y(Je,Q,He),We===null?Re=Je:We.sibling=Je,We=Je);return Qe&&Tr(J,He),Re}for(Ee=u(Ee);!Je.done;He++,Je=te.next())Je=ae(Ee,J,He,Je.value,ue),Je!==null&&(r&&Je.alternate!==null&&Ee.delete(Je.key===null?He:Je.key),Q=y(Je,Q,He),We===null?Re=Je:We.sibling=Je,We=Je);return r&&Ee.forEach(function(HN){return i(J,HN)}),Qe&&Tr(J,He),Re}function st(J,Q,te,ue){if(typeof te=="object"&&te!==null&&te.type===w&&te.key===null&&(te=te.props.children),typeof te=="object"&&te!==null){switch(te.$$typeof){case _:e:{for(var Re=te.key;Q!==null;){if(Q.key===Re){if(Re=te.type,Re===w){if(Q.tag===7){o(J,Q.sibling),ue=m(Q,te.props.children),ue.return=J,J=ue;break e}}else if(Q.elementType===Re||typeof Re=="object"&&Re!==null&&Re.$$typeof===$&&Js(Re)===Q.type){o(J,Q.sibling),ue=m(Q,te.props),wo(ue,te),ue.return=J,J=ue;break e}o(J,Q);break}else i(J,Q);Q=Q.sibling}te.type===w?(ue=Gs(te.props.children,J.mode,ue,te.key),ue.return=J,J=ue):(ue=jc(te.type,te.key,te.props,null,J.mode,ue),wo(ue,te),ue.return=J,J=ue)}return T(J);case x:e:{for(Re=te.key;Q!==null;){if(Q.key===Re)if(Q.tag===4&&Q.stateNode.containerInfo===te.containerInfo&&Q.stateNode.implementation===te.implementation){o(J,Q.sibling),ue=m(Q,te.children||[]),ue.return=J,J=ue;break e}else{o(J,Q);break}else i(J,Q);Q=Q.sibling}ue=nh(te,J.mode,ue),ue.return=J,J=ue}return T(J);case $:return te=Js(te),st(J,Q,te,ue)}if(V(te))return be(J,Q,te,ue);if(H(te)){if(Re=H(te),typeof Re!="function")throw Error(s(150));return te=Re.call(te),De(J,Q,te,ue)}if(typeof te.then=="function")return st(J,Q,Lc(te),ue);if(te.$$typeof===E)return st(J,Q,Dc(J,te),ue);zc(J,te)}return typeof te=="string"&&te!==""||typeof te=="number"||typeof te=="bigint"?(te=""+te,Q!==null&&Q.tag===6?(o(J,Q.sibling),ue=m(Q,te),ue.return=J,J=ue):(o(J,Q),ue=th(te,J.mode,ue),ue.return=J,J=ue),T(J)):o(J,Q)}return function(J,Q,te,ue){try{bo=0;var Re=st(J,Q,te,ue);return ea=null,Re}catch(Ee){if(Ee===Zi||Ee===$c)throw Ee;var We=bn(29,Ee,null,J.mode);return We.lanes=ue,We.return=J,We}finally{}}}var ei=y0(!0),v0=y0(!1),cs=!1;function mh(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ph(r,i){r=r.updateQueue,i.updateQueue===r&&(i.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function us(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function ds(r,i,o){var u=r.updateQueue;if(u===null)return null;if(u=u.shared,(Ze&2)!==0){var m=u.pending;return m===null?i.next=i:(i.next=m.next,m.next=i),u.pending=i,i=Rc(r),t0(r,null,o),i}return Oc(r,u,i,o),Rc(r)}function xo(r,i,o){if(i=i.updateQueue,i!==null&&(i=i.shared,(o&4194048)!==0)){var u=i.lanes;u&=r.pendingLanes,o|=u,i.lanes=o,lc(r,o)}}function gh(r,i){var o=r.updateQueue,u=r.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var m=null,y=null;if(o=o.firstBaseUpdate,o!==null){do{var T={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};y===null?m=y=T:y=y.next=T,o=o.next}while(o!==null);y===null?m=y=i:y=y.next=i}else m=y=i;o={baseState:u.baseState,firstBaseUpdate:m,lastBaseUpdate:y,shared:u.shared,callbacks:u.callbacks},r.updateQueue=o;return}r=o.lastBaseUpdate,r===null?o.firstBaseUpdate=i:r.next=i,o.lastBaseUpdate=i}var yh=!1;function So(){if(yh){var r=Ji;if(r!==null)throw r}}function Eo(r,i,o,u){yh=!1;var m=r.updateQueue;cs=!1;var y=m.firstBaseUpdate,T=m.lastBaseUpdate,M=m.shared.pending;if(M!==null){m.shared.pending=null;var Y=M,ne=Y.next;Y.next=null,T===null?y=ne:T.next=ne,T=Y;var le=r.alternate;le!==null&&(le=le.updateQueue,M=le.lastBaseUpdate,M!==T&&(M===null?le.firstBaseUpdate=ne:M.next=ne,le.lastBaseUpdate=Y))}if(y!==null){var de=m.baseState;T=0,le=ne=Y=null,M=y;do{var ie=M.lane&-536870913,ae=ie!==M.lane;if(ae?(Ge&ie)===ie:(u&ie)===ie){ie!==0&&ie===Wi&&(yh=!0),le!==null&&(le=le.next={lane:0,tag:M.tag,payload:M.payload,callback:null,next:null});e:{var be=r,De=M;ie=i;var st=o;switch(De.tag){case 1:if(be=De.payload,typeof be=="function"){de=be.call(st,de,ie);break e}de=be;break e;case 3:be.flags=be.flags&-65537|128;case 0:if(be=De.payload,ie=typeof be=="function"?be.call(st,de,ie):be,ie==null)break e;de=g({},de,ie);break e;case 2:cs=!0}}ie=M.callback,ie!==null&&(r.flags|=64,ae&&(r.flags|=8192),ae=m.callbacks,ae===null?m.callbacks=[ie]:ae.push(ie))}else ae={lane:ie,tag:M.tag,payload:M.payload,callback:M.callback,next:null},le===null?(ne=le=ae,Y=de):le=le.next=ae,T|=ie;if(M=M.next,M===null){if(M=m.shared.pending,M===null)break;ae=M,M=ae.next,ae.next=null,m.lastBaseUpdate=ae,m.shared.pending=null}}while(!0);le===null&&(Y=de),m.baseState=Y,m.firstBaseUpdate=ne,m.lastBaseUpdate=le,y===null&&(m.shared.lanes=0),gs|=T,r.lanes=T,r.memoizedState=de}}function _0(r,i){if(typeof r!="function")throw Error(s(191,r));r.call(i)}function b0(r,i){var o=r.callbacks;if(o!==null)for(r.callbacks=null,r=0;r<o.length;r++)_0(o[r],i)}var ta=D(null),Bc=D(0);function w0(r,i){r=Lr,Z(Bc,r),Z(ta,i),Lr=r|i.baseLanes}function vh(){Z(Bc,Lr),Z(ta,ta.current)}function _h(){Lr=Bc.current,P(ta),P(Bc)}var wn=D(null),zn=null;function fs(r){var i=r.alternate;Z(wt,wt.current&1),Z(wn,r),zn===null&&(i===null||ta.current!==null||i.memoizedState!==null)&&(zn=r)}function bh(r){Z(wt,wt.current),Z(wn,r),zn===null&&(zn=r)}function x0(r){r.tag===22?(Z(wt,wt.current),Z(wn,r),zn===null&&(zn=r)):hs()}function hs(){Z(wt,wt.current),Z(wn,wn.current)}function xn(r){P(wn),zn===r&&(zn=null),P(wt)}var wt=D(0);function Pc(r){for(var i=r;i!==null;){if(i.tag===13){var o=i.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||Am(o)||Tm(o)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break;for(;i.sibling===null;){if(i.return===null||i.return===r)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Rr=0,qe=null,nt=null,Ct=null,qc=!1,na=!1,ti=!1,Hc=0,Co=0,ra=null,MT=0;function _t(){throw Error(s(321))}function wh(r,i){if(i===null)return!1;for(var o=0;o<i.length&&o<r.length;o++)if(!_n(r[o],i[o]))return!1;return!0}function xh(r,i,o,u,m,y){return Rr=y,qe=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,U.H=r===null||r.memoizedState===null?iv:Ih,ti=!1,y=o(u,m),ti=!1,na&&(y=E0(i,o,u,m)),S0(r),y}function S0(r){U.H=No;var i=nt!==null&&nt.next!==null;if(Rr=0,Ct=nt=qe=null,qc=!1,Co=0,ra=null,i)throw Error(s(300));r===null||At||(r=r.dependencies,r!==null&&Mc(r)&&(At=!0))}function E0(r,i,o,u){qe=r;var m=0;do{if(na&&(ra=null),Co=0,na=!1,25<=m)throw Error(s(301));if(m+=1,Ct=nt=null,r.updateQueue!=null){var y=r.updateQueue;y.lastEffect=null,y.events=null,y.stores=null,y.memoCache!=null&&(y.memoCache.index=0)}U.H=av,y=i(o,u)}while(na);return y}function DT(){var r=U.H,i=r.useState()[0];return i=typeof i.then=="function"?Ao(i):i,r=r.useState()[0],(nt!==null?nt.memoizedState:null)!==r&&(qe.flags|=1024),i}function Sh(){var r=Hc!==0;return Hc=0,r}function Eh(r,i,o){i.updateQueue=r.updateQueue,i.flags&=-2053,r.lanes&=~o}function Ch(r){if(qc){for(r=r.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}qc=!1}Rr=0,Ct=nt=qe=null,na=!1,Co=Hc=0,ra=null}function an(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ct===null?qe.memoizedState=Ct=r:Ct=Ct.next=r,Ct}function xt(){if(nt===null){var r=qe.alternate;r=r!==null?r.memoizedState:null}else r=nt.next;var i=Ct===null?qe.memoizedState:Ct.next;if(i!==null)Ct=i,nt=r;else{if(r===null)throw qe.alternate===null?Error(s(467)):Error(s(310));nt=r,r={memoizedState:nt.memoizedState,baseState:nt.baseState,baseQueue:nt.baseQueue,queue:nt.queue,next:null},Ct===null?qe.memoizedState=Ct=r:Ct=Ct.next=r}return Ct}function Vc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ao(r){var i=Co;return Co+=1,ra===null&&(ra=[]),r=m0(ra,r,i),i=qe,(Ct===null?i.memoizedState:Ct.next)===null&&(i=i.alternate,U.H=i===null||i.memoizedState===null?iv:Ih),r}function Fc(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return Ao(r);if(r.$$typeof===E)return Ht(r)}throw Error(s(438,String(r)))}function Ah(r){var i=null,o=qe.updateQueue;if(o!==null&&(i=o.memoCache),i==null){var u=qe.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(i={data:u.data.map(function(m){return m.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),o===null&&(o=Vc(),qe.updateQueue=o),o.memoCache=i,o=i.data[i.index],o===void 0)for(o=i.data[i.index]=Array(r),u=0;u<r;u++)o[u]=X;return i.index++,o}function jr(r,i){return typeof i=="function"?i(r):i}function Yc(r){var i=xt();return Th(i,nt,r)}function Th(r,i,o){var u=r.queue;if(u===null)throw Error(s(311));u.lastRenderedReducer=o;var m=r.baseQueue,y=u.pending;if(y!==null){if(m!==null){var T=m.next;m.next=y.next,y.next=T}i.baseQueue=m=y,u.pending=null}if(y=r.baseState,m===null)r.memoizedState=y;else{i=m.next;var M=T=null,Y=null,ne=i,le=!1;do{var de=ne.lane&-536870913;if(de!==ne.lane?(Ge&de)===de:(Rr&de)===de){var ie=ne.revertLane;if(ie===0)Y!==null&&(Y=Y.next={lane:0,revertLane:0,gesture:null,action:ne.action,hasEagerState:ne.hasEagerState,eagerState:ne.eagerState,next:null}),de===Wi&&(le=!0);else if((Rr&ie)===ie){ne=ne.next,ie===Wi&&(le=!0);continue}else de={lane:0,revertLane:ne.revertLane,gesture:null,action:ne.action,hasEagerState:ne.hasEagerState,eagerState:ne.eagerState,next:null},Y===null?(M=Y=de,T=y):Y=Y.next=de,qe.lanes|=ie,gs|=ie;de=ne.action,ti&&o(y,de),y=ne.hasEagerState?ne.eagerState:o(y,de)}else ie={lane:de,revertLane:ne.revertLane,gesture:ne.gesture,action:ne.action,hasEagerState:ne.hasEagerState,eagerState:ne.eagerState,next:null},Y===null?(M=Y=ie,T=y):Y=Y.next=ie,qe.lanes|=de,gs|=de;ne=ne.next}while(ne!==null&&ne!==i);if(Y===null?T=y:Y.next=M,!_n(y,r.memoizedState)&&(At=!0,le&&(o=Ji,o!==null)))throw o;r.memoizedState=y,r.baseState=T,r.baseQueue=Y,u.lastRenderedState=y}return m===null&&(u.lanes=0),[r.memoizedState,u.dispatch]}function Nh(r){var i=xt(),o=i.queue;if(o===null)throw Error(s(311));o.lastRenderedReducer=r;var u=o.dispatch,m=o.pending,y=i.memoizedState;if(m!==null){o.pending=null;var T=m=m.next;do y=r(y,T.action),T=T.next;while(T!==m);_n(y,i.memoizedState)||(At=!0),i.memoizedState=y,i.baseQueue===null&&(i.baseState=y),o.lastRenderedState=y}return[y,u]}function C0(r,i,o){var u=qe,m=xt(),y=Qe;if(y){if(o===void 0)throw Error(s(407));o=o()}else o=i();var T=!_n((nt||m).memoizedState,o);if(T&&(m.memoizedState=o,At=!0),m=m.queue,jh(N0.bind(null,u,m,r),[r]),m.getSnapshot!==i||T||Ct!==null&&Ct.memoizedState.tag&1){if(u.flags|=2048,sa(9,{destroy:void 0},T0.bind(null,u,m,o,i),null),it===null)throw Error(s(349));y||(Rr&127)!==0||A0(u,i,o)}return o}function A0(r,i,o){r.flags|=16384,r={getSnapshot:i,value:o},i=qe.updateQueue,i===null?(i=Vc(),qe.updateQueue=i,i.stores=[r]):(o=i.stores,o===null?i.stores=[r]:o.push(r))}function T0(r,i,o,u){i.value=o,i.getSnapshot=u,O0(i)&&R0(r)}function N0(r,i,o){return o(function(){O0(i)&&R0(r)})}function O0(r){var i=r.getSnapshot;r=r.value;try{var o=i();return!_n(r,o)}catch{return!0}}function R0(r){var i=Ys(r,2);i!==null&&pn(i,r,2)}function Oh(r){var i=an();if(typeof r=="function"){var o=r;if(r=o(),ti){or(!0);try{o()}finally{or(!1)}}}return i.memoizedState=i.baseState=r,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:jr,lastRenderedState:r},i}function j0(r,i,o,u){return r.baseState=o,Th(r,nt,typeof u=="function"?u:jr)}function UT(r,i,o,u,m){if(Kc(r))throw Error(s(485));if(r=i.action,r!==null){var y={payload:m,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(T){y.listeners.push(T)}};U.T!==null?o(!0):y.isTransition=!1,u(y),o=i.pending,o===null?(y.next=i.pending=y,k0(i,y)):(y.next=o.next,i.pending=o.next=y)}}function k0(r,i){var o=i.action,u=i.payload,m=r.state;if(i.isTransition){var y=U.T,T={};U.T=T;try{var M=o(m,u),Y=U.S;Y!==null&&Y(T,M),M0(r,i,M)}catch(ne){Rh(r,i,ne)}finally{y!==null&&T.types!==null&&(y.types=T.types),U.T=y}}else try{y=o(m,u),M0(r,i,y)}catch(ne){Rh(r,i,ne)}}function M0(r,i,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(u){D0(r,i,u)},function(u){return Rh(r,i,u)}):D0(r,i,o)}function D0(r,i,o){i.status="fulfilled",i.value=o,U0(i),r.state=o,i=r.pending,i!==null&&(o=i.next,o===i?r.pending=null:(o=o.next,i.next=o,k0(r,o)))}function Rh(r,i,o){var u=r.pending;if(r.pending=null,u!==null){u=u.next;do i.status="rejected",i.reason=o,U0(i),i=i.next;while(i!==u)}r.action=null}function U0(r){r=r.listeners;for(var i=0;i<r.length;i++)(0,r[i])()}function $0(r,i){return i}function I0(r,i){if(Qe){var o=it.formState;if(o!==null){e:{var u=qe;if(Qe){if(ot){t:{for(var m=ot,y=Ln;m.nodeType!==8;){if(!y){m=null;break t}if(m=Bn(m.nextSibling),m===null){m=null;break t}}y=m.data,m=y==="F!"||y==="F"?m:null}if(m){ot=Bn(m.nextSibling),u=m.data==="F!";break e}}os(u)}u=!1}u&&(i=o[0])}}return o=an(),o.memoizedState=o.baseState=i,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:$0,lastRenderedState:i},o.queue=u,o=nv.bind(null,qe,u),u.dispatch=o,u=Oh(!1),y=$h.bind(null,qe,!1,u.queue),u=an(),m={state:i,dispatch:null,action:r,pending:null},u.queue=m,o=UT.bind(null,qe,m,y,o),m.dispatch=o,u.memoizedState=r,[i,o,!1]}function L0(r){var i=xt();return z0(i,nt,r)}function z0(r,i,o){if(i=Th(r,i,$0)[0],r=Yc(jr)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var u=Ao(i)}catch(T){throw T===Zi?$c:T}else u=i;i=xt();var m=i.queue,y=m.dispatch;return o!==i.memoizedState&&(qe.flags|=2048,sa(9,{destroy:void 0},$T.bind(null,m,o),null)),[u,y,r]}function $T(r,i){r.action=i}function B0(r){var i=xt(),o=nt;if(o!==null)return z0(i,o,r);xt(),i=i.memoizedState,o=xt();var u=o.queue.dispatch;return o.memoizedState=r,[i,u,!1]}function sa(r,i,o,u){return r={tag:r,create:o,deps:u,inst:i,next:null},i=qe.updateQueue,i===null&&(i=Vc(),qe.updateQueue=i),o=i.lastEffect,o===null?i.lastEffect=r.next=r:(u=o.next,o.next=r,r.next=u,i.lastEffect=r),r}function P0(){return xt().memoizedState}function Gc(r,i,o,u){var m=an();qe.flags|=r,m.memoizedState=sa(1|i,{destroy:void 0},o,u===void 0?null:u)}function Xc(r,i,o,u){var m=xt();u=u===void 0?null:u;var y=m.memoizedState.inst;nt!==null&&u!==null&&wh(u,nt.memoizedState.deps)?m.memoizedState=sa(i,y,o,u):(qe.flags|=r,m.memoizedState=sa(1|i,y,o,u))}function q0(r,i){Gc(8390656,8,r,i)}function jh(r,i){Xc(2048,8,r,i)}function IT(r){qe.flags|=4;var i=qe.updateQueue;if(i===null)i=Vc(),qe.updateQueue=i,i.events=[r];else{var o=i.events;o===null?i.events=[r]:o.push(r)}}function H0(r){var i=xt().memoizedState;return IT({ref:i,nextImpl:r}),function(){if((Ze&2)!==0)throw Error(s(440));return i.impl.apply(void 0,arguments)}}function V0(r,i){return Xc(4,2,r,i)}function F0(r,i){return Xc(4,4,r,i)}function Y0(r,i){if(typeof i=="function"){r=r();var o=i(r);return function(){typeof o=="function"?o():i(null)}}if(i!=null)return r=r(),i.current=r,function(){i.current=null}}function G0(r,i,o){o=o!=null?o.concat([r]):null,Xc(4,4,Y0.bind(null,i,r),o)}function kh(){}function X0(r,i){var o=xt();i=i===void 0?null:i;var u=o.memoizedState;return i!==null&&wh(i,u[1])?u[0]:(o.memoizedState=[r,i],r)}function K0(r,i){var o=xt();i=i===void 0?null:i;var u=o.memoizedState;if(i!==null&&wh(i,u[1]))return u[0];if(u=r(),ti){or(!0);try{r()}finally{or(!1)}}return o.memoizedState=[u,i],u}function Mh(r,i,o){return o===void 0||(Rr&1073741824)!==0&&(Ge&261930)===0?r.memoizedState=i:(r.memoizedState=o,r=Qv(),qe.lanes|=r,gs|=r,o)}function Q0(r,i,o,u){return _n(o,i)?o:ta.current!==null?(r=Mh(r,o,u),_n(r,i)||(At=!0),r):(Rr&42)===0||(Rr&1073741824)!==0&&(Ge&261930)===0?(At=!0,r.memoizedState=o):(r=Qv(),qe.lanes|=r,gs|=r,i)}function W0(r,i,o,u,m){var y=z.p;z.p=y!==0&&8>y?y:8;var T=U.T,M={};U.T=M,$h(r,!1,i,o);try{var Y=m(),ne=U.S;if(ne!==null&&ne(M,Y),Y!==null&&typeof Y=="object"&&typeof Y.then=="function"){var le=kT(Y,u);To(r,i,le,Cn(r))}else To(r,i,u,Cn(r))}catch(de){To(r,i,{then:function(){},status:"rejected",reason:de},Cn())}finally{z.p=y,T!==null&&M.types!==null&&(T.types=M.types),U.T=T}}function LT(){}function Dh(r,i,o,u){if(r.tag!==5)throw Error(s(476));var m=J0(r).queue;W0(r,m,i,q,o===null?LT:function(){return Z0(r),o(u)})}function J0(r){var i=r.memoizedState;if(i!==null)return i;i={memoizedState:q,baseState:q,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:jr,lastRenderedState:q},next:null};var o={};return i.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:jr,lastRenderedState:o},next:null},r.memoizedState=i,r=r.alternate,r!==null&&(r.memoizedState=i),i}function Z0(r){var i=J0(r);i.next===null&&(i=r.alternate.memoizedState),To(r,i.next.queue,{},Cn())}function Uh(){return Ht(Vo)}function ev(){return xt().memoizedState}function tv(){return xt().memoizedState}function zT(r){for(var i=r.return;i!==null;){switch(i.tag){case 24:case 3:var o=Cn();r=us(o);var u=ds(i,r,o);u!==null&&(pn(u,i,o),xo(u,i,o)),i={cache:uh()},r.payload=i;return}i=i.return}}function BT(r,i,o){var u=Cn();o={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},Kc(r)?rv(i,o):(o=Zf(r,i,o,u),o!==null&&(pn(o,r,u),sv(o,i,u)))}function nv(r,i,o){var u=Cn();To(r,i,o,u)}function To(r,i,o,u){var m={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null};if(Kc(r))rv(i,m);else{var y=r.alternate;if(r.lanes===0&&(y===null||y.lanes===0)&&(y=i.lastRenderedReducer,y!==null))try{var T=i.lastRenderedState,M=y(T,o);if(m.hasEagerState=!0,m.eagerState=M,_n(M,T))return Oc(r,i,m,0),it===null&&Nc(),!1}catch{}finally{}if(o=Zf(r,i,m,u),o!==null)return pn(o,r,u),sv(o,i,u),!0}return!1}function $h(r,i,o,u){if(u={lane:2,revertLane:mm(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},Kc(r)){if(i)throw Error(s(479))}else i=Zf(r,o,u,2),i!==null&&pn(i,r,2)}function Kc(r){var i=r.alternate;return r===qe||i!==null&&i===qe}function rv(r,i){na=qc=!0;var o=r.pending;o===null?i.next=i:(i.next=o.next,o.next=i),r.pending=i}function sv(r,i,o){if((o&4194048)!==0){var u=i.lanes;u&=r.pendingLanes,o|=u,i.lanes=o,lc(r,o)}}var No={readContext:Ht,use:Fc,useCallback:_t,useContext:_t,useEffect:_t,useImperativeHandle:_t,useLayoutEffect:_t,useInsertionEffect:_t,useMemo:_t,useReducer:_t,useRef:_t,useState:_t,useDebugValue:_t,useDeferredValue:_t,useTransition:_t,useSyncExternalStore:_t,useId:_t,useHostTransitionStatus:_t,useFormState:_t,useActionState:_t,useOptimistic:_t,useMemoCache:_t,useCacheRefresh:_t};No.useEffectEvent=_t;var iv={readContext:Ht,use:Fc,useCallback:function(r,i){return an().memoizedState=[r,i===void 0?null:i],r},useContext:Ht,useEffect:q0,useImperativeHandle:function(r,i,o){o=o!=null?o.concat([r]):null,Gc(4194308,4,Y0.bind(null,i,r),o)},useLayoutEffect:function(r,i){return Gc(4194308,4,r,i)},useInsertionEffect:function(r,i){Gc(4,2,r,i)},useMemo:function(r,i){var o=an();i=i===void 0?null:i;var u=r();if(ti){or(!0);try{r()}finally{or(!1)}}return o.memoizedState=[u,i],u},useReducer:function(r,i,o){var u=an();if(o!==void 0){var m=o(i);if(ti){or(!0);try{o(i)}finally{or(!1)}}}else m=i;return u.memoizedState=u.baseState=m,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:m},u.queue=r,r=r.dispatch=BT.bind(null,qe,r),[u.memoizedState,r]},useRef:function(r){var i=an();return r={current:r},i.memoizedState=r},useState:function(r){r=Oh(r);var i=r.queue,o=nv.bind(null,qe,i);return i.dispatch=o,[r.memoizedState,o]},useDebugValue:kh,useDeferredValue:function(r,i){var o=an();return Mh(o,r,i)},useTransition:function(){var r=Oh(!1);return r=W0.bind(null,qe,r.queue,!0,!1),an().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,i,o){var u=qe,m=an();if(Qe){if(o===void 0)throw Error(s(407));o=o()}else{if(o=i(),it===null)throw Error(s(349));(Ge&127)!==0||A0(u,i,o)}m.memoizedState=o;var y={value:o,getSnapshot:i};return m.queue=y,q0(N0.bind(null,u,y,r),[r]),u.flags|=2048,sa(9,{destroy:void 0},T0.bind(null,u,y,o,i),null),o},useId:function(){var r=an(),i=it.identifierPrefix;if(Qe){var o=ur,u=cr;o=(u&~(1<<32-sn(u)-1)).toString(32)+o,i="_"+i+"R_"+o,o=Hc++,0<o&&(i+="H"+o.toString(32)),i+="_"}else o=MT++,i="_"+i+"r_"+o.toString(32)+"_";return r.memoizedState=i},useHostTransitionStatus:Uh,useFormState:I0,useActionState:I0,useOptimistic:function(r){var i=an();i.memoizedState=i.baseState=r;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=o,i=$h.bind(null,qe,!0,o),o.dispatch=i,[r,i]},useMemoCache:Ah,useCacheRefresh:function(){return an().memoizedState=zT.bind(null,qe)},useEffectEvent:function(r){var i=an(),o={impl:r};return i.memoizedState=o,function(){if((Ze&2)!==0)throw Error(s(440));return o.impl.apply(void 0,arguments)}}},Ih={readContext:Ht,use:Fc,useCallback:X0,useContext:Ht,useEffect:jh,useImperativeHandle:G0,useInsertionEffect:V0,useLayoutEffect:F0,useMemo:K0,useReducer:Yc,useRef:P0,useState:function(){return Yc(jr)},useDebugValue:kh,useDeferredValue:function(r,i){var o=xt();return Q0(o,nt.memoizedState,r,i)},useTransition:function(){var r=Yc(jr)[0],i=xt().memoizedState;return[typeof r=="boolean"?r:Ao(r),i]},useSyncExternalStore:C0,useId:ev,useHostTransitionStatus:Uh,useFormState:L0,useActionState:L0,useOptimistic:function(r,i){var o=xt();return j0(o,nt,r,i)},useMemoCache:Ah,useCacheRefresh:tv};Ih.useEffectEvent=H0;var av={readContext:Ht,use:Fc,useCallback:X0,useContext:Ht,useEffect:jh,useImperativeHandle:G0,useInsertionEffect:V0,useLayoutEffect:F0,useMemo:K0,useReducer:Nh,useRef:P0,useState:function(){return Nh(jr)},useDebugValue:kh,useDeferredValue:function(r,i){var o=xt();return nt===null?Mh(o,r,i):Q0(o,nt.memoizedState,r,i)},useTransition:function(){var r=Nh(jr)[0],i=xt().memoizedState;return[typeof r=="boolean"?r:Ao(r),i]},useSyncExternalStore:C0,useId:ev,useHostTransitionStatus:Uh,useFormState:B0,useActionState:B0,useOptimistic:function(r,i){var o=xt();return nt!==null?j0(o,nt,r,i):(o.baseState=r,[r,o.queue.dispatch])},useMemoCache:Ah,useCacheRefresh:tv};av.useEffectEvent=H0;function Lh(r,i,o,u){i=r.memoizedState,o=o(u,i),o=o==null?i:g({},i,o),r.memoizedState=o,r.lanes===0&&(r.updateQueue.baseState=o)}var zh={enqueueSetState:function(r,i,o){r=r._reactInternals;var u=Cn(),m=us(u);m.payload=i,o!=null&&(m.callback=o),i=ds(r,m,u),i!==null&&(pn(i,r,u),xo(i,r,u))},enqueueReplaceState:function(r,i,o){r=r._reactInternals;var u=Cn(),m=us(u);m.tag=1,m.payload=i,o!=null&&(m.callback=o),i=ds(r,m,u),i!==null&&(pn(i,r,u),xo(i,r,u))},enqueueForceUpdate:function(r,i){r=r._reactInternals;var o=Cn(),u=us(o);u.tag=2,i!=null&&(u.callback=i),i=ds(r,u,o),i!==null&&(pn(i,r,o),xo(i,r,o))}};function ov(r,i,o,u,m,y,T){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(u,y,T):i.prototype&&i.prototype.isPureReactComponent?!mo(o,u)||!mo(m,y):!0}function lv(r,i,o,u){r=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(o,u),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(o,u),i.state!==r&&zh.enqueueReplaceState(i,i.state,null)}function ni(r,i){var o=i;if("ref"in i){o={};for(var u in i)u!=="ref"&&(o[u]=i[u])}if(r=r.defaultProps){o===i&&(o=g({},o));for(var m in r)o[m]===void 0&&(o[m]=r[m])}return o}function cv(r){Tc(r)}function uv(r){console.error(r)}function dv(r){Tc(r)}function Qc(r,i){try{var o=r.onUncaughtError;o(i.value,{componentStack:i.stack})}catch(u){setTimeout(function(){throw u})}}function fv(r,i,o){try{var u=r.onCaughtError;u(o.value,{componentStack:o.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(m){setTimeout(function(){throw m})}}function Bh(r,i,o){return o=us(o),o.tag=3,o.payload={element:null},o.callback=function(){Qc(r,i)},o}function hv(r){return r=us(r),r.tag=3,r}function mv(r,i,o,u){var m=o.type.getDerivedStateFromError;if(typeof m=="function"){var y=u.value;r.payload=function(){return m(y)},r.callback=function(){fv(i,o,u)}}var T=o.stateNode;T!==null&&typeof T.componentDidCatch=="function"&&(r.callback=function(){fv(i,o,u),typeof m!="function"&&(ys===null?ys=new Set([this]):ys.add(this));var M=u.stack;this.componentDidCatch(u.value,{componentStack:M!==null?M:""})})}function PT(r,i,o,u,m){if(o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(i=o.alternate,i!==null&&Qi(i,o,m,!0),o=wn.current,o!==null){switch(o.tag){case 31:case 13:return zn===null?lu():o.alternate===null&&bt===0&&(bt=3),o.flags&=-257,o.flags|=65536,o.lanes=m,u===Ic?o.flags|=16384:(i=o.updateQueue,i===null?o.updateQueue=new Set([u]):i.add(u),dm(r,u,m)),!1;case 22:return o.flags|=65536,u===Ic?o.flags|=16384:(i=o.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([u])},o.updateQueue=i):(o=i.retryQueue,o===null?i.retryQueue=new Set([u]):o.add(u)),dm(r,u,m)),!1}throw Error(s(435,o.tag))}return dm(r,u,m),lu(),!1}if(Qe)return i=wn.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=m,u!==ih&&(r=Error(s(422),{cause:u}),yo(Un(r,o)))):(u!==ih&&(i=Error(s(423),{cause:u}),yo(Un(i,o))),r=r.current.alternate,r.flags|=65536,m&=-m,r.lanes|=m,u=Un(u,o),m=Bh(r.stateNode,u,m),gh(r,m),bt!==4&&(bt=2)),!1;var y=Error(s(520),{cause:u});if(y=Un(y,o),$o===null?$o=[y]:$o.push(y),bt!==4&&(bt=2),i===null)return!0;u=Un(u,o),o=i;do{switch(o.tag){case 3:return o.flags|=65536,r=m&-m,o.lanes|=r,r=Bh(o.stateNode,u,r),gh(o,r),!1;case 1:if(i=o.type,y=o.stateNode,(o.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(ys===null||!ys.has(y))))return o.flags|=65536,m&=-m,o.lanes|=m,m=hv(m),mv(m,r,o,u),gh(o,m),!1}o=o.return}while(o!==null);return!1}var Ph=Error(s(461)),At=!1;function Vt(r,i,o,u){i.child=r===null?v0(i,null,o,u):ei(i,r.child,o,u)}function pv(r,i,o,u,m){o=o.render;var y=i.ref;if("ref"in u){var T={};for(var M in u)M!=="ref"&&(T[M]=u[M])}else T=u;return Qs(i),u=xh(r,i,o,T,y,m),M=Sh(),r!==null&&!At?(Eh(r,i,m),kr(r,i,m)):(Qe&&M&&rh(i),i.flags|=1,Vt(r,i,u,m),i.child)}function gv(r,i,o,u,m){if(r===null){var y=o.type;return typeof y=="function"&&!eh(y)&&y.defaultProps===void 0&&o.compare===null?(i.tag=15,i.type=y,yv(r,i,y,u,m)):(r=jc(o.type,null,u,i,i.mode,m),r.ref=i.ref,r.return=i,i.child=r)}if(y=r.child,!Kh(r,m)){var T=y.memoizedProps;if(o=o.compare,o=o!==null?o:mo,o(T,u)&&r.ref===i.ref)return kr(r,i,m)}return i.flags|=1,r=Ar(y,u),r.ref=i.ref,r.return=i,i.child=r}function yv(r,i,o,u,m){if(r!==null){var y=r.memoizedProps;if(mo(y,u)&&r.ref===i.ref)if(At=!1,i.pendingProps=u=y,Kh(r,m))(r.flags&131072)!==0&&(At=!0);else return i.lanes=r.lanes,kr(r,i,m)}return qh(r,i,o,u,m)}function vv(r,i,o,u){var m=u.children,y=r!==null?r.memoizedState:null;if(r===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((i.flags&128)!==0){if(y=y!==null?y.baseLanes|o:o,r!==null){for(u=i.child=r.child,m=0;u!==null;)m=m|u.lanes|u.childLanes,u=u.sibling;u=m&~y}else u=0,i.child=null;return _v(r,i,y,o,u)}if((o&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},r!==null&&Uc(i,y!==null?y.cachePool:null),y!==null?w0(i,y):vh(),x0(i);else return u=i.lanes=536870912,_v(r,i,y!==null?y.baseLanes|o:o,o,u)}else y!==null?(Uc(i,y.cachePool),w0(i,y),hs(),i.memoizedState=null):(r!==null&&Uc(i,null),vh(),hs());return Vt(r,i,m,o),i.child}function Oo(r,i){return r!==null&&r.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function _v(r,i,o,u,m){var y=fh();return y=y===null?null:{parent:Et._currentValue,pool:y},i.memoizedState={baseLanes:o,cachePool:y},r!==null&&Uc(i,null),vh(),x0(i),r!==null&&Qi(r,i,u,!0),i.childLanes=m,null}function Wc(r,i){return i=Zc({mode:i.mode,children:i.children},r.mode),i.ref=r.ref,r.child=i,i.return=r,i}function bv(r,i,o){return ei(i,r.child,null,o),r=Wc(i,i.pendingProps),r.flags|=2,xn(i),i.memoizedState=null,r}function qT(r,i,o){var u=i.pendingProps,m=(i.flags&128)!==0;if(i.flags&=-129,r===null){if(Qe){if(u.mode==="hidden")return r=Wc(i,u),i.lanes=536870912,Oo(null,r);if(bh(i),(r=ot)?(r=k_(r,Ln),r=r!==null&&r.data==="&"?r:null,r!==null&&(i.memoizedState={dehydrated:r,treeContext:is!==null?{id:cr,overflow:ur}:null,retryLane:536870912,hydrationErrors:null},o=r0(r),o.return=i,i.child=o,qt=i,ot=null)):r=null,r===null)throw os(i);return i.lanes=536870912,null}return Wc(i,u)}var y=r.memoizedState;if(y!==null){var T=y.dehydrated;if(bh(i),m)if(i.flags&256)i.flags&=-257,i=bv(r,i,o);else if(i.memoizedState!==null)i.child=r.child,i.flags|=128,i=null;else throw Error(s(558));else if(At||Qi(r,i,o,!1),m=(o&r.childLanes)!==0,At||m){if(u=it,u!==null&&(T=cc(u,o),T!==0&&T!==y.retryLane))throw y.retryLane=T,Ys(r,T),pn(u,r,T),Ph;lu(),i=bv(r,i,o)}else r=y.treeContext,ot=Bn(T.nextSibling),qt=i,Qe=!0,as=null,Ln=!1,r!==null&&a0(i,r),i=Wc(i,u),i.flags|=4096;return i}return r=Ar(r.child,{mode:u.mode,children:u.children}),r.ref=i.ref,i.child=r,r.return=i,r}function Jc(r,i){var o=i.ref;if(o===null)r!==null&&r.ref!==null&&(i.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(s(284));(r===null||r.ref!==o)&&(i.flags|=4194816)}}function qh(r,i,o,u,m){return Qs(i),o=xh(r,i,o,u,void 0,m),u=Sh(),r!==null&&!At?(Eh(r,i,m),kr(r,i,m)):(Qe&&u&&rh(i),i.flags|=1,Vt(r,i,o,m),i.child)}function wv(r,i,o,u,m,y){return Qs(i),i.updateQueue=null,o=E0(i,u,o,m),S0(r),u=Sh(),r!==null&&!At?(Eh(r,i,y),kr(r,i,y)):(Qe&&u&&rh(i),i.flags|=1,Vt(r,i,o,y),i.child)}function xv(r,i,o,u,m){if(Qs(i),i.stateNode===null){var y=Yi,T=o.contextType;typeof T=="object"&&T!==null&&(y=Ht(T)),y=new o(u,y),i.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=zh,i.stateNode=y,y._reactInternals=i,y=i.stateNode,y.props=u,y.state=i.memoizedState,y.refs={},mh(i),T=o.contextType,y.context=typeof T=="object"&&T!==null?Ht(T):Yi,y.state=i.memoizedState,T=o.getDerivedStateFromProps,typeof T=="function"&&(Lh(i,o,T,u),y.state=i.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(T=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),T!==y.state&&zh.enqueueReplaceState(y,y.state,null),Eo(i,u,y,m),So(),y.state=i.memoizedState),typeof y.componentDidMount=="function"&&(i.flags|=4194308),u=!0}else if(r===null){y=i.stateNode;var M=i.memoizedProps,Y=ni(o,M);y.props=Y;var ne=y.context,le=o.contextType;T=Yi,typeof le=="object"&&le!==null&&(T=Ht(le));var de=o.getDerivedStateFromProps;le=typeof de=="function"||typeof y.getSnapshotBeforeUpdate=="function",M=i.pendingProps!==M,le||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(M||ne!==T)&&lv(i,y,u,T),cs=!1;var ie=i.memoizedState;y.state=ie,Eo(i,u,y,m),So(),ne=i.memoizedState,M||ie!==ne||cs?(typeof de=="function"&&(Lh(i,o,de,u),ne=i.memoizedState),(Y=cs||ov(i,o,Y,u,ie,ne,T))?(le||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(i.flags|=4194308)):(typeof y.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=u,i.memoizedState=ne),y.props=u,y.state=ne,y.context=T,u=Y):(typeof y.componentDidMount=="function"&&(i.flags|=4194308),u=!1)}else{y=i.stateNode,ph(r,i),T=i.memoizedProps,le=ni(o,T),y.props=le,de=i.pendingProps,ie=y.context,ne=o.contextType,Y=Yi,typeof ne=="object"&&ne!==null&&(Y=Ht(ne)),M=o.getDerivedStateFromProps,(ne=typeof M=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(T!==de||ie!==Y)&&lv(i,y,u,Y),cs=!1,ie=i.memoizedState,y.state=ie,Eo(i,u,y,m),So();var ae=i.memoizedState;T!==de||ie!==ae||cs||r!==null&&r.dependencies!==null&&Mc(r.dependencies)?(typeof M=="function"&&(Lh(i,o,M,u),ae=i.memoizedState),(le=cs||ov(i,o,le,u,ie,ae,Y)||r!==null&&r.dependencies!==null&&Mc(r.dependencies))?(ne||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(u,ae,Y),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(u,ae,Y)),typeof y.componentDidUpdate=="function"&&(i.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof y.componentDidUpdate!="function"||T===r.memoizedProps&&ie===r.memoizedState||(i.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||T===r.memoizedProps&&ie===r.memoizedState||(i.flags|=1024),i.memoizedProps=u,i.memoizedState=ae),y.props=u,y.state=ae,y.context=Y,u=le):(typeof y.componentDidUpdate!="function"||T===r.memoizedProps&&ie===r.memoizedState||(i.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||T===r.memoizedProps&&ie===r.memoizedState||(i.flags|=1024),u=!1)}return y=u,Jc(r,i),u=(i.flags&128)!==0,y||u?(y=i.stateNode,o=u&&typeof o.getDerivedStateFromError!="function"?null:y.render(),i.flags|=1,r!==null&&u?(i.child=ei(i,r.child,null,m),i.child=ei(i,null,o,m)):Vt(r,i,o,m),i.memoizedState=y.state,r=i.child):r=kr(r,i,m),r}function Sv(r,i,o,u){return Xs(),i.flags|=256,Vt(r,i,o,u),i.child}var Hh={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Vh(r){return{baseLanes:r,cachePool:f0()}}function Fh(r,i,o){return r=r!==null?r.childLanes&~o:0,i&&(r|=En),r}function Ev(r,i,o){var u=i.pendingProps,m=!1,y=(i.flags&128)!==0,T;if((T=y)||(T=r!==null&&r.memoizedState===null?!1:(wt.current&2)!==0),T&&(m=!0,i.flags&=-129),T=(i.flags&32)!==0,i.flags&=-33,r===null){if(Qe){if(m?fs(i):hs(),(r=ot)?(r=k_(r,Ln),r=r!==null&&r.data!=="&"?r:null,r!==null&&(i.memoizedState={dehydrated:r,treeContext:is!==null?{id:cr,overflow:ur}:null,retryLane:536870912,hydrationErrors:null},o=r0(r),o.return=i,i.child=o,qt=i,ot=null)):r=null,r===null)throw os(i);return Tm(r)?i.lanes=32:i.lanes=536870912,null}var M=u.children;return u=u.fallback,m?(hs(),m=i.mode,M=Zc({mode:"hidden",children:M},m),u=Gs(u,m,o,null),M.return=i,u.return=i,M.sibling=u,i.child=M,u=i.child,u.memoizedState=Vh(o),u.childLanes=Fh(r,T,o),i.memoizedState=Hh,Oo(null,u)):(fs(i),Yh(i,M))}var Y=r.memoizedState;if(Y!==null&&(M=Y.dehydrated,M!==null)){if(y)i.flags&256?(fs(i),i.flags&=-257,i=Gh(r,i,o)):i.memoizedState!==null?(hs(),i.child=r.child,i.flags|=128,i=null):(hs(),M=u.fallback,m=i.mode,u=Zc({mode:"visible",children:u.children},m),M=Gs(M,m,o,null),M.flags|=2,u.return=i,M.return=i,u.sibling=M,i.child=u,ei(i,r.child,null,o),u=i.child,u.memoizedState=Vh(o),u.childLanes=Fh(r,T,o),i.memoizedState=Hh,i=Oo(null,u));else if(fs(i),Tm(M)){if(T=M.nextSibling&&M.nextSibling.dataset,T)var ne=T.dgst;T=ne,u=Error(s(419)),u.stack="",u.digest=T,yo({value:u,source:null,stack:null}),i=Gh(r,i,o)}else if(At||Qi(r,i,o,!1),T=(o&r.childLanes)!==0,At||T){if(T=it,T!==null&&(u=cc(T,o),u!==0&&u!==Y.retryLane))throw Y.retryLane=u,Ys(r,u),pn(T,r,u),Ph;Am(M)||lu(),i=Gh(r,i,o)}else Am(M)?(i.flags|=192,i.child=r.child,i=null):(r=Y.treeContext,ot=Bn(M.nextSibling),qt=i,Qe=!0,as=null,Ln=!1,r!==null&&a0(i,r),i=Yh(i,u.children),i.flags|=4096);return i}return m?(hs(),M=u.fallback,m=i.mode,Y=r.child,ne=Y.sibling,u=Ar(Y,{mode:"hidden",children:u.children}),u.subtreeFlags=Y.subtreeFlags&65011712,ne!==null?M=Ar(ne,M):(M=Gs(M,m,o,null),M.flags|=2),M.return=i,u.return=i,u.sibling=M,i.child=u,Oo(null,u),u=i.child,M=r.child.memoizedState,M===null?M=Vh(o):(m=M.cachePool,m!==null?(Y=Et._currentValue,m=m.parent!==Y?{parent:Y,pool:Y}:m):m=f0(),M={baseLanes:M.baseLanes|o,cachePool:m}),u.memoizedState=M,u.childLanes=Fh(r,T,o),i.memoizedState=Hh,Oo(r.child,u)):(fs(i),o=r.child,r=o.sibling,o=Ar(o,{mode:"visible",children:u.children}),o.return=i,o.sibling=null,r!==null&&(T=i.deletions,T===null?(i.deletions=[r],i.flags|=16):T.push(r)),i.child=o,i.memoizedState=null,o)}function Yh(r,i){return i=Zc({mode:"visible",children:i},r.mode),i.return=r,r.child=i}function Zc(r,i){return r=bn(22,r,null,i),r.lanes=0,r}function Gh(r,i,o){return ei(i,r.child,null,o),r=Yh(i,i.pendingProps.children),r.flags|=2,i.memoizedState=null,r}function Cv(r,i,o){r.lanes|=i;var u=r.alternate;u!==null&&(u.lanes|=i),lh(r.return,i,o)}function Xh(r,i,o,u,m,y){var T=r.memoizedState;T===null?r.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:m,treeForkCount:y}:(T.isBackwards=i,T.rendering=null,T.renderingStartTime=0,T.last=u,T.tail=o,T.tailMode=m,T.treeForkCount=y)}function Av(r,i,o){var u=i.pendingProps,m=u.revealOrder,y=u.tail;u=u.children;var T=wt.current,M=(T&2)!==0;if(M?(T=T&1|2,i.flags|=128):T&=1,Z(wt,T),Vt(r,i,u,o),u=Qe?go:0,!M&&r!==null&&(r.flags&128)!==0)e:for(r=i.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&Cv(r,o,i);else if(r.tag===19)Cv(r,o,i);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break e;for(;r.sibling===null;){if(r.return===null||r.return===i)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}switch(m){case"forwards":for(o=i.child,m=null;o!==null;)r=o.alternate,r!==null&&Pc(r)===null&&(m=o),o=o.sibling;o=m,o===null?(m=i.child,i.child=null):(m=o.sibling,o.sibling=null),Xh(i,!1,m,o,y,u);break;case"backwards":case"unstable_legacy-backwards":for(o=null,m=i.child,i.child=null;m!==null;){if(r=m.alternate,r!==null&&Pc(r)===null){i.child=m;break}r=m.sibling,m.sibling=o,o=m,m=r}Xh(i,!0,o,null,y,u);break;case"together":Xh(i,!1,null,null,void 0,u);break;default:i.memoizedState=null}return i.child}function kr(r,i,o){if(r!==null&&(i.dependencies=r.dependencies),gs|=i.lanes,(o&i.childLanes)===0)if(r!==null){if(Qi(r,i,o,!1),(o&i.childLanes)===0)return null}else return null;if(r!==null&&i.child!==r.child)throw Error(s(153));if(i.child!==null){for(r=i.child,o=Ar(r,r.pendingProps),i.child=o,o.return=i;r.sibling!==null;)r=r.sibling,o=o.sibling=Ar(r,r.pendingProps),o.return=i;o.sibling=null}return i.child}function Kh(r,i){return(r.lanes&i)!==0?!0:(r=r.dependencies,!!(r!==null&&Mc(r)))}function HT(r,i,o){switch(i.tag){case 3:ce(i,i.stateNode.containerInfo),ls(i,Et,r.memoizedState.cache),Xs();break;case 27:case 5:ye(i);break;case 4:ce(i,i.stateNode.containerInfo);break;case 10:ls(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,bh(i),null;break;case 13:var u=i.memoizedState;if(u!==null)return u.dehydrated!==null?(fs(i),i.flags|=128,null):(o&i.child.childLanes)!==0?Ev(r,i,o):(fs(i),r=kr(r,i,o),r!==null?r.sibling:null);fs(i);break;case 19:var m=(r.flags&128)!==0;if(u=(o&i.childLanes)!==0,u||(Qi(r,i,o,!1),u=(o&i.childLanes)!==0),m){if(u)return Av(r,i,o);i.flags|=128}if(m=i.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),Z(wt,wt.current),u)break;return null;case 22:return i.lanes=0,vv(r,i,o,i.pendingProps);case 24:ls(i,Et,r.memoizedState.cache)}return kr(r,i,o)}function Tv(r,i,o){if(r!==null)if(r.memoizedProps!==i.pendingProps)At=!0;else{if(!Kh(r,o)&&(i.flags&128)===0)return At=!1,HT(r,i,o);At=(r.flags&131072)!==0}else At=!1,Qe&&(i.flags&1048576)!==0&&i0(i,go,i.index);switch(i.lanes=0,i.tag){case 16:e:{var u=i.pendingProps;if(r=Js(i.elementType),i.type=r,typeof r=="function")eh(r)?(u=ni(r,u),i.tag=1,i=xv(null,i,r,u,o)):(i.tag=0,i=qh(null,i,r,u,o));else{if(r!=null){var m=r.$$typeof;if(m===C){i.tag=11,i=pv(null,i,r,u,o);break e}else if(m===R){i.tag=14,i=gv(null,i,r,u,o);break e}}throw i=I(r)||r,Error(s(306,i,""))}}return i;case 0:return qh(r,i,i.type,i.pendingProps,o);case 1:return u=i.type,m=ni(u,i.pendingProps),xv(r,i,u,m,o);case 3:e:{if(ce(i,i.stateNode.containerInfo),r===null)throw Error(s(387));u=i.pendingProps;var y=i.memoizedState;m=y.element,ph(r,i),Eo(i,u,null,o);var T=i.memoizedState;if(u=T.cache,ls(i,Et,u),u!==y.cache&&ch(i,[Et],o,!0),So(),u=T.element,y.isDehydrated)if(y={element:u,isDehydrated:!1,cache:T.cache},i.updateQueue.baseState=y,i.memoizedState=y,i.flags&256){i=Sv(r,i,u,o);break e}else if(u!==m){m=Un(Error(s(424)),i),yo(m),i=Sv(r,i,u,o);break e}else{switch(r=i.stateNode.containerInfo,r.nodeType){case 9:r=r.body;break;default:r=r.nodeName==="HTML"?r.ownerDocument.body:r}for(ot=Bn(r.firstChild),qt=i,Qe=!0,as=null,Ln=!0,o=v0(i,null,u,o),i.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(Xs(),u===m){i=kr(r,i,o);break e}Vt(r,i,u,o)}i=i.child}return i;case 26:return Jc(r,i),r===null?(o=L_(i.type,null,i.pendingProps,null))?i.memoizedState=o:Qe||(o=i.type,r=i.pendingProps,u=pu(ee.current).createElement(o),u[kt]=i,u[Qt]=r,Ft(u,o,r),St(u),i.stateNode=u):i.memoizedState=L_(i.type,r.memoizedProps,i.pendingProps,r.memoizedState),null;case 27:return ye(i),r===null&&Qe&&(u=i.stateNode=U_(i.type,i.pendingProps,ee.current),qt=i,Ln=!0,m=ot,ws(i.type)?(Nm=m,ot=Bn(u.firstChild)):ot=m),Vt(r,i,i.pendingProps.children,o),Jc(r,i),r===null&&(i.flags|=4194304),i.child;case 5:return r===null&&Qe&&((m=u=ot)&&(u=_N(u,i.type,i.pendingProps,Ln),u!==null?(i.stateNode=u,qt=i,ot=Bn(u.firstChild),Ln=!1,m=!0):m=!1),m||os(i)),ye(i),m=i.type,y=i.pendingProps,T=r!==null?r.memoizedProps:null,u=y.children,Sm(m,y)?u=null:T!==null&&Sm(m,T)&&(i.flags|=32),i.memoizedState!==null&&(m=xh(r,i,DT,null,null,o),Vo._currentValue=m),Jc(r,i),Vt(r,i,u,o),i.child;case 6:return r===null&&Qe&&((r=o=ot)&&(o=bN(o,i.pendingProps,Ln),o!==null?(i.stateNode=o,qt=i,ot=null,r=!0):r=!1),r||os(i)),null;case 13:return Ev(r,i,o);case 4:return ce(i,i.stateNode.containerInfo),u=i.pendingProps,r===null?i.child=ei(i,null,u,o):Vt(r,i,u,o),i.child;case 11:return pv(r,i,i.type,i.pendingProps,o);case 7:return Vt(r,i,i.pendingProps,o),i.child;case 8:return Vt(r,i,i.pendingProps.children,o),i.child;case 12:return Vt(r,i,i.pendingProps.children,o),i.child;case 10:return u=i.pendingProps,ls(i,i.type,u.value),Vt(r,i,u.children,o),i.child;case 9:return m=i.type._context,u=i.pendingProps.children,Qs(i),m=Ht(m),u=u(m),i.flags|=1,Vt(r,i,u,o),i.child;case 14:return gv(r,i,i.type,i.pendingProps,o);case 15:return yv(r,i,i.type,i.pendingProps,o);case 19:return Av(r,i,o);case 31:return qT(r,i,o);case 22:return vv(r,i,o,i.pendingProps);case 24:return Qs(i),u=Ht(Et),r===null?(m=fh(),m===null&&(m=it,y=uh(),m.pooledCache=y,y.refCount++,y!==null&&(m.pooledCacheLanes|=o),m=y),i.memoizedState={parent:u,cache:m},mh(i),ls(i,Et,m)):((r.lanes&o)!==0&&(ph(r,i),Eo(i,null,null,o),So()),m=r.memoizedState,y=i.memoizedState,m.parent!==u?(m={parent:u,cache:u},i.memoizedState=m,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=m),ls(i,Et,u)):(u=y.cache,ls(i,Et,u),u!==m.cache&&ch(i,[Et],o,!0))),Vt(r,i,i.pendingProps.children,o),i.child;case 29:throw i.pendingProps}throw Error(s(156,i.tag))}function Mr(r){r.flags|=4}function Qh(r,i,o,u,m){if((i=(r.mode&32)!==0)&&(i=!1),i){if(r.flags|=16777216,(m&335544128)===m)if(r.stateNode.complete)r.flags|=8192;else if(e_())r.flags|=8192;else throw Zs=Ic,hh}else r.flags&=-16777217}function Nv(r,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!H_(i))if(e_())r.flags|=8192;else throw Zs=Ic,hh}function eu(r,i){i!==null&&(r.flags|=4),r.flags&16384&&(i=r.tag!==22?ac():536870912,r.lanes|=i,la|=i)}function Ro(r,i){if(!Qe)switch(r.tailMode){case"hidden":i=r.tail;for(var o=null;i!==null;)i.alternate!==null&&(o=i),i=i.sibling;o===null?r.tail=null:o.sibling=null;break;case"collapsed":o=r.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?i||r.tail===null?r.tail=null:r.tail.sibling=null:u.sibling=null}}function lt(r){var i=r.alternate!==null&&r.alternate.child===r.child,o=0,u=0;if(i)for(var m=r.child;m!==null;)o|=m.lanes|m.childLanes,u|=m.subtreeFlags&65011712,u|=m.flags&65011712,m.return=r,m=m.sibling;else for(m=r.child;m!==null;)o|=m.lanes|m.childLanes,u|=m.subtreeFlags,u|=m.flags,m.return=r,m=m.sibling;return r.subtreeFlags|=u,r.childLanes=o,i}function VT(r,i,o){var u=i.pendingProps;switch(sh(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return lt(i),null;case 1:return lt(i),null;case 3:return o=i.stateNode,u=null,r!==null&&(u=r.memoizedState.cache),i.memoizedState.cache!==u&&(i.flags|=2048),Or(Et),he(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(r===null||r.child===null)&&(Ki(i)?Mr(i):r===null||r.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,ah())),lt(i),null;case 26:var m=i.type,y=i.memoizedState;return r===null?(Mr(i),y!==null?(lt(i),Nv(i,y)):(lt(i),Qh(i,m,null,u,o))):y?y!==r.memoizedState?(Mr(i),lt(i),Nv(i,y)):(lt(i),i.flags&=-16777217):(r=r.memoizedProps,r!==u&&Mr(i),lt(i),Qh(i,m,r,u,o)),null;case 27:if(xe(i),o=ee.current,m=i.type,r!==null&&i.stateNode!=null)r.memoizedProps!==u&&Mr(i);else{if(!u){if(i.stateNode===null)throw Error(s(166));return lt(i),null}r=K.current,Ki(i)?o0(i):(r=U_(m,u,o),i.stateNode=r,Mr(i))}return lt(i),null;case 5:if(xe(i),m=i.type,r!==null&&i.stateNode!=null)r.memoizedProps!==u&&Mr(i);else{if(!u){if(i.stateNode===null)throw Error(s(166));return lt(i),null}if(y=K.current,Ki(i))o0(i);else{var T=pu(ee.current);switch(y){case 1:y=T.createElementNS("http://www.w3.org/2000/svg",m);break;case 2:y=T.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;default:switch(m){case"svg":y=T.createElementNS("http://www.w3.org/2000/svg",m);break;case"math":y=T.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;case"script":y=T.createElement("div"),y.innerHTML="<script><\/script>",y=y.removeChild(y.firstChild);break;case"select":y=typeof u.is=="string"?T.createElement("select",{is:u.is}):T.createElement("select"),u.multiple?y.multiple=!0:u.size&&(y.size=u.size);break;default:y=typeof u.is=="string"?T.createElement(m,{is:u.is}):T.createElement(m)}}y[kt]=i,y[Qt]=u;e:for(T=i.child;T!==null;){if(T.tag===5||T.tag===6)y.appendChild(T.stateNode);else if(T.tag!==4&&T.tag!==27&&T.child!==null){T.child.return=T,T=T.child;continue}if(T===i)break e;for(;T.sibling===null;){if(T.return===null||T.return===i)break e;T=T.return}T.sibling.return=T.return,T=T.sibling}i.stateNode=y;e:switch(Ft(y,m,u),m){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&Mr(i)}}return lt(i),Qh(i,i.type,r===null?null:r.memoizedProps,i.pendingProps,o),null;case 6:if(r&&i.stateNode!=null)r.memoizedProps!==u&&Mr(i);else{if(typeof u!="string"&&i.stateNode===null)throw Error(s(166));if(r=ee.current,Ki(i)){if(r=i.stateNode,o=i.memoizedProps,u=null,m=qt,m!==null)switch(m.tag){case 27:case 5:u=m.memoizedProps}r[kt]=i,r=!!(r.nodeValue===o||u!==null&&u.suppressHydrationWarning===!0||E_(r.nodeValue,o)),r||os(i,!0)}else r=pu(r).createTextNode(u),r[kt]=i,i.stateNode=r}return lt(i),null;case 31:if(o=i.memoizedState,r===null||r.memoizedState!==null){if(u=Ki(i),o!==null){if(r===null){if(!u)throw Error(s(318));if(r=i.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(s(557));r[kt]=i}else Xs(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;lt(i),r=!1}else o=ah(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=o),r=!0;if(!r)return i.flags&256?(xn(i),i):(xn(i),null);if((i.flags&128)!==0)throw Error(s(558))}return lt(i),null;case 13:if(u=i.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(m=Ki(i),u!==null&&u.dehydrated!==null){if(r===null){if(!m)throw Error(s(318));if(m=i.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(s(317));m[kt]=i}else Xs(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;lt(i),m=!1}else m=ah(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=m),m=!0;if(!m)return i.flags&256?(xn(i),i):(xn(i),null)}return xn(i),(i.flags&128)!==0?(i.lanes=o,i):(o=u!==null,r=r!==null&&r.memoizedState!==null,o&&(u=i.child,m=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(m=u.alternate.memoizedState.cachePool.pool),y=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(y=u.memoizedState.cachePool.pool),y!==m&&(u.flags|=2048)),o!==r&&o&&(i.child.flags|=8192),eu(i,i.updateQueue),lt(i),null);case 4:return he(),r===null&&vm(i.stateNode.containerInfo),lt(i),null;case 10:return Or(i.type),lt(i),null;case 19:if(P(wt),u=i.memoizedState,u===null)return lt(i),null;if(m=(i.flags&128)!==0,y=u.rendering,y===null)if(m)Ro(u,!1);else{if(bt!==0||r!==null&&(r.flags&128)!==0)for(r=i.child;r!==null;){if(y=Pc(r),y!==null){for(i.flags|=128,Ro(u,!1),r=y.updateQueue,i.updateQueue=r,eu(i,r),i.subtreeFlags=0,r=o,o=i.child;o!==null;)n0(o,r),o=o.sibling;return Z(wt,wt.current&1|2),Qe&&Tr(i,u.treeForkCount),i.child}r=r.sibling}u.tail!==null&&dt()>iu&&(i.flags|=128,m=!0,Ro(u,!1),i.lanes=4194304)}else{if(!m)if(r=Pc(y),r!==null){if(i.flags|=128,m=!0,r=r.updateQueue,i.updateQueue=r,eu(i,r),Ro(u,!0),u.tail===null&&u.tailMode==="hidden"&&!y.alternate&&!Qe)return lt(i),null}else 2*dt()-u.renderingStartTime>iu&&o!==536870912&&(i.flags|=128,m=!0,Ro(u,!1),i.lanes=4194304);u.isBackwards?(y.sibling=i.child,i.child=y):(r=u.last,r!==null?r.sibling=y:i.child=y,u.last=y)}return u.tail!==null?(r=u.tail,u.rendering=r,u.tail=r.sibling,u.renderingStartTime=dt(),r.sibling=null,o=wt.current,Z(wt,m?o&1|2:o&1),Qe&&Tr(i,u.treeForkCount),r):(lt(i),null);case 22:case 23:return xn(i),_h(),u=i.memoizedState!==null,r!==null?r.memoizedState!==null!==u&&(i.flags|=8192):u&&(i.flags|=8192),u?(o&536870912)!==0&&(i.flags&128)===0&&(lt(i),i.subtreeFlags&6&&(i.flags|=8192)):lt(i),o=i.updateQueue,o!==null&&eu(i,o.retryQueue),o=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(o=r.memoizedState.cachePool.pool),u=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(u=i.memoizedState.cachePool.pool),u!==o&&(i.flags|=2048),r!==null&&P(Ws),null;case 24:return o=null,r!==null&&(o=r.memoizedState.cache),i.memoizedState.cache!==o&&(i.flags|=2048),Or(Et),lt(i),null;case 25:return null;case 30:return null}throw Error(s(156,i.tag))}function FT(r,i){switch(sh(i),i.tag){case 1:return r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 3:return Or(Et),he(),r=i.flags,(r&65536)!==0&&(r&128)===0?(i.flags=r&-65537|128,i):null;case 26:case 27:case 5:return xe(i),null;case 31:if(i.memoizedState!==null){if(xn(i),i.alternate===null)throw Error(s(340));Xs()}return r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 13:if(xn(i),r=i.memoizedState,r!==null&&r.dehydrated!==null){if(i.alternate===null)throw Error(s(340));Xs()}return r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 19:return P(wt),null;case 4:return he(),null;case 10:return Or(i.type),null;case 22:case 23:return xn(i),_h(),r!==null&&P(Ws),r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 24:return Or(Et),null;case 25:return null;default:return null}}function Ov(r,i){switch(sh(i),i.tag){case 3:Or(Et),he();break;case 26:case 27:case 5:xe(i);break;case 4:he();break;case 31:i.memoizedState!==null&&xn(i);break;case 13:xn(i);break;case 19:P(wt);break;case 10:Or(i.type);break;case 22:case 23:xn(i),_h(),r!==null&&P(Ws);break;case 24:Or(Et)}}function jo(r,i){try{var o=i.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var m=u.next;o=m;do{if((o.tag&r)===r){u=void 0;var y=o.create,T=o.inst;u=y(),T.destroy=u}o=o.next}while(o!==m)}}catch(M){tt(i,i.return,M)}}function ms(r,i,o){try{var u=i.updateQueue,m=u!==null?u.lastEffect:null;if(m!==null){var y=m.next;u=y;do{if((u.tag&r)===r){var T=u.inst,M=T.destroy;if(M!==void 0){T.destroy=void 0,m=i;var Y=o,ne=M;try{ne()}catch(le){tt(m,Y,le)}}}u=u.next}while(u!==y)}}catch(le){tt(i,i.return,le)}}function Rv(r){var i=r.updateQueue;if(i!==null){var o=r.stateNode;try{b0(i,o)}catch(u){tt(r,r.return,u)}}}function jv(r,i,o){o.props=ni(r.type,r.memoizedProps),o.state=r.memoizedState;try{o.componentWillUnmount()}catch(u){tt(r,i,u)}}function ko(r,i){try{var o=r.ref;if(o!==null){switch(r.tag){case 26:case 27:case 5:var u=r.stateNode;break;case 30:u=r.stateNode;break;default:u=r.stateNode}typeof o=="function"?r.refCleanup=o(u):o.current=u}}catch(m){tt(r,i,m)}}function dr(r,i){var o=r.ref,u=r.refCleanup;if(o!==null)if(typeof u=="function")try{u()}catch(m){tt(r,i,m)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(m){tt(r,i,m)}else o.current=null}function kv(r){var i=r.type,o=r.memoizedProps,u=r.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":o.autoFocus&&u.focus();break e;case"img":o.src?u.src=o.src:o.srcSet&&(u.srcset=o.srcSet)}}catch(m){tt(r,r.return,m)}}function Wh(r,i,o){try{var u=r.stateNode;hN(u,r.type,o,i),u[Qt]=i}catch(m){tt(r,r.return,m)}}function Mv(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&ws(r.type)||r.tag===4}function Jh(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||Mv(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&ws(r.type)||r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function Zh(r,i,o){var u=r.tag;if(u===5||u===6)r=r.stateNode,i?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(r,i):(i=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,i.appendChild(r),o=o._reactRootContainer,o!=null||i.onclick!==null||(i.onclick=Er));else if(u!==4&&(u===27&&ws(r.type)&&(o=r.stateNode,i=null),r=r.child,r!==null))for(Zh(r,i,o),r=r.sibling;r!==null;)Zh(r,i,o),r=r.sibling}function tu(r,i,o){var u=r.tag;if(u===5||u===6)r=r.stateNode,i?o.insertBefore(r,i):o.appendChild(r);else if(u!==4&&(u===27&&ws(r.type)&&(o=r.stateNode),r=r.child,r!==null))for(tu(r,i,o),r=r.sibling;r!==null;)tu(r,i,o),r=r.sibling}function Dv(r){var i=r.stateNode,o=r.memoizedProps;try{for(var u=r.type,m=i.attributes;m.length;)i.removeAttributeNode(m[0]);Ft(i,u,o),i[kt]=r,i[Qt]=o}catch(y){tt(r,r.return,y)}}var Dr=!1,Tt=!1,em=!1,Uv=typeof WeakSet=="function"?WeakSet:Set,Lt=null;function YT(r,i){if(r=r.containerInfo,wm=xu,r=Gy(r),Gf(r)){if("selectionStart"in r)var o={start:r.selectionStart,end:r.selectionEnd};else e:{o=(o=r.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var m=u.anchorOffset,y=u.focusNode;u=u.focusOffset;try{o.nodeType,y.nodeType}catch{o=null;break e}var T=0,M=-1,Y=-1,ne=0,le=0,de=r,ie=null;t:for(;;){for(var ae;de!==o||m!==0&&de.nodeType!==3||(M=T+m),de!==y||u!==0&&de.nodeType!==3||(Y=T+u),de.nodeType===3&&(T+=de.nodeValue.length),(ae=de.firstChild)!==null;)ie=de,de=ae;for(;;){if(de===r)break t;if(ie===o&&++ne===m&&(M=T),ie===y&&++le===u&&(Y=T),(ae=de.nextSibling)!==null)break;de=ie,ie=de.parentNode}de=ae}o=M===-1||Y===-1?null:{start:M,end:Y}}else o=null}o=o||{start:0,end:0}}else o=null;for(xm={focusedElem:r,selectionRange:o},xu=!1,Lt=i;Lt!==null;)if(i=Lt,r=i.child,(i.subtreeFlags&1028)!==0&&r!==null)r.return=i,Lt=r;else for(;Lt!==null;){switch(i=Lt,y=i.alternate,r=i.flags,i.tag){case 0:if((r&4)!==0&&(r=i.updateQueue,r=r!==null?r.events:null,r!==null))for(o=0;o<r.length;o++)m=r[o],m.ref.impl=m.nextImpl;break;case 11:case 15:break;case 1:if((r&1024)!==0&&y!==null){r=void 0,o=i,m=y.memoizedProps,y=y.memoizedState,u=o.stateNode;try{var be=ni(o.type,m);r=u.getSnapshotBeforeUpdate(be,y),u.__reactInternalSnapshotBeforeUpdate=r}catch(De){tt(o,o.return,De)}}break;case 3:if((r&1024)!==0){if(r=i.stateNode.containerInfo,o=r.nodeType,o===9)Cm(r);else if(o===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":Cm(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(s(163))}if(r=i.sibling,r!==null){r.return=i.return,Lt=r;break}Lt=i.return}}function $v(r,i,o){var u=o.flags;switch(o.tag){case 0:case 11:case 15:$r(r,o),u&4&&jo(5,o);break;case 1:if($r(r,o),u&4)if(r=o.stateNode,i===null)try{r.componentDidMount()}catch(T){tt(o,o.return,T)}else{var m=ni(o.type,i.memoizedProps);i=i.memoizedState;try{r.componentDidUpdate(m,i,r.__reactInternalSnapshotBeforeUpdate)}catch(T){tt(o,o.return,T)}}u&64&&Rv(o),u&512&&ko(o,o.return);break;case 3:if($r(r,o),u&64&&(r=o.updateQueue,r!==null)){if(i=null,o.child!==null)switch(o.child.tag){case 27:case 5:i=o.child.stateNode;break;case 1:i=o.child.stateNode}try{b0(r,i)}catch(T){tt(o,o.return,T)}}break;case 27:i===null&&u&4&&Dv(o);case 26:case 5:$r(r,o),i===null&&u&4&&kv(o),u&512&&ko(o,o.return);break;case 12:$r(r,o);break;case 31:$r(r,o),u&4&&zv(r,o);break;case 13:$r(r,o),u&4&&Bv(r,o),u&64&&(r=o.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(o=tN.bind(null,o),wN(r,o))));break;case 22:if(u=o.memoizedState!==null||Dr,!u){i=i!==null&&i.memoizedState!==null||Tt,m=Dr;var y=Tt;Dr=u,(Tt=i)&&!y?Ir(r,o,(o.subtreeFlags&8772)!==0):$r(r,o),Dr=m,Tt=y}break;case 30:break;default:$r(r,o)}}function Iv(r){var i=r.alternate;i!==null&&(r.alternate=null,Iv(i)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(i=r.stateNode,i!==null&&ro(i)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var ht=null,dn=!1;function Ur(r,i,o){for(o=o.child;o!==null;)Lv(r,i,o),o=o.sibling}function Lv(r,i,o){if(Pt&&typeof Pt.onCommitFiberUnmount=="function")try{Pt.onCommitFiberUnmount(pt,o)}catch{}switch(o.tag){case 26:Tt||dr(o,i),Ur(r,i,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:Tt||dr(o,i);var u=ht,m=dn;ws(o.type)&&(ht=o.stateNode,dn=!1),Ur(r,i,o),Po(o.stateNode),ht=u,dn=m;break;case 5:Tt||dr(o,i);case 6:if(u=ht,m=dn,ht=null,Ur(r,i,o),ht=u,dn=m,ht!==null)if(dn)try{(ht.nodeType===9?ht.body:ht.nodeName==="HTML"?ht.ownerDocument.body:ht).removeChild(o.stateNode)}catch(y){tt(o,i,y)}else try{ht.removeChild(o.stateNode)}catch(y){tt(o,i,y)}break;case 18:ht!==null&&(dn?(r=ht,R_(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,o.stateNode),ga(r)):R_(ht,o.stateNode));break;case 4:u=ht,m=dn,ht=o.stateNode.containerInfo,dn=!0,Ur(r,i,o),ht=u,dn=m;break;case 0:case 11:case 14:case 15:ms(2,o,i),Tt||ms(4,o,i),Ur(r,i,o);break;case 1:Tt||(dr(o,i),u=o.stateNode,typeof u.componentWillUnmount=="function"&&jv(o,i,u)),Ur(r,i,o);break;case 21:Ur(r,i,o);break;case 22:Tt=(u=Tt)||o.memoizedState!==null,Ur(r,i,o),Tt=u;break;default:Ur(r,i,o)}}function zv(r,i){if(i.memoizedState===null&&(r=i.alternate,r!==null&&(r=r.memoizedState,r!==null))){r=r.dehydrated;try{ga(r)}catch(o){tt(i,i.return,o)}}}function Bv(r,i){if(i.memoizedState===null&&(r=i.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{ga(r)}catch(o){tt(i,i.return,o)}}function GT(r){switch(r.tag){case 31:case 13:case 19:var i=r.stateNode;return i===null&&(i=r.stateNode=new Uv),i;case 22:return r=r.stateNode,i=r._retryCache,i===null&&(i=r._retryCache=new Uv),i;default:throw Error(s(435,r.tag))}}function nu(r,i){var o=GT(r);i.forEach(function(u){if(!o.has(u)){o.add(u);var m=nN.bind(null,r,u);u.then(m,m)}})}function fn(r,i){var o=i.deletions;if(o!==null)for(var u=0;u<o.length;u++){var m=o[u],y=r,T=i,M=T;e:for(;M!==null;){switch(M.tag){case 27:if(ws(M.type)){ht=M.stateNode,dn=!1;break e}break;case 5:ht=M.stateNode,dn=!1;break e;case 3:case 4:ht=M.stateNode.containerInfo,dn=!0;break e}M=M.return}if(ht===null)throw Error(s(160));Lv(y,T,m),ht=null,dn=!1,y=m.alternate,y!==null&&(y.return=null),m.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)Pv(i,r),i=i.sibling}var Gn=null;function Pv(r,i){var o=r.alternate,u=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:fn(i,r),hn(r),u&4&&(ms(3,r,r.return),jo(3,r),ms(5,r,r.return));break;case 1:fn(i,r),hn(r),u&512&&(Tt||o===null||dr(o,o.return)),u&64&&Dr&&(r=r.updateQueue,r!==null&&(u=r.callbacks,u!==null&&(o=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=o===null?u:o.concat(u))));break;case 26:var m=Gn;if(fn(i,r),hn(r),u&512&&(Tt||o===null||dr(o,o.return)),u&4){var y=o!==null?o.memoizedState:null;if(u=r.memoizedState,o===null)if(u===null)if(r.stateNode===null){e:{u=r.type,o=r.memoizedProps,m=m.ownerDocument||m;t:switch(u){case"title":y=m.getElementsByTagName("title")[0],(!y||y[qs]||y[kt]||y.namespaceURI==="http://www.w3.org/2000/svg"||y.hasAttribute("itemprop"))&&(y=m.createElement(u),m.head.insertBefore(y,m.querySelector("head > title"))),Ft(y,u,o),y[kt]=r,St(y),u=y;break e;case"link":var T=P_("link","href",m).get(u+(o.href||""));if(T){for(var M=0;M<T.length;M++)if(y=T[M],y.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&y.getAttribute("rel")===(o.rel==null?null:o.rel)&&y.getAttribute("title")===(o.title==null?null:o.title)&&y.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){T.splice(M,1);break t}}y=m.createElement(u),Ft(y,u,o),m.head.appendChild(y);break;case"meta":if(T=P_("meta","content",m).get(u+(o.content||""))){for(M=0;M<T.length;M++)if(y=T[M],y.getAttribute("content")===(o.content==null?null:""+o.content)&&y.getAttribute("name")===(o.name==null?null:o.name)&&y.getAttribute("property")===(o.property==null?null:o.property)&&y.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&y.getAttribute("charset")===(o.charSet==null?null:o.charSet)){T.splice(M,1);break t}}y=m.createElement(u),Ft(y,u,o),m.head.appendChild(y);break;default:throw Error(s(468,u))}y[kt]=r,St(y),u=y}r.stateNode=u}else q_(m,r.type,r.stateNode);else r.stateNode=B_(m,u,r.memoizedProps);else y!==u?(y===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):y.count--,u===null?q_(m,r.type,r.stateNode):B_(m,u,r.memoizedProps)):u===null&&r.stateNode!==null&&Wh(r,r.memoizedProps,o.memoizedProps)}break;case 27:fn(i,r),hn(r),u&512&&(Tt||o===null||dr(o,o.return)),o!==null&&u&4&&Wh(r,r.memoizedProps,o.memoizedProps);break;case 5:if(fn(i,r),hn(r),u&512&&(Tt||o===null||dr(o,o.return)),r.flags&32){m=r.stateNode;try{zi(m,"")}catch(be){tt(r,r.return,be)}}u&4&&r.stateNode!=null&&(m=r.memoizedProps,Wh(r,m,o!==null?o.memoizedProps:m)),u&1024&&(em=!0);break;case 6:if(fn(i,r),hn(r),u&4){if(r.stateNode===null)throw Error(s(162));u=r.memoizedProps,o=r.stateNode;try{o.nodeValue=u}catch(be){tt(r,r.return,be)}}break;case 3:if(vu=null,m=Gn,Gn=gu(i.containerInfo),fn(i,r),Gn=m,hn(r),u&4&&o!==null&&o.memoizedState.isDehydrated)try{ga(i.containerInfo)}catch(be){tt(r,r.return,be)}em&&(em=!1,qv(r));break;case 4:u=Gn,Gn=gu(r.stateNode.containerInfo),fn(i,r),hn(r),Gn=u;break;case 12:fn(i,r),hn(r);break;case 31:fn(i,r),hn(r),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,nu(r,u)));break;case 13:fn(i,r),hn(r),r.child.flags&8192&&r.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(su=dt()),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,nu(r,u)));break;case 22:m=r.memoizedState!==null;var Y=o!==null&&o.memoizedState!==null,ne=Dr,le=Tt;if(Dr=ne||m,Tt=le||Y,fn(i,r),Tt=le,Dr=ne,hn(r),u&8192)e:for(i=r.stateNode,i._visibility=m?i._visibility&-2:i._visibility|1,m&&(o===null||Y||Dr||Tt||ri(r)),o=null,i=r;;){if(i.tag===5||i.tag===26){if(o===null){Y=o=i;try{if(y=Y.stateNode,m)T=y.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none";else{M=Y.stateNode;var de=Y.memoizedProps.style,ie=de!=null&&de.hasOwnProperty("display")?de.display:null;M.style.display=ie==null||typeof ie=="boolean"?"":(""+ie).trim()}}catch(be){tt(Y,Y.return,be)}}}else if(i.tag===6){if(o===null){Y=i;try{Y.stateNode.nodeValue=m?"":Y.memoizedProps}catch(be){tt(Y,Y.return,be)}}}else if(i.tag===18){if(o===null){Y=i;try{var ae=Y.stateNode;m?j_(ae,!0):j_(Y.stateNode,!1)}catch(be){tt(Y,Y.return,be)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===r)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break e;for(;i.sibling===null;){if(i.return===null||i.return===r)break e;o===i&&(o=null),i=i.return}o===i&&(o=null),i.sibling.return=i.return,i=i.sibling}u&4&&(u=r.updateQueue,u!==null&&(o=u.retryQueue,o!==null&&(u.retryQueue=null,nu(r,o))));break;case 19:fn(i,r),hn(r),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,nu(r,u)));break;case 30:break;case 21:break;default:fn(i,r),hn(r)}}function hn(r){var i=r.flags;if(i&2){try{for(var o,u=r.return;u!==null;){if(Mv(u)){o=u;break}u=u.return}if(o==null)throw Error(s(160));switch(o.tag){case 27:var m=o.stateNode,y=Jh(r);tu(r,y,m);break;case 5:var T=o.stateNode;o.flags&32&&(zi(T,""),o.flags&=-33);var M=Jh(r);tu(r,M,T);break;case 3:case 4:var Y=o.stateNode.containerInfo,ne=Jh(r);Zh(r,ne,Y);break;default:throw Error(s(161))}}catch(le){tt(r,r.return,le)}r.flags&=-3}i&4096&&(r.flags&=-4097)}function qv(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var i=r;qv(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),r=r.sibling}}function $r(r,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)$v(r,i.alternate,i),i=i.sibling}function ri(r){for(r=r.child;r!==null;){var i=r;switch(i.tag){case 0:case 11:case 14:case 15:ms(4,i,i.return),ri(i);break;case 1:dr(i,i.return);var o=i.stateNode;typeof o.componentWillUnmount=="function"&&jv(i,i.return,o),ri(i);break;case 27:Po(i.stateNode);case 26:case 5:dr(i,i.return),ri(i);break;case 22:i.memoizedState===null&&ri(i);break;case 30:ri(i);break;default:ri(i)}r=r.sibling}}function Ir(r,i,o){for(o=o&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var u=i.alternate,m=r,y=i,T=y.flags;switch(y.tag){case 0:case 11:case 15:Ir(m,y,o),jo(4,y);break;case 1:if(Ir(m,y,o),u=y,m=u.stateNode,typeof m.componentDidMount=="function")try{m.componentDidMount()}catch(ne){tt(u,u.return,ne)}if(u=y,m=u.updateQueue,m!==null){var M=u.stateNode;try{var Y=m.shared.hiddenCallbacks;if(Y!==null)for(m.shared.hiddenCallbacks=null,m=0;m<Y.length;m++)_0(Y[m],M)}catch(ne){tt(u,u.return,ne)}}o&&T&64&&Rv(y),ko(y,y.return);break;case 27:Dv(y);case 26:case 5:Ir(m,y,o),o&&u===null&&T&4&&kv(y),ko(y,y.return);break;case 12:Ir(m,y,o);break;case 31:Ir(m,y,o),o&&T&4&&zv(m,y);break;case 13:Ir(m,y,o),o&&T&4&&Bv(m,y);break;case 22:y.memoizedState===null&&Ir(m,y,o),ko(y,y.return);break;case 30:break;default:Ir(m,y,o)}i=i.sibling}}function tm(r,i){var o=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(o=r.memoizedState.cachePool.pool),r=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(r=i.memoizedState.cachePool.pool),r!==o&&(r!=null&&r.refCount++,o!=null&&vo(o))}function nm(r,i){r=null,i.alternate!==null&&(r=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==r&&(i.refCount++,r!=null&&vo(r))}function Xn(r,i,o,u){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Hv(r,i,o,u),i=i.sibling}function Hv(r,i,o,u){var m=i.flags;switch(i.tag){case 0:case 11:case 15:Xn(r,i,o,u),m&2048&&jo(9,i);break;case 1:Xn(r,i,o,u);break;case 3:Xn(r,i,o,u),m&2048&&(r=null,i.alternate!==null&&(r=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==r&&(i.refCount++,r!=null&&vo(r)));break;case 12:if(m&2048){Xn(r,i,o,u),r=i.stateNode;try{var y=i.memoizedProps,T=y.id,M=y.onPostCommit;typeof M=="function"&&M(T,i.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(Y){tt(i,i.return,Y)}}else Xn(r,i,o,u);break;case 31:Xn(r,i,o,u);break;case 13:Xn(r,i,o,u);break;case 23:break;case 22:y=i.stateNode,T=i.alternate,i.memoizedState!==null?y._visibility&2?Xn(r,i,o,u):Mo(r,i):y._visibility&2?Xn(r,i,o,u):(y._visibility|=2,ia(r,i,o,u,(i.subtreeFlags&10256)!==0||!1)),m&2048&&tm(T,i);break;case 24:Xn(r,i,o,u),m&2048&&nm(i.alternate,i);break;default:Xn(r,i,o,u)}}function ia(r,i,o,u,m){for(m=m&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var y=r,T=i,M=o,Y=u,ne=T.flags;switch(T.tag){case 0:case 11:case 15:ia(y,T,M,Y,m),jo(8,T);break;case 23:break;case 22:var le=T.stateNode;T.memoizedState!==null?le._visibility&2?ia(y,T,M,Y,m):Mo(y,T):(le._visibility|=2,ia(y,T,M,Y,m)),m&&ne&2048&&tm(T.alternate,T);break;case 24:ia(y,T,M,Y,m),m&&ne&2048&&nm(T.alternate,T);break;default:ia(y,T,M,Y,m)}i=i.sibling}}function Mo(r,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var o=r,u=i,m=u.flags;switch(u.tag){case 22:Mo(o,u),m&2048&&tm(u.alternate,u);break;case 24:Mo(o,u),m&2048&&nm(u.alternate,u);break;default:Mo(o,u)}i=i.sibling}}var Do=8192;function aa(r,i,o){if(r.subtreeFlags&Do)for(r=r.child;r!==null;)Vv(r,i,o),r=r.sibling}function Vv(r,i,o){switch(r.tag){case 26:aa(r,i,o),r.flags&Do&&r.memoizedState!==null&&MN(o,Gn,r.memoizedState,r.memoizedProps);break;case 5:aa(r,i,o);break;case 3:case 4:var u=Gn;Gn=gu(r.stateNode.containerInfo),aa(r,i,o),Gn=u;break;case 22:r.memoizedState===null&&(u=r.alternate,u!==null&&u.memoizedState!==null?(u=Do,Do=16777216,aa(r,i,o),Do=u):aa(r,i,o));break;default:aa(r,i,o)}}function Fv(r){var i=r.alternate;if(i!==null&&(r=i.child,r!==null)){i.child=null;do i=r.sibling,r.sibling=null,r=i;while(r!==null)}}function Uo(r){var i=r.deletions;if((r.flags&16)!==0){if(i!==null)for(var o=0;o<i.length;o++){var u=i[o];Lt=u,Gv(u,r)}Fv(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)Yv(r),r=r.sibling}function Yv(r){switch(r.tag){case 0:case 11:case 15:Uo(r),r.flags&2048&&ms(9,r,r.return);break;case 3:Uo(r);break;case 12:Uo(r);break;case 22:var i=r.stateNode;r.memoizedState!==null&&i._visibility&2&&(r.return===null||r.return.tag!==13)?(i._visibility&=-3,ru(r)):Uo(r);break;default:Uo(r)}}function ru(r){var i=r.deletions;if((r.flags&16)!==0){if(i!==null)for(var o=0;o<i.length;o++){var u=i[o];Lt=u,Gv(u,r)}Fv(r)}for(r=r.child;r!==null;){switch(i=r,i.tag){case 0:case 11:case 15:ms(8,i,i.return),ru(i);break;case 22:o=i.stateNode,o._visibility&2&&(o._visibility&=-3,ru(i));break;default:ru(i)}r=r.sibling}}function Gv(r,i){for(;Lt!==null;){var o=Lt;switch(o.tag){case 0:case 11:case 15:ms(8,o,i);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var u=o.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:vo(o.memoizedState.cache)}if(u=o.child,u!==null)u.return=o,Lt=u;else e:for(o=r;Lt!==null;){u=Lt;var m=u.sibling,y=u.return;if(Iv(u),u===o){Lt=null;break e}if(m!==null){m.return=y,Lt=m;break e}Lt=y}}}var XT={getCacheForType:function(r){var i=Ht(Et),o=i.data.get(r);return o===void 0&&(o=r(),i.data.set(r,o)),o},cacheSignal:function(){return Ht(Et).controller.signal}},KT=typeof WeakMap=="function"?WeakMap:Map,Ze=0,it=null,Fe=null,Ge=0,et=0,Sn=null,ps=!1,oa=!1,rm=!1,Lr=0,bt=0,gs=0,si=0,sm=0,En=0,la=0,$o=null,mn=null,im=!1,su=0,Xv=0,iu=1/0,au=null,ys=null,Mt=0,vs=null,ca=null,zr=0,am=0,om=null,Kv=null,Io=0,lm=null;function Cn(){return(Ze&2)!==0&&Ge!==0?Ge&-Ge:U.T!==null?mm():uc()}function Qv(){if(En===0)if((Ge&536870912)===0||Qe){var r=Oi;Oi<<=1,(Oi&3932160)===0&&(Oi=262144),En=r}else En=536870912;return r=wn.current,r!==null&&(r.flags|=32),En}function pn(r,i,o){(r===it&&(et===2||et===9)||r.cancelPendingCommit!==null)&&(ua(r,0),_s(r,Ge,En,!1)),Ps(r,o),((Ze&2)===0||r!==it)&&(r===it&&((Ze&2)===0&&(si|=o),bt===4&&_s(r,Ge,En,!1)),fr(r))}function Wv(r,i,o){if((Ze&6)!==0)throw Error(s(327));var u=!o&&(i&127)===0&&(i&r.expiredLanes)===0||Bs(r,i),m=u?JT(r,i):um(r,i,!0),y=u;do{if(m===0){oa&&!u&&_s(r,i,0,!1);break}else{if(o=r.current.alternate,y&&!QT(o)){m=um(r,i,!1),y=!1;continue}if(m===2){if(y=i,r.errorRecoveryDisabledLanes&y)var T=0;else T=r.pendingLanes&-536870913,T=T!==0?T:T&536870912?536870912:0;if(T!==0){i=T;e:{var M=r;m=$o;var Y=M.current.memoizedState.isDehydrated;if(Y&&(ua(M,T).flags|=256),T=um(M,T,!1),T!==2){if(rm&&!Y){M.errorRecoveryDisabledLanes|=y,si|=y,m=4;break e}y=mn,mn=m,y!==null&&(mn===null?mn=y:mn.push.apply(mn,y))}m=T}if(y=!1,m!==2)continue}}if(m===1){ua(r,0),_s(r,i,0,!0);break}e:{switch(u=r,y=m,y){case 0:case 1:throw Error(s(345));case 4:if((i&4194048)!==i)break;case 6:_s(u,i,En,!ps);break e;case 2:mn=null;break;case 3:case 5:break;default:throw Error(s(329))}if((i&62914560)===i&&(m=su+300-dt(),10<m)){if(_s(u,i,En,!ps),ji(u,0,!0)!==0)break e;zr=i,u.timeoutHandle=N_(Jv.bind(null,u,o,mn,au,im,i,En,si,la,ps,y,"Throttled",-0,0),m);break e}Jv(u,o,mn,au,im,i,En,si,la,ps,y,null,-0,0)}}break}while(!0);fr(r)}function Jv(r,i,o,u,m,y,T,M,Y,ne,le,de,ie,ae){if(r.timeoutHandle=-1,de=i.subtreeFlags,de&8192||(de&16785408)===16785408){de={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Er},Vv(i,y,de);var be=(y&62914560)===y?su-dt():(y&4194048)===y?Xv-dt():0;if(be=DN(de,be),be!==null){zr=y,r.cancelPendingCommit=be(a_.bind(null,r,i,y,o,u,m,T,M,Y,le,de,null,ie,ae)),_s(r,y,T,!ne);return}}a_(r,i,y,o,u,m,T,M,Y)}function QT(r){for(var i=r;;){var o=i.tag;if((o===0||o===11||o===15)&&i.flags&16384&&(o=i.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var u=0;u<o.length;u++){var m=o[u],y=m.getSnapshot;m=m.value;try{if(!_n(y(),m))return!1}catch{return!1}}if(o=i.child,i.subtreeFlags&16384&&o!==null)o.return=i,i=o;else{if(i===r)break;for(;i.sibling===null;){if(i.return===null||i.return===r)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function _s(r,i,o,u){i&=~sm,i&=~si,r.suspendedLanes|=i,r.pingedLanes&=~i,u&&(r.warmLanes|=i),u=r.expirationTimes;for(var m=i;0<m;){var y=31-sn(m),T=1<<y;u[y]=-1,m&=~T}o!==0&&oc(r,o,i)}function ou(){return(Ze&6)===0?(Lo(0),!1):!0}function cm(){if(Fe!==null){if(et===0)var r=Fe.return;else r=Fe,Nr=Ks=null,Ch(r),ea=null,bo=0,r=Fe;for(;r!==null;)Ov(r.alternate,r),r=r.return;Fe=null}}function ua(r,i){var o=r.timeoutHandle;o!==-1&&(r.timeoutHandle=-1,gN(o)),o=r.cancelPendingCommit,o!==null&&(r.cancelPendingCommit=null,o()),zr=0,cm(),it=r,Fe=o=Ar(r.current,null),Ge=i,et=0,Sn=null,ps=!1,oa=Bs(r,i),rm=!1,la=En=sm=si=gs=bt=0,mn=$o=null,im=!1,(i&8)!==0&&(i|=i&32);var u=r.entangledLanes;if(u!==0)for(r=r.entanglements,u&=i;0<u;){var m=31-sn(u),y=1<<m;i|=r[m],u&=~y}return Lr=i,Nc(),o}function Zv(r,i){qe=null,U.H=No,i===Zi||i===$c?(i=p0(),et=3):i===hh?(i=p0(),et=4):et=i===Ph?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,Sn=i,Fe===null&&(bt=1,Qc(r,Un(i,r.current)))}function e_(){var r=wn.current;return r===null?!0:(Ge&4194048)===Ge?zn===null:(Ge&62914560)===Ge||(Ge&536870912)!==0?r===zn:!1}function t_(){var r=U.H;return U.H=No,r===null?No:r}function n_(){var r=U.A;return U.A=XT,r}function lu(){bt=4,ps||(Ge&4194048)!==Ge&&wn.current!==null||(oa=!0),(gs&134217727)===0&&(si&134217727)===0||it===null||_s(it,Ge,En,!1)}function um(r,i,o){var u=Ze;Ze|=2;var m=t_(),y=n_();(it!==r||Ge!==i)&&(au=null,ua(r,i)),i=!1;var T=bt;e:do try{if(et!==0&&Fe!==null){var M=Fe,Y=Sn;switch(et){case 8:cm(),T=6;break e;case 3:case 2:case 9:case 6:wn.current===null&&(i=!0);var ne=et;if(et=0,Sn=null,da(r,M,Y,ne),o&&oa){T=0;break e}break;default:ne=et,et=0,Sn=null,da(r,M,Y,ne)}}WT(),T=bt;break}catch(le){Zv(r,le)}while(!0);return i&&r.shellSuspendCounter++,Nr=Ks=null,Ze=u,U.H=m,U.A=y,Fe===null&&(it=null,Ge=0,Nc()),T}function WT(){for(;Fe!==null;)r_(Fe)}function JT(r,i){var o=Ze;Ze|=2;var u=t_(),m=n_();it!==r||Ge!==i?(au=null,iu=dt()+500,ua(r,i)):oa=Bs(r,i);e:do try{if(et!==0&&Fe!==null){i=Fe;var y=Sn;t:switch(et){case 1:et=0,Sn=null,da(r,i,y,1);break;case 2:case 9:if(h0(y)){et=0,Sn=null,s_(i);break}i=function(){et!==2&&et!==9||it!==r||(et=7),fr(r)},y.then(i,i);break e;case 3:et=7;break e;case 4:et=5;break e;case 7:h0(y)?(et=0,Sn=null,s_(i)):(et=0,Sn=null,da(r,i,y,7));break;case 5:var T=null;switch(Fe.tag){case 26:T=Fe.memoizedState;case 5:case 27:var M=Fe;if(T?H_(T):M.stateNode.complete){et=0,Sn=null;var Y=M.sibling;if(Y!==null)Fe=Y;else{var ne=M.return;ne!==null?(Fe=ne,cu(ne)):Fe=null}break t}}et=0,Sn=null,da(r,i,y,5);break;case 6:et=0,Sn=null,da(r,i,y,6);break;case 8:cm(),bt=6;break e;default:throw Error(s(462))}}ZT();break}catch(le){Zv(r,le)}while(!0);return Nr=Ks=null,U.H=u,U.A=m,Ze=o,Fe!==null?0:(it=null,Ge=0,Nc(),bt)}function ZT(){for(;Fe!==null&&!nn();)r_(Fe)}function r_(r){var i=Tv(r.alternate,r,Lr);r.memoizedProps=r.pendingProps,i===null?cu(r):Fe=i}function s_(r){var i=r,o=i.alternate;switch(i.tag){case 15:case 0:i=wv(o,i,i.pendingProps,i.type,void 0,Ge);break;case 11:i=wv(o,i,i.pendingProps,i.type.render,i.ref,Ge);break;case 5:Ch(i);default:Ov(o,i),i=Fe=n0(i,Lr),i=Tv(o,i,Lr)}r.memoizedProps=r.pendingProps,i===null?cu(r):Fe=i}function da(r,i,o,u){Nr=Ks=null,Ch(i),ea=null,bo=0;var m=i.return;try{if(PT(r,m,i,o,Ge)){bt=1,Qc(r,Un(o,r.current)),Fe=null;return}}catch(y){if(m!==null)throw Fe=m,y;bt=1,Qc(r,Un(o,r.current)),Fe=null;return}i.flags&32768?(Qe||u===1?r=!0:oa||(Ge&536870912)!==0?r=!1:(ps=r=!0,(u===2||u===9||u===3||u===6)&&(u=wn.current,u!==null&&u.tag===13&&(u.flags|=16384))),i_(i,r)):cu(i)}function cu(r){var i=r;do{if((i.flags&32768)!==0){i_(i,ps);return}r=i.return;var o=VT(i.alternate,i,Lr);if(o!==null){Fe=o;return}if(i=i.sibling,i!==null){Fe=i;return}Fe=i=r}while(i!==null);bt===0&&(bt=5)}function i_(r,i){do{var o=FT(r.alternate,r);if(o!==null){o.flags&=32767,Fe=o;return}if(o=r.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!i&&(r=r.sibling,r!==null)){Fe=r;return}Fe=r=o}while(r!==null);bt=6,Fe=null}function a_(r,i,o,u,m,y,T,M,Y){r.cancelPendingCommit=null;do uu();while(Mt!==0);if((Ze&6)!==0)throw Error(s(327));if(i!==null){if(i===r.current)throw Error(s(177));if(y=i.lanes|i.childLanes,y|=Jf,Nf(r,o,y,T,M,Y),r===it&&(Fe=it=null,Ge=0),ca=i,vs=r,zr=o,am=y,om=m,Kv=u,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,rN(fe,function(){return d_(),null})):(r.callbackNode=null,r.callbackPriority=0),u=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||u){u=U.T,U.T=null,m=z.p,z.p=2,T=Ze,Ze|=4;try{YT(r,i,o)}finally{Ze=T,z.p=m,U.T=u}}Mt=1,o_(),l_(),c_()}}function o_(){if(Mt===1){Mt=0;var r=vs,i=ca,o=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||o){o=U.T,U.T=null;var u=z.p;z.p=2;var m=Ze;Ze|=4;try{Pv(i,r);var y=xm,T=Gy(r.containerInfo),M=y.focusedElem,Y=y.selectionRange;if(T!==M&&M&&M.ownerDocument&&Yy(M.ownerDocument.documentElement,M)){if(Y!==null&&Gf(M)){var ne=Y.start,le=Y.end;if(le===void 0&&(le=ne),"selectionStart"in M)M.selectionStart=ne,M.selectionEnd=Math.min(le,M.value.length);else{var de=M.ownerDocument||document,ie=de&&de.defaultView||window;if(ie.getSelection){var ae=ie.getSelection(),be=M.textContent.length,De=Math.min(Y.start,be),st=Y.end===void 0?De:Math.min(Y.end,be);!ae.extend&&De>st&&(T=st,st=De,De=T);var J=Fy(M,De),Q=Fy(M,st);if(J&&Q&&(ae.rangeCount!==1||ae.anchorNode!==J.node||ae.anchorOffset!==J.offset||ae.focusNode!==Q.node||ae.focusOffset!==Q.offset)){var te=de.createRange();te.setStart(J.node,J.offset),ae.removeAllRanges(),De>st?(ae.addRange(te),ae.extend(Q.node,Q.offset)):(te.setEnd(Q.node,Q.offset),ae.addRange(te))}}}}for(de=[],ae=M;ae=ae.parentNode;)ae.nodeType===1&&de.push({element:ae,left:ae.scrollLeft,top:ae.scrollTop});for(typeof M.focus=="function"&&M.focus(),M=0;M<de.length;M++){var ue=de[M];ue.element.scrollLeft=ue.left,ue.element.scrollTop=ue.top}}xu=!!wm,xm=wm=null}finally{Ze=m,z.p=u,U.T=o}}r.current=i,Mt=2}}function l_(){if(Mt===2){Mt=0;var r=vs,i=ca,o=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||o){o=U.T,U.T=null;var u=z.p;z.p=2;var m=Ze;Ze|=4;try{$v(r,i.alternate,i)}finally{Ze=m,z.p=u,U.T=o}}Mt=3}}function c_(){if(Mt===4||Mt===3){Mt=0,It();var r=vs,i=ca,o=zr,u=Kv;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?Mt=5:(Mt=0,ca=vs=null,u_(r,r.pendingLanes));var m=r.pendingLanes;if(m===0&&(ys=null),no(o),i=i.stateNode,Pt&&typeof Pt.onCommitFiberRoot=="function")try{Pt.onCommitFiberRoot(pt,i,void 0,(i.current.flags&128)===128)}catch{}if(u!==null){i=U.T,m=z.p,z.p=2,U.T=null;try{for(var y=r.onRecoverableError,T=0;T<u.length;T++){var M=u[T];y(M.value,{componentStack:M.stack})}}finally{U.T=i,z.p=m}}(zr&3)!==0&&uu(),fr(r),m=r.pendingLanes,(o&261930)!==0&&(m&42)!==0?r===lm?Io++:(Io=0,lm=r):Io=0,Lo(0)}}function u_(r,i){(r.pooledCacheLanes&=i)===0&&(i=r.pooledCache,i!=null&&(r.pooledCache=null,vo(i)))}function uu(){return o_(),l_(),c_(),d_()}function d_(){if(Mt!==5)return!1;var r=vs,i=am;am=0;var o=no(zr),u=U.T,m=z.p;try{z.p=32>o?32:o,U.T=null,o=om,om=null;var y=vs,T=zr;if(Mt=0,ca=vs=null,zr=0,(Ze&6)!==0)throw Error(s(331));var M=Ze;if(Ze|=4,Yv(y.current),Hv(y,y.current,T,o),Ze=M,Lo(0,!1),Pt&&typeof Pt.onPostCommitFiberRoot=="function")try{Pt.onPostCommitFiberRoot(pt,y)}catch{}return!0}finally{z.p=m,U.T=u,u_(r,i)}}function f_(r,i,o){i=Un(o,i),i=Bh(r.stateNode,i,2),r=ds(r,i,2),r!==null&&(Ps(r,2),fr(r))}function tt(r,i,o){if(r.tag===3)f_(r,r,o);else for(;i!==null;){if(i.tag===3){f_(i,r,o);break}else if(i.tag===1){var u=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(ys===null||!ys.has(u))){r=Un(o,r),o=hv(2),u=ds(i,o,2),u!==null&&(mv(o,u,i,r),Ps(u,2),fr(u));break}}i=i.return}}function dm(r,i,o){var u=r.pingCache;if(u===null){u=r.pingCache=new KT;var m=new Set;u.set(i,m)}else m=u.get(i),m===void 0&&(m=new Set,u.set(i,m));m.has(o)||(rm=!0,m.add(o),r=eN.bind(null,r,i,o),i.then(r,r))}function eN(r,i,o){var u=r.pingCache;u!==null&&u.delete(i),r.pingedLanes|=r.suspendedLanes&o,r.warmLanes&=~o,it===r&&(Ge&o)===o&&(bt===4||bt===3&&(Ge&62914560)===Ge&&300>dt()-su?(Ze&2)===0&&ua(r,0):sm|=o,la===Ge&&(la=0)),fr(r)}function h_(r,i){i===0&&(i=ac()),r=Ys(r,i),r!==null&&(Ps(r,i),fr(r))}function tN(r){var i=r.memoizedState,o=0;i!==null&&(o=i.retryLane),h_(r,o)}function nN(r,i){var o=0;switch(r.tag){case 31:case 13:var u=r.stateNode,m=r.memoizedState;m!==null&&(o=m.retryLane);break;case 19:u=r.stateNode;break;case 22:u=r.stateNode._retryCache;break;default:throw Error(s(314))}u!==null&&u.delete(i),h_(r,o)}function rN(r,i){return ln(r,i)}var du=null,fa=null,fm=!1,fu=!1,hm=!1,bs=0;function fr(r){r!==fa&&r.next===null&&(fa===null?du=fa=r:fa=fa.next=r),fu=!0,fm||(fm=!0,iN())}function Lo(r,i){if(!hm&&fu){hm=!0;do for(var o=!1,u=du;u!==null;){if(r!==0){var m=u.pendingLanes;if(m===0)var y=0;else{var T=u.suspendedLanes,M=u.pingedLanes;y=(1<<31-sn(42|r)+1)-1,y&=m&~(T&~M),y=y&201326741?y&201326741|1:y?y|2:0}y!==0&&(o=!0,y_(u,y))}else y=Ge,y=ji(u,u===it?y:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(y&3)===0||Bs(u,y)||(o=!0,y_(u,y));u=u.next}while(o);hm=!1}}function sN(){m_()}function m_(){fu=fm=!1;var r=0;bs!==0&&pN()&&(r=bs);for(var i=dt(),o=null,u=du;u!==null;){var m=u.next,y=p_(u,i);y===0?(u.next=null,o===null?du=m:o.next=m,m===null&&(fa=o)):(o=u,(r!==0||(y&3)!==0)&&(fu=!0)),u=m}Mt!==0&&Mt!==5||Lo(r),bs!==0&&(bs=0)}function p_(r,i){for(var o=r.suspendedLanes,u=r.pingedLanes,m=r.expirationTimes,y=r.pendingLanes&-62914561;0<y;){var T=31-sn(y),M=1<<T,Y=m[T];Y===-1?((M&o)===0||(M&u)!==0)&&(m[T]=Tf(M,i)):Y<=i&&(r.expiredLanes|=M),y&=~M}if(i=it,o=Ge,o=ji(r,r===i?o:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),u=r.callbackNode,o===0||r===i&&(et===2||et===9)||r.cancelPendingCommit!==null)return u!==null&&u!==null&&ut(u),r.callbackNode=null,r.callbackPriority=0;if((o&3)===0||Bs(r,o)){if(i=o&-o,i===r.callbackPriority)return i;switch(u!==null&&ut(u),no(o)){case 2:case 8:o=jt;break;case 32:o=fe;break;case 268435456:o=Ae;break;default:o=fe}return u=g_.bind(null,r),o=ln(o,u),r.callbackPriority=i,r.callbackNode=o,i}return u!==null&&u!==null&&ut(u),r.callbackPriority=2,r.callbackNode=null,2}function g_(r,i){if(Mt!==0&&Mt!==5)return r.callbackNode=null,r.callbackPriority=0,null;var o=r.callbackNode;if(uu()&&r.callbackNode!==o)return null;var u=Ge;return u=ji(r,r===it?u:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),u===0?null:(Wv(r,u,i),p_(r,dt()),r.callbackNode!=null&&r.callbackNode===o?g_.bind(null,r):null)}function y_(r,i){if(uu())return null;Wv(r,i,!0)}function iN(){yN(function(){(Ze&6)!==0?ln(Bt,sN):m_()})}function mm(){if(bs===0){var r=Wi;r===0&&(r=Ni,Ni<<=1,(Ni&261888)===0&&(Ni=256)),bs=r}return bs}function v_(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:bc(""+r)}function __(r,i){var o=i.ownerDocument.createElement("input");return o.name=i.name,o.value=i.value,r.id&&o.setAttribute("form",r.id),i.parentNode.insertBefore(o,i),r=new FormData(r),o.parentNode.removeChild(o),r}function aN(r,i,o,u,m){if(i==="submit"&&o&&o.stateNode===m){var y=v_((m[Qt]||null).action),T=u.submitter;T&&(i=(i=T[Qt]||null)?v_(i.formAction):T.getAttribute("formAction"),i!==null&&(y=i,T=null));var M=new Ec("action","action",null,u,m);r.push({event:M,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(bs!==0){var Y=T?__(m,T):new FormData(m);Dh(o,{pending:!0,data:Y,method:m.method,action:y},null,Y)}}else typeof y=="function"&&(M.preventDefault(),Y=T?__(m,T):new FormData(m),Dh(o,{pending:!0,data:Y,method:m.method,action:y},y,Y))},currentTarget:m}]})}}for(var pm=0;pm<Wf.length;pm++){var gm=Wf[pm],oN=gm.toLowerCase(),lN=gm[0].toUpperCase()+gm.slice(1);Yn(oN,"on"+lN)}Yn(Qy,"onAnimationEnd"),Yn(Wy,"onAnimationIteration"),Yn(Jy,"onAnimationStart"),Yn("dblclick","onDoubleClick"),Yn("focusin","onFocus"),Yn("focusout","onBlur"),Yn(ET,"onTransitionRun"),Yn(CT,"onTransitionStart"),Yn(AT,"onTransitionCancel"),Yn(Zy,"onTransitionEnd"),rs("onMouseEnter",["mouseout","mouseover"]),rs("onMouseLeave",["mouseout","mouseover"]),rs("onPointerEnter",["pointerout","pointerover"]),rs("onPointerLeave",["pointerout","pointerover"]),Sr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Sr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Sr("onBeforeInput",["compositionend","keypress","textInput","paste"]),Sr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Sr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Sr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var zo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),cN=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(zo));function b_(r,i){i=(i&4)!==0;for(var o=0;o<r.length;o++){var u=r[o],m=u.event;u=u.listeners;e:{var y=void 0;if(i)for(var T=u.length-1;0<=T;T--){var M=u[T],Y=M.instance,ne=M.currentTarget;if(M=M.listener,Y!==y&&m.isPropagationStopped())break e;y=M,m.currentTarget=ne;try{y(m)}catch(le){Tc(le)}m.currentTarget=null,y=Y}else for(T=0;T<u.length;T++){if(M=u[T],Y=M.instance,ne=M.currentTarget,M=M.listener,Y!==y&&m.isPropagationStopped())break e;y=M,m.currentTarget=ne;try{y(m)}catch(le){Tc(le)}m.currentTarget=null,y=Y}}}}function Ye(r,i){var o=i[ki];o===void 0&&(o=i[ki]=new Set);var u=r+"__bubble";o.has(u)||(w_(i,r,2,!1),o.add(u))}function ym(r,i,o){var u=0;i&&(u|=4),w_(o,r,u,i)}var hu="_reactListening"+Math.random().toString(36).slice(2);function vm(r){if(!r[hu]){r[hu]=!0,mc.forEach(function(o){o!=="selectionchange"&&(cN.has(o)||ym(o,!1,r),ym(o,!0,r))});var i=r.nodeType===9?r:r.ownerDocument;i===null||i[hu]||(i[hu]=!0,ym("selectionchange",!1,i))}}function w_(r,i,o,u){switch(Q_(i)){case 2:var m=IN;break;case 8:m=LN;break;default:m=Mm}o=m.bind(null,i,o,r),m=void 0,!Lf||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(m=!0),u?m!==void 0?r.addEventListener(i,o,{capture:!0,passive:m}):r.addEventListener(i,o,!0):m!==void 0?r.addEventListener(i,o,{passive:m}):r.addEventListener(i,o,!1)}function _m(r,i,o,u,m){var y=u;if((i&1)===0&&(i&2)===0&&u!==null)e:for(;;){if(u===null)return;var T=u.tag;if(T===3||T===4){var M=u.stateNode.containerInfo;if(M===m)break;if(T===4)for(T=u.return;T!==null;){var Y=T.tag;if((Y===3||Y===4)&&T.stateNode.containerInfo===m)return;T=T.return}for(;M!==null;){if(T=Zr(M),T===null)return;if(Y=T.tag,Y===5||Y===6||Y===26||Y===27){u=y=T;continue e}M=M.parentNode}}u=u.return}Ay(function(){var ne=y,le=$f(o),de=[];e:{var ie=e0.get(r);if(ie!==void 0){var ae=Ec,be=r;switch(r){case"keypress":if(xc(o)===0)break e;case"keydown":case"keyup":ae=nT;break;case"focusin":be="focus",ae=qf;break;case"focusout":be="blur",ae=qf;break;case"beforeblur":case"afterblur":ae=qf;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ae=Oy;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ae=VA;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ae=iT;break;case Qy:case Wy:case Jy:ae=GA;break;case Zy:ae=oT;break;case"scroll":case"scrollend":ae=qA;break;case"wheel":ae=cT;break;case"copy":case"cut":case"paste":ae=KA;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ae=jy;break;case"toggle":case"beforetoggle":ae=dT}var De=(i&4)!==0,st=!De&&(r==="scroll"||r==="scrollend"),J=De?ie!==null?ie+"Capture":null:ie;De=[];for(var Q=ne,te;Q!==null;){var ue=Q;if(te=ue.stateNode,ue=ue.tag,ue!==5&&ue!==26&&ue!==27||te===null||J===null||(ue=ao(Q,J),ue!=null&&De.push(Bo(Q,ue,te))),st)break;Q=Q.return}0<De.length&&(ie=new ae(ie,be,null,o,le),de.push({event:ie,listeners:De}))}}if((i&7)===0){e:{if(ie=r==="mouseover"||r==="pointerover",ae=r==="mouseout"||r==="pointerout",ie&&o!==Uf&&(be=o.relatedTarget||o.fromElement)&&(Zr(be)||be[xr]))break e;if((ae||ie)&&(ie=le.window===le?le:(ie=le.ownerDocument)?ie.defaultView||ie.parentWindow:window,ae?(be=o.relatedTarget||o.toElement,ae=ne,be=be?Zr(be):null,be!==null&&(st=l(be),De=be.tag,be!==st||De!==5&&De!==27&&De!==6)&&(be=null)):(ae=null,be=ne),ae!==be)){if(De=Oy,ue="onMouseLeave",J="onMouseEnter",Q="mouse",(r==="pointerout"||r==="pointerover")&&(De=jy,ue="onPointerLeave",J="onPointerEnter",Q="pointer"),st=ae==null?ie:ts(ae),te=be==null?ie:ts(be),ie=new De(ue,Q+"leave",ae,o,le),ie.target=st,ie.relatedTarget=te,ue=null,Zr(le)===ne&&(De=new De(J,Q+"enter",be,o,le),De.target=te,De.relatedTarget=st,ue=De),st=ue,ae&&be)t:{for(De=uN,J=ae,Q=be,te=0,ue=J;ue;ue=De(ue))te++;ue=0;for(var Re=Q;Re;Re=De(Re))ue++;for(;0<te-ue;)J=De(J),te--;for(;0<ue-te;)Q=De(Q),ue--;for(;te--;){if(J===Q||Q!==null&&J===Q.alternate){De=J;break t}J=De(J),Q=De(Q)}De=null}else De=null;ae!==null&&x_(de,ie,ae,De,!1),be!==null&&st!==null&&x_(de,st,be,De,!0)}}e:{if(ie=ne?ts(ne):window,ae=ie.nodeName&&ie.nodeName.toLowerCase(),ae==="select"||ae==="input"&&ie.type==="file")var We=zy;else if(Iy(ie))if(By)We=wT;else{We=_T;var Ee=vT}else ae=ie.nodeName,!ae||ae.toLowerCase()!=="input"||ie.type!=="checkbox"&&ie.type!=="radio"?ne&&Df(ne.elementType)&&(We=zy):We=bT;if(We&&(We=We(r,ne))){Ly(de,We,o,le);break e}Ee&&Ee(r,ie,ne),r==="focusout"&&ne&&ie.type==="number"&&ne.memoizedProps.value!=null&&Ii(ie,"number",ie.value)}switch(Ee=ne?ts(ne):window,r){case"focusin":(Iy(Ee)||Ee.contentEditable==="true")&&(Hi=Ee,Xf=ne,po=null);break;case"focusout":po=Xf=Hi=null;break;case"mousedown":Kf=!0;break;case"contextmenu":case"mouseup":case"dragend":Kf=!1,Xy(de,o,le);break;case"selectionchange":if(ST)break;case"keydown":case"keyup":Xy(de,o,le)}var He;if(Vf)e:{switch(r){case"compositionstart":var Xe="onCompositionStart";break e;case"compositionend":Xe="onCompositionEnd";break e;case"compositionupdate":Xe="onCompositionUpdate";break e}Xe=void 0}else qi?Uy(r,o)&&(Xe="onCompositionEnd"):r==="keydown"&&o.keyCode===229&&(Xe="onCompositionStart");Xe&&(ky&&o.locale!=="ko"&&(qi||Xe!=="onCompositionStart"?Xe==="onCompositionEnd"&&qi&&(He=Ty()):(ss=le,zf="value"in ss?ss.value:ss.textContent,qi=!0)),Ee=mu(ne,Xe),0<Ee.length&&(Xe=new Ry(Xe,r,null,o,le),de.push({event:Xe,listeners:Ee}),He?Xe.data=He:(He=$y(o),He!==null&&(Xe.data=He)))),(He=hT?mT(r,o):pT(r,o))&&(Xe=mu(ne,"onBeforeInput"),0<Xe.length&&(Ee=new Ry("onBeforeInput","beforeinput",null,o,le),de.push({event:Ee,listeners:Xe}),Ee.data=He)),aN(de,r,ne,o,le)}b_(de,i)})}function Bo(r,i,o){return{instance:r,listener:i,currentTarget:o}}function mu(r,i){for(var o=i+"Capture",u=[];r!==null;){var m=r,y=m.stateNode;if(m=m.tag,m!==5&&m!==26&&m!==27||y===null||(m=ao(r,o),m!=null&&u.unshift(Bo(r,m,y)),m=ao(r,i),m!=null&&u.push(Bo(r,m,y))),r.tag===3)return u;r=r.return}return[]}function uN(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function x_(r,i,o,u,m){for(var y=i._reactName,T=[];o!==null&&o!==u;){var M=o,Y=M.alternate,ne=M.stateNode;if(M=M.tag,Y!==null&&Y===u)break;M!==5&&M!==26&&M!==27||ne===null||(Y=ne,m?(ne=ao(o,y),ne!=null&&T.unshift(Bo(o,ne,Y))):m||(ne=ao(o,y),ne!=null&&T.push(Bo(o,ne,Y)))),o=o.return}T.length!==0&&r.push({event:i,listeners:T})}var dN=/\r\n?/g,fN=/\u0000|\uFFFD/g;function S_(r){return(typeof r=="string"?r:""+r).replace(dN,`
`).replace(fN,"")}function E_(r,i){return i=S_(i),S_(r)===i}function rt(r,i,o,u,m,y){switch(o){case"children":typeof u=="string"?i==="body"||i==="textarea"&&u===""||zi(r,u):(typeof u=="number"||typeof u=="bigint")&&i!=="body"&&zi(r,""+u);break;case"className":Di(r,"class",u);break;case"tabIndex":Di(r,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":Di(r,o,u);break;case"style":Ey(r,u,y);break;case"data":if(i!=="object"){Di(r,"data",u);break}case"src":case"href":if(u===""&&(i!=="a"||o!=="href")){r.removeAttribute(o);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){r.removeAttribute(o);break}u=bc(""+u),r.setAttribute(o,u);break;case"action":case"formAction":if(typeof u=="function"){r.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof y=="function"&&(o==="formAction"?(i!=="input"&&rt(r,i,"name",m.name,m,null),rt(r,i,"formEncType",m.formEncType,m,null),rt(r,i,"formMethod",m.formMethod,m,null),rt(r,i,"formTarget",m.formTarget,m,null)):(rt(r,i,"encType",m.encType,m,null),rt(r,i,"method",m.method,m,null),rt(r,i,"target",m.target,m,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){r.removeAttribute(o);break}u=bc(""+u),r.setAttribute(o,u);break;case"onClick":u!=null&&(r.onclick=Er);break;case"onScroll":u!=null&&Ye("scroll",r);break;case"onScrollEnd":u!=null&&Ye("scrollend",r);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(o=u.__html,o!=null){if(m.children!=null)throw Error(s(60));r.innerHTML=o}}break;case"multiple":r.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":r.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){r.removeAttribute("xlink:href");break}o=bc(""+u),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(o,""+u):r.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(o,""):r.removeAttribute(o);break;case"capture":case"download":u===!0?r.setAttribute(o,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(o,u):r.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?r.setAttribute(o,u):r.removeAttribute(o);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?r.removeAttribute(o):r.setAttribute(o,u);break;case"popover":Ye("beforetoggle",r),Ye("toggle",r),Mi(r,"popover",u);break;case"xlinkActuate":Fn(r,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":Fn(r,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":Fn(r,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":Fn(r,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":Fn(r,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":Fn(r,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":Fn(r,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":Fn(r,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":Fn(r,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":Mi(r,"is",u);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=BA.get(o)||o,Mi(r,o,u))}}function bm(r,i,o,u,m,y){switch(o){case"style":Ey(r,u,y);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(o=u.__html,o!=null){if(m.children!=null)throw Error(s(60));r.innerHTML=o}}break;case"children":typeof u=="string"?zi(r,u):(typeof u=="number"||typeof u=="bigint")&&zi(r,""+u);break;case"onScroll":u!=null&&Ye("scroll",r);break;case"onScrollEnd":u!=null&&Ye("scrollend",r);break;case"onClick":u!=null&&(r.onclick=Er);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!pc.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(m=o.endsWith("Capture"),i=o.slice(2,m?o.length-7:void 0),y=r[Qt]||null,y=y!=null?y[o]:null,typeof y=="function"&&r.removeEventListener(i,y,m),typeof u=="function")){typeof y!="function"&&y!==null&&(o in r?r[o]=null:r.hasAttribute(o)&&r.removeAttribute(o)),r.addEventListener(i,u,m);break e}o in r?r[o]=u:u===!0?r.setAttribute(o,""):Mi(r,o,u)}}}function Ft(r,i,o){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ye("error",r),Ye("load",r);var u=!1,m=!1,y;for(y in o)if(o.hasOwnProperty(y)){var T=o[y];if(T!=null)switch(y){case"src":u=!0;break;case"srcSet":m=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:rt(r,i,y,T,o,null)}}m&&rt(r,i,"srcSet",o.srcSet,o,null),u&&rt(r,i,"src",o.src,o,null);return;case"input":Ye("invalid",r);var M=y=T=m=null,Y=null,ne=null;for(u in o)if(o.hasOwnProperty(u)){var le=o[u];if(le!=null)switch(u){case"name":m=le;break;case"type":T=le;break;case"checked":Y=le;break;case"defaultChecked":ne=le;break;case"value":y=le;break;case"defaultValue":M=le;break;case"children":case"dangerouslySetInnerHTML":if(le!=null)throw Error(s(137,i));break;default:rt(r,i,u,le,o,null)}}_c(r,y,M,Y,ne,T,m,!1);return;case"select":Ye("invalid",r),u=T=y=null;for(m in o)if(o.hasOwnProperty(m)&&(M=o[m],M!=null))switch(m){case"value":y=M;break;case"defaultValue":T=M;break;case"multiple":u=M;default:rt(r,i,m,M,o,null)}i=y,o=T,r.multiple=!!u,i!=null?Li(r,!!u,i,!1):o!=null&&Li(r,!!u,o,!0);return;case"textarea":Ye("invalid",r),y=m=u=null;for(T in o)if(o.hasOwnProperty(T)&&(M=o[T],M!=null))switch(T){case"value":u=M;break;case"defaultValue":m=M;break;case"children":y=M;break;case"dangerouslySetInnerHTML":if(M!=null)throw Error(s(91));break;default:rt(r,i,T,M,o,null)}xy(r,u,m,y);return;case"option":for(Y in o)if(o.hasOwnProperty(Y)&&(u=o[Y],u!=null))switch(Y){case"selected":r.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:rt(r,i,Y,u,o,null)}return;case"dialog":Ye("beforetoggle",r),Ye("toggle",r),Ye("cancel",r),Ye("close",r);break;case"iframe":case"object":Ye("load",r);break;case"video":case"audio":for(u=0;u<zo.length;u++)Ye(zo[u],r);break;case"image":Ye("error",r),Ye("load",r);break;case"details":Ye("toggle",r);break;case"embed":case"source":case"link":Ye("error",r),Ye("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ne in o)if(o.hasOwnProperty(ne)&&(u=o[ne],u!=null))switch(ne){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:rt(r,i,ne,u,o,null)}return;default:if(Df(i)){for(le in o)o.hasOwnProperty(le)&&(u=o[le],u!==void 0&&bm(r,i,le,u,o,void 0));return}}for(M in o)o.hasOwnProperty(M)&&(u=o[M],u!=null&&rt(r,i,M,u,o,null))}function hN(r,i,o,u){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var m=null,y=null,T=null,M=null,Y=null,ne=null,le=null;for(ae in o){var de=o[ae];if(o.hasOwnProperty(ae)&&de!=null)switch(ae){case"checked":break;case"value":break;case"defaultValue":Y=de;default:u.hasOwnProperty(ae)||rt(r,i,ae,null,u,de)}}for(var ie in u){var ae=u[ie];if(de=o[ie],u.hasOwnProperty(ie)&&(ae!=null||de!=null))switch(ie){case"type":y=ae;break;case"name":m=ae;break;case"checked":ne=ae;break;case"defaultChecked":le=ae;break;case"value":T=ae;break;case"defaultValue":M=ae;break;case"children":case"dangerouslySetInnerHTML":if(ae!=null)throw Error(s(137,i));break;default:ae!==de&&rt(r,i,ie,ae,u,de)}}io(r,T,M,Y,ne,le,y,m);return;case"select":ae=T=M=ie=null;for(y in o)if(Y=o[y],o.hasOwnProperty(y)&&Y!=null)switch(y){case"value":break;case"multiple":ae=Y;default:u.hasOwnProperty(y)||rt(r,i,y,null,u,Y)}for(m in u)if(y=u[m],Y=o[m],u.hasOwnProperty(m)&&(y!=null||Y!=null))switch(m){case"value":ie=y;break;case"defaultValue":M=y;break;case"multiple":T=y;default:y!==Y&&rt(r,i,m,y,u,Y)}i=M,o=T,u=ae,ie!=null?Li(r,!!o,ie,!1):!!u!=!!o&&(i!=null?Li(r,!!o,i,!0):Li(r,!!o,o?[]:"",!1));return;case"textarea":ae=ie=null;for(M in o)if(m=o[M],o.hasOwnProperty(M)&&m!=null&&!u.hasOwnProperty(M))switch(M){case"value":break;case"children":break;default:rt(r,i,M,null,u,m)}for(T in u)if(m=u[T],y=o[T],u.hasOwnProperty(T)&&(m!=null||y!=null))switch(T){case"value":ie=m;break;case"defaultValue":ae=m;break;case"children":break;case"dangerouslySetInnerHTML":if(m!=null)throw Error(s(91));break;default:m!==y&&rt(r,i,T,m,u,y)}wy(r,ie,ae);return;case"option":for(var be in o)if(ie=o[be],o.hasOwnProperty(be)&&ie!=null&&!u.hasOwnProperty(be))switch(be){case"selected":r.selected=!1;break;default:rt(r,i,be,null,u,ie)}for(Y in u)if(ie=u[Y],ae=o[Y],u.hasOwnProperty(Y)&&ie!==ae&&(ie!=null||ae!=null))switch(Y){case"selected":r.selected=ie&&typeof ie!="function"&&typeof ie!="symbol";break;default:rt(r,i,Y,ie,u,ae)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var De in o)ie=o[De],o.hasOwnProperty(De)&&ie!=null&&!u.hasOwnProperty(De)&&rt(r,i,De,null,u,ie);for(ne in u)if(ie=u[ne],ae=o[ne],u.hasOwnProperty(ne)&&ie!==ae&&(ie!=null||ae!=null))switch(ne){case"children":case"dangerouslySetInnerHTML":if(ie!=null)throw Error(s(137,i));break;default:rt(r,i,ne,ie,u,ae)}return;default:if(Df(i)){for(var st in o)ie=o[st],o.hasOwnProperty(st)&&ie!==void 0&&!u.hasOwnProperty(st)&&bm(r,i,st,void 0,u,ie);for(le in u)ie=u[le],ae=o[le],!u.hasOwnProperty(le)||ie===ae||ie===void 0&&ae===void 0||bm(r,i,le,ie,u,ae);return}}for(var J in o)ie=o[J],o.hasOwnProperty(J)&&ie!=null&&!u.hasOwnProperty(J)&&rt(r,i,J,null,u,ie);for(de in u)ie=u[de],ae=o[de],!u.hasOwnProperty(de)||ie===ae||ie==null&&ae==null||rt(r,i,de,ie,u,ae)}function C_(r){switch(r){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function mN(){if(typeof performance.getEntriesByType=="function"){for(var r=0,i=0,o=performance.getEntriesByType("resource"),u=0;u<o.length;u++){var m=o[u],y=m.transferSize,T=m.initiatorType,M=m.duration;if(y&&M&&C_(T)){for(T=0,M=m.responseEnd,u+=1;u<o.length;u++){var Y=o[u],ne=Y.startTime;if(ne>M)break;var le=Y.transferSize,de=Y.initiatorType;le&&C_(de)&&(Y=Y.responseEnd,T+=le*(Y<M?1:(M-ne)/(Y-ne)))}if(--u,i+=8*(y+T)/(m.duration/1e3),r++,10<r)break}}if(0<r)return i/r/1e6}return navigator.connection&&(r=navigator.connection.downlink,typeof r=="number")?r:5}var wm=null,xm=null;function pu(r){return r.nodeType===9?r:r.ownerDocument}function A_(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function T_(r,i){if(r===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&i==="foreignObject"?0:r}function Sm(r,i){return r==="textarea"||r==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Em=null;function pN(){var r=window.event;return r&&r.type==="popstate"?r===Em?!1:(Em=r,!0):(Em=null,!1)}var N_=typeof setTimeout=="function"?setTimeout:void 0,gN=typeof clearTimeout=="function"?clearTimeout:void 0,O_=typeof Promise=="function"?Promise:void 0,yN=typeof queueMicrotask=="function"?queueMicrotask:typeof O_<"u"?function(r){return O_.resolve(null).then(r).catch(vN)}:N_;function vN(r){setTimeout(function(){throw r})}function ws(r){return r==="head"}function R_(r,i){var o=i,u=0;do{var m=o.nextSibling;if(r.removeChild(o),m&&m.nodeType===8)if(o=m.data,o==="/$"||o==="/&"){if(u===0){r.removeChild(m),ga(i);return}u--}else if(o==="$"||o==="$?"||o==="$~"||o==="$!"||o==="&")u++;else if(o==="html")Po(r.ownerDocument.documentElement);else if(o==="head"){o=r.ownerDocument.head,Po(o);for(var y=o.firstChild;y;){var T=y.nextSibling,M=y.nodeName;y[qs]||M==="SCRIPT"||M==="STYLE"||M==="LINK"&&y.rel.toLowerCase()==="stylesheet"||o.removeChild(y),y=T}}else o==="body"&&Po(r.ownerDocument.body);o=m}while(o);ga(i)}function j_(r,i){var o=r;r=0;do{var u=o.nextSibling;if(o.nodeType===1?i?(o._stashedDisplay=o.style.display,o.style.display="none"):(o.style.display=o._stashedDisplay||"",o.getAttribute("style")===""&&o.removeAttribute("style")):o.nodeType===3&&(i?(o._stashedText=o.nodeValue,o.nodeValue=""):o.nodeValue=o._stashedText||""),u&&u.nodeType===8)if(o=u.data,o==="/$"){if(r===0)break;r--}else o!=="$"&&o!=="$?"&&o!=="$~"&&o!=="$!"||r++;o=u}while(o)}function Cm(r){var i=r.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var o=i;switch(i=i.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":Cm(o),ro(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}r.removeChild(o)}}function _N(r,i,o,u){for(;r.nodeType===1;){var m=o;if(r.nodeName.toLowerCase()!==i.toLowerCase()){if(!u&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(u){if(!r[qs])switch(i){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(y=r.getAttribute("rel"),y==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(y!==m.rel||r.getAttribute("href")!==(m.href==null||m.href===""?null:m.href)||r.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin)||r.getAttribute("title")!==(m.title==null?null:m.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(y=r.getAttribute("src"),(y!==(m.src==null?null:m.src)||r.getAttribute("type")!==(m.type==null?null:m.type)||r.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin))&&y&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(i==="input"&&r.type==="hidden"){var y=m.name==null?null:""+m.name;if(m.type==="hidden"&&r.getAttribute("name")===y)return r}else return r;if(r=Bn(r.nextSibling),r===null)break}return null}function bN(r,i,o){if(i==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!o||(r=Bn(r.nextSibling),r===null))return null;return r}function k_(r,i){for(;r.nodeType!==8;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!i||(r=Bn(r.nextSibling),r===null))return null;return r}function Am(r){return r.data==="$?"||r.data==="$~"}function Tm(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState!=="loading"}function wN(r,i){var o=r.ownerDocument;if(r.data==="$~")r._reactRetry=i;else if(r.data!=="$?"||o.readyState!=="loading")i();else{var u=function(){i(),o.removeEventListener("DOMContentLoaded",u)};o.addEventListener("DOMContentLoaded",u),r._reactRetry=u}}function Bn(r){for(;r!=null;r=r.nextSibling){var i=r.nodeType;if(i===1||i===3)break;if(i===8){if(i=r.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return r}var Nm=null;function M_(r){r=r.nextSibling;for(var i=0;r;){if(r.nodeType===8){var o=r.data;if(o==="/$"||o==="/&"){if(i===0)return Bn(r.nextSibling);i--}else o!=="$"&&o!=="$!"&&o!=="$?"&&o!=="$~"&&o!=="&"||i++}r=r.nextSibling}return null}function D_(r){r=r.previousSibling;for(var i=0;r;){if(r.nodeType===8){var o=r.data;if(o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"){if(i===0)return r;i--}else o!=="/$"&&o!=="/&"||i++}r=r.previousSibling}return null}function U_(r,i,o){switch(i=pu(o),r){case"html":if(r=i.documentElement,!r)throw Error(s(452));return r;case"head":if(r=i.head,!r)throw Error(s(453));return r;case"body":if(r=i.body,!r)throw Error(s(454));return r;default:throw Error(s(451))}}function Po(r){for(var i=r.attributes;i.length;)r.removeAttributeNode(i[0]);ro(r)}var Pn=new Map,$_=new Set;function gu(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var Br=z.d;z.d={f:xN,r:SN,D:EN,C:CN,L:AN,m:TN,X:ON,S:NN,M:RN};function xN(){var r=Br.f(),i=ou();return r||i}function SN(r){var i=es(r);i!==null&&i.tag===5&&i.type==="form"?Z0(i):Br.r(r)}var ha=typeof document>"u"?null:document;function I_(r,i,o){var u=ha;if(u&&typeof i=="string"&&i){var m=Wt(i);m='link[rel="'+r+'"][href="'+m+'"]',typeof o=="string"&&(m+='[crossorigin="'+o+'"]'),$_.has(m)||($_.add(m),r={rel:r,crossOrigin:o,href:i},u.querySelector(m)===null&&(i=u.createElement("link"),Ft(i,"link",r),St(i),u.head.appendChild(i)))}}function EN(r){Br.D(r),I_("dns-prefetch",r,null)}function CN(r,i){Br.C(r,i),I_("preconnect",r,i)}function AN(r,i,o){Br.L(r,i,o);var u=ha;if(u&&r&&i){var m='link[rel="preload"][as="'+Wt(i)+'"]';i==="image"&&o&&o.imageSrcSet?(m+='[imagesrcset="'+Wt(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(m+='[imagesizes="'+Wt(o.imageSizes)+'"]')):m+='[href="'+Wt(r)+'"]';var y=m;switch(i){case"style":y=ma(r);break;case"script":y=pa(r)}Pn.has(y)||(r=g({rel:"preload",href:i==="image"&&o&&o.imageSrcSet?void 0:r,as:i},o),Pn.set(y,r),u.querySelector(m)!==null||i==="style"&&u.querySelector(qo(y))||i==="script"&&u.querySelector(Ho(y))||(i=u.createElement("link"),Ft(i,"link",r),St(i),u.head.appendChild(i)))}}function TN(r,i){Br.m(r,i);var o=ha;if(o&&r){var u=i&&typeof i.as=="string"?i.as:"script",m='link[rel="modulepreload"][as="'+Wt(u)+'"][href="'+Wt(r)+'"]',y=m;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":y=pa(r)}if(!Pn.has(y)&&(r=g({rel:"modulepreload",href:r},i),Pn.set(y,r),o.querySelector(m)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(Ho(y)))return}u=o.createElement("link"),Ft(u,"link",r),St(u),o.head.appendChild(u)}}}function NN(r,i,o){Br.S(r,i,o);var u=ha;if(u&&r){var m=ns(u).hoistableStyles,y=ma(r);i=i||"default";var T=m.get(y);if(!T){var M={loading:0,preload:null};if(T=u.querySelector(qo(y)))M.loading=5;else{r=g({rel:"stylesheet",href:r,"data-precedence":i},o),(o=Pn.get(y))&&Om(r,o);var Y=T=u.createElement("link");St(Y),Ft(Y,"link",r),Y._p=new Promise(function(ne,le){Y.onload=ne,Y.onerror=le}),Y.addEventListener("load",function(){M.loading|=1}),Y.addEventListener("error",function(){M.loading|=2}),M.loading|=4,yu(T,i,u)}T={type:"stylesheet",instance:T,count:1,state:M},m.set(y,T)}}}function ON(r,i){Br.X(r,i);var o=ha;if(o&&r){var u=ns(o).hoistableScripts,m=pa(r),y=u.get(m);y||(y=o.querySelector(Ho(m)),y||(r=g({src:r,async:!0},i),(i=Pn.get(m))&&Rm(r,i),y=o.createElement("script"),St(y),Ft(y,"link",r),o.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},u.set(m,y))}}function RN(r,i){Br.M(r,i);var o=ha;if(o&&r){var u=ns(o).hoistableScripts,m=pa(r),y=u.get(m);y||(y=o.querySelector(Ho(m)),y||(r=g({src:r,async:!0,type:"module"},i),(i=Pn.get(m))&&Rm(r,i),y=o.createElement("script"),St(y),Ft(y,"link",r),o.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},u.set(m,y))}}function L_(r,i,o,u){var m=(m=ee.current)?gu(m):null;if(!m)throw Error(s(446));switch(r){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(i=ma(o.href),o=ns(m).hoistableStyles,u=o.get(i),u||(u={type:"style",instance:null,count:0,state:null},o.set(i,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){r=ma(o.href);var y=ns(m).hoistableStyles,T=y.get(r);if(T||(m=m.ownerDocument||m,T={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},y.set(r,T),(y=m.querySelector(qo(r)))&&!y._p&&(T.instance=y,T.state.loading=5),Pn.has(r)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},Pn.set(r,o),y||jN(m,r,o,T.state))),i&&u===null)throw Error(s(528,""));return T}if(i&&u!==null)throw Error(s(529,""));return null;case"script":return i=o.async,o=o.src,typeof o=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=pa(o),o=ns(m).hoistableScripts,u=o.get(i),u||(u={type:"script",instance:null,count:0,state:null},o.set(i,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,r))}}function ma(r){return'href="'+Wt(r)+'"'}function qo(r){return'link[rel="stylesheet"]['+r+"]"}function z_(r){return g({},r,{"data-precedence":r.precedence,precedence:null})}function jN(r,i,o,u){r.querySelector('link[rel="preload"][as="style"]['+i+"]")?u.loading=1:(i=r.createElement("link"),u.preload=i,i.addEventListener("load",function(){return u.loading|=1}),i.addEventListener("error",function(){return u.loading|=2}),Ft(i,"link",o),St(i),r.head.appendChild(i))}function pa(r){return'[src="'+Wt(r)+'"]'}function Ho(r){return"script[async]"+r}function B_(r,i,o){if(i.count++,i.instance===null)switch(i.type){case"style":var u=r.querySelector('style[data-href~="'+Wt(o.href)+'"]');if(u)return i.instance=u,St(u),u;var m=g({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return u=(r.ownerDocument||r).createElement("style"),St(u),Ft(u,"style",m),yu(u,o.precedence,r),i.instance=u;case"stylesheet":m=ma(o.href);var y=r.querySelector(qo(m));if(y)return i.state.loading|=4,i.instance=y,St(y),y;u=z_(o),(m=Pn.get(m))&&Om(u,m),y=(r.ownerDocument||r).createElement("link"),St(y);var T=y;return T._p=new Promise(function(M,Y){T.onload=M,T.onerror=Y}),Ft(y,"link",u),i.state.loading|=4,yu(y,o.precedence,r),i.instance=y;case"script":return y=pa(o.src),(m=r.querySelector(Ho(y)))?(i.instance=m,St(m),m):(u=o,(m=Pn.get(y))&&(u=g({},o),Rm(u,m)),r=r.ownerDocument||r,m=r.createElement("script"),St(m),Ft(m,"link",u),r.head.appendChild(m),i.instance=m);case"void":return null;default:throw Error(s(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(u=i.instance,i.state.loading|=4,yu(u,o.precedence,r));return i.instance}function yu(r,i,o){for(var u=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),m=u.length?u[u.length-1]:null,y=m,T=0;T<u.length;T++){var M=u[T];if(M.dataset.precedence===i)y=M;else if(y!==m)break}y?y.parentNode.insertBefore(r,y.nextSibling):(i=o.nodeType===9?o.head:o,i.insertBefore(r,i.firstChild))}function Om(r,i){r.crossOrigin==null&&(r.crossOrigin=i.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=i.referrerPolicy),r.title==null&&(r.title=i.title)}function Rm(r,i){r.crossOrigin==null&&(r.crossOrigin=i.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=i.referrerPolicy),r.integrity==null&&(r.integrity=i.integrity)}var vu=null;function P_(r,i,o){if(vu===null){var u=new Map,m=vu=new Map;m.set(o,u)}else m=vu,u=m.get(o),u||(u=new Map,m.set(o,u));if(u.has(r))return u;for(u.set(r,null),o=o.getElementsByTagName(r),m=0;m<o.length;m++){var y=o[m];if(!(y[qs]||y[kt]||r==="link"&&y.getAttribute("rel")==="stylesheet")&&y.namespaceURI!=="http://www.w3.org/2000/svg"){var T=y.getAttribute(i)||"";T=r+T;var M=u.get(T);M?M.push(y):u.set(T,[y])}}return u}function q_(r,i,o){r=r.ownerDocument||r,r.head.insertBefore(o,i==="title"?r.querySelector("head > title"):null)}function kN(r,i,o){if(o===1||i.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return r=i.disabled,typeof i.precedence=="string"&&r==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function H_(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}function MN(r,i,o,u){if(o.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var m=ma(u.href),y=i.querySelector(qo(m));if(y){i=y._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(r.count++,r=_u.bind(r),i.then(r,r)),o.state.loading|=4,o.instance=y,St(y);return}y=i.ownerDocument||i,u=z_(u),(m=Pn.get(m))&&Om(u,m),y=y.createElement("link"),St(y);var T=y;T._p=new Promise(function(M,Y){T.onload=M,T.onerror=Y}),Ft(y,"link",u),o.instance=y}r.stylesheets===null&&(r.stylesheets=new Map),r.stylesheets.set(o,i),(i=o.state.preload)&&(o.state.loading&3)===0&&(r.count++,o=_u.bind(r),i.addEventListener("load",o),i.addEventListener("error",o))}}var jm=0;function DN(r,i){return r.stylesheets&&r.count===0&&wu(r,r.stylesheets),0<r.count||0<r.imgCount?function(o){var u=setTimeout(function(){if(r.stylesheets&&wu(r,r.stylesheets),r.unsuspend){var y=r.unsuspend;r.unsuspend=null,y()}},6e4+i);0<r.imgBytes&&jm===0&&(jm=62500*mN());var m=setTimeout(function(){if(r.waitingForImages=!1,r.count===0&&(r.stylesheets&&wu(r,r.stylesheets),r.unsuspend)){var y=r.unsuspend;r.unsuspend=null,y()}},(r.imgBytes>jm?50:800)+i);return r.unsuspend=o,function(){r.unsuspend=null,clearTimeout(u),clearTimeout(m)}}:null}function _u(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)wu(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var bu=null;function wu(r,i){r.stylesheets=null,r.unsuspend!==null&&(r.count++,bu=new Map,i.forEach(UN,r),bu=null,_u.call(r))}function UN(r,i){if(!(i.state.loading&4)){var o=bu.get(r);if(o)var u=o.get(null);else{o=new Map,bu.set(r,o);for(var m=r.querySelectorAll("link[data-precedence],style[data-precedence]"),y=0;y<m.length;y++){var T=m[y];(T.nodeName==="LINK"||T.getAttribute("media")!=="not all")&&(o.set(T.dataset.precedence,T),u=T)}u&&o.set(null,u)}m=i.instance,T=m.getAttribute("data-precedence"),y=o.get(T)||u,y===u&&o.set(null,m),o.set(T,m),this.count++,u=_u.bind(this),m.addEventListener("load",u),m.addEventListener("error",u),y?y.parentNode.insertBefore(m,y.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(m,r.firstChild)),i.state.loading|=4}}var Vo={$$typeof:E,Provider:null,Consumer:null,_currentValue:q,_currentValue2:q,_threadCount:0};function $N(r,i,o,u,m,y,T,M,Y){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=eo(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=eo(0),this.hiddenUpdates=eo(null),this.identifierPrefix=u,this.onUncaughtError=m,this.onCaughtError=y,this.onRecoverableError=T,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Y,this.incompleteTransitions=new Map}function V_(r,i,o,u,m,y,T,M,Y,ne,le,de){return r=new $N(r,i,o,T,Y,ne,le,de,M),i=1,y===!0&&(i|=24),y=bn(3,null,null,i),r.current=y,y.stateNode=r,i=uh(),i.refCount++,r.pooledCache=i,i.refCount++,y.memoizedState={element:u,isDehydrated:o,cache:i},mh(y),r}function F_(r){return r?(r=Yi,r):Yi}function Y_(r,i,o,u,m,y){m=F_(m),u.context===null?u.context=m:u.pendingContext=m,u=us(i),u.payload={element:o},y=y===void 0?null:y,y!==null&&(u.callback=y),o=ds(r,u,i),o!==null&&(pn(o,r,i),xo(o,r,i))}function G_(r,i){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var o=r.retryLane;r.retryLane=o!==0&&o<i?o:i}}function km(r,i){G_(r,i),(r=r.alternate)&&G_(r,i)}function X_(r){if(r.tag===13||r.tag===31){var i=Ys(r,67108864);i!==null&&pn(i,r,67108864),km(r,67108864)}}function K_(r){if(r.tag===13||r.tag===31){var i=Cn();i=to(i);var o=Ys(r,i);o!==null&&pn(o,r,i),km(r,i)}}var xu=!0;function IN(r,i,o,u){var m=U.T;U.T=null;var y=z.p;try{z.p=2,Mm(r,i,o,u)}finally{z.p=y,U.T=m}}function LN(r,i,o,u){var m=U.T;U.T=null;var y=z.p;try{z.p=8,Mm(r,i,o,u)}finally{z.p=y,U.T=m}}function Mm(r,i,o,u){if(xu){var m=Dm(u);if(m===null)_m(r,i,u,Su,o),W_(r,u);else if(BN(m,r,i,o,u))u.stopPropagation();else if(W_(r,u),i&4&&-1<zN.indexOf(r)){for(;m!==null;){var y=es(m);if(y!==null)switch(y.tag){case 3:if(y=y.stateNode,y.current.memoizedState.isDehydrated){var T=wr(y.pendingLanes);if(T!==0){var M=y;for(M.pendingLanes|=2,M.entangledLanes|=2;T;){var Y=1<<31-sn(T);M.entanglements[1]|=Y,T&=~Y}fr(y),(Ze&6)===0&&(iu=dt()+500,Lo(0))}}break;case 31:case 13:M=Ys(y,2),M!==null&&pn(M,y,2),ou(),km(y,2)}if(y=Dm(u),y===null&&_m(r,i,u,Su,o),y===m)break;m=y}m!==null&&u.stopPropagation()}else _m(r,i,u,null,o)}}function Dm(r){return r=$f(r),Um(r)}var Su=null;function Um(r){if(Su=null,r=Zr(r),r!==null){var i=l(r);if(i===null)r=null;else{var o=i.tag;if(o===13){if(r=c(i),r!==null)return r;r=null}else if(o===31){if(r=d(i),r!==null)return r;r=null}else if(o===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;r=null}else i!==r&&(r=null)}}return Su=r,null}function Q_(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(rn()){case Bt:return 2;case jt:return 8;case fe:case _e:return 32;case Ae:return 268435456;default:return 32}default:return 32}}var $m=!1,xs=null,Ss=null,Es=null,Fo=new Map,Yo=new Map,Cs=[],zN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function W_(r,i){switch(r){case"focusin":case"focusout":xs=null;break;case"dragenter":case"dragleave":Ss=null;break;case"mouseover":case"mouseout":Es=null;break;case"pointerover":case"pointerout":Fo.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Yo.delete(i.pointerId)}}function Go(r,i,o,u,m,y){return r===null||r.nativeEvent!==y?(r={blockedOn:i,domEventName:o,eventSystemFlags:u,nativeEvent:y,targetContainers:[m]},i!==null&&(i=es(i),i!==null&&X_(i)),r):(r.eventSystemFlags|=u,i=r.targetContainers,m!==null&&i.indexOf(m)===-1&&i.push(m),r)}function BN(r,i,o,u,m){switch(i){case"focusin":return xs=Go(xs,r,i,o,u,m),!0;case"dragenter":return Ss=Go(Ss,r,i,o,u,m),!0;case"mouseover":return Es=Go(Es,r,i,o,u,m),!0;case"pointerover":var y=m.pointerId;return Fo.set(y,Go(Fo.get(y)||null,r,i,o,u,m)),!0;case"gotpointercapture":return y=m.pointerId,Yo.set(y,Go(Yo.get(y)||null,r,i,o,u,m)),!0}return!1}function J_(r){var i=Zr(r.target);if(i!==null){var o=l(i);if(o!==null){if(i=o.tag,i===13){if(i=c(o),i!==null){r.blockedOn=i,dc(r.priority,function(){K_(o)});return}}else if(i===31){if(i=d(o),i!==null){r.blockedOn=i,dc(r.priority,function(){K_(o)});return}}else if(i===3&&o.stateNode.current.memoizedState.isDehydrated){r.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}r.blockedOn=null}function Eu(r){if(r.blockedOn!==null)return!1;for(var i=r.targetContainers;0<i.length;){var o=Dm(r.nativeEvent);if(o===null){o=r.nativeEvent;var u=new o.constructor(o.type,o);Uf=u,o.target.dispatchEvent(u),Uf=null}else return i=es(o),i!==null&&X_(i),r.blockedOn=o,!1;i.shift()}return!0}function Z_(r,i,o){Eu(r)&&o.delete(i)}function PN(){$m=!1,xs!==null&&Eu(xs)&&(xs=null),Ss!==null&&Eu(Ss)&&(Ss=null),Es!==null&&Eu(Es)&&(Es=null),Fo.forEach(Z_),Yo.forEach(Z_)}function Cu(r,i){r.blockedOn===i&&(r.blockedOn=null,$m||($m=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,PN)))}var Au=null;function eb(r){Au!==r&&(Au=r,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Au===r&&(Au=null);for(var i=0;i<r.length;i+=3){var o=r[i],u=r[i+1],m=r[i+2];if(typeof u!="function"){if(Um(u||o)===null)continue;break}var y=es(o);y!==null&&(r.splice(i,3),i-=3,Dh(y,{pending:!0,data:m,method:o.method,action:u},u,m))}}))}function ga(r){function i(Y){return Cu(Y,r)}xs!==null&&Cu(xs,r),Ss!==null&&Cu(Ss,r),Es!==null&&Cu(Es,r),Fo.forEach(i),Yo.forEach(i);for(var o=0;o<Cs.length;o++){var u=Cs[o];u.blockedOn===r&&(u.blockedOn=null)}for(;0<Cs.length&&(o=Cs[0],o.blockedOn===null);)J_(o),o.blockedOn===null&&Cs.shift();if(o=(r.ownerDocument||r).$$reactFormReplay,o!=null)for(u=0;u<o.length;u+=3){var m=o[u],y=o[u+1],T=m[Qt]||null;if(typeof y=="function")T||eb(o);else if(T){var M=null;if(y&&y.hasAttribute("formAction")){if(m=y,T=y[Qt]||null)M=T.formAction;else if(Um(m)!==null)continue}else M=T.action;typeof M=="function"?o[u+1]=M:(o.splice(u,3),u-=3),eb(o)}}}function tb(){function r(y){y.canIntercept&&y.info==="react-transition"&&y.intercept({handler:function(){return new Promise(function(T){return m=T})},focusReset:"manual",scroll:"manual"})}function i(){m!==null&&(m(),m=null),u||setTimeout(o,20)}function o(){if(!u&&!navigation.transition){var y=navigation.currentEntry;y&&y.url!=null&&navigation.navigate(y.url,{state:y.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,m=null;return navigation.addEventListener("navigate",r),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(o,100),function(){u=!0,navigation.removeEventListener("navigate",r),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),m!==null&&(m(),m=null)}}}function Im(r){this._internalRoot=r}Tu.prototype.render=Im.prototype.render=function(r){var i=this._internalRoot;if(i===null)throw Error(s(409));var o=i.current,u=Cn();Y_(o,u,r,i,null,null)},Tu.prototype.unmount=Im.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var i=r.containerInfo;Y_(r.current,2,null,r,null,null),ou(),i[xr]=null}};function Tu(r){this._internalRoot=r}Tu.prototype.unstable_scheduleHydration=function(r){if(r){var i=uc();r={blockedOn:null,target:r,priority:i};for(var o=0;o<Cs.length&&i!==0&&i<Cs[o].priority;o++);Cs.splice(o,0,r),o===0&&J_(r)}};var nb=e.version;if(nb!=="19.2.0")throw Error(s(527,nb,"19.2.0"));z.findDOMNode=function(r){var i=r._reactInternals;if(i===void 0)throw typeof r.render=="function"?Error(s(188)):(r=Object.keys(r).join(","),Error(s(268,r)));return r=h(i),r=r!==null?p(r):null,r=r===null?null:r.stateNode,r};var qN={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:U,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Nu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Nu.isDisabled&&Nu.supportsFiber)try{pt=Nu.inject(qN),Pt=Nu}catch{}}return Ko.createRoot=function(r,i){if(!a(r))throw Error(s(299));var o=!1,u="",m=cv,y=uv,T=dv;return i!=null&&(i.unstable_strictMode===!0&&(o=!0),i.identifierPrefix!==void 0&&(u=i.identifierPrefix),i.onUncaughtError!==void 0&&(m=i.onUncaughtError),i.onCaughtError!==void 0&&(y=i.onCaughtError),i.onRecoverableError!==void 0&&(T=i.onRecoverableError)),i=V_(r,1,!1,null,null,o,u,null,m,y,T,tb),r[xr]=i.current,vm(r),new Im(i)},Ko.hydrateRoot=function(r,i,o){if(!a(r))throw Error(s(299));var u=!1,m="",y=cv,T=uv,M=dv,Y=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(m=o.identifierPrefix),o.onUncaughtError!==void 0&&(y=o.onUncaughtError),o.onCaughtError!==void 0&&(T=o.onCaughtError),o.onRecoverableError!==void 0&&(M=o.onRecoverableError),o.formState!==void 0&&(Y=o.formState)),i=V_(r,1,!0,i,o??null,u,m,Y,y,T,M,tb),i.context=F_(null),o=i.current,u=Cn(),u=to(u),m=us(u),m.callback=null,ds(o,m,u),o=u,i.current.lanes=o,Ps(i,o),fr(i),r[xr]=i.current,vm(r),new Tu(i)},Ko.version="19.2.0",Ko}var fb;function ZN(){if(fb)return Bm.exports;fb=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Bm.exports=JN(),Bm.exports}var eO=ZN();var hb="popstate";function tO(t={}){function e(s,a){let{pathname:l,search:c,hash:d}=s.location;return Cp("",{pathname:l,search:c,hash:d},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function n(s,a){return typeof a=="string"?a:Ol(a)}return rO(e,n,null,t)}function yt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function vr(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function nO(){return Math.random().toString(36).substring(2,10)}function mb(t,e){return{usr:t.state,key:t.key,idx:e}}function Cp(t,e,n=null,s){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?Ga(e):e,state:n,key:e&&e.key||s||nO()}}function Ol({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Ga(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let s=t.indexOf("?");s>=0&&(e.search=t.substring(s),t=t.substring(0,s)),t&&(e.pathname=t)}return e}function rO(t,e,n,s={}){let{window:a=document.defaultView,v5Compat:l=!1}=s,c=a.history,d="POP",f=null,h=p();h==null&&(h=0,c.replaceState({...c.state,idx:h},""));function p(){return(c.state||{idx:null}).idx}function g(){d="POP";let S=p(),A=S==null?null:S-h;h=S,f&&f({action:d,location:w.location,delta:A})}function v(S,A){d="PUSH";let N=Cp(w.location,S,A);h=p()+1;let E=mb(N,h),C=w.createHref(N);try{c.pushState(E,"",C)}catch(O){if(O instanceof DOMException&&O.name==="DataCloneError")throw O;a.location.assign(C)}l&&f&&f({action:d,location:w.location,delta:1})}function _(S,A){d="REPLACE";let N=Cp(w.location,S,A);h=p();let E=mb(N,h),C=w.createHref(N);c.replaceState(E,"",C),l&&f&&f({action:d,location:w.location,delta:0})}function x(S){return sO(S)}let w={get action(){return d},get location(){return t(a,c)},listen(S){if(f)throw new Error("A history only accepts one active listener");return a.addEventListener(hb,g),f=S,()=>{a.removeEventListener(hb,g),f=null}},createHref(S){return e(a,S)},createURL:x,encodeLocation(S){let A=x(S);return{pathname:A.pathname,search:A.search,hash:A.hash}},push:v,replace:_,go(S){return c.go(S)}};return w}function sO(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),yt(n,"No window.location.(origin|href) available to create URL");let s=typeof t=="string"?t:Ol(t);return s=s.replace(/ $/,"%20"),!e&&s.startsWith("//")&&(s=n+s),new URL(s,n)}function Qx(t,e,n="/"){return iO(t,e,n,!1)}function iO(t,e,n,s){let a=typeof e=="string"?Ga(e):e,l=Kr(a.pathname||"/",n);if(l==null)return null;let c=Wx(t);aO(c);let d=null;for(let f=0;d==null&&f<c.length;++f){let h=yO(l);d=pO(c[f],h,s)}return d}function Wx(t,e=[],n=[],s="",a=!1){let l=(c,d,f=a,h)=>{let p={relativePath:h===void 0?c.path||"":h,caseSensitive:c.caseSensitive===!0,childrenIndex:d,route:c};if(p.relativePath.startsWith("/")){if(!p.relativePath.startsWith(s)&&f)return;yt(p.relativePath.startsWith(s),`Absolute route path "${p.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),p.relativePath=p.relativePath.slice(s.length)}let g=Xr([s,p.relativePath]),v=n.concat(p);c.children&&c.children.length>0&&(yt(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${g}".`),Wx(c.children,e,v,g,f)),!(c.path==null&&!c.index)&&e.push({path:g,score:hO(g,c.index),routesMeta:v})};return t.forEach((c,d)=>{if(c.path===""||!c.path?.includes("?"))l(c,d);else for(let f of Jx(c.path))l(c,d,!0,f)}),e}function Jx(t){let e=t.split("/");if(e.length===0)return[];let[n,...s]=e,a=n.endsWith("?"),l=n.replace(/\?$/,"");if(s.length===0)return a?[l,""]:[l];let c=Jx(s.join("/")),d=[];return d.push(...c.map(f=>f===""?l:[l,f].join("/"))),a&&d.push(...c),d.map(f=>t.startsWith("/")&&f===""?"/":f)}function aO(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:mO(e.routesMeta.map(s=>s.childrenIndex),n.routesMeta.map(s=>s.childrenIndex)))}var oO=/^:[\w-]+$/,lO=3,cO=2,uO=1,dO=10,fO=-2,pb=t=>t==="*";function hO(t,e){let n=t.split("/"),s=n.length;return n.some(pb)&&(s+=fO),e&&(s+=cO),n.filter(a=>!pb(a)).reduce((a,l)=>a+(oO.test(l)?lO:l===""?uO:dO),s)}function mO(t,e){return t.length===e.length&&t.slice(0,-1).every((s,a)=>s===e[a])?t[t.length-1]-e[e.length-1]:0}function pO(t,e,n=!1){let{routesMeta:s}=t,a={},l="/",c=[];for(let d=0;d<s.length;++d){let f=s[d],h=d===s.length-1,p=l==="/"?e:e.slice(l.length)||"/",g=wd({path:f.relativePath,caseSensitive:f.caseSensitive,end:h},p),v=f.route;if(!g&&h&&n&&!s[s.length-1].route.index&&(g=wd({path:f.relativePath,caseSensitive:f.caseSensitive,end:!1},p)),!g)return null;Object.assign(a,g.params),c.push({params:a,pathname:Xr([l,g.pathname]),pathnameBase:wO(Xr([l,g.pathnameBase])),route:v}),g.pathnameBase!=="/"&&(l=Xr([l,g.pathnameBase]))}return c}function wd(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,s]=gO(t.path,t.caseSensitive,t.end),a=e.match(n);if(!a)return null;let l=a[0],c=l.replace(/(.)\/+$/,"$1"),d=a.slice(1);return{params:s.reduce((h,{paramName:p,isOptional:g},v)=>{if(p==="*"){let x=d[v]||"";c=l.slice(0,l.length-x.length).replace(/(.)\/+$/,"$1")}const _=d[v];return g&&!_?h[p]=void 0:h[p]=(_||"").replace(/%2F/g,"/"),h},{}),pathname:l,pathnameBase:c,pattern:t}}function gO(t,e=!1,n=!0){vr(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let s=[],a="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,d,f)=>(s.push({paramName:d,isOptional:f!=null}),f?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(s.push({paramName:"*"}),a+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?a+="\\/*$":t!==""&&t!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),s]}function yO(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return vr(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Kr(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,s=t.charAt(n);return s&&s!=="/"?null:t.slice(n)||"/"}function vO(t,e="/"){let{pathname:n,search:s="",hash:a=""}=typeof t=="string"?Ga(t):t;return{pathname:n?n.startsWith("/")?n:_O(n,e):e,search:xO(s),hash:SO(a)}}function _O(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(a=>{a===".."?n.length>1&&n.pop():a!=="."&&n.push(a)}),n.length>1?n.join("/"):"/"}function Vm(t,e,n,s){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function bO(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Zx(t){let e=bO(t);return e.map((n,s)=>s===e.length-1?n.pathname:n.pathnameBase)}function eS(t,e,n,s=!1){let a;typeof t=="string"?a=Ga(t):(a={...t},yt(!a.pathname||!a.pathname.includes("?"),Vm("?","pathname","search",a)),yt(!a.pathname||!a.pathname.includes("#"),Vm("#","pathname","hash",a)),yt(!a.search||!a.search.includes("#"),Vm("#","search","hash",a)));let l=t===""||a.pathname==="",c=l?"/":a.pathname,d;if(c==null)d=n;else{let g=e.length-1;if(!s&&c.startsWith("..")){let v=c.split("/");for(;v[0]==="..";)v.shift(),g-=1;a.pathname=v.join("/")}d=g>=0?e[g]:"/"}let f=vO(a,d),h=c&&c!=="/"&&c.endsWith("/"),p=(l||c===".")&&n.endsWith("/");return!f.pathname.endsWith("/")&&(h||p)&&(f.pathname+="/"),f}var Xr=t=>t.join("/").replace(/\/\/+/g,"/"),wO=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),xO=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,SO=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function EO(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var tS=["POST","PUT","PATCH","DELETE"];new Set(tS);var CO=["GET",...tS];new Set(CO);var Xa=j.createContext(null);Xa.displayName="DataRouter";var Xd=j.createContext(null);Xd.displayName="DataRouterState";j.createContext(!1);var nS=j.createContext({isTransitioning:!1});nS.displayName="ViewTransition";var AO=j.createContext(new Map);AO.displayName="Fetchers";var TO=j.createContext(null);TO.displayName="Await";var _r=j.createContext(null);_r.displayName="Navigation";var Yl=j.createContext(null);Yl.displayName="Location";var Wr=j.createContext({outlet:null,matches:[],isDataRoute:!1});Wr.displayName="Route";var gg=j.createContext(null);gg.displayName="RouteError";function NO(t,{relative:e}={}){yt(Gl(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:s}=j.useContext(_r),{hash:a,pathname:l,search:c}=Xl(t,{relative:e}),d=l;return n!=="/"&&(d=l==="/"?n:Xr([n,l])),s.createHref({pathname:d,search:c,hash:a})}function Gl(){return j.useContext(Yl)!=null}function Ci(){return yt(Gl(),"useLocation() may be used only in the context of a <Router> component."),j.useContext(Yl).location}var rS="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function sS(t){j.useContext(_r).static||j.useLayoutEffect(t)}function Is(){let{isDataRoute:t}=j.useContext(Wr);return t?PO():OO()}function OO(){yt(Gl(),"useNavigate() may be used only in the context of a <Router> component.");let t=j.useContext(Xa),{basename:e,navigator:n}=j.useContext(_r),{matches:s}=j.useContext(Wr),{pathname:a}=Ci(),l=JSON.stringify(Zx(s)),c=j.useRef(!1);return sS(()=>{c.current=!0}),j.useCallback((f,h={})=>{if(vr(c.current,rS),!c.current)return;if(typeof f=="number"){n.go(f);return}let p=eS(f,JSON.parse(l),a,h.relative==="path");t==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:Xr([e,p.pathname])),(h.replace?n.replace:n.push)(p,h.state,h)},[e,n,l,a,t])}j.createContext(null);function Xl(t,{relative:e}={}){let{matches:n}=j.useContext(Wr),{pathname:s}=Ci(),a=JSON.stringify(Zx(n));return j.useMemo(()=>eS(t,JSON.parse(a),s,e==="path"),[t,a,s,e])}function RO(t,e){return iS(t,e)}function iS(t,e,n,s,a){yt(Gl(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:l}=j.useContext(_r),{matches:c}=j.useContext(Wr),d=c[c.length-1],f=d?d.params:{},h=d?d.pathname:"/",p=d?d.pathnameBase:"/",g=d&&d.route;{let N=g&&g.path||"";aS(h,!g||N.endsWith("*")||N.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${h}" (under <Route path="${N}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${N}"> to <Route path="${N==="/"?"*":`${N}/*`}">.`)}let v=Ci(),_;if(e){let N=typeof e=="string"?Ga(e):e;yt(p==="/"||N.pathname?.startsWith(p),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${p}" but pathname "${N.pathname}" was given in the \`location\` prop.`),_=N}else _=v;let x=_.pathname||"/",w=x;if(p!=="/"){let N=p.replace(/^\//,"").split("/");w="/"+x.replace(/^\//,"").split("/").slice(N.length).join("/")}let S=Qx(t,{pathname:w});vr(g||S!=null,`No routes matched location "${_.pathname}${_.search}${_.hash}" `),vr(S==null||S[S.length-1].route.element!==void 0||S[S.length-1].route.Component!==void 0||S[S.length-1].route.lazy!==void 0,`Matched leaf route at location "${_.pathname}${_.search}${_.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let A=UO(S&&S.map(N=>Object.assign({},N,{params:Object.assign({},f,N.params),pathname:Xr([p,l.encodeLocation?l.encodeLocation(N.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:N.pathname]),pathnameBase:N.pathnameBase==="/"?p:Xr([p,l.encodeLocation?l.encodeLocation(N.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:N.pathnameBase])})),c,n,s,a);return e&&A?j.createElement(Yl.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",..._},navigationType:"POP"}},A):A}function jO(){let t=BO(),e=EO(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:s},l={padding:"2px 4px",backgroundColor:s},c=null;return console.error("Error handled by React Router default ErrorBoundary:",t),c=j.createElement(j.Fragment,null,j.createElement("p",null," Hey developer "),j.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",j.createElement("code",{style:l},"ErrorBoundary")," or"," ",j.createElement("code",{style:l},"errorElement")," prop on your route.")),j.createElement(j.Fragment,null,j.createElement("h2",null,"Unexpected Application Error!"),j.createElement("h3",{style:{fontStyle:"italic"}},e),n?j.createElement("pre",{style:a},n):null,c)}var kO=j.createElement(jO,null),MO=class extends j.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.unstable_onError?this.props.unstable_onError(t,e):console.error("React Router caught the following error during render",t)}render(){return this.state.error!==void 0?j.createElement(Wr.Provider,{value:this.props.routeContext},j.createElement(gg.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function DO({routeContext:t,match:e,children:n}){let s=j.useContext(Xa);return s&&s.static&&s.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=e.route.id),j.createElement(Wr.Provider,{value:t},n)}function UO(t,e=[],n=null,s=null,a=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let l=t,c=n?.errors;if(c!=null){let h=l.findIndex(p=>p.route.id&&c?.[p.route.id]!==void 0);yt(h>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),l=l.slice(0,Math.min(l.length,h+1))}let d=!1,f=-1;if(n)for(let h=0;h<l.length;h++){let p=l[h];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(f=h),p.route.id){let{loaderData:g,errors:v}=n,_=p.route.loader&&!g.hasOwnProperty(p.route.id)&&(!v||v[p.route.id]===void 0);if(p.route.lazy||_){d=!0,f>=0?l=l.slice(0,f+1):l=[l[0]];break}}}return l.reduceRight((h,p,g)=>{let v,_=!1,x=null,w=null;n&&(v=c&&p.route.id?c[p.route.id]:void 0,x=p.route.errorElement||kO,d&&(f<0&&g===0?(aS("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),_=!0,w=null):f===g&&(_=!0,w=p.route.hydrateFallbackElement||null)));let S=e.concat(l.slice(0,g+1)),A=()=>{let N;return v?N=x:_?N=w:p.route.Component?N=j.createElement(p.route.Component,null):p.route.element?N=p.route.element:N=h,j.createElement(DO,{match:p,routeContext:{outlet:h,matches:S,isDataRoute:n!=null},children:N})};return n&&(p.route.ErrorBoundary||p.route.errorElement||g===0)?j.createElement(MO,{location:n.location,revalidation:n.revalidation,component:x,error:v,children:A(),routeContext:{outlet:null,matches:S,isDataRoute:!0},unstable_onError:s}):A()},null)}function yg(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function $O(t){let e=j.useContext(Xa);return yt(e,yg(t)),e}function IO(t){let e=j.useContext(Xd);return yt(e,yg(t)),e}function LO(t){let e=j.useContext(Wr);return yt(e,yg(t)),e}function vg(t){let e=LO(t),n=e.matches[e.matches.length-1];return yt(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function zO(){return vg("useRouteId")}function BO(){let t=j.useContext(gg),e=IO("useRouteError"),n=vg("useRouteError");return t!==void 0?t:e.errors?.[n]}function PO(){let{router:t}=$O("useNavigate"),e=vg("useNavigate"),n=j.useRef(!1);return sS(()=>{n.current=!0}),j.useCallback(async(a,l={})=>{vr(n.current,rS),n.current&&(typeof a=="number"?t.navigate(a):await t.navigate(a,{fromRouteId:e,...l}))},[t,e])}var gb={};function aS(t,e,n){!e&&!gb[t]&&(gb[t]=!0,vr(!1,n))}j.memo(qO);function qO({routes:t,future:e,state:n,unstable_onError:s}){return iS(t,void 0,n,s,e)}function Ms(t){yt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function HO({basename:t="/",children:e=null,location:n,navigationType:s="POP",navigator:a,static:l=!1}){yt(!Gl(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=t.replace(/^\/*/,"/"),d=j.useMemo(()=>({basename:c,navigator:a,static:l,future:{}}),[c,a,l]);typeof n=="string"&&(n=Ga(n));let{pathname:f="/",search:h="",hash:p="",state:g=null,key:v="default"}=n,_=j.useMemo(()=>{let x=Kr(f,c);return x==null?null:{location:{pathname:x,search:h,hash:p,state:g,key:v},navigationType:s}},[c,f,h,p,g,v,s]);return vr(_!=null,`<Router basename="${c}"> is not able to match the URL "${f}${h}${p}" because it does not start with the basename, so the <Router> won't render anything.`),_==null?null:j.createElement(_r.Provider,{value:d},j.createElement(Yl.Provider,{children:e,value:_}))}function VO({children:t,location:e}){return RO(Ap(t),e)}function Ap(t,e=[]){let n=[];return j.Children.forEach(t,(s,a)=>{if(!j.isValidElement(s))return;let l=[...e,a];if(s.type===j.Fragment){n.push.apply(n,Ap(s.props.children,l));return}yt(s.type===Ms,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),yt(!s.props.index||!s.props.children,"An index route cannot have child routes.");let c={id:s.props.id||l.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,middleware:s.props.middleware,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(c.children=Ap(s.props.children,l)),n.push(c)}),n}var sd="get",id="application/x-www-form-urlencoded";function Kd(t){return t!=null&&typeof t.tagName=="string"}function FO(t){return Kd(t)&&t.tagName.toLowerCase()==="button"}function YO(t){return Kd(t)&&t.tagName.toLowerCase()==="form"}function GO(t){return Kd(t)&&t.tagName.toLowerCase()==="input"}function XO(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function KO(t,e){return t.button===0&&(!e||e==="_self")&&!XO(t)}var Ou=null;function QO(){if(Ou===null)try{new FormData(document.createElement("form"),0),Ou=!1}catch{Ou=!0}return Ou}var WO=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Fm(t){return t!=null&&!WO.has(t)?(vr(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${id}"`),null):t}function JO(t,e){let n,s,a,l,c;if(YO(t)){let d=t.getAttribute("action");s=d?Kr(d,e):null,n=t.getAttribute("method")||sd,a=Fm(t.getAttribute("enctype"))||id,l=new FormData(t)}else if(FO(t)||GO(t)&&(t.type==="submit"||t.type==="image")){let d=t.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let f=t.getAttribute("formaction")||d.getAttribute("action");if(s=f?Kr(f,e):null,n=t.getAttribute("formmethod")||d.getAttribute("method")||sd,a=Fm(t.getAttribute("formenctype"))||Fm(d.getAttribute("enctype"))||id,l=new FormData(d,t),!QO()){let{name:h,type:p,value:g}=t;if(p==="image"){let v=h?`${h}.`:"";l.append(`${v}x`,"0"),l.append(`${v}y`,"0")}else h&&l.append(h,g)}}else{if(Kd(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=sd,s=null,a=id,c=t}return l&&a==="text/plain"&&(c=l,l=void 0),{action:s,method:n.toLowerCase(),encType:a,formData:l,body:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function _g(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function ZO(t,e,n){let s=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return s.pathname==="/"?s.pathname=`_root.${n}`:e&&Kr(s.pathname,e)==="/"?s.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:s.pathname=`${s.pathname.replace(/\/$/,"")}.${n}`,s}async function eR(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function tR(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function nR(t,e,n){let s=await Promise.all(t.map(async a=>{let l=e.routes[a.route.id];if(l){let c=await eR(l,n);return c.links?c.links():[]}return[]}));return aR(s.flat(1).filter(tR).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function yb(t,e,n,s,a,l){let c=(f,h)=>n[h]?f.route.id!==n[h].route.id:!0,d=(f,h)=>n[h].pathname!==f.pathname||n[h].route.path?.endsWith("*")&&n[h].params["*"]!==f.params["*"];return l==="assets"?e.filter((f,h)=>c(f,h)||d(f,h)):l==="data"?e.filter((f,h)=>{let p=s.routes[f.route.id];if(!p||!p.hasLoader)return!1;if(c(f,h)||d(f,h))return!0;if(f.route.shouldRevalidate){let g=f.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(t,window.origin),nextParams:f.params,defaultShouldRevalidate:!0});if(typeof g=="boolean")return g}return!0}):[]}function rR(t,e,{includeHydrateFallback:n}={}){return sR(t.map(s=>{let a=e.routes[s.route.id];if(!a)return[];let l=[a.module];return a.clientActionModule&&(l=l.concat(a.clientActionModule)),a.clientLoaderModule&&(l=l.concat(a.clientLoaderModule)),n&&a.hydrateFallbackModule&&(l=l.concat(a.hydrateFallbackModule)),a.imports&&(l=l.concat(a.imports)),l}).flat(1))}function sR(t){return[...new Set(t)]}function iR(t){let e={},n=Object.keys(t).sort();for(let s of n)e[s]=t[s];return e}function aR(t,e){let n=new Set;return new Set(e),t.reduce((s,a)=>{let l=JSON.stringify(iR(a));return n.has(l)||(n.add(l),s.push({key:l,link:a})),s},[])}function oS(){let t=j.useContext(Xa);return _g(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function oR(){let t=j.useContext(Xd);return _g(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var bg=j.createContext(void 0);bg.displayName="FrameworkContext";function lS(){let t=j.useContext(bg);return _g(t,"You must render this element inside a <HydratedRouter> element"),t}function lR(t,e){let n=j.useContext(bg),[s,a]=j.useState(!1),[l,c]=j.useState(!1),{onFocus:d,onBlur:f,onMouseEnter:h,onMouseLeave:p,onTouchStart:g}=e,v=j.useRef(null);j.useEffect(()=>{if(t==="render"&&c(!0),t==="viewport"){let w=A=>{A.forEach(N=>{c(N.isIntersecting)})},S=new IntersectionObserver(w,{threshold:.5});return v.current&&S.observe(v.current),()=>{S.disconnect()}}},[t]),j.useEffect(()=>{if(s){let w=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(w)}}},[s]);let _=()=>{a(!0)},x=()=>{a(!1),c(!1)};return n?t!=="intent"?[l,v,{}]:[l,v,{onFocus:Qo(d,_),onBlur:Qo(f,x),onMouseEnter:Qo(h,_),onMouseLeave:Qo(p,x),onTouchStart:Qo(g,_)}]:[!1,v,{}]}function Qo(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function cR({page:t,...e}){let{router:n}=oS(),s=j.useMemo(()=>Qx(n.routes,t,n.basename),[n.routes,t,n.basename]);return s?j.createElement(dR,{page:t,matches:s,...e}):null}function uR(t){let{manifest:e,routeModules:n}=lS(),[s,a]=j.useState([]);return j.useEffect(()=>{let l=!1;return nR(t,e,n).then(c=>{l||a(c)}),()=>{l=!0}},[t,e,n]),s}function dR({page:t,matches:e,...n}){let s=Ci(),{manifest:a,routeModules:l}=lS(),{basename:c}=oS(),{loaderData:d,matches:f}=oR(),h=j.useMemo(()=>yb(t,e,f,a,s,"data"),[t,e,f,a,s]),p=j.useMemo(()=>yb(t,e,f,a,s,"assets"),[t,e,f,a,s]),g=j.useMemo(()=>{if(t===s.pathname+s.search+s.hash)return[];let x=new Set,w=!1;if(e.forEach(A=>{let N=a.routes[A.route.id];!N||!N.hasLoader||(!h.some(E=>E.route.id===A.route.id)&&A.route.id in d&&l[A.route.id]?.shouldRevalidate||N.hasClientLoader?w=!0:x.add(A.route.id))}),x.size===0)return[];let S=ZO(t,c,"data");return w&&x.size>0&&S.searchParams.set("_routes",e.filter(A=>x.has(A.route.id)).map(A=>A.route.id).join(",")),[S.pathname+S.search]},[c,d,s,a,h,e,t,l]),v=j.useMemo(()=>rR(p,a),[p,a]),_=uR(p);return j.createElement(j.Fragment,null,g.map(x=>j.createElement("link",{key:x,rel:"prefetch",as:"fetch",href:x,...n})),v.map(x=>j.createElement("link",{key:x,rel:"modulepreload",href:x,...n})),_.map(({key:x,link:w})=>j.createElement("link",{key:x,nonce:n.nonce,...w})))}function fR(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var cS=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{cS&&(window.__reactRouterVersion="7.9.5")}catch{}function hR({basename:t,children:e,window:n}){let s=j.useRef();s.current==null&&(s.current=tO({window:n,v5Compat:!0}));let a=s.current,[l,c]=j.useState({action:a.action,location:a.location}),d=j.useCallback(f=>{j.startTransition(()=>c(f))},[c]);return j.useLayoutEffect(()=>a.listen(d),[a,d]),j.createElement(HO,{basename:t,children:e,location:l.location,navigationType:l.action,navigator:a})}var uS=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,vi=j.forwardRef(function({onClick:e,discover:n="render",prefetch:s="none",relative:a,reloadDocument:l,replace:c,state:d,target:f,to:h,preventScrollReset:p,viewTransition:g,...v},_){let{basename:x}=j.useContext(_r),w=typeof h=="string"&&uS.test(h),S,A=!1;if(typeof h=="string"&&w&&(S=h,cS))try{let L=new URL(window.location.href),X=h.startsWith("//")?new URL(L.protocol+h):new URL(h),F=Kr(X.pathname,x);X.origin===L.origin&&F!=null?h=F+X.search+X.hash:A=!0}catch{vr(!1,`<Link to="${h}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let N=NO(h,{relative:a}),[E,C,O]=lR(s,v),k=yR(h,{replace:c,state:d,target:f,preventScrollReset:p,relative:a,viewTransition:g});function R(L){e&&e(L),L.defaultPrevented||k(L)}let $=j.createElement("a",{...v,...O,href:S||N,onClick:A||l?e:R,ref:fR(_,C),target:f,"data-discover":!w&&n==="render"?"true":void 0});return E&&!w?j.createElement(j.Fragment,null,$,j.createElement(cR,{page:N})):$});vi.displayName="Link";var mR=j.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:s="",end:a=!1,style:l,to:c,viewTransition:d,children:f,...h},p){let g=Xl(c,{relative:h.relative}),v=Ci(),_=j.useContext(Xd),{navigator:x,basename:w}=j.useContext(_r),S=_!=null&&xR(g)&&d===!0,A=x.encodeLocation?x.encodeLocation(g).pathname:g.pathname,N=v.pathname,E=_&&_.navigation&&_.navigation.location?_.navigation.location.pathname:null;n||(N=N.toLowerCase(),E=E?E.toLowerCase():null,A=A.toLowerCase()),E&&w&&(E=Kr(E,w)||E);const C=A!=="/"&&A.endsWith("/")?A.length-1:A.length;let O=N===A||!a&&N.startsWith(A)&&N.charAt(C)==="/",k=E!=null&&(E===A||!a&&E.startsWith(A)&&E.charAt(A.length)==="/"),R={isActive:O,isPending:k,isTransitioning:S},$=O?e:void 0,L;typeof s=="function"?L=s(R):L=[s,O?"active":null,k?"pending":null,S?"transitioning":null].filter(Boolean).join(" ");let X=typeof l=="function"?l(R):l;return j.createElement(vi,{...h,"aria-current":$,className:L,ref:p,style:X,to:c,viewTransition:d},typeof f=="function"?f(R):f)});mR.displayName="NavLink";var pR=j.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:s,replace:a,state:l,method:c=sd,action:d,onSubmit:f,relative:h,preventScrollReset:p,viewTransition:g,...v},_)=>{let x=bR(),w=wR(d,{relative:h}),S=c.toLowerCase()==="get"?"get":"post",A=typeof d=="string"&&uS.test(d),N=E=>{if(f&&f(E),E.defaultPrevented)return;E.preventDefault();let C=E.nativeEvent.submitter,O=C?.getAttribute("formmethod")||c;x(C||E.currentTarget,{fetcherKey:e,method:O,navigate:n,replace:a,state:l,relative:h,preventScrollReset:p,viewTransition:g})};return j.createElement("form",{ref:_,method:S,action:w,onSubmit:s?f:N,...v,"data-discover":!A&&t==="render"?"true":void 0})});pR.displayName="Form";function gR(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function dS(t){let e=j.useContext(Xa);return yt(e,gR(t)),e}function yR(t,{target:e,replace:n,state:s,preventScrollReset:a,relative:l,viewTransition:c}={}){let d=Is(),f=Ci(),h=Xl(t,{relative:l});return j.useCallback(p=>{if(KO(p,e)){p.preventDefault();let g=n!==void 0?n:Ol(f)===Ol(h);d(t,{replace:g,state:s,preventScrollReset:a,relative:l,viewTransition:c})}},[f,d,h,n,s,e,t,a,l,c])}var vR=0,_R=()=>`__${String(++vR)}__`;function bR(){let{router:t}=dS("useSubmit"),{basename:e}=j.useContext(_r),n=zO();return j.useCallback(async(s,a={})=>{let{action:l,method:c,encType:d,formData:f,body:h}=JO(s,e);if(a.navigate===!1){let p=a.fetcherKey||_R();await t.fetch(p,n,a.action||l,{preventScrollReset:a.preventScrollReset,formData:f,body:h,formMethod:a.method||c,formEncType:a.encType||d,flushSync:a.flushSync})}else await t.navigate(a.action||l,{preventScrollReset:a.preventScrollReset,formData:f,body:h,formMethod:a.method||c,formEncType:a.encType||d,replace:a.replace,state:a.state,fromRouteId:n,flushSync:a.flushSync,viewTransition:a.viewTransition})},[t,e,n])}function wR(t,{relative:e}={}){let{basename:n}=j.useContext(_r),s=j.useContext(Wr);yt(s,"useFormAction must be used inside a RouteContext");let[a]=s.matches.slice(-1),l={...Xl(t||".",{relative:e})},c=Ci();if(t==null){l.search=c.search;let d=new URLSearchParams(l.search),f=d.getAll("index");if(f.some(p=>p==="")){d.delete("index"),f.filter(g=>g).forEach(g=>d.append("index",g));let p=d.toString();l.search=p?`?${p}`:""}}return(!t||t===".")&&a.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(l.pathname=l.pathname==="/"?n:Xr([n,l.pathname])),Ol(l)}function xR(t,{relative:e}={}){let n=j.useContext(nS);yt(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=dS("useViewTransitionState"),a=Xl(t,{relative:e});if(!n.isTransitioning)return!1;let l=Kr(n.currentLocation.pathname,s)||n.currentLocation.pathname,c=Kr(n.nextLocation.pathname,s)||n.nextLocation.pathname;return wd(a.pathname,c)!=null||wd(a.pathname,l)!=null}Kx();var Tp=function(t,e){return Tp=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,s){n.__proto__=s}||function(n,s){for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(n[a]=s[a])},Tp(t,e)};function fS(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Tp(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var xd=function(){return xd=Object.assign||function(e){for(var n,s=1,a=arguments.length;s<a;s++){n=arguments[s];for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&(e[l]=n[l])}return e},xd.apply(this,arguments)};function Ka(t,e){var n={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(n[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(t);a<s.length;a++)e.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(t,s[a])&&(n[s[a]]=t[s[a]]);return n}function hS(t,e,n,s){var a=arguments.length,l=a<3?e:s===null?s=Object.getOwnPropertyDescriptor(e,n):s,c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")l=Reflect.decorate(t,e,n,s);else for(var d=t.length-1;d>=0;d--)(c=t[d])&&(l=(a<3?c(l):a>3?c(e,n,l):c(e,n))||l);return a>3&&l&&Object.defineProperty(e,n,l),l}function mS(t,e){return function(n,s){e(n,s,t)}}function pS(t,e,n,s,a,l){function c(A){if(A!==void 0&&typeof A!="function")throw new TypeError("Function expected");return A}for(var d=s.kind,f=d==="getter"?"get":d==="setter"?"set":"value",h=!e&&t?s.static?t:t.prototype:null,p=e||(h?Object.getOwnPropertyDescriptor(h,s.name):{}),g,v=!1,_=n.length-1;_>=0;_--){var x={};for(var w in s)x[w]=w==="access"?{}:s[w];for(var w in s.access)x.access[w]=s.access[w];x.addInitializer=function(A){if(v)throw new TypeError("Cannot add initializers after decoration has completed");l.push(c(A||null))};var S=(0,n[_])(d==="accessor"?{get:p.get,set:p.set}:p[f],x);if(d==="accessor"){if(S===void 0)continue;if(S===null||typeof S!="object")throw new TypeError("Object expected");(g=c(S.get))&&(p.get=g),(g=c(S.set))&&(p.set=g),(g=c(S.init))&&a.unshift(g)}else(g=c(S))&&(d==="field"?a.unshift(g):p[f]=g)}h&&Object.defineProperty(h,s.name,p),v=!0}function gS(t,e,n){for(var s=arguments.length>2,a=0;a<e.length;a++)n=s?e[a].call(t,n):e[a].call(t);return s?n:void 0}function yS(t){return typeof t=="symbol"?t:"".concat(t)}function vS(t,e,n){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(t,"name",{configurable:!0,value:n?"".concat(n," ",e):e})}function _S(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function Te(t,e,n,s){function a(l){return l instanceof n?l:new n(function(c){c(l)})}return new(n||(n=Promise))(function(l,c){function d(p){try{h(s.next(p))}catch(g){c(g)}}function f(p){try{h(s.throw(p))}catch(g){c(g)}}function h(p){p.done?l(p.value):a(p.value).then(d,f)}h((s=s.apply(t,e||[])).next())})}function bS(t,e){var n={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},s,a,l,c=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return c.next=d(0),c.throw=d(1),c.return=d(2),typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function d(h){return function(p){return f([h,p])}}function f(h){if(s)throw new TypeError("Generator is already executing.");for(;c&&(c=0,h[0]&&(n=0)),n;)try{if(s=1,a&&(l=h[0]&2?a.return:h[0]?a.throw||((l=a.return)&&l.call(a),0):a.next)&&!(l=l.call(a,h[1])).done)return l;switch(a=0,l&&(h=[h[0]&2,l.value]),h[0]){case 0:case 1:l=h;break;case 4:return n.label++,{value:h[1],done:!1};case 5:n.label++,a=h[1],h=[0];continue;case 7:h=n.ops.pop(),n.trys.pop();continue;default:if(l=n.trys,!(l=l.length>0&&l[l.length-1])&&(h[0]===6||h[0]===2)){n=0;continue}if(h[0]===3&&(!l||h[1]>l[0]&&h[1]<l[3])){n.label=h[1];break}if(h[0]===6&&n.label<l[1]){n.label=l[1],l=h;break}if(l&&n.label<l[2]){n.label=l[2],n.ops.push(h);break}l[2]&&n.ops.pop(),n.trys.pop();continue}h=e.call(t,n)}catch(p){h=[6,p],a=0}finally{s=l=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}}var Qd=Object.create?(function(t,e,n,s){s===void 0&&(s=n);var a=Object.getOwnPropertyDescriptor(e,n);(!a||("get"in a?!e.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,s,a)}):(function(t,e,n,s){s===void 0&&(s=n),t[s]=e[n]});function wS(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&Qd(e,t,n)}function Sd(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],s=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&s>=t.length&&(t=void 0),{value:t&&t[s++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function wg(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var s=n.call(t),a,l=[],c;try{for(;(e===void 0||e-- >0)&&!(a=s.next()).done;)l.push(a.value)}catch(d){c={error:d}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(c)throw c.error}}return l}function xS(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(wg(arguments[e]));return t}function SS(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var s=Array(t),a=0,e=0;e<n;e++)for(var l=arguments[e],c=0,d=l.length;c<d;c++,a++)s[a]=l[c];return s}function ES(t,e,n){if(n||arguments.length===2)for(var s=0,a=e.length,l;s<a;s++)(l||!(s in e))&&(l||(l=Array.prototype.slice.call(e,0,s)),l[s]=e[s]);return t.concat(l||Array.prototype.slice.call(e))}function za(t){return this instanceof za?(this.v=t,this):new za(t)}function CS(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=n.apply(t,e||[]),a,l=[];return a=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),d("next"),d("throw"),d("return",c),a[Symbol.asyncIterator]=function(){return this},a;function c(_){return function(x){return Promise.resolve(x).then(_,g)}}function d(_,x){s[_]&&(a[_]=function(w){return new Promise(function(S,A){l.push([_,w,S,A])>1||f(_,w)})},x&&(a[_]=x(a[_])))}function f(_,x){try{h(s[_](x))}catch(w){v(l[0][3],w)}}function h(_){_.value instanceof za?Promise.resolve(_.value.v).then(p,g):v(l[0][2],_)}function p(_){f("next",_)}function g(_){f("throw",_)}function v(_,x){_(x),l.shift(),l.length&&f(l[0][0],l[0][1])}}function AS(t){var e,n;return e={},s("next"),s("throw",function(a){throw a}),s("return"),e[Symbol.iterator]=function(){return this},e;function s(a,l){e[a]=t[a]?function(c){return(n=!n)?{value:za(t[a](c)),done:!1}:l?l(c):c}:l}}function TS(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Sd=="function"?Sd(t):t[Symbol.iterator](),n={},s("next"),s("throw"),s("return"),n[Symbol.asyncIterator]=function(){return this},n);function s(l){n[l]=t[l]&&function(c){return new Promise(function(d,f){c=t[l](c),a(d,f,c.done,c.value)})}}function a(l,c,d,f){Promise.resolve(f).then(function(h){l({value:h,done:d})},c)}}function NS(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}var SR=Object.create?(function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}):function(t,e){t.default=e},Np=function(t){return Np=Object.getOwnPropertyNames||function(e){var n=[];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(n[n.length]=s);return n},Np(t)};function OS(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n=Np(t),s=0;s<n.length;s++)n[s]!=="default"&&Qd(e,t,n[s]);return SR(e,t),e}function RS(t){return t&&t.__esModule?t:{default:t}}function jS(t,e,n,s){if(n==="a"&&!s)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?s:n==="a"?s.call(t):s?s.value:e.get(t)}function kS(t,e,n,s,a){if(s==="m")throw new TypeError("Private method is not writable");if(s==="a"&&!a)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!a:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return s==="a"?a.call(t,n):a?a.value=n:e.set(t,n),n}function MS(t,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof t=="function"?e===t:t.has(e)}function DS(t,e,n){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var s,a;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");s=e[Symbol.asyncDispose]}if(s===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");s=e[Symbol.dispose],n&&(a=s)}if(typeof s!="function")throw new TypeError("Object not disposable.");a&&(s=function(){try{a.call(this)}catch(l){return Promise.reject(l)}}),t.stack.push({value:e,dispose:s,async:n})}else n&&t.stack.push({async:!0});return e}var ER=typeof SuppressedError=="function"?SuppressedError:function(t,e,n){var s=new Error(n);return s.name="SuppressedError",s.error=t,s.suppressed=e,s};function US(t){function e(l){t.error=t.hasError?new ER(l,t.error,"An error was suppressed during disposal."):l,t.hasError=!0}var n,s=0;function a(){for(;n=t.stack.pop();)try{if(!n.async&&s===1)return s=0,t.stack.push(n),Promise.resolve().then(a);if(n.dispose){var l=n.dispose.call(n.value);if(n.async)return s|=2,Promise.resolve(l).then(a,function(c){return e(c),a()})}else s|=1}catch(c){e(c)}if(s===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return a()}function $S(t,e){return typeof t=="string"&&/^\.\.?\//.test(t)?t.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(n,s,a,l,c){return s?e?".jsx":".js":a&&(!l||!c)?n:a+l+"."+c.toLowerCase()+"js"}):t}const CR={__extends:fS,__assign:xd,__rest:Ka,__decorate:hS,__param:mS,__esDecorate:pS,__runInitializers:gS,__propKey:yS,__setFunctionName:vS,__metadata:_S,__awaiter:Te,__generator:bS,__createBinding:Qd,__exportStar:wS,__values:Sd,__read:wg,__spread:xS,__spreadArrays:SS,__spreadArray:ES,__await:za,__asyncGenerator:CS,__asyncDelegator:AS,__asyncValues:TS,__makeTemplateObject:NS,__importStar:OS,__importDefault:RS,__classPrivateFieldGet:jS,__classPrivateFieldSet:kS,__classPrivateFieldIn:MS,__addDisposableResource:DS,__disposeResources:US,__rewriteRelativeImportExtension:$S},AR=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:DS,get __assign(){return xd},__asyncDelegator:AS,__asyncGenerator:CS,__asyncValues:TS,__await:za,__awaiter:Te,__classPrivateFieldGet:jS,__classPrivateFieldIn:MS,__classPrivateFieldSet:kS,__createBinding:Qd,__decorate:hS,__disposeResources:US,__esDecorate:pS,__exportStar:wS,__extends:fS,__generator:bS,__importDefault:RS,__importStar:OS,__makeTemplateObject:NS,__metadata:_S,__param:mS,__propKey:yS,__read:wg,__rest:Ka,__rewriteRelativeImportExtension:$S,__runInitializers:gS,__setFunctionName:vS,__spread:xS,__spreadArray:ES,__spreadArrays:SS,__values:Sd,default:CR},Symbol.toStringTag,{value:"Module"})),TR=t=>t?(...e)=>t(...e):(...e)=>fetch(...e);class xg extends Error{constructor(e,n="FunctionsError",s){super(e),this.name=n,this.context=s}}class vb extends xg{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class _b extends xg{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class bb extends xg{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Op;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Op||(Op={}));class NR{constructor(e,{headers:n={},customFetch:s,region:a=Op.Any}={}){this.url=e,this.headers=n,this.region=a,this.fetch=TR(s)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return Te(this,arguments,void 0,function*(n,s={}){var a;try{const{headers:l,method:c,body:d,signal:f}=s;let h={},{region:p}=s;p||(p=this.region);const g=new URL(`${this.url}/${n}`);p&&p!=="any"&&(h["x-region"]=p,g.searchParams.set("forceFunctionRegion",p));let v;d&&(l&&!Object.prototype.hasOwnProperty.call(l,"Content-Type")||!l)?typeof Blob<"u"&&d instanceof Blob||d instanceof ArrayBuffer?(h["Content-Type"]="application/octet-stream",v=d):typeof d=="string"?(h["Content-Type"]="text/plain",v=d):typeof FormData<"u"&&d instanceof FormData?v=d:(h["Content-Type"]="application/json",v=JSON.stringify(d)):v=d;const _=yield this.fetch(g.toString(),{method:c||"POST",headers:Object.assign(Object.assign(Object.assign({},h),this.headers),l),body:v,signal:f}).catch(A=>{throw A.name==="AbortError"?A:new vb(A)}),x=_.headers.get("x-relay-error");if(x&&x==="true")throw new _b(_);if(!_.ok)throw new bb(_);let w=((a=_.headers.get("Content-Type"))!==null&&a!==void 0?a:"text/plain").split(";")[0].trim(),S;return w==="application/json"?S=yield _.json():w==="application/octet-stream"||w==="application/pdf"?S=yield _.blob():w==="text/event-stream"?S=_:w==="multipart/form-data"?S=yield _.formData():S=yield _.text(),{data:S,error:null,response:_}}catch(l){return l instanceof Error&&l.name==="AbortError"?{data:null,error:new vb(l)}:{data:null,error:l,response:l instanceof bb||l instanceof _b?l.context:void 0}}})}}var Zt={};const Qa=Xx(AR);var Ru={},ju={},ku={},Mu={},Du={},Uu={},wb;function IS(){if(wb)return Uu;wb=1,Object.defineProperty(Uu,"__esModule",{value:!0});class t extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}}return Uu.default=t,Uu}var xb;function LS(){if(xb)return Du;xb=1,Object.defineProperty(Du,"__esModule",{value:!0});const e=Qa.__importDefault(IS());class n{constructor(a){var l,c;this.shouldThrowOnError=!1,this.method=a.method,this.url=a.url,this.headers=new Headers(a.headers),this.schema=a.schema,this.body=a.body,this.shouldThrowOnError=(l=a.shouldThrowOnError)!==null&&l!==void 0?l:!1,this.signal=a.signal,this.isMaybeSingle=(c=a.isMaybeSingle)!==null&&c!==void 0?c:!1,a.fetch?this.fetch=a.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(a,l){return this.headers=new Headers(this.headers),this.headers.set(a,l),this}then(a,l){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const c=this.fetch;let d=c(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async f=>{var h,p,g,v;let _=null,x=null,w=null,S=f.status,A=f.statusText;if(f.ok){if(this.method!=="HEAD"){const O=await f.text();O===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((h=this.headers.get("Accept"))===null||h===void 0)&&h.includes("application/vnd.pgrst.plan+text"))?x=O:x=JSON.parse(O))}const E=(p=this.headers.get("Prefer"))===null||p===void 0?void 0:p.match(/count=(exact|planned|estimated)/),C=(g=f.headers.get("content-range"))===null||g===void 0?void 0:g.split("/");E&&C&&C.length>1&&(w=parseInt(C[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(x)&&(x.length>1?(_={code:"PGRST116",details:`Results contain ${x.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},x=null,w=null,S=406,A="Not Acceptable"):x.length===1?x=x[0]:x=null)}else{const E=await f.text();try{_=JSON.parse(E),Array.isArray(_)&&f.status===404&&(x=[],_=null,S=200,A="OK")}catch{f.status===404&&E===""?(S=204,A="No Content"):_={message:E}}if(_&&this.isMaybeSingle&&(!((v=_?.details)===null||v===void 0)&&v.includes("0 rows"))&&(_=null,S=200,A="OK"),_&&this.shouldThrowOnError)throw new e.default(_)}return{error:_,data:x,count:w,status:S,statusText:A}});return this.shouldThrowOnError||(d=d.catch(f=>{var h,p,g;return{error:{message:`${(h=f?.name)!==null&&h!==void 0?h:"FetchError"}: ${f?.message}`,details:`${(p=f?.stack)!==null&&p!==void 0?p:""}`,hint:"",code:`${(g=f?.code)!==null&&g!==void 0?g:""}`},data:null,count:null,status:0,statusText:""}})),d.then(a,l)}returns(){return this}overrideTypes(){return this}}return Du.default=n,Du}var Sb;function zS(){if(Sb)return Mu;Sb=1,Object.defineProperty(Mu,"__esModule",{value:!0});const e=Qa.__importDefault(LS());class n extends e.default{select(a){let l=!1;const c=(a??"*").split("").map(d=>/\s/.test(d)&&!l?"":(d==='"'&&(l=!l),d)).join("");return this.url.searchParams.set("select",c),this.headers.append("Prefer","return=representation"),this}order(a,{ascending:l=!0,nullsFirst:c,foreignTable:d,referencedTable:f=d}={}){const h=f?`${f}.order`:"order",p=this.url.searchParams.get(h);return this.url.searchParams.set(h,`${p?`${p},`:""}${a}.${l?"asc":"desc"}${c===void 0?"":c?".nullsfirst":".nullslast"}`),this}limit(a,{foreignTable:l,referencedTable:c=l}={}){const d=typeof c>"u"?"limit":`${c}.limit`;return this.url.searchParams.set(d,`${a}`),this}range(a,l,{foreignTable:c,referencedTable:d=c}={}){const f=typeof d>"u"?"offset":`${d}.offset`,h=typeof d>"u"?"limit":`${d}.limit`;return this.url.searchParams.set(f,`${a}`),this.url.searchParams.set(h,`${l-a+1}`),this}abortSignal(a){return this.signal=a,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:a=!1,verbose:l=!1,settings:c=!1,buffers:d=!1,wal:f=!1,format:h="text"}={}){var p;const g=[a?"analyze":null,l?"verbose":null,c?"settings":null,d?"buffers":null,f?"wal":null].filter(Boolean).join("|"),v=(p=this.headers.get("Accept"))!==null&&p!==void 0?p:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${h}; for="${v}"; options=${g};`),h==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(a){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${a}`),this}}return Mu.default=n,Mu}var Eb;function Sg(){if(Eb)return ku;Eb=1,Object.defineProperty(ku,"__esModule",{value:!0});const e=Qa.__importDefault(zS()),n=new RegExp("[,()]");class s extends e.default{eq(l,c){return this.url.searchParams.append(l,`eq.${c}`),this}neq(l,c){return this.url.searchParams.append(l,`neq.${c}`),this}gt(l,c){return this.url.searchParams.append(l,`gt.${c}`),this}gte(l,c){return this.url.searchParams.append(l,`gte.${c}`),this}lt(l,c){return this.url.searchParams.append(l,`lt.${c}`),this}lte(l,c){return this.url.searchParams.append(l,`lte.${c}`),this}like(l,c){return this.url.searchParams.append(l,`like.${c}`),this}likeAllOf(l,c){return this.url.searchParams.append(l,`like(all).{${c.join(",")}}`),this}likeAnyOf(l,c){return this.url.searchParams.append(l,`like(any).{${c.join(",")}}`),this}ilike(l,c){return this.url.searchParams.append(l,`ilike.${c}`),this}ilikeAllOf(l,c){return this.url.searchParams.append(l,`ilike(all).{${c.join(",")}}`),this}ilikeAnyOf(l,c){return this.url.searchParams.append(l,`ilike(any).{${c.join(",")}}`),this}is(l,c){return this.url.searchParams.append(l,`is.${c}`),this}in(l,c){const d=Array.from(new Set(c)).map(f=>typeof f=="string"&&n.test(f)?`"${f}"`:`${f}`).join(",");return this.url.searchParams.append(l,`in.(${d})`),this}contains(l,c){return typeof c=="string"?this.url.searchParams.append(l,`cs.${c}`):Array.isArray(c)?this.url.searchParams.append(l,`cs.{${c.join(",")}}`):this.url.searchParams.append(l,`cs.${JSON.stringify(c)}`),this}containedBy(l,c){return typeof c=="string"?this.url.searchParams.append(l,`cd.${c}`):Array.isArray(c)?this.url.searchParams.append(l,`cd.{${c.join(",")}}`):this.url.searchParams.append(l,`cd.${JSON.stringify(c)}`),this}rangeGt(l,c){return this.url.searchParams.append(l,`sr.${c}`),this}rangeGte(l,c){return this.url.searchParams.append(l,`nxl.${c}`),this}rangeLt(l,c){return this.url.searchParams.append(l,`sl.${c}`),this}rangeLte(l,c){return this.url.searchParams.append(l,`nxr.${c}`),this}rangeAdjacent(l,c){return this.url.searchParams.append(l,`adj.${c}`),this}overlaps(l,c){return typeof c=="string"?this.url.searchParams.append(l,`ov.${c}`):this.url.searchParams.append(l,`ov.{${c.join(",")}}`),this}textSearch(l,c,{config:d,type:f}={}){let h="";f==="plain"?h="pl":f==="phrase"?h="ph":f==="websearch"&&(h="w");const p=d===void 0?"":`(${d})`;return this.url.searchParams.append(l,`${h}fts${p}.${c}`),this}match(l){return Object.entries(l).forEach(([c,d])=>{this.url.searchParams.append(c,`eq.${d}`)}),this}not(l,c,d){return this.url.searchParams.append(l,`not.${c}.${d}`),this}or(l,{foreignTable:c,referencedTable:d=c}={}){const f=d?`${d}.or`:"or";return this.url.searchParams.append(f,`(${l})`),this}filter(l,c,d){return this.url.searchParams.append(l,`${c}.${d}`),this}}return ku.default=s,ku}var Cb;function BS(){if(Cb)return ju;Cb=1,Object.defineProperty(ju,"__esModule",{value:!0});const e=Qa.__importDefault(Sg());class n{constructor(a,{headers:l={},schema:c,fetch:d}){this.url=a,this.headers=new Headers(l),this.schema=c,this.fetch=d}select(a,l){const{head:c=!1,count:d}=l??{},f=c?"HEAD":"GET";let h=!1;const p=(a??"*").split("").map(g=>/\s/.test(g)&&!h?"":(g==='"'&&(h=!h),g)).join("");return this.url.searchParams.set("select",p),d&&this.headers.append("Prefer",`count=${d}`),new e.default({method:f,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(a,{count:l,defaultToNull:c=!0}={}){var d;const f="POST";if(l&&this.headers.append("Prefer",`count=${l}`),c||this.headers.append("Prefer","missing=default"),Array.isArray(a)){const h=a.reduce((p,g)=>p.concat(Object.keys(g)),[]);if(h.length>0){const p=[...new Set(h)].map(g=>`"${g}"`);this.url.searchParams.set("columns",p.join(","))}}return new e.default({method:f,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}upsert(a,{onConflict:l,ignoreDuplicates:c=!1,count:d,defaultToNull:f=!0}={}){var h;const p="POST";if(this.headers.append("Prefer",`resolution=${c?"ignore":"merge"}-duplicates`),l!==void 0&&this.url.searchParams.set("on_conflict",l),d&&this.headers.append("Prefer",`count=${d}`),f||this.headers.append("Prefer","missing=default"),Array.isArray(a)){const g=a.reduce((v,_)=>v.concat(Object.keys(_)),[]);if(g.length>0){const v=[...new Set(g)].map(_=>`"${_}"`);this.url.searchParams.set("columns",v.join(","))}}return new e.default({method:p,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(h=this.fetch)!==null&&h!==void 0?h:fetch})}update(a,{count:l}={}){var c;const d="PATCH";return l&&this.headers.append("Prefer",`count=${l}`),new e.default({method:d,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch})}delete({count:a}={}){var l;const c="DELETE";return a&&this.headers.append("Prefer",`count=${a}`),new e.default({method:c,url:this.url,headers:this.headers,schema:this.schema,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}}return ju.default=n,ju}var Ab;function OR(){if(Ab)return Ru;Ab=1,Object.defineProperty(Ru,"__esModule",{value:!0});const t=Qa,e=t.__importDefault(BS()),n=t.__importDefault(Sg());class s{constructor(l,{headers:c={},schema:d,fetch:f}={}){this.url=l,this.headers=new Headers(c),this.schemaName=d,this.fetch=f}from(l){const c=new URL(`${this.url}/${l}`);return new e.default(c,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(l){return new s(this.url,{headers:this.headers,schema:l,fetch:this.fetch})}rpc(l,c={},{head:d=!1,get:f=!1,count:h}={}){var p;let g;const v=new URL(`${this.url}/rpc/${l}`);let _;d||f?(g=d?"HEAD":"GET",Object.entries(c).filter(([w,S])=>S!==void 0).map(([w,S])=>[w,Array.isArray(S)?`{${S.join(",")}}`:`${S}`]).forEach(([w,S])=>{v.searchParams.append(w,S)})):(g="POST",_=c);const x=new Headers(this.headers);return h&&x.set("Prefer",`count=${h}`),new n.default({method:g,url:v,headers:x,schema:this.schemaName,body:_,fetch:(p=this.fetch)!==null&&p!==void 0?p:fetch})}}return Ru.default=s,Ru}var Tb;function RR(){if(Tb)return Zt;Tb=1,Object.defineProperty(Zt,"__esModule",{value:!0}),Zt.PostgrestError=Zt.PostgrestBuilder=Zt.PostgrestTransformBuilder=Zt.PostgrestFilterBuilder=Zt.PostgrestQueryBuilder=Zt.PostgrestClient=void 0;const t=Qa,e=t.__importDefault(OR());Zt.PostgrestClient=e.default;const n=t.__importDefault(BS());Zt.PostgrestQueryBuilder=n.default;const s=t.__importDefault(Sg());Zt.PostgrestFilterBuilder=s.default;const a=t.__importDefault(zS());Zt.PostgrestTransformBuilder=a.default;const l=t.__importDefault(LS());Zt.PostgrestBuilder=l.default;const c=t.__importDefault(IS());return Zt.PostgrestError=c.default,Zt.default={PostgrestClient:e.default,PostgrestQueryBuilder:n.default,PostgrestFilterBuilder:s.default,PostgrestTransformBuilder:a.default,PostgrestBuilder:l.default,PostgrestError:c.default},Zt}var PS=RR();const qS=Gd(PS),jR=VN({__proto__:null,default:qS},[PS]),{PostgrestClient:kR,PostgrestQueryBuilder:v4,PostgrestFilterBuilder:_4,PostgrestTransformBuilder:b4,PostgrestBuilder:w4,PostgrestError:x4}=qS||jR;class MR{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const s=n.node,a=parseInt(s.replace(/^v/,"").split(".")[0]);return a>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${a} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${a} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let n=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(n+=`

Suggested solution: ${e.workaround}`),new Error(n)}static createWebSocket(e,n){const s=this.getWebSocketConstructor();return new s(e,n)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const DR="2.79.0",UR=`realtime-js/${DR}`,$R="1.0.0",Rp=1e4,IR=1e3,LR=100;var bl;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(bl||(bl={}));var Ut;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(Ut||(Ut={}));var er;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(er||(er={}));var jp;(function(t){t.websocket="websocket"})(jp||(jp={}));var di;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(di||(di={}));class zR{constructor(){this.HEADER_LENGTH=1}decode(e,n){return e.constructor===ArrayBuffer?n(this._binaryDecode(e)):n(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const n=new DataView(e),s=new TextDecoder;return this._decodeBroadcast(e,n,s)}_decodeBroadcast(e,n,s){const a=n.getUint8(1),l=n.getUint8(2);let c=this.HEADER_LENGTH+2;const d=s.decode(e.slice(c,c+a));c=c+a;const f=s.decode(e.slice(c,c+l));c=c+l;const h=JSON.parse(s.decode(e.slice(c,e.byteLength)));return{ref:null,topic:d,event:f,payload:h}}}let HS=class{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}};var at;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(at||(at={}));const Nb=(t,e,n={})=>{var s;const a=(s=n.skipTypes)!==null&&s!==void 0?s:[];return e?Object.keys(e).reduce((l,c)=>(l[c]=BR(c,t,e,a),l),{}):{}},BR=(t,e,n,s)=>{const a=e.find(d=>d.name===t),l=a?.type,c=n[t];return l&&!s.includes(l)?VS(l,c):kp(c)},VS=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return VR(e,n)}switch(t){case at.bool:return PR(e);case at.float4:case at.float8:case at.int2:case at.int4:case at.int8:case at.numeric:case at.oid:return qR(e);case at.json:case at.jsonb:return HR(e);case at.timestamp:return FR(e);case at.abstime:case at.date:case at.daterange:case at.int4range:case at.int8range:case at.money:case at.reltime:case at.text:case at.time:case at.timestamptz:case at.timetz:case at.tsrange:case at.tstzrange:return kp(e);default:return kp(e)}},kp=t=>t,PR=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},qR=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},HR=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},VR=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,s=t[n];if(t[0]==="{"&&s==="}"){let l;const c=t.slice(1,n);try{l=JSON.parse("["+c+"]")}catch{l=c?c.split(","):[]}return l.map(d=>VS(e,d))}return t},FR=t=>typeof t=="string"?t.replace(" ","T"):t,FS=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class Ym{constructor(e,n,s={},a=Rp){this.channel=e,this.event=n,this.payload=s,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var s;return this._hasReceived(e)&&n((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(s=>s.status===e).forEach(s=>s.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Ob;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(Ob||(Ob={}));class wl{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=n?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},a=>{const{onJoin:l,onLeave:c,onSync:d}=this.caller;this.joinRef=this.channel._joinRef(),this.state=wl.syncState(this.state,a,l,c),this.pendingDiffs.forEach(f=>{this.state=wl.syncDiff(this.state,f,l,c)}),this.pendingDiffs=[],d()}),this.channel._on(s.diff,{},a=>{const{onJoin:l,onLeave:c,onSync:d}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=wl.syncDiff(this.state,a,l,c),d())}),this.onJoin((a,l,c)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:l,newPresences:c})}),this.onLeave((a,l,c)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:l,leftPresences:c})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,s,a){const l=this.cloneDeep(e),c=this.transformState(n),d={},f={};return this.map(l,(h,p)=>{c[h]||(f[h]=p)}),this.map(c,(h,p)=>{const g=l[h];if(g){const v=p.map(S=>S.presence_ref),_=g.map(S=>S.presence_ref),x=p.filter(S=>_.indexOf(S.presence_ref)<0),w=g.filter(S=>v.indexOf(S.presence_ref)<0);x.length>0&&(d[h]=x),w.length>0&&(f[h]=w)}else d[h]=p}),this.syncDiff(l,{joins:d,leaves:f},s,a)}static syncDiff(e,n,s,a){const{joins:l,leaves:c}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return s||(s=()=>{}),a||(a=()=>{}),this.map(l,(d,f)=>{var h;const p=(h=e[d])!==null&&h!==void 0?h:[];if(e[d]=this.cloneDeep(f),p.length>0){const g=e[d].map(_=>_.presence_ref),v=p.filter(_=>g.indexOf(_.presence_ref)<0);e[d].unshift(...v)}s(d,p,f)}),this.map(c,(d,f)=>{let h=e[d];if(!h)return;const p=f.map(g=>g.presence_ref);h=h.filter(g=>p.indexOf(g.presence_ref)<0),e[d]=h,a(d,h,f),h.length===0&&delete e[d]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(s=>n(s,e[s]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,s)=>{const a=e[s];return"metas"in a?n[s]=a.metas.map(l=>(l.presence_ref=l.phx_ref,delete l.phx_ref,delete l.phx_ref_prev,l)):n[s]=a,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Rb;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(Rb||(Rb={}));var xl;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(xl||(xl={}));var Yr;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Yr||(Yr={}));class Eg{constructor(e,n={config:{}},s){var a,l;if(this.topic=e,this.params=n,this.socket=s,this.bindings={},this.state=Ut.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new Ym(this,er.join,this.params,this.timeout),this.rejoinTimer=new HS(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Ut.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(c=>c.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Ut.closed,this.socket._remove(this)}),this._onError(c=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,c),this.state=Ut.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Ut.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",c=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,c),this.state=Ut.errored,this.rejoinTimer.scheduleTimeout())}),this._on(er.reply,{},(c,d)=>{this._trigger(this._replyEventName(d),c)}),this.presence=new wl(this),this.broadcastEndpointURL=FS(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((l=(a=this.params.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,n=this.timeout){var s,a,l;if(this.socket.isConnected()||this.socket.connect(),this.state==Ut.closed){const{config:{broadcast:c,presence:d,private:f}}=this.params,h=(a=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(_=>_.filter))!==null&&a!==void 0?a:[],p=!!this.bindings[xl.PRESENCE]&&this.bindings[xl.PRESENCE].length>0||((l=this.params.config.presence)===null||l===void 0?void 0:l.enabled)===!0,g={},v={broadcast:c,presence:Object.assign(Object.assign({},d),{enabled:p}),postgres_changes:h,private:f};this.socket.accessTokenValue&&(g.access_token=this.socket.accessTokenValue),this._onError(_=>e?.(Yr.CHANNEL_ERROR,_)),this._onClose(()=>e?.(Yr.CLOSED)),this.updateJoinPayload(Object.assign({config:v},g)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:_})=>{var x;if(this.socket.setAuth(),_===void 0){e?.(Yr.SUBSCRIBED);return}else{const w=this.bindings.postgres_changes,S=(x=w?.length)!==null&&x!==void 0?x:0,A=[];for(let N=0;N<S;N++){const E=w[N],{filter:{event:C,schema:O,table:k,filter:R}}=E,$=_&&_[N];if($&&$.event===C&&$.schema===O&&$.table===k&&$.filter===R)A.push(Object.assign(Object.assign({},E),{id:$.id}));else{this.unsubscribe(),this.state=Ut.errored,e?.(Yr.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=A,e&&e(Yr.SUBSCRIBED);return}}).receive("error",_=>{this.state=Ut.errored,e?.(Yr.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(_).join(", ")||"error")))}).receive("timeout",()=>{e?.(Yr.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,s){return this.state===Ut.joined&&e===xl.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,n,s)}async httpSend(e,n,s={}){var a;const l=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(n==null)return Promise.reject("Payload is required for httpSend()");const c={method:"POST",headers:{Authorization:l,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:n,private:this.private}]})},d=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(a=s.timeout)!==null&&a!==void 0?a:this.timeout);if(d.status===202)return{success:!0};let f=d.statusText;try{const h=await d.json();f=h.error||h.message||f}catch{}return Promise.reject(new Error(f))}async send(e,n={}){var s,a;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:l,payload:c}=e,f={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:l,payload:c,private:this.private}]})};try{const h=await this._fetchWithTimeout(this.broadcastEndpointURL,f,(s=n.timeout)!==null&&s!==void 0?s:this.timeout);return await((a=h.body)===null||a===void 0?void 0:a.cancel()),h.ok?"ok":"error"}catch(h){return h.name==="AbortError"?"timed out":"error"}}else return new Promise(l=>{var c,d,f;const h=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((f=(d=(c=this.params)===null||c===void 0?void 0:c.config)===null||d===void 0?void 0:d.broadcast)===null||f===void 0)&&f.ack)&&l("ok"),h.receive("ok",()=>l("ok")),h.receive("error",()=>l("error")),h.receive("timeout",()=>l("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Ut.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(er.close,"leave",this._joinRef())};this.joinPush.destroy();let s=null;return new Promise(a=>{s=new Ym(this,er.leave,{},e),s.receive("ok",()=>{n(),a("ok")}).receive("timeout",()=>{n(),a("timed out")}).receive("error",()=>{a("error")}),s.send(),this._canPush()||s.trigger("ok",{})}).finally(()=>{s?.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Ut.closed,this.bindings={}}async _fetchWithTimeout(e,n,s){const a=new AbortController,l=setTimeout(()=>a.abort(),s),c=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:a.signal}));return clearTimeout(l),c}_push(e,n,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new Ym(this,e,n,s);return this._canPush()?a.send():this._addToPushBuffer(a),a}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>LR){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(e,n,s){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,s){var a,l;const c=e.toLocaleLowerCase(),{close:d,error:f,leave:h,join:p}=er;if(s&&[d,f,h,p].indexOf(c)>=0&&s!==this._joinRef())return;let v=this._onMessage(c,n,s);if(n&&!v)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(c)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(_=>{var x,w,S;return((x=_.filter)===null||x===void 0?void 0:x.event)==="*"||((S=(w=_.filter)===null||w===void 0?void 0:w.event)===null||S===void 0?void 0:S.toLocaleLowerCase())===c}).map(_=>_.callback(v,s)):(l=this.bindings[c])===null||l===void 0||l.filter(_=>{var x,w,S,A,N,E;if(["broadcast","presence","postgres_changes"].includes(c))if("id"in _){const C=_.id,O=(x=_.filter)===null||x===void 0?void 0:x.event;return C&&((w=n.ids)===null||w===void 0?void 0:w.includes(C))&&(O==="*"||O?.toLocaleLowerCase()===((S=n.data)===null||S===void 0?void 0:S.type.toLocaleLowerCase()))}else{const C=(N=(A=_?.filter)===null||A===void 0?void 0:A.event)===null||N===void 0?void 0:N.toLocaleLowerCase();return C==="*"||C===((E=n?.event)===null||E===void 0?void 0:E.toLocaleLowerCase())}else return _.type.toLocaleLowerCase()===c}).map(_=>{if(typeof v=="object"&&"ids"in v){const x=v.data,{schema:w,table:S,commit_timestamp:A,type:N,errors:E}=x;v=Object.assign(Object.assign({},{schema:w,table:S,commit_timestamp:A,eventType:N,new:{},old:{},errors:E}),this._getPayloadRecords(x))}_.callback(v,s)})}_isClosed(){return this.state===Ut.closed}_isJoined(){return this.state===Ut.joined}_isJoining(){return this.state===Ut.joining}_isLeaving(){return this.state===Ut.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,s){const a=e.toLocaleLowerCase(),l={type:a,filter:n,callback:s};return this.bindings[a]?this.bindings[a].push(l):this.bindings[a]=[l],this}_off(e,n){const s=e.toLocaleLowerCase();return this.bindings[s]&&(this.bindings[s]=this.bindings[s].filter(a=>{var l;return!(((l=a.type)===null||l===void 0?void 0:l.toLocaleLowerCase())===s&&Eg.isEqual(a.filter,n))})),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const s in e)if(e[s]!==n[s])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(er.close,{},e)}_onError(e){this._on(er.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Ut.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=Nb(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=Nb(e.columns,e.old_record)),n}}const Gm=()=>{},$u={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},YR=[1e3,2e3,5e3,1e4],GR=1e4,XR=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class KR{constructor(e,n){var s;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Rp,this.transport=null,this.heartbeatIntervalMs=$u.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Gm,this.ref=0,this.reconnectTimer=null,this.logger=Gm,this.conn=null,this.sendBuffer=[],this.serializer=new zR,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=a=>a?(...l)=>a(...l):(...l)=>fetch(...l),!(!((s=n?.params)===null||s===void 0)&&s.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${e}/${jp.websocket}`,this.httpEndpoint=FS(e),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=MR.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const n=e.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:$R}))}disconnect(e,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const s=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(s),this._setConnectionState("disconnected")},e?this.conn.close(e,n??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,s){this.logger(e,n,s)}connectionState(){switch(this.conn&&this.conn.readyState){case bl.connecting:return di.Connecting;case bl.open:return di.Open;case bl.closing:return di.Closing;default:return di.Closed}}isConnected(){return this.connectionState()===di.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,n={config:{}}){const s=`realtime:${e}`,a=this.getChannels().find(l=>l.topic===s);if(a)return a;{const l=new Eg(`realtime:${e}`,n,this);return this.channels.push(l),l}}push(e){const{topic:n,event:s,payload:a,ref:l}=e,c=()=>{this.encode(e,d=>{var f;(f=this.conn)===null||f===void 0||f.send(d)})};this.log("push",`${n} ${s} (${l})`,a),this.isConnected()?c():this.sendBuffer.push(c)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(IR,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},$u.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(s=>s.topic===e&&(s._isJoined()||s._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(h){this.log("error","error in heartbeat callback",h)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:s,event:a,payload:l,ref:c}=n,d=c?`(${c})`:"",f=l.status||"";this.log("receive",`${f} ${s} ${a} ${d}`.trim(),l),this.channels.filter(h=>h._isMember(s)).forEach(h=>h._trigger(a,l,c)),this._triggerStateCallbacks("message",n)})}_clearTimer(e){var n;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var n;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(er.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const s=e.match(/\?/)?"&":"?",a=new URLSearchParams(n);return`${e}${s}${a}`}_workerObjectUrl(e){let n;if(e)n=e;else{const s=new Blob([XR],{type:"application/javascript"});n=URL.createObjectURL(s)}return n}_setConnectionState(e,n=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(e=null){let n;e?n=e:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(s=>{const a={access_token:n,version:UR};n&&s.updateJoinPayload(a),s.joinedOnce&&s._isJoined()&&s._push(er.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${e}`,n)})}_triggerStateCallbacks(e,n){try{this.stateChangeCallbacks[e].forEach(s=>{try{s(n)}catch(a){this.log("error",`error in ${e} callback`,a)}})}catch(s){this.log("error",`error triggering ${e} callbacks`,s)}}_setupReconnectionTimer(){this.reconnectTimer=new HS(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},$u.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var n,s,a,l,c,d,f,h,p;if(this.transport=(n=e?.transport)!==null&&n!==void 0?n:null,this.timeout=(s=e?.timeout)!==null&&s!==void 0?s:Rp,this.heartbeatIntervalMs=(a=e?.heartbeatIntervalMs)!==null&&a!==void 0?a:$u.HEARTBEAT_INTERVAL,this.worker=(l=e?.worker)!==null&&l!==void 0?l:!1,this.accessToken=(c=e?.accessToken)!==null&&c!==void 0?c:null,this.heartbeatCallback=(d=e?.heartbeatCallback)!==null&&d!==void 0?d:Gm,e?.params&&(this.params=e.params),e?.logger&&(this.logger=e.logger),(e?.logLevel||e?.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(f=e?.reconnectAfterMs)!==null&&f!==void 0?f:(g=>YR[g-1]||GR),this.encode=(h=e?.encode)!==null&&h!==void 0?h:((g,v)=>v(JSON.stringify(g))),this.decode=(p=e?.decode)!==null&&p!==void 0?p:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e?.workerUrl}}}class Cg extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function gt(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class QR extends Cg{constructor(e,n,s){super(e),this.name="StorageApiError",this.status=n,this.statusCode=s}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Mp extends Cg{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}const Ag=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),WR=()=>Response,Dp=t=>{if(Array.isArray(t))return t.map(n=>Dp(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,s])=>{const a=n.replace(/([-_][a-z])/gi,l=>l.toUpperCase().replace(/[-_]/g,""));e[a]=Dp(s)}),e},JR=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},Xm=t=>{var e;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(e=t.error)===null||e===void 0?void 0:e.message)||JSON.stringify(t)},ZR=(t,e,n)=>Te(void 0,void 0,void 0,function*(){const s=yield WR();t instanceof s&&!n?.noResolveJson?t.json().then(a=>{const l=t.status||500,c=a?.statusCode||l+"";e(new QR(Xm(a),l,c))}).catch(a=>{e(new Mp(Xm(a),a))}):e(new Mp(Xm(t),t))}),ej=(t,e,n,s)=>{const a={method:t,headers:e?.headers||{}};return t==="GET"||!s?a:(JR(s)?(a.headers=Object.assign({"Content-Type":"application/json"},e?.headers),a.body=JSON.stringify(s)):a.body=s,e?.duplex&&(a.duplex=e.duplex),Object.assign(Object.assign({},a),n))};function Kl(t,e,n,s,a,l){return Te(this,void 0,void 0,function*(){return new Promise((c,d)=>{t(n,ej(e,s,a,l)).then(f=>{if(!f.ok)throw f;return s?.noResolveJson?f:f.json()}).then(f=>c(f)).catch(f=>ZR(f,d,s))})})}function Rl(t,e,n,s){return Te(this,void 0,void 0,function*(){return Kl(t,"GET",e,n,s)})}function Jn(t,e,n,s,a){return Te(this,void 0,void 0,function*(){return Kl(t,"POST",e,s,a,n)})}function Up(t,e,n,s,a){return Te(this,void 0,void 0,function*(){return Kl(t,"PUT",e,s,a,n)})}function tj(t,e,n,s){return Te(this,void 0,void 0,function*(){return Kl(t,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),s)})}function Tg(t,e,n,s,a){return Te(this,void 0,void 0,function*(){return Kl(t,"DELETE",e,s,a,n)})}class nj{constructor(e,n){this.downloadFn=e,this.shouldThrowOnError=n}then(e,n){return this.execute().then(e,n)}execute(){return Te(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(gt(e))return{data:null,error:e};throw e}})}}var YS;class rj{constructor(e,n){this.downloadFn=e,this.shouldThrowOnError=n,this[YS]="BlobDownloadBuilder",this.promise=null}asStream(){return new nj(this.downloadFn,this.shouldThrowOnError)}then(e,n){return this.getPromise().then(e,n)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return Te(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(gt(e))return{data:null,error:e};throw e}})}}YS=Symbol.toStringTag;const sj={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},jb={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class ij{constructor(e,n={},s,a){this.shouldThrowOnError=!1,this.url=e,this.headers=n,this.bucketId=s,this.fetch=Ag(a)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,n,s,a){return Te(this,void 0,void 0,function*(){try{let l;const c=Object.assign(Object.assign({},jb),a);let d=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(c.upsert)});const f=c.metadata;typeof Blob<"u"&&s instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),f&&l.append("metadata",this.encodeMetadata(f)),l.append("",s)):typeof FormData<"u"&&s instanceof FormData?(l=s,l.has("cacheControl")||l.append("cacheControl",c.cacheControl),f&&!l.has("metadata")&&l.append("metadata",this.encodeMetadata(f))):(l=s,d["cache-control"]=`max-age=${c.cacheControl}`,d["content-type"]=c.contentType,f&&(d["x-metadata"]=this.toBase64(this.encodeMetadata(f))),(typeof ReadableStream<"u"&&l instanceof ReadableStream||l&&typeof l=="object"&&"pipe"in l&&typeof l.pipe=="function")&&!c.duplex&&(c.duplex="half")),a?.headers&&(d=Object.assign(Object.assign({},d),a.headers));const h=this._removeEmptyFolders(n),p=this._getFinalPath(h),g=yield(e=="PUT"?Up:Jn)(this.fetch,`${this.url}/object/${p}`,l,Object.assign({headers:d},c?.duplex?{duplex:c.duplex}:{}));return{data:{path:h,id:g.Id,fullPath:g.Key},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(gt(l))return{data:null,error:l};throw l}})}upload(e,n,s){return Te(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,s)})}uploadToSignedUrl(e,n,s,a){return Te(this,void 0,void 0,function*(){const l=this._removeEmptyFolders(e),c=this._getFinalPath(l),d=new URL(this.url+`/object/upload/sign/${c}`);d.searchParams.set("token",n);try{let f;const h=Object.assign({upsert:jb.upsert},a),p=Object.assign(Object.assign({},this.headers),{"x-upsert":String(h.upsert)});typeof Blob<"u"&&s instanceof Blob?(f=new FormData,f.append("cacheControl",h.cacheControl),f.append("",s)):typeof FormData<"u"&&s instanceof FormData?(f=s,f.append("cacheControl",h.cacheControl)):(f=s,p["cache-control"]=`max-age=${h.cacheControl}`,p["content-type"]=h.contentType);const g=yield Up(this.fetch,d.toString(),f,{headers:p});return{data:{path:l,fullPath:g.Key},error:null}}catch(f){if(this.shouldThrowOnError)throw f;if(gt(f))return{data:null,error:f};throw f}})}createSignedUploadUrl(e,n){return Te(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e);const a=Object.assign({},this.headers);n?.upsert&&(a["x-upsert"]="true");const l=yield Jn(this.fetch,`${this.url}/object/upload/sign/${s}`,{},{headers:a}),c=new URL(this.url+l.url),d=c.searchParams.get("token");if(!d)throw new Cg("No token returned by API");return{data:{signedUrl:c.toString(),path:e,token:d},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(gt(s))return{data:null,error:s};throw s}})}update(e,n,s){return Te(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,s)})}move(e,n,s){return Te(this,void 0,void 0,function*(){try{return{data:yield Jn(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:s?.destinationBucket},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(gt(a))return{data:null,error:a};throw a}})}copy(e,n,s){return Te(this,void 0,void 0,function*(){try{return{data:{path:(yield Jn(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:s?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(gt(a))return{data:null,error:a};throw a}})}createSignedUrl(e,n,s){return Te(this,void 0,void 0,function*(){try{let a=this._getFinalPath(e),l=yield Jn(this.fetch,`${this.url}/object/sign/${a}`,Object.assign({expiresIn:n},s?.transform?{transform:s.transform}:{}),{headers:this.headers});const c=s?.download?`&download=${s.download===!0?"":s.download}`:"";return l={signedUrl:encodeURI(`${this.url}${l.signedURL}${c}`)},{data:l,error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(gt(a))return{data:null,error:a};throw a}})}createSignedUrls(e,n,s){return Te(this,void 0,void 0,function*(){try{const a=yield Jn(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),l=s?.download?`&download=${s.download===!0?"":s.download}`:"";return{data:a.map(c=>Object.assign(Object.assign({},c),{signedUrl:c.signedURL?encodeURI(`${this.url}${c.signedURL}${l}`):null})),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(gt(a))return{data:null,error:a};throw a}})}download(e,n){const a=typeof n?.transform<"u"?"render/image/authenticated":"object",l=this.transformOptsToQueryString(n?.transform||{}),c=l?`?${l}`:"",d=this._getFinalPath(e),f=()=>Rl(this.fetch,`${this.url}/${a}/${d}${c}`,{headers:this.headers,noResolveJson:!0});return new rj(f,this.shouldThrowOnError)}info(e){return Te(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const s=yield Rl(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:Dp(s),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(gt(s))return{data:null,error:s};throw s}})}exists(e){return Te(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield tj(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(gt(s)&&s instanceof Mp){const a=s.originalError;if([400,404].includes(a?.status))return{data:!1,error:s}}throw s}})}getPublicUrl(e,n){const s=this._getFinalPath(e),a=[],l=n?.download?`download=${n.download===!0?"":n.download}`:"";l!==""&&a.push(l);const d=typeof n?.transform<"u"?"render/image":"object",f=this.transformOptsToQueryString(n?.transform||{});f!==""&&a.push(f);let h=a.join("&");return h!==""&&(h=`?${h}`),{data:{publicUrl:encodeURI(`${this.url}/${d}/public/${s}${h}`)}}}remove(e){return Te(this,void 0,void 0,function*(){try{return{data:yield Tg(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(gt(n))return{data:null,error:n};throw n}})}list(e,n,s){return Te(this,void 0,void 0,function*(){try{const a=Object.assign(Object.assign(Object.assign({},sj),n),{prefix:e||""});return{data:yield Jn(this.fetch,`${this.url}/object/list/${this.bucketId}`,a,{headers:this.headers},s),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(gt(a))return{data:null,error:a};throw a}})}listV2(e,n){return Te(this,void 0,void 0,function*(){try{const s=Object.assign({},e);return{data:yield Jn(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,s,{headers:this.headers},n),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(gt(s))return{data:null,error:s};throw s}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const GS="2.79.0",XS={"X-Client-Info":`storage-js/${GS}`};class aj{constructor(e,n={},s,a){this.shouldThrowOnError=!1;const l=new URL(e);a?.useNewHostname&&/supabase\.(co|in|red)$/.test(l.hostname)&&!l.hostname.includes("storage.supabase.")&&(l.hostname=l.hostname.replace("supabase.","storage.supabase.")),this.url=l.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},XS),n),this.fetch=Ag(s)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(e){return Te(this,void 0,void 0,function*(){try{const n=this.listBucketOptionsToQueryString(e);return{data:yield Rl(this.fetch,`${this.url}/bucket${n}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(gt(n))return{data:null,error:n};throw n}})}getBucket(e){return Te(this,void 0,void 0,function*(){try{return{data:yield Rl(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(gt(n))return{data:null,error:n};throw n}})}createBucket(e){return Te(this,arguments,void 0,function*(n,s={public:!1}){try{return{data:yield Jn(this.fetch,`${this.url}/bucket`,{id:n,name:n,type:s.type,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(gt(a))return{data:null,error:a};throw a}})}updateBucket(e,n){return Te(this,void 0,void 0,function*(){try{return{data:yield Up(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(gt(s))return{data:null,error:s};throw s}})}emptyBucket(e){return Te(this,void 0,void 0,function*(){try{return{data:yield Jn(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(gt(n))return{data:null,error:n};throw n}})}deleteBucket(e){return Te(this,void 0,void 0,function*(){try{return{data:yield Tg(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(gt(n))return{data:null,error:n};throw n}})}listBucketOptionsToQueryString(e){const n={};return e&&("limit"in e&&(n.limit=String(e.limit)),"offset"in e&&(n.offset=String(e.offset)),e.search&&(n.search=e.search),e.sortColumn&&(n.sortColumn=e.sortColumn),e.sortOrder&&(n.sortOrder=e.sortOrder)),Object.keys(n).length>0?"?"+new URLSearchParams(n).toString():""}}class oj{constructor(e,n={},s){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},XS),n),this.fetch=Ag(s)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return Te(this,void 0,void 0,function*(){try{return{data:yield Jn(this.fetch,`${this.url}/bucket`,{name:e},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(gt(n))return{data:null,error:n};throw n}})}listBuckets(e){return Te(this,void 0,void 0,function*(){try{const n=new URLSearchParams;e?.limit!==void 0&&n.set("limit",e.limit.toString()),e?.offset!==void 0&&n.set("offset",e.offset.toString()),e?.sortColumn&&n.set("sortColumn",e.sortColumn),e?.sortOrder&&n.set("sortOrder",e.sortOrder),e?.search&&n.set("search",e.search);const s=n.toString(),a=s?`${this.url}/bucket?${s}`:`${this.url}/bucket`;return{data:yield Rl(this.fetch,a,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(gt(n))return{data:null,error:n};throw n}})}deleteBucket(e){return Te(this,void 0,void 0,function*(){try{return{data:yield Tg(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(gt(n))return{data:null,error:n};throw n}})}}const Ng={"X-Client-Info":`storage-js/${GS}`,"Content-Type":"application/json"};class KS extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function Rn(t){return typeof t=="object"&&t!==null&&"__isStorageVectorsError"in t}class Km extends KS{constructor(e,n,s){super(e),this.name="StorageVectorsApiError",this.status=n,this.statusCode=s}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class lj extends KS{constructor(e,n){super(e),this.name="StorageVectorsUnknownError",this.originalError=n}}var kb;(function(t){t.InternalError="InternalError",t.S3VectorConflictException="S3VectorConflictException",t.S3VectorNotFoundException="S3VectorNotFoundException",t.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",t.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",t.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(kb||(kb={}));const Og=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),cj=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},Mb=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),uj=(t,e,n)=>Te(void 0,void 0,void 0,function*(){if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!n?.noResolveJson){const a=t.status||500,l=t;if(typeof l.json=="function")l.json().then(c=>{const d=c?.statusCode||c?.code||a+"";e(new Km(Mb(c),a,d))}).catch(()=>{const c=a+"",d=l.statusText||`HTTP ${a} error`;e(new Km(d,a,c))});else{const c=a+"",d=l.statusText||`HTTP ${a} error`;e(new Km(d,a,c))}}else e(new lj(Mb(t),t))}),dj=(t,e,n,s)=>{const a={method:t,headers:e?.headers||{}};return s?(cj(s)?(a.headers=Object.assign({"Content-Type":"application/json"},e?.headers),a.body=JSON.stringify(s)):a.body=s,Object.assign(Object.assign({},a),n)):a};function fj(t,e,n,s,a,l){return Te(this,void 0,void 0,function*(){return new Promise((c,d)=>{t(n,dj(e,s,a,l)).then(f=>{if(!f.ok)throw f;if(s?.noResolveJson)return f;const h=f.headers.get("content-type");return!h||!h.includes("application/json")?{}:f.json()}).then(f=>c(f)).catch(f=>uj(f,d,s))})})}function jn(t,e,n,s,a){return Te(this,void 0,void 0,function*(){return fj(t,"POST",e,s,a,n)})}class hj{constructor(e,n={},s){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Ng),n),this.fetch=Og(s)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(e){return Te(this,void 0,void 0,function*(){try{return{data:(yield jn(this.fetch,`${this.url}/CreateIndex`,e,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Rn(n))return{data:null,error:n};throw n}})}getIndex(e,n){return Te(this,void 0,void 0,function*(){try{return{data:yield jn(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:e,indexName:n},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Rn(s))return{data:null,error:s};throw s}})}listIndexes(e){return Te(this,void 0,void 0,function*(){try{return{data:yield jn(this.fetch,`${this.url}/ListIndexes`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Rn(n))return{data:null,error:n};throw n}})}deleteIndex(e,n){return Te(this,void 0,void 0,function*(){try{return{data:(yield jn(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:e,indexName:n},{headers:this.headers}))||{},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Rn(s))return{data:null,error:s};throw s}})}}class mj{constructor(e,n={},s){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Ng),n),this.fetch=Og(s)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(e){return Te(this,void 0,void 0,function*(){try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield jn(this.fetch,`${this.url}/PutVectors`,e,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Rn(n))return{data:null,error:n};throw n}})}getVectors(e){return Te(this,void 0,void 0,function*(){try{return{data:yield jn(this.fetch,`${this.url}/GetVectors`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Rn(n))return{data:null,error:n};throw n}})}listVectors(e){return Te(this,void 0,void 0,function*(){try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:yield jn(this.fetch,`${this.url}/ListVectors`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Rn(n))return{data:null,error:n};throw n}})}queryVectors(e){return Te(this,void 0,void 0,function*(){try{return{data:yield jn(this.fetch,`${this.url}/QueryVectors`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Rn(n))return{data:null,error:n};throw n}})}deleteVectors(e){return Te(this,void 0,void 0,function*(){try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield jn(this.fetch,`${this.url}/DeleteVectors`,e,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Rn(n))return{data:null,error:n};throw n}})}}class pj{constructor(e,n={},s){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Ng),n),this.fetch=Og(s)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return Te(this,void 0,void 0,function*(){try{return{data:(yield jn(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Rn(n))return{data:null,error:n};throw n}})}getBucket(e){return Te(this,void 0,void 0,function*(){try{return{data:yield jn(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:e},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Rn(n))return{data:null,error:n};throw n}})}listBuckets(){return Te(this,arguments,void 0,function*(e={}){try{return{data:yield jn(this.fetch,`${this.url}/ListVectorBuckets`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Rn(n))return{data:null,error:n};throw n}})}deleteBucket(e){return Te(this,void 0,void 0,function*(){try{return{data:(yield jn(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Rn(n))return{data:null,error:n};throw n}})}}class gj extends pj{constructor(e,n={}){super(e,n.headers||{},n.fetch)}from(e){return new yj(this.url,this.headers,e,this.fetch)}}class yj extends hj{constructor(e,n,s,a){super(e,n,a),this.vectorBucketName=s}createIndex(e){const n=Object.create(null,{createIndex:{get:()=>super.createIndex}});return Te(this,void 0,void 0,function*(){return n.createIndex.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const e=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return Te(this,arguments,void 0,function*(n={}){return e.listIndexes.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName}))})}getIndex(e){const n=Object.create(null,{getIndex:{get:()=>super.getIndex}});return Te(this,void 0,void 0,function*(){return n.getIndex.call(this,this.vectorBucketName,e)})}deleteIndex(e){const n=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return Te(this,void 0,void 0,function*(){return n.deleteIndex.call(this,this.vectorBucketName,e)})}index(e){return new vj(this.url,this.headers,this.vectorBucketName,e,this.fetch)}}class vj extends mj{constructor(e,n,s,a,l){super(e,n,l),this.vectorBucketName=s,this.indexName=a}putVectors(e){const n=Object.create(null,{putVectors:{get:()=>super.putVectors}});return Te(this,void 0,void 0,function*(){return n.putVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(e){const n=Object.create(null,{getVectors:{get:()=>super.getVectors}});return Te(this,void 0,void 0,function*(){return n.getVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const e=Object.create(null,{listVectors:{get:()=>super.listVectors}});return Te(this,arguments,void 0,function*(n={}){return e.listVectors.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(e){const n=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return Te(this,void 0,void 0,function*(){return n.queryVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(e){const n=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return Te(this,void 0,void 0,function*(){return n.deleteVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class _j extends aj{constructor(e,n={},s,a){super(e,n,s,a)}from(e){return new ij(this.url,this.headers,e,this.fetch)}get vectors(){return new gj(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new oj(this.url+"/iceberg",this.headers,this.fetch)}}const bj="2.79.0";let ol="";typeof Deno<"u"?ol="deno":typeof document<"u"?ol="web":typeof navigator<"u"&&navigator.product==="ReactNative"?ol="react-native":ol="node";const wj={"X-Client-Info":`supabase-js-${ol}/${bj}`},xj={headers:wj},Sj={schema:"public"},Ej={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Cj={},Aj=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),Tj=()=>Headers,Nj=(t,e,n)=>{const s=Aj(n),a=Tj();return async(l,c)=>{var d;const f=(d=await e())!==null&&d!==void 0?d:t;let h=new a(c?.headers);return h.has("apikey")||h.set("apikey",t),h.has("Authorization")||h.set("Authorization",`Bearer ${f}`),s(l,Object.assign(Object.assign({},c),{headers:h}))}};function Oj(t){return t.endsWith("/")?t:t+"/"}function Rj(t,e){var n,s;const{db:a,auth:l,realtime:c,global:d}=t,{db:f,auth:h,realtime:p,global:g}=e,v={db:Object.assign(Object.assign({},f),a),auth:Object.assign(Object.assign({},h),l),realtime:Object.assign(Object.assign({},p),c),storage:{},global:Object.assign(Object.assign(Object.assign({},g),d),{headers:Object.assign(Object.assign({},(n=g?.headers)!==null&&n!==void 0?n:{}),(s=d?.headers)!==null&&s!==void 0?s:{})}),accessToken:async()=>""};return t.accessToken?v.accessToken=t.accessToken:delete v.accessToken,v}function jj(t){const e=t?.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(Oj(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const QS="2.79.0",Ta=30*1e3,$p=3,Qm=$p*Ta,kj="http://localhost:9999",Mj="supabase.auth.token",Dj={"X-Client-Info":`gotrue-js/${QS}`},Ip="X-Supabase-Api-Version",WS={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Uj=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,$j=600*1e3;class jl extends Error{constructor(e,n,s){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=s}}function Oe(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class Ij extends jl{constructor(e,n,s){super(e,n,s),this.name="AuthApiError",this.status=n,this.code=s}}function Lj(t){return Oe(t)&&t.name==="AuthApiError"}class fi extends jl{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class Ls extends jl{constructor(e,n,s,a){super(e,s,a),this.name=n,this.status=s}}class Qn extends Ls{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function zj(t){return Oe(t)&&t.name==="AuthSessionMissingError"}class ya extends Ls{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Iu extends Ls{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Lu extends Ls{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Bj(t){return Oe(t)&&t.name==="AuthImplicitGrantRedirectError"}class Db extends Ls{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Lp extends Ls{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function Wm(t){return Oe(t)&&t.name==="AuthRetryableFetchError"}class Ub extends Ls{constructor(e,n,s){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=s}}class zp extends Ls{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Ed="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),$b=` 	
\r=`.split(""),Pj=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<$b.length;e+=1)t[$b[e].charCodeAt(0)]=-2;for(let e=0;e<Ed.length;e+=1)t[Ed[e].charCodeAt(0)]=e;return t})();function Ib(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;n(Ed[s]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;n(Ed[s]),e.queuedBits-=6}}function JS(t,e,n){const s=Pj[t];if(s>-1)for(e.queue=e.queue<<6|s,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(s===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function Lb(t){const e=[],n=c=>{e.push(String.fromCodePoint(c))},s={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},l=c=>{Vj(c,s,n)};for(let c=0;c<t.length;c+=1)JS(t.charCodeAt(c),a,l);return e.join("")}function qj(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function Hj(t,e){for(let n=0;n<t.length;n+=1){let s=t.charCodeAt(n);if(s>55295&&s<=56319){const a=(s-55296)*1024&65535;s=(t.charCodeAt(n+1)-56320&65535|a)+65536,n+=1}qj(s,e)}}function Vj(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let s=1;s<6;s+=1)if((t>>7-s&1)===0){e.utf8seq=s;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function $a(t){const e=[],n={queue:0,queuedBits:0},s=a=>{e.push(a)};for(let a=0;a<t.length;a+=1)JS(t.charCodeAt(a),n,s);return new Uint8Array(e)}function Fj(t){const e=[];return Hj(t,n=>e.push(n)),new Uint8Array(e)}function mi(t){const e=[],n={queue:0,queuedBits:0},s=a=>{e.push(a)};return t.forEach(a=>Ib(a,n,s)),Ib(null,n,s),e.join("")}function Yj(t){return Math.round(Date.now()/1e3)+t}function Gj(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const en=()=>typeof window<"u"&&typeof document<"u",ii={tested:!1,writable:!1},ZS=()=>{if(!en())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(ii.tested)return ii.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),ii.tested=!0,ii.writable=!0}catch{ii.tested=!0,ii.writable=!1}return ii.writable};function Xj(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((a,l)=>{e[l]=a})}catch{}return n.searchParams.forEach((s,a)=>{e[a]=s}),e}const eE=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),Kj=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",Na=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},ai=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Ts=async(t,e)=>{await t.removeItem(e)};class Wd{constructor(){this.promise=new Wd.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}Wd.promiseConstructor=Promise;function Jm(t){const e=t.split(".");if(e.length!==3)throw new zp("Invalid JWT structure");for(let s=0;s<e.length;s++)if(!Uj.test(e[s]))throw new zp("JWT not in base64url format");return{header:JSON.parse(Lb(e[0])),payload:JSON.parse(Lb(e[1])),signature:$a(e[2]),raw:{header:e[0],payload:e[1]}}}async function Qj(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function Wj(t,e){return new Promise((s,a)=>{(async()=>{for(let l=0;l<1/0;l++)try{const c=await t(l);if(!e(l,null,c)){s(c);return}}catch(c){if(!e(l,c)){a(c);return}}})()})}function Jj(t){return("0"+t.toString(16)).substr(-2)}function Zj(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=n.length;let a="";for(let l=0;l<56;l++)a+=n.charAt(Math.floor(Math.random()*s));return a}return crypto.getRandomValues(e),Array.from(e,Jj).join("")}async function e2(t){const n=new TextEncoder().encode(t),s=await crypto.subtle.digest("SHA-256",n),a=new Uint8Array(s);return Array.from(a).map(l=>String.fromCharCode(l)).join("")}async function t2(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await e2(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function va(t,e,n=!1){const s=Zj();let a=s;n&&(a+="/PASSWORD_RECOVERY"),await Na(t,`${e}-code-verifier`,a);const l=await t2(s);return[l,s===l?"plain":"s256"]}const n2=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function r2(t){const e=t.headers.get(Ip);if(!e||!e.match(n2))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function s2(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function i2(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const a2=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function _a(t){if(!a2.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Zm(){const t={};return new Proxy(t,{get:(e,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const s=n.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function o2(t,e){return new Proxy(t,{get:(n,s,a)=>{if(s==="__isInsecureUserWarningProxy")return!0;if(typeof s=="symbol"){const l=s.toString();if(l==="Symbol(Symbol.toPrimitive)"||l==="Symbol(Symbol.toStringTag)"||l==="Symbol(util.inspect.custom)"||l==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,s,a)}return!e.value&&typeof s=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(n,s,a)}})}function zb(t){return JSON.parse(JSON.stringify(t))}const li=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),l2=[502,503,504];async function Bb(t){var e;if(!Kj(t))throw new Lp(li(t),0);if(l2.includes(t.status))throw new Lp(li(t),t.status);let n;try{n=await t.json()}catch(l){throw new fi(li(l),l)}let s;const a=r2(t);if(a&&a.getTime()>=WS["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?s=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(s=n.error_code),s){if(s==="weak_password")throw new Ub(li(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(s==="session_not_found")throw new Qn}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((l,c)=>l&&typeof c=="string",!0))throw new Ub(li(n),t.status,n.weak_password.reasons);throw new Ij(li(n),t.status||500,s)}const c2=(t,e,n,s)=>{const a={method:t,headers:e?.headers||{}};return t==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e?.headers),a.body=JSON.stringify(s),Object.assign(Object.assign({},a),n))};async function Ue(t,e,n,s){var a;const l=Object.assign({},s?.headers);l[Ip]||(l[Ip]=WS["2024-01-01"].name),s?.jwt&&(l.Authorization=`Bearer ${s.jwt}`);const c=(a=s?.query)!==null&&a!==void 0?a:{};s?.redirectTo&&(c.redirect_to=s.redirectTo);const d=Object.keys(c).length?"?"+new URLSearchParams(c).toString():"",f=await u2(t,e,n+d,{headers:l,noResolveJson:s?.noResolveJson},{},s?.body);return s?.xform?s?.xform(f):{data:Object.assign({},f),error:null}}async function u2(t,e,n,s,a,l){const c=c2(e,s,a,l);let d;try{d=await t(n,Object.assign({},c))}catch(f){throw console.error(f),new Lp(li(f),0)}if(d.ok||await Bb(d),s?.noResolveJson)return d;try{return await d.json()}catch(f){await Bb(f)}}function Wn(t){var e;let n=null;h2(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=Yj(t.expires_in)));const s=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:s},error:null}}function Pb(t){const e=Wn(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,s)=>n&&typeof s=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Ds(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function d2(t){return{data:t,error:null}}function f2(t){const{action_link:e,email_otp:n,hashed_token:s,redirect_to:a,verification_type:l}=t,c=Ka(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),d={action_link:e,email_otp:n,hashed_token:s,redirect_to:a,verification_type:l},f=Object.assign({},c);return{data:{properties:d,user:f},error:null}}function qb(t){return t}function h2(t){return t.access_token&&t.refresh_token&&t.expires_in}const ep=["global","local","others"];class m2{constructor({url:e="",headers:n={},fetch:s}){this.url=e,this.headers=n,this.fetch=eE(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,n=ep[0]){if(ep.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${ep.join(", ")}`);try{return await Ue(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(s){if(Oe(s))return{data:null,error:s};throw s}}async inviteUserByEmail(e,n={}){try{return await Ue(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Ds})}catch(s){if(Oe(s))return{data:{user:null},error:s};throw s}}async generateLink(e){try{const{options:n}=e,s=Ka(e,["options"]),a=Object.assign(Object.assign({},s),n);return"newEmail"in s&&(a.new_email=s?.newEmail,delete a.newEmail),await Ue(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:f2,redirectTo:n?.redirectTo})}catch(n){if(Oe(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await Ue(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Ds})}catch(n){if(Oe(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,s,a,l,c,d,f;try{const h={nextPage:null,lastPage:0,total:0},p=await Ue(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(n=e?.page)===null||n===void 0?void 0:n.toString())!==null&&s!==void 0?s:"",per_page:(l=(a=e?.perPage)===null||a===void 0?void 0:a.toString())!==null&&l!==void 0?l:""},xform:qb});if(p.error)throw p.error;const g=await p.json(),v=(c=p.headers.get("x-total-count"))!==null&&c!==void 0?c:0,_=(f=(d=p.headers.get("link"))===null||d===void 0?void 0:d.split(","))!==null&&f!==void 0?f:[];return _.length>0&&(_.forEach(x=>{const w=parseInt(x.split(";")[0].split("=")[1].substring(0,1)),S=JSON.parse(x.split(";")[1].split("=")[1]);h[`${S}Page`]=w}),h.total=parseInt(v)),{data:Object.assign(Object.assign({},g),h),error:null}}catch(h){if(Oe(h))return{data:{users:[]},error:h};throw h}}async getUserById(e){_a(e);try{return await Ue(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Ds})}catch(n){if(Oe(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){_a(e);try{return await Ue(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:Ds})}catch(s){if(Oe(s))return{data:{user:null},error:s};throw s}}async deleteUser(e,n=!1){_a(e);try{return await Ue(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:Ds})}catch(s){if(Oe(s))return{data:{user:null},error:s};throw s}}async _listFactors(e){_a(e.userId);try{const{data:n,error:s}=await Ue(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:n,error:s}}catch(n){if(Oe(n))return{data:null,error:n};throw n}}async _deleteFactor(e){_a(e.userId),_a(e.id);try{return{data:await Ue(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(Oe(n))return{data:null,error:n};throw n}}async _listOAuthClients(e){var n,s,a,l,c,d,f;try{const h={nextPage:null,lastPage:0,total:0},p=await Ue(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(n=e?.page)===null||n===void 0?void 0:n.toString())!==null&&s!==void 0?s:"",per_page:(l=(a=e?.perPage)===null||a===void 0?void 0:a.toString())!==null&&l!==void 0?l:""},xform:qb});if(p.error)throw p.error;const g=await p.json(),v=(c=p.headers.get("x-total-count"))!==null&&c!==void 0?c:0,_=(f=(d=p.headers.get("link"))===null||d===void 0?void 0:d.split(","))!==null&&f!==void 0?f:[];return _.length>0&&(_.forEach(x=>{const w=parseInt(x.split(";")[0].split("=")[1].substring(0,1)),S=JSON.parse(x.split(";")[1].split("=")[1]);h[`${S}Page`]=w}),h.total=parseInt(v)),{data:Object.assign(Object.assign({},g),h),error:null}}catch(h){if(Oe(h))return{data:{clients:[]},error:h};throw h}}async _createOAuthClient(e){try{return await Ue(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Oe(n))return{data:null,error:n};throw n}}async _getOAuthClient(e){try{return await Ue(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Oe(n))return{data:null,error:n};throw n}}async _updateOAuthClient(e,n){try{return await Ue(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:n,headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(Oe(s))return{data:null,error:s};throw s}}async _deleteOAuthClient(e){try{return await Ue(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(Oe(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(e){try{return await Ue(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Oe(n))return{data:null,error:n};throw n}}}function Hb(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}const ba={debug:!!(globalThis&&ZS()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class tE extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class p2 extends tE{}async function g2(t,e,n){ba.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const s=new globalThis.AbortController;return e>0&&setTimeout(()=>{s.abort(),ba.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async a=>{if(a){ba.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,a.name);try{return await n()}finally{ba.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,a.name)}}else{if(e===0)throw ba.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new p2(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(ba.debug)try{const l=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(l,null,"  "))}catch(l){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",l)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function y2(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function nE(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function v2(t){return parseInt(t,16)}function _2(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,s=>s.toString(16).padStart(2,"0")).join("")}function b2(t){var e;const{chainId:n,domain:s,expirationTime:a,issuedAt:l=new Date,nonce:c,notBefore:d,requestId:f,resources:h,scheme:p,uri:g,version:v}=t;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!s)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(c&&c.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${c}`);if(!g)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(v!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${v}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const _=nE(t.address),x=p?`${p}://${s}`:s,w=t.statement?`${t.statement}
`:"",S=`${x} wants you to sign in with your Ethereum account:
${_}

${w}`;let A=`URI: ${g}
Version: ${v}
Chain ID: ${n}${c?`
Nonce: ${c}`:""}
Issued At: ${l.toISOString()}`;if(a&&(A+=`
Expiration Time: ${a.toISOString()}`),d&&(A+=`
Not Before: ${d.toISOString()}`),f&&(A+=`
Request ID: ${f}`),h){let N=`
Resources:`;for(const E of h){if(!E||typeof E!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${E}`);N+=`
- ${E}`}A+=N}return`${S}
${A}`}class Nt extends Error{constructor({message:e,code:n,cause:s,name:a}){var l;super(e,{cause:s}),this.__isWebAuthnError=!0,this.name=(l=a??(s instanceof Error?s.name:void 0))!==null&&l!==void 0?l:"Unknown Error",this.code=n}}class Cd extends Nt{constructor(e,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:e}),this.name="WebAuthnUnknownError",this.originalError=n}}function w2({error:t,options:e}){var n,s,a;const{publicKey:l}=e;if(!l)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Nt({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((n=l.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new Nt({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((s=l.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new Nt({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((a=l.authenticatorSelection)===null||a===void 0?void 0:a.userVerification)==="required")return new Nt({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new Nt({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new Nt({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return l.pubKeyCredParams.filter(d=>d.type==="public-key").length===0?new Nt({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new Nt({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const c=window.location.hostname;if(rE(c)){if(l.rp.id!==c)return new Nt({message:`The RP ID "${l.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new Nt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(l.user.id.byteLength<1||l.user.id.byteLength>64)return new Nt({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new Nt({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new Nt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function x2({error:t,options:e}){const{publicKey:n}=e;if(!n)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Nt({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new Nt({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const s=window.location.hostname;if(rE(s)){if(n.rpId!==s)return new Nt({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new Nt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new Nt({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new Nt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class S2{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const E2=new S2;function C2(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:n,excludeCredentials:s}=t,a=Ka(t,["challenge","user","excludeCredentials"]),l=$a(e).buffer,c=Object.assign(Object.assign({},n),{id:$a(n.id).buffer}),d=Object.assign(Object.assign({},a),{challenge:l,user:c});if(s&&s.length>0){d.excludeCredentials=new Array(s.length);for(let f=0;f<s.length;f++){const h=s[f];d.excludeCredentials[f]=Object.assign(Object.assign({},h),{id:$a(h.id).buffer,type:h.type||"public-key",transports:h.transports})}}return d}function A2(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:n}=t,s=Ka(t,["challenge","allowCredentials"]),a=$a(e).buffer,l=Object.assign(Object.assign({},s),{challenge:a});if(n&&n.length>0){l.allowCredentials=new Array(n.length);for(let c=0;c<n.length;c++){const d=n[c];l.allowCredentials[c]=Object.assign(Object.assign({},d),{id:$a(d.id).buffer,type:d.type||"public-key",transports:d.transports})}}return l}function T2(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t;return{id:t.id,rawId:t.id,response:{attestationObject:mi(new Uint8Array(t.response.attestationObject)),clientDataJSON:mi(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function N2(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t,s=t.getClientExtensionResults(),a=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:mi(new Uint8Array(a.authenticatorData)),clientDataJSON:mi(new Uint8Array(a.clientDataJSON)),signature:mi(new Uint8Array(a.signature)),userHandle:a.userHandle?mi(new Uint8Array(a.userHandle)):void 0},type:"public-key",clientExtensionResults:s,authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function rE(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function Vb(){var t,e;return!!(en()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator?.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator?.credentials)===null||e===void 0?void 0:e.get)=="function")}async function O2(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Cd("Browser returned unexpected credential type",e)}:{data:null,error:new Cd("Empty credential response",e)}}catch(e){return{data:null,error:w2({error:e,options:t})}}}async function R2(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Cd("Browser returned unexpected credential type",e)}:{data:null,error:new Cd("Empty credential response",e)}}catch(e){return{data:null,error:x2({error:e,options:t})}}}const j2={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},k2={userVerification:"preferred",hints:["security-key"]};function Ad(...t){const e=a=>a!==null&&typeof a=="object"&&!Array.isArray(a),n=a=>a instanceof ArrayBuffer||ArrayBuffer.isView(a),s={};for(const a of t)if(a)for(const l in a){const c=a[l];if(c!==void 0)if(Array.isArray(c))s[l]=c;else if(n(c))s[l]=c;else if(e(c)){const d=s[l];e(d)?s[l]=Ad(d,c):s[l]=Ad(c)}else s[l]=c}return s}function M2(t,e){return Ad(j2,t,e||{})}function D2(t,e){return Ad(k2,t,e||{})}class U2{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:n,friendlyName:s,signal:a},l){try{const{data:c,error:d}=await this.client.mfa.challenge({factorId:e,webauthn:n});if(!c)return{data:null,error:d};const f=a??E2.createNewAbortSignal();if(c.webauthn.type==="create"){const{user:h}=c.webauthn.credential_options.publicKey;h.name||(h.name=`${h.id}:${s}`),h.displayName||(h.displayName=h.name)}switch(c.webauthn.type){case"create":{const h=M2(c.webauthn.credential_options.publicKey,l?.create),{data:p,error:g}=await O2({publicKey:h,signal:f});return p?{data:{factorId:e,challengeId:c.id,webauthn:{type:c.webauthn.type,credential_response:p}},error:null}:{data:null,error:g}}case"request":{const h=D2(c.webauthn.credential_options.publicKey,l?.request),{data:p,error:g}=await R2(Object.assign(Object.assign({},c.webauthn.credential_options),{publicKey:h,signal:f}));return p?{data:{factorId:e,challengeId:c.id,webauthn:{type:c.webauthn.type,credential_response:p}},error:null}:{data:null,error:g}}}}catch(c){return Oe(c)?{data:null,error:c}:{data:null,error:new fi("Unexpected error in challenge",c)}}}async _verify({challengeId:e,factorId:n,webauthn:s}){return this.client.mfa.verify({factorId:n,challengeId:e,webauthn:s})}async _authenticate({factorId:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:s=typeof window<"u"?[window.location.origin]:void 0,signal:a}},l){if(!n)return{data:null,error:new jl("rpId is required for WebAuthn authentication")};try{if(!Vb())return{data:null,error:new fi("Browser does not support WebAuthn",null)};const{data:c,error:d}=await this.challenge({factorId:e,webauthn:{rpId:n,rpOrigins:s},signal:a},{request:l});if(!c)return{data:null,error:d};const{webauthn:f}=c;return this._verify({factorId:e,challengeId:c.challengeId,webauthn:{type:f.type,rpId:n,rpOrigins:s,credential_response:f.credential_response}})}catch(c){return Oe(c)?{data:null,error:c}:{data:null,error:new fi("Unexpected error in authenticate",c)}}}async _register({friendlyName:e,rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:s=typeof window<"u"?[window.location.origin]:void 0,signal:a},l){if(!n)return{data:null,error:new jl("rpId is required for WebAuthn registration")};try{if(!Vb())return{data:null,error:new fi("Browser does not support WebAuthn",null)};const{data:c,error:d}=await this._enroll({friendlyName:e});if(!c)return await this.client.mfa.listFactors().then(p=>{var g;return(g=p.data)===null||g===void 0?void 0:g.all.find(v=>v.factor_type==="webauthn"&&v.friendly_name===e&&v.status!=="unverified")}).then(p=>p?this.client.mfa.unenroll({factorId:p?.id}):void 0),{data:null,error:d};const{data:f,error:h}=await this._challenge({factorId:c.id,friendlyName:c.friendly_name,webauthn:{rpId:n,rpOrigins:s},signal:a},{create:l});return f?this._verify({factorId:c.id,challengeId:f.challengeId,webauthn:{rpId:n,rpOrigins:s,type:f.webauthn.type,credential_response:f.webauthn.credential_response}}):{data:null,error:h}}catch(c){return Oe(c)?{data:null,error:c}:{data:null,error:new fi("Unexpected error in register",c)}}}}y2();const $2={url:kj,storageKey:Mj,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Dj,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function Fb(t,e,n){return await n()}const wa={};class kl{get jwks(){var e,n;return(n=(e=wa[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(e){wa[this.storageKey]=Object.assign(Object.assign({},wa[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,n;return(n=(e=wa[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){wa[this.storageKey]=Object.assign(Object.assign({},wa[this.storageKey]),{cachedAt:e})}constructor(e){var n,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=kl.nextInstanceID,kl.nextInstanceID+=1,this.instanceID>0&&en()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const a=Object.assign(Object.assign({},$2),e);if(this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.persistSession=a.persistSession,this.storageKey=a.storageKey,this.autoRefreshToken=a.autoRefreshToken,this.admin=new m2({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=eE(a.fetch),this.lock=a.lock||Fb,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,this.throwOnError=a.throwOnError,a.lock?this.lock=a.lock:en()&&(!((n=globalThis?.navigator)===null||n===void 0)&&n.locks)?this.lock=g2:this.lock=Fb,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new U2(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this)},this.persistSession?(a.storage?this.storage=a.storage:ZS()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Hb(this.memoryStorage)),a.userStorage&&(this.userStorage=a.userStorage)):(this.memoryStorage={},this.storage=Hb(this.memoryStorage)),en()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(l){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",l)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async l=>{this._debug("received broadcast notification from other tab or client",l),await this._notifyAllSubscribers(l.data.event,l.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${QS}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let n={},s="none";if(en()&&(n=Xj(window.location.href),this._isImplicitGrantCallback(n)?s="implicit":await this._isPKCECallback(n)&&(s="pkce")),en()&&this.detectSessionInUrl&&s!=="none"){const{data:a,error:l}=await this._getSessionFromURL(n,s);if(l){if(this._debug("#_initialize()","error detecting session from URL",l),Bj(l)){const f=(e=l.details)===null||e===void 0?void 0:e.code;if(f==="identity_already_exists"||f==="identity_not_found"||f==="single_identity_not_deletable")return{error:l}}return await this._removeSession(),{error:l}}const{session:c,redirectType:d}=a;return this._debug("#_initialize()","detected session in URL",c,"redirect type",d),await this._saveSession(c),setTimeout(async()=>{d==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",c):await this._notifyAllSubscribers("SIGNED_IN",c)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return Oe(n)?this._returnResult({error:n}):this._returnResult({error:new fi("Unexpected error during initialization",n)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,s,a;try{const l=await Ue(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(n=e?.options)===null||n===void 0?void 0:n.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(a=e?.options)===null||a===void 0?void 0:a.captchaToken}},xform:Wn}),{data:c,error:d}=l;if(d||!c)return this._returnResult({data:{user:null,session:null},error:d});const f=c.session,h=c.user;return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",f)),this._returnResult({data:{user:h,session:f},error:null})}catch(l){if(Oe(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async signUp(e){var n,s,a;try{let l;if("email"in e){const{email:p,password:g,options:v}=e;let _=null,x=null;this.flowType==="pkce"&&([_,x]=await va(this.storage,this.storageKey)),l=await Ue(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:v?.emailRedirectTo,body:{email:p,password:g,data:(n=v?.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:v?.captchaToken},code_challenge:_,code_challenge_method:x},xform:Wn})}else if("phone"in e){const{phone:p,password:g,options:v}=e;l=await Ue(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:p,password:g,data:(s=v?.data)!==null&&s!==void 0?s:{},channel:(a=v?.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:v?.captchaToken}},xform:Wn})}else throw new Iu("You must provide either an email or phone number and a password");const{data:c,error:d}=l;if(d||!c)return this._returnResult({data:{user:null,session:null},error:d});const f=c.session,h=c.user;return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",f)),this._returnResult({data:{user:h,session:f},error:null})}catch(l){if(Oe(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async signInWithPassword(e){try{let n;if("email"in e){const{email:l,password:c,options:d}=e;n=await Ue(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:l,password:c,gotrue_meta_security:{captcha_token:d?.captchaToken}},xform:Pb})}else if("phone"in e){const{phone:l,password:c,options:d}=e;n=await Ue(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:l,password:c,gotrue_meta_security:{captcha_token:d?.captchaToken}},xform:Pb})}else throw new Iu("You must provide either an email or phone number and a password");const{data:s,error:a}=n;if(a)return this._returnResult({data:{user:null,session:null},error:a});if(!s||!s.session||!s.user){const l=new ya;return this._returnResult({data:{user:null,session:null},error:l})}return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),this._returnResult({data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:a})}catch(n){if(Oe(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOAuth(e){var n,s,a,l;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(s=e.options)===null||s===void 0?void 0:s.scopes,queryParams:(a=e.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(l=e.options)===null||l===void 0?void 0:l.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;switch(n){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(e){var n,s,a,l,c,d,f,h,p,g,v;let _,x;if("message"in e)_=e.message,x=e.signature;else{const{chain:w,wallet:S,statement:A,options:N}=e;let E;if(en())if(typeof S=="object")E=S;else{const L=window;if("ethereum"in L&&typeof L.ethereum=="object"&&"request"in L.ethereum&&typeof L.ethereum.request=="function")E=L.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof S!="object"||!N?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");E=S}const C=new URL((n=N?.url)!==null&&n!==void 0?n:window.location.href),O=await E.request({method:"eth_requestAccounts"}).then(L=>L).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!O||O.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const k=nE(O[0]);let R=(s=N?.signInWithEthereum)===null||s===void 0?void 0:s.chainId;if(!R){const L=await E.request({method:"eth_chainId"});R=v2(L)}const $={domain:C.host,address:k,statement:A,uri:C.href,version:"1",chainId:R,nonce:(a=N?.signInWithEthereum)===null||a===void 0?void 0:a.nonce,issuedAt:(c=(l=N?.signInWithEthereum)===null||l===void 0?void 0:l.issuedAt)!==null&&c!==void 0?c:new Date,expirationTime:(d=N?.signInWithEthereum)===null||d===void 0?void 0:d.expirationTime,notBefore:(f=N?.signInWithEthereum)===null||f===void 0?void 0:f.notBefore,requestId:(h=N?.signInWithEthereum)===null||h===void 0?void 0:h.requestId,resources:(p=N?.signInWithEthereum)===null||p===void 0?void 0:p.resources};_=b2($),x=await E.request({method:"personal_sign",params:[_2(_),k]})}try{const{data:w,error:S}=await Ue(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:_,signature:x},!((g=e.options)===null||g===void 0)&&g.captchaToken?{gotrue_meta_security:{captcha_token:(v=e.options)===null||v===void 0?void 0:v.captchaToken}}:null),xform:Wn});if(S)throw S;if(!w||!w.session||!w.user){const A=new ya;return this._returnResult({data:{user:null,session:null},error:A})}return w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("SIGNED_IN",w.session)),this._returnResult({data:Object.assign({},w),error:S})}catch(w){if(Oe(w))return this._returnResult({data:{user:null,session:null},error:w});throw w}}async signInWithSolana(e){var n,s,a,l,c,d,f,h,p,g,v,_;let x,w;if("message"in e)x=e.message,w=e.signature;else{const{chain:S,wallet:A,statement:N,options:E}=e;let C;if(en())if(typeof A=="object")C=A;else{const k=window;if("solana"in k&&typeof k.solana=="object"&&("signIn"in k.solana&&typeof k.solana.signIn=="function"||"signMessage"in k.solana&&typeof k.solana.signMessage=="function"))C=k.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof A!="object"||!E?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");C=A}const O=new URL((n=E?.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in C&&C.signIn){const k=await C.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},E?.signInWithSolana),{version:"1",domain:O.host,uri:O.href}),N?{statement:N}:null));let R;if(Array.isArray(k)&&k[0]&&typeof k[0]=="object")R=k[0];else if(k&&typeof k=="object"&&"signedMessage"in k&&"signature"in k)R=k;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in R&&"signature"in R&&(typeof R.signedMessage=="string"||R.signedMessage instanceof Uint8Array)&&R.signature instanceof Uint8Array)x=typeof R.signedMessage=="string"?R.signedMessage:new TextDecoder().decode(R.signedMessage),w=R.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in C)||typeof C.signMessage!="function"||!("publicKey"in C)||typeof C!="object"||!C.publicKey||!("toBase58"in C.publicKey)||typeof C.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");x=[`${O.host} wants you to sign in with your Solana account:`,C.publicKey.toBase58(),...N?["",N,""]:[""],"Version: 1",`URI: ${O.href}`,`Issued At: ${(a=(s=E?.signInWithSolana)===null||s===void 0?void 0:s.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((l=E?.signInWithSolana)===null||l===void 0)&&l.notBefore?[`Not Before: ${E.signInWithSolana.notBefore}`]:[],...!((c=E?.signInWithSolana)===null||c===void 0)&&c.expirationTime?[`Expiration Time: ${E.signInWithSolana.expirationTime}`]:[],...!((d=E?.signInWithSolana)===null||d===void 0)&&d.chainId?[`Chain ID: ${E.signInWithSolana.chainId}`]:[],...!((f=E?.signInWithSolana)===null||f===void 0)&&f.nonce?[`Nonce: ${E.signInWithSolana.nonce}`]:[],...!((h=E?.signInWithSolana)===null||h===void 0)&&h.requestId?[`Request ID: ${E.signInWithSolana.requestId}`]:[],...!((g=(p=E?.signInWithSolana)===null||p===void 0?void 0:p.resources)===null||g===void 0)&&g.length?["Resources",...E.signInWithSolana.resources.map(R=>`- ${R}`)]:[]].join(`
`);const k=await C.signMessage(new TextEncoder().encode(x),"utf8");if(!k||!(k instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");w=k}}try{const{data:S,error:A}=await Ue(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:x,signature:mi(w)},!((v=e.options)===null||v===void 0)&&v.captchaToken?{gotrue_meta_security:{captcha_token:(_=e.options)===null||_===void 0?void 0:_.captchaToken}}:null),xform:Wn});if(A)throw A;if(!S||!S.session||!S.user){const N=new ya;return this._returnResult({data:{user:null,session:null},error:N})}return S.session&&(await this._saveSession(S.session),await this._notifyAllSubscribers("SIGNED_IN",S.session)),this._returnResult({data:Object.assign({},S),error:A})}catch(S){if(Oe(S))return this._returnResult({data:{user:null,session:null},error:S});throw S}}async _exchangeCodeForSession(e){const n=await ai(this.storage,`${this.storageKey}-code-verifier`),[s,a]=(n??"").split("/");try{const{data:l,error:c}=await Ue(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:s},xform:Wn});if(await Ts(this.storage,`${this.storageKey}-code-verifier`),c)throw c;if(!l||!l.session||!l.user){const d=new ya;return this._returnResult({data:{user:null,session:null,redirectType:null},error:d})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:Object.assign(Object.assign({},l),{redirectType:a??null}),error:c})}catch(l){if(Oe(l))return this._returnResult({data:{user:null,session:null,redirectType:null},error:l});throw l}}async signInWithIdToken(e){try{const{options:n,provider:s,token:a,access_token:l,nonce:c}=e,d=await Ue(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:a,access_token:l,nonce:c,gotrue_meta_security:{captcha_token:n?.captchaToken}},xform:Wn}),{data:f,error:h}=d;if(h)return this._returnResult({data:{user:null,session:null},error:h});if(!f||!f.session||!f.user){const p=new ya;return this._returnResult({data:{user:null,session:null},error:p})}return f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",f.session)),this._returnResult({data:f,error:h})}catch(n){if(Oe(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOtp(e){var n,s,a,l,c;try{if("email"in e){const{email:d,options:f}=e;let h=null,p=null;this.flowType==="pkce"&&([h,p]=await va(this.storage,this.storageKey));const{error:g}=await Ue(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:d,data:(n=f?.data)!==null&&n!==void 0?n:{},create_user:(s=f?.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:f?.captchaToken},code_challenge:h,code_challenge_method:p},redirectTo:f?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:g})}if("phone"in e){const{phone:d,options:f}=e,{data:h,error:p}=await Ue(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:d,data:(a=f?.data)!==null&&a!==void 0?a:{},create_user:(l=f?.shouldCreateUser)!==null&&l!==void 0?l:!0,gotrue_meta_security:{captcha_token:f?.captchaToken},channel:(c=f?.channel)!==null&&c!==void 0?c:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:h?.message_id},error:p})}throw new Iu("You must provide either an email or phone number.")}catch(d){if(Oe(d))return this._returnResult({data:{user:null,session:null},error:d});throw d}}async verifyOtp(e){var n,s;try{let a,l;"options"in e&&(a=(n=e.options)===null||n===void 0?void 0:n.redirectTo,l=(s=e.options)===null||s===void 0?void 0:s.captchaToken);const{data:c,error:d}=await Ue(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:l}}),redirectTo:a,xform:Wn});if(d)throw d;if(!c)throw new Error("An error occurred on token verification.");const f=c.session,h=c.user;return f?.access_token&&(await this._saveSession(f),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",f)),this._returnResult({data:{user:h,session:f},error:null})}catch(a){if(Oe(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithSSO(e){var n,s,a;try{let l=null,c=null;this.flowType==="pkce"&&([l,c]=await va(this.storage,this.storageKey));const d=await Ue(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(s=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&s!==void 0?s:void 0}),!((a=e?.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:l,code_challenge_method:c}),headers:this.headers,xform:d2});return this._returnResult(d)}catch(l){if(Oe(l))return this._returnResult({data:null,error:l});throw l}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:s}=e;if(s)throw s;if(!n)throw new Qn;const{error:a}=await Ue(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return this._returnResult({data:{user:null,session:null},error:a})})}catch(e){if(Oe(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:s,type:a,options:l}=e,{error:c}=await Ue(this.fetch,"POST",n,{headers:this.headers,body:{email:s,type:a,gotrue_meta_security:{captcha_token:l?.captchaToken}},redirectTo:l?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:c})}else if("phone"in e){const{phone:s,type:a,options:l}=e,{data:c,error:d}=await Ue(this.fetch,"POST",n,{headers:this.headers,body:{phone:s,type:a,gotrue_meta_security:{captcha_token:l?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:c?.message_id},error:d})}throw new Iu("You must provide either an email or phone number and a type")}catch(n){if(Oe(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await s,await n()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=n();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await ai(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const s=e.expires_at?e.expires_at*1e3-Date.now()<Qm:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",e.expires_at),!s){if(this.userStorage){const c=await ai(this.userStorage,this.storageKey+"-user");c?.user?e.user=c.user:e.user=Zm()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const c={value:this.suppressGetSessionWarning};e.user=o2(e.user,c),c.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:a,error:l}=await this._callRefreshToken(e.refresh_token);return l?this._returnResult({data:{session:null},error:l}):this._returnResult({data:{session:a},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await Ue(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Ds}):await this._useSession(async n=>{var s,a,l;const{data:c,error:d}=n;if(d)throw d;return!(!((s=c.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Qn}:await Ue(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(l=(a=c.session)===null||a===void 0?void 0:a.access_token)!==null&&l!==void 0?l:void 0,xform:Ds})})}catch(n){if(Oe(n))return zj(n)&&(await this._removeSession(),await Ts(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:n});throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async s=>{const{data:a,error:l}=s;if(l)throw l;if(!a.session)throw new Qn;const c=a.session;let d=null,f=null;this.flowType==="pkce"&&e.email!=null&&([d,f]=await va(this.storage,this.storageKey));const{data:h,error:p}=await Ue(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n?.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:d,code_challenge_method:f}),jwt:c.access_token,xform:Ds});if(p)throw p;return c.user=h.user,await this._saveSession(c),await this._notifyAllSubscribers("USER_UPDATED",c),this._returnResult({data:{user:c.user},error:null})})}catch(s){if(Oe(s))return this._returnResult({data:{user:null},error:s});throw s}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Qn;const n=Date.now()/1e3;let s=n,a=!0,l=null;const{payload:c}=Jm(e.access_token);if(c.exp&&(s=c.exp,a=s<=n),a){const{data:d,error:f}=await this._callRefreshToken(e.refresh_token);if(f)return this._returnResult({data:{user:null,session:null},error:f});if(!d)return{data:{user:null,session:null},error:null};l=d}else{const{data:d,error:f}=await this._getUser(e.access_token);if(f)throw f;l={access_token:e.access_token,refresh_token:e.refresh_token,user:d.user,token_type:"bearer",expires_in:s-n,expires_at:s},await this._saveSession(l),await this._notifyAllSubscribers("SIGNED_IN",l)}return this._returnResult({data:{user:l.user,session:l},error:null})}catch(n){if(Oe(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var s;if(!e){const{data:c,error:d}=n;if(d)throw d;e=(s=c.session)!==null&&s!==void 0?s:void 0}if(!e?.refresh_token)throw new Qn;const{data:a,error:l}=await this._callRefreshToken(e.refresh_token);return l?this._returnResult({data:{user:null,session:null},error:l}):a?this._returnResult({data:{user:a.user,session:a},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(n){if(Oe(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async _getSessionFromURL(e,n){try{if(!en())throw new Lu("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Lu(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new Db("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Lu("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Db("No code detected.");const{data:N,error:E}=await this._exchangeCodeForSession(e.code);if(E)throw E;const C=new URL(window.location.href);return C.searchParams.delete("code"),window.history.replaceState(window.history.state,"",C.toString()),{data:{session:N.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:a,access_token:l,refresh_token:c,expires_in:d,expires_at:f,token_type:h}=e;if(!l||!d||!c||!h)throw new Lu("No session defined in URL");const p=Math.round(Date.now()/1e3),g=parseInt(d);let v=p+g;f&&(v=parseInt(f));const _=v-p;_*1e3<=Ta&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${_}s, should have been closer to ${g}s`);const x=v-g;p-x>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",x,v,p):p-x<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",x,v,p);const{data:w,error:S}=await this._getUser(l);if(S)throw S;const A={provider_token:s,provider_refresh_token:a,access_token:l,expires_in:g,expires_at:v,refresh_token:c,token_type:h,user:w.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:A,redirectType:e.type},error:null})}catch(s){if(Oe(s))return this._returnResult({data:{session:null,redirectType:null},error:s});throw s}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await ai(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var s;const{data:a,error:l}=n;if(l)return this._returnResult({error:l});const c=(s=a.session)===null||s===void 0?void 0:s.access_token;if(c){const{error:d}=await this.admin.signOut(c,e);if(d&&!(Lj(d)&&(d.status===404||d.status===401||d.status===403)))return this._returnResult({error:d})}return e!=="others"&&(await this._removeSession(),await Ts(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const n=Gj(),s={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,s),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:s}}}async _emitInitialSession(e){return await this._useSession(async n=>{var s,a;try{const{data:{session:l},error:c}=n;if(c)throw c;await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",l)),this._debug("INITIAL_SESSION","callback id",e,"session",l)}catch(l){await((a=this.stateChangeEmitters.get(e))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",l),console.error(l)}})}async resetPasswordForEmail(e,n={}){let s=null,a=null;this.flowType==="pkce"&&([s,a]=await va(this.storage,this.storageKey,!0));try{return await Ue(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:s,code_challenge_method:a,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(l){if(Oe(l))return this._returnResult({data:null,error:l});throw l}}async getUserIdentities(){var e;try{const{data:n,error:s}=await this.getUser();if(s)throw s;return this._returnResult({data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(n){if(Oe(n))return this._returnResult({data:null,error:n});throw n}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var n;try{const{data:s,error:a}=await this._useSession(async l=>{var c,d,f,h,p;const{data:g,error:v}=l;if(v)throw v;const _=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(c=e.options)===null||c===void 0?void 0:c.redirectTo,scopes:(d=e.options)===null||d===void 0?void 0:d.scopes,queryParams:(f=e.options)===null||f===void 0?void 0:f.queryParams,skipBrowserRedirect:!0});return await Ue(this.fetch,"GET",_,{headers:this.headers,jwt:(p=(h=g.session)===null||h===void 0?void 0:h.access_token)!==null&&p!==void 0?p:void 0})});if(a)throw a;return en()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(s?.url),this._returnResult({data:{provider:e.provider,url:s?.url},error:null})}catch(s){if(Oe(s))return this._returnResult({data:{provider:e.provider,url:null},error:s});throw s}}async linkIdentityIdToken(e){return await this._useSession(async n=>{var s;try{const{error:a,data:{session:l}}=n;if(a)throw a;const{options:c,provider:d,token:f,access_token:h,nonce:p}=e,g=await Ue(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(s=l?.access_token)!==null&&s!==void 0?s:void 0,body:{provider:d,id_token:f,access_token:h,nonce:p,link_identity:!0,gotrue_meta_security:{captcha_token:c?.captchaToken}},xform:Wn}),{data:v,error:_}=g;return _?this._returnResult({data:{user:null,session:null},error:_}):!v||!v.session||!v.user?this._returnResult({data:{user:null,session:null},error:new ya}):(v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("USER_UPDATED",v.session)),this._returnResult({data:v,error:_}))}catch(a){if(Oe(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}})}async unlinkIdentity(e){try{return await this._useSession(async n=>{var s,a;const{data:l,error:c}=n;if(c)throw c;return await Ue(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(a=(s=l.session)===null||s===void 0?void 0:s.access_token)!==null&&a!==void 0?a:void 0})})}catch(n){if(Oe(n))return this._returnResult({data:null,error:n});throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const s=Date.now();return await Wj(async a=>(a>0&&await Qj(200*Math.pow(2,a-1)),this._debug(n,"refreshing attempt",a),await Ue(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Wn})),(a,l)=>{const c=200*Math.pow(2,a);return l&&Wm(l)&&Date.now()+c-s<Ta})}catch(s){if(this._debug(n,"error",s),Oe(s))return this._returnResult({data:{session:null,user:null},error:s});throw s}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const s=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",s),en()&&!n.skipBrowserRedirect&&window.location.assign(s),{data:{provider:e,url:s},error:null}}async _recoverAndRefresh(){var e,n;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const a=await ai(this.storage,this.storageKey);if(a&&this.userStorage){let c=await ai(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!c&&(c={user:a.user},await Na(this.userStorage,this.storageKey+"-user",c)),a.user=(e=c?.user)!==null&&e!==void 0?e:Zm()}else if(a&&!a.user&&!a.user){const c=await ai(this.storage,this.storageKey+"-user");c&&c?.user?(a.user=c.user,await Ts(this.storage,this.storageKey+"-user"),await Na(this.storage,this.storageKey,a)):a.user=Zm()}if(this._debug(s,"session from storage",a),!this._isValidSession(a)){this._debug(s,"session is not valid"),a!==null&&await this._removeSession();return}const l=((n=a.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<Qm;if(this._debug(s,`session has${l?"":" not"} expired with margin of ${Qm}s`),l){if(this.autoRefreshToken&&a.refresh_token){const{error:c}=await this._callRefreshToken(a.refresh_token);c&&(console.error(c),Wm(c)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",c),await this._removeSession()))}}else if(a.user&&a.user.__isUserNotAvailableProxy===!0)try{const{data:c,error:d}=await this._getUser(a.access_token);!d&&c?.user?(a.user=c.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(s,"could not get user data, skipping SIGNED_IN notification")}catch(c){console.error("Error getting user data:",c),this._debug(s,"error getting user data, skipping SIGNED_IN notification",c)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(s,"error",a),console.error(a);return}finally{this._debug(s,"end")}}async _callRefreshToken(e){var n,s;if(!e)throw new Qn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new Wd;const{data:l,error:c}=await this._refreshAccessToken(e);if(c)throw c;if(!l.session)throw new Qn;await this._saveSession(l.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",l.session);const d={data:l.session,error:null};return this.refreshingDeferred.resolve(d),d}catch(l){if(this._debug(a,"error",l),Oe(l)){const c={data:null,error:l};return Wm(l)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(c),c}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(l),l}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(e,n,s=!0){const a=`#_notifyAllSubscribers(${e})`;this._debug(a,"begin",n,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:e,session:n});const l=[],c=Array.from(this.stateChangeEmitters.values()).map(async d=>{try{await d.callback(e,n)}catch(f){l.push(f)}});if(await Promise.all(c),l.length>0){for(let d=0;d<l.length;d+=1)console.error(l[d]);throw l[0]}}finally{this._debug(a,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const n=Object.assign({},e),s=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!s&&n.user&&await Na(this.userStorage,this.storageKey+"-user",{user:n.user});const a=Object.assign({},n);delete a.user;const l=zb(a);await Na(this.storage,this.storageKey,l)}else{const a=zb(n);await Na(this.storage,this.storageKey,a)}}async _removeSession(){this._debug("#_removeSession()"),await Ts(this.storage,this.storageKey),await Ts(this.storage,this.storageKey+"-code-verifier"),await Ts(this.storage,this.storageKey+"-user"),this.userStorage&&await Ts(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&en()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Ta);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:s}}=n;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((s.expires_at*1e3-e)/Ta);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${Ta}ms, refresh threshold is ${$p} ticks`),a<=$p&&await this._callRefreshToken(s.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof tE)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!en()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,s){const a=[`provider=${encodeURIComponent(n)}`];if(s?.redirectTo&&a.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s?.scopes&&a.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const[l,c]=await va(this.storage,this.storageKey),d=new URLSearchParams({code_challenge:`${encodeURIComponent(l)}`,code_challenge_method:`${encodeURIComponent(c)}`});a.push(d.toString())}if(s?.queryParams){const l=new URLSearchParams(s.queryParams);a.push(l.toString())}return s?.skipBrowserRedirect&&a.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${e}?${a.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var s;const{data:a,error:l}=n;return l?this._returnResult({data:null,error:l}):await Ue(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(s=a?.session)===null||s===void 0?void 0:s.access_token})})}catch(n){if(Oe(n))return this._returnResult({data:null,error:n});throw n}}async _enroll(e){try{return await this._useSession(async n=>{var s,a;const{data:l,error:c}=n;if(c)return this._returnResult({data:null,error:c});const d=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:f,error:h}=await Ue(this.fetch,"POST",`${this.url}/factors`,{body:d,headers:this.headers,jwt:(s=l?.session)===null||s===void 0?void 0:s.access_token});return h?this._returnResult({data:null,error:h}):(e.factorType==="totp"&&f.type==="totp"&&(!((a=f?.totp)===null||a===void 0)&&a.qr_code)&&(f.totp.qr_code=`data:image/svg+xml;utf-8,${f.totp.qr_code}`),this._returnResult({data:f,error:null}))})}catch(n){if(Oe(n))return this._returnResult({data:null,error:n});throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var s;const{data:a,error:l}=n;if(l)return this._returnResult({data:null,error:l});const c=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?T2(e.webauthn.credential_response):N2(e.webauthn.credential_response)})}:{code:e.code}),{data:d,error:f}=await Ue(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:c,headers:this.headers,jwt:(s=a?.session)===null||s===void 0?void 0:s.access_token});return f?this._returnResult({data:null,error:f}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+d.expires_in},d)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",d),this._returnResult({data:d,error:f}))})}catch(n){if(Oe(n))return this._returnResult({data:null,error:n});throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var s;const{data:a,error:l}=n;if(l)return this._returnResult({data:null,error:l});const c=await Ue(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(s=a?.session)===null||s===void 0?void 0:s.access_token});if(c.error)return c;const{data:d}=c;if(d.type!=="webauthn")return{data:d,error:null};switch(d.webauthn.type){case"create":return{data:Object.assign(Object.assign({},d),{webauthn:Object.assign(Object.assign({},d.webauthn),{credential_options:Object.assign(Object.assign({},d.webauthn.credential_options),{publicKey:C2(d.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},d),{webauthn:Object.assign(Object.assign({},d.webauthn),{credential_options:Object.assign(Object.assign({},d.webauthn.credential_options),{publicKey:A2(d.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(Oe(n))return this._returnResult({data:null,error:n});throw n}})}async _challengeAndVerify(e){const{data:n,error:s}=await this._challenge({factorId:e.factorId});return s?this._returnResult({data:null,error:s}):await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){var e;const{data:{user:n},error:s}=await this.getUser();if(s)return{data:null,error:s};const a={all:[],phone:[],totp:[],webauthn:[]};for(const l of(e=n?.factors)!==null&&e!==void 0?e:[])a.all.push(l),l.status==="verified"&&a[l.factor_type].push(l);return{data:a,error:null}}async _getAuthenticatorAssuranceLevel(){var e,n;const{data:{session:s},error:a}=await this.getSession();if(a)return this._returnResult({data:null,error:a});if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:l}=Jm(s.access_token);let c=null;l.aal&&(c=l.aal);let d=c;((n=(e=s.user.factors)===null||e===void 0?void 0:e.filter(p=>p.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(d="aal2");const h=l.amr||[];return{data:{currentLevel:c,nextLevel:d,currentAuthenticationMethods:h},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async n=>{const{data:{session:s},error:a}=n;return a?this._returnResult({data:null,error:a}):s?await Ue(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:s.access_token,xform:l=>({data:l,error:null})}):this._returnResult({data:null,error:new Qn})})}catch(n){if(Oe(n))return this._returnResult({data:null,error:n});throw n}}async _approveAuthorization(e,n){try{return await this._useSession(async s=>{const{data:{session:a},error:l}=s;if(l)return this._returnResult({data:null,error:l});if(!a)return this._returnResult({data:null,error:new Qn});const c=await Ue(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"approve"},xform:d=>({data:d,error:null})});return c.data&&c.data.redirect_url&&en()&&!n?.skipBrowserRedirect&&window.location.assign(c.data.redirect_url),c})}catch(s){if(Oe(s))return this._returnResult({data:null,error:s});throw s}}async _denyAuthorization(e,n){try{return await this._useSession(async s=>{const{data:{session:a},error:l}=s;if(l)return this._returnResult({data:null,error:l});if(!a)return this._returnResult({data:null,error:new Qn});const c=await Ue(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"deny"},xform:d=>({data:d,error:null})});return c.data&&c.data.redirect_url&&en()&&!n?.skipBrowserRedirect&&window.location.assign(c.data.redirect_url),c})}catch(s){if(Oe(s))return this._returnResult({data:null,error:s});throw s}}async fetchJwk(e,n={keys:[]}){let s=n.keys.find(d=>d.kid===e);if(s)return s;const a=Date.now();if(s=this.jwks.keys.find(d=>d.kid===e),s&&this.jwks_cached_at+$j>a)return s;const{data:l,error:c}=await Ue(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(c)throw c;return!l.keys||l.keys.length===0||(this.jwks=l,this.jwks_cached_at=a,s=l.keys.find(d=>d.kid===e),!s)?null:s}async getClaims(e,n={}){try{let s=e;if(!s){const{data:_,error:x}=await this.getSession();if(x||!_.session)return this._returnResult({data:null,error:x});s=_.session.access_token}const{header:a,payload:l,signature:c,raw:{header:d,payload:f}}=Jm(s);n?.allowExpired||s2(l.exp);const h=!a.alg||a.alg.startsWith("HS")||!a.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(a.kid,n?.keys?{keys:n.keys}:n?.jwks);if(!h){const{error:_}=await this.getUser(s);if(_)throw _;return{data:{claims:l,header:a,signature:c},error:null}}const p=i2(a.alg),g=await crypto.subtle.importKey("jwk",h,p,!0,["verify"]);if(!await crypto.subtle.verify(p,g,c,Fj(`${d}.${f}`)))throw new zp("Invalid JWT signature");return{data:{claims:l,header:a,signature:c},error:null}}catch(s){if(Oe(s))return this._returnResult({data:null,error:s});throw s}}}kl.nextInstanceID=0;const I2=kl;class L2 extends I2{constructor(e){super(e)}}class z2{constructor(e,n,s){var a,l,c;this.supabaseUrl=e,this.supabaseKey=n;const d=jj(e);if(!n)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",d),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",d),this.storageUrl=new URL("storage/v1",d),this.functionsUrl=new URL("functions/v1",d);const f=`sb-${d.hostname.split(".")[0]}-auth-token`,h={db:Sj,realtime:Cj,auth:Object.assign(Object.assign({},Ej),{storageKey:f}),global:xj},p=Rj(s??{},h);this.storageKey=(a=p.auth.storageKey)!==null&&a!==void 0?a:"",this.headers=(l=p.global.headers)!==null&&l!==void 0?l:{},p.accessToken?(this.accessToken=p.accessToken,this.auth=new Proxy({},{get:(g,v)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(v)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((c=p.auth)!==null&&c!==void 0?c:{},this.headers,p.global.fetch),this.fetch=Nj(n,this._getAccessToken.bind(this),p.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},p.realtime)),this.rest=new kR(new URL("rest/v1",d).href,{headers:this.headers,schema:p.db.schema,fetch:this.fetch}),this.storage=new _j(this.storageUrl.href,this.headers,this.fetch,s?.storage),p.accessToken||this._listenForAuthEvents()}get functions(){return new NR(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},s={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,n,s)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e,n;if(this.accessToken)return await this.accessToken();const{data:s}=await this.auth.getSession();return(n=(e=s.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:s,storage:a,userStorage:l,storageKey:c,flowType:d,lock:f,debug:h,throwOnError:p},g,v){const _={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new L2({url:this.authUrl.href,headers:Object.assign(Object.assign({},_),g),storageKey:c,autoRefreshToken:e,persistSession:n,detectSessionInUrl:s,storage:a,userStorage:l,flowType:d,lock:f,debug:h,throwOnError:p,fetch:v,hasCustomAuthorizationHeader:Object.keys(this.headers).some(x=>x.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new KR(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,s)=>{this._handleTokenChanged(n,"CLIENT",s?.access_token)})}_handleTokenChanged(e,n,s){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==s?(this.changedAccessToken=s,this.realtime.setAuth(s)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const B2=(t,e,n)=>new z2(t,e,n);function P2(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}P2()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");var zu={exports:{}},Yb;function q2(){if(Yb)return zu.exports;Yb=1;var t=typeof Reflect=="object"?Reflect:null,e=t&&typeof t.apply=="function"?t.apply:function(O,k,R){return Function.prototype.apply.call(O,k,R)},n;t&&typeof t.ownKeys=="function"?n=t.ownKeys:Object.getOwnPropertySymbols?n=function(O){return Object.getOwnPropertyNames(O).concat(Object.getOwnPropertySymbols(O))}:n=function(O){return Object.getOwnPropertyNames(O)};function s(C){console&&console.warn&&console.warn(C)}var a=Number.isNaN||function(O){return O!==O};function l(){l.init.call(this)}zu.exports=l,zu.exports.once=A,l.EventEmitter=l,l.prototype._events=void 0,l.prototype._eventsCount=0,l.prototype._maxListeners=void 0;var c=10;function d(C){if(typeof C!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof C)}Object.defineProperty(l,"defaultMaxListeners",{enumerable:!0,get:function(){return c},set:function(C){if(typeof C!="number"||C<0||a(C))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+C+".");c=C}}),l.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},l.prototype.setMaxListeners=function(O){if(typeof O!="number"||O<0||a(O))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+O+".");return this._maxListeners=O,this};function f(C){return C._maxListeners===void 0?l.defaultMaxListeners:C._maxListeners}l.prototype.getMaxListeners=function(){return f(this)},l.prototype.emit=function(O){for(var k=[],R=1;R<arguments.length;R++)k.push(arguments[R]);var $=O==="error",L=this._events;if(L!==void 0)$=$&&L.error===void 0;else if(!$)return!1;if($){var X;if(k.length>0&&(X=k[0]),X instanceof Error)throw X;var F=new Error("Unhandled error."+(X?" ("+X.message+")":""));throw F.context=X,F}var H=L[O];if(H===void 0)return!1;if(typeof H=="function")e(H,this,k);else for(var W=H.length,I=x(H,W),R=0;R<W;++R)e(I[R],this,k);return!0};function h(C,O,k,R){var $,L,X;if(d(k),L=C._events,L===void 0?(L=C._events=Object.create(null),C._eventsCount=0):(L.newListener!==void 0&&(C.emit("newListener",O,k.listener?k.listener:k),L=C._events),X=L[O]),X===void 0)X=L[O]=k,++C._eventsCount;else if(typeof X=="function"?X=L[O]=R?[k,X]:[X,k]:R?X.unshift(k):X.push(k),$=f(C),$>0&&X.length>$&&!X.warned){X.warned=!0;var F=new Error("Possible EventEmitter memory leak detected. "+X.length+" "+String(O)+" listeners added. Use emitter.setMaxListeners() to increase limit");F.name="MaxListenersExceededWarning",F.emitter=C,F.type=O,F.count=X.length,s(F)}return C}l.prototype.addListener=function(O,k){return h(this,O,k,!1)},l.prototype.on=l.prototype.addListener,l.prototype.prependListener=function(O,k){return h(this,O,k,!0)};function p(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function g(C,O,k){var R={fired:!1,wrapFn:void 0,target:C,type:O,listener:k},$=p.bind(R);return $.listener=k,R.wrapFn=$,$}l.prototype.once=function(O,k){return d(k),this.on(O,g(this,O,k)),this},l.prototype.prependOnceListener=function(O,k){return d(k),this.prependListener(O,g(this,O,k)),this},l.prototype.removeListener=function(O,k){var R,$,L,X,F;if(d(k),$=this._events,$===void 0)return this;if(R=$[O],R===void 0)return this;if(R===k||R.listener===k)--this._eventsCount===0?this._events=Object.create(null):(delete $[O],$.removeListener&&this.emit("removeListener",O,R.listener||k));else if(typeof R!="function"){for(L=-1,X=R.length-1;X>=0;X--)if(R[X]===k||R[X].listener===k){F=R[X].listener,L=X;break}if(L<0)return this;L===0?R.shift():w(R,L),R.length===1&&($[O]=R[0]),$.removeListener!==void 0&&this.emit("removeListener",O,F||k)}return this},l.prototype.off=l.prototype.removeListener,l.prototype.removeAllListeners=function(O){var k,R,$;if(R=this._events,R===void 0)return this;if(R.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):R[O]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete R[O]),this;if(arguments.length===0){var L=Object.keys(R),X;for($=0;$<L.length;++$)X=L[$],X!=="removeListener"&&this.removeAllListeners(X);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(k=R[O],typeof k=="function")this.removeListener(O,k);else if(k!==void 0)for($=k.length-1;$>=0;$--)this.removeListener(O,k[$]);return this};function v(C,O,k){var R=C._events;if(R===void 0)return[];var $=R[O];return $===void 0?[]:typeof $=="function"?k?[$.listener||$]:[$]:k?S($):x($,$.length)}l.prototype.listeners=function(O){return v(this,O,!0)},l.prototype.rawListeners=function(O){return v(this,O,!1)},l.listenerCount=function(C,O){return typeof C.listenerCount=="function"?C.listenerCount(O):_.call(C,O)},l.prototype.listenerCount=_;function _(C){var O=this._events;if(O!==void 0){var k=O[C];if(typeof k=="function")return 1;if(k!==void 0)return k.length}return 0}l.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]};function x(C,O){for(var k=new Array(O),R=0;R<O;++R)k[R]=C[R];return k}function w(C,O){for(;O+1<C.length;O++)C[O]=C[O+1];C.pop()}function S(C){for(var O=new Array(C.length),k=0;k<O.length;++k)O[k]=C[k].listener||C[k];return O}function A(C,O){return new Promise(function(k,R){function $(X){C.removeListener(O,L),R(X)}function L(){typeof C.removeListener=="function"&&C.removeListener("error",$),k([].slice.call(arguments))}E(C,O,L,{once:!0}),O!=="error"&&N(C,$,{once:!0})})}function N(C,O,k){typeof C.on=="function"&&E(C,"error",O,k)}function E(C,O,k,R){if(typeof C.on=="function")R.once?C.once(O,k):C.on(O,k);else if(typeof C.addEventListener=="function")C.addEventListener(O,function $(L){R.once&&C.removeEventListener(O,$),k(L)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof C)}return zu.exports}var H2=q2();const V2=Gd(H2),Xt=new V2,sE="https://gsyznlwsezhwerypyzbe.supabase.co",F2="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImdzeXpubHdzZXpod2VyeXB5emJlIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQ2MTYwMzYsImV4cCI6MjA4MDE5MjAzNn0.vLLiGKSTADkaOsUX8386m2MFIJl1Gx-EB4gQLLOAZGA",ka=sE+"/storage/v1/object/public/embodys/",ke=B2(sE,F2),tp=async t=>{const{data:e,error:n}=await ke.from("profiles").select("*").eq("id",t).single();return n?(console.error("Error fetching user profile:",n.message),null):e},iE=async t=>{const{data:e,error:n}=await ke.from("projects").select("name").eq("id",t).single();return n?(console.error("Error fetching project name:",n.message),null):e.name},Jd=()=>{const[t,e]=j.useState(null),[n,s]=j.useState(null),[a,l]=j.useState(!0);return j.useEffect(()=>{ke.auth.getUser().then(({data:{user:d}})=>{e(d),d&&s(tp(d.id)),l(!1)}),Xt.on("updateProfile",()=>{ke.auth.getUser().then(({data:{user:d}})=>{e(d),d?(s(tp(d.id)),l(!1)):setLoading(!1)})});const{data:{subscription:c}}=ke.auth.onAuthStateChange((d,f)=>{const h=f?.user;e(h),h?(l(!0),tp(h.id).then(p=>{s(p),l(!1)})):(l(!1),s(null))});return()=>c.unsubscribe()},[]),{user:t,profile:n,isLoading:a}};function Y2(){const t=Is(),[e,n]=j.useState("./default_avatar.png"),[s,a]=j.useState(""),[l,c]=j.useState(0),{user:d,profile:f}=Jd();j.useEffect(()=>{console.log("profile",f),Xt.on("StartEditorMode",()=>{h(!0)}),Xt.on("EndEditorMode",()=>{h(!1)})},[]),h(!0);function h(g){const v=document.documentElement;g?(v.style.setProperty("--avatar-size","30px"),v.style.setProperty("--avatar-bacground-color","transparent"),v.style.setProperty("--avatar-bacground-border","none"),v.style.setProperty("--user-text-display","none")):(v.style.setProperty("--avatar-size","50px"),v.style.setProperty("--avatar-bacground-color","#2a2a2a"),v.style.setProperty("--avatar-bacground-border","1px solid #333"),v.style.setProperty("--user-text-display","block"))}function p(){t(d?"/profile":"/login")}return b.jsxs("div",{className:"user-info-container",onClick:p,children:[b.jsx("img",{src:f?.avatar_url||"./default_avatar.png",alt:"",className:"avatar"}),b.jsxs("div",{className:"user-info-text",children:[b.jsx("p",{children:f?.display_name||""}),b.jsx("p",{children:" : "+f?.gold_coins||"0"})]})]})}function G2(){const[t,e]=j.useState(""),[n,s]=j.useState(""),[a,l]=j.useState(""),[c,d]=j.useState(!1),f=Is(),h=async p=>{p.preventDefault(),l(""),d(!0);try{const{error:g}=await ke.auth.signInWithPassword({email:t,password:n});if(g){l(g.message);return}f("/profile")}catch{l("")}finally{d(!1)}};return b.jsx("div",{className:"login-container",children:b.jsxs("div",{className:"login-form",children:[b.jsx("h2",{children:""}),a&&b.jsx("p",{className:"error-message",children:a}),b.jsxs("form",{onSubmit:h,children:[b.jsxs("div",{className:"form-group",children:[b.jsx("label",{htmlFor:"email",children:""}),b.jsx("input",{type:"email",id:"email",value:t,onChange:p=>e(p.target.value),required:!0,placeholder:""})]}),b.jsxs("div",{className:"form-group",children:[b.jsx("label",{htmlFor:"password",children:""}),b.jsx("input",{type:"password",id:"password",value:n,onChange:p=>s(p.target.value),required:!0,placeholder:""})]}),b.jsx("button",{type:"submit",disabled:c,children:c?"...":""}),b.jsx("div",{className:"register-link",children:b.jsxs("p",{children:["",b.jsx(vi,{to:"/register",children:""})]})})]})]})})}function X2(){const[t,e]=j.useState(""),[n,s]=j.useState(""),[a,l]=j.useState(""),[c,d]=j.useState(""),[f,h]=j.useState(""),[p,g]=j.useState(!1);Is();const v=async _=>{if(_.preventDefault(),d(""),h(""),!t||!n||!a){d("");return}if(n!==a){d("");return}if(n.length<6){d("6");return}g(!0);try{const{error:x}=await ke.auth.signUp({email:t,password:n});if(x){d(x.message);return}h(""),e(""),s(""),l("")}catch{d("")}finally{g(!1)}};return b.jsx("div",{className:"register-container",children:b.jsxs("div",{className:"register-form",children:[b.jsx("h2",{children:""}),c&&b.jsx("p",{className:"error-message",children:c}),f&&b.jsx("p",{className:"success-message",children:f}),b.jsxs("form",{onSubmit:v,children:[b.jsxs("div",{className:"form-group",children:[b.jsxs("label",{htmlFor:"email",children:[" ",b.jsx("span",{className:"required",children:"*"})]}),b.jsx("input",{type:"email",id:"email",value:t,onChange:_=>e(_.target.value),required:!0,placeholder:""})]}),b.jsxs("div",{className:"form-group",children:[b.jsxs("label",{htmlFor:"password",children:[" ",b.jsx("span",{className:"required",children:"*"})]}),b.jsx("input",{type:"password",id:"password",value:n,onChange:_=>s(_.target.value),required:!0,placeholder:"6"})]}),b.jsxs("div",{className:"form-group",children:[b.jsxs("label",{htmlFor:"confirmPassword",children:[" ",b.jsx("span",{className:"required",children:"*"})]}),b.jsx("input",{type:"password",id:"confirmPassword",value:a,onChange:_=>l(_.target.value),required:!0,placeholder:""})]}),b.jsx("button",{type:"submit",disabled:p,children:p?"...":""}),b.jsx("div",{className:"login-link",children:b.jsxs("p",{children:["",b.jsx(vi,{to:"/login",children:""})]})})]})]})})}function K2({children:t}){return b.jsx("div",{className:"main-panel-header",children:t})}const $e={isCollapsed:!1,projectId:"",ep_id:"",editShotId:"",embodyCache:{},deepseekProvider:{}};function Q2(){const{user:t,profile:e}=Jd(),[n,s]=j.useState(!1),[a,l]=j.useState(""),[c,d]=j.useState(""),[f,h]=j.useState(!1),[p,g]=j.useState(""),[v,_]=j.useState(""),[x,w]=j.useState([]),[S,A]=j.useState(!1),N=Is(),E=()=>{O(),s(!0)},C=()=>{O(),s(!1)},O=()=>{l(""),d(""),g(""),_("")},k=()=>a.trim()?a.trim().length>50?(g("50"),!1):c.trim().length>200?(g("200"),!1):!0:(g(""),!1),R=()=>{A(!0),ke.from("projects").select("*").then(({data:W,error:I})=>{if(A(!1),I){console.error(":",I),g("");return}w(W)})},$=async()=>{if(g(""),!!k())try{h(!0);const{error:W}=await ke.from("projects").insert({name:a.trim(),description:c.trim(),user_id:t?.id,team_id:e?.team_id||null});if(W){console.error(":",W),g(""+W.message);return}await R(),_(""),C()}catch(W){g(""+W.message),console.error(":",W.message)}finally{h(!1)}};j.useEffect(()=>{$e.projectId?iE($e.projectId).then(W=>{W?N("/editor"):R()}):R()},[t]);const L=W=>{W.key==="Enter"&&!W.shiftKey&&(W.preventDefault(),$())},X=W=>{Xt.emit("StartEditorMode"),$e.projectId=W.id,localStorage.setItem("projectId",W.id),N("/editor")},F=(W,I)=>{W.stopPropagation(),$e.projectId=I.id,localStorage.setItem("projectId",I.id),N("/editor"),Xt.emit("StartEditorMode")},H=(W,I)=>{W.stopPropagation(),window.confirm(`"${I.project_name}"`)&&(console.log(":",I.project_name),ke.from("projects").delete().eq("id",I.id).then(({error:V})=>{if(V){console.error(":",V),g("");return}R(),_("")}))};return b.jsxs("div",{children:[b.jsx(K2,{children:b.jsx("h2",{children:""})}),b.jsx("div",{className:"main-panel-buttons",children:b.jsx("button",{onClick:E,children:""})}),b.jsx("div",{className:`main-panel-content ${x.length===0?"empty":""}`,children:x.length>0?x.map(W=>b.jsxs("div",{className:"project-item",onClick:()=>X(W),children:[b.jsxs("div",{className:"project-item-content",children:[b.jsx("h4",{children:W.name}),b.jsx("p",{children:W.description})]}),b.jsxs("div",{className:"project-actions",children:[b.jsx("button",{className:"edit-button",onClick:I=>F(I,W),title:"",children:""}),b.jsx("button",{className:"delete-button",onClick:I=>H(I,W),title:"",children:""})]})]},W.id)):S&&b.jsx("div",{className:"loading",children:"..."})}),n&&b.jsx("div",{className:"create-panel-overlay",onClick:C,children:b.jsxs("div",{className:"create-panel",onClick:W=>W.stopPropagation(),children:[b.jsxs("div",{className:"create-panel-header",children:[b.jsx("h3",{children:""}),b.jsx("button",{className:"close-button",onClick:C,disabled:f,children:""})]}),b.jsxs("div",{className:"create-panel-content",children:[p&&b.jsx("div",{className:"error-message",children:p}),v&&b.jsx("div",{className:"success-message",children:v}),b.jsx("input",{type:"text",placeholder:"",className:"story-name-input",value:a,onChange:W=>l(W.target.value),onKeyPress:L,disabled:f||!!v}),b.jsx("textarea",{placeholder:"",className:"story-description-input",value:c,onChange:W=>d(W.target.value),onKeyPress:L,disabled:f||!!v}),b.jsxs("div",{className:"char-count",children:[b.jsxs("span",{children:[": ",a.length,"/50"]}),b.jsxs("span",{children:[": ",c.length,"/200"]})]})]}),b.jsxs("div",{className:"create-panel-footer",children:[b.jsx("button",{className:"cancel-button",onClick:C,disabled:f,children:""}),b.jsxs("button",{className:"confirm-button",onClick:$,disabled:f||!!v,children:[f&&b.jsx("span",{className:"loading-spinner"}),f?"...":""]})]})]})})]})}function W2(){const{user:t,profile:e,isLoading:n}=Jd(),[s,a]=j.useState(!1),[l,c]=j.useState(!1),[d,f]=j.useState(""),[h,p]=j.useState(!1),[g,v]=j.useState(""),[_,x]=j.useState("./default_avatar.png"),[w,S]=j.useState(!1),[A,N]=j.useState([]),[E,C]=j.useState(""),[O,k]=j.useState(""),[R,$]=j.useState(""),[L,X]=j.useState(!1),[F,H]=j.useState("list"),W=Is();j.useEffect(()=>{e?.avatar_url&&x(e.avatar_url)},[e]);const I=async()=>{if(!e?.team_id){C("");return}try{const{data:ee,error:oe}=await ke.from("teams").select("name").eq("id",e.team_id).single();oe?(console.error("Error fetching team name:",oe.message),C("")):C(ee.name)}catch(ee){console.error("Error in fetchTeamName:",ee),C("")}};j.useEffect(()=>{I()},[e?.team_id]);const V=async()=>{try{await ke.auth.signOut(),W("/")}catch(ee){console.error(":",ee)}},U=async()=>{try{const{data:ee,error:oe}=await ke.from("teams").select("id, name").contains("members",[t.id]);if(oe)throw oe;N(ee||[])}catch(ee){console.error(":",ee),$("")}},z=()=>{U(),$(""),C(""),k(""),H("list"),c(!0)},q=()=>{c(!1),$("")},B=async()=>{if(!E.trim()){$("");return}if(E.length>20){$("20");return}X(!0),$("");try{const{data:ee,error:oe}=await ke.from("teams").insert({name:E.trim(),create_by:t.id,members:[t.id]}).select("id, name");if(oe)throw oe;console.log("newTeam",ee),N(ce=>[...ce,ee[0]]),C(""),$("","success"),H("list")}catch(ee){console.error(":",ee),$("")}finally{X(!1)}},G=async()=>{if(!O.trim()){$("");return}X(!0),$("");try{if(await new Promise(ee=>setTimeout(ee,1e3)),O==="INVITE1"){const ee={id:Date.now().toString(),name:"",code:O};N(oe=>[...oe,ee]),k(""),$("","success"),H("list")}else $("")}catch(ee){console.error(":",ee),$("")}finally{X(!1)}},D=async ee=>{X(!0);try{const{error:oe}=await ke.from("profiles").update({team_id:ee.id}).eq("id",t.id);if(oe)throw oe;q(),Xt.emit("updateProfile")}catch(oe){console.error(":",oe),$("")}finally{X(!1)}},P=()=>{f(e?.display_name||""),v(""),a(!0)},Z=()=>{a(!1),v("")},K=async ee=>{const oe=ee.target.files[0];if(!oe)return;if(!["image/jpeg","image/png","image/gif","image/webp"].includes(oe.type)){alert("JPG, PNG, GIF, WebP");return}if(oe.size>5*1024*1024){alert("5MB");return}S(!0);try{const he=`${Date.now()}${oe.name.slice(oe.name.lastIndexOf("."))}`;console.log("avatar filename = ",he);const{error:ye}=await ke.storage.from("avatars").upload(`${t.id}/${he}`,oe,{cacheControl:"3600",upsert:!1});if(ye)throw ye;const{data:xe}=ke.storage.from("avatars").getPublicUrl(`${t.id}/${he}`);console.log("avatar url = ",xe.publicUrl),x(xe.publicUrl);const{error:ve}=await ke.from("profiles").update({avatar_url:xe.publicUrl}).eq("id",t.id);ve&&console.log("update error = ",ve)}catch(he){console.error(":",he),alert("")}finally{S(!1),ee.target.value=""}},re=async()=>{if(!d.trim()){v("");return}if(d.length>10){v("10");return}p(!0),v("");try{const{error:ee}=await ke.from("profiles").update({display_name:d.trim()}).eq("id",t.id);if(ee){console.error(":",ee),v("");return}Xt.emit("updateProfile"),Z()}catch(ee){console.error(":",ee),v("")}finally{p(!1)}};return n?b.jsx("div",{className:"loading",children:"..."}):b.jsxs("div",{className:"profile-container",children:[b.jsxs("div",{className:"profile-header",children:[b.jsx("h1",{children:""}),b.jsx("button",{className:"logout-button",onClick:V,children:""})]}),b.jsx("div",{className:"profile-info",children:b.jsxs("div",{className:"info-section",children:[b.jsx("h2",{children:""}),b.jsxs("div",{className:"avatar-container",onClick:()=>document.getElementById("avatar-upload").click(),children:[w&&b.jsx("div",{className:"avatar-upload-overlay",children:b.jsx("span",{children:"..."})}),b.jsx("img",{src:_||"./default_avatar.png",alt:"",className:"avatar"}),b.jsx("div",{className:"avatar-hint",children:""}),b.jsx("input",{type:"file",id:"avatar-upload",accept:"image/*",style:{display:"none"},onChange:K})]}),b.jsxs("div",{className:"info-item",children:[b.jsx("span",{className:"label",children:""}),b.jsx("span",{className:"value",children:e?.display_name||""}),b.jsx("button",{className:"",onClick:P,children:""})]}),b.jsxs("div",{className:"info-item",children:[b.jsx("span",{className:"label",children:""}),b.jsx("span",{className:"value",children:e?.gold_coins||"0"}),b.jsx("button",{className:"",children:""})]}),b.jsxs("div",{className:"info-item",children:[b.jsx("span",{className:"label",children:""}),b.jsx("span",{className:"value",children:t.email})]}),b.jsxs("div",{className:"info-item",children:[b.jsx("span",{className:"label",children:""}),b.jsx("span",{className:"value",children:E}),b.jsx("button",{className:"team-switch-button",onClick:z,children:""})]}),b.jsxs("div",{className:"info-item",children:[b.jsx("span",{className:"label",children:""}),b.jsx("span",{className:"value",children:new Date(t.created_at).toLocaleString()})]})]})}),s&&b.jsx("div",{className:"modal-overlay",onClick:Z,children:b.jsxs("div",{className:"modal-content",onClick:ee=>ee.stopPropagation(),children:[b.jsxs("div",{className:"modal-header",children:[b.jsx("h3",{children:""}),b.jsx("button",{className:"close-button",onClick:Z,children:""})]}),b.jsxs("div",{className:"modal-body",children:[g&&b.jsx("p",{className:"error-message",children:g}),b.jsxs("div",{className:"form-group",children:[b.jsx("label",{htmlFor:"displayName",children:""}),b.jsx("input",{type:"text",id:"displayName",value:d,onChange:ee=>f(ee.target.value),placeholder:"",maxLength:50})]})]}),b.jsxs("div",{className:"modal-footer",children:[b.jsx("button",{className:"cancel-button",onClick:Z,children:""}),b.jsx("button",{className:"save-button",onClick:re,disabled:h,children:h?"...":""})]})]})}),l&&b.jsx("div",{className:"modal-overlay",onClick:q,children:b.jsxs("div",{className:"team-modal-content",onClick:ee=>ee.stopPropagation(),children:[b.jsxs("div",{className:"modal-header",children:[b.jsx("h3",{children:""}),b.jsx("button",{className:"close-button",onClick:q,children:""})]}),b.jsxs("div",{className:"team-modal-tabs",children:[b.jsx("button",{className:`team-tab-button ${F==="list"?"active":""}`,onClick:()=>H("list"),children:""}),b.jsx("button",{className:`team-tab-button ${F==="create"?"active":""}`,onClick:()=>H("create"),children:""}),b.jsx("button",{className:`team-tab-button ${F==="join"?"active":""}`,onClick:()=>H("join"),children:""})]}),b.jsxs("div",{className:"modal-body",children:[R&&b.jsx("p",{className:`${R.includes("")?"success-message":"error-message"}`,children:R}),F==="list"&&b.jsx("div",{className:"team-list",children:A.length===0?b.jsx("p",{className:"empty-message",children:""}):A.map(ee=>b.jsxs("div",{className:"team-item",children:[b.jsx("div",{className:"team-info",children:b.jsx("h4",{children:ee.name})}),b.jsx("button",{className:"switch-team-button",onClick:()=>D(ee),disabled:L,children:L?"...":""})]},ee.id))}),F==="create"&&b.jsxs("div",{className:"create-team-form",children:[b.jsxs("div",{className:"form-group",children:[b.jsx("label",{htmlFor:"teamName",children:""}),b.jsx("input",{type:"text",id:"teamName",value:E,onChange:ee=>C(ee.target.value),placeholder:"",maxLength:20,disabled:L})]}),b.jsx("p",{className:"form-hint",children:""})]}),F==="join"&&b.jsxs("div",{className:"join-team-form",children:[b.jsxs("div",{className:"form-group",children:[b.jsx("label",{htmlFor:"teamCode",children:"ID"}),b.jsx("input",{type:"text",id:"teamCode",value:O,onChange:ee=>k(ee.target.value.toUpperCase()),placeholder:"ID",disabled:L})]}),b.jsx("p",{className:"form-hint",children:""})]})]}),b.jsxs("div",{className:"modal-footer",children:[F!=="list"&&b.jsx("button",{className:"action-button",onClick:F==="create"?B:G,disabled:L,children:L?"...":F==="create"?"":""}),b.jsx("button",{className:"cancel-button",onClick:q,children:""})]})]})})]})}function J2(){const{user:t}=Jd();return b.jsxs("div",{className:"home-page",children:[b.jsx("h1",{children:""}),b.jsx("p",{children:t?`: ${t.email}`:""})]})}function ad({id:t,type:e,name:n,pic:s,description:a,onEdit:l,onDelete:c}){const[d,f]=j.useState(""),h={scene:"",character:"",item:""},p={scene:"",character:"",item:""};return j.useEffect(()=>{s&&s.length>0&&f(ka+s[0].path),console.log("EmbodyCard imagePath:",d)},[s]),b.jsxs("div",{className:"embody-card",onClick:()=>l&&l(t),children:[b.jsxs("div",{className:"embody-card-header",children:[b.jsxs("div",{className:"embody-card-type",children:[b.jsx("span",{className:"type-icon",children:h[e]}),b.jsx("span",{className:"type-name",children:p[e]})]}),b.jsx("div",{className:"embody-card-actions",children:b.jsx("button",{className:"card-action-btn delete-btn",onClick:()=>c&&c(t),title:"",children:""})})]}),b.jsx("div",{className:"embody-card-image",children:s?b.jsx("img",{src:d,alt:n}):b.jsx("div",{className:"placeholder-image",children:h[e]})}),b.jsxs("div",{className:"embody-card-content",children:[b.jsx("h3",{className:"embody-card-title",children:n}),b.jsx("p",{className:"embody-card-description",children:a||""})]})]})}function Z2(){const[t,e]=j.useState([]),[n,s]=j.useState({}),[a,l]=j.useState({}),[c,d]=j.useState({}),[f,h]=j.useState({}),[p,g]=j.useState(null),[v,_]=j.useState(null),[x,w]=j.useState(""),[S,A]=j.useState(null),[N,E]=j.useState([]);j.useRef(null);const[C,O]=j.useState([]),[k,R]=j.useState(""),[$,L]=j.useState(""),[X,F]=j.useState(!1),[H,W]=j.useState([]),[I,V]=j.useState(""),[U,z]=j.useState([]),[q,B]=j.useState({}),[G,D]=j.useState(!1),[P,Z]=j.useState(null),[K,re]=j.useState(null),[ee,oe]=j.useState(""),[ce,he]=j.useState(""),ye=async()=>{ke.from("movie_eps").select("title,index").eq("id",$e.ep_id).single().then(({data:Ae,error:Le})=>{if(Le){console.error("EP:",Le);return}console.log("EP:",Ae),R(Ae.title||`EP ${Ae.index||""}`),L(Ae.index||"")});const{data:fe,error:_e}=await ke.from("movie_scs").select(`
        *,
        movie_seqs(
          *,
          movie_shots(
            *
          )
        ).order(index, ascending) 
      `).order("index",{ascending:!0}).eq("ep_id",$e.ep_id);if(_e){console.error(":",_e);return}console.log(":",fe),fe.forEach(Ae=>{Ae.movie_seqs.forEach(Le=>{Le.movie_shots.sort((ft,pt)=>ft.index-pt.index),Le.movie_shots.forEach(ft=>{n[ft.id]=ft})})}),O(fe)};j.useEffect(()=>{$e.ep_id||($e.ep_id=localStorage.getItem("epId")),ye()},[]);const xe=fe=>{const _e={seq_id:fe,description:"",prompt:"",embodys:[]};console.log("newShot",_e),ke.from("movie_shots").insert(_e).then(({data:Ae,error:Le})=>{if(Le){console.error(":",Le);return}console.log(":",Ae),ye()})},ve=fe=>{$e.editShotId=fe,console.log(":",fe),Xt.emit("changeEditorMode","edit")},Ce=fe=>{window.confirm(""+fe)&&ke.from("movie_seqs").delete().eq("id",fe).then(({data:_e,error:Ae})=>{if(Ae){console.error(":",Ae);return}console.log(":",_e),ye()})};function ze(fe,_e){console.log(":",fe,_e),_(fe),w(_e);const Ae=n[fe][_e]||"";if(console.log(Ae),A(Ae),_e==="embodys"){var Le=[];Ae.forEach(ft=>{$e.embodyCache[ft]?Le.push($e.embodyCache[ft]):console.error("ID:",ft)}),console.log("emlist",Le),E(Le)}}const me=fe=>({character:"#3498db",item:"#2ecc71",scene:"#e74c3c",:"#f39c12",:"#9b59b6"})[fe]||"#95a5a6",ge=fe=>{if(!fe||fe===""||fe==="")return"";let _e=[];try{if(typeof fe=="string")try{_e=JSON.parse(fe)}catch{if(fe.trim()==="")return"";_e=fe.split(",").map(ft=>ft.trim())}else Array.isArray(fe)&&(_e=fe)}catch(Le){return console.error(":",Le),""}return!Array.isArray(_e)||_e.length===0?"":_e.map((Le,ft)=>{if($e.embodyCache&&$e.embodyCache[Le]){const pt=$e.embodyCache[Le],Pt=me(pt.type);return b.jsxs("span",{style:{marginRight:"8px"},children:[b.jsx("span",{style:{color:Pt,fontWeight:"bold",marginRight:"2px"},children:pt.name}),ft<_e.length-1&&", "]},Le)}else return console.log("ID:",Le),b.jsxs("span",{style:{marginRight:"8px",color:"#999"},children:["",ft<_e.length-1&&", "]},Le)})},Me=fe=>{z(_e=>_e.includes(fe)?_e.filter(Ae=>Ae!==fe):[..._e,fe])},Pe=()=>{const fe=H.filter(Le=>U.includes(Le.id)),_e=new Set(N.map(Le=>Le.name)),Ae=fe.filter(Le=>!_e.has(Le.name)).map(Le=>({id:Le.id,name:Le.name,type:Le.type}));console.log(":",Ae),E(Le=>[...Le,...Ae]),F(!1),z([]),V("")},ct=async fe=>{if(fe.preventDefault(),$e.embodyCache){const _e=Object.values($e.embodyCache);W(_e),console.log("globalData:",_e.length)}else console.warn("globalData.embodyCache"),W([]);F(!0)},ln=fe=>{const _e=[...N];_e.splice(fe,1),E(_e)},ut=()=>{},nn=fe=>{window.confirm(""+fe)&&ke.from("movie_shots").delete().eq("id",fe).then(({data:_e,error:Ae})=>{if(Ae){console.error(":",Ae);return}console.log(":",_e),ye()})},It=fe=>{window.confirm(""+fe)&&ke.from("movie_scs").delete().eq("id",fe).then(({data:_e,error:Ae})=>{if(Ae){console.error(":",Ae);return}console.log(":",_e),ye()})},dt=(fe,_e)=>{Z(fe),re(_e),oe(""),he(""),D(!0)},rn=async()=>{if(!ee.trim()){alert("");return}try{const{data:fe,error:_e}=await ke.from("movie_seqs").select("index").eq("sc_id",P).order("index",{ascending:!1}).limit(1);let Ae=1;!_e&&fe&&fe.length>0&&(Ae=fe[0].index+1);const Le={sc_id:P,name:ee.trim(),index:Ae},{data:ft,error:pt}=await ke.from("movie_seqs").insert(Le);if(pt){console.error(":",pt),alert("");return}console.log(":",ft),ye(),D(!1)}catch(fe){console.error(":",fe),alert("")}},Bt=async()=>{if(!v||!x){console.error("");return}try{let fe=S;if(console.log(S),x==="embodys"){const ft=(Array.isArray(N)?N:[]).filter(pt=>pt&&pt.id);fe=ft.map(pt=>pt.id),console.log(":",ft)}const{data:_e,error:Ae}=await ke.from("movie_shots").update({[x]:fe}).eq("id",v);if(Ae){console.error(":",Ae),alert("");return}n[v]&&(n[v][x]=fe,s({...n})),await ye()}catch(fe){console.error(":",fe),alert("")}finally{_(null),w(null),A(""),E([])}},jt=async()=>{try{const{data:fe,error:_e}=await ke.from("movie_scs").select("index").eq("ep_id",$e.ep_id).order("index",{ascending:!1}).limit(1);let Ae=1;!_e&&fe&&fe.length>0&&(Ae=fe[0].index+1);const Le={ep_id:$e.ep_id,name:"",index:Ae},{data:ft,error:pt}=await ke.from("movie_scs").insert(Le);if(pt){console.error(":",pt),alert("");return}console.log(":",ft),ye()}catch(fe){console.error(":",fe),alert("")}};return b.jsxs("div",{className:"editor-shots-content",children:[b.jsxs("div",{className:"editor-shots-header",children:[b.jsxs("h3",{className:"ep-number",children:[" ",$,"   -  ",k]}),b.jsx("button",{className:"add-sc-button",onClick:jt,children:""})]}),b.jsx("div",{className:"editor-shots-container-left",children:C.map(fe=>b.jsxs("div",{className:"sc-card",children:[b.jsxs("div",{className:"sc-card-header",children:[b.jsxs("h3",{className:"sc-name",children:["",fe.index,"-",fe.name]}),b.jsx("button",{className:"add-seq-button",title:"",onClick:()=>It(fe.id),children:"-"}),b.jsx("button",{className:"add-seq-button",title:"",onClick:()=>dt(fe.id,fe.index),children:"+"})]}),b.jsx("div",{className:"sc-seqs",children:fe.movie_seqs.map(_e=>b.jsxs("div",{className:"seq-item",children:[b.jsxs("div",{className:"seq-item-header",children:[b.jsx("p",{className:"seq-item-name",children:_e.name}),b.jsx("button",{className:"add-shot-button",title:"",onClick:()=>Ce(_e.id),children:"-"}),b.jsx("button",{className:"add-shot-button",title:"",onClick:()=>xe(_e.id),children:"+"})]}),b.jsx("div",{className:"seq-shots",children:b.jsxs("table",{className:"shot-table",children:[b.jsx("thead",{children:b.jsxs("tr",{children:[b.jsx("th",{children:""}),b.jsx("th",{children:""}),b.jsx("th",{children:""}),b.jsx("th",{children:""}),b.jsx("th",{children:""}),b.jsx("th",{children:""})]})}),b.jsx("tbody",{children:_e.movie_shots.map((Ae,Le)=>b.jsxs("tr",{className:"shot-item",children:[b.jsx("td",{children:Ae.index}),b.jsx("td",{children:Ae.pic?b.jsx("img",{src:Ae.pic,alt:Ae.descript||"./shot_thumb_default.png",style:{width:"50px",height:"50px"}}):b.jsx("img",{src:"./shot_thumb_default.png",alt:"",style:{width:"60px",height:"50px"}})}),b.jsx("td",{onClick:()=>ze(Ae.id,"description"),style:{cursor:"pointer"},children:Ae.description||""}),b.jsx("td",{onClick:()=>ze(Ae.id,"prompt"),style:{cursor:"pointer"},children:Ae.prompt||""}),b.jsx("td",{onClick:()=>ze(Ae.id,"embodys"),style:{cursor:"pointer"},children:ge(Ae.embodys)}),b.jsxs("td",{className:"shot-action-buttons",children:[b.jsx("button",{onClick:()=>ve(Ae.id),title:"",className:"op-button op-edit-button",children:""}),b.jsx("button",{onClick:()=>nn(Ae.id),title:"",className:"op-button op-delete-button",children:""})]})]},Ae.id))})]})})]},_e.id))})]},fe.index))}),b.jsxs("div",{className:"editor-shots-container-right",style:{display:v?"block":"none"},children:[x==="description"&&b.jsxs("div",{className:"right-edit-field",children:[b.jsx("label",{children:":"}),b.jsx("textarea",{className:"edit-field-textarea",value:S,onChange:fe=>A(fe.target.value)}),b.jsxs("div",{className:"edit-button-container",children:[b.jsx("button",{className:"expand-button",onClick:ut,children:""}),b.jsx("button",{className:"save-button",onClick:Bt,children:""})]})]}),x==="prompt"&&b.jsxs("div",{className:"right-edit-field",children:[b.jsx("label",{children:":"}),b.jsx("textarea",{className:"edit-field-textarea",value:S,onChange:fe=>A(fe.target.value)}),b.jsxs("div",{className:"edit-button-container",children:[b.jsx("button",{className:"expand-button",onClick:ut,children:""}),b.jsx("button",{className:"save-button",onClick:Bt,children:""})]})]}),x==="embodys"&&b.jsxs("div",{className:"right-edit-field",children:[b.jsx("label",{children:":"}),b.jsx("div",{className:"embodys-list-container",children:b.jsx("div",{className:"embodys-list",children:N.map((fe,_e)=>b.jsxs("div",{className:"embodys-item",children:[b.jsx("span",{className:"embodys-name",children:fe.name}),b.jsx("span",{className:"embodys-type",children:fe.type}),b.jsx("button",{className:"delete-embodys-item",onClick:()=>ln(_e),children:""})]},_e))})}),b.jsxs("div",{className:"edit-button-container",children:[b.jsx("button",{className:"add-embodys-button",onClick:ct,children:""}),b.jsx("button",{className:"save-button",onClick:Bt,children:""})]})]})]}),G&&b.jsx("div",{className:"modal-overlay",children:b.jsxs("div",{className:"modal-content",children:[b.jsxs("div",{className:"modal-header",children:[b.jsx("h3",{children:""}),b.jsx("button",{className:"modal-close",onClick:()=>D(!1),children:""})]}),b.jsx("div",{className:"modal-body",children:b.jsxs("div",{className:"form-group",children:[b.jsx("label",{children:":"}),b.jsx("input",{type:"text",value:ee,onChange:fe=>oe(fe.target.value),placeholder:"",className:"modal-input"})]})}),b.jsxs("div",{className:"modal-footer",children:[b.jsx("button",{className:"modal-cancel",onClick:()=>D(!1),children:""}),b.jsx("button",{className:"modal-confirm",onClick:rn,children:""})]})]})}),X&&b.jsx("div",{className:"modal-overlay",children:b.jsxs("div",{className:"modal-content embody-select-modal",children:[b.jsxs("div",{className:"modal-header",children:[b.jsx("h3",{children:""}),b.jsx("button",{className:"modal-close",onClick:()=>{F(!1),z([]),V("")},children:""})]}),b.jsxs("div",{className:"modal-body",children:[b.jsxs("div",{className:"form-group",children:[b.jsx("label",{children:":"}),b.jsx("input",{type:"text",value:I,onChange:fe=>V(fe.target.value),placeholder:"",className:"modal-input"})]}),b.jsxs("div",{className:"embodys-select-list card-view",children:[H.filter(fe=>fe.name.toLowerCase().includes(I.toLowerCase())||fe.description?.toLowerCase().includes(I.toLowerCase())).map(fe=>b.jsxs("div",{className:`embody-card-wrapper ${U.includes(fe.id)?"selected":""}`,onClick:_e=>{_e.stopPropagation(),Me(fe.id)},children:[b.jsx(ad,{id:fe.id,type:fe.type,name:fe.name,pic:fe.pic,description:fe.description,onEdit:()=>{},onDelete:()=>{}}),U.includes(fe.id)&&b.jsx("div",{className:"card-select-indicator",children:""})]},fe.id)),H.filter(fe=>fe.name.toLowerCase().includes(I.toLowerCase())||fe.description?.toLowerCase().includes(I.toLowerCase())).length===0&&b.jsx("p",{className:"no-results",children:""})]})]}),b.jsxs("div",{className:"modal-footer",children:[b.jsx("button",{className:"modal-cancel",onClick:()=>{F(!1),z([]),V("")},children:""}),b.jsxs("button",{className:"modal-confirm",onClick:Pe,disabled:U.length===0,children:[" (",U.length,")"]})]})]})})]})}function Rt(t){if(typeof t=="string"||typeof t=="number")return""+t;let e="";if(Array.isArray(t))for(let n=0,s;n<t.length;n++)(s=Rt(t[n]))!==""&&(e+=(e&&" ")+s);else for(let n in t)t[n]&&(e+=(e&&" ")+n);return e}var ek={value:()=>{}};function Zd(){for(var t=0,e=arguments.length,n={},s;t<e;++t){if(!(s=arguments[t]+"")||s in n||/[\s.]/.test(s))throw new Error("illegal type: "+s);n[s]=[]}return new od(n)}function od(t){this._=t}function tk(t,e){return t.trim().split(/^|\s+/).map(function(n){var s="",a=n.indexOf(".");if(a>=0&&(s=n.slice(a+1),n=n.slice(0,a)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:s}})}od.prototype=Zd.prototype={constructor:od,on:function(t,e){var n=this._,s=tk(t+"",n),a,l=-1,c=s.length;if(arguments.length<2){for(;++l<c;)if((a=(t=s[l]).type)&&(a=nk(n[a],t.name)))return a;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++l<c;)if(a=(t=s[l]).type)n[a]=Gb(n[a],t.name,e);else if(e==null)for(a in n)n[a]=Gb(n[a],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new od(t)},call:function(t,e){if((a=arguments.length-2)>0)for(var n=new Array(a),s=0,a,l;s<a;++s)n[s]=arguments[s+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(l=this._[t],s=0,a=l.length;s<a;++s)l[s].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var s=this._[t],a=0,l=s.length;a<l;++a)s[a].value.apply(e,n)}};function nk(t,e){for(var n=0,s=t.length,a;n<s;++n)if((a=t[n]).name===e)return a.value}function Gb(t,e,n){for(var s=0,a=t.length;s<a;++s)if(t[s].name===e){t[s]=ek,t=t.slice(0,s).concat(t.slice(s+1));break}return n!=null&&t.push({name:e,value:n}),t}var Bp="http://www.w3.org/1999/xhtml";const Xb={svg:"http://www.w3.org/2000/svg",xhtml:Bp,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function ef(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),Xb.hasOwnProperty(e)?{space:Xb[e],local:t}:t}function rk(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===Bp&&e.documentElement.namespaceURI===Bp?e.createElement(t):e.createElementNS(n,t)}}function sk(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function aE(t){var e=ef(t);return(e.local?sk:rk)(e)}function ik(){}function Rg(t){return t==null?ik:function(){return this.querySelector(t)}}function ak(t){typeof t!="function"&&(t=Rg(t));for(var e=this._groups,n=e.length,s=new Array(n),a=0;a<n;++a)for(var l=e[a],c=l.length,d=s[a]=new Array(c),f,h,p=0;p<c;++p)(f=l[p])&&(h=t.call(f,f.__data__,p,l))&&("__data__"in f&&(h.__data__=f.__data__),d[p]=h);return new Mn(s,this._parents)}function ok(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function lk(){return[]}function oE(t){return t==null?lk:function(){return this.querySelectorAll(t)}}function ck(t){return function(){return ok(t.apply(this,arguments))}}function uk(t){typeof t=="function"?t=ck(t):t=oE(t);for(var e=this._groups,n=e.length,s=[],a=[],l=0;l<n;++l)for(var c=e[l],d=c.length,f,h=0;h<d;++h)(f=c[h])&&(s.push(t.call(f,f.__data__,h,c)),a.push(f));return new Mn(s,a)}function lE(t){return function(){return this.matches(t)}}function cE(t){return function(e){return e.matches(t)}}var dk=Array.prototype.find;function fk(t){return function(){return dk.call(this.children,t)}}function hk(){return this.firstElementChild}function mk(t){return this.select(t==null?hk:fk(typeof t=="function"?t:cE(t)))}var pk=Array.prototype.filter;function gk(){return Array.from(this.children)}function yk(t){return function(){return pk.call(this.children,t)}}function vk(t){return this.selectAll(t==null?gk:yk(typeof t=="function"?t:cE(t)))}function _k(t){typeof t!="function"&&(t=lE(t));for(var e=this._groups,n=e.length,s=new Array(n),a=0;a<n;++a)for(var l=e[a],c=l.length,d=s[a]=[],f,h=0;h<c;++h)(f=l[h])&&t.call(f,f.__data__,h,l)&&d.push(f);return new Mn(s,this._parents)}function uE(t){return new Array(t.length)}function bk(){return new Mn(this._enter||this._groups.map(uE),this._parents)}function Td(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}Td.prototype={constructor:Td,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function wk(t){return function(){return t}}function xk(t,e,n,s,a,l){for(var c=0,d,f=e.length,h=l.length;c<h;++c)(d=e[c])?(d.__data__=l[c],s[c]=d):n[c]=new Td(t,l[c]);for(;c<f;++c)(d=e[c])&&(a[c]=d)}function Sk(t,e,n,s,a,l,c){var d,f,h=new Map,p=e.length,g=l.length,v=new Array(p),_;for(d=0;d<p;++d)(f=e[d])&&(v[d]=_=c.call(f,f.__data__,d,e)+"",h.has(_)?a[d]=f:h.set(_,f));for(d=0;d<g;++d)_=c.call(t,l[d],d,l)+"",(f=h.get(_))?(s[d]=f,f.__data__=l[d],h.delete(_)):n[d]=new Td(t,l[d]);for(d=0;d<p;++d)(f=e[d])&&h.get(v[d])===f&&(a[d]=f)}function Ek(t){return t.__data__}function Ck(t,e){if(!arguments.length)return Array.from(this,Ek);var n=e?Sk:xk,s=this._parents,a=this._groups;typeof t!="function"&&(t=wk(t));for(var l=a.length,c=new Array(l),d=new Array(l),f=new Array(l),h=0;h<l;++h){var p=s[h],g=a[h],v=g.length,_=Ak(t.call(p,p&&p.__data__,h,s)),x=_.length,w=d[h]=new Array(x),S=c[h]=new Array(x),A=f[h]=new Array(v);n(p,g,w,S,A,_,e);for(var N=0,E=0,C,O;N<x;++N)if(C=w[N]){for(N>=E&&(E=N+1);!(O=S[E])&&++E<x;);C._next=O||null}}return c=new Mn(c,s),c._enter=d,c._exit=f,c}function Ak(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Tk(){return new Mn(this._exit||this._groups.map(uE),this._parents)}function Nk(t,e,n){var s=this.enter(),a=this,l=this.exit();return typeof t=="function"?(s=t(s),s&&(s=s.selection())):s=s.append(t+""),e!=null&&(a=e(a),a&&(a=a.selection())),n==null?l.remove():n(l),s&&a?s.merge(a).order():a}function Ok(t){for(var e=t.selection?t.selection():t,n=this._groups,s=e._groups,a=n.length,l=s.length,c=Math.min(a,l),d=new Array(a),f=0;f<c;++f)for(var h=n[f],p=s[f],g=h.length,v=d[f]=new Array(g),_,x=0;x<g;++x)(_=h[x]||p[x])&&(v[x]=_);for(;f<a;++f)d[f]=n[f];return new Mn(d,this._parents)}function Rk(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var s=t[e],a=s.length-1,l=s[a],c;--a>=0;)(c=s[a])&&(l&&c.compareDocumentPosition(l)^4&&l.parentNode.insertBefore(c,l),l=c);return this}function jk(t){t||(t=kk);function e(g,v){return g&&v?t(g.__data__,v.__data__):!g-!v}for(var n=this._groups,s=n.length,a=new Array(s),l=0;l<s;++l){for(var c=n[l],d=c.length,f=a[l]=new Array(d),h,p=0;p<d;++p)(h=c[p])&&(f[p]=h);f.sort(e)}return new Mn(a,this._parents).order()}function kk(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function Mk(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function Dk(){return Array.from(this)}function Uk(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var s=t[e],a=0,l=s.length;a<l;++a){var c=s[a];if(c)return c}return null}function $k(){let t=0;for(const e of this)++t;return t}function Ik(){return!this.node()}function Lk(t){for(var e=this._groups,n=0,s=e.length;n<s;++n)for(var a=e[n],l=0,c=a.length,d;l<c;++l)(d=a[l])&&t.call(d,d.__data__,l,a);return this}function zk(t){return function(){this.removeAttribute(t)}}function Bk(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Pk(t,e){return function(){this.setAttribute(t,e)}}function qk(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function Hk(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function Vk(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function Fk(t,e){var n=ef(t);if(arguments.length<2){var s=this.node();return n.local?s.getAttributeNS(n.space,n.local):s.getAttribute(n)}return this.each((e==null?n.local?Bk:zk:typeof e=="function"?n.local?Vk:Hk:n.local?qk:Pk)(n,e))}function dE(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function Yk(t){return function(){this.style.removeProperty(t)}}function Gk(t,e,n){return function(){this.style.setProperty(t,e,n)}}function Xk(t,e,n){return function(){var s=e.apply(this,arguments);s==null?this.style.removeProperty(t):this.style.setProperty(t,s,n)}}function Kk(t,e,n){return arguments.length>1?this.each((e==null?Yk:typeof e=="function"?Xk:Gk)(t,e,n??"")):Ba(this.node(),t)}function Ba(t,e){return t.style.getPropertyValue(e)||dE(t).getComputedStyle(t,null).getPropertyValue(e)}function Qk(t){return function(){delete this[t]}}function Wk(t,e){return function(){this[t]=e}}function Jk(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function Zk(t,e){return arguments.length>1?this.each((e==null?Qk:typeof e=="function"?Jk:Wk)(t,e)):this.node()[t]}function fE(t){return t.trim().split(/^|\s+/)}function jg(t){return t.classList||new hE(t)}function hE(t){this._node=t,this._names=fE(t.getAttribute("class")||"")}hE.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function mE(t,e){for(var n=jg(t),s=-1,a=e.length;++s<a;)n.add(e[s])}function pE(t,e){for(var n=jg(t),s=-1,a=e.length;++s<a;)n.remove(e[s])}function eM(t){return function(){mE(this,t)}}function tM(t){return function(){pE(this,t)}}function nM(t,e){return function(){(e.apply(this,arguments)?mE:pE)(this,t)}}function rM(t,e){var n=fE(t+"");if(arguments.length<2){for(var s=jg(this.node()),a=-1,l=n.length;++a<l;)if(!s.contains(n[a]))return!1;return!0}return this.each((typeof e=="function"?nM:e?eM:tM)(n,e))}function sM(){this.textContent=""}function iM(t){return function(){this.textContent=t}}function aM(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function oM(t){return arguments.length?this.each(t==null?sM:(typeof t=="function"?aM:iM)(t)):this.node().textContent}function lM(){this.innerHTML=""}function cM(t){return function(){this.innerHTML=t}}function uM(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function dM(t){return arguments.length?this.each(t==null?lM:(typeof t=="function"?uM:cM)(t)):this.node().innerHTML}function fM(){this.nextSibling&&this.parentNode.appendChild(this)}function hM(){return this.each(fM)}function mM(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function pM(){return this.each(mM)}function gM(t){var e=typeof t=="function"?t:aE(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function yM(){return null}function vM(t,e){var n=typeof t=="function"?t:aE(t),s=e==null?yM:typeof e=="function"?e:Rg(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),s.apply(this,arguments)||null)})}function _M(){var t=this.parentNode;t&&t.removeChild(this)}function bM(){return this.each(_M)}function wM(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function xM(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function SM(t){return this.select(t?xM:wM)}function EM(t){return arguments.length?this.property("__data__",t):this.node().__data__}function CM(t){return function(e){t.call(this,e,this.__data__)}}function AM(t){return t.trim().split(/^|\s+/).map(function(e){var n="",s=e.indexOf(".");return s>=0&&(n=e.slice(s+1),e=e.slice(0,s)),{type:e,name:n}})}function TM(t){return function(){var e=this.__on;if(e){for(var n=0,s=-1,a=e.length,l;n<a;++n)l=e[n],(!t.type||l.type===t.type)&&l.name===t.name?this.removeEventListener(l.type,l.listener,l.options):e[++s]=l;++s?e.length=s:delete this.__on}}}function NM(t,e,n){return function(){var s=this.__on,a,l=CM(e);if(s){for(var c=0,d=s.length;c<d;++c)if((a=s[c]).type===t.type&&a.name===t.name){this.removeEventListener(a.type,a.listener,a.options),this.addEventListener(a.type,a.listener=l,a.options=n),a.value=e;return}}this.addEventListener(t.type,l,n),a={type:t.type,name:t.name,value:e,listener:l,options:n},s?s.push(a):this.__on=[a]}}function OM(t,e,n){var s=AM(t+""),a,l=s.length,c;if(arguments.length<2){var d=this.node().__on;if(d){for(var f=0,h=d.length,p;f<h;++f)for(a=0,p=d[f];a<l;++a)if((c=s[a]).type===p.type&&c.name===p.name)return p.value}return}for(d=e?NM:TM,a=0;a<l;++a)this.each(d(s[a],e,n));return this}function gE(t,e,n){var s=dE(t),a=s.CustomEvent;typeof a=="function"?a=new a(e,n):(a=s.document.createEvent("Event"),n?(a.initEvent(e,n.bubbles,n.cancelable),a.detail=n.detail):a.initEvent(e,!1,!1)),t.dispatchEvent(a)}function RM(t,e){return function(){return gE(this,t,e)}}function jM(t,e){return function(){return gE(this,t,e.apply(this,arguments))}}function kM(t,e){return this.each((typeof e=="function"?jM:RM)(t,e))}function*MM(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var s=t[e],a=0,l=s.length,c;a<l;++a)(c=s[a])&&(yield c)}var yE=[null];function Mn(t,e){this._groups=t,this._parents=e}function Ql(){return new Mn([[document.documentElement]],yE)}function DM(){return this}Mn.prototype=Ql.prototype={constructor:Mn,select:ak,selectAll:uk,selectChild:mk,selectChildren:vk,filter:_k,data:Ck,enter:bk,exit:Tk,join:Nk,merge:Ok,selection:DM,order:Rk,sort:jk,call:Mk,nodes:Dk,node:Uk,size:$k,empty:Ik,each:Lk,attr:Fk,style:Kk,property:Zk,classed:rM,text:oM,html:dM,raise:hM,lower:pM,append:gM,insert:vM,remove:bM,clone:SM,datum:EM,on:OM,dispatch:kM,[Symbol.iterator]:MM};function kn(t){return typeof t=="string"?new Mn([[document.querySelector(t)]],[document.documentElement]):new Mn([[t]],yE)}function UM(t){let e;for(;e=t.sourceEvent;)t=e;return t}function tr(t,e){if(t=UM(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var s=n.createSVGPoint();return s.x=t.clientX,s.y=t.clientY,s=s.matrixTransform(e.getScreenCTM().inverse()),[s.x,s.y]}if(e.getBoundingClientRect){var a=e.getBoundingClientRect();return[t.clientX-a.left-e.clientLeft,t.clientY-a.top-e.clientTop]}}return[t.pageX,t.pageY]}const $M={passive:!1},Ml={capture:!0,passive:!1};function np(t){t.stopImmediatePropagation()}function Ia(t){t.preventDefault(),t.stopImmediatePropagation()}function vE(t){var e=t.document.documentElement,n=kn(t).on("dragstart.drag",Ia,Ml);"onselectstart"in e?n.on("selectstart.drag",Ia,Ml):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function _E(t,e){var n=t.document.documentElement,s=kn(t).on("dragstart.drag",null);e&&(s.on("click.drag",Ia,Ml),setTimeout(function(){s.on("click.drag",null)},0)),"onselectstart"in n?s.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const Bu=t=>()=>t;function Pp(t,{sourceEvent:e,subject:n,target:s,identifier:a,active:l,x:c,y:d,dx:f,dy:h,dispatch:p}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:s,enumerable:!0,configurable:!0},identifier:{value:a,enumerable:!0,configurable:!0},active:{value:l,enumerable:!0,configurable:!0},x:{value:c,enumerable:!0,configurable:!0},y:{value:d,enumerable:!0,configurable:!0},dx:{value:f,enumerable:!0,configurable:!0},dy:{value:h,enumerable:!0,configurable:!0},_:{value:p}})}Pp.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function IM(t){return!t.ctrlKey&&!t.button}function LM(){return this.parentNode}function zM(t,e){return e??{x:t.x,y:t.y}}function BM(){return navigator.maxTouchPoints||"ontouchstart"in this}function bE(){var t=IM,e=LM,n=zM,s=BM,a={},l=Zd("start","drag","end"),c=0,d,f,h,p,g=0;function v(C){C.on("mousedown.drag",_).filter(s).on("touchstart.drag",S).on("touchmove.drag",A,$M).on("touchend.drag touchcancel.drag",N).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function _(C,O){if(!(p||!t.call(this,C,O))){var k=E(this,e.call(this,C,O),C,O,"mouse");k&&(kn(C.view).on("mousemove.drag",x,Ml).on("mouseup.drag",w,Ml),vE(C.view),np(C),h=!1,d=C.clientX,f=C.clientY,k("start",C))}}function x(C){if(Ia(C),!h){var O=C.clientX-d,k=C.clientY-f;h=O*O+k*k>g}a.mouse("drag",C)}function w(C){kn(C.view).on("mousemove.drag mouseup.drag",null),_E(C.view,h),Ia(C),a.mouse("end",C)}function S(C,O){if(t.call(this,C,O)){var k=C.changedTouches,R=e.call(this,C,O),$=k.length,L,X;for(L=0;L<$;++L)(X=E(this,R,C,O,k[L].identifier,k[L]))&&(np(C),X("start",C,k[L]))}}function A(C){var O=C.changedTouches,k=O.length,R,$;for(R=0;R<k;++R)($=a[O[R].identifier])&&(Ia(C),$("drag",C,O[R]))}function N(C){var O=C.changedTouches,k=O.length,R,$;for(p&&clearTimeout(p),p=setTimeout(function(){p=null},500),R=0;R<k;++R)($=a[O[R].identifier])&&(np(C),$("end",C,O[R]))}function E(C,O,k,R,$,L){var X=l.copy(),F=tr(L||k,O),H,W,I;if((I=n.call(C,new Pp("beforestart",{sourceEvent:k,target:v,identifier:$,active:c,x:F[0],y:F[1],dx:0,dy:0,dispatch:X}),R))!=null)return H=I.x-F[0]||0,W=I.y-F[1]||0,function V(U,z,q){var B=F,G;switch(U){case"start":a[$]=V,G=c++;break;case"end":delete a[$],--c;case"drag":F=tr(q||z,O),G=c;break}X.call(U,C,new Pp(U,{sourceEvent:z,subject:I,target:v,identifier:$,active:G,x:F[0]+H,y:F[1]+W,dx:F[0]-B[0],dy:F[1]-B[1],dispatch:X}),R)}}return v.filter=function(C){return arguments.length?(t=typeof C=="function"?C:Bu(!!C),v):t},v.container=function(C){return arguments.length?(e=typeof C=="function"?C:Bu(C),v):e},v.subject=function(C){return arguments.length?(n=typeof C=="function"?C:Bu(C),v):n},v.touchable=function(C){return arguments.length?(s=typeof C=="function"?C:Bu(!!C),v):s},v.on=function(){var C=l.on.apply(l,arguments);return C===l?v:C},v.clickDistance=function(C){return arguments.length?(g=(C=+C)*C,v):Math.sqrt(g)},v}function kg(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function wE(t,e){var n=Object.create(t.prototype);for(var s in e)n[s]=e[s];return n}function Wl(){}var Dl=.7,Nd=1/Dl,La="\\s*([+-]?\\d+)\\s*",Ul="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",yr="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",PM=/^#([0-9a-f]{3,8})$/,qM=new RegExp(`^rgb\\(${La},${La},${La}\\)$`),HM=new RegExp(`^rgb\\(${yr},${yr},${yr}\\)$`),VM=new RegExp(`^rgba\\(${La},${La},${La},${Ul}\\)$`),FM=new RegExp(`^rgba\\(${yr},${yr},${yr},${Ul}\\)$`),YM=new RegExp(`^hsl\\(${Ul},${yr},${yr}\\)$`),GM=new RegExp(`^hsla\\(${Ul},${yr},${yr},${Ul}\\)$`),Kb={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};kg(Wl,wi,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Qb,formatHex:Qb,formatHex8:XM,formatHsl:KM,formatRgb:Wb,toString:Wb});function Qb(){return this.rgb().formatHex()}function XM(){return this.rgb().formatHex8()}function KM(){return xE(this).formatHsl()}function Wb(){return this.rgb().formatRgb()}function wi(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=PM.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?Jb(e):n===3?new vn(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?Pu(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?Pu(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=qM.exec(t))?new vn(e[1],e[2],e[3],1):(e=HM.exec(t))?new vn(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=VM.exec(t))?Pu(e[1],e[2],e[3],e[4]):(e=FM.exec(t))?Pu(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=YM.exec(t))?tw(e[1],e[2]/100,e[3]/100,1):(e=GM.exec(t))?tw(e[1],e[2]/100,e[3]/100,e[4]):Kb.hasOwnProperty(t)?Jb(Kb[t]):t==="transparent"?new vn(NaN,NaN,NaN,0):null}function Jb(t){return new vn(t>>16&255,t>>8&255,t&255,1)}function Pu(t,e,n,s){return s<=0&&(t=e=n=NaN),new vn(t,e,n,s)}function QM(t){return t instanceof Wl||(t=wi(t)),t?(t=t.rgb(),new vn(t.r,t.g,t.b,t.opacity)):new vn}function qp(t,e,n,s){return arguments.length===1?QM(t):new vn(t,e,n,s??1)}function vn(t,e,n,s){this.r=+t,this.g=+e,this.b=+n,this.opacity=+s}kg(vn,qp,wE(Wl,{brighter(t){return t=t==null?Nd:Math.pow(Nd,t),new vn(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Dl:Math.pow(Dl,t),new vn(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new vn(_i(this.r),_i(this.g),_i(this.b),Od(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Zb,formatHex:Zb,formatHex8:WM,formatRgb:ew,toString:ew}));function Zb(){return`#${pi(this.r)}${pi(this.g)}${pi(this.b)}`}function WM(){return`#${pi(this.r)}${pi(this.g)}${pi(this.b)}${pi((isNaN(this.opacity)?1:this.opacity)*255)}`}function ew(){const t=Od(this.opacity);return`${t===1?"rgb(":"rgba("}${_i(this.r)}, ${_i(this.g)}, ${_i(this.b)}${t===1?")":`, ${t})`}`}function Od(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function _i(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function pi(t){return t=_i(t),(t<16?"0":"")+t.toString(16)}function tw(t,e,n,s){return s<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new nr(t,e,n,s)}function xE(t){if(t instanceof nr)return new nr(t.h,t.s,t.l,t.opacity);if(t instanceof Wl||(t=wi(t)),!t)return new nr;if(t instanceof nr)return t;t=t.rgb();var e=t.r/255,n=t.g/255,s=t.b/255,a=Math.min(e,n,s),l=Math.max(e,n,s),c=NaN,d=l-a,f=(l+a)/2;return d?(e===l?c=(n-s)/d+(n<s)*6:n===l?c=(s-e)/d+2:c=(e-n)/d+4,d/=f<.5?l+a:2-l-a,c*=60):d=f>0&&f<1?0:c,new nr(c,d,f,t.opacity)}function JM(t,e,n,s){return arguments.length===1?xE(t):new nr(t,e,n,s??1)}function nr(t,e,n,s){this.h=+t,this.s=+e,this.l=+n,this.opacity=+s}kg(nr,JM,wE(Wl,{brighter(t){return t=t==null?Nd:Math.pow(Nd,t),new nr(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Dl:Math.pow(Dl,t),new nr(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,s=n+(n<.5?n:1-n)*e,a=2*n-s;return new vn(rp(t>=240?t-240:t+120,a,s),rp(t,a,s),rp(t<120?t+240:t-120,a,s),this.opacity)},clamp(){return new nr(nw(this.h),qu(this.s),qu(this.l),Od(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Od(this.opacity);return`${t===1?"hsl(":"hsla("}${nw(this.h)}, ${qu(this.s)*100}%, ${qu(this.l)*100}%${t===1?")":`, ${t})`}`}}));function nw(t){return t=(t||0)%360,t<0?t+360:t}function qu(t){return Math.max(0,Math.min(1,t||0))}function rp(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const Mg=t=>()=>t;function ZM(t,e){return function(n){return t+n*e}}function eD(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(s){return Math.pow(t+s*e,n)}}function tD(t){return(t=+t)==1?SE:function(e,n){return n-e?eD(e,n,t):Mg(isNaN(e)?n:e)}}function SE(t,e){var n=e-t;return n?ZM(t,n):Mg(isNaN(t)?e:t)}const Rd=(function t(e){var n=tD(e);function s(a,l){var c=n((a=qp(a)).r,(l=qp(l)).r),d=n(a.g,l.g),f=n(a.b,l.b),h=SE(a.opacity,l.opacity);return function(p){return a.r=c(p),a.g=d(p),a.b=f(p),a.opacity=h(p),a+""}}return s.gamma=t,s})(1);function nD(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,s=e.slice(),a;return function(l){for(a=0;a<n;++a)s[a]=t[a]*(1-l)+e[a]*l;return s}}function rD(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function sD(t,e){var n=e?e.length:0,s=t?Math.min(n,t.length):0,a=new Array(s),l=new Array(n),c;for(c=0;c<s;++c)a[c]=Sl(t[c],e[c]);for(;c<n;++c)l[c]=e[c];return function(d){for(c=0;c<s;++c)l[c]=a[c](d);return l}}function iD(t,e){var n=new Date;return t=+t,e=+e,function(s){return n.setTime(t*(1-s)+e*s),n}}function pr(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function aD(t,e){var n={},s={},a;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(a in e)a in t?n[a]=Sl(t[a],e[a]):s[a]=e[a];return function(l){for(a in n)s[a]=n[a](l);return s}}var Hp=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,sp=new RegExp(Hp.source,"g");function oD(t){return function(){return t}}function lD(t){return function(e){return t(e)+""}}function EE(t,e){var n=Hp.lastIndex=sp.lastIndex=0,s,a,l,c=-1,d=[],f=[];for(t=t+"",e=e+"";(s=Hp.exec(t))&&(a=sp.exec(e));)(l=a.index)>n&&(l=e.slice(n,l),d[c]?d[c]+=l:d[++c]=l),(s=s[0])===(a=a[0])?d[c]?d[c]+=a:d[++c]=a:(d[++c]=null,f.push({i:c,x:pr(s,a)})),n=sp.lastIndex;return n<e.length&&(l=e.slice(n),d[c]?d[c]+=l:d[++c]=l),d.length<2?f[0]?lD(f[0].x):oD(e):(e=f.length,function(h){for(var p=0,g;p<e;++p)d[(g=f[p]).i]=g.x(h);return d.join("")})}function Sl(t,e){var n=typeof e,s;return e==null||n==="boolean"?Mg(e):(n==="number"?pr:n==="string"?(s=wi(e))?(e=s,Rd):EE:e instanceof wi?Rd:e instanceof Date?iD:rD(e)?nD:Array.isArray(e)?sD:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?aD:pr)(t,e)}var rw=180/Math.PI,Vp={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function CE(t,e,n,s,a,l){var c,d,f;return(c=Math.sqrt(t*t+e*e))&&(t/=c,e/=c),(f=t*n+e*s)&&(n-=t*f,s-=e*f),(d=Math.sqrt(n*n+s*s))&&(n/=d,s/=d,f/=d),t*s<e*n&&(t=-t,e=-e,f=-f,c=-c),{translateX:a,translateY:l,rotate:Math.atan2(e,t)*rw,skewX:Math.atan(f)*rw,scaleX:c,scaleY:d}}var Hu;function cD(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?Vp:CE(e.a,e.b,e.c,e.d,e.e,e.f)}function uD(t){return t==null||(Hu||(Hu=document.createElementNS("http://www.w3.org/2000/svg","g")),Hu.setAttribute("transform",t),!(t=Hu.transform.baseVal.consolidate()))?Vp:(t=t.matrix,CE(t.a,t.b,t.c,t.d,t.e,t.f))}function AE(t,e,n,s){function a(h){return h.length?h.pop()+" ":""}function l(h,p,g,v,_,x){if(h!==g||p!==v){var w=_.push("translate(",null,e,null,n);x.push({i:w-4,x:pr(h,g)},{i:w-2,x:pr(p,v)})}else(g||v)&&_.push("translate("+g+e+v+n)}function c(h,p,g,v){h!==p?(h-p>180?p+=360:p-h>180&&(h+=360),v.push({i:g.push(a(g)+"rotate(",null,s)-2,x:pr(h,p)})):p&&g.push(a(g)+"rotate("+p+s)}function d(h,p,g,v){h!==p?v.push({i:g.push(a(g)+"skewX(",null,s)-2,x:pr(h,p)}):p&&g.push(a(g)+"skewX("+p+s)}function f(h,p,g,v,_,x){if(h!==g||p!==v){var w=_.push(a(_)+"scale(",null,",",null,")");x.push({i:w-4,x:pr(h,g)},{i:w-2,x:pr(p,v)})}else(g!==1||v!==1)&&_.push(a(_)+"scale("+g+","+v+")")}return function(h,p){var g=[],v=[];return h=t(h),p=t(p),l(h.translateX,h.translateY,p.translateX,p.translateY,g,v),c(h.rotate,p.rotate,g,v),d(h.skewX,p.skewX,g,v),f(h.scaleX,h.scaleY,p.scaleX,p.scaleY,g,v),h=p=null,function(_){for(var x=-1,w=v.length,S;++x<w;)g[(S=v[x]).i]=S.x(_);return g.join("")}}}var dD=AE(cD,"px, ","px)","deg)"),fD=AE(uD,", ",")",")"),hD=1e-12;function sw(t){return((t=Math.exp(t))+1/t)/2}function mD(t){return((t=Math.exp(t))-1/t)/2}function pD(t){return((t=Math.exp(2*t))-1)/(t+1)}const ld=(function t(e,n,s){function a(l,c){var d=l[0],f=l[1],h=l[2],p=c[0],g=c[1],v=c[2],_=p-d,x=g-f,w=_*_+x*x,S,A;if(w<hD)A=Math.log(v/h)/e,S=function(R){return[d+R*_,f+R*x,h*Math.exp(e*R*A)]};else{var N=Math.sqrt(w),E=(v*v-h*h+s*w)/(2*h*n*N),C=(v*v-h*h-s*w)/(2*v*n*N),O=Math.log(Math.sqrt(E*E+1)-E),k=Math.log(Math.sqrt(C*C+1)-C);A=(k-O)/e,S=function(R){var $=R*A,L=sw(O),X=h/(n*N)*(L*pD(e*$+O)-mD(O));return[d+X*_,f+X*x,h*L/sw(e*$+O)]}}return S.duration=A*1e3*e/Math.SQRT2,S}return a.rho=function(l){var c=Math.max(.001,+l),d=c*c,f=d*d;return t(c,d,f)},a})(Math.SQRT2,2,4);var Pa=0,ll=0,Wo=0,TE=1e3,jd,cl,kd=0,xi=0,tf=0,$l=typeof performance=="object"&&performance.now?performance:Date,NE=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Dg(){return xi||(NE(gD),xi=$l.now()+tf)}function gD(){xi=0}function Md(){this._call=this._time=this._next=null}Md.prototype=OE.prototype={constructor:Md,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?Dg():+n)+(e==null?0:+e),!this._next&&cl!==this&&(cl?cl._next=this:jd=this,cl=this),this._call=t,this._time=n,Fp()},stop:function(){this._call&&(this._call=null,this._time=1/0,Fp())}};function OE(t,e,n){var s=new Md;return s.restart(t,e,n),s}function yD(){Dg(),++Pa;for(var t=jd,e;t;)(e=xi-t._time)>=0&&t._call.call(void 0,e),t=t._next;--Pa}function iw(){xi=(kd=$l.now())+tf,Pa=ll=0;try{yD()}finally{Pa=0,_D(),xi=0}}function vD(){var t=$l.now(),e=t-kd;e>TE&&(tf-=e,kd=t)}function _D(){for(var t,e=jd,n,s=1/0;e;)e._call?(s>e._time&&(s=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:jd=n);cl=t,Fp(s)}function Fp(t){if(!Pa){ll&&(ll=clearTimeout(ll));var e=t-xi;e>24?(t<1/0&&(ll=setTimeout(iw,t-$l.now()-tf)),Wo&&(Wo=clearInterval(Wo))):(Wo||(kd=$l.now(),Wo=setInterval(vD,TE)),Pa=1,NE(iw))}}function aw(t,e,n){var s=new Md;return e=e==null?0:+e,s.restart(a=>{s.stop(),t(a+e)},e,n),s}var bD=Zd("start","end","cancel","interrupt"),wD=[],RE=0,ow=1,Yp=2,cd=3,lw=4,Gp=5,ud=6;function nf(t,e,n,s,a,l){var c=t.__transition;if(!c)t.__transition={};else if(n in c)return;xD(t,n,{name:e,index:s,group:a,on:bD,tween:wD,time:l.time,delay:l.delay,duration:l.duration,ease:l.ease,timer:null,state:RE})}function Ug(t,e){var n=ar(t,e);if(n.state>RE)throw new Error("too late; already scheduled");return n}function br(t,e){var n=ar(t,e);if(n.state>cd)throw new Error("too late; already running");return n}function ar(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function xD(t,e,n){var s=t.__transition,a;s[e]=n,n.timer=OE(l,0,n.time);function l(h){n.state=ow,n.timer.restart(c,n.delay,n.time),n.delay<=h&&c(h-n.delay)}function c(h){var p,g,v,_;if(n.state!==ow)return f();for(p in s)if(_=s[p],_.name===n.name){if(_.state===cd)return aw(c);_.state===lw?(_.state=ud,_.timer.stop(),_.on.call("interrupt",t,t.__data__,_.index,_.group),delete s[p]):+p<e&&(_.state=ud,_.timer.stop(),_.on.call("cancel",t,t.__data__,_.index,_.group),delete s[p])}if(aw(function(){n.state===cd&&(n.state=lw,n.timer.restart(d,n.delay,n.time),d(h))}),n.state=Yp,n.on.call("start",t,t.__data__,n.index,n.group),n.state===Yp){for(n.state=cd,a=new Array(v=n.tween.length),p=0,g=-1;p<v;++p)(_=n.tween[p].value.call(t,t.__data__,n.index,n.group))&&(a[++g]=_);a.length=g+1}}function d(h){for(var p=h<n.duration?n.ease.call(null,h/n.duration):(n.timer.restart(f),n.state=Gp,1),g=-1,v=a.length;++g<v;)a[g].call(t,p);n.state===Gp&&(n.on.call("end",t,t.__data__,n.index,n.group),f())}function f(){n.state=ud,n.timer.stop(),delete s[e];for(var h in s)return;delete t.__transition}}function dd(t,e){var n=t.__transition,s,a,l=!0,c;if(n){e=e==null?null:e+"";for(c in n){if((s=n[c]).name!==e){l=!1;continue}a=s.state>Yp&&s.state<Gp,s.state=ud,s.timer.stop(),s.on.call(a?"interrupt":"cancel",t,t.__data__,s.index,s.group),delete n[c]}l&&delete t.__transition}}function SD(t){return this.each(function(){dd(this,t)})}function ED(t,e){var n,s;return function(){var a=br(this,t),l=a.tween;if(l!==n){s=n=l;for(var c=0,d=s.length;c<d;++c)if(s[c].name===e){s=s.slice(),s.splice(c,1);break}}a.tween=s}}function CD(t,e,n){var s,a;if(typeof n!="function")throw new Error;return function(){var l=br(this,t),c=l.tween;if(c!==s){a=(s=c).slice();for(var d={name:e,value:n},f=0,h=a.length;f<h;++f)if(a[f].name===e){a[f]=d;break}f===h&&a.push(d)}l.tween=a}}function AD(t,e){var n=this._id;if(t+="",arguments.length<2){for(var s=ar(this.node(),n).tween,a=0,l=s.length,c;a<l;++a)if((c=s[a]).name===t)return c.value;return null}return this.each((e==null?ED:CD)(n,t,e))}function $g(t,e,n){var s=t._id;return t.each(function(){var a=br(this,s);(a.value||(a.value={}))[e]=n.apply(this,arguments)}),function(a){return ar(a,s).value[e]}}function jE(t,e){var n;return(typeof e=="number"?pr:e instanceof wi?Rd:(n=wi(e))?(e=n,Rd):EE)(t,e)}function TD(t){return function(){this.removeAttribute(t)}}function ND(t){return function(){this.removeAttributeNS(t.space,t.local)}}function OD(t,e,n){var s,a=n+"",l;return function(){var c=this.getAttribute(t);return c===a?null:c===s?l:l=e(s=c,n)}}function RD(t,e,n){var s,a=n+"",l;return function(){var c=this.getAttributeNS(t.space,t.local);return c===a?null:c===s?l:l=e(s=c,n)}}function jD(t,e,n){var s,a,l;return function(){var c,d=n(this),f;return d==null?void this.removeAttribute(t):(c=this.getAttribute(t),f=d+"",c===f?null:c===s&&f===a?l:(a=f,l=e(s=c,d)))}}function kD(t,e,n){var s,a,l;return function(){var c,d=n(this),f;return d==null?void this.removeAttributeNS(t.space,t.local):(c=this.getAttributeNS(t.space,t.local),f=d+"",c===f?null:c===s&&f===a?l:(a=f,l=e(s=c,d)))}}function MD(t,e){var n=ef(t),s=n==="transform"?fD:jE;return this.attrTween(t,typeof e=="function"?(n.local?kD:jD)(n,s,$g(this,"attr."+t,e)):e==null?(n.local?ND:TD)(n):(n.local?RD:OD)(n,s,e))}function DD(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function UD(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function $D(t,e){var n,s;function a(){var l=e.apply(this,arguments);return l!==s&&(n=(s=l)&&UD(t,l)),n}return a._value=e,a}function ID(t,e){var n,s;function a(){var l=e.apply(this,arguments);return l!==s&&(n=(s=l)&&DD(t,l)),n}return a._value=e,a}function LD(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var s=ef(t);return this.tween(n,(s.local?$D:ID)(s,e))}function zD(t,e){return function(){Ug(this,t).delay=+e.apply(this,arguments)}}function BD(t,e){return e=+e,function(){Ug(this,t).delay=e}}function PD(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?zD:BD)(e,t)):ar(this.node(),e).delay}function qD(t,e){return function(){br(this,t).duration=+e.apply(this,arguments)}}function HD(t,e){return e=+e,function(){br(this,t).duration=e}}function VD(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?qD:HD)(e,t)):ar(this.node(),e).duration}function FD(t,e){if(typeof e!="function")throw new Error;return function(){br(this,t).ease=e}}function YD(t){var e=this._id;return arguments.length?this.each(FD(e,t)):ar(this.node(),e).ease}function GD(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;br(this,t).ease=n}}function XD(t){if(typeof t!="function")throw new Error;return this.each(GD(this._id,t))}function KD(t){typeof t!="function"&&(t=lE(t));for(var e=this._groups,n=e.length,s=new Array(n),a=0;a<n;++a)for(var l=e[a],c=l.length,d=s[a]=[],f,h=0;h<c;++h)(f=l[h])&&t.call(f,f.__data__,h,l)&&d.push(f);return new Qr(s,this._parents,this._name,this._id)}function QD(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,s=e.length,a=n.length,l=Math.min(s,a),c=new Array(s),d=0;d<l;++d)for(var f=e[d],h=n[d],p=f.length,g=c[d]=new Array(p),v,_=0;_<p;++_)(v=f[_]||h[_])&&(g[_]=v);for(;d<s;++d)c[d]=e[d];return new Qr(c,this._parents,this._name,this._id)}function WD(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function JD(t,e,n){var s,a,l=WD(e)?Ug:br;return function(){var c=l(this,t),d=c.on;d!==s&&(a=(s=d).copy()).on(e,n),c.on=a}}function ZD(t,e){var n=this._id;return arguments.length<2?ar(this.node(),n).on.on(t):this.each(JD(n,t,e))}function eU(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function tU(){return this.on("end.remove",eU(this._id))}function nU(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Rg(t));for(var s=this._groups,a=s.length,l=new Array(a),c=0;c<a;++c)for(var d=s[c],f=d.length,h=l[c]=new Array(f),p,g,v=0;v<f;++v)(p=d[v])&&(g=t.call(p,p.__data__,v,d))&&("__data__"in p&&(g.__data__=p.__data__),h[v]=g,nf(h[v],e,n,v,h,ar(p,n)));return new Qr(l,this._parents,e,n)}function rU(t){var e=this._name,n=this._id;typeof t!="function"&&(t=oE(t));for(var s=this._groups,a=s.length,l=[],c=[],d=0;d<a;++d)for(var f=s[d],h=f.length,p,g=0;g<h;++g)if(p=f[g]){for(var v=t.call(p,p.__data__,g,f),_,x=ar(p,n),w=0,S=v.length;w<S;++w)(_=v[w])&&nf(_,e,n,w,v,x);l.push(v),c.push(p)}return new Qr(l,c,e,n)}var sU=Ql.prototype.constructor;function iU(){return new sU(this._groups,this._parents)}function aU(t,e){var n,s,a;return function(){var l=Ba(this,t),c=(this.style.removeProperty(t),Ba(this,t));return l===c?null:l===n&&c===s?a:a=e(n=l,s=c)}}function kE(t){return function(){this.style.removeProperty(t)}}function oU(t,e,n){var s,a=n+"",l;return function(){var c=Ba(this,t);return c===a?null:c===s?l:l=e(s=c,n)}}function lU(t,e,n){var s,a,l;return function(){var c=Ba(this,t),d=n(this),f=d+"";return d==null&&(f=d=(this.style.removeProperty(t),Ba(this,t))),c===f?null:c===s&&f===a?l:(a=f,l=e(s=c,d))}}function cU(t,e){var n,s,a,l="style."+e,c="end."+l,d;return function(){var f=br(this,t),h=f.on,p=f.value[l]==null?d||(d=kE(e)):void 0;(h!==n||a!==p)&&(s=(n=h).copy()).on(c,a=p),f.on=s}}function uU(t,e,n){var s=(t+="")=="transform"?dD:jE;return e==null?this.styleTween(t,aU(t,s)).on("end.style."+t,kE(t)):typeof e=="function"?this.styleTween(t,lU(t,s,$g(this,"style."+t,e))).each(cU(this._id,t)):this.styleTween(t,oU(t,s,e),n).on("end.style."+t,null)}function dU(t,e,n){return function(s){this.style.setProperty(t,e.call(this,s),n)}}function fU(t,e,n){var s,a;function l(){var c=e.apply(this,arguments);return c!==a&&(s=(a=c)&&dU(t,c,n)),s}return l._value=e,l}function hU(t,e,n){var s="style."+(t+="");if(arguments.length<2)return(s=this.tween(s))&&s._value;if(e==null)return this.tween(s,null);if(typeof e!="function")throw new Error;return this.tween(s,fU(t,e,n??""))}function mU(t){return function(){this.textContent=t}}function pU(t){return function(){var e=t(this);this.textContent=e??""}}function gU(t){return this.tween("text",typeof t=="function"?pU($g(this,"text",t)):mU(t==null?"":t+""))}function yU(t){return function(e){this.textContent=t.call(this,e)}}function vU(t){var e,n;function s(){var a=t.apply(this,arguments);return a!==n&&(e=(n=a)&&yU(a)),e}return s._value=t,s}function _U(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,vU(t))}function bU(){for(var t=this._name,e=this._id,n=ME(),s=this._groups,a=s.length,l=0;l<a;++l)for(var c=s[l],d=c.length,f,h=0;h<d;++h)if(f=c[h]){var p=ar(f,e);nf(f,t,n,h,c,{time:p.time+p.delay+p.duration,delay:0,duration:p.duration,ease:p.ease})}return new Qr(s,this._parents,t,n)}function wU(){var t,e,n=this,s=n._id,a=n.size();return new Promise(function(l,c){var d={value:c},f={value:function(){--a===0&&l()}};n.each(function(){var h=br(this,s),p=h.on;p!==t&&(e=(t=p).copy(),e._.cancel.push(d),e._.interrupt.push(d),e._.end.push(f)),h.on=e}),a===0&&l()})}var xU=0;function Qr(t,e,n,s){this._groups=t,this._parents=e,this._name=n,this._id=s}function ME(){return++xU}var Pr=Ql.prototype;Qr.prototype={constructor:Qr,select:nU,selectAll:rU,selectChild:Pr.selectChild,selectChildren:Pr.selectChildren,filter:KD,merge:QD,selection:iU,transition:bU,call:Pr.call,nodes:Pr.nodes,node:Pr.node,size:Pr.size,empty:Pr.empty,each:Pr.each,on:ZD,attr:MD,attrTween:LD,style:uU,styleTween:hU,text:gU,textTween:_U,remove:tU,tween:AD,delay:PD,duration:VD,ease:YD,easeVarying:XD,end:wU,[Symbol.iterator]:Pr[Symbol.iterator]};function SU(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var EU={time:null,delay:0,duration:250,ease:SU};function CU(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function AU(t){var e,n;t instanceof Qr?(e=t._id,t=t._name):(e=ME(),(n=EU).time=Dg(),t=t==null?null:t+"");for(var s=this._groups,a=s.length,l=0;l<a;++l)for(var c=s[l],d=c.length,f,h=0;h<d;++h)(f=c[h])&&nf(f,t,e,h,c,n||CU(f,e));return new Qr(s,this._parents,t,e)}Ql.prototype.interrupt=SD;Ql.prototype.transition=AU;const Vu=t=>()=>t;function TU(t,{sourceEvent:e,target:n,transform:s,dispatch:a}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:s,enumerable:!0,configurable:!0},_:{value:a}})}function Gr(t,e,n){this.k=t,this.x=e,this.y=n}Gr.prototype={constructor:Gr,scale:function(t){return t===1?this:new Gr(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new Gr(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var rf=new Gr(1,0,0);DE.prototype=Gr.prototype;function DE(t){for(;!t.__zoom;)if(!(t=t.parentNode))return rf;return t.__zoom}function ip(t){t.stopImmediatePropagation()}function Jo(t){t.preventDefault(),t.stopImmediatePropagation()}function NU(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function OU(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function cw(){return this.__zoom||rf}function RU(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function jU(){return navigator.maxTouchPoints||"ontouchstart"in this}function kU(t,e,n){var s=t.invertX(e[0][0])-n[0][0],a=t.invertX(e[1][0])-n[1][0],l=t.invertY(e[0][1])-n[0][1],c=t.invertY(e[1][1])-n[1][1];return t.translate(a>s?(s+a)/2:Math.min(0,s)||Math.max(0,a),c>l?(l+c)/2:Math.min(0,l)||Math.max(0,c))}function UE(){var t=NU,e=OU,n=kU,s=RU,a=jU,l=[0,1/0],c=[[-1/0,-1/0],[1/0,1/0]],d=250,f=ld,h=Zd("start","zoom","end"),p,g,v,_=500,x=150,w=0,S=10;function A(I){I.property("__zoom",cw).on("wheel.zoom",$,{passive:!1}).on("mousedown.zoom",L).on("dblclick.zoom",X).filter(a).on("touchstart.zoom",F).on("touchmove.zoom",H).on("touchend.zoom touchcancel.zoom",W).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}A.transform=function(I,V,U,z){var q=I.selection?I.selection():I;q.property("__zoom",cw),I!==q?O(I,V,U,z):q.interrupt().each(function(){k(this,arguments).event(z).start().zoom(null,typeof V=="function"?V.apply(this,arguments):V).end()})},A.scaleBy=function(I,V,U,z){A.scaleTo(I,function(){var q=this.__zoom.k,B=typeof V=="function"?V.apply(this,arguments):V;return q*B},U,z)},A.scaleTo=function(I,V,U,z){A.transform(I,function(){var q=e.apply(this,arguments),B=this.__zoom,G=U==null?C(q):typeof U=="function"?U.apply(this,arguments):U,D=B.invert(G),P=typeof V=="function"?V.apply(this,arguments):V;return n(E(N(B,P),G,D),q,c)},U,z)},A.translateBy=function(I,V,U,z){A.transform(I,function(){return n(this.__zoom.translate(typeof V=="function"?V.apply(this,arguments):V,typeof U=="function"?U.apply(this,arguments):U),e.apply(this,arguments),c)},null,z)},A.translateTo=function(I,V,U,z,q){A.transform(I,function(){var B=e.apply(this,arguments),G=this.__zoom,D=z==null?C(B):typeof z=="function"?z.apply(this,arguments):z;return n(rf.translate(D[0],D[1]).scale(G.k).translate(typeof V=="function"?-V.apply(this,arguments):-V,typeof U=="function"?-U.apply(this,arguments):-U),B,c)},z,q)};function N(I,V){return V=Math.max(l[0],Math.min(l[1],V)),V===I.k?I:new Gr(V,I.x,I.y)}function E(I,V,U){var z=V[0]-U[0]*I.k,q=V[1]-U[1]*I.k;return z===I.x&&q===I.y?I:new Gr(I.k,z,q)}function C(I){return[(+I[0][0]+ +I[1][0])/2,(+I[0][1]+ +I[1][1])/2]}function O(I,V,U,z){I.on("start.zoom",function(){k(this,arguments).event(z).start()}).on("interrupt.zoom end.zoom",function(){k(this,arguments).event(z).end()}).tween("zoom",function(){var q=this,B=arguments,G=k(q,B).event(z),D=e.apply(q,B),P=U==null?C(D):typeof U=="function"?U.apply(q,B):U,Z=Math.max(D[1][0]-D[0][0],D[1][1]-D[0][1]),K=q.__zoom,re=typeof V=="function"?V.apply(q,B):V,ee=f(K.invert(P).concat(Z/K.k),re.invert(P).concat(Z/re.k));return function(oe){if(oe===1)oe=re;else{var ce=ee(oe),he=Z/ce[2];oe=new Gr(he,P[0]-ce[0]*he,P[1]-ce[1]*he)}G.zoom(null,oe)}})}function k(I,V,U){return!U&&I.__zooming||new R(I,V)}function R(I,V){this.that=I,this.args=V,this.active=0,this.sourceEvent=null,this.extent=e.apply(I,V),this.taps=0}R.prototype={event:function(I){return I&&(this.sourceEvent=I),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(I,V){return this.mouse&&I!=="mouse"&&(this.mouse[1]=V.invert(this.mouse[0])),this.touch0&&I!=="touch"&&(this.touch0[1]=V.invert(this.touch0[0])),this.touch1&&I!=="touch"&&(this.touch1[1]=V.invert(this.touch1[0])),this.that.__zoom=V,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(I){var V=kn(this.that).datum();h.call(I,this.that,new TU(I,{sourceEvent:this.sourceEvent,target:A,transform:this.that.__zoom,dispatch:h}),V)}};function $(I,...V){if(!t.apply(this,arguments))return;var U=k(this,V).event(I),z=this.__zoom,q=Math.max(l[0],Math.min(l[1],z.k*Math.pow(2,s.apply(this,arguments)))),B=tr(I);if(U.wheel)(U.mouse[0][0]!==B[0]||U.mouse[0][1]!==B[1])&&(U.mouse[1]=z.invert(U.mouse[0]=B)),clearTimeout(U.wheel);else{if(z.k===q)return;U.mouse=[B,z.invert(B)],dd(this),U.start()}Jo(I),U.wheel=setTimeout(G,x),U.zoom("mouse",n(E(N(z,q),U.mouse[0],U.mouse[1]),U.extent,c));function G(){U.wheel=null,U.end()}}function L(I,...V){if(v||!t.apply(this,arguments))return;var U=I.currentTarget,z=k(this,V,!0).event(I),q=kn(I.view).on("mousemove.zoom",P,!0).on("mouseup.zoom",Z,!0),B=tr(I,U),G=I.clientX,D=I.clientY;vE(I.view),ip(I),z.mouse=[B,this.__zoom.invert(B)],dd(this),z.start();function P(K){if(Jo(K),!z.moved){var re=K.clientX-G,ee=K.clientY-D;z.moved=re*re+ee*ee>w}z.event(K).zoom("mouse",n(E(z.that.__zoom,z.mouse[0]=tr(K,U),z.mouse[1]),z.extent,c))}function Z(K){q.on("mousemove.zoom mouseup.zoom",null),_E(K.view,z.moved),Jo(K),z.event(K).end()}}function X(I,...V){if(t.apply(this,arguments)){var U=this.__zoom,z=tr(I.changedTouches?I.changedTouches[0]:I,this),q=U.invert(z),B=U.k*(I.shiftKey?.5:2),G=n(E(N(U,B),z,q),e.apply(this,V),c);Jo(I),d>0?kn(this).transition().duration(d).call(O,G,z,I):kn(this).call(A.transform,G,z,I)}}function F(I,...V){if(t.apply(this,arguments)){var U=I.touches,z=U.length,q=k(this,V,I.changedTouches.length===z).event(I),B,G,D,P;for(ip(I),G=0;G<z;++G)D=U[G],P=tr(D,this),P=[P,this.__zoom.invert(P),D.identifier],q.touch0?!q.touch1&&q.touch0[2]!==P[2]&&(q.touch1=P,q.taps=0):(q.touch0=P,B=!0,q.taps=1+!!p);p&&(p=clearTimeout(p)),B&&(q.taps<2&&(g=P[0],p=setTimeout(function(){p=null},_)),dd(this),q.start())}}function H(I,...V){if(this.__zooming){var U=k(this,V).event(I),z=I.changedTouches,q=z.length,B,G,D,P;for(Jo(I),B=0;B<q;++B)G=z[B],D=tr(G,this),U.touch0&&U.touch0[2]===G.identifier?U.touch0[0]=D:U.touch1&&U.touch1[2]===G.identifier&&(U.touch1[0]=D);if(G=U.that.__zoom,U.touch1){var Z=U.touch0[0],K=U.touch0[1],re=U.touch1[0],ee=U.touch1[1],oe=(oe=re[0]-Z[0])*oe+(oe=re[1]-Z[1])*oe,ce=(ce=ee[0]-K[0])*ce+(ce=ee[1]-K[1])*ce;G=N(G,Math.sqrt(oe/ce)),D=[(Z[0]+re[0])/2,(Z[1]+re[1])/2],P=[(K[0]+ee[0])/2,(K[1]+ee[1])/2]}else if(U.touch0)D=U.touch0[0],P=U.touch0[1];else return;U.zoom("touch",n(E(G,D,P),U.extent,c))}}function W(I,...V){if(this.__zooming){var U=k(this,V).event(I),z=I.changedTouches,q=z.length,B,G;for(ip(I),v&&clearTimeout(v),v=setTimeout(function(){v=null},_),B=0;B<q;++B)G=z[B],U.touch0&&U.touch0[2]===G.identifier?delete U.touch0:U.touch1&&U.touch1[2]===G.identifier&&delete U.touch1;if(U.touch1&&!U.touch0&&(U.touch0=U.touch1,delete U.touch1),U.touch0)U.touch0[1]=this.__zoom.invert(U.touch0[0]);else if(U.end(),U.taps===2&&(G=tr(G,this),Math.hypot(g[0]-G[0],g[1]-G[1])<S)){var D=kn(this).on("dblclick.zoom");D&&D.apply(this,arguments)}}}return A.wheelDelta=function(I){return arguments.length?(s=typeof I=="function"?I:Vu(+I),A):s},A.filter=function(I){return arguments.length?(t=typeof I=="function"?I:Vu(!!I),A):t},A.touchable=function(I){return arguments.length?(a=typeof I=="function"?I:Vu(!!I),A):a},A.extent=function(I){return arguments.length?(e=typeof I=="function"?I:Vu([[+I[0][0],+I[0][1]],[+I[1][0],+I[1][1]]]),A):e},A.scaleExtent=function(I){return arguments.length?(l[0]=+I[0],l[1]=+I[1],A):[l[0],l[1]]},A.translateExtent=function(I){return arguments.length?(c[0][0]=+I[0][0],c[1][0]=+I[1][0],c[0][1]=+I[0][1],c[1][1]=+I[1][1],A):[[c[0][0],c[0][1]],[c[1][0],c[1][1]]]},A.constrain=function(I){return arguments.length?(n=I,A):n},A.duration=function(I){return arguments.length?(d=+I,A):d},A.interpolate=function(I){return arguments.length?(f=I,A):f},A.on=function(){var I=h.on.apply(h,arguments);return I===h?A:I},A.clickDistance=function(I){return arguments.length?(w=(I=+I)*I,A):Math.sqrt(w)},A.tapDistance=function(I){return arguments.length?(S=+I,A):S},A}const ir={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:t=>`Node type "${t}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:t=>`The old edge with id=${t} does not exist.`,error009:t=>`Marker type "${t}" doesn't exist.`,error008:(t,{id:e,sourceHandle:n,targetHandle:s})=>`Couldn't create edge for ${t} handle id: "${t==="source"?n:s}", edge id: ${e}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:t=>`Edge type "${t}" not found. Using fallback type "default".`,error012:t=>`Node with id "${t}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(t="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${t}/dist/style.css' or base.css to make sure everything is working properly.`,error014:()=>"useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID.",error015:()=>"It seems that you are trying to drag a node that is not initialized. Please use onNodesChange as explained in the docs."},Il=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],$E=["Enter"," ","Escape"],IE={"node.a11yDescription.default":"Press enter or space to select a node. Press delete to remove it and escape to cancel.","node.a11yDescription.keyboardDisabled":"Press enter or space to select a node. You can then use the arrow keys to move the node around. Press delete to remove it and escape to cancel.","node.a11yDescription.ariaLiveMessage":({direction:t,x:e,y:n})=>`Moved selected node ${t}. New position, x: ${e}, y: ${n}`,"edge.a11yDescription.default":"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel.","controls.ariaLabel":"Control Panel","controls.zoomIn.ariaLabel":"Zoom In","controls.zoomOut.ariaLabel":"Zoom Out","controls.fitView.ariaLabel":"Fit View","controls.interactive.ariaLabel":"Toggle Interactivity","minimap.ariaLabel":"Mini Map","handle.ariaLabel":"Handle"};var qa;(function(t){t.Strict="strict",t.Loose="loose"})(qa||(qa={}));var bi;(function(t){t.Free="free",t.Vertical="vertical",t.Horizontal="horizontal"})(bi||(bi={}));var Ll;(function(t){t.Partial="partial",t.Full="full"})(Ll||(Ll={}));const LE={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null,pointer:null};var Us;(function(t){t.Bezier="default",t.Straight="straight",t.Step="step",t.SmoothStep="smoothstep",t.SimpleBezier="simplebezier"})(Us||(Us={}));var Dd;(function(t){t.Arrow="arrow",t.ArrowClosed="arrowclosed"})(Dd||(Dd={}));var Se;(function(t){t.Left="left",t.Top="top",t.Right="right",t.Bottom="bottom"})(Se||(Se={}));const uw={[Se.Left]:Se.Right,[Se.Right]:Se.Left,[Se.Top]:Se.Bottom,[Se.Bottom]:Se.Top};function MU(t,e){if(!t&&!e)return!0;if(!t||!e||t.size!==e.size)return!1;if(!t.size&&!e.size)return!0;for(const n of t.keys())if(!e.has(n))return!1;return!0}function dw(t,e,n){if(!n)return;const s=[];t.forEach((a,l)=>{e?.has(l)||s.push(a)}),s.length&&n(s)}function zE(t){return t===null?null:t?"valid":"invalid"}const BE=t=>"id"in t&&"source"in t&&"target"in t,DU=t=>"id"in t&&"position"in t&&!("source"in t)&&!("target"in t),Ig=t=>"id"in t&&"internals"in t&&!("source"in t)&&!("target"in t),Jl=(t,e=[0,0])=>{const{width:n,height:s}=Jr(t),a=t.origin??e,l=n*a[0],c=s*a[1];return{x:t.position.x-l,y:t.position.y-c}},UU=(t,e={nodeOrigin:[0,0]})=>{if(t.length===0)return{x:0,y:0,width:0,height:0};const n=t.reduce((s,a)=>{const l=typeof a=="string";let c=!e.nodeLookup&&!l?a:void 0;e.nodeLookup&&(c=l?e.nodeLookup.get(a):Ig(a)?a:e.nodeLookup.get(a.id));const d=c?Ud(c,e.nodeOrigin):{x:0,y:0,x2:0,y2:0};return sf(s,d)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return af(n)},Zl=(t,e={})=>{let n={x:1/0,y:1/0,x2:-1/0,y2:-1/0},s=!1;return t.forEach(a=>{(e.filter===void 0||e.filter(a))&&(n=sf(n,Ud(a)),s=!0)}),s?af(n):{x:0,y:0,width:0,height:0}},Lg=(t,e,[n,s,a]=[0,0,1],l=!1,c=!1)=>{const d={...tc(e,[n,s,a]),width:e.width/a,height:e.height/a},f=[];for(const h of t.values()){const{measured:p,selectable:g=!0,hidden:v=!1}=h;if(c&&!g||v)continue;const _=p.width??h.width??h.initialWidth??null,x=p.height??h.height??h.initialHeight??null,w=zl(d,Va(h)),S=(_??0)*(x??0),A=l&&w>0;(!h.internals.handleBounds||A||w>=S||h.dragging)&&f.push(h)}return f},$U=(t,e)=>{const n=new Set;return t.forEach(s=>{n.add(s.id)}),e.filter(s=>n.has(s.source)||n.has(s.target))};function IU(t,e){const n=new Map,s=e?.nodes?new Set(e.nodes.map(a=>a.id)):null;return t.forEach(a=>{a.measured.width&&a.measured.height&&(e?.includeHiddenNodes||!a.hidden)&&(!s||s.has(a.id))&&n.set(a.id,a)}),n}async function LU({nodes:t,width:e,height:n,panZoom:s,minZoom:a,maxZoom:l},c){if(t.size===0)return Promise.resolve(!0);const d=IU(t,c),f=Zl(d),h=zg(f,e,n,c?.minZoom??a,c?.maxZoom??l,c?.padding??.1);return await s.setViewport(h,{duration:c?.duration,ease:c?.ease,interpolate:c?.interpolate}),Promise.resolve(!0)}function PE({nodeId:t,nextPosition:e,nodeLookup:n,nodeOrigin:s=[0,0],nodeExtent:a,onError:l}){const c=n.get(t),d=c.parentId?n.get(c.parentId):void 0,{x:f,y:h}=d?d.internals.positionAbsolute:{x:0,y:0},p=c.origin??s;let g=c.extent||a;if(c.extent==="parent"&&!c.expandParent)if(!d)l?.("005",ir.error005());else{const _=d.measured.width,x=d.measured.height;_&&x&&(g=[[f,h],[f+_,h+x]])}else d&&Fa(c.extent)&&(g=[[c.extent[0][0]+f,c.extent[0][1]+h],[c.extent[1][0]+f,c.extent[1][1]+h]]);const v=Fa(g)?Si(e,g,c.measured):e;return(c.measured.width===void 0||c.measured.height===void 0)&&l?.("015",ir.error015()),{position:{x:v.x-f+(c.measured.width??0)*p[0],y:v.y-h+(c.measured.height??0)*p[1]},positionAbsolute:v}}async function zU({nodesToRemove:t=[],edgesToRemove:e=[],nodes:n,edges:s,onBeforeDelete:a}){const l=new Set(t.map(v=>v.id)),c=[];for(const v of n){if(v.deletable===!1)continue;const _=l.has(v.id),x=!_&&v.parentId&&c.find(w=>w.id===v.parentId);(_||x)&&c.push(v)}const d=new Set(e.map(v=>v.id)),f=s.filter(v=>v.deletable!==!1),p=$U(c,f);for(const v of f)d.has(v.id)&&!p.find(x=>x.id===v.id)&&p.push(v);if(!a)return{edges:p,nodes:c};const g=await a({nodes:c,edges:p});return typeof g=="boolean"?g?{edges:p,nodes:c}:{edges:[],nodes:[]}:g}const Ha=(t,e=0,n=1)=>Math.min(Math.max(t,e),n),Si=(t={x:0,y:0},e,n)=>({x:Ha(t.x,e[0][0],e[1][0]-(n?.width??0)),y:Ha(t.y,e[0][1],e[1][1]-(n?.height??0))});function qE(t,e,n){const{width:s,height:a}=Jr(n),{x:l,y:c}=n.internals.positionAbsolute;return Si(t,[[l,c],[l+s,c+a]],e)}const fw=(t,e,n)=>t<e?Ha(Math.abs(t-e),1,e)/e:t>n?-Ha(Math.abs(t-n),1,e)/e:0,HE=(t,e,n=15,s=40)=>{const a=fw(t.x,s,e.width-s)*n,l=fw(t.y,s,e.height-s)*n;return[a,l]},sf=(t,e)=>({x:Math.min(t.x,e.x),y:Math.min(t.y,e.y),x2:Math.max(t.x2,e.x2),y2:Math.max(t.y2,e.y2)}),Xp=({x:t,y:e,width:n,height:s})=>({x:t,y:e,x2:t+n,y2:e+s}),af=({x:t,y:e,x2:n,y2:s})=>({x:t,y:e,width:n-t,height:s-e}),Va=(t,e=[0,0])=>{const{x:n,y:s}=Ig(t)?t.internals.positionAbsolute:Jl(t,e);return{x:n,y:s,width:t.measured?.width??t.width??t.initialWidth??0,height:t.measured?.height??t.height??t.initialHeight??0}},Ud=(t,e=[0,0])=>{const{x:n,y:s}=Ig(t)?t.internals.positionAbsolute:Jl(t,e);return{x:n,y:s,x2:n+(t.measured?.width??t.width??t.initialWidth??0),y2:s+(t.measured?.height??t.height??t.initialHeight??0)}},VE=(t,e)=>af(sf(Xp(t),Xp(e))),zl=(t,e)=>{const n=Math.max(0,Math.min(t.x+t.width,e.x+e.width)-Math.max(t.x,e.x)),s=Math.max(0,Math.min(t.y+t.height,e.y+e.height)-Math.max(t.y,e.y));return Math.ceil(n*s)},hw=t=>rr(t.width)&&rr(t.height)&&rr(t.x)&&rr(t.y),rr=t=>!isNaN(t)&&isFinite(t),BU=(t,e)=>{},ec=(t,e=[1,1])=>({x:e[0]*Math.round(t.x/e[0]),y:e[1]*Math.round(t.y/e[1])}),tc=({x:t,y:e},[n,s,a],l=!1,c=[1,1])=>{const d={x:(t-n)/a,y:(e-s)/a};return l?ec(d,c):d},$d=({x:t,y:e},[n,s,a])=>({x:t*a+n,y:e*a+s});function xa(t,e){if(typeof t=="number")return Math.floor((e-e/(1+t))*.5);if(typeof t=="string"&&t.endsWith("px")){const n=parseFloat(t);if(!Number.isNaN(n))return Math.floor(n)}if(typeof t=="string"&&t.endsWith("%")){const n=parseFloat(t);if(!Number.isNaN(n))return Math.floor(e*n*.01)}return console.error(`[React Flow] The padding value "${t}" is invalid. Please provide a number or a string with a valid unit (px or %).`),0}function PU(t,e,n){if(typeof t=="string"||typeof t=="number"){const s=xa(t,n),a=xa(t,e);return{top:s,right:a,bottom:s,left:a,x:a*2,y:s*2}}if(typeof t=="object"){const s=xa(t.top??t.y??0,n),a=xa(t.bottom??t.y??0,n),l=xa(t.left??t.x??0,e),c=xa(t.right??t.x??0,e);return{top:s,right:c,bottom:a,left:l,x:l+c,y:s+a}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}function qU(t,e,n,s,a,l){const{x:c,y:d}=$d(t,[e,n,s]),{x:f,y:h}=$d({x:t.x+t.width,y:t.y+t.height},[e,n,s]),p=a-f,g=l-h;return{left:Math.floor(c),top:Math.floor(d),right:Math.floor(p),bottom:Math.floor(g)}}const zg=(t,e,n,s,a,l)=>{const c=PU(l,e,n),d=(e-c.x)/t.width,f=(n-c.y)/t.height,h=Math.min(d,f),p=Ha(h,s,a),g=t.x+t.width/2,v=t.y+t.height/2,_=e/2-g*p,x=n/2-v*p,w=qU(t,_,x,p,e,n),S={left:Math.min(w.left-c.left,0),top:Math.min(w.top-c.top,0),right:Math.min(w.right-c.right,0),bottom:Math.min(w.bottom-c.bottom,0)};return{x:_-S.left+S.right,y:x-S.top+S.bottom,zoom:p}},Bl=()=>typeof navigator<"u"&&navigator?.userAgent?.indexOf("Mac")>=0;function Fa(t){return t!=null&&t!=="parent"}function Jr(t){return{width:t.measured?.width??t.width??t.initialWidth??0,height:t.measured?.height??t.height??t.initialHeight??0}}function FE(t){return(t.measured?.width??t.width??t.initialWidth)!==void 0&&(t.measured?.height??t.height??t.initialHeight)!==void 0}function YE(t,e={width:0,height:0},n,s,a){const l={...t},c=s.get(n);if(c){const d=c.origin||a;l.x+=c.internals.positionAbsolute.x-(e.width??0)*d[0],l.y+=c.internals.positionAbsolute.y-(e.height??0)*d[1]}return l}function mw(t,e){if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0}function HU(){let t,e;return{promise:new Promise((s,a)=>{t=s,e=a}),resolve:t,reject:e}}function VU(t){return{...IE,...t||{}}}function El(t,{snapGrid:e=[0,0],snapToGrid:n=!1,transform:s,containerBounds:a}){const{x:l,y:c}=sr(t),d=tc({x:l-(a?.left??0),y:c-(a?.top??0)},s),{x:f,y:h}=n?ec(d,e):d;return{xSnapped:f,ySnapped:h,...d}}const Bg=t=>({width:t.offsetWidth,height:t.offsetHeight}),GE=t=>t?.getRootNode?.()||window?.document,FU=["INPUT","SELECT","TEXTAREA"];function XE(t){const e=t.composedPath?.()?.[0]||t.target;return e?.nodeType!==1?!1:FU.includes(e.nodeName)||e.hasAttribute("contenteditable")||!!e.closest(".nokey")}const KE=t=>"clientX"in t,sr=(t,e)=>{const n=KE(t),s=n?t.clientX:t.touches?.[0].clientX,a=n?t.clientY:t.touches?.[0].clientY;return{x:s-(e?.left??0),y:a-(e?.top??0)}},pw=(t,e,n,s,a)=>{const l=e.querySelectorAll(`.${t}`);return!l||!l.length?null:Array.from(l).map(c=>{const d=c.getBoundingClientRect();return{id:c.getAttribute("data-handleid"),type:t,nodeId:a,position:c.getAttribute("data-handlepos"),x:(d.left-n.left)/s,y:(d.top-n.top)/s,...Bg(c)}})};function QE({sourceX:t,sourceY:e,targetX:n,targetY:s,sourceControlX:a,sourceControlY:l,targetControlX:c,targetControlY:d}){const f=t*.125+a*.375+c*.375+n*.125,h=e*.125+l*.375+d*.375+s*.125,p=Math.abs(f-t),g=Math.abs(h-e);return[f,h,p,g]}function Fu(t,e){return t>=0?.5*t:e*25*Math.sqrt(-t)}function gw({pos:t,x1:e,y1:n,x2:s,y2:a,c:l}){switch(t){case Se.Left:return[e-Fu(e-s,l),n];case Se.Right:return[e+Fu(s-e,l),n];case Se.Top:return[e,n-Fu(n-a,l)];case Se.Bottom:return[e,n+Fu(a-n,l)]}}function Pg({sourceX:t,sourceY:e,sourcePosition:n=Se.Bottom,targetX:s,targetY:a,targetPosition:l=Se.Top,curvature:c=.25}){const[d,f]=gw({pos:n,x1:t,y1:e,x2:s,y2:a,c}),[h,p]=gw({pos:l,x1:s,y1:a,x2:t,y2:e,c}),[g,v,_,x]=QE({sourceX:t,sourceY:e,targetX:s,targetY:a,sourceControlX:d,sourceControlY:f,targetControlX:h,targetControlY:p});return[`M${t},${e} C${d},${f} ${h},${p} ${s},${a}`,g,v,_,x]}function WE({sourceX:t,sourceY:e,targetX:n,targetY:s}){const a=Math.abs(n-t)/2,l=n<t?n+a:n-a,c=Math.abs(s-e)/2,d=s<e?s+c:s-c;return[l,d,a,c]}function YU({sourceNode:t,targetNode:e,selected:n=!1,zIndex:s,elevateOnSelect:a=!1}){if(s!==void 0)return s;const l=a&&n?1e3:0,c=Math.max(t.parentId||a&&t.selected?t.internals.z:0,e.parentId||a&&e.selected?e.internals.z:0);return l+c}function GU({sourceNode:t,targetNode:e,width:n,height:s,transform:a}){const l=sf(Ud(t),Ud(e));l.x===l.x2&&(l.x2+=1),l.y===l.y2&&(l.y2+=1);const c={x:-a[0]/a[2],y:-a[1]/a[2],width:n/a[2],height:s/a[2]};return zl(c,af(l))>0}const XU=({source:t,sourceHandle:e,target:n,targetHandle:s})=>`xy-edge__${t}${e||""}-${n}${s||""}`,KU=(t,e)=>e.some(n=>n.source===t.source&&n.target===t.target&&(n.sourceHandle===t.sourceHandle||!n.sourceHandle&&!t.sourceHandle)&&(n.targetHandle===t.targetHandle||!n.targetHandle&&!t.targetHandle)),JE=(t,e)=>{if(!t.source||!t.target)return e;let n;return BE(t)?n={...t}:n={...t,id:XU(t)},KU(n,e)?e:(n.sourceHandle===null&&delete n.sourceHandle,n.targetHandle===null&&delete n.targetHandle,e.concat(n))};function ZE({sourceX:t,sourceY:e,targetX:n,targetY:s}){const[a,l,c,d]=WE({sourceX:t,sourceY:e,targetX:n,targetY:s});return[`M ${t},${e}L ${n},${s}`,a,l,c,d]}const yw={[Se.Left]:{x:-1,y:0},[Se.Right]:{x:1,y:0},[Se.Top]:{x:0,y:-1},[Se.Bottom]:{x:0,y:1}},QU=({source:t,sourcePosition:e=Se.Bottom,target:n})=>e===Se.Left||e===Se.Right?t.x<n.x?{x:1,y:0}:{x:-1,y:0}:t.y<n.y?{x:0,y:1}:{x:0,y:-1},vw=(t,e)=>Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2));function WU({source:t,sourcePosition:e=Se.Bottom,target:n,targetPosition:s=Se.Top,center:a,offset:l,stepPosition:c}){const d=yw[e],f=yw[s],h={x:t.x+d.x*l,y:t.y+d.y*l},p={x:n.x+f.x*l,y:n.y+f.y*l},g=QU({source:h,sourcePosition:e,target:p}),v=g.x!==0?"x":"y",_=g[v];let x=[],w,S;const A={x:0,y:0},N={x:0,y:0},[,,E,C]=WE({sourceX:t.x,sourceY:t.y,targetX:n.x,targetY:n.y});if(d[v]*f[v]===-1){v==="x"?(w=a.x??h.x+(p.x-h.x)*c,S=a.y??(h.y+p.y)/2):(w=a.x??(h.x+p.x)/2,S=a.y??h.y+(p.y-h.y)*c);const k=[{x:w,y:h.y},{x:w,y:p.y}],R=[{x:h.x,y:S},{x:p.x,y:S}];d[v]===_?x=v==="x"?k:R:x=v==="x"?R:k}else{const k=[{x:h.x,y:p.y}],R=[{x:p.x,y:h.y}];if(v==="x"?x=d.x===_?R:k:x=d.y===_?k:R,e===s){const H=Math.abs(t[v]-n[v]);if(H<=l){const W=Math.min(l-1,l-H);d[v]===_?A[v]=(h[v]>t[v]?-1:1)*W:N[v]=(p[v]>n[v]?-1:1)*W}}if(e!==s){const H=v==="x"?"y":"x",W=d[v]===f[H],I=h[H]>p[H],V=h[H]<p[H];(d[v]===1&&(!W&&I||W&&V)||d[v]!==1&&(!W&&V||W&&I))&&(x=v==="x"?k:R)}const $={x:h.x+A.x,y:h.y+A.y},L={x:p.x+N.x,y:p.y+N.y},X=Math.max(Math.abs($.x-x[0].x),Math.abs(L.x-x[0].x)),F=Math.max(Math.abs($.y-x[0].y),Math.abs(L.y-x[0].y));X>=F?(w=($.x+L.x)/2,S=x[0].y):(w=x[0].x,S=($.y+L.y)/2)}return[[t,{x:h.x+A.x,y:h.y+A.y},...x,{x:p.x+N.x,y:p.y+N.y},n],w,S,E,C]}function JU(t,e,n,s){const a=Math.min(vw(t,e)/2,vw(e,n)/2,s),{x:l,y:c}=e;if(t.x===l&&l===n.x||t.y===c&&c===n.y)return`L${l} ${c}`;if(t.y===c){const h=t.x<n.x?-1:1,p=t.y<n.y?1:-1;return`L ${l+a*h},${c}Q ${l},${c} ${l},${c+a*p}`}const d=t.x<n.x?1:-1,f=t.y<n.y?-1:1;return`L ${l},${c+a*f}Q ${l},${c} ${l+a*d},${c}`}function Kp({sourceX:t,sourceY:e,sourcePosition:n=Se.Bottom,targetX:s,targetY:a,targetPosition:l=Se.Top,borderRadius:c=5,centerX:d,centerY:f,offset:h=20,stepPosition:p=.5}){const[g,v,_,x,w]=WU({source:{x:t,y:e},sourcePosition:n,target:{x:s,y:a},targetPosition:l,center:{x:d,y:f},offset:h,stepPosition:p});return[g.reduce((A,N,E)=>{let C="";return E>0&&E<g.length-1?C=JU(g[E-1],N,g[E+1],c):C=`${E===0?"M":"L"}${N.x} ${N.y}`,A+=C,A},""),v,_,x,w]}function _w(t){return t&&!!(t.internals.handleBounds||t.handles?.length)&&!!(t.measured.width||t.width||t.initialWidth)}function ZU(t){const{sourceNode:e,targetNode:n}=t;if(!_w(e)||!_w(n))return null;const s=e.internals.handleBounds||bw(e.handles),a=n.internals.handleBounds||bw(n.handles),l=ww(s?.source??[],t.sourceHandle),c=ww(t.connectionMode===qa.Strict?a?.target??[]:(a?.target??[]).concat(a?.source??[]),t.targetHandle);if(!l||!c)return t.onError?.("008",ir.error008(l?"target":"source",{id:t.id,sourceHandle:t.sourceHandle,targetHandle:t.targetHandle})),null;const d=l?.position||Se.Bottom,f=c?.position||Se.Top,h=Pl(e,l,d),p=Pl(n,c,f);return{sourceX:h.x,sourceY:h.y,targetX:p.x,targetY:p.y,sourcePosition:d,targetPosition:f}}function bw(t){if(!t)return null;const e=[],n=[];for(const s of t)s.width=s.width??1,s.height=s.height??1,s.type==="source"?e.push(s):s.type==="target"&&n.push(s);return{source:e,target:n}}function Pl(t,e,n=Se.Left,s=!1){const a=(e?.x??0)+t.internals.positionAbsolute.x,l=(e?.y??0)+t.internals.positionAbsolute.y,{width:c,height:d}=e??Jr(t);if(s)return{x:a+c/2,y:l+d/2};switch(e?.position??n){case Se.Top:return{x:a+c/2,y:l};case Se.Right:return{x:a+c,y:l+d/2};case Se.Bottom:return{x:a+c/2,y:l+d};case Se.Left:return{x:a,y:l+d/2}}}function ww(t,e){return t&&(e?t.find(n=>n.id===e):t[0])||null}function Qp(t,e){return t?typeof t=="string"?t:`${e?`${e}__`:""}${Object.keys(t).sort().map(s=>`${s}=${t[s]}`).join("&")}`:""}function e3(t,{id:e,defaultColor:n,defaultMarkerStart:s,defaultMarkerEnd:a}){const l=new Set;return t.reduce((c,d)=>([d.markerStart||s,d.markerEnd||a].forEach(f=>{if(f&&typeof f=="object"){const h=Qp(f,e);l.has(h)||(c.push({id:h,color:f.color||n,...f}),l.add(h))}}),c),[]).sort((c,d)=>c.id.localeCompare(d.id))}const e1=1e3,t3=10,qg={nodeOrigin:[0,0],nodeExtent:Il,elevateNodesOnSelect:!0,defaults:{}},n3={...qg,checkEquality:!0};function Hg(t,e){const n={...t};for(const s in e)e[s]!==void 0&&(n[s]=e[s]);return n}function r3(t,e,n){const s=Hg(qg,n);for(const a of t.values())if(a.parentId)Vg(a,t,e,s);else{const l=Jl(a,s.nodeOrigin),c=Fa(a.extent)?a.extent:s.nodeExtent,d=Si(l,c,Jr(a));a.internals.positionAbsolute=d}}function s3(t,e){if(!t.handles)return t.measured?e?.internals.handleBounds:void 0;const n=[],s=[];for(const a of t.handles){const l={id:a.id,width:a.width??1,height:a.height??1,nodeId:t.id,x:a.x,y:a.y,position:a.position,type:a.type};a.type==="source"?n.push(l):a.type==="target"&&s.push(l)}return{source:n,target:s}}function Wp(t,e,n,s){const a=Hg(n3,s);let l={i:-1},c=t.length>0;const d=new Map(e),f=a?.elevateNodesOnSelect?e1:0;e.clear(),n.clear();for(const h of t){let p=d.get(h.id);if(a.checkEquality&&h===p?.internals.userNode)e.set(h.id,p);else{const g=Jl(h,a.nodeOrigin),v=Fa(h.extent)?h.extent:a.nodeExtent,_=Si(g,v,Jr(h));p={...a.defaults,...h,measured:{width:h.measured?.width,height:h.measured?.height},internals:{positionAbsolute:_,handleBounds:s3(h,p),z:t1(h,f),userNode:h}},e.set(h.id,p)}(p.measured===void 0||p.measured.width===void 0||p.measured.height===void 0)&&!p.hidden&&(c=!1),h.parentId&&Vg(p,e,n,s,l)}return c}function i3(t,e){if(!t.parentId)return;const n=e.get(t.parentId);n?n.set(t.id,t):e.set(t.parentId,new Map([[t.id,t]]))}function Vg(t,e,n,s,a){const{elevateNodesOnSelect:l,nodeOrigin:c,nodeExtent:d}=Hg(qg,s),f=t.parentId,h=e.get(f);if(!h){console.warn(`Parent node ${f} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}i3(t,n),a&&!h.parentId&&h.internals.rootParentIndex===void 0&&(h.internals.rootParentIndex=++a.i,h.internals.z=h.internals.z+a.i*t3),a&&h.internals.rootParentIndex!==void 0&&(a.i=h.internals.rootParentIndex);const p=l?e1:0,{x:g,y:v,z:_}=a3(t,h,c,d,p),{positionAbsolute:x}=t.internals,w=g!==x.x||v!==x.y;(w||_!==t.internals.z)&&e.set(t.id,{...t,internals:{...t.internals,positionAbsolute:w?{x:g,y:v}:x,z:_}})}function t1(t,e){return(rr(t.zIndex)?t.zIndex:0)+(t.selected?e:0)}function a3(t,e,n,s,a){const{x:l,y:c}=e.internals.positionAbsolute,d=Jr(t),f=Jl(t,n),h=Fa(t.extent)?Si(f,t.extent,d):f;let p=Si({x:l+h.x,y:c+h.y},s,d);t.extent==="parent"&&(p=qE(p,d,e));const g=t1(t,a),v=e.internals.z??0;return{x:p.x,y:p.y,z:v>=g?v+1:g}}function Fg(t,e,n,s=[0,0]){const a=[],l=new Map;for(const c of t){const d=e.get(c.parentId);if(!d)continue;const f=l.get(c.parentId)?.expandedRect??Va(d),h=VE(f,c.rect);l.set(c.parentId,{expandedRect:h,parent:d})}return l.size>0&&l.forEach(({expandedRect:c,parent:d},f)=>{const h=d.internals.positionAbsolute,p=Jr(d),g=d.origin??s,v=c.x<h.x?Math.round(Math.abs(h.x-c.x)):0,_=c.y<h.y?Math.round(Math.abs(h.y-c.y)):0,x=Math.max(p.width,Math.round(c.width)),w=Math.max(p.height,Math.round(c.height)),S=(x-p.width)*g[0],A=(w-p.height)*g[1];(v>0||_>0||S||A)&&(a.push({id:f,type:"position",position:{x:d.position.x-v+S,y:d.position.y-_+A}}),n.get(f)?.forEach(N=>{t.some(E=>E.id===N.id)||a.push({id:N.id,type:"position",position:{x:N.position.x+v,y:N.position.y+_}})})),(p.width<c.width||p.height<c.height||v||_)&&a.push({id:f,type:"dimensions",setAttributes:!0,dimensions:{width:x+(v?g[0]*v-S:0),height:w+(_?g[1]*_-A:0)}})}),a}function o3(t,e,n,s,a,l){const c=s?.querySelector(".xyflow__viewport");let d=!1;if(!c)return{changes:[],updatedInternals:d};const f=[],h=window.getComputedStyle(c),{m22:p}=new window.DOMMatrixReadOnly(h.transform),g=[];for(const v of t.values()){const _=e.get(v.id);if(!_)continue;if(_.hidden){e.set(_.id,{..._,internals:{..._.internals,handleBounds:void 0}}),d=!0;continue}const x=Bg(v.nodeElement),w=_.measured.width!==x.width||_.measured.height!==x.height;if(!!(x.width&&x.height&&(w||!_.internals.handleBounds||v.force))){const A=v.nodeElement.getBoundingClientRect(),N=Fa(_.extent)?_.extent:l;let{positionAbsolute:E}=_.internals;_.parentId&&_.extent==="parent"?E=qE(E,x,e.get(_.parentId)):N&&(E=Si(E,N,x));const C={..._,measured:x,internals:{..._.internals,positionAbsolute:E,handleBounds:{source:pw("source",v.nodeElement,A,p,_.id),target:pw("target",v.nodeElement,A,p,_.id)}}};e.set(_.id,C),_.parentId&&Vg(C,e,n,{nodeOrigin:a}),d=!0,w&&(f.push({id:_.id,type:"dimensions",dimensions:x}),_.expandParent&&_.parentId&&g.push({id:_.id,parentId:_.parentId,rect:Va(C,a)}))}}if(g.length>0){const v=Fg(g,e,n,a);f.push(...v)}return{changes:f,updatedInternals:d}}async function l3({delta:t,panZoom:e,transform:n,translateExtent:s,width:a,height:l}){if(!e||!t.x&&!t.y)return Promise.resolve(!1);const c=await e.setViewportConstrained({x:n[0]+t.x,y:n[1]+t.y,zoom:n[2]},[[0,0],[a,l]],s),d=!!c&&(c.x!==n[0]||c.y!==n[1]||c.k!==n[2]);return Promise.resolve(d)}function xw(t,e,n,s,a,l){let c=a;const d=s.get(c)||new Map;s.set(c,d.set(n,e)),c=`${a}-${t}`;const f=s.get(c)||new Map;if(s.set(c,f.set(n,e)),l){c=`${a}-${t}-${l}`;const h=s.get(c)||new Map;s.set(c,h.set(n,e))}}function n1(t,e,n){t.clear(),e.clear();for(const s of n){const{source:a,target:l,sourceHandle:c=null,targetHandle:d=null}=s,f={edgeId:s.id,source:a,target:l,sourceHandle:c,targetHandle:d},h=`${a}-${c}--${l}-${d}`,p=`${l}-${d}--${a}-${c}`;xw("source",f,p,t,a,c),xw("target",f,h,t,l,d),e.set(s.id,s)}}function c3(t,e){if(t===null||e===null)return!1;const n=Array.isArray(t)?t:[t],s=Array.isArray(e)?e:[e];if(n.length!==s.length)return!1;for(let a=0;a<n.length;a++)if(n[a].id!==s[a].id||n[a].type!==s[a].type||!Object.is(n[a].data,s[a].data))return!1;return!0}function r1(t,e){if(!t.parentId)return!1;const n=e.get(t.parentId);return n?n.selected?!0:r1(n,e):!1}function Sw(t,e,n){let s=t;do{if(s?.matches?.(e))return!0;if(s===n)return!1;s=s?.parentElement}while(s);return!1}function u3(t,e,n,s){const a=new Map;for(const[l,c]of t)if((c.selected||c.id===s)&&(!c.parentId||!r1(c,t))&&(c.draggable||e&&typeof c.draggable>"u")){const d=t.get(l);d&&a.set(l,{id:l,position:d.position||{x:0,y:0},distance:{x:n.x-d.internals.positionAbsolute.x,y:n.y-d.internals.positionAbsolute.y},extent:d.extent,parentId:d.parentId,origin:d.origin,expandParent:d.expandParent,internals:{positionAbsolute:d.internals.positionAbsolute||{x:0,y:0}},measured:{width:d.measured.width??0,height:d.measured.height??0}})}return a}function ap({nodeId:t,dragItems:e,nodeLookup:n,dragging:s=!0}){const a=[];for(const[c,d]of e){const f=n.get(c)?.internals.userNode;f&&a.push({...f,position:d.position,dragging:s})}if(!t)return[a[0],a];const l=n.get(t)?.internals.userNode;return[l?{...l,position:e.get(t)?.position||l.position,dragging:s}:a[0],a]}function d3({dragItems:t,snapGrid:e,x:n,y:s}){const a=t.values().next().value;if(!a)return null;const l={x:n-a.distance.x,y:s-a.distance.y},c=ec(l,e);return{x:c.x-l.x,y:c.y-l.y}}function f3({onNodeMouseDown:t,getStoreItems:e,onDragStart:n,onDrag:s,onDragStop:a}){let l={x:null,y:null},c=0,d=new Map,f=!1,h={x:0,y:0},p=null,g=!1,v=null,_=!1,x=!1,w=null;function S({noDragClassName:N,handleSelector:E,domNode:C,isSelectable:O,nodeId:k,nodeClickDistance:R=0}){v=kn(C);function $({x:H,y:W}){const{nodeLookup:I,nodeExtent:V,snapGrid:U,snapToGrid:z,nodeOrigin:q,onNodeDrag:B,onSelectionDrag:G,onError:D,updateNodePositions:P}=e();l={x:H,y:W};let Z=!1;const K=d.size>1,re=K&&V?Xp(Zl(d)):null,ee=K&&z?d3({dragItems:d,snapGrid:U,x:H,y:W}):null;for(const[oe,ce]of d){if(!I.has(oe))continue;let he={x:H-ce.distance.x,y:W-ce.distance.y};z&&(he=ee?{x:Math.round(he.x+ee.x),y:Math.round(he.y+ee.y)}:ec(he,U));let ye=null;if(K&&V&&!ce.extent&&re){const{positionAbsolute:Ce}=ce.internals,ze=Ce.x-re.x+V[0][0],me=Ce.x+ce.measured.width-re.x2+V[1][0],ge=Ce.y-re.y+V[0][1],Me=Ce.y+ce.measured.height-re.y2+V[1][1];ye=[[ze,ge],[me,Me]]}const{position:xe,positionAbsolute:ve}=PE({nodeId:oe,nextPosition:he,nodeLookup:I,nodeExtent:ye||V,nodeOrigin:q,onError:D});Z=Z||ce.position.x!==xe.x||ce.position.y!==xe.y,ce.position=xe,ce.internals.positionAbsolute=ve}if(x=x||Z,!!Z&&(P(d,!0),w&&(s||B||!k&&G))){const[oe,ce]=ap({nodeId:k,dragItems:d,nodeLookup:I});s?.(w,d,oe,ce),B?.(w,oe,ce),k||G?.(w,ce)}}async function L(){if(!p)return;const{transform:H,panBy:W,autoPanSpeed:I,autoPanOnNodeDrag:V}=e();if(!V){f=!1,cancelAnimationFrame(c);return}const[U,z]=HE(h,p,I);(U!==0||z!==0)&&(l.x=(l.x??0)-U/H[2],l.y=(l.y??0)-z/H[2],await W({x:U,y:z})&&$(l)),c=requestAnimationFrame(L)}function X(H){const{nodeLookup:W,multiSelectionActive:I,nodesDraggable:V,transform:U,snapGrid:z,snapToGrid:q,selectNodesOnDrag:B,onNodeDragStart:G,onSelectionDragStart:D,unselectNodesAndEdges:P}=e();g=!0,(!B||!O)&&!I&&k&&(W.get(k)?.selected||P()),O&&B&&k&&t?.(k);const Z=El(H.sourceEvent,{transform:U,snapGrid:z,snapToGrid:q,containerBounds:p});if(l=Z,d=u3(W,V,Z,k),d.size>0&&(n||G||!k&&D)){const[K,re]=ap({nodeId:k,dragItems:d,nodeLookup:W});n?.(H.sourceEvent,d,K,re),G?.(H.sourceEvent,K,re),k||D?.(H.sourceEvent,re)}}const F=bE().clickDistance(R).on("start",H=>{const{domNode:W,nodeDragThreshold:I,transform:V,snapGrid:U,snapToGrid:z}=e();p=W?.getBoundingClientRect()||null,_=!1,x=!1,w=H.sourceEvent,I===0&&X(H),l=El(H.sourceEvent,{transform:V,snapGrid:U,snapToGrid:z,containerBounds:p}),h=sr(H.sourceEvent,p)}).on("drag",H=>{const{autoPanOnNodeDrag:W,transform:I,snapGrid:V,snapToGrid:U,nodeDragThreshold:z,nodeLookup:q}=e(),B=El(H.sourceEvent,{transform:I,snapGrid:V,snapToGrid:U,containerBounds:p});if(w=H.sourceEvent,(H.sourceEvent.type==="touchmove"&&H.sourceEvent.touches.length>1||k&&!q.has(k))&&(_=!0),!_){if(!f&&W&&g&&(f=!0,L()),!g){const G=sr(H.sourceEvent,p),D=G.x-h.x,P=G.y-h.y;Math.sqrt(D*D+P*P)>z&&X(H)}(l.x!==B.xSnapped||l.y!==B.ySnapped)&&d&&g&&(h=sr(H.sourceEvent,p),$(B))}}).on("end",H=>{if(!(!g||_)&&(f=!1,g=!1,cancelAnimationFrame(c),d.size>0)){const{nodeLookup:W,updateNodePositions:I,onNodeDragStop:V,onSelectionDragStop:U}=e();if(x&&(I(d,!1),x=!1),a||V||!k&&U){const[z,q]=ap({nodeId:k,dragItems:d,nodeLookup:W,dragging:!1});a?.(H.sourceEvent,d,z,q),V?.(H.sourceEvent,z,q),k||U?.(H.sourceEvent,q)}}}).filter(H=>{const W=H.target;return!H.button&&(!N||!Sw(W,`.${N}`,C))&&(!E||Sw(W,E,C))});v.call(F)}function A(){v?.on(".drag",null)}return{update:S,destroy:A}}function h3(t,e,n){const s=[],a={x:t.x-n,y:t.y-n,width:n*2,height:n*2};for(const l of e.values())zl(a,Va(l))>0&&s.push(l);return s}const m3=250;function p3(t,e,n,s){let a=[],l=1/0;const c=h3(t,n,e+m3);for(const d of c){const f=[...d.internals.handleBounds?.source??[],...d.internals.handleBounds?.target??[]];for(const h of f){if(s.nodeId===h.nodeId&&s.type===h.type&&s.id===h.id)continue;const{x:p,y:g}=Pl(d,h,h.position,!0),v=Math.sqrt(Math.pow(p-t.x,2)+Math.pow(g-t.y,2));v>e||(v<l?(a=[{...h,x:p,y:g}],l=v):v===l&&a.push({...h,x:p,y:g}))}}if(!a.length)return null;if(a.length>1){const d=s.type==="source"?"target":"source";return a.find(f=>f.type===d)??a[0]}return a[0]}function s1(t,e,n,s,a,l=!1){const c=s.get(t);if(!c)return null;const d=a==="strict"?c.internals.handleBounds?.[e]:[...c.internals.handleBounds?.source??[],...c.internals.handleBounds?.target??[]],f=(n?d?.find(h=>h.id===n):d?.[0])??null;return f&&l?{...f,...Pl(c,f,f.position,!0)}:f}function i1(t,e){return t||(e?.classList.contains("target")?"target":e?.classList.contains("source")?"source":null)}function g3(t,e){let n=null;return e?n=!0:t&&!e&&(n=!1),n}const a1=()=>!0;function y3(t,{connectionMode:e,connectionRadius:n,handleId:s,nodeId:a,edgeUpdaterType:l,isTarget:c,domNode:d,nodeLookup:f,lib:h,autoPanOnConnect:p,flowId:g,panBy:v,cancelConnection:_,onConnectStart:x,onConnect:w,onConnectEnd:S,isValidConnection:A=a1,onReconnectEnd:N,updateConnection:E,getTransform:C,getFromHandle:O,autoPanSpeed:k,dragThreshold:R=1,handleDomNode:$}){const L=GE(t.target);let X=0,F;const{x:H,y:W}=sr(t),I=i1(l,$),V=d?.getBoundingClientRect();let U=!1;if(!V||!I)return;const z=s1(a,I,s,f,e);if(!z)return;let q=sr(t,V),B=!1,G=null,D=!1,P=null;function Z(){if(!p||!V)return;const[xe,ve]=HE(q,V,k);v({x:xe,y:ve}),X=requestAnimationFrame(Z)}const K={...z,nodeId:a,type:I,position:z.position},re=f.get(a);let oe={inProgress:!0,isValid:null,from:Pl(re,K,Se.Left,!0),fromHandle:K,fromPosition:K.position,fromNode:re,to:q,toHandle:null,toPosition:uw[K.position],toNode:null,pointer:q};function ce(){U=!0,E(oe),x?.(t,{nodeId:a,handleId:s,handleType:I})}R===0&&ce();function he(xe){if(!U){const{x:me,y:ge}=sr(xe),Me=me-H,Pe=ge-W;if(!(Me*Me+Pe*Pe>R*R))return;ce()}if(!O()||!K){ye(xe);return}const ve=C();q=sr(xe,V),F=p3(tc(q,ve,!1,[1,1]),n,f,K),B||(Z(),B=!0);const Ce=o1(xe,{handle:F,connectionMode:e,fromNodeId:a,fromHandleId:s,fromType:c?"target":"source",isValidConnection:A,doc:L,lib:h,flowId:g,nodeLookup:f});P=Ce.handleDomNode,G=Ce.connection,D=g3(!!F,Ce.isValid);const ze={...oe,isValid:D,to:Ce.toHandle&&D?$d({x:Ce.toHandle.x,y:Ce.toHandle.y},ve):q,toHandle:Ce.toHandle,toPosition:D&&Ce.toHandle?Ce.toHandle.position:uw[K.position],toNode:Ce.toHandle?f.get(Ce.toHandle.nodeId):null,pointer:q};E(ze),oe=ze}function ye(xe){if(!("touches"in xe&&xe.touches.length>0)){if(U){(F||P)&&G&&D&&w?.(G);const{inProgress:ve,...Ce}=oe,ze={...Ce,toPosition:oe.toHandle?oe.toPosition:null};S?.(xe,ze),l&&N?.(xe,ze)}_(),cancelAnimationFrame(X),B=!1,D=!1,G=null,P=null,L.removeEventListener("mousemove",he),L.removeEventListener("mouseup",ye),L.removeEventListener("touchmove",he),L.removeEventListener("touchend",ye)}}L.addEventListener("mousemove",he),L.addEventListener("mouseup",ye),L.addEventListener("touchmove",he),L.addEventListener("touchend",ye)}function o1(t,{handle:e,connectionMode:n,fromNodeId:s,fromHandleId:a,fromType:l,doc:c,lib:d,flowId:f,isValidConnection:h=a1,nodeLookup:p}){const g=l==="target",v=e?c.querySelector(`.${d}-flow__handle[data-id="${f}-${e?.nodeId}-${e?.id}-${e?.type}"]`):null,{x:_,y:x}=sr(t),w=c.elementFromPoint(_,x),S=w?.classList.contains(`${d}-flow__handle`)?w:v,A={handleDomNode:S,isValid:!1,connection:null,toHandle:null};if(S){const N=i1(void 0,S),E=S.getAttribute("data-nodeid"),C=S.getAttribute("data-handleid"),O=S.classList.contains("connectable"),k=S.classList.contains("connectableend");if(!E||!N)return A;const R={source:g?E:s,sourceHandle:g?C:a,target:g?s:E,targetHandle:g?a:C};A.connection=R;const L=O&&k&&(n===qa.Strict?g&&N==="source"||!g&&N==="target":E!==s||C!==a);A.isValid=L&&h(R),A.toHandle=s1(E,N,C,p,n,!0)}return A}const Jp={onPointerDown:y3,isValid:o1};function v3({domNode:t,panZoom:e,getTransform:n,getViewScale:s}){const a=kn(t);function l({translateExtent:d,width:f,height:h,zoomStep:p=1,pannable:g=!0,zoomable:v=!0,inversePan:_=!1}){const x=E=>{if(E.sourceEvent.type!=="wheel"||!e)return;const C=n(),O=E.sourceEvent.ctrlKey&&Bl()?10:1,k=-E.sourceEvent.deltaY*(E.sourceEvent.deltaMode===1?.05:E.sourceEvent.deltaMode?1:.002)*p,R=C[2]*Math.pow(2,k*O);e.scaleTo(R)};let w=[0,0];const S=E=>{(E.sourceEvent.type==="mousedown"||E.sourceEvent.type==="touchstart")&&(w=[E.sourceEvent.clientX??E.sourceEvent.touches[0].clientX,E.sourceEvent.clientY??E.sourceEvent.touches[0].clientY])},A=E=>{const C=n();if(E.sourceEvent.type!=="mousemove"&&E.sourceEvent.type!=="touchmove"||!e)return;const O=[E.sourceEvent.clientX??E.sourceEvent.touches[0].clientX,E.sourceEvent.clientY??E.sourceEvent.touches[0].clientY],k=[O[0]-w[0],O[1]-w[1]];w=O;const R=s()*Math.max(C[2],Math.log(C[2]))*(_?-1:1),$={x:C[0]-k[0]*R,y:C[1]-k[1]*R},L=[[0,0],[f,h]];e.setViewportConstrained({x:$.x,y:$.y,zoom:C[2]},L,d)},N=UE().on("start",S).on("zoom",g?A:null).on("zoom.wheel",v?x:null);a.call(N,{})}function c(){a.on("zoom",null)}return{update:l,destroy:c,pointer:tr}}const of=t=>({x:t.x,y:t.y,zoom:t.k}),op=({x:t,y:e,zoom:n})=>rf.translate(t,e).scale(n),Ma=(t,e)=>t.target.closest(`.${e}`),l1=(t,e)=>e===2&&Array.isArray(t)&&t.includes(2),_3=t=>((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2,lp=(t,e=0,n=_3,s=()=>{})=>{const a=typeof e=="number"&&e>0;return a||s(),a?t.transition().duration(e).ease(n).on("end",s):t},c1=t=>{const e=t.ctrlKey&&Bl()?10:1;return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*e};function b3({zoomPanValues:t,noWheelClassName:e,d3Selection:n,d3Zoom:s,panOnScrollMode:a,panOnScrollSpeed:l,zoomOnPinch:c,onPanZoomStart:d,onPanZoom:f,onPanZoomEnd:h}){return p=>{if(Ma(p,e))return p.ctrlKey&&p.preventDefault(),!1;p.preventDefault(),p.stopImmediatePropagation();const g=n.property("__zoom").k||1;if(p.ctrlKey&&c){const S=tr(p),A=c1(p),N=g*Math.pow(2,A);s.scaleTo(n,N,S,p);return}const v=p.deltaMode===1?20:1;let _=a===bi.Vertical?0:p.deltaX*v,x=a===bi.Horizontal?0:p.deltaY*v;!Bl()&&p.shiftKey&&a!==bi.Vertical&&(_=p.deltaY*v,x=0),s.translateBy(n,-(_/g)*l,-(x/g)*l,{internal:!0});const w=of(n.property("__zoom"));clearTimeout(t.panScrollTimeout),t.isPanScrolling?(f?.(p,w),t.panScrollTimeout=setTimeout(()=>{h?.(p,w),t.isPanScrolling=!1},150)):(t.isPanScrolling=!0,d?.(p,w))}}function w3({noWheelClassName:t,preventScrolling:e,d3ZoomHandler:n}){return function(s,a){const l=s.type==="wheel",c=!e&&l&&!s.ctrlKey,d=Ma(s,t);if(s.ctrlKey&&l&&d&&s.preventDefault(),c||d)return null;s.preventDefault(),n.call(this,s,a)}}function x3({zoomPanValues:t,onDraggingChange:e,onPanZoomStart:n}){return s=>{if(s.sourceEvent?.internal)return;const a=of(s.transform);t.mouseButton=s.sourceEvent?.button||0,t.isZoomingOrPanning=!0,t.prevViewport=a,s.sourceEvent?.type==="mousedown"&&e(!0),n&&n?.(s.sourceEvent,a)}}function S3({zoomPanValues:t,panOnDrag:e,onPaneContextMenu:n,onTransformChange:s,onPanZoom:a}){return l=>{t.usedRightMouseButton=!!(n&&l1(e,t.mouseButton??0)),l.sourceEvent?.sync||s([l.transform.x,l.transform.y,l.transform.k]),a&&!l.sourceEvent?.internal&&a?.(l.sourceEvent,of(l.transform))}}function E3({zoomPanValues:t,panOnDrag:e,panOnScroll:n,onDraggingChange:s,onPanZoomEnd:a,onPaneContextMenu:l}){return c=>{if(!c.sourceEvent?.internal&&(t.isZoomingOrPanning=!1,l&&l1(e,t.mouseButton??0)&&!t.usedRightMouseButton&&c.sourceEvent&&l(c.sourceEvent),t.usedRightMouseButton=!1,s(!1),a)){const d=of(c.transform);t.prevViewport=d,clearTimeout(t.timerId),t.timerId=setTimeout(()=>{a?.(c.sourceEvent,d)},n?150:0)}}}function C3({zoomActivationKeyPressed:t,zoomOnScroll:e,zoomOnPinch:n,panOnDrag:s,panOnScroll:a,zoomOnDoubleClick:l,userSelectionActive:c,noWheelClassName:d,noPanClassName:f,lib:h,connectionInProgress:p}){return g=>{const v=t||e,_=n&&g.ctrlKey,x=g.type==="wheel";if(g.button===1&&g.type==="mousedown"&&(Ma(g,`${h}-flow__node`)||Ma(g,`${h}-flow__edge`)))return!0;if(!s&&!v&&!a&&!l&&!n||c||p&&!x||Ma(g,d)&&x||Ma(g,f)&&(!x||a&&x&&!t)||!n&&g.ctrlKey&&x)return!1;if(!n&&g.type==="touchstart"&&g.touches?.length>1)return g.preventDefault(),!1;if(!v&&!a&&!_&&x||!s&&(g.type==="mousedown"||g.type==="touchstart")||Array.isArray(s)&&!s.includes(g.button)&&g.type==="mousedown")return!1;const w=Array.isArray(s)&&s.includes(g.button)||!g.button||g.button<=1;return(!g.ctrlKey||x)&&w}}function A3({domNode:t,minZoom:e,maxZoom:n,translateExtent:s,viewport:a,onPanZoom:l,onPanZoomStart:c,onPanZoomEnd:d,onDraggingChange:f}){const h={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},p=t.getBoundingClientRect(),g=UE().scaleExtent([e,n]).translateExtent(s),v=kn(t).call(g);N({x:a.x,y:a.y,zoom:Ha(a.zoom,e,n)},[[0,0],[p.width,p.height]],s);const _=v.on("wheel.zoom"),x=v.on("dblclick.zoom");g.wheelDelta(c1);function w(F,H){return v?new Promise(W=>{g?.interpolate(H?.interpolate==="linear"?Sl:ld).transform(lp(v,H?.duration,H?.ease,()=>W(!0)),F)}):Promise.resolve(!1)}function S({noWheelClassName:F,noPanClassName:H,onPaneContextMenu:W,userSelectionActive:I,panOnScroll:V,panOnDrag:U,panOnScrollMode:z,panOnScrollSpeed:q,preventScrolling:B,zoomOnPinch:G,zoomOnScroll:D,zoomOnDoubleClick:P,zoomActivationKeyPressed:Z,lib:K,onTransformChange:re,connectionInProgress:ee,paneClickDistance:oe,selectionOnDrag:ce}){I&&!h.isZoomingOrPanning&&A();const he=V&&!Z&&!I;g.clickDistance(ce?1/0:!rr(oe)||oe<0?0:oe);const ye=he?b3({zoomPanValues:h,noWheelClassName:F,d3Selection:v,d3Zoom:g,panOnScrollMode:z,panOnScrollSpeed:q,zoomOnPinch:G,onPanZoomStart:c,onPanZoom:l,onPanZoomEnd:d}):w3({noWheelClassName:F,preventScrolling:B,d3ZoomHandler:_});if(v.on("wheel.zoom",ye,{passive:!1}),!I){const ve=x3({zoomPanValues:h,onDraggingChange:f,onPanZoomStart:c});g.on("start",ve);const Ce=S3({zoomPanValues:h,panOnDrag:U,onPaneContextMenu:!!W,onPanZoom:l,onTransformChange:re});g.on("zoom",Ce);const ze=E3({zoomPanValues:h,panOnDrag:U,panOnScroll:V,onPaneContextMenu:W,onPanZoomEnd:d,onDraggingChange:f});g.on("end",ze)}const xe=C3({zoomActivationKeyPressed:Z,panOnDrag:U,zoomOnScroll:D,panOnScroll:V,zoomOnDoubleClick:P,zoomOnPinch:G,userSelectionActive:I,noPanClassName:H,noWheelClassName:F,lib:K,connectionInProgress:ee});g.filter(xe),P?v.on("dblclick.zoom",x):v.on("dblclick.zoom",null)}function A(){g.on("zoom",null)}async function N(F,H,W){const I=op(F),V=g?.constrain()(I,H,W);return V&&await w(V),new Promise(U=>U(V))}async function E(F,H){const W=op(F);return await w(W,H),new Promise(I=>I(W))}function C(F){if(v){const H=op(F),W=v.property("__zoom");(W.k!==F.zoom||W.x!==F.x||W.y!==F.y)&&g?.transform(v,H,null,{sync:!0})}}function O(){const F=v?DE(v.node()):{x:0,y:0,k:1};return{x:F.x,y:F.y,zoom:F.k}}function k(F,H){return v?new Promise(W=>{g?.interpolate(H?.interpolate==="linear"?Sl:ld).scaleTo(lp(v,H?.duration,H?.ease,()=>W(!0)),F)}):Promise.resolve(!1)}function R(F,H){return v?new Promise(W=>{g?.interpolate(H?.interpolate==="linear"?Sl:ld).scaleBy(lp(v,H?.duration,H?.ease,()=>W(!0)),F)}):Promise.resolve(!1)}function $(F){g?.scaleExtent(F)}function L(F){g?.translateExtent(F)}function X(F){const H=!rr(F)||F<0?0:F;g?.clickDistance(H)}return{update:S,destroy:A,setViewport:E,setViewportConstrained:N,getViewport:O,scaleTo:k,scaleBy:R,setScaleExtent:$,setTranslateExtent:L,syncViewport:C,setClickDistance:X}}var Ya;(function(t){t.Line="line",t.Handle="handle"})(Ya||(Ya={}));function T3({width:t,prevWidth:e,height:n,prevHeight:s,affectsX:a,affectsY:l}){const c=t-e,d=n-s,f=[c>0?1:c<0?-1:0,d>0?1:d<0?-1:0];return c&&a&&(f[0]=f[0]*-1),d&&l&&(f[1]=f[1]*-1),f}function Ew(t){const e=t.includes("right")||t.includes("left"),n=t.includes("bottom")||t.includes("top"),s=t.includes("left"),a=t.includes("top");return{isHorizontal:e,isVertical:n,affectsX:s,affectsY:a}}function Ns(t,e){return Math.max(0,e-t)}function Os(t,e){return Math.max(0,t-e)}function Yu(t,e,n){return Math.max(0,e-t,t-n)}function Cw(t,e){return t?!e:e}function N3(t,e,n,s,a,l,c,d){let{affectsX:f,affectsY:h}=e;const{isHorizontal:p,isVertical:g}=e,v=p&&g,{xSnapped:_,ySnapped:x}=n,{minWidth:w,maxWidth:S,minHeight:A,maxHeight:N}=s,{x:E,y:C,width:O,height:k,aspectRatio:R}=t;let $=Math.floor(p?_-t.pointerX:0),L=Math.floor(g?x-t.pointerY:0);const X=O+(f?-$:$),F=k+(h?-L:L),H=-l[0]*O,W=-l[1]*k;let I=Yu(X,w,S),V=Yu(F,A,N);if(c){let q=0,B=0;f&&$<0?q=Ns(E+$+H,c[0][0]):!f&&$>0&&(q=Os(E+X+H,c[1][0])),h&&L<0?B=Ns(C+L+W,c[0][1]):!h&&L>0&&(B=Os(C+F+W,c[1][1])),I=Math.max(I,q),V=Math.max(V,B)}if(d){let q=0,B=0;f&&$>0?q=Os(E+$,d[0][0]):!f&&$<0&&(q=Ns(E+X,d[1][0])),h&&L>0?B=Os(C+L,d[0][1]):!h&&L<0&&(B=Ns(C+F,d[1][1])),I=Math.max(I,q),V=Math.max(V,B)}if(a){if(p){const q=Yu(X/R,A,N)*R;if(I=Math.max(I,q),c){let B=0;!f&&!h||f&&!h&&v?B=Os(C+W+X/R,c[1][1])*R:B=Ns(C+W+(f?$:-$)/R,c[0][1])*R,I=Math.max(I,B)}if(d){let B=0;!f&&!h||f&&!h&&v?B=Ns(C+X/R,d[1][1])*R:B=Os(C+(f?$:-$)/R,d[0][1])*R,I=Math.max(I,B)}}if(g){const q=Yu(F*R,w,S)/R;if(V=Math.max(V,q),c){let B=0;!f&&!h||h&&!f&&v?B=Os(E+F*R+H,c[1][0])/R:B=Ns(E+(h?L:-L)*R+H,c[0][0])/R,V=Math.max(V,B)}if(d){let B=0;!f&&!h||h&&!f&&v?B=Ns(E+F*R,d[1][0])/R:B=Os(E+(h?L:-L)*R,d[0][0])/R,V=Math.max(V,B)}}}L=L+(L<0?V:-V),$=$+($<0?I:-I),a&&(v?X>F*R?L=(Cw(f,h)?-$:$)/R:$=(Cw(f,h)?-L:L)*R:p?(L=$/R,h=f):($=L*R,f=h));const U=f?E+$:E,z=h?C+L:C;return{width:O+(f?-$:$),height:k+(h?-L:L),x:l[0]*$*(f?-1:1)+U,y:l[1]*L*(h?-1:1)+z}}const u1={width:0,height:0,x:0,y:0},O3={...u1,pointerX:0,pointerY:0,aspectRatio:1};function R3(t){return[[0,0],[t.measured.width,t.measured.height]]}function j3(t,e,n){const s=e.position.x+t.position.x,a=e.position.y+t.position.y,l=t.measured.width??0,c=t.measured.height??0,d=n[0]*l,f=n[1]*c;return[[s-d,a-f],[s+l-d,a+c-f]]}function k3({domNode:t,nodeId:e,getStoreItems:n,onChange:s,onEnd:a}){const l=kn(t);let c={controlDirection:Ew("bottom-right"),boundaries:{minWidth:0,minHeight:0,maxWidth:Number.MAX_VALUE,maxHeight:Number.MAX_VALUE},resizeDirection:void 0,keepAspectRatio:!1};function d({controlPosition:h,boundaries:p,keepAspectRatio:g,resizeDirection:v,onResizeStart:_,onResize:x,onResizeEnd:w,shouldResize:S}){let A={...u1},N={...O3};c={boundaries:p,resizeDirection:v,keepAspectRatio:g,controlDirection:Ew(h)};let E,C=null,O=[],k,R,$,L=!1;const X=bE().on("start",F=>{const{nodeLookup:H,transform:W,snapGrid:I,snapToGrid:V,nodeOrigin:U,paneDomNode:z}=n();if(E=H.get(e),!E)return;C=z?.getBoundingClientRect()??null;const{xSnapped:q,ySnapped:B}=El(F.sourceEvent,{transform:W,snapGrid:I,snapToGrid:V,containerBounds:C});A={width:E.measured.width??0,height:E.measured.height??0,x:E.position.x??0,y:E.position.y??0},N={...A,pointerX:q,pointerY:B,aspectRatio:A.width/A.height},k=void 0,E.parentId&&(E.extent==="parent"||E.expandParent)&&(k=H.get(E.parentId),R=k&&E.extent==="parent"?R3(k):void 0),O=[],$=void 0;for(const[G,D]of H)if(D.parentId===e&&(O.push({id:G,position:{...D.position},extent:D.extent}),D.extent==="parent"||D.expandParent)){const P=j3(D,E,D.origin??U);$?$=[[Math.min(P[0][0],$[0][0]),Math.min(P[0][1],$[0][1])],[Math.max(P[1][0],$[1][0]),Math.max(P[1][1],$[1][1])]]:$=P}_?.(F,{...A})}).on("drag",F=>{const{transform:H,snapGrid:W,snapToGrid:I,nodeOrigin:V}=n(),U=El(F.sourceEvent,{transform:H,snapGrid:W,snapToGrid:I,containerBounds:C}),z=[];if(!E)return;const{x:q,y:B,width:G,height:D}=A,P={},Z=E.origin??V,{width:K,height:re,x:ee,y:oe}=N3(N,c.controlDirection,U,c.boundaries,c.keepAspectRatio,Z,R,$),ce=K!==G,he=re!==D,ye=ee!==q&&ce,xe=oe!==B&&he;if(!ye&&!xe&&!ce&&!he)return;if((ye||xe||Z[0]===1||Z[1]===1)&&(P.x=ye?ee:A.x,P.y=xe?oe:A.y,A.x=P.x,A.y=P.y,O.length>0)){const me=ee-q,ge=oe-B;for(const Me of O)Me.position={x:Me.position.x-me+Z[0]*(K-G),y:Me.position.y-ge+Z[1]*(re-D)},z.push(Me)}if((ce||he)&&(P.width=ce&&(!c.resizeDirection||c.resizeDirection==="horizontal")?K:A.width,P.height=he&&(!c.resizeDirection||c.resizeDirection==="vertical")?re:A.height,A.width=P.width,A.height=P.height),k&&E.expandParent){const me=Z[0]*(P.width??0);P.x&&P.x<me&&(A.x=me,N.x=N.x-(P.x-me));const ge=Z[1]*(P.height??0);P.y&&P.y<ge&&(A.y=ge,N.y=N.y-(P.y-ge))}const ve=T3({width:A.width,prevWidth:G,height:A.height,prevHeight:D,affectsX:c.controlDirection.affectsX,affectsY:c.controlDirection.affectsY}),Ce={...A,direction:ve};S?.(F,Ce)!==!1&&(L=!0,x?.(F,Ce),s(P,z))}).on("end",F=>{L&&(w?.(F,{...A}),a?.({...A}),L=!1)});l.call(X)}function f(){l.on(".drag",null)}return{update:d,destroy:f}}var cp={exports:{}},up={},dp={exports:{}},fp={};var Aw;function M3(){if(Aw)return fp;Aw=1;var t=Fl();function e(g,v){return g===v&&(g!==0||1/g===1/v)||g!==g&&v!==v}var n=typeof Object.is=="function"?Object.is:e,s=t.useState,a=t.useEffect,l=t.useLayoutEffect,c=t.useDebugValue;function d(g,v){var _=v(),x=s({inst:{value:_,getSnapshot:v}}),w=x[0].inst,S=x[1];return l(function(){w.value=_,w.getSnapshot=v,f(w)&&S({inst:w})},[g,_,v]),a(function(){return f(w)&&S({inst:w}),g(function(){f(w)&&S({inst:w})})},[g]),c(_),_}function f(g){var v=g.getSnapshot;g=g.value;try{var _=v();return!n(g,_)}catch{return!0}}function h(g,v){return v()}var p=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?h:d;return fp.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:p,fp}var Tw;function D3(){return Tw||(Tw=1,dp.exports=M3()),dp.exports}var Nw;function U3(){if(Nw)return up;Nw=1;var t=Fl(),e=D3();function n(h,p){return h===p&&(h!==0||1/h===1/p)||h!==h&&p!==p}var s=typeof Object.is=="function"?Object.is:n,a=e.useSyncExternalStore,l=t.useRef,c=t.useEffect,d=t.useMemo,f=t.useDebugValue;return up.useSyncExternalStoreWithSelector=function(h,p,g,v,_){var x=l(null);if(x.current===null){var w={hasValue:!1,value:null};x.current=w}else w=x.current;x=d(function(){function A(k){if(!N){if(N=!0,E=k,k=v(k),_!==void 0&&w.hasValue){var R=w.value;if(_(R,k))return C=R}return C=k}if(R=C,s(E,k))return R;var $=v(k);return _!==void 0&&_(R,$)?(E=k,R):(E=k,C=$)}var N=!1,E,C,O=g===void 0?null:g;return[function(){return A(p())},O===null?void 0:function(){return A(O())}]},[p,g,v,_]);var S=a(h,x[0],x[1]);return c(function(){w.hasValue=!0,w.value=S},[S]),f(S),S},up}var Ow;function $3(){return Ow||(Ow=1,cp.exports=U3()),cp.exports}var I3=$3();const L3=Gd(I3),z3={},Rw=t=>{let e;const n=new Set,s=(p,g)=>{const v=typeof p=="function"?p(e):p;if(!Object.is(v,e)){const _=e;e=g??(typeof v!="object"||v===null)?v:Object.assign({},e,v),n.forEach(x=>x(e,_))}},a=()=>e,f={setState:s,getState:a,getInitialState:()=>h,subscribe:p=>(n.add(p),()=>n.delete(p)),destroy:()=>{(z3?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},h=e=t(s,a,f);return f},B3=t=>t?Rw(t):Rw,{useDebugValue:P3}=XN,{useSyncExternalStoreWithSelector:q3}=L3,H3=t=>t;function d1(t,e=H3,n){const s=q3(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,n);return P3(s),s}const jw=(t,e)=>{const n=B3(t),s=(a,l=e)=>d1(n,a,l);return Object.assign(s,n),s},V3=(t,e)=>t?jw(t,e):jw;function vt(t,e){if(Object.is(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;if(t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(const[s,a]of t)if(!Object.is(a,e.get(s)))return!1;return!0}if(t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(const s of t)if(!e.has(s))return!1;return!0}const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!1;for(const s of n)if(!Object.prototype.hasOwnProperty.call(e,s)||!Object.is(t[s],e[s]))return!1;return!0}const lf=j.createContext(null),F3=lf.Provider,f1=ir.error001();function Ke(t,e){const n=j.useContext(lf);if(n===null)throw new Error(f1);return d1(n,t,e)}function mt(){const t=j.useContext(lf);if(t===null)throw new Error(f1);return j.useMemo(()=>({getState:t.getState,setState:t.setState,subscribe:t.subscribe}),[t])}const kw={display:"none"},Y3={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},h1="react-flow__node-desc",m1="react-flow__edge-desc",G3="react-flow__aria-live",X3=t=>t.ariaLiveMessage,K3=t=>t.ariaLabelConfig;function Q3({rfId:t}){const e=Ke(X3);return b.jsx("div",{id:`${G3}-${t}`,"aria-live":"assertive","aria-atomic":"true",style:Y3,children:e})}function W3({rfId:t,disableKeyboardA11y:e}){const n=Ke(K3);return b.jsxs(b.Fragment,{children:[b.jsx("div",{id:`${h1}-${t}`,style:kw,children:e?n["node.a11yDescription.default"]:n["node.a11yDescription.keyboardDisabled"]}),b.jsx("div",{id:`${m1}-${t}`,style:kw,children:n["edge.a11yDescription.default"]}),!e&&b.jsx(Q3,{rfId:t})]})}const cf=j.forwardRef(({position:t="top-left",children:e,className:n,style:s,...a},l)=>{const c=`${t}`.split("-");return b.jsx("div",{className:Rt(["react-flow__panel",n,...c]),style:s,ref:l,...a,children:e})});cf.displayName="Panel";function J3({proOptions:t,position:e="bottom-right"}){return t?.hideAttribution?null:b.jsx(cf,{position:e,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:b.jsx("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}const Z3=t=>{const e=[],n=[];for(const[,s]of t.nodeLookup)s.selected&&e.push(s.internals.userNode);for(const[,s]of t.edgeLookup)s.selected&&n.push(s);return{selectedNodes:e,selectedEdges:n}},Gu=t=>t.id;function e$(t,e){return vt(t.selectedNodes.map(Gu),e.selectedNodes.map(Gu))&&vt(t.selectedEdges.map(Gu),e.selectedEdges.map(Gu))}function t$({onSelectionChange:t}){const e=mt(),{selectedNodes:n,selectedEdges:s}=Ke(Z3,e$);return j.useEffect(()=>{const a={nodes:n,edges:s};t?.(a),e.getState().onSelectionChangeHandlers.forEach(l=>l(a))},[n,s,t]),null}const n$=t=>!!t.onSelectionChangeHandlers;function r$({onSelectionChange:t}){const e=Ke(n$);return t||e?b.jsx(t$,{onSelectionChange:t}):null}const p1=[0,0],s$={x:0,y:0,zoom:1},i$=["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","autoPanOnNodeFocus","nodesConnectable","nodesFocusable","edgesFocusable","edgesReconnectable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","connectionDragThreshold","onBeforeDelete","debug","autoPanSpeed","ariaLabelConfig"],Mw=[...i$,"rfId"],a$=t=>({setNodes:t.setNodes,setEdges:t.setEdges,setMinZoom:t.setMinZoom,setMaxZoom:t.setMaxZoom,setTranslateExtent:t.setTranslateExtent,setNodeExtent:t.setNodeExtent,reset:t.reset,setDefaultNodesAndEdges:t.setDefaultNodesAndEdges}),Dw={translateExtent:Il,nodeOrigin:p1,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1"};function o$(t){const{setNodes:e,setEdges:n,setMinZoom:s,setMaxZoom:a,setTranslateExtent:l,setNodeExtent:c,reset:d,setDefaultNodesAndEdges:f}=Ke(a$,vt),h=mt();j.useEffect(()=>(f(t.defaultNodes,t.defaultEdges),()=>{p.current=Dw,d()}),[]);const p=j.useRef(Dw);return j.useEffect(()=>{for(const g of Mw){const v=t[g],_=p.current[g];v!==_&&(typeof t[g]>"u"||(g==="nodes"?e(v):g==="edges"?n(v):g==="minZoom"?s(v):g==="maxZoom"?a(v):g==="translateExtent"?l(v):g==="nodeExtent"?c(v):g==="ariaLabelConfig"?h.setState({ariaLabelConfig:VU(v)}):g==="fitView"?h.setState({fitViewQueued:v}):g==="fitViewOptions"?h.setState({fitViewOptions:v}):h.setState({[g]:v})))}p.current=t},Mw.map(g=>t[g])),null}function Uw(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function l$(t){const[e,n]=j.useState(t==="system"?null:t);return j.useEffect(()=>{if(t!=="system"){n(t);return}const s=Uw(),a=()=>n(s?.matches?"dark":"light");return a(),s?.addEventListener("change",a),()=>{s?.removeEventListener("change",a)}},[t]),e!==null?e:Uw()?.matches?"dark":"light"}const $w=typeof document<"u"?document:null;function ql(t=null,e={target:$w,actInsideInputWithModifier:!0}){const[n,s]=j.useState(!1),a=j.useRef(!1),l=j.useRef(new Set([])),[c,d]=j.useMemo(()=>{if(t!==null){const h=(Array.isArray(t)?t:[t]).filter(g=>typeof g=="string").map(g=>g.replace("+",`
`).replace(`

`,`
+`).split(`
`)),p=h.reduce((g,v)=>g.concat(...v),[]);return[h,p]}return[[],[]]},[t]);return j.useEffect(()=>{const f=e?.target??$w,h=e?.actInsideInputWithModifier??!0;if(t!==null){const p=_=>{if(a.current=_.ctrlKey||_.metaKey||_.shiftKey||_.altKey,(!a.current||a.current&&!h)&&XE(_))return!1;const w=Lw(_.code,d);if(l.current.add(_[w]),Iw(c,l.current,!1)){const S=_.composedPath?.()?.[0]||_.target,A=S?.nodeName==="BUTTON"||S?.nodeName==="A";e.preventDefault!==!1&&(a.current||!A)&&_.preventDefault(),s(!0)}},g=_=>{const x=Lw(_.code,d);Iw(c,l.current,!0)?(s(!1),l.current.clear()):l.current.delete(_[x]),_.key==="Meta"&&l.current.clear(),a.current=!1},v=()=>{l.current.clear(),s(!1)};return f?.addEventListener("keydown",p),f?.addEventListener("keyup",g),window.addEventListener("blur",v),window.addEventListener("contextmenu",v),()=>{f?.removeEventListener("keydown",p),f?.removeEventListener("keyup",g),window.removeEventListener("blur",v),window.removeEventListener("contextmenu",v)}}},[t,s]),n}function Iw(t,e,n){return t.filter(s=>n||s.length===e.size).some(s=>s.every(a=>e.has(a)))}function Lw(t,e){return e.includes(t)?"code":"key"}const c$=()=>{const t=mt();return j.useMemo(()=>({zoomIn:e=>{const{panZoom:n}=t.getState();return n?n.scaleBy(1.2,{duration:e?.duration}):Promise.resolve(!1)},zoomOut:e=>{const{panZoom:n}=t.getState();return n?n.scaleBy(1/1.2,{duration:e?.duration}):Promise.resolve(!1)},zoomTo:(e,n)=>{const{panZoom:s}=t.getState();return s?s.scaleTo(e,{duration:n?.duration}):Promise.resolve(!1)},getZoom:()=>t.getState().transform[2],setViewport:async(e,n)=>{const{transform:[s,a,l],panZoom:c}=t.getState();return c?(await c.setViewport({x:e.x??s,y:e.y??a,zoom:e.zoom??l},n),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{const[e,n,s]=t.getState().transform;return{x:e,y:n,zoom:s}},setCenter:async(e,n,s)=>t.getState().setCenter(e,n,s),fitBounds:async(e,n)=>{const{width:s,height:a,minZoom:l,maxZoom:c,panZoom:d}=t.getState(),f=zg(e,s,a,l,c,n?.padding??.1);return d?(await d.setViewport(f,{duration:n?.duration,ease:n?.ease,interpolate:n?.interpolate}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:(e,n={})=>{const{transform:s,snapGrid:a,snapToGrid:l,domNode:c}=t.getState();if(!c)return e;const{x:d,y:f}=c.getBoundingClientRect(),h={x:e.x-d,y:e.y-f},p=n.snapGrid??a,g=n.snapToGrid??l;return tc(h,s,g,p)},flowToScreenPosition:e=>{const{transform:n,domNode:s}=t.getState();if(!s)return e;const{x:a,y:l}=s.getBoundingClientRect(),c=$d(e,n);return{x:c.x+a,y:c.y+l}}}),[])};function g1(t,e){const n=[],s=new Map,a=[];for(const l of t)if(l.type==="add"){a.push(l);continue}else if(l.type==="remove"||l.type==="replace")s.set(l.id,[l]);else{const c=s.get(l.id);c?c.push(l):s.set(l.id,[l])}for(const l of e){const c=s.get(l.id);if(!c){n.push(l);continue}if(c[0].type==="remove")continue;if(c[0].type==="replace"){n.push({...c[0].item});continue}const d={...l};for(const f of c)u$(f,d);n.push(d)}return a.length&&a.forEach(l=>{l.index!==void 0?n.splice(l.index,0,{...l.item}):n.push({...l.item})}),n}function u$(t,e){switch(t.type){case"select":{e.selected=t.selected;break}case"position":{typeof t.position<"u"&&(e.position=t.position),typeof t.dragging<"u"&&(e.dragging=t.dragging);break}case"dimensions":{typeof t.dimensions<"u"&&(e.measured??={},e.measured.width=t.dimensions.width,e.measured.height=t.dimensions.height,t.setAttributes&&((t.setAttributes===!0||t.setAttributes==="width")&&(e.width=t.dimensions.width),(t.setAttributes===!0||t.setAttributes==="height")&&(e.height=t.dimensions.height))),typeof t.resizing=="boolean"&&(e.resizing=t.resizing);break}}}function y1(t,e){return g1(t,e)}function v1(t,e){return g1(t,e)}function ci(t,e){return{id:t,type:"select",selected:e}}function Da(t,e=new Set,n=!1){const s=[];for(const[a,l]of t){const c=e.has(a);!(l.selected===void 0&&!c)&&l.selected!==c&&(n&&(l.selected=c),s.push(ci(l.id,c)))}return s}function zw({items:t=[],lookup:e}){const n=[],s=new Map(t.map(a=>[a.id,a]));for(const[a,l]of t.entries()){const c=e.get(l.id),d=c?.internals?.userNode??c;d!==void 0&&d!==l&&n.push({id:l.id,item:l,type:"replace"}),d===void 0&&n.push({item:l,type:"add",index:a})}for(const[a]of e)s.get(a)===void 0&&n.push({id:a,type:"remove"});return n}function Bw(t){return{id:t.id,type:"remove"}}const Pw=t=>DU(t),d$=t=>BE(t);function _1(t){return j.forwardRef(t)}const f$=typeof window<"u"?j.useLayoutEffect:j.useEffect;function qw(t){const[e,n]=j.useState(BigInt(0)),[s]=j.useState(()=>h$(()=>n(a=>a+BigInt(1))));return f$(()=>{const a=s.get();a.length&&(t(a),s.reset())},[e]),s}function h$(t){let e=[];return{get:()=>e,reset:()=>{e=[]},push:n=>{e.push(n),t()}}}const b1=j.createContext(null);function m$({children:t}){const e=mt(),n=j.useCallback(d=>{const{nodes:f=[],setNodes:h,hasDefaultNodes:p,onNodesChange:g,nodeLookup:v,fitViewQueued:_}=e.getState();let x=f;for(const S of d)x=typeof S=="function"?S(x):S;const w=zw({items:x,lookup:v});p&&h(x),w.length>0?g?.(w):_&&window.requestAnimationFrame(()=>{const{fitViewQueued:S,nodes:A,setNodes:N}=e.getState();S&&N(A)})},[]),s=qw(n),a=j.useCallback(d=>{const{edges:f=[],setEdges:h,hasDefaultEdges:p,onEdgesChange:g,edgeLookup:v}=e.getState();let _=f;for(const x of d)_=typeof x=="function"?x(_):x;p?h(_):g&&g(zw({items:_,lookup:v}))},[]),l=qw(a),c=j.useMemo(()=>({nodeQueue:s,edgeQueue:l}),[]);return b.jsx(b1.Provider,{value:c,children:t})}function p$(){const t=j.useContext(b1);if(!t)throw new Error("useBatchContext must be used within a BatchProvider");return t}const g$=t=>!!t.panZoom;function Wa(){const t=c$(),e=mt(),n=p$(),s=Ke(g$),a=j.useMemo(()=>{const l=g=>e.getState().nodeLookup.get(g),c=g=>{n.nodeQueue.push(g)},d=g=>{n.edgeQueue.push(g)},f=g=>{const{nodeLookup:v,nodeOrigin:_}=e.getState(),x=Pw(g)?g:v.get(g.id),w=x.parentId?YE(x.position,x.measured,x.parentId,v,_):x.position,S={...x,position:w,width:x.measured?.width??x.width,height:x.measured?.height??x.height};return Va(S)},h=(g,v,_={replace:!1})=>{c(x=>x.map(w=>{if(w.id===g){const S=typeof v=="function"?v(w):v;return _.replace&&Pw(S)?S:{...w,...S}}return w}))},p=(g,v,_={replace:!1})=>{d(x=>x.map(w=>{if(w.id===g){const S=typeof v=="function"?v(w):v;return _.replace&&d$(S)?S:{...w,...S}}return w}))};return{getNodes:()=>e.getState().nodes.map(g=>({...g})),getNode:g=>l(g)?.internals.userNode,getInternalNode:l,getEdges:()=>{const{edges:g=[]}=e.getState();return g.map(v=>({...v}))},getEdge:g=>e.getState().edgeLookup.get(g),setNodes:c,setEdges:d,addNodes:g=>{const v=Array.isArray(g)?g:[g];n.nodeQueue.push(_=>[..._,...v])},addEdges:g=>{const v=Array.isArray(g)?g:[g];n.edgeQueue.push(_=>[..._,...v])},toObject:()=>{const{nodes:g=[],edges:v=[],transform:_}=e.getState(),[x,w,S]=_;return{nodes:g.map(A=>({...A})),edges:v.map(A=>({...A})),viewport:{x,y:w,zoom:S}}},deleteElements:async({nodes:g=[],edges:v=[]})=>{const{nodes:_,edges:x,onNodesDelete:w,onEdgesDelete:S,triggerNodeChanges:A,triggerEdgeChanges:N,onDelete:E,onBeforeDelete:C}=e.getState(),{nodes:O,edges:k}=await zU({nodesToRemove:g,edgesToRemove:v,nodes:_,edges:x,onBeforeDelete:C}),R=k.length>0,$=O.length>0;if(R){const L=k.map(Bw);S?.(k),N(L)}if($){const L=O.map(Bw);w?.(O),A(L)}return($||R)&&E?.({nodes:O,edges:k}),{deletedNodes:O,deletedEdges:k}},getIntersectingNodes:(g,v=!0,_)=>{const x=hw(g),w=x?g:f(g),S=_!==void 0;return w?(_||e.getState().nodes).filter(A=>{const N=e.getState().nodeLookup.get(A.id);if(N&&!x&&(A.id===g.id||!N.internals.positionAbsolute))return!1;const E=Va(S?A:N),C=zl(E,w);return v&&C>0||C>=E.width*E.height||C>=w.width*w.height}):[]},isNodeIntersecting:(g,v,_=!0)=>{const w=hw(g)?g:f(g);if(!w)return!1;const S=zl(w,v);return _&&S>0||S>=v.width*v.height||S>=w.width*w.height},updateNode:h,updateNodeData:(g,v,_={replace:!1})=>{h(g,x=>{const w=typeof v=="function"?v(x):v;return _.replace?{...x,data:w}:{...x,data:{...x.data,...w}}},_)},updateEdge:p,updateEdgeData:(g,v,_={replace:!1})=>{p(g,x=>{const w=typeof v=="function"?v(x):v;return _.replace?{...x,data:w}:{...x,data:{...x.data,...w}}},_)},getNodesBounds:g=>{const{nodeLookup:v,nodeOrigin:_}=e.getState();return UU(g,{nodeLookup:v,nodeOrigin:_})},getHandleConnections:({type:g,id:v,nodeId:_})=>Array.from(e.getState().connectionLookup.get(`${_}-${g}${v?`-${v}`:""}`)?.values()??[]),getNodeConnections:({type:g,handleId:v,nodeId:_})=>Array.from(e.getState().connectionLookup.get(`${_}${g?v?`-${g}-${v}`:`-${g}`:""}`)?.values()??[]),fitView:async g=>{const v=e.getState().fitViewResolver??HU();return e.setState({fitViewQueued:!0,fitViewOptions:g,fitViewResolver:v}),n.nodeQueue.push(_=>[..._]),v.promise}}},[]);return j.useMemo(()=>({...a,...t,viewportInitialized:s}),[s])}const Hw=t=>t.selected,y$=typeof window<"u"?window:void 0;function v$({deleteKeyCode:t,multiSelectionKeyCode:e}){const n=mt(),{deleteElements:s}=Wa(),a=ql(t,{actInsideInputWithModifier:!1}),l=ql(e,{target:y$});j.useEffect(()=>{if(a){const{edges:c,nodes:d}=n.getState();s({nodes:d.filter(Hw),edges:c.filter(Hw)}),n.setState({nodesSelectionActive:!1})}},[a]),j.useEffect(()=>{n.setState({multiSelectionActive:l})},[l])}function _$(t){const e=mt();j.useEffect(()=>{const n=()=>{if(!t.current||!(t.current.checkVisibility?.()??!0))return!1;const s=Bg(t.current);(s.height===0||s.width===0)&&e.getState().onError?.("004",ir.error004()),e.setState({width:s.width||500,height:s.height||500})};if(t.current){n(),window.addEventListener("resize",n);const s=new ResizeObserver(()=>n());return s.observe(t.current),()=>{window.removeEventListener("resize",n),s&&t.current&&s.unobserve(t.current)}}},[])}const uf={position:"absolute",width:"100%",height:"100%",top:0,left:0},b$=t=>({userSelectionActive:t.userSelectionActive,lib:t.lib,connectionInProgress:t.connection.inProgress});function w$({onPaneContextMenu:t,zoomOnScroll:e=!0,zoomOnPinch:n=!0,panOnScroll:s=!1,panOnScrollSpeed:a=.5,panOnScrollMode:l=bi.Free,zoomOnDoubleClick:c=!0,panOnDrag:d=!0,defaultViewport:f,translateExtent:h,minZoom:p,maxZoom:g,zoomActivationKeyCode:v,preventScrolling:_=!0,children:x,noWheelClassName:w,noPanClassName:S,onViewportChange:A,isControlledViewport:N,paneClickDistance:E,selectionOnDrag:C}){const O=mt(),k=j.useRef(null),{userSelectionActive:R,lib:$,connectionInProgress:L}=Ke(b$,vt),X=ql(v),F=j.useRef();_$(k);const H=j.useCallback(W=>{A?.({x:W[0],y:W[1],zoom:W[2]}),N||O.setState({transform:W})},[A,N]);return j.useEffect(()=>{if(k.current){F.current=A3({domNode:k.current,minZoom:p,maxZoom:g,translateExtent:h,viewport:f,onDraggingChange:U=>O.setState({paneDragging:U}),onPanZoomStart:(U,z)=>{const{onViewportChangeStart:q,onMoveStart:B}=O.getState();B?.(U,z),q?.(z)},onPanZoom:(U,z)=>{const{onViewportChange:q,onMove:B}=O.getState();B?.(U,z),q?.(z)},onPanZoomEnd:(U,z)=>{const{onViewportChangeEnd:q,onMoveEnd:B}=O.getState();B?.(U,z),q?.(z)}});const{x:W,y:I,zoom:V}=F.current.getViewport();return O.setState({panZoom:F.current,transform:[W,I,V],domNode:k.current.closest(".react-flow")}),()=>{F.current?.destroy()}}},[]),j.useEffect(()=>{F.current?.update({onPaneContextMenu:t,zoomOnScroll:e,zoomOnPinch:n,panOnScroll:s,panOnScrollSpeed:a,panOnScrollMode:l,zoomOnDoubleClick:c,panOnDrag:d,zoomActivationKeyPressed:X,preventScrolling:_,noPanClassName:S,userSelectionActive:R,noWheelClassName:w,lib:$,onTransformChange:H,connectionInProgress:L,selectionOnDrag:C,paneClickDistance:E})},[t,e,n,s,a,l,c,d,X,_,S,R,w,$,H,L,C,E]),b.jsx("div",{className:"react-flow__renderer",ref:k,style:uf,children:x})}const x$=t=>({userSelectionActive:t.userSelectionActive,userSelectionRect:t.userSelectionRect});function S$(){const{userSelectionActive:t,userSelectionRect:e}=Ke(x$,vt);return t&&e?b.jsx("div",{className:"react-flow__selection react-flow__container",style:{width:e.width,height:e.height,transform:`translate(${e.x}px, ${e.y}px)`}}):null}const hp=(t,e)=>n=>{n.target===e.current&&t?.(n)},E$=t=>({userSelectionActive:t.userSelectionActive,elementsSelectable:t.elementsSelectable,connectionInProgress:t.connection.inProgress,dragging:t.paneDragging});function C$({isSelecting:t,selectionKeyPressed:e,selectionMode:n=Ll.Full,panOnDrag:s,paneClickDistance:a,selectionOnDrag:l,onSelectionStart:c,onSelectionEnd:d,onPaneClick:f,onPaneContextMenu:h,onPaneScroll:p,onPaneMouseEnter:g,onPaneMouseMove:v,onPaneMouseLeave:_,children:x}){const w=mt(),{userSelectionActive:S,elementsSelectable:A,dragging:N,connectionInProgress:E}=Ke(E$,vt),C=A&&(t||S),O=j.useRef(null),k=j.useRef(),R=j.useRef(new Set),$=j.useRef(new Set),L=j.useRef(!1),X=q=>{if(L.current||E){L.current=!1;return}f?.(q),w.getState().resetSelectedElements(),w.setState({nodesSelectionActive:!1})},F=q=>{if(Array.isArray(s)&&s?.includes(2)){q.preventDefault();return}h?.(q)},H=p?q=>p(q):void 0,W=q=>{L.current&&(q.stopPropagation(),L.current=!1)},I=q=>{const{domNode:B}=w.getState();if(k.current=B?.getBoundingClientRect(),!k.current)return;const G=q.target===O.current;if(!G&&!!q.target.closest(".nokey")||!t||!(l&&G||e)||q.button!==0||!q.isPrimary)return;q.target?.setPointerCapture?.(q.pointerId),L.current=!1;const{x:Z,y:K}=sr(q.nativeEvent,k.current);w.setState({userSelectionRect:{width:0,height:0,startX:Z,startY:K,x:Z,y:K}}),G||(q.stopPropagation(),q.preventDefault())},V=q=>{const{userSelectionRect:B,transform:G,nodeLookup:D,edgeLookup:P,connectionLookup:Z,triggerNodeChanges:K,triggerEdgeChanges:re,defaultEdgeOptions:ee,resetSelectedElements:oe}=w.getState();if(!k.current||!B)return;const{x:ce,y:he}=sr(q.nativeEvent,k.current),{startX:ye,startY:xe}=B;if(!L.current){const ge=e?0:a;if(Math.hypot(ce-ye,he-xe)<=ge)return;oe(),c?.(q)}L.current=!0;const ve={startX:ye,startY:xe,x:ce<ye?ce:ye,y:he<xe?he:xe,width:Math.abs(ce-ye),height:Math.abs(he-xe)},Ce=R.current,ze=$.current;R.current=new Set(Lg(D,ve,G,n===Ll.Partial,!0).map(ge=>ge.id)),$.current=new Set;const me=ee?.selectable??!0;for(const ge of R.current){const Me=Z.get(ge);if(Me)for(const{edgeId:Pe}of Me.values()){const ct=P.get(Pe);ct&&(ct.selectable??me)&&$.current.add(Pe)}}if(!mw(Ce,R.current)){const ge=Da(D,R.current,!0);K(ge)}if(!mw(ze,$.current)){const ge=Da(P,$.current);re(ge)}w.setState({userSelectionRect:ve,userSelectionActive:!0,nodesSelectionActive:!1})},U=q=>{q.button===0&&(q.target?.releasePointerCapture?.(q.pointerId),!S&&q.target===O.current&&w.getState().userSelectionRect&&X?.(q),w.setState({userSelectionActive:!1,userSelectionRect:null}),L.current&&(d?.(q),w.setState({nodesSelectionActive:R.current.size>0})))},z=s===!0||Array.isArray(s)&&s.includes(0);return b.jsxs("div",{className:Rt(["react-flow__pane",{draggable:z,dragging:N,selection:t}]),onClick:C?void 0:hp(X,O),onContextMenu:hp(F,O),onWheel:hp(H,O),onPointerEnter:C?void 0:g,onPointerMove:C?V:v,onPointerUp:C?U:void 0,onPointerDownCapture:C?I:void 0,onClickCapture:C?W:void 0,onPointerLeave:_,ref:O,style:uf,children:[x,b.jsx(S$,{})]})}function Zp({id:t,store:e,unselect:n=!1,nodeRef:s}){const{addSelectedNodes:a,unselectNodesAndEdges:l,multiSelectionActive:c,nodeLookup:d,onError:f}=e.getState(),h=d.get(t);if(!h){f?.("012",ir.error012(t));return}e.setState({nodesSelectionActive:!1}),h.selected?(n||h.selected&&c)&&(l({nodes:[h],edges:[]}),requestAnimationFrame(()=>s?.current?.blur())):a([t])}function w1({nodeRef:t,disabled:e=!1,noDragClassName:n,handleSelector:s,nodeId:a,isSelectable:l,nodeClickDistance:c}){const d=mt(),[f,h]=j.useState(!1),p=j.useRef();return j.useEffect(()=>{p.current=f3({getStoreItems:()=>d.getState(),onNodeMouseDown:g=>{Zp({id:g,store:d,nodeRef:t})},onDragStart:()=>{h(!0)},onDragStop:()=>{h(!1)}})},[]),j.useEffect(()=>{if(e)p.current?.destroy();else if(t.current)return p.current?.update({noDragClassName:n,handleSelector:s,domNode:t.current,isSelectable:l,nodeId:a,nodeClickDistance:c}),()=>{p.current?.destroy()}},[n,s,e,l,t,a]),f}const A$=t=>e=>e.selected&&(e.draggable||t&&typeof e.draggable>"u");function x1(){const t=mt();return j.useCallback(n=>{const{nodeExtent:s,snapToGrid:a,snapGrid:l,nodesDraggable:c,onError:d,updateNodePositions:f,nodeLookup:h,nodeOrigin:p}=t.getState(),g=new Map,v=A$(c),_=a?l[0]:5,x=a?l[1]:5,w=n.direction.x*_*n.factor,S=n.direction.y*x*n.factor;for(const[,A]of h){if(!v(A))continue;let N={x:A.internals.positionAbsolute.x+w,y:A.internals.positionAbsolute.y+S};a&&(N=ec(N,l));const{position:E,positionAbsolute:C}=PE({nodeId:A.id,nextPosition:N,nodeLookup:h,nodeExtent:s,nodeOrigin:p,onError:d});A.position=E,A.internals.positionAbsolute=C,g.set(A.id,A)}f(g)},[])}const Yg=j.createContext(null),T$=Yg.Provider;Yg.Consumer;const Gg=()=>j.useContext(Yg),N$=t=>({connectOnClick:t.connectOnClick,noPanClassName:t.noPanClassName,rfId:t.rfId}),O$=(t,e,n)=>s=>{const{connectionClickStartHandle:a,connectionMode:l,connection:c}=s,{fromHandle:d,toHandle:f,isValid:h}=c,p=f?.nodeId===t&&f?.id===e&&f?.type===n;return{connectingFrom:d?.nodeId===t&&d?.id===e&&d?.type===n,connectingTo:p,clickConnecting:a?.nodeId===t&&a?.id===e&&a?.type===n,isPossibleEndHandle:l===qa.Strict?d?.type!==n:t!==d?.nodeId||e!==d?.id,connectionInProcess:!!d,clickConnectionInProcess:!!a,valid:p&&h}};function R$({type:t="source",position:e=Se.Top,isValidConnection:n,isConnectable:s=!0,isConnectableStart:a=!0,isConnectableEnd:l=!0,id:c,onConnect:d,children:f,className:h,onMouseDown:p,onTouchStart:g,...v},_){const x=c||null,w=t==="target",S=mt(),A=Gg(),{connectOnClick:N,noPanClassName:E,rfId:C}=Ke(N$,vt),{connectingFrom:O,connectingTo:k,clickConnecting:R,isPossibleEndHandle:$,connectionInProcess:L,clickConnectionInProcess:X,valid:F}=Ke(O$(A,x,t),vt);A||S.getState().onError?.("010",ir.error010());const H=V=>{const{defaultEdgeOptions:U,onConnect:z,hasDefaultEdges:q}=S.getState(),B={...U,...V};if(q){const{edges:G,setEdges:D}=S.getState();D(JE(B,G))}z?.(B),d?.(B)},W=V=>{if(!A)return;const U=KE(V.nativeEvent);if(a&&(U&&V.button===0||!U)){const z=S.getState();Jp.onPointerDown(V.nativeEvent,{handleDomNode:V.currentTarget,autoPanOnConnect:z.autoPanOnConnect,connectionMode:z.connectionMode,connectionRadius:z.connectionRadius,domNode:z.domNode,nodeLookup:z.nodeLookup,lib:z.lib,isTarget:w,handleId:x,nodeId:A,flowId:z.rfId,panBy:z.panBy,cancelConnection:z.cancelConnection,onConnectStart:z.onConnectStart,onConnectEnd:z.onConnectEnd,updateConnection:z.updateConnection,onConnect:H,isValidConnection:n||z.isValidConnection,getTransform:()=>S.getState().transform,getFromHandle:()=>S.getState().connection.fromHandle,autoPanSpeed:z.autoPanSpeed,dragThreshold:z.connectionDragThreshold})}U?p?.(V):g?.(V)},I=V=>{const{onClickConnectStart:U,onClickConnectEnd:z,connectionClickStartHandle:q,connectionMode:B,isValidConnection:G,lib:D,rfId:P,nodeLookup:Z,connection:K}=S.getState();if(!A||!q&&!a)return;if(!q){U?.(V.nativeEvent,{nodeId:A,handleId:x,handleType:t}),S.setState({connectionClickStartHandle:{nodeId:A,type:t,id:x}});return}const re=GE(V.target),ee=n||G,{connection:oe,isValid:ce}=Jp.isValid(V.nativeEvent,{handle:{nodeId:A,id:x,type:t},connectionMode:B,fromNodeId:q.nodeId,fromHandleId:q.id||null,fromType:q.type,isValidConnection:ee,flowId:P,doc:re,lib:D,nodeLookup:Z});ce&&oe&&H(oe);const he=structuredClone(K);delete he.inProgress,he.toPosition=he.toHandle?he.toHandle.position:null,z?.(V,he),S.setState({connectionClickStartHandle:null})};return b.jsx("div",{"data-handleid":x,"data-nodeid":A,"data-handlepos":e,"data-id":`${C}-${A}-${x}-${t}`,className:Rt(["react-flow__handle",`react-flow__handle-${e}`,"nodrag",E,h,{source:!w,target:w,connectable:s,connectablestart:a,connectableend:l,clickconnecting:R,connectingfrom:O,connectingto:k,valid:F,connectionindicator:s&&(!L||$)&&(L||X?l:a)}]),onMouseDown:W,onTouchStart:W,onClick:N?I:void 0,ref:_,...v,children:f})}const tn=j.memo(_1(R$));function j$({data:t,isConnectable:e,sourcePosition:n=Se.Bottom}){return b.jsxs(b.Fragment,{children:[t?.label,b.jsx(tn,{type:"source",position:n,isConnectable:e})]})}function k$({data:t,isConnectable:e,targetPosition:n=Se.Top,sourcePosition:s=Se.Bottom}){return b.jsxs(b.Fragment,{children:[b.jsx(tn,{type:"target",position:n,isConnectable:e}),t?.label,b.jsx(tn,{type:"source",position:s,isConnectable:e})]})}function M$(){return null}function D$({data:t,isConnectable:e,targetPosition:n=Se.Top}){return b.jsxs(b.Fragment,{children:[b.jsx(tn,{type:"target",position:n,isConnectable:e}),t?.label]})}const Id={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},Vw={input:j$,default:k$,output:D$,group:M$};function U$(t){return t.internals.handleBounds===void 0?{width:t.width??t.initialWidth??t.style?.width,height:t.height??t.initialHeight??t.style?.height}:{width:t.width??t.style?.width,height:t.height??t.style?.height}}const $$=t=>{const{width:e,height:n,x:s,y:a}=Zl(t.nodeLookup,{filter:l=>!!l.selected});return{width:rr(e)?e:null,height:rr(n)?n:null,userSelectionActive:t.userSelectionActive,transformString:`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]}) translate(${s}px,${a}px)`}};function I$({onSelectionContextMenu:t,noPanClassName:e,disableKeyboardA11y:n}){const s=mt(),{width:a,height:l,transformString:c,userSelectionActive:d}=Ke($$,vt),f=x1(),h=j.useRef(null);if(j.useEffect(()=>{n||h.current?.focus({preventScroll:!0})},[n]),w1({nodeRef:h}),d||!a||!l)return null;const p=t?v=>{const _=s.getState().nodes.filter(x=>x.selected);t(v,_)}:void 0,g=v=>{Object.prototype.hasOwnProperty.call(Id,v.key)&&(v.preventDefault(),f({direction:Id[v.key],factor:v.shiftKey?4:1}))};return b.jsx("div",{className:Rt(["react-flow__nodesselection","react-flow__container",e]),style:{transform:c},children:b.jsx("div",{ref:h,className:"react-flow__nodesselection-rect",onContextMenu:p,tabIndex:n?void 0:-1,onKeyDown:n?void 0:g,style:{width:a,height:l}})})}const Fw=typeof window<"u"?window:void 0,L$=t=>({nodesSelectionActive:t.nodesSelectionActive,userSelectionActive:t.userSelectionActive});function S1({children:t,onPaneClick:e,onPaneMouseEnter:n,onPaneMouseMove:s,onPaneMouseLeave:a,onPaneContextMenu:l,onPaneScroll:c,paneClickDistance:d,deleteKeyCode:f,selectionKeyCode:h,selectionOnDrag:p,selectionMode:g,onSelectionStart:v,onSelectionEnd:_,multiSelectionKeyCode:x,panActivationKeyCode:w,zoomActivationKeyCode:S,elementsSelectable:A,zoomOnScroll:N,zoomOnPinch:E,panOnScroll:C,panOnScrollSpeed:O,panOnScrollMode:k,zoomOnDoubleClick:R,panOnDrag:$,defaultViewport:L,translateExtent:X,minZoom:F,maxZoom:H,preventScrolling:W,onSelectionContextMenu:I,noWheelClassName:V,noPanClassName:U,disableKeyboardA11y:z,onViewportChange:q,isControlledViewport:B}){const{nodesSelectionActive:G,userSelectionActive:D}=Ke(L$),P=ql(h,{target:Fw}),Z=ql(w,{target:Fw}),K=Z||$,re=Z||C,ee=p&&K!==!0,oe=P||D||ee;return v$({deleteKeyCode:f,multiSelectionKeyCode:x}),b.jsx(w$,{onPaneContextMenu:l,elementsSelectable:A,zoomOnScroll:N,zoomOnPinch:E,panOnScroll:re,panOnScrollSpeed:O,panOnScrollMode:k,zoomOnDoubleClick:R,panOnDrag:!P&&K,defaultViewport:L,translateExtent:X,minZoom:F,maxZoom:H,zoomActivationKeyCode:S,preventScrolling:W,noWheelClassName:V,noPanClassName:U,onViewportChange:q,isControlledViewport:B,paneClickDistance:d,selectionOnDrag:ee,children:b.jsxs(C$,{onSelectionStart:v,onSelectionEnd:_,onPaneClick:e,onPaneMouseEnter:n,onPaneMouseMove:s,onPaneMouseLeave:a,onPaneContextMenu:l,onPaneScroll:c,panOnDrag:K,isSelecting:!!oe,selectionMode:g,selectionKeyPressed:P,paneClickDistance:d,selectionOnDrag:ee,children:[t,G&&b.jsx(I$,{onSelectionContextMenu:I,noPanClassName:U,disableKeyboardA11y:z})]})})}S1.displayName="FlowRenderer";const z$=j.memo(S1),B$=t=>e=>t?Lg(e.nodeLookup,{x:0,y:0,width:e.width,height:e.height},e.transform,!0).map(n=>n.id):Array.from(e.nodeLookup.keys());function P$(t){return Ke(j.useCallback(B$(t),[t]),vt)}const q$=t=>t.updateNodeInternals;function H$(){const t=Ke(q$),[e]=j.useState(()=>typeof ResizeObserver>"u"?null:new ResizeObserver(n=>{const s=new Map;n.forEach(a=>{const l=a.target.getAttribute("data-id");s.set(l,{id:l,nodeElement:a.target,force:!0})}),t(s)}));return j.useEffect(()=>()=>{e?.disconnect()},[e]),e}function V$({node:t,nodeType:e,hasDimensions:n,resizeObserver:s}){const a=mt(),l=j.useRef(null),c=j.useRef(null),d=j.useRef(t.sourcePosition),f=j.useRef(t.targetPosition),h=j.useRef(e),p=n&&!!t.internals.handleBounds;return j.useEffect(()=>{l.current&&!t.hidden&&(!p||c.current!==l.current)&&(c.current&&s?.unobserve(c.current),s?.observe(l.current),c.current=l.current)},[p,t.hidden]),j.useEffect(()=>()=>{c.current&&(s?.unobserve(c.current),c.current=null)},[]),j.useEffect(()=>{if(l.current){const g=h.current!==e,v=d.current!==t.sourcePosition,_=f.current!==t.targetPosition;(g||v||_)&&(h.current=e,d.current=t.sourcePosition,f.current=t.targetPosition,a.getState().updateNodeInternals(new Map([[t.id,{id:t.id,nodeElement:l.current,force:!0}]])))}},[t.id,e,t.sourcePosition,t.targetPosition]),l}function F$({id:t,onClick:e,onMouseEnter:n,onMouseMove:s,onMouseLeave:a,onContextMenu:l,onDoubleClick:c,nodesDraggable:d,elementsSelectable:f,nodesConnectable:h,nodesFocusable:p,resizeObserver:g,noDragClassName:v,noPanClassName:_,disableKeyboardA11y:x,rfId:w,nodeTypes:S,nodeClickDistance:A,onError:N}){const{node:E,internals:C,isParent:O}=Ke(ce=>{const he=ce.nodeLookup.get(t),ye=ce.parentLookup.has(t);return{node:he,internals:he.internals,isParent:ye}},vt);let k=E.type||"default",R=S?.[k]||Vw[k];R===void 0&&(N?.("003",ir.error003(k)),k="default",R=S?.default||Vw.default);const $=!!(E.draggable||d&&typeof E.draggable>"u"),L=!!(E.selectable||f&&typeof E.selectable>"u"),X=!!(E.connectable||h&&typeof E.connectable>"u"),F=!!(E.focusable||p&&typeof E.focusable>"u"),H=mt(),W=FE(E),I=V$({node:E,nodeType:k,hasDimensions:W,resizeObserver:g}),V=w1({nodeRef:I,disabled:E.hidden||!$,noDragClassName:v,handleSelector:E.dragHandle,nodeId:t,isSelectable:L,nodeClickDistance:A}),U=x1();if(E.hidden)return null;const z=Jr(E),q=U$(E),B=L||$||e||n||s||a,G=n?ce=>n(ce,{...C.userNode}):void 0,D=s?ce=>s(ce,{...C.userNode}):void 0,P=a?ce=>a(ce,{...C.userNode}):void 0,Z=l?ce=>l(ce,{...C.userNode}):void 0,K=c?ce=>c(ce,{...C.userNode}):void 0,re=ce=>{const{selectNodesOnDrag:he,nodeDragThreshold:ye}=H.getState();L&&(!he||!$||ye>0)&&Zp({id:t,store:H,nodeRef:I}),e&&e(ce,{...C.userNode})},ee=ce=>{if(!(XE(ce.nativeEvent)||x)){if($E.includes(ce.key)&&L){const he=ce.key==="Escape";Zp({id:t,store:H,unselect:he,nodeRef:I})}else if($&&E.selected&&Object.prototype.hasOwnProperty.call(Id,ce.key)){ce.preventDefault();const{ariaLabelConfig:he}=H.getState();H.setState({ariaLiveMessage:he["node.a11yDescription.ariaLiveMessage"]({direction:ce.key.replace("Arrow","").toLowerCase(),x:~~C.positionAbsolute.x,y:~~C.positionAbsolute.y})}),U({direction:Id[ce.key],factor:ce.shiftKey?4:1})}}},oe=()=>{if(x||!I.current?.matches(":focus-visible"))return;const{transform:ce,width:he,height:ye,autoPanOnNodeFocus:xe,setCenter:ve}=H.getState();if(!xe)return;Lg(new Map([[t,E]]),{x:0,y:0,width:he,height:ye},ce,!0).length>0||ve(E.position.x+z.width/2,E.position.y+z.height/2,{zoom:ce[2]})};return b.jsx("div",{className:Rt(["react-flow__node",`react-flow__node-${k}`,{[_]:$},E.className,{selected:E.selected,selectable:L,parent:O,draggable:$,dragging:V}]),ref:I,style:{zIndex:C.z,transform:`translate(${C.positionAbsolute.x}px,${C.positionAbsolute.y}px)`,pointerEvents:B?"all":"none",visibility:W?"visible":"hidden",...E.style,...q},"data-id":t,"data-testid":`rf__node-${t}`,onMouseEnter:G,onMouseMove:D,onMouseLeave:P,onContextMenu:Z,onClick:re,onDoubleClick:K,onKeyDown:F?ee:void 0,tabIndex:F?0:void 0,onFocus:F?oe:void 0,role:E.ariaRole??(F?"group":void 0),"aria-roledescription":"node","aria-describedby":x?void 0:`${h1}-${w}`,"aria-label":E.ariaLabel,...E.domAttributes,children:b.jsx(T$,{value:t,children:b.jsx(R,{id:t,data:E.data,type:k,positionAbsoluteX:C.positionAbsolute.x,positionAbsoluteY:C.positionAbsolute.y,selected:E.selected??!1,selectable:L,draggable:$,deletable:E.deletable??!0,isConnectable:X,sourcePosition:E.sourcePosition,targetPosition:E.targetPosition,dragging:V,dragHandle:E.dragHandle,zIndex:C.z,parentId:E.parentId,...z})})})}var Y$=j.memo(F$);const G$=t=>({nodesDraggable:t.nodesDraggable,nodesConnectable:t.nodesConnectable,nodesFocusable:t.nodesFocusable,elementsSelectable:t.elementsSelectable,onError:t.onError});function E1(t){const{nodesDraggable:e,nodesConnectable:n,nodesFocusable:s,elementsSelectable:a,onError:l}=Ke(G$,vt),c=P$(t.onlyRenderVisibleElements),d=H$();return b.jsx("div",{className:"react-flow__nodes",style:uf,children:c.map(f=>b.jsx(Y$,{id:f,nodeTypes:t.nodeTypes,nodeExtent:t.nodeExtent,onClick:t.onNodeClick,onMouseEnter:t.onNodeMouseEnter,onMouseMove:t.onNodeMouseMove,onMouseLeave:t.onNodeMouseLeave,onContextMenu:t.onNodeContextMenu,onDoubleClick:t.onNodeDoubleClick,noDragClassName:t.noDragClassName,noPanClassName:t.noPanClassName,rfId:t.rfId,disableKeyboardA11y:t.disableKeyboardA11y,resizeObserver:d,nodesDraggable:e,nodesConnectable:n,nodesFocusable:s,elementsSelectable:a,nodeClickDistance:t.nodeClickDistance,onError:l},f))})}E1.displayName="NodeRenderer";const X$=j.memo(E1);function K$(t){return Ke(j.useCallback(n=>{if(!t)return n.edges.map(a=>a.id);const s=[];if(n.width&&n.height)for(const a of n.edges){const l=n.nodeLookup.get(a.source),c=n.nodeLookup.get(a.target);l&&c&&GU({sourceNode:l,targetNode:c,width:n.width,height:n.height,transform:n.transform})&&s.push(a.id)}return s},[t]),vt)}const Q$=({color:t="none",strokeWidth:e=1})=>{const n={strokeWidth:e,...t&&{stroke:t}};return b.jsx("polyline",{className:"arrow",style:n,strokeLinecap:"round",fill:"none",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4"})},W$=({color:t="none",strokeWidth:e=1})=>{const n={strokeWidth:e,...t&&{stroke:t,fill:t}};return b.jsx("polyline",{className:"arrowclosed",style:n,strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"})},Yw={[Dd.Arrow]:Q$,[Dd.ArrowClosed]:W$};function J$(t){const e=mt();return j.useMemo(()=>Object.prototype.hasOwnProperty.call(Yw,t)?Yw[t]:(e.getState().onError?.("009",ir.error009(t)),null),[t])}const Z$=({id:t,type:e,color:n,width:s=12.5,height:a=12.5,markerUnits:l="strokeWidth",strokeWidth:c,orient:d="auto-start-reverse"})=>{const f=J$(e);return f?b.jsx("marker",{className:"react-flow__arrowhead",id:t,markerWidth:`${s}`,markerHeight:`${a}`,viewBox:"-10 -10 20 20",markerUnits:l,orient:d,refX:"0",refY:"0",children:b.jsx(f,{color:n,strokeWidth:c})}):null},C1=({defaultColor:t,rfId:e})=>{const n=Ke(l=>l.edges),s=Ke(l=>l.defaultEdgeOptions),a=j.useMemo(()=>e3(n,{id:e,defaultColor:t,defaultMarkerStart:s?.markerStart,defaultMarkerEnd:s?.markerEnd}),[n,s,e,t]);return a.length?b.jsx("svg",{className:"react-flow__marker","aria-hidden":"true",children:b.jsx("defs",{children:a.map(l=>b.jsx(Z$,{id:l.id,type:l.type,color:l.color,width:l.width,height:l.height,markerUnits:l.markerUnits,strokeWidth:l.strokeWidth,orient:l.orient},l.id))})}):null};C1.displayName="MarkerDefinitions";var eI=j.memo(C1);function A1({x:t,y:e,label:n,labelStyle:s,labelShowBg:a=!0,labelBgStyle:l,labelBgPadding:c=[2,4],labelBgBorderRadius:d=2,children:f,className:h,...p}){const[g,v]=j.useState({x:1,y:0,width:0,height:0}),_=Rt(["react-flow__edge-textwrapper",h]),x=j.useRef(null);return j.useEffect(()=>{if(x.current){const w=x.current.getBBox();v({x:w.x,y:w.y,width:w.width,height:w.height})}},[n]),n?b.jsxs("g",{transform:`translate(${t-g.width/2} ${e-g.height/2})`,className:_,visibility:g.width?"visible":"hidden",...p,children:[a&&b.jsx("rect",{width:g.width+2*c[0],x:-c[0],y:-c[1],height:g.height+2*c[1],className:"react-flow__edge-textbg",style:l,rx:d,ry:d}),b.jsx("text",{className:"react-flow__edge-text",y:g.height/2,dy:"0.3em",ref:x,style:s,children:n}),f]}):null}A1.displayName="EdgeText";const tI=j.memo(A1);function df({path:t,labelX:e,labelY:n,label:s,labelStyle:a,labelShowBg:l,labelBgStyle:c,labelBgPadding:d,labelBgBorderRadius:f,interactionWidth:h=20,...p}){return b.jsxs(b.Fragment,{children:[b.jsx("path",{...p,d:t,fill:"none",className:Rt(["react-flow__edge-path",p.className])}),h?b.jsx("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:h,className:"react-flow__edge-interaction"}):null,s&&rr(e)&&rr(n)?b.jsx(tI,{x:e,y:n,label:s,labelStyle:a,labelShowBg:l,labelBgStyle:c,labelBgPadding:d,labelBgBorderRadius:f}):null]})}function Gw({pos:t,x1:e,y1:n,x2:s,y2:a}){return t===Se.Left||t===Se.Right?[.5*(e+s),n]:[e,.5*(n+a)]}function T1({sourceX:t,sourceY:e,sourcePosition:n=Se.Bottom,targetX:s,targetY:a,targetPosition:l=Se.Top}){const[c,d]=Gw({pos:n,x1:t,y1:e,x2:s,y2:a}),[f,h]=Gw({pos:l,x1:s,y1:a,x2:t,y2:e}),[p,g,v,_]=QE({sourceX:t,sourceY:e,targetX:s,targetY:a,sourceControlX:c,sourceControlY:d,targetControlX:f,targetControlY:h});return[`M${t},${e} C${c},${d} ${f},${h} ${s},${a}`,p,g,v,_]}function N1(t){return j.memo(({id:e,sourceX:n,sourceY:s,targetX:a,targetY:l,sourcePosition:c,targetPosition:d,label:f,labelStyle:h,labelShowBg:p,labelBgStyle:g,labelBgPadding:v,labelBgBorderRadius:_,style:x,markerEnd:w,markerStart:S,interactionWidth:A})=>{const[N,E,C]=T1({sourceX:n,sourceY:s,sourcePosition:c,targetX:a,targetY:l,targetPosition:d}),O=t.isInternal?void 0:e;return b.jsx(df,{id:O,path:N,labelX:E,labelY:C,label:f,labelStyle:h,labelShowBg:p,labelBgStyle:g,labelBgPadding:v,labelBgBorderRadius:_,style:x,markerEnd:w,markerStart:S,interactionWidth:A})})}const nI=N1({isInternal:!1}),O1=N1({isInternal:!0});nI.displayName="SimpleBezierEdge";O1.displayName="SimpleBezierEdgeInternal";function R1(t){return j.memo(({id:e,sourceX:n,sourceY:s,targetX:a,targetY:l,label:c,labelStyle:d,labelShowBg:f,labelBgStyle:h,labelBgPadding:p,labelBgBorderRadius:g,style:v,sourcePosition:_=Se.Bottom,targetPosition:x=Se.Top,markerEnd:w,markerStart:S,pathOptions:A,interactionWidth:N})=>{const[E,C,O]=Kp({sourceX:n,sourceY:s,sourcePosition:_,targetX:a,targetY:l,targetPosition:x,borderRadius:A?.borderRadius,offset:A?.offset,stepPosition:A?.stepPosition}),k=t.isInternal?void 0:e;return b.jsx(df,{id:k,path:E,labelX:C,labelY:O,label:c,labelStyle:d,labelShowBg:f,labelBgStyle:h,labelBgPadding:p,labelBgBorderRadius:g,style:v,markerEnd:w,markerStart:S,interactionWidth:N})})}const j1=R1({isInternal:!1}),k1=R1({isInternal:!0});j1.displayName="SmoothStepEdge";k1.displayName="SmoothStepEdgeInternal";function M1(t){return j.memo(({id:e,...n})=>{const s=t.isInternal?void 0:e;return b.jsx(j1,{...n,id:s,pathOptions:j.useMemo(()=>({borderRadius:0,offset:n.pathOptions?.offset}),[n.pathOptions?.offset])})})}const rI=M1({isInternal:!1}),D1=M1({isInternal:!0});rI.displayName="StepEdge";D1.displayName="StepEdgeInternal";function U1(t){return j.memo(({id:e,sourceX:n,sourceY:s,targetX:a,targetY:l,label:c,labelStyle:d,labelShowBg:f,labelBgStyle:h,labelBgPadding:p,labelBgBorderRadius:g,style:v,markerEnd:_,markerStart:x,interactionWidth:w})=>{const[S,A,N]=ZE({sourceX:n,sourceY:s,targetX:a,targetY:l}),E=t.isInternal?void 0:e;return b.jsx(df,{id:E,path:S,labelX:A,labelY:N,label:c,labelStyle:d,labelShowBg:f,labelBgStyle:h,labelBgPadding:p,labelBgBorderRadius:g,style:v,markerEnd:_,markerStart:x,interactionWidth:w})})}const sI=U1({isInternal:!1}),$1=U1({isInternal:!0});sI.displayName="StraightEdge";$1.displayName="StraightEdgeInternal";function I1(t){return j.memo(({id:e,sourceX:n,sourceY:s,targetX:a,targetY:l,sourcePosition:c=Se.Bottom,targetPosition:d=Se.Top,label:f,labelStyle:h,labelShowBg:p,labelBgStyle:g,labelBgPadding:v,labelBgBorderRadius:_,style:x,markerEnd:w,markerStart:S,pathOptions:A,interactionWidth:N})=>{const[E,C,O]=Pg({sourceX:n,sourceY:s,sourcePosition:c,targetX:a,targetY:l,targetPosition:d,curvature:A?.curvature}),k=t.isInternal?void 0:e;return b.jsx(df,{id:k,path:E,labelX:C,labelY:O,label:f,labelStyle:h,labelShowBg:p,labelBgStyle:g,labelBgPadding:v,labelBgBorderRadius:_,style:x,markerEnd:w,markerStart:S,interactionWidth:N})})}const iI=I1({isInternal:!1}),L1=I1({isInternal:!0});iI.displayName="BezierEdge";L1.displayName="BezierEdgeInternal";const Xw={default:L1,straight:$1,step:D1,smoothstep:k1,simplebezier:O1},Kw={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},aI=(t,e,n)=>n===Se.Left?t-e:n===Se.Right?t+e:t,oI=(t,e,n)=>n===Se.Top?t-e:n===Se.Bottom?t+e:t,Qw="react-flow__edgeupdater";function Ww({position:t,centerX:e,centerY:n,radius:s=10,onMouseDown:a,onMouseEnter:l,onMouseOut:c,type:d}){return b.jsx("circle",{onMouseDown:a,onMouseEnter:l,onMouseOut:c,className:Rt([Qw,`${Qw}-${d}`]),cx:aI(e,s,t),cy:oI(n,s,t),r:s,stroke:"transparent",fill:"transparent"})}function lI({isReconnectable:t,reconnectRadius:e,edge:n,sourceX:s,sourceY:a,targetX:l,targetY:c,sourcePosition:d,targetPosition:f,onReconnect:h,onReconnectStart:p,onReconnectEnd:g,setReconnecting:v,setUpdateHover:_}){const x=mt(),w=(C,O)=>{if(C.button!==0)return;const{autoPanOnConnect:k,domNode:R,isValidConnection:$,connectionMode:L,connectionRadius:X,lib:F,onConnectStart:H,onConnectEnd:W,cancelConnection:I,nodeLookup:V,rfId:U,panBy:z,updateConnection:q}=x.getState(),B=O.type==="target",G=(Z,K)=>{v(!1),g?.(Z,n,O.type,K)},D=Z=>h?.(n,Z),P=(Z,K)=>{v(!0),p?.(C,n,O.type),H?.(Z,K)};Jp.onPointerDown(C.nativeEvent,{autoPanOnConnect:k,connectionMode:L,connectionRadius:X,domNode:R,handleId:O.id,nodeId:O.nodeId,nodeLookup:V,isTarget:B,edgeUpdaterType:O.type,lib:F,flowId:U,cancelConnection:I,panBy:z,isValidConnection:$,onConnect:D,onConnectStart:P,onConnectEnd:W,onReconnectEnd:G,updateConnection:q,getTransform:()=>x.getState().transform,getFromHandle:()=>x.getState().connection.fromHandle,dragThreshold:x.getState().connectionDragThreshold,handleDomNode:C.currentTarget})},S=C=>w(C,{nodeId:n.target,id:n.targetHandle??null,type:"target"}),A=C=>w(C,{nodeId:n.source,id:n.sourceHandle??null,type:"source"}),N=()=>_(!0),E=()=>_(!1);return b.jsxs(b.Fragment,{children:[(t===!0||t==="source")&&b.jsx(Ww,{position:d,centerX:s,centerY:a,radius:e,onMouseDown:S,onMouseEnter:N,onMouseOut:E,type:"source"}),(t===!0||t==="target")&&b.jsx(Ww,{position:f,centerX:l,centerY:c,radius:e,onMouseDown:A,onMouseEnter:N,onMouseOut:E,type:"target"})]})}function cI({id:t,edgesFocusable:e,edgesReconnectable:n,elementsSelectable:s,onClick:a,onDoubleClick:l,onContextMenu:c,onMouseEnter:d,onMouseMove:f,onMouseLeave:h,reconnectRadius:p,onReconnect:g,onReconnectStart:v,onReconnectEnd:_,rfId:x,edgeTypes:w,noPanClassName:S,onError:A,disableKeyboardA11y:N}){let E=Ke(ve=>ve.edgeLookup.get(t));const C=Ke(ve=>ve.defaultEdgeOptions);E=C?{...C,...E}:E;let O=E.type||"default",k=w?.[O]||Xw[O];k===void 0&&(A?.("011",ir.error011(O)),O="default",k=w?.default||Xw.default);const R=!!(E.focusable||e&&typeof E.focusable>"u"),$=typeof g<"u"&&(E.reconnectable||n&&typeof E.reconnectable>"u"),L=!!(E.selectable||s&&typeof E.selectable>"u"),X=j.useRef(null),[F,H]=j.useState(!1),[W,I]=j.useState(!1),V=mt(),{zIndex:U,sourceX:z,sourceY:q,targetX:B,targetY:G,sourcePosition:D,targetPosition:P}=Ke(j.useCallback(ve=>{const Ce=ve.nodeLookup.get(E.source),ze=ve.nodeLookup.get(E.target);if(!Ce||!ze)return{zIndex:E.zIndex,...Kw};const me=ZU({id:t,sourceNode:Ce,targetNode:ze,sourceHandle:E.sourceHandle||null,targetHandle:E.targetHandle||null,connectionMode:ve.connectionMode,onError:A});return{zIndex:YU({selected:E.selected,zIndex:E.zIndex,sourceNode:Ce,targetNode:ze,elevateOnSelect:ve.elevateEdgesOnSelect}),...me||Kw}},[E.source,E.target,E.sourceHandle,E.targetHandle,E.selected,E.zIndex]),vt),Z=j.useMemo(()=>E.markerStart?`url('#${Qp(E.markerStart,x)}')`:void 0,[E.markerStart,x]),K=j.useMemo(()=>E.markerEnd?`url('#${Qp(E.markerEnd,x)}')`:void 0,[E.markerEnd,x]);if(E.hidden||z===null||q===null||B===null||G===null)return null;const re=ve=>{const{addSelectedEdges:Ce,unselectNodesAndEdges:ze,multiSelectionActive:me}=V.getState();L&&(V.setState({nodesSelectionActive:!1}),E.selected&&me?(ze({nodes:[],edges:[E]}),X.current?.blur()):Ce([t])),a&&a(ve,E)},ee=l?ve=>{l(ve,{...E})}:void 0,oe=c?ve=>{c(ve,{...E})}:void 0,ce=d?ve=>{d(ve,{...E})}:void 0,he=f?ve=>{f(ve,{...E})}:void 0,ye=h?ve=>{h(ve,{...E})}:void 0,xe=ve=>{if(!N&&$E.includes(ve.key)&&L){const{unselectNodesAndEdges:Ce,addSelectedEdges:ze}=V.getState();ve.key==="Escape"?(X.current?.blur(),Ce({edges:[E]})):ze([t])}};return b.jsx("svg",{style:{zIndex:U},children:b.jsxs("g",{className:Rt(["react-flow__edge",`react-flow__edge-${O}`,E.className,S,{selected:E.selected,animated:E.animated,inactive:!L&&!a,updating:F,selectable:L}]),onClick:re,onDoubleClick:ee,onContextMenu:oe,onMouseEnter:ce,onMouseMove:he,onMouseLeave:ye,onKeyDown:R?xe:void 0,tabIndex:R?0:void 0,role:E.ariaRole??(R?"group":"img"),"aria-roledescription":"edge","data-id":t,"data-testid":`rf__edge-${t}`,"aria-label":E.ariaLabel===null?void 0:E.ariaLabel||`Edge from ${E.source} to ${E.target}`,"aria-describedby":R?`${m1}-${x}`:void 0,ref:X,...E.domAttributes,children:[!W&&b.jsx(k,{id:t,source:E.source,target:E.target,type:E.type,selected:E.selected,animated:E.animated,selectable:L,deletable:E.deletable??!0,label:E.label,labelStyle:E.labelStyle,labelShowBg:E.labelShowBg,labelBgStyle:E.labelBgStyle,labelBgPadding:E.labelBgPadding,labelBgBorderRadius:E.labelBgBorderRadius,sourceX:z,sourceY:q,targetX:B,targetY:G,sourcePosition:D,targetPosition:P,data:E.data,style:E.style,sourceHandleId:E.sourceHandle,targetHandleId:E.targetHandle,markerStart:Z,markerEnd:K,pathOptions:"pathOptions"in E?E.pathOptions:void 0,interactionWidth:E.interactionWidth}),$&&b.jsx(lI,{edge:E,isReconnectable:$,reconnectRadius:p,onReconnect:g,onReconnectStart:v,onReconnectEnd:_,sourceX:z,sourceY:q,targetX:B,targetY:G,sourcePosition:D,targetPosition:P,setUpdateHover:H,setReconnecting:I})]})})}var uI=j.memo(cI);const dI=t=>({edgesFocusable:t.edgesFocusable,edgesReconnectable:t.edgesReconnectable,elementsSelectable:t.elementsSelectable,connectionMode:t.connectionMode,onError:t.onError});function z1({defaultMarkerColor:t,onlyRenderVisibleElements:e,rfId:n,edgeTypes:s,noPanClassName:a,onReconnect:l,onEdgeContextMenu:c,onEdgeMouseEnter:d,onEdgeMouseMove:f,onEdgeMouseLeave:h,onEdgeClick:p,reconnectRadius:g,onEdgeDoubleClick:v,onReconnectStart:_,onReconnectEnd:x,disableKeyboardA11y:w}){const{edgesFocusable:S,edgesReconnectable:A,elementsSelectable:N,onError:E}=Ke(dI,vt),C=K$(e);return b.jsxs("div",{className:"react-flow__edges",children:[b.jsx(eI,{defaultColor:t,rfId:n}),C.map(O=>b.jsx(uI,{id:O,edgesFocusable:S,edgesReconnectable:A,elementsSelectable:N,noPanClassName:a,onReconnect:l,onContextMenu:c,onMouseEnter:d,onMouseMove:f,onMouseLeave:h,onClick:p,reconnectRadius:g,onDoubleClick:v,onReconnectStart:_,onReconnectEnd:x,rfId:n,onError:E,edgeTypes:s,disableKeyboardA11y:w},O))]})}z1.displayName="EdgeRenderer";const fI=j.memo(z1),hI=t=>`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]})`;function mI({children:t}){const e=Ke(hI);return b.jsx("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform:e},children:t})}function pI(t){const e=Wa(),n=j.useRef(!1);j.useEffect(()=>{!n.current&&e.viewportInitialized&&t&&(setTimeout(()=>t(e),1),n.current=!0)},[t,e.viewportInitialized])}const gI=t=>t.panZoom?.syncViewport;function yI(t){const e=Ke(gI),n=mt();return j.useEffect(()=>{t&&(e?.(t),n.setState({transform:[t.x,t.y,t.zoom]}))},[t,e]),null}function vI(t){return t.connection.inProgress?{...t.connection,to:tc(t.connection.to,t.transform)}:{...t.connection}}function _I(t){return vI}function bI(t){const e=_I();return Ke(e,vt)}const wI=t=>({nodesConnectable:t.nodesConnectable,isValid:t.connection.isValid,inProgress:t.connection.inProgress,width:t.width,height:t.height});function xI({containerStyle:t,style:e,type:n,component:s}){const{nodesConnectable:a,width:l,height:c,isValid:d,inProgress:f}=Ke(wI,vt);return!(l&&a&&f)?null:b.jsx("svg",{style:t,width:l,height:c,className:"react-flow__connectionline react-flow__container",children:b.jsx("g",{className:Rt(["react-flow__connection",zE(d)]),children:b.jsx(B1,{style:e,type:n,CustomComponent:s,isValid:d})})})}const B1=({style:t,type:e=Us.Bezier,CustomComponent:n,isValid:s})=>{const{inProgress:a,from:l,fromNode:c,fromHandle:d,fromPosition:f,to:h,toNode:p,toHandle:g,toPosition:v,pointer:_}=bI();if(!a)return;if(n)return b.jsx(n,{connectionLineType:e,connectionLineStyle:t,fromNode:c,fromHandle:d,fromX:l.x,fromY:l.y,toX:h.x,toY:h.y,fromPosition:f,toPosition:v,connectionStatus:zE(s),toNode:p,toHandle:g,pointer:_});let x="";const w={sourceX:l.x,sourceY:l.y,sourcePosition:f,targetX:h.x,targetY:h.y,targetPosition:v};switch(e){case Us.Bezier:[x]=Pg(w);break;case Us.SimpleBezier:[x]=T1(w);break;case Us.Step:[x]=Kp({...w,borderRadius:0});break;case Us.SmoothStep:[x]=Kp(w);break;default:[x]=ZE(w)}return b.jsx("path",{d:x,fill:"none",className:"react-flow__connection-path",style:t})};B1.displayName="ConnectionLine";const SI={};function Jw(t=SI){j.useRef(t),mt(),j.useEffect(()=>{},[t])}function EI(){mt(),j.useRef(!1),j.useEffect(()=>{},[])}function P1({nodeTypes:t,edgeTypes:e,onInit:n,onNodeClick:s,onEdgeClick:a,onNodeDoubleClick:l,onEdgeDoubleClick:c,onNodeMouseEnter:d,onNodeMouseMove:f,onNodeMouseLeave:h,onNodeContextMenu:p,onSelectionContextMenu:g,onSelectionStart:v,onSelectionEnd:_,connectionLineType:x,connectionLineStyle:w,connectionLineComponent:S,connectionLineContainerStyle:A,selectionKeyCode:N,selectionOnDrag:E,selectionMode:C,multiSelectionKeyCode:O,panActivationKeyCode:k,zoomActivationKeyCode:R,deleteKeyCode:$,onlyRenderVisibleElements:L,elementsSelectable:X,defaultViewport:F,translateExtent:H,minZoom:W,maxZoom:I,preventScrolling:V,defaultMarkerColor:U,zoomOnScroll:z,zoomOnPinch:q,panOnScroll:B,panOnScrollSpeed:G,panOnScrollMode:D,zoomOnDoubleClick:P,panOnDrag:Z,onPaneClick:K,onPaneMouseEnter:re,onPaneMouseMove:ee,onPaneMouseLeave:oe,onPaneScroll:ce,onPaneContextMenu:he,paneClickDistance:ye,nodeClickDistance:xe,onEdgeContextMenu:ve,onEdgeMouseEnter:Ce,onEdgeMouseMove:ze,onEdgeMouseLeave:me,reconnectRadius:ge,onReconnect:Me,onReconnectStart:Pe,onReconnectEnd:ct,noDragClassName:ln,noWheelClassName:ut,noPanClassName:nn,disableKeyboardA11y:It,nodeExtent:dt,rfId:rn,viewport:Bt,onViewportChange:jt}){return Jw(t),Jw(e),EI(),pI(n),yI(Bt),b.jsx(z$,{onPaneClick:K,onPaneMouseEnter:re,onPaneMouseMove:ee,onPaneMouseLeave:oe,onPaneContextMenu:he,onPaneScroll:ce,paneClickDistance:ye,deleteKeyCode:$,selectionKeyCode:N,selectionOnDrag:E,selectionMode:C,onSelectionStart:v,onSelectionEnd:_,multiSelectionKeyCode:O,panActivationKeyCode:k,zoomActivationKeyCode:R,elementsSelectable:X,zoomOnScroll:z,zoomOnPinch:q,zoomOnDoubleClick:P,panOnScroll:B,panOnScrollSpeed:G,panOnScrollMode:D,panOnDrag:Z,defaultViewport:F,translateExtent:H,minZoom:W,maxZoom:I,onSelectionContextMenu:g,preventScrolling:V,noDragClassName:ln,noWheelClassName:ut,noPanClassName:nn,disableKeyboardA11y:It,onViewportChange:jt,isControlledViewport:!!Bt,children:b.jsxs(mI,{children:[b.jsx(fI,{edgeTypes:e,onEdgeClick:a,onEdgeDoubleClick:c,onReconnect:Me,onReconnectStart:Pe,onReconnectEnd:ct,onlyRenderVisibleElements:L,onEdgeContextMenu:ve,onEdgeMouseEnter:Ce,onEdgeMouseMove:ze,onEdgeMouseLeave:me,reconnectRadius:ge,defaultMarkerColor:U,noPanClassName:nn,disableKeyboardA11y:It,rfId:rn}),b.jsx(xI,{style:w,type:x,component:S,containerStyle:A}),b.jsx("div",{className:"react-flow__edgelabel-renderer"}),b.jsx(X$,{nodeTypes:t,onNodeClick:s,onNodeDoubleClick:l,onNodeMouseEnter:d,onNodeMouseMove:f,onNodeMouseLeave:h,onNodeContextMenu:p,nodeClickDistance:xe,onlyRenderVisibleElements:L,noPanClassName:nn,noDragClassName:ln,disableKeyboardA11y:It,nodeExtent:dt,rfId:rn}),b.jsx("div",{className:"react-flow__viewport-portal"})]})})}P1.displayName="GraphView";const CI=j.memo(P1),Zw=({nodes:t,edges:e,defaultNodes:n,defaultEdges:s,width:a,height:l,fitView:c,fitViewOptions:d,minZoom:f=.5,maxZoom:h=2,nodeOrigin:p,nodeExtent:g}={})=>{const v=new Map,_=new Map,x=new Map,w=new Map,S=s??e??[],A=n??t??[],N=p??[0,0],E=g??Il;n1(x,w,S);const C=Wp(A,v,_,{nodeOrigin:N,nodeExtent:E,elevateNodesOnSelect:!1});let O=[0,0,1];if(c&&a&&l){const k=Zl(v,{filter:X=>!!((X.width||X.initialWidth)&&(X.height||X.initialHeight))}),{x:R,y:$,zoom:L}=zg(k,a,l,f,h,d?.padding??.1);O=[R,$,L]}return{rfId:"1",width:a??0,height:l??0,transform:O,nodes:A,nodesInitialized:C,nodeLookup:v,parentLookup:_,edges:S,edgeLookup:w,connectionLookup:x,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:n!==void 0,hasDefaultEdges:s!==void 0,panZoom:null,minZoom:f,maxZoom:h,translateExtent:Il,nodeExtent:E,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:qa.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:N,nodeDragThreshold:1,connectionDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!1,selectNodesOnDrag:!0,multiSelectionActive:!1,fitViewQueued:c??!1,fitViewOptions:d,fitViewResolver:null,connection:{...LE},connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanOnNodeFocus:!0,autoPanSpeed:15,connectionRadius:20,onError:BU,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react",debug:!1,ariaLabelConfig:IE}},AI=({nodes:t,edges:e,defaultNodes:n,defaultEdges:s,width:a,height:l,fitView:c,fitViewOptions:d,minZoom:f,maxZoom:h,nodeOrigin:p,nodeExtent:g})=>V3((v,_)=>{async function x(){const{nodeLookup:w,panZoom:S,fitViewOptions:A,fitViewResolver:N,width:E,height:C,minZoom:O,maxZoom:k}=_();S&&(await LU({nodes:w,width:E,height:C,panZoom:S,minZoom:O,maxZoom:k},A),N?.resolve(!0),v({fitViewResolver:null}))}return{...Zw({nodes:t,edges:e,width:a,height:l,fitView:c,fitViewOptions:d,minZoom:f,maxZoom:h,nodeOrigin:p,nodeExtent:g,defaultNodes:n,defaultEdges:s}),setNodes:w=>{const{nodeLookup:S,parentLookup:A,nodeOrigin:N,elevateNodesOnSelect:E,fitViewQueued:C}=_(),O=Wp(w,S,A,{nodeOrigin:N,nodeExtent:g,elevateNodesOnSelect:E,checkEquality:!0});C&&O?(x(),v({nodes:w,nodesInitialized:O,fitViewQueued:!1,fitViewOptions:void 0})):v({nodes:w,nodesInitialized:O})},setEdges:w=>{const{connectionLookup:S,edgeLookup:A}=_();n1(S,A,w),v({edges:w})},setDefaultNodesAndEdges:(w,S)=>{if(w){const{setNodes:A}=_();A(w),v({hasDefaultNodes:!0})}if(S){const{setEdges:A}=_();A(S),v({hasDefaultEdges:!0})}},updateNodeInternals:w=>{const{triggerNodeChanges:S,nodeLookup:A,parentLookup:N,domNode:E,nodeOrigin:C,nodeExtent:O,debug:k,fitViewQueued:R}=_(),{changes:$,updatedInternals:L}=o3(w,A,N,E,C,O);L&&(r3(A,N,{nodeOrigin:C,nodeExtent:O}),R?(x(),v({fitViewQueued:!1,fitViewOptions:void 0})):v({}),$?.length>0&&(k&&console.log("React Flow: trigger node changes",$),S?.($)))},updateNodePositions:(w,S=!1)=>{const A=[],N=[],{nodeLookup:E,triggerNodeChanges:C}=_();for(const[O,k]of w){const R=E.get(O),$=!!(R?.expandParent&&R?.parentId&&k?.position),L={id:O,type:"position",position:$?{x:Math.max(0,k.position.x),y:Math.max(0,k.position.y)}:k.position,dragging:S};$&&R.parentId&&A.push({id:O,parentId:R.parentId,rect:{...k.internals.positionAbsolute,width:k.measured.width??0,height:k.measured.height??0}}),N.push(L)}if(A.length>0){const{parentLookup:O,nodeOrigin:k}=_(),R=Fg(A,E,O,k);N.push(...R)}C(N)},triggerNodeChanges:w=>{const{onNodesChange:S,setNodes:A,nodes:N,hasDefaultNodes:E,debug:C}=_();if(w?.length){if(E){const O=y1(w,N);A(O)}C&&console.log("React Flow: trigger node changes",w),S?.(w)}},triggerEdgeChanges:w=>{const{onEdgesChange:S,setEdges:A,edges:N,hasDefaultEdges:E,debug:C}=_();if(w?.length){if(E){const O=v1(w,N);A(O)}C&&console.log("React Flow: trigger edge changes",w),S?.(w)}},addSelectedNodes:w=>{const{multiSelectionActive:S,edgeLookup:A,nodeLookup:N,triggerNodeChanges:E,triggerEdgeChanges:C}=_();if(S){const O=w.map(k=>ci(k,!0));E(O);return}E(Da(N,new Set([...w]),!0)),C(Da(A))},addSelectedEdges:w=>{const{multiSelectionActive:S,edgeLookup:A,nodeLookup:N,triggerNodeChanges:E,triggerEdgeChanges:C}=_();if(S){const O=w.map(k=>ci(k,!0));C(O);return}C(Da(A,new Set([...w]))),E(Da(N,new Set,!0))},unselectNodesAndEdges:({nodes:w,edges:S}={})=>{const{edges:A,nodes:N,nodeLookup:E,triggerNodeChanges:C,triggerEdgeChanges:O}=_(),k=w||N,R=S||A,$=k.map(X=>{const F=E.get(X.id);return F&&(F.selected=!1),ci(X.id,!1)}),L=R.map(X=>ci(X.id,!1));C($),O(L)},setMinZoom:w=>{const{panZoom:S,maxZoom:A}=_();S?.setScaleExtent([w,A]),v({minZoom:w})},setMaxZoom:w=>{const{panZoom:S,minZoom:A}=_();S?.setScaleExtent([A,w]),v({maxZoom:w})},setTranslateExtent:w=>{_().panZoom?.setTranslateExtent(w),v({translateExtent:w})},resetSelectedElements:()=>{const{edges:w,nodes:S,triggerNodeChanges:A,triggerEdgeChanges:N,elementsSelectable:E}=_();if(!E)return;const C=S.reduce((k,R)=>R.selected?[...k,ci(R.id,!1)]:k,[]),O=w.reduce((k,R)=>R.selected?[...k,ci(R.id,!1)]:k,[]);A(C),N(O)},setNodeExtent:w=>{const{nodes:S,nodeLookup:A,parentLookup:N,nodeOrigin:E,elevateNodesOnSelect:C,nodeExtent:O}=_();w[0][0]===O[0][0]&&w[0][1]===O[0][1]&&w[1][0]===O[1][0]&&w[1][1]===O[1][1]||(Wp(S,A,N,{nodeOrigin:E,nodeExtent:w,elevateNodesOnSelect:C,checkEquality:!1}),v({nodeExtent:w}))},panBy:w=>{const{transform:S,width:A,height:N,panZoom:E,translateExtent:C}=_();return l3({delta:w,panZoom:E,transform:S,translateExtent:C,width:A,height:N})},setCenter:async(w,S,A)=>{const{width:N,height:E,maxZoom:C,panZoom:O}=_();if(!O)return Promise.resolve(!1);const k=typeof A?.zoom<"u"?A.zoom:C;return await O.setViewport({x:N/2-w*k,y:E/2-S*k,zoom:k},{duration:A?.duration,ease:A?.ease,interpolate:A?.interpolate}),Promise.resolve(!0)},cancelConnection:()=>{v({connection:{...LE}})},updateConnection:w=>{v({connection:w})},reset:()=>v({...Zw()})}},Object.is);function TI({initialNodes:t,initialEdges:e,defaultNodes:n,defaultEdges:s,initialWidth:a,initialHeight:l,initialMinZoom:c,initialMaxZoom:d,initialFitViewOptions:f,fitView:h,nodeOrigin:p,nodeExtent:g,children:v}){const[_]=j.useState(()=>AI({nodes:t,edges:e,defaultNodes:n,defaultEdges:s,width:a,height:l,fitView:h,minZoom:c,maxZoom:d,fitViewOptions:f,nodeOrigin:p,nodeExtent:g}));return b.jsx(F3,{value:_,children:b.jsx(m$,{children:v})})}function NI({children:t,nodes:e,edges:n,defaultNodes:s,defaultEdges:a,width:l,height:c,fitView:d,fitViewOptions:f,minZoom:h,maxZoom:p,nodeOrigin:g,nodeExtent:v}){return j.useContext(lf)?b.jsx(b.Fragment,{children:t}):b.jsx(TI,{initialNodes:e,initialEdges:n,defaultNodes:s,defaultEdges:a,initialWidth:l,initialHeight:c,fitView:d,initialFitViewOptions:f,initialMinZoom:h,initialMaxZoom:p,nodeOrigin:g,nodeExtent:v,children:t})}const OI={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0};function RI({nodes:t,edges:e,defaultNodes:n,defaultEdges:s,className:a,nodeTypes:l,edgeTypes:c,onNodeClick:d,onEdgeClick:f,onInit:h,onMove:p,onMoveStart:g,onMoveEnd:v,onConnect:_,onConnectStart:x,onConnectEnd:w,onClickConnectStart:S,onClickConnectEnd:A,onNodeMouseEnter:N,onNodeMouseMove:E,onNodeMouseLeave:C,onNodeContextMenu:O,onNodeDoubleClick:k,onNodeDragStart:R,onNodeDrag:$,onNodeDragStop:L,onNodesDelete:X,onEdgesDelete:F,onDelete:H,onSelectionChange:W,onSelectionDragStart:I,onSelectionDrag:V,onSelectionDragStop:U,onSelectionContextMenu:z,onSelectionStart:q,onSelectionEnd:B,onBeforeDelete:G,connectionMode:D,connectionLineType:P=Us.Bezier,connectionLineStyle:Z,connectionLineComponent:K,connectionLineContainerStyle:re,deleteKeyCode:ee="Backspace",selectionKeyCode:oe="Shift",selectionOnDrag:ce=!1,selectionMode:he=Ll.Full,panActivationKeyCode:ye="Space",multiSelectionKeyCode:xe=Bl()?"Meta":"Control",zoomActivationKeyCode:ve=Bl()?"Meta":"Control",snapToGrid:Ce,snapGrid:ze,onlyRenderVisibleElements:me=!1,selectNodesOnDrag:ge,nodesDraggable:Me,autoPanOnNodeFocus:Pe,nodesConnectable:ct,nodesFocusable:ln,nodeOrigin:ut=p1,edgesFocusable:nn,edgesReconnectable:It,elementsSelectable:dt=!0,defaultViewport:rn=s$,minZoom:Bt=.5,maxZoom:jt=2,translateExtent:fe=Il,preventScrolling:_e=!0,nodeExtent:Ae,defaultMarkerColor:Le="#b1b1b7",zoomOnScroll:ft=!0,zoomOnPinch:pt=!0,panOnScroll:Pt=!1,panOnScrollSpeed:or=.5,panOnScrollMode:sn=bi.Free,zoomOnDoubleClick:Ef=!0,panOnDrag:Cf=!0,onPaneClick:Af,onPaneMouseEnter:Ni,onPaneMouseMove:Oi,onPaneMouseLeave:Ri,onPaneScroll:wr,onPaneContextMenu:ji,paneClickDistance:Bs=1,nodeClickDistance:Tf=0,children:ac,onReconnect:eo,onReconnectStart:Ps,onReconnectEnd:Nf,onEdgeContextMenu:oc,onEdgeDoubleClick:lc,onEdgeMouseEnter:cc,onEdgeMouseMove:to,onEdgeMouseLeave:no,reconnectRadius:uc=10,onNodesChange:dc,onEdgesChange:lr,noDragClassName:kt="nodrag",noWheelClassName:Qt="nowheel",noPanClassName:xr="nopan",fitView:ki,fitViewOptions:fc,connectOnClick:Of,attributionPosition:hc,proOptions:qs,defaultEdgeOptions:ro,elevateNodesOnSelect:Zr,elevateEdgesOnSelect:es,disableKeyboardA11y:ts=!1,autoPanOnConnect:ns,autoPanOnNodeDrag:St,autoPanSpeed:mc,connectionRadius:pc,isValidConnection:Sr,onError:rs,style:Rf,id:so,nodeDragThreshold:gc,connectionDragThreshold:jf,viewport:Mi,onViewportChange:Di,width:Fn,height:cn,colorMode:yc="light",debug:kf,onScroll:Ui,ariaLabelConfig:vc,...$i},Mf){const Wt=so||"1",io=l$(yc),_c=j.useCallback(Ii=>{Ii.currentTarget.scrollTo({top:0,left:0,behavior:"instant"}),Ui?.(Ii)},[Ui]);return b.jsx("div",{"data-testid":"rf__wrapper",...$i,onScroll:_c,style:{...Rf,...OI},ref:Mf,className:Rt(["react-flow",a,io]),id:so,role:"application",children:b.jsxs(NI,{nodes:t,edges:e,width:Fn,height:cn,fitView:ki,fitViewOptions:fc,minZoom:Bt,maxZoom:jt,nodeOrigin:ut,nodeExtent:Ae,children:[b.jsx(CI,{onInit:h,onNodeClick:d,onEdgeClick:f,onNodeMouseEnter:N,onNodeMouseMove:E,onNodeMouseLeave:C,onNodeContextMenu:O,onNodeDoubleClick:k,nodeTypes:l,edgeTypes:c,connectionLineType:P,connectionLineStyle:Z,connectionLineComponent:K,connectionLineContainerStyle:re,selectionKeyCode:oe,selectionOnDrag:ce,selectionMode:he,deleteKeyCode:ee,multiSelectionKeyCode:xe,panActivationKeyCode:ye,zoomActivationKeyCode:ve,onlyRenderVisibleElements:me,defaultViewport:rn,translateExtent:fe,minZoom:Bt,maxZoom:jt,preventScrolling:_e,zoomOnScroll:ft,zoomOnPinch:pt,zoomOnDoubleClick:Ef,panOnScroll:Pt,panOnScrollSpeed:or,panOnScrollMode:sn,panOnDrag:Cf,onPaneClick:Af,onPaneMouseEnter:Ni,onPaneMouseMove:Oi,onPaneMouseLeave:Ri,onPaneScroll:wr,onPaneContextMenu:ji,paneClickDistance:Bs,nodeClickDistance:Tf,onSelectionContextMenu:z,onSelectionStart:q,onSelectionEnd:B,onReconnect:eo,onReconnectStart:Ps,onReconnectEnd:Nf,onEdgeContextMenu:oc,onEdgeDoubleClick:lc,onEdgeMouseEnter:cc,onEdgeMouseMove:to,onEdgeMouseLeave:no,reconnectRadius:uc,defaultMarkerColor:Le,noDragClassName:kt,noWheelClassName:Qt,noPanClassName:xr,rfId:Wt,disableKeyboardA11y:ts,nodeExtent:Ae,viewport:Mi,onViewportChange:Di}),b.jsx(o$,{nodes:t,edges:e,defaultNodes:n,defaultEdges:s,onConnect:_,onConnectStart:x,onConnectEnd:w,onClickConnectStart:S,onClickConnectEnd:A,nodesDraggable:Me,autoPanOnNodeFocus:Pe,nodesConnectable:ct,nodesFocusable:ln,edgesFocusable:nn,edgesReconnectable:It,elementsSelectable:dt,elevateNodesOnSelect:Zr,elevateEdgesOnSelect:es,minZoom:Bt,maxZoom:jt,nodeExtent:Ae,onNodesChange:dc,onEdgesChange:lr,snapToGrid:Ce,snapGrid:ze,connectionMode:D,translateExtent:fe,connectOnClick:Of,defaultEdgeOptions:ro,fitView:ki,fitViewOptions:fc,onNodesDelete:X,onEdgesDelete:F,onDelete:H,onNodeDragStart:R,onNodeDrag:$,onNodeDragStop:L,onSelectionDrag:V,onSelectionDragStart:I,onSelectionDragStop:U,onMove:p,onMoveStart:g,onMoveEnd:v,noPanClassName:xr,nodeOrigin:ut,rfId:Wt,autoPanOnConnect:ns,autoPanOnNodeDrag:St,autoPanSpeed:mc,onError:rs,connectionRadius:pc,isValidConnection:Sr,selectNodesOnDrag:ge,nodeDragThreshold:gc,connectionDragThreshold:jf,onBeforeDelete:G,debug:kf,ariaLabelConfig:vc}),b.jsx(r$,{onSelectionChange:W}),ac,b.jsx(J3,{proOptions:qs,position:hc}),b.jsx(W3,{rfId:Wt,disableKeyboardA11y:ts})]})})}var jI=_1(RI);const kI=ir.error014();function q1({id:t,handleType:e,handleId:n,onConnect:s,onDisconnect:a}={}){const l=Gg(),c=t??l;if(!c)throw new Error(kI);const d=j.useRef(null),f=Ke(h=>h.connectionLookup.get(`${c}${e?n?`-${e}-${n}`:`-${e}`:""}`),MU);return j.useEffect(()=>{if(d.current&&d.current!==f){const h=f??new Map;dw(d.current,h,a),dw(h,d.current,s)}d.current=f??new Map},[f,s,a]),j.useMemo(()=>Array.from(f?.values()??[]),[f])}function MI(t){return Ke(j.useCallback(n=>{const s=[],a=Array.isArray(t),l=a?t:[t];for(const c of l){const d=n.nodeLookup.get(c);d&&s.push({id:d.id,type:d.type,data:d.data})}return a?s:s[0]??null},[t]),c3)}function DI({dimensions:t,lineWidth:e,variant:n,className:s}){return b.jsx("path",{strokeWidth:e,d:`M${t[0]/2} 0 V${t[1]} M0 ${t[1]/2} H${t[0]}`,className:Rt(["react-flow__background-pattern",n,s])})}function UI({radius:t,className:e}){return b.jsx("circle",{cx:t,cy:t,r:t,className:Rt(["react-flow__background-pattern","dots",e])})}var $s;(function(t){t.Lines="lines",t.Dots="dots",t.Cross="cross"})($s||($s={}));const $I={[$s.Dots]:1,[$s.Lines]:1,[$s.Cross]:6},II=t=>({transform:t.transform,patternId:`pattern-${t.rfId}`});function H1({id:t,variant:e=$s.Dots,gap:n=20,size:s,lineWidth:a=1,offset:l=0,color:c,bgColor:d,style:f,className:h,patternClassName:p}){const g=j.useRef(null),{transform:v,patternId:_}=Ke(II,vt),x=s||$I[e],w=e===$s.Dots,S=e===$s.Cross,A=Array.isArray(n)?n:[n,n],N=[A[0]*v[2]||1,A[1]*v[2]||1],E=x*v[2],C=Array.isArray(l)?l:[l,l],O=S?[E,E]:N,k=[C[0]*v[2]||1+O[0]/2,C[1]*v[2]||1+O[1]/2],R=`${_}${t||""}`;return b.jsxs("svg",{className:Rt(["react-flow__background",h]),style:{...f,...uf,"--xy-background-color-props":d,"--xy-background-pattern-color-props":c},ref:g,"data-testid":"rf__background",children:[b.jsx("pattern",{id:R,x:v[0]%N[0],y:v[1]%N[1],width:N[0],height:N[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${k[0]},-${k[1]})`,children:w?b.jsx(UI,{radius:E/2,className:p}):b.jsx(DI,{dimensions:O,lineWidth:a,variant:e,className:p})}),b.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${R})`})]})}H1.displayName="Background";const LI=j.memo(H1);function zI(){return b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:b.jsx("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function BI(){return b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:b.jsx("path",{d:"M0 0h32v4.2H0z"})})}function PI(){return b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:b.jsx("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function qI(){return b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:b.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function HI(){return b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:b.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function Xu({children:t,className:e,...n}){return b.jsx("button",{type:"button",className:Rt(["react-flow__controls-button",e]),...n,children:t})}const VI=t=>({isInteractive:t.nodesDraggable||t.nodesConnectable||t.elementsSelectable,minZoomReached:t.transform[2]<=t.minZoom,maxZoomReached:t.transform[2]>=t.maxZoom,ariaLabelConfig:t.ariaLabelConfig});function V1({style:t,showZoom:e=!0,showFitView:n=!0,showInteractive:s=!0,fitViewOptions:a,onZoomIn:l,onZoomOut:c,onFitView:d,onInteractiveChange:f,className:h,children:p,position:g="bottom-left",orientation:v="vertical","aria-label":_}){const x=mt(),{isInteractive:w,minZoomReached:S,maxZoomReached:A,ariaLabelConfig:N}=Ke(VI,vt),{zoomIn:E,zoomOut:C,fitView:O}=Wa(),k=()=>{E(),l?.()},R=()=>{C(),c?.()},$=()=>{O(a),d?.()},L=()=>{x.setState({nodesDraggable:!w,nodesConnectable:!w,elementsSelectable:!w}),f?.(!w)},X=v==="horizontal"?"horizontal":"vertical";return b.jsxs(cf,{className:Rt(["react-flow__controls",X,h]),position:g,style:t,"data-testid":"rf__controls","aria-label":_??N["controls.ariaLabel"],children:[e&&b.jsxs(b.Fragment,{children:[b.jsx(Xu,{onClick:k,className:"react-flow__controls-zoomin",title:N["controls.zoomIn.ariaLabel"],"aria-label":N["controls.zoomIn.ariaLabel"],disabled:A,children:b.jsx(zI,{})}),b.jsx(Xu,{onClick:R,className:"react-flow__controls-zoomout",title:N["controls.zoomOut.ariaLabel"],"aria-label":N["controls.zoomOut.ariaLabel"],disabled:S,children:b.jsx(BI,{})})]}),n&&b.jsx(Xu,{className:"react-flow__controls-fitview",onClick:$,title:N["controls.fitView.ariaLabel"],"aria-label":N["controls.fitView.ariaLabel"],children:b.jsx(PI,{})}),s&&b.jsx(Xu,{className:"react-flow__controls-interactive",onClick:L,title:N["controls.interactive.ariaLabel"],"aria-label":N["controls.interactive.ariaLabel"],children:w?b.jsx(HI,{}):b.jsx(qI,{})}),p]})}V1.displayName="Controls";const FI=j.memo(V1);function YI({id:t,x:e,y:n,width:s,height:a,style:l,color:c,strokeColor:d,strokeWidth:f,className:h,borderRadius:p,shapeRendering:g,selected:v,onClick:_}){const{background:x,backgroundColor:w}=l||{},S=c||x||w;return b.jsx("rect",{className:Rt(["react-flow__minimap-node",{selected:v},h]),x:e,y:n,rx:p,ry:p,width:s,height:a,style:{fill:S,stroke:d,strokeWidth:f},shapeRendering:g,onClick:_?A=>_(A,t):void 0})}const GI=j.memo(YI),XI=t=>t.nodes.map(e=>e.id),mp=t=>t instanceof Function?t:()=>t;function KI({nodeStrokeColor:t,nodeColor:e,nodeClassName:n="",nodeBorderRadius:s=5,nodeStrokeWidth:a,nodeComponent:l=GI,onClick:c}){const d=Ke(XI,vt),f=mp(e),h=mp(t),p=mp(n),g=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return b.jsx(b.Fragment,{children:d.map(v=>b.jsx(WI,{id:v,nodeColorFunc:f,nodeStrokeColorFunc:h,nodeClassNameFunc:p,nodeBorderRadius:s,nodeStrokeWidth:a,NodeComponent:l,onClick:c,shapeRendering:g},v))})}function QI({id:t,nodeColorFunc:e,nodeStrokeColorFunc:n,nodeClassNameFunc:s,nodeBorderRadius:a,nodeStrokeWidth:l,shapeRendering:c,NodeComponent:d,onClick:f}){const{node:h,x:p,y:g,width:v,height:_}=Ke(x=>{const{internals:w}=x.nodeLookup.get(t),S=w.userNode,{x:A,y:N}=w.positionAbsolute,{width:E,height:C}=Jr(S);return{node:S,x:A,y:N,width:E,height:C}},vt);return!h||h.hidden||!FE(h)?null:b.jsx(d,{x:p,y:g,width:v,height:_,style:h.style,selected:!!h.selected,className:s(h),color:e(h),borderRadius:a,strokeColor:n(h),strokeWidth:l,shapeRendering:c,onClick:f,id:h.id})}const WI=j.memo(QI);var JI=j.memo(KI);const ZI=200,eL=150,tL=t=>!t.hidden,nL=t=>{const e={x:-t.transform[0]/t.transform[2],y:-t.transform[1]/t.transform[2],width:t.width/t.transform[2],height:t.height/t.transform[2]};return{viewBB:e,boundingRect:t.nodeLookup.size>0?VE(Zl(t.nodeLookup,{filter:tL}),e):e,rfId:t.rfId,panZoom:t.panZoom,translateExtent:t.translateExtent,flowWidth:t.width,flowHeight:t.height,ariaLabelConfig:t.ariaLabelConfig}},rL="react-flow__minimap-desc";function F1({style:t,className:e,nodeStrokeColor:n,nodeColor:s,nodeClassName:a="",nodeBorderRadius:l=5,nodeStrokeWidth:c,nodeComponent:d,bgColor:f,maskColor:h,maskStrokeColor:p,maskStrokeWidth:g,position:v="bottom-right",onClick:_,onNodeClick:x,pannable:w=!1,zoomable:S=!1,ariaLabel:A,inversePan:N,zoomStep:E=1,offsetScale:C=5}){const O=mt(),k=j.useRef(null),{boundingRect:R,viewBB:$,rfId:L,panZoom:X,translateExtent:F,flowWidth:H,flowHeight:W,ariaLabelConfig:I}=Ke(nL,vt),V=t?.width??ZI,U=t?.height??eL,z=R.width/V,q=R.height/U,B=Math.max(z,q),G=B*V,D=B*U,P=C*B,Z=R.x-(G-R.width)/2-P,K=R.y-(D-R.height)/2-P,re=G+P*2,ee=D+P*2,oe=`${rL}-${L}`,ce=j.useRef(0),he=j.useRef();ce.current=B,j.useEffect(()=>{if(k.current&&X)return he.current=v3({domNode:k.current,panZoom:X,getTransform:()=>O.getState().transform,getViewScale:()=>ce.current}),()=>{he.current?.destroy()}},[X]),j.useEffect(()=>{he.current?.update({translateExtent:F,width:H,height:W,inversePan:N,pannable:w,zoomStep:E,zoomable:S})},[w,S,N,E,F,H,W]);const ye=_?Ce=>{const[ze,me]=he.current?.pointer(Ce)||[0,0];_(Ce,{x:ze,y:me})}:void 0,xe=x?j.useCallback((Ce,ze)=>{const me=O.getState().nodeLookup.get(ze).internals.userNode;x(Ce,me)},[]):void 0,ve=A??I["minimap.ariaLabel"];return b.jsx(cf,{position:v,style:{...t,"--xy-minimap-background-color-props":typeof f=="string"?f:void 0,"--xy-minimap-mask-background-color-props":typeof h=="string"?h:void 0,"--xy-minimap-mask-stroke-color-props":typeof p=="string"?p:void 0,"--xy-minimap-mask-stroke-width-props":typeof g=="number"?g*B:void 0,"--xy-minimap-node-background-color-props":typeof s=="string"?s:void 0,"--xy-minimap-node-stroke-color-props":typeof n=="string"?n:void 0,"--xy-minimap-node-stroke-width-props":typeof c=="number"?c:void 0},className:Rt(["react-flow__minimap",e]),"data-testid":"rf__minimap",children:b.jsxs("svg",{width:V,height:U,viewBox:`${Z} ${K} ${re} ${ee}`,className:"react-flow__minimap-svg",role:"img","aria-labelledby":oe,ref:k,onClick:ye,children:[ve&&b.jsx("title",{id:oe,children:ve}),b.jsx(JI,{onClick:xe,nodeColor:s,nodeStrokeColor:n,nodeBorderRadius:l,nodeClassName:a,nodeStrokeWidth:c,nodeComponent:d}),b.jsx("path",{className:"react-flow__minimap-mask",d:`M${Z-P},${K-P}h${re+P*2}v${ee+P*2}h${-re-P*2}z
        M${$.x},${$.y}h${$.width}v${$.height}h${-$.width}z`,fillRule:"evenodd",pointerEvents:"none"})]})})}F1.displayName="MiniMap";j.memo(F1);const sL=t=>e=>t?`${Math.max(1/e.transform[2],1)}`:void 0,iL={[Ya.Line]:"right",[Ya.Handle]:"bottom-right"};function aL({nodeId:t,position:e,variant:n=Ya.Handle,className:s,style:a=void 0,children:l,color:c,minWidth:d=10,minHeight:f=10,maxWidth:h=Number.MAX_VALUE,maxHeight:p=Number.MAX_VALUE,keepAspectRatio:g=!1,resizeDirection:v,autoScale:_=!0,shouldResize:x,onResizeStart:w,onResize:S,onResizeEnd:A}){const N=Gg(),E=typeof t=="string"?t:N,C=mt(),O=j.useRef(null),k=n===Ya.Handle,R=Ke(j.useCallback(sL(k&&_),[k,_]),vt),$=j.useRef(null),L=e??iL[n];j.useEffect(()=>{if(!(!O.current||!E))return $.current||($.current=k3({domNode:O.current,nodeId:E,getStoreItems:()=>{const{nodeLookup:F,transform:H,snapGrid:W,snapToGrid:I,nodeOrigin:V,domNode:U}=C.getState();return{nodeLookup:F,transform:H,snapGrid:W,snapToGrid:I,nodeOrigin:V,paneDomNode:U}},onChange:(F,H)=>{const{triggerNodeChanges:W,nodeLookup:I,parentLookup:V,nodeOrigin:U}=C.getState(),z=[],q={x:F.x,y:F.y},B=I.get(E);if(B&&B.expandParent&&B.parentId){const G=B.origin??U,D=F.width??B.measured.width??0,P=F.height??B.measured.height??0,Z={id:B.id,parentId:B.parentId,rect:{width:D,height:P,...YE({x:F.x??B.position.x,y:F.y??B.position.y},{width:D,height:P},B.parentId,I,G)}},K=Fg([Z],I,V,U);z.push(...K),q.x=F.x?Math.max(G[0]*D,F.x):void 0,q.y=F.y?Math.max(G[1]*P,F.y):void 0}if(q.x!==void 0&&q.y!==void 0){const G={id:E,type:"position",position:{...q}};z.push(G)}if(F.width!==void 0&&F.height!==void 0){const D={id:E,type:"dimensions",resizing:!0,setAttributes:v?v==="horizontal"?"width":"height":!0,dimensions:{width:F.width,height:F.height}};z.push(D)}for(const G of H){const D={...G,type:"position"};z.push(D)}W(z)},onEnd:({width:F,height:H})=>{const W={id:E,type:"dimensions",resizing:!1,dimensions:{width:F,height:H}};C.getState().triggerNodeChanges([W])}})),$.current.update({controlPosition:L,boundaries:{minWidth:d,minHeight:f,maxWidth:h,maxHeight:p},keepAspectRatio:g,resizeDirection:v,onResizeStart:w,onResize:S,onResizeEnd:A,shouldResize:x}),()=>{$.current?.destroy()}},[L,d,f,h,p,g,w,S,A,x]);const X=L.split("-");return b.jsx("div",{className:Rt(["react-flow__resize-control","nodrag",...X,n,s]),ref:O,style:{...a,scale:R,...c&&{[k?"backgroundColor":"borderColor"]:c}},children:l})}j.memo(aL);const Y1=t=>b.jsx(tn,{...t,type:"target",position:Se.Left,id:"exec-in",acceptHandle:"exec-out",style:{...t.style,width:8,height:8,borderRadius:"2px",backgroundColor:"#ff0072"}}),G1=t=>b.jsx(tn,{...t,type:"source",position:Se.Right,id:"exec-out",acceptHandle:"exec-in",acceptConnection:({connection:e})=>e.targetHandle==="exec-in",style:{width:8,height:8,borderRadius:"2px",backgroundColor:"#ff0072"}}),oL=({data:t})=>{const{updateNodeData:e}=Wa(),{shot:n={}}=t,{description:s="",prompt:a="",embodys:l=[]}=n;j.useEffect(()=>{},[]);const c=d=>$e.embodyCache[d]||{name:""};return b.jsxs("div",{className:"common-node-area",children:[b.jsx("h4",{className:"shot-node-input-title common-node-title",children:""}),b.jsx("div",{className:"shot-node-input-handle",children:b.jsx(G1,{id:"exec-out"})}),b.jsxs("div",{className:"shot-node-input-handle",children:[b.jsx(tn,{type:"source",position:Se.Right,id:"description"}),b.jsx("span",{className:"handle-label",children:""})]}),b.jsxs("div",{className:"shot-node-input-handle",children:[b.jsx(tn,{type:"source",position:Se.Right,id:"prompt"}),b.jsx("span",{className:"handle-label",children:""})]}),l.map((d,f)=>{const h=c(d);return b.jsxs("div",{className:"shot-node-input-handle",children:[b.jsx(tn,{type:"source",position:Se.Right,id:`embody-${d}`}),b.jsx("span",{className:"handle-label",children:h.name})]},`embody-${d}`)})]})},lL=t=>(q1({handleType:t.type}),b.jsx(tn,{...t}));function cL({data:t}){return b.jsxs("div",{className:"common-node-area",children:[b.jsx("h4",{className:"common-node-title console-node-title",children:""}),b.jsxs("div",{className:"common-exec-handle-area",children:[b.jsx(Y1,{id:"exec-in"}),b.jsx(G1,{id:"exec-out"})]}),b.jsxs("div",{className:"shot-node-input-handle",children:[b.jsx(lL,{type:"target",position:Se.Left,id:"input"}),b.jsx("span",{className:"handle-label",children:""})]})]})}const uL=({data:t})=>{const{output:e={}}=t;return b.jsxs("div",{className:"common-node-area",children:[b.jsx("h4",{className:"shot-node-output-title common-node-title",children:""}),b.jsx("div",{className:"shot-node-output-handle",children:b.jsx(Y1,{id:"exec-in"})}),b.jsxs("div",{className:"shot-node-output-handle",children:[b.jsx(tn,{type:"target",position:Se.Left,id:"image"}),b.jsx("span",{className:"handle-label",children:""})]}),b.jsxs("div",{className:"shot-node-output-handle",children:[b.jsx(tn,{type:"target",position:Se.Left,id:"video"}),b.jsx("span",{className:"handle-label",children:""})]}),b.jsxs("div",{className:"shot-node-output-handle",children:[b.jsx(tn,{type:"target",position:Se.Left,id:"audio"}),b.jsx("span",{className:"handle-label",children:""})]})]})};var oi={},Sa={},pp={},Zo={},ex;function X1(){return ex||(ex=1,(function(t){var e=Zo&&Zo.__awaiter||function(a,l,c,d){function f(h){return h instanceof c?h:new c(function(p){p(h)})}return new(c||(c=Promise))(function(h,p){function g(x){try{_(d.next(x))}catch(w){p(w)}}function v(x){try{_(d.throw(x))}catch(w){p(w)}}function _(x){x.done?h(x.value):f(x.value).then(g,v)}_((d=d.apply(a,l||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.TARGET_URL_HEADER=void 0,t.withMiddleware=n,t.withProxy=s;function n(...a){const l=c=>typeof c=="function";return c=>e(this,void 0,void 0,function*(){let d=Object.assign({},c);for(const f of a.filter(l))d=yield f(d);return d})}t.TARGET_URL_HEADER="x-fal-target-url";function s(a){const l=c=>Promise.resolve(c);return typeof window>"u"?l:c=>c.headers&&t.TARGET_URL_HEADER in c?l(c):Promise.resolve(Object.assign(Object.assign({},c),{url:a.targetUrl,headers:Object.assign(Object.assign({},c.headers||{}),{[t.TARGET_URL_HEADER]:c.url})}))}})(Zo)),Zo}var Kn={},tx;function Ai(){if(tx)return Kn;tx=1;var t=Kn&&Kn.__awaiter||function(c,d,f,h){function p(g){return g instanceof f?g:new f(function(v){v(g)})}return new(f||(f=Promise))(function(g,v){function _(S){try{w(h.next(S))}catch(A){v(A)}}function x(S){try{w(h.throw(S))}catch(A){v(A)}}function w(S){S.done?g(S.value):p(S.value).then(_,x)}w((h=h.apply(c,d||[])).next())})};Object.defineProperty(Kn,"__esModule",{value:!0}),Kn.ValidationError=Kn.ApiError=void 0,Kn.defaultResponseHandler=a,Kn.resultResponseHandler=l;const e="x-fal-request-id";class n extends Error{constructor({message:d,status:f,body:h,requestId:p}){super(d),this.name="ApiError",this.status=f,this.body=h,this.requestId=p||""}}Kn.ApiError=n;class s extends n{constructor(d){super(d),this.name="ValidationError"}get fieldErrors(){return typeof this.body.detail=="string"?[{loc:["body"],msg:this.body.detail,type:"value_error"}]:this.body.detail||[]}getFieldErrors(d){return this.fieldErrors.filter(f=>f.loc[f.loc.length-1]===d)}}Kn.ValidationError=s;function a(c){return t(this,void 0,void 0,function*(){var d;const{status:f,statusText:h}=c,p=(d=c.headers.get("Content-Type"))!==null&&d!==void 0?d:"",g=c.headers.get(e)||void 0;if(!c.ok){if(p.includes("application/json")){const v=yield c.json(),_=f===422?s:n;throw new _({message:v.message||h,status:f,body:v,requestId:g})}throw new n({message:`HTTP ${f}: ${h}`,status:f,requestId:g})}return p.includes("application/json")?c.json():p.includes("text/html")?c.text():p.includes("application/octet-stream")?c.arrayBuffer():c.text()})}function l(c){return t(this,void 0,void 0,function*(){return{data:yield a(c),requestId:c.headers.get(e)||""}})}return Kn}var el={},qn={},nx;function Ti(){if(nx)return qn;nx=1;var t=qn&&qn.__awaiter||function(p,g,v,_){function x(w){return w instanceof v?w:new v(function(S){S(w)})}return new(v||(v=Promise))(function(w,S){function A(C){try{E(_.next(C))}catch(O){S(O)}}function N(C){try{E(_.throw(C))}catch(O){S(O)}}function E(C){C.done?w(C.value):x(C.value).then(A,N)}E((_=_.apply(p,g||[])).next())})};Object.defineProperty(qn,"__esModule",{value:!0}),qn.ensureEndpointIdFormat=e,qn.parseEndpointId=s,qn.isValidUrl=a,qn.throttle=l,qn.isReact=d,qn.isPlainObject=f,qn.sleep=h;function e(p){if(p.split("/").length>1)return p;const[,v,_]=/^([0-9]+)-([a-zA-Z0-9-]+)$/.exec(p)||[];if(v&&_)return`${v}/${_}`;throw new Error(`Invalid app id: ${p}. Must be in the format <appOwner>/<appId>`)}const n=["workflows","comfy"];function s(p){const v=e(p).split("/");return n.includes(v[0])?{owner:v[1],alias:v[2],path:v.slice(3).join("/")||void 0,namespace:v[0]}:{owner:v[0],alias:v[1],path:v.slice(2).join("/")||void 0}}function a(p){try{const{host:g}=new URL(p);return/(fal\.(ai|run))$/.test(g)}catch{return!1}}function l(p,g,v=!1){let _,x;return(...w)=>{!x&&v?(p(...w),x=Date.now()):(_&&clearTimeout(_),_=setTimeout(()=>{Date.now()-x>=g&&(p(...w),x=Date.now())},g-(Date.now()-x)))}}let c;function d(){if(c===void 0){const p=new Error().stack;c=!!p&&(p.includes("node_modules/react-dom/")||p.includes("node_modules/next/"))}return c}function f(p){return!!p&&Object.getPrototypeOf(p)===Object.prototype}function h(p){return t(this,void 0,void 0,function*(){return new Promise(g=>setTimeout(g,p))})}return qn}var rx;function ff(){return rx||(rx=1,(function(t){var e=el&&el.__awaiter||function(d,f,h,p){function g(v){return v instanceof h?v:new h(function(_){_(v)})}return new(h||(h=Promise))(function(v,_){function x(A){try{S(p.next(A))}catch(N){_(N)}}function w(A){try{S(p.throw(A))}catch(N){_(N)}}function S(A){A.done?v(A.value):g(A.value).then(x,w)}S((p=p.apply(d,f||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_RETRY_OPTIONS=t.DEFAULT_RETRYABLE_STATUS_CODES=void 0,t.isRetryableError=a,t.calculateBackoffDelay=l,t.executeWithRetry=c;const n=Ai(),s=Ti();t.DEFAULT_RETRYABLE_STATUS_CODES=[429,502,503,504],t.DEFAULT_RETRY_OPTIONS={maxRetries:3,baseDelay:1e3,maxDelay:3e4,backoffMultiplier:2,retryableStatusCodes:t.DEFAULT_RETRYABLE_STATUS_CODES,enableJitter:!0};function a(d,f){return d instanceof n.ApiError&&f.includes(d.status)}function l(d,f,h,p,g){const v=Math.min(f*Math.pow(p,d),h);if(g){const _=.25*v*(Math.random()*2-1);return Math.max(0,v+_)}return v}function c(d,f,h){return e(this,void 0,void 0,function*(){const p={totalAttempts:0,totalDelay:0};let g;for(let v=0;v<=f.maxRetries;v++){p.totalAttempts++;try{return{result:yield d(),metrics:p}}catch(_){if(g=_,p.lastError=_,v===f.maxRetries||!a(_,f.retryableStatusCodes))throw _;const x=l(v,f.baseDelay,f.maxDelay,f.backoffMultiplier,f.enableJitter);p.totalDelay+=x,h&&h(v+1,_,x),yield(0,s.sleep)(x)}}throw g})}})(el)),el}var tl={};const dL="@fal-ai/client",fL="1.7.2",hL={name:dL,version:fL};var sx;function Xg(){if(sx)return tl;sx=1,Object.defineProperty(tl,"__esModule",{value:!0}),tl.isBrowser=t,tl.getUserAgent=n;function t(){return typeof window<"u"&&typeof window.document<"u"}let e=null;function n(){if(e!==null)return e;const s=hL;return e=`${s.name}/${s.version}`,e}return tl}var ix;function Kg(){return ix||(ix=1,(function(t){var e={};Object.defineProperty(t,"__esModule",{value:!0}),t.credentialsFromEnv=void 0,t.resolveDefaultFetch=c,t.createConfig=p,t.getRestApiUrl=g;const n=X1(),s=Ai(),a=ff(),l=Xg();function c(){if(typeof fetch>"u")throw new Error("Your environment does not support fetch. Please provide your own fetch implementation.");return fetch}function d(){return typeof process<"u"&&e&&(typeof e.FAL_KEY<"u"||typeof e.FAL_KEY_ID<"u"&&typeof e.FAL_KEY_SECRET<"u")}const f=()=>{if(d())return typeof e.FAL_KEY<"u"?e.FAL_KEY:e.FAL_KEY_ID?`${e.FAL_KEY_ID}:${e.FAL_KEY_SECRET}`:void 0};t.credentialsFromEnv=f;const h={credentials:t.credentialsFromEnv,suppressLocalCredentialsWarning:!1,requestMiddleware:v=>Promise.resolve(v),responseHandler:s.defaultResponseHandler,retry:a.DEFAULT_RETRY_OPTIONS};function p(v){var _;let x=Object.assign(Object.assign(Object.assign({},h),v),{fetch:(_=v.fetch)!==null&&_!==void 0?_:c(),retry:Object.assign(Object.assign({},a.DEFAULT_RETRY_OPTIONS),v.retry||{})});v.proxyUrl&&(x=Object.assign(Object.assign({},x),{requestMiddleware:(0,n.withMiddleware)(x.requestMiddleware,(0,n.withProxy)({targetUrl:v.proxyUrl}))}));const{credentials:w,suppressLocalCredentialsWarning:S}=x,A=typeof w=="function"?w():w;return(0,l.isBrowser)()&&A&&!S&&console.warn("The fal credentials are exposed in the browser's environment. That's not recommended for production use cases."),x}function g(){return"https://rest.alpha.fal.ai"}})(pp)),pp}var qr={},Hr={},ax;function nc(){if(ax)return Hr;ax=1;var t=Hr&&Hr.__awaiter||function(f,h,p,g){function v(_){return _ instanceof p?_:new p(function(x){x(_)})}return new(p||(p=Promise))(function(_,x){function w(N){try{A(g.next(N))}catch(E){x(E)}}function S(N){try{A(g.throw(N))}catch(E){x(E)}}function A(N){N.done?_(N.value):v(N.value).then(w,S)}A((g=g.apply(f,h||[])).next())})},e=Hr&&Hr.__rest||function(f,h){var p={};for(var g in f)Object.prototype.hasOwnProperty.call(f,g)&&h.indexOf(g)<0&&(p[g]=f[g]);if(f!=null&&typeof Object.getOwnPropertySymbols=="function")for(var v=0,g=Object.getOwnPropertySymbols(f);v<g.length;v++)h.indexOf(g[v])<0&&Object.prototype.propertyIsEnumerable.call(f,g[v])&&(p[g[v]]=f[g[v]]);return p};Object.defineProperty(Hr,"__esModule",{value:!0}),Hr.dispatchRequest=c,Hr.buildUrl=d;const n=ff(),s=Xg(),a=Ti(),l=typeof navigator<"u"&&navigator?.userAgent==="Cloudflare-Workers";function c(f){return t(this,void 0,void 0,function*(){var h;const{targetUrl:p,input:g,config:v,options:_={}}=f,{credentials:x,requestMiddleware:w,responseHandler:S,fetch:A}=v,N=Object.assign(Object.assign({},v.retry),_.retry||{}),E=()=>t(this,void 0,void 0,function*(){var O,k,R;const $=(0,s.isBrowser)()?{}:{"User-Agent":(0,s.getUserAgent)()},L=typeof x=="function"?x():x,{method:X,url:F,headers:H}=yield w({method:((k=(O=f.method)!==null&&O!==void 0?O:_.method)!==null&&k!==void 0?k:"post").toUpperCase(),url:p,headers:f.headers}),W=L?{Authorization:`Key ${L}`}:{},I=Object.assign(Object.assign(Object.assign(Object.assign({},W),{Accept:"application/json","Content-Type":"application/json"}),$),H??{}),{responseHandler:V,retry:U}=_,z=e(_,["responseHandler","retry"]),q=yield A(F,Object.assign(Object.assign(Object.assign(Object.assign({},z),{method:X,headers:Object.assign(Object.assign({},I),(R=z.headers)!==null&&R!==void 0?R:{})}),!l&&{mode:"cors"}),{signal:_.signal,body:X.toLowerCase()!=="get"&&g?JSON.stringify(g):void 0}));return yield(V??S)(q)});let C;for(let O=0;O<=N.maxRetries;O++)try{return yield E()}catch(k){if(C=k,O===N.maxRetries||!(0,n.isRetryableError)(k,N.retryableStatusCodes)||((h=_.signal)===null||h===void 0?void 0:h.aborted))throw k;const $=(0,n.calculateBackoffDelay)(O,N.baseDelay,N.maxDelay,N.backoffMultiplier,N.enableJitter);yield(0,a.sleep)($)}throw C})}function d(f,h={}){var p,g;const v=((p=h.method)!==null&&p!==void 0?p:"post").toLowerCase(),_=((g=h.path)!==null&&g!==void 0?g:"").replace(/^\//,"").replace(/\/{2,}/,"/"),x=h.input,w=Object.assign(Object.assign({},h.query||{}),v==="get"?x:{}),S=Object.keys(w).length>0?`?${new URLSearchParams(w).toString()}`:"";if((0,a.isValidUrl)(f))return`${f.endsWith("/")?f:`${f}/`}${_}${S}`;const A=(0,a.ensureEndpointIdFormat)(f);return`${`https://${h.subdomain?`${h.subdomain}.`:""}fal.run/${A}/${_}`.replace(/\/$/,"")}${S}`}return Hr}var Hn={},Ku={},ox;function mL(){if(ox)return Ku;ox=1,Object.defineProperty(Ku,"__esModule",{value:!0});function t(s){let a,l,c,d,f,h,p;return g(),{feed:v,reset:g};function g(){a=!0,l="",c=0,d=-1,f=void 0,h=void 0,p=""}function v(x){l=l?l+x:x,a&&n(l)&&(l=l.slice(e.length)),a=!1;const w=l.length;let S=0,A=!1;for(;S<w;){A&&(l[S]===`
`&&++S,A=!1);let N=-1,E=d,C;for(let O=c;N<0&&O<w;++O)C=l[O],C===":"&&E<0?E=O-S:C==="\r"?(A=!0,N=O-S):C===`
`&&(N=O-S);if(N<0){c=w-S,d=E;break}else c=0,d=-1;_(l,S,E,N),S+=N+1}S===w?l="":S>0&&(l=l.slice(S))}function _(x,w,S,A){if(A===0){p.length>0&&(s({type:"event",id:f,event:h||void 0,data:p.slice(0,-1)}),p="",f=void 0),h=void 0;return}const N=S<0,E=x.slice(w,w+(N?A:S));let C=0;N?C=A:x[w+S+1]===" "?C=S+2:C=S+1;const O=w+C,k=A-C,R=x.slice(O,O+k).toString();if(E==="data")p+=R?"".concat(R,`
`):`
`;else if(E==="event")h=R;else if(E==="id"&&!R.includes("\0"))f=R;else if(E==="retry"){const $=parseInt(R,10);Number.isNaN($)||s({type:"reconnect-interval",value:$})}}}const e=[239,187,191];function n(s){return e.every((a,l)=>s.charCodeAt(l)===a)}return Ku.createParser=t,Ku}var nl={},lx;function K1(){return lx||(lx=1,(function(t){var e=nl&&nl.__awaiter||function(c,d,f,h){function p(g){return g instanceof f?g:new f(function(v){v(g)})}return new(f||(f=Promise))(function(g,v){function _(S){try{w(h.next(S))}catch(A){v(A)}}function x(S){try{w(h.throw(S))}catch(A){v(A)}}function w(S){S.done?g(S.value):p(S.value).then(_,x)}w((h=h.apply(c,d||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.TOKEN_EXPIRATION_SECONDS=void 0,t.getTemporaryAuthToken=l;const n=Kg(),s=nc(),a=Ti();t.TOKEN_EXPIRATION_SECONDS=120;function l(c,d){return e(this,void 0,void 0,function*(){const f=(0,a.parseEndpointId)(c),h=yield(0,s.dispatchRequest)({method:"POST",targetUrl:`${(0,n.getRestApiUrl)()}/tokens/`,config:d,input:{allowed_apps:[f.alias],token_expiration:t.TOKEN_EXPIRATION_SECONDS}});return typeof h!="string"&&h.detail?h.detail:h})}})(nl)),nl}var cx;function Q1(){if(cx)return Hn;cx=1;var t=Hn&&Hn.__awaiter||function(g,v,_,x){function w(S){return S instanceof _?S:new _(function(A){A(S)})}return new(_||(_=Promise))(function(S,A){function N(O){try{C(x.next(O))}catch(k){A(k)}}function E(O){try{C(x.throw(O))}catch(k){A(k)}}function C(O){O.done?S(O.value):w(O.value).then(N,E)}C((x=x.apply(g,v||[])).next())})},e=Hn&&Hn.__await||function(g){return this instanceof e?(this.v=g,this):new e(g)},n=Hn&&Hn.__asyncGenerator||function(g,v,_){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var x=_.apply(g,v||[]),w,S=[];return w={},N("next"),N("throw"),N("return",A),w[Symbol.asyncIterator]=function(){return this},w;function A($){return function(L){return Promise.resolve(L).then($,k)}}function N($,L){x[$]&&(w[$]=function(X){return new Promise(function(F,H){S.push([$,X,F,H])>1||E($,X)})},L&&(w[$]=L(w[$])))}function E($,L){try{C(x[$](L))}catch(X){R(S[0][3],X)}}function C($){$.value instanceof e?Promise.resolve($.value.v).then(O,k):R(S[0][2],$)}function O($){E("next",$)}function k($){E("throw",$)}function R($,L){$(L),S.shift(),S.length&&E(S[0][0],S[0][1])}};Object.defineProperty(Hn,"__esModule",{value:!0}),Hn.FalStream=void 0,Hn.createStreamingClient=p;const s=mL(),a=K1(),l=nc(),c=Ai(),d="text/event-stream",f=15*1e3;class h{constructor(v,_,x){var w;this.listeners=new Map,this.buffer=[],this.currentData=void 0,this.lastEventTimestamp=0,this.streamClosed=!1,this._requestId=null,this.abortController=new AbortController,this.start=()=>t(this,void 0,void 0,function*(){var S,A;const{endpointId:N,options:E}=this,{input:C,method:O="post",connectionMode:k="server"}=E;try{if(k==="client"){const R=yield(0,a.getTemporaryAuthToken)(N,this.config),{fetch:$}=this.config,L=new URL(this.url);L.searchParams.set("fal_jwt_token",R);const X=yield $(L.toString(),{method:O.toUpperCase(),headers:{accept:(S=E.accept)!==null&&S!==void 0?S:d,"content-type":"application/json"},body:C&&O!=="get"?JSON.stringify(C):void 0,signal:this.abortController.signal});return this._requestId=X.headers.get("x-fal-request-id"),yield this.handleResponse(X)}return yield(0,l.dispatchRequest)({method:O.toUpperCase(),targetUrl:this.url,input:C,config:this.config,options:{headers:{accept:(A=E.accept)!==null&&A!==void 0?A:d},responseHandler:R=>t(this,void 0,void 0,function*(){return this._requestId=R.headers.get("x-fal-request-id"),yield this.handleResponse(R)}),signal:this.abortController.signal}})}catch(R){this.handleError(R)}}),this.handleResponse=S=>t(this,void 0,void 0,function*(){var A,N;if(!S.ok){try{yield(0,c.defaultResponseHandler)(S)}catch(X){this.emit("error",X)}return}const E=S.body;if(!E){this.emit("error",new c.ApiError({message:"Response body is empty.",status:400,body:void 0,requestId:this._requestId||void 0}));return}if(!((A=S.headers.get("content-type"))!==null&&A!==void 0?A:"").startsWith(d)){const X=E.getReader(),F=()=>{X.read().then(({done:H,value:W})=>{if(H){this.emit("done",this.currentData);return}this.currentData=W,this.emit("data",W),F()})};F();return}const O=new TextDecoder("utf-8"),k=S.body.getReader(),R=(0,s.createParser)(X=>{if(X.type==="event"){const F=X.data;try{const H=JSON.parse(F);this.buffer.push(H),this.currentData=H,this.emit("data",H),this.emit("message",H)}catch(H){this.emit("error",H)}}}),$=(N=this.options.timeout)!==null&&N!==void 0?N:f,L=()=>t(this,void 0,void 0,function*(){const{value:X,done:F}=yield k.read();this.lastEventTimestamp=Date.now(),R.feed(O.decode(X)),Date.now()-this.lastEventTimestamp>$&&this.emit("error",new c.ApiError({message:`Event stream timed out after ${($/1e3).toFixed(0)} seconds with no messages.`,status:408,requestId:this._requestId||void 0})),F?this.emit("done",this.currentData):L().catch(this.handleError)});L().catch(this.handleError)}),this.handleError=S=>{var A;if(S.name==="AbortError"||this.signal.aborted)return;const N=S instanceof c.ApiError?S:new c.ApiError({message:(A=S.message)!==null&&A!==void 0?A:"An unknown error occurred",status:500,requestId:this._requestId||void 0});this.emit("error",N)},this.on=(S,A)=>{var N;this.listeners.has(S)||this.listeners.set(S,[]),(N=this.listeners.get(S))===null||N===void 0||N.push(A)},this.emit=(S,A)=>{const N=this.listeners.get(S)||[];for(const E of N)E(A)},this.done=()=>t(this,void 0,void 0,function*(){return this.donePromise}),this.abort=S=>{this.streamClosed||this.abortController.abort(S)},this.endpointId=v,this.config=_,this.url=(w=x.url)!==null&&w!==void 0?w:(0,l.buildUrl)(v,{path:"/stream",query:x.queryParams}),this.options=x,this.donePromise=new Promise((S,A)=>{this.streamClosed&&A(new c.ApiError({message:"Streaming connection is already closed.",status:400,body:void 0,requestId:this._requestId||void 0})),this.signal.addEventListener("abort",()=>{var N;S((N=this.currentData)!==null&&N!==void 0?N:{})}),this.on("done",N=>{this.streamClosed=!0,S(N)}),this.on("error",N=>{this.streamClosed=!0,A(N)})}),x.signal&&x.signal.addEventListener("abort",()=>{this.abortController.abort()}),this.start().catch(this.handleError)}[Symbol.asyncIterator](){return n(this,arguments,function*(){let _=!0;const x=()=>_=!1;for(this.on("error",x),this.on("done",x);_||this.buffer.length>0;){const w=this.buffer.shift();w&&(yield yield e(w)),yield e(new Promise(S=>setTimeout(S,16)))}})}get signal(){return this.abortController.signal}get requestId(){return this._requestId}}Hn.FalStream=h;function p({config:g,storage:v}){return{stream(_,x){return t(this,void 0,void 0,function*(){const w=x.input?yield v.transformInput(x.input):void 0;return new h(_,g,Object.assign(Object.assign({},x),{input:w}))})}}}return Hn}var ux;function pL(){if(ux)return qr;ux=1;var t=qr&&qr.__awaiter||function(g,v,_,x){function w(S){return S instanceof _?S:new _(function(A){A(S)})}return new(_||(_=Promise))(function(S,A){function N(O){try{C(x.next(O))}catch(k){A(k)}}function E(O){try{C(x.throw(O))}catch(k){A(k)}}function C(O){O.done?S(O.value):w(O.value).then(N,E)}C((x=x.apply(g,v||[])).next())})},e=qr&&qr.__rest||function(g,v){var _={};for(var x in g)Object.prototype.hasOwnProperty.call(g,x)&&v.indexOf(x)<0&&(_[x]=g[x]);if(g!=null&&typeof Object.getOwnPropertySymbols=="function")for(var w=0,x=Object.getOwnPropertySymbols(g);w<x.length;w++)v.indexOf(x[w])<0&&Object.prototype.propertyIsEnumerable.call(g,x[w])&&(_[x[w]]=g[x[w]]);return _};Object.defineProperty(qr,"__esModule",{value:!0}),qr.createQueueClient=void 0;const n=nc(),s=Ai(),a=ff(),l=Q1(),c=Ti(),d=500,f={maxRetries:3,baseDelay:1e3,maxDelay:6e4,retryableStatusCodes:a.DEFAULT_RETRYABLE_STATUS_CODES},h={maxRetries:5,baseDelay:1e3,maxDelay:3e4,retryableStatusCodes:[...a.DEFAULT_RETRYABLE_STATUS_CODES,500]},p=({config:g,storage:v})=>{const _={submit(x,w){return t(this,void 0,void 0,function*(){const{webhookUrl:S,priority:A,hint:N}=w,E=e(w,["webhookUrl","priority","hint"]),C=w.input?yield v.transformInput(w.input):void 0;return(0,n.dispatchRequest)({method:w.method,targetUrl:(0,n.buildUrl)(x,Object.assign(Object.assign({},E),{subdomain:"queue",query:S?{fal_webhook:S}:void 0})),headers:Object.assign({"x-fal-queue-priority":A??"normal"},N&&{"x-fal-runner-hint":N}),input:C,config:g,options:{signal:w.abortSignal,retry:f}})})},status(x,w){return t(this,arguments,void 0,function*(S,{requestId:A,logs:N=!1,abortSignal:E}){const C=(0,c.parseEndpointId)(S),O=C.namespace?`${C.namespace}/`:"";return(0,n.dispatchRequest)({method:"get",targetUrl:(0,n.buildUrl)(`${O}${C.owner}/${C.alias}`,{subdomain:"queue",query:{logs:N?"1":"0"},path:`/requests/${A}/status`}),config:g,options:{signal:E,retry:h}})})},streamStatus(x,w){return t(this,arguments,void 0,function*(S,{requestId:A,logs:N=!1,connectionMode:E}){const C=(0,c.parseEndpointId)(S),O=C.namespace?`${C.namespace}/`:"",k={logs:N?"1":"0"},R=(0,n.buildUrl)(`${O}${C.owner}/${C.alias}`,{subdomain:"queue",path:`/requests/${A}/status/stream`,query:k});return new l.FalStream(S,g,{url:R,method:"get",connectionMode:E,queryParams:k})})},subscribeToStatus(x,w){return t(this,void 0,void 0,function*(){const S=w.requestId,A=w.timeout;let N;const E=()=>{};if(w.mode==="streaming"){const C=yield _.streamStatus(x,{requestId:S,logs:w.logs,connectionMode:"connectionMode"in w?w.connectionMode:void 0}),O=[];A&&(N=setTimeout(()=>{throw C.abort(),_.cancel(x,{requestId:S}).catch(E),new Error(`Client timed out waiting for the request to complete after ${A}ms`)},A)),C.on("data",R=>{w.onQueueUpdate&&("logs"in R&&Array.isArray(R.logs)&&R.logs.length>0&&O.push(...R.logs),w.onQueueUpdate("logs"in R?Object.assign(Object.assign({},R),{logs:O}):R))});const k=yield C.done();return N&&clearTimeout(N),k}return new Promise((C,O)=>{var k;let R;const $="pollInterval"in w&&typeof w.pollInterval=="number"&&(k=w.pollInterval)!==null&&k!==void 0?k:d,L=()=>{N&&clearTimeout(N),R&&clearTimeout(R)};A&&(N=setTimeout(()=>{L(),_.cancel(x,{requestId:S}).catch(E),O(new Error(`Client timed out waiting for the request to complete after ${A}ms`))},A));const X=()=>t(this,void 0,void 0,function*(){var F;try{const H=yield _.status(x,{requestId:S,logs:(F=w.logs)!==null&&F!==void 0?F:!1,abortSignal:w.abortSignal});if(w.onQueueUpdate&&w.onQueueUpdate(H),H.status==="COMPLETED"){L(),C(H);return}R=setTimeout(X,$)}catch(H){L(),O(H)}});X().catch(O)})})},result(x,w){return t(this,arguments,void 0,function*(S,{requestId:A,abortSignal:N}){const E=(0,c.parseEndpointId)(S),C=E.namespace?`${E.namespace}/`:"";return(0,n.dispatchRequest)({method:"get",targetUrl:(0,n.buildUrl)(`${C}${E.owner}/${E.alias}`,{subdomain:"queue",path:`/requests/${A}`}),config:Object.assign(Object.assign({},g),{responseHandler:s.resultResponseHandler}),options:{signal:N,retry:f}})})},cancel(x,w){return t(this,arguments,void 0,function*(S,{requestId:A,abortSignal:N}){const E=(0,c.parseEndpointId)(S),C=E.namespace?`${E.namespace}/`:"";yield(0,n.dispatchRequest)({method:"put",targetUrl:(0,n.buildUrl)(`${C}${E.owner}/${E.alias}`,{subdomain:"queue",path:`/requests/${A}/cancel`}),config:g,options:{signal:N}})})}};return _};return qr.createQueueClient=p,qr}var Qu={};function gL(t){const e=t.length;let n=0,s=0;for(;s<e;){let a=t.charCodeAt(s++);if((a&4294967168)===0){n++;continue}else if((a&4294965248)===0)n+=2;else{if(a>=55296&&a<=56319&&s<e){const l=t.charCodeAt(s);(l&64512)===56320&&(++s,a=((a&1023)<<10)+(l&1023)+65536)}(a&4294901760)===0?n+=3:n+=4}}return n}function yL(t,e,n){const s=t.length;let a=n,l=0;for(;l<s;){let c=t.charCodeAt(l++);if((c&4294967168)===0){e[a++]=c;continue}else if((c&4294965248)===0)e[a++]=c>>6&31|192;else{if(c>=55296&&c<=56319&&l<s){const d=t.charCodeAt(l);(d&64512)===56320&&(++l,c=((c&1023)<<10)+(d&1023)+65536)}(c&4294901760)===0?(e[a++]=c>>12&15|224,e[a++]=c>>6&63|128):(e[a++]=c>>18&7|240,e[a++]=c>>12&63|128,e[a++]=c>>6&63|128)}e[a++]=c&63|128}}const vL=new TextEncoder,_L=50;function bL(t,e,n){vL.encodeInto(t,e.subarray(n))}function wL(t,e,n){t.length>_L?bL(t,e,n):yL(t,e,n)}const xL=4096;function W1(t,e,n){let s=e;const a=s+n,l=[];let c="";for(;s<a;){const d=t[s++];if((d&128)===0)l.push(d);else if((d&224)===192){const f=t[s++]&63;l.push((d&31)<<6|f)}else if((d&240)===224){const f=t[s++]&63,h=t[s++]&63;l.push((d&31)<<12|f<<6|h)}else if((d&248)===240){const f=t[s++]&63,h=t[s++]&63,p=t[s++]&63;let g=(d&7)<<18|f<<12|h<<6|p;g>65535&&(g-=65536,l.push(g>>>10&1023|55296),g=56320|g&1023),l.push(g)}else l.push(d);l.length>=xL&&(c+=String.fromCharCode(...l),l.length=0)}return l.length>0&&(c+=String.fromCharCode(...l)),c}const SL=new TextDecoder,EL=200;function CL(t,e,n){const s=t.subarray(e,e+n);return SL.decode(s)}function AL(t,e,n){return n>EL?CL(t,e,n):W1(t,e,n)}class ul{constructor(e,n){this.type=e,this.data=n}}class gn extends Error{constructor(e){super(e);const n=Object.create(gn.prototype);Object.setPrototypeOf(this,n),Object.defineProperty(this,"name",{configurable:!0,enumerable:!1,value:gn.name})}}const rl=4294967295;function TL(t,e,n){const s=n/4294967296,a=n;t.setUint32(e,s),t.setUint32(e+4,a)}function J1(t,e,n){const s=Math.floor(n/4294967296),a=n;t.setUint32(e,s),t.setUint32(e+4,a)}function Z1(t,e){const n=t.getInt32(e),s=t.getUint32(e+4);return n*4294967296+s}function NL(t,e){const n=t.getUint32(e),s=t.getUint32(e+4);return n*4294967296+s}const eC=-1,OL=4294967296-1,RL=17179869184-1;function tC({sec:t,nsec:e}){if(t>=0&&e>=0&&t<=RL)if(e===0&&t<=OL){const n=new Uint8Array(4);return new DataView(n.buffer).setUint32(0,t),n}else{const n=t/4294967296,s=t&4294967295,a=new Uint8Array(8),l=new DataView(a.buffer);return l.setUint32(0,e<<2|n&3),l.setUint32(4,s),a}else{const n=new Uint8Array(12),s=new DataView(n.buffer);return s.setUint32(0,e),J1(s,4,t),n}}function nC(t){const e=t.getTime(),n=Math.floor(e/1e3),s=(e-n*1e3)*1e6,a=Math.floor(s/1e9);return{sec:n+a,nsec:s-a*1e9}}function rC(t){if(t instanceof Date){const e=nC(t);return tC(e)}else return null}function sC(t){const e=new DataView(t.buffer,t.byteOffset,t.byteLength);switch(t.byteLength){case 4:return{sec:e.getUint32(0),nsec:0};case 8:{const n=e.getUint32(0),s=e.getUint32(4),a=(n&3)*4294967296+s,l=n>>>2;return{sec:a,nsec:l}}case 12:{const n=Z1(e,4),s=e.getUint32(0);return{sec:n,nsec:s}}default:throw new gn(`Unrecognized data size for timestamp (expected 4, 8, or 12): ${t.length}`)}}function iC(t){const e=sC(t);return new Date(e.sec*1e3+e.nsec/1e6)}const jL={type:eC,encode:rC,decode:iC};class Hl{constructor(){this.builtInEncoders=[],this.builtInDecoders=[],this.encoders=[],this.decoders=[],this.register(jL)}register({type:e,encode:n,decode:s}){if(e>=0)this.encoders[e]=n,this.decoders[e]=s;else{const a=-1-e;this.builtInEncoders[a]=n,this.builtInDecoders[a]=s}}tryToEncode(e,n){for(let s=0;s<this.builtInEncoders.length;s++){const a=this.builtInEncoders[s];if(a!=null){const l=a(e,n);if(l!=null){const c=-1-s;return new ul(c,l)}}}for(let s=0;s<this.encoders.length;s++){const a=this.encoders[s];if(a!=null){const l=a(e,n);if(l!=null){const c=s;return new ul(c,l)}}}return e instanceof ul?e:null}decode(e,n,s){const a=n<0?this.builtInDecoders[-1-n]:this.decoders[n];return a?a(e,n,s):new ul(n,e)}}Hl.defaultCodec=new Hl;function kL(t){return t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer}function eg(t){return t instanceof Uint8Array?t:ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):kL(t)?new Uint8Array(t):Uint8Array.from(t)}const ML=100,DL=2048;class hf{constructor(e){this.entered=!1,this.extensionCodec=e?.extensionCodec??Hl.defaultCodec,this.context=e?.context,this.useBigInt64=e?.useBigInt64??!1,this.maxDepth=e?.maxDepth??ML,this.initialBufferSize=e?.initialBufferSize??DL,this.sortKeys=e?.sortKeys??!1,this.forceFloat32=e?.forceFloat32??!1,this.ignoreUndefined=e?.ignoreUndefined??!1,this.forceIntegerToFloat=e?.forceIntegerToFloat??!1,this.pos=0,this.view=new DataView(new ArrayBuffer(this.initialBufferSize)),this.bytes=new Uint8Array(this.view.buffer)}clone(){return new hf({extensionCodec:this.extensionCodec,context:this.context,useBigInt64:this.useBigInt64,maxDepth:this.maxDepth,initialBufferSize:this.initialBufferSize,sortKeys:this.sortKeys,forceFloat32:this.forceFloat32,ignoreUndefined:this.ignoreUndefined,forceIntegerToFloat:this.forceIntegerToFloat})}reinitializeState(){this.pos=0}encodeSharedRef(e){if(this.entered)return this.clone().encodeSharedRef(e);try{return this.entered=!0,this.reinitializeState(),this.doEncode(e,1),this.bytes.subarray(0,this.pos)}finally{this.entered=!1}}encode(e){if(this.entered)return this.clone().encode(e);try{return this.entered=!0,this.reinitializeState(),this.doEncode(e,1),this.bytes.slice(0,this.pos)}finally{this.entered=!1}}doEncode(e,n){if(n>this.maxDepth)throw new Error(`Too deep objects in depth ${n}`);e==null?this.encodeNil():typeof e=="boolean"?this.encodeBoolean(e):typeof e=="number"?this.forceIntegerToFloat?this.encodeNumberAsFloat(e):this.encodeNumber(e):typeof e=="string"?this.encodeString(e):this.useBigInt64&&typeof e=="bigint"?this.encodeBigInt64(e):this.encodeObject(e,n)}ensureBufferSizeToWrite(e){const n=this.pos+e;this.view.byteLength<n&&this.resizeBuffer(n*2)}resizeBuffer(e){const n=new ArrayBuffer(e),s=new Uint8Array(n),a=new DataView(n);s.set(this.bytes),this.view=a,this.bytes=s}encodeNil(){this.writeU8(192)}encodeBoolean(e){e===!1?this.writeU8(194):this.writeU8(195)}encodeNumber(e){!this.forceIntegerToFloat&&Number.isSafeInteger(e)?e>=0?e<128?this.writeU8(e):e<256?(this.writeU8(204),this.writeU8(e)):e<65536?(this.writeU8(205),this.writeU16(e)):e<4294967296?(this.writeU8(206),this.writeU32(e)):this.useBigInt64?this.encodeNumberAsFloat(e):(this.writeU8(207),this.writeU64(e)):e>=-32?this.writeU8(224|e+32):e>=-128?(this.writeU8(208),this.writeI8(e)):e>=-32768?(this.writeU8(209),this.writeI16(e)):e>=-2147483648?(this.writeU8(210),this.writeI32(e)):this.useBigInt64?this.encodeNumberAsFloat(e):(this.writeU8(211),this.writeI64(e)):this.encodeNumberAsFloat(e)}encodeNumberAsFloat(e){this.forceFloat32?(this.writeU8(202),this.writeF32(e)):(this.writeU8(203),this.writeF64(e))}encodeBigInt64(e){e>=BigInt(0)?(this.writeU8(207),this.writeBigUint64(e)):(this.writeU8(211),this.writeBigInt64(e))}writeStringHeader(e){if(e<32)this.writeU8(160+e);else if(e<256)this.writeU8(217),this.writeU8(e);else if(e<65536)this.writeU8(218),this.writeU16(e);else if(e<4294967296)this.writeU8(219),this.writeU32(e);else throw new Error(`Too long string: ${e} bytes in UTF-8`)}encodeString(e){const s=gL(e);this.ensureBufferSizeToWrite(5+s),this.writeStringHeader(s),wL(e,this.bytes,this.pos),this.pos+=s}encodeObject(e,n){const s=this.extensionCodec.tryToEncode(e,this.context);if(s!=null)this.encodeExtension(s);else if(Array.isArray(e))this.encodeArray(e,n);else if(ArrayBuffer.isView(e))this.encodeBinary(e);else if(typeof e=="object")this.encodeMap(e,n);else throw new Error(`Unrecognized object: ${Object.prototype.toString.apply(e)}`)}encodeBinary(e){const n=e.byteLength;if(n<256)this.writeU8(196),this.writeU8(n);else if(n<65536)this.writeU8(197),this.writeU16(n);else if(n<4294967296)this.writeU8(198),this.writeU32(n);else throw new Error(`Too large binary: ${n}`);const s=eg(e);this.writeU8a(s)}encodeArray(e,n){const s=e.length;if(s<16)this.writeU8(144+s);else if(s<65536)this.writeU8(220),this.writeU16(s);else if(s<4294967296)this.writeU8(221),this.writeU32(s);else throw new Error(`Too large array: ${s}`);for(const a of e)this.doEncode(a,n+1)}countWithoutUndefined(e,n){let s=0;for(const a of n)e[a]!==void 0&&s++;return s}encodeMap(e,n){const s=Object.keys(e);this.sortKeys&&s.sort();const a=this.ignoreUndefined?this.countWithoutUndefined(e,s):s.length;if(a<16)this.writeU8(128+a);else if(a<65536)this.writeU8(222),this.writeU16(a);else if(a<4294967296)this.writeU8(223),this.writeU32(a);else throw new Error(`Too large map object: ${a}`);for(const l of s){const c=e[l];this.ignoreUndefined&&c===void 0||(this.encodeString(l),this.doEncode(c,n+1))}}encodeExtension(e){if(typeof e.data=="function"){const s=e.data(this.pos+6),a=s.length;if(a>=4294967296)throw new Error(`Too large extension object: ${a}`);this.writeU8(201),this.writeU32(a),this.writeI8(e.type),this.writeU8a(s);return}const n=e.data.length;if(n===1)this.writeU8(212);else if(n===2)this.writeU8(213);else if(n===4)this.writeU8(214);else if(n===8)this.writeU8(215);else if(n===16)this.writeU8(216);else if(n<256)this.writeU8(199),this.writeU8(n);else if(n<65536)this.writeU8(200),this.writeU16(n);else if(n<4294967296)this.writeU8(201),this.writeU32(n);else throw new Error(`Too large extension object: ${n}`);this.writeI8(e.type),this.writeU8a(e.data)}writeU8(e){this.ensureBufferSizeToWrite(1),this.view.setUint8(this.pos,e),this.pos++}writeU8a(e){const n=e.length;this.ensureBufferSizeToWrite(n),this.bytes.set(e,this.pos),this.pos+=n}writeI8(e){this.ensureBufferSizeToWrite(1),this.view.setInt8(this.pos,e),this.pos++}writeU16(e){this.ensureBufferSizeToWrite(2),this.view.setUint16(this.pos,e),this.pos+=2}writeI16(e){this.ensureBufferSizeToWrite(2),this.view.setInt16(this.pos,e),this.pos+=2}writeU32(e){this.ensureBufferSizeToWrite(4),this.view.setUint32(this.pos,e),this.pos+=4}writeI32(e){this.ensureBufferSizeToWrite(4),this.view.setInt32(this.pos,e),this.pos+=4}writeF32(e){this.ensureBufferSizeToWrite(4),this.view.setFloat32(this.pos,e),this.pos+=4}writeF64(e){this.ensureBufferSizeToWrite(8),this.view.setFloat64(this.pos,e),this.pos+=8}writeU64(e){this.ensureBufferSizeToWrite(8),TL(this.view,this.pos,e),this.pos+=8}writeI64(e){this.ensureBufferSizeToWrite(8),J1(this.view,this.pos,e),this.pos+=8}writeBigUint64(e){this.ensureBufferSizeToWrite(8),this.view.setBigUint64(this.pos,e),this.pos+=8}writeBigInt64(e){this.ensureBufferSizeToWrite(8),this.view.setBigInt64(this.pos,e),this.pos+=8}}function UL(t,e){return new hf(e).encodeSharedRef(t)}function gp(t){return`${t<0?"-":""}0x${Math.abs(t).toString(16).padStart(2,"0")}`}const $L=16,IL=16;class LL{constructor(e=$L,n=IL){this.hit=0,this.miss=0,this.maxKeyLength=e,this.maxLengthPerKey=n,this.caches=[];for(let s=0;s<this.maxKeyLength;s++)this.caches.push([])}canBeCached(e){return e>0&&e<=this.maxKeyLength}find(e,n,s){const a=this.caches[s-1];e:for(const l of a){const c=l.bytes;for(let d=0;d<s;d++)if(c[d]!==e[n+d])continue e;return l.str}return null}store(e,n){const s=this.caches[e.length-1],a={bytes:e,str:n};s.length>=this.maxLengthPerKey?s[Math.random()*s.length|0]=a:s.push(a)}decode(e,n,s){const a=this.find(e,n,s);if(a!=null)return this.hit++,a;this.miss++;const l=W1(e,n,s),c=Uint8Array.prototype.slice.call(e,n,n+s);return this.store(c,l),l}}const tg="array",Cl="map_key",aC="map_value",zL=t=>{if(typeof t=="string"||typeof t=="number")return t;throw new gn("The type of key must be string or number but "+typeof t)};class BL{constructor(){this.stack=[],this.stackHeadPosition=-1}get length(){return this.stackHeadPosition+1}top(){return this.stack[this.stackHeadPosition]}pushArrayState(e){const n=this.getUninitializedStateFromPool();n.type=tg,n.position=0,n.size=e,n.array=new Array(e)}pushMapState(e){const n=this.getUninitializedStateFromPool();n.type=Cl,n.readCount=0,n.size=e,n.map={}}getUninitializedStateFromPool(){if(this.stackHeadPosition++,this.stackHeadPosition===this.stack.length){const e={type:void 0,size:0,array:void 0,position:0,readCount:0,map:void 0,key:null};this.stack.push(e)}return this.stack[this.stackHeadPosition]}release(e){if(this.stack[this.stackHeadPosition]!==e)throw new Error("Invalid stack state. Released state is not on top of the stack.");if(e.type===tg){const s=e;s.size=0,s.array=void 0,s.position=0,s.type=void 0}if(e.type===Cl||e.type===aC){const s=e;s.size=0,s.map=void 0,s.readCount=0,s.type=void 0}this.stackHeadPosition--}reset(){this.stack.length=0,this.stackHeadPosition=-1}}const sl=-1,Qg=new DataView(new ArrayBuffer(0)),PL=new Uint8Array(Qg.buffer);try{Qg.getInt8(0)}catch(t){if(!(t instanceof RangeError))throw new Error("This module is not supported in the current JavaScript engine because DataView does not throw RangeError on out-of-bounds access")}const dx=new RangeError("Insufficient data"),qL=new LL;class zs{constructor(e){this.totalPos=0,this.pos=0,this.view=Qg,this.bytes=PL,this.headByte=sl,this.stack=new BL,this.entered=!1,this.extensionCodec=e?.extensionCodec??Hl.defaultCodec,this.context=e?.context,this.useBigInt64=e?.useBigInt64??!1,this.rawStrings=e?.rawStrings??!1,this.maxStrLength=e?.maxStrLength??rl,this.maxBinLength=e?.maxBinLength??rl,this.maxArrayLength=e?.maxArrayLength??rl,this.maxMapLength=e?.maxMapLength??rl,this.maxExtLength=e?.maxExtLength??rl,this.keyDecoder=e?.keyDecoder!==void 0?e.keyDecoder:qL,this.mapKeyConverter=e?.mapKeyConverter??zL}clone(){return new zs({extensionCodec:this.extensionCodec,context:this.context,useBigInt64:this.useBigInt64,rawStrings:this.rawStrings,maxStrLength:this.maxStrLength,maxBinLength:this.maxBinLength,maxArrayLength:this.maxArrayLength,maxMapLength:this.maxMapLength,maxExtLength:this.maxExtLength,keyDecoder:this.keyDecoder})}reinitializeState(){this.totalPos=0,this.headByte=sl,this.stack.reset()}setBuffer(e){const n=eg(e);this.bytes=n,this.view=new DataView(n.buffer,n.byteOffset,n.byteLength),this.pos=0}appendBuffer(e){if(this.headByte===sl&&!this.hasRemaining(1))this.setBuffer(e);else{const n=this.bytes.subarray(this.pos),s=eg(e),a=new Uint8Array(n.length+s.length);a.set(n),a.set(s,n.length),this.setBuffer(a)}}hasRemaining(e){return this.view.byteLength-this.pos>=e}createExtraByteError(e){const{view:n,pos:s}=this;return new RangeError(`Extra ${n.byteLength-s} of ${n.byteLength} byte(s) found at buffer[${e}]`)}decode(e){if(this.entered)return this.clone().decode(e);try{this.entered=!0,this.reinitializeState(),this.setBuffer(e);const n=this.doDecodeSync();if(this.hasRemaining(1))throw this.createExtraByteError(this.pos);return n}finally{this.entered=!1}}*decodeMulti(e){if(this.entered){yield*this.clone().decodeMulti(e);return}try{for(this.entered=!0,this.reinitializeState(),this.setBuffer(e);this.hasRemaining(1);)yield this.doDecodeSync()}finally{this.entered=!1}}async decodeAsync(e){if(this.entered)return this.clone().decodeAsync(e);try{this.entered=!0;let n=!1,s;for await(const d of e){if(n)throw this.entered=!1,this.createExtraByteError(this.totalPos);this.appendBuffer(d);try{s=this.doDecodeSync(),n=!0}catch(f){if(!(f instanceof RangeError))throw f}this.totalPos+=this.pos}if(n){if(this.hasRemaining(1))throw this.createExtraByteError(this.totalPos);return s}const{headByte:a,pos:l,totalPos:c}=this;throw new RangeError(`Insufficient data in parsing ${gp(a)} at ${c} (${l} in the current buffer)`)}finally{this.entered=!1}}decodeArrayStream(e){return this.decodeMultiAsync(e,!0)}decodeStream(e){return this.decodeMultiAsync(e,!1)}async*decodeMultiAsync(e,n){if(this.entered){yield*this.clone().decodeMultiAsync(e,n);return}try{this.entered=!0;let s=n,a=-1;for await(const l of e){if(n&&a===0)throw this.createExtraByteError(this.totalPos);this.appendBuffer(l),s&&(a=this.readArraySize(),s=!1,this.complete());try{for(;yield this.doDecodeSync(),--a!==0;);}catch(c){if(!(c instanceof RangeError))throw c}this.totalPos+=this.pos}}finally{this.entered=!1}}doDecodeSync(){e:for(;;){const e=this.readHeadByte();let n;if(e>=224)n=e-256;else if(e<192)if(e<128)n=e;else if(e<144){const a=e-128;if(a!==0){this.pushMapState(a),this.complete();continue e}else n={}}else if(e<160){const a=e-144;if(a!==0){this.pushArrayState(a),this.complete();continue e}else n=[]}else{const a=e-160;n=this.decodeString(a,0)}else if(e===192)n=null;else if(e===194)n=!1;else if(e===195)n=!0;else if(e===202)n=this.readF32();else if(e===203)n=this.readF64();else if(e===204)n=this.readU8();else if(e===205)n=this.readU16();else if(e===206)n=this.readU32();else if(e===207)this.useBigInt64?n=this.readU64AsBigInt():n=this.readU64();else if(e===208)n=this.readI8();else if(e===209)n=this.readI16();else if(e===210)n=this.readI32();else if(e===211)this.useBigInt64?n=this.readI64AsBigInt():n=this.readI64();else if(e===217){const a=this.lookU8();n=this.decodeString(a,1)}else if(e===218){const a=this.lookU16();n=this.decodeString(a,2)}else if(e===219){const a=this.lookU32();n=this.decodeString(a,4)}else if(e===220){const a=this.readU16();if(a!==0){this.pushArrayState(a),this.complete();continue e}else n=[]}else if(e===221){const a=this.readU32();if(a!==0){this.pushArrayState(a),this.complete();continue e}else n=[]}else if(e===222){const a=this.readU16();if(a!==0){this.pushMapState(a),this.complete();continue e}else n={}}else if(e===223){const a=this.readU32();if(a!==0){this.pushMapState(a),this.complete();continue e}else n={}}else if(e===196){const a=this.lookU8();n=this.decodeBinary(a,1)}else if(e===197){const a=this.lookU16();n=this.decodeBinary(a,2)}else if(e===198){const a=this.lookU32();n=this.decodeBinary(a,4)}else if(e===212)n=this.decodeExtension(1,0);else if(e===213)n=this.decodeExtension(2,0);else if(e===214)n=this.decodeExtension(4,0);else if(e===215)n=this.decodeExtension(8,0);else if(e===216)n=this.decodeExtension(16,0);else if(e===199){const a=this.lookU8();n=this.decodeExtension(a,1)}else if(e===200){const a=this.lookU16();n=this.decodeExtension(a,2)}else if(e===201){const a=this.lookU32();n=this.decodeExtension(a,4)}else throw new gn(`Unrecognized type byte: ${gp(e)}`);this.complete();const s=this.stack;for(;s.length>0;){const a=s.top();if(a.type===tg)if(a.array[a.position]=n,a.position++,a.position===a.size)n=a.array,s.release(a);else continue e;else if(a.type===Cl){if(n==="__proto__")throw new gn("The key __proto__ is not allowed");a.key=this.mapKeyConverter(n),a.type=aC;continue e}else if(a.map[a.key]=n,a.readCount++,a.readCount===a.size)n=a.map,s.release(a);else{a.key=null,a.type=Cl;continue e}}return n}}readHeadByte(){return this.headByte===sl&&(this.headByte=this.readU8()),this.headByte}complete(){this.headByte=sl}readArraySize(){const e=this.readHeadByte();switch(e){case 220:return this.readU16();case 221:return this.readU32();default:{if(e<160)return e-144;throw new gn(`Unrecognized array type byte: ${gp(e)}`)}}}pushMapState(e){if(e>this.maxMapLength)throw new gn(`Max length exceeded: map length (${e}) > maxMapLengthLength (${this.maxMapLength})`);this.stack.pushMapState(e)}pushArrayState(e){if(e>this.maxArrayLength)throw new gn(`Max length exceeded: array length (${e}) > maxArrayLength (${this.maxArrayLength})`);this.stack.pushArrayState(e)}decodeString(e,n){return!this.rawStrings||this.stateIsMapKey()?this.decodeUtf8String(e,n):this.decodeBinary(e,n)}decodeUtf8String(e,n){if(e>this.maxStrLength)throw new gn(`Max length exceeded: UTF-8 byte length (${e}) > maxStrLength (${this.maxStrLength})`);if(this.bytes.byteLength<this.pos+n+e)throw dx;const s=this.pos+n;let a;return this.stateIsMapKey()&&this.keyDecoder?.canBeCached(e)?a=this.keyDecoder.decode(this.bytes,s,e):a=AL(this.bytes,s,e),this.pos+=n+e,a}stateIsMapKey(){return this.stack.length>0?this.stack.top().type===Cl:!1}decodeBinary(e,n){if(e>this.maxBinLength)throw new gn(`Max length exceeded: bin length (${e}) > maxBinLength (${this.maxBinLength})`);if(!this.hasRemaining(e+n))throw dx;const s=this.pos+n,a=this.bytes.subarray(s,s+e);return this.pos+=n+e,a}decodeExtension(e,n){if(e>this.maxExtLength)throw new gn(`Max length exceeded: ext length (${e}) > maxExtLength (${this.maxExtLength})`);const s=this.view.getInt8(this.pos+n),a=this.decodeBinary(e,n+1);return this.extensionCodec.decode(a,s,this.context)}lookU8(){return this.view.getUint8(this.pos)}lookU16(){return this.view.getUint16(this.pos)}lookU32(){return this.view.getUint32(this.pos)}readU8(){const e=this.view.getUint8(this.pos);return this.pos++,e}readI8(){const e=this.view.getInt8(this.pos);return this.pos++,e}readU16(){const e=this.view.getUint16(this.pos);return this.pos+=2,e}readI16(){const e=this.view.getInt16(this.pos);return this.pos+=2,e}readU32(){const e=this.view.getUint32(this.pos);return this.pos+=4,e}readI32(){const e=this.view.getInt32(this.pos);return this.pos+=4,e}readU64(){const e=NL(this.view,this.pos);return this.pos+=8,e}readI64(){const e=Z1(this.view,this.pos);return this.pos+=8,e}readU64AsBigInt(){const e=this.view.getBigUint64(this.pos);return this.pos+=8,e}readI64AsBigInt(){const e=this.view.getBigInt64(this.pos);return this.pos+=8,e}readF32(){const e=this.view.getFloat32(this.pos);return this.pos+=4,e}readF64(){const e=this.view.getFloat64(this.pos);return this.pos+=8,e}}function HL(t,e){return new zs(e).decode(t)}function VL(t,e){return new zs(e).decodeMulti(t)}function FL(t){return t[Symbol.asyncIterator]!=null}async function*YL(t){const e=t.getReader();try{for(;;){const{done:n,value:s}=await e.read();if(n)return;yield s}}finally{e.releaseLock()}}function Wg(t){return FL(t)?t:YL(t)}async function GL(t,e){const n=Wg(t);return new zs(e).decodeAsync(n)}function XL(t,e){const n=Wg(t);return new zs(e).decodeArrayStream(n)}function KL(t,e){const n=Wg(t);return new zs(e).decodeStream(n)}const QL=Object.freeze(Object.defineProperty({__proto__:null,DecodeError:gn,Decoder:zs,EXT_TIMESTAMP:eC,Encoder:hf,ExtData:ul,ExtensionCodec:Hl,decode:HL,decodeArrayStream:XL,decodeAsync:GL,decodeMulti:VL,decodeMultiStream:KL,decodeTimestampExtension:iC,decodeTimestampToTimeSpec:sC,encode:UL,encodeDateToTimeSpec:nC,encodeTimeSpecToTimestamp:tC,encodeTimestampExtension:rC},Symbol.toStringTag,{value:"Module"})),WL=Xx(QL);var An={},fx;function JL(){if(fx)return An;fx=1,Object.defineProperty(An,"__esModule",{value:!0});function t(B){return{enumerable:!0,value:B}}function e(B){return{enumerable:!0,writable:!0,value:B}}let n={},s=()=>!0,a=()=>({}),l=B=>B,c=(B,G,D,P)=>B.apply(D,P)&&G.apply(D,P),d=(B,G,D,[P,Z])=>G.call(D,B.call(D,P,Z),Z),f=(B,G)=>Object.freeze(Object.create(B,G));function h(B,G,D){return B.reduce((P,Z)=>function(...K){return D(P,Z,this,K)},G)}function p(B){return f(this,{fn:t(B)})}let g={},v=p.bind(g),_=B=>v((G,D)=>!!~B(G,D)&&G),x={},w=p.bind(x);function S(B,G){return G.filter(D=>B.isPrototypeOf(D))}function A(B,G,...D){let P=h(S(x,D).map(K=>K.fn),s,c),Z=h(S(g,D).map(K=>K.fn),l,d);return f(this,{from:t(B),to:t(G),guards:t(P),reducers:t(Z)})}let N={},E={},C=A.bind(N),O=A.bind(E,null);function k(B,G,D){return V(G,B,D,this.immediates)||B}function R(B){let G=new Map;for(let D of B)G.has(D.from)||G.set(D.from,[]),G.get(D.from).push(D);return G}let $={enter:l};function L(...B){let G=S(N,B),D=S(E,B),P={final:t(B.length===0),transitions:t(R(G))};return D.length&&(P.immediates=t(D),P.enter=t(k)),f($,P)}let X={enter(B,G,D){let P=this.fn.call(G,G.context,D);return W.isPrototypeOf(P)?f(F,{machine:t(P),transitions:t(this.transitions)}).enter(B,G,D):(P.then(Z=>G.send({type:"done",data:Z})).catch(Z=>G.send({type:"error",error:Z})),B)}},F={enter(B,G,D){if(G.child=q(this.machine,P=>{G.onChange(P),G.child==P&&P.machine.state.value.final&&(delete G.child,G.send({type:"done",data:P.context}))},G.context,D),G.child.machine.state.value.final){let P=G.child.context;return delete G.child,V(G,B,{type:"done",data:P},this.transitions.get("done"))}return B}};function H(B,...G){let D=t(R(G));return W.isPrototypeOf(B)?f(F,{machine:t(B),transitions:D}):f(X,{fn:t(B),transitions:D})}let W={get state(){return{name:this.current,value:this.states[this.current]}}};function I(B,G,D=a){return typeof B!="string"&&(D=G||a,G=B,B=Object.keys(G)[0]),n._create&&n._create(B,G),f(W,{context:t(D),current:t(B),states:t(G)})}function V(B,G,D,P){let{context:Z}=B;for(let{to:K,guards:re,reducers:ee}of P)if(re(Z,D)){B.context=ee.call(B,Z,D);let oe=G.original||G,ce=f(oe,{current:t(K),original:{value:oe}});return n._onEnter&&n._onEnter(G,K,B.context,Z,D),ce.state.value.enter(ce,B,D)}}function U(B,G){let D=G.type||G,{machine:P}=B,{value:Z,name:K}=P.state;return Z.transitions.has(D)?V(B,P,G,Z.transitions.get(D))||P:(n._send&&n._send(D,K),P)}let z={send(B){this.machine=U(this,B),this.onChange(this)}};function q(B,G,D,P){let Z=Object.create(z,{machine:e(B),context:e(B.context(D,P)),onChange:t(G)});return Z.send=Z.send.bind(Z),Z.machine=Z.machine.state.value.enter(Z.machine,Z,P),Z}return An.action=_,An.createMachine=I,An.d=n,An.guard=w,An.immediate=O,An.interpret=q,An.invoke=H,An.reduce=v,An.state=L,An.transition=C,An}var hx;function ZL(){if(hx)return Qu;hx=1,Object.defineProperty(Qu,"__esModule",{value:!0}),Qu.createRealtimeClient=F;const t=WL,e=JL(),n=K1(),s=Ai(),a=Xg(),l=Ti(),c=()=>({enqueuedMessage:void 0});function d(H){return H.token!==void 0}function f(H){return!d(H)}function h(H,W){return Object.assign(Object.assign({},H),{enqueuedMessage:W.message})}function p(H){return H.websocket&&H.websocket.readyState===WebSocket.OPEN&&H.websocket.close(),Object.assign(Object.assign({},H),{websocket:void 0})}function g(H,W){return H.websocket&&H.websocket.readyState===WebSocket.OPEN?(W.message instanceof Uint8Array?H.websocket.send(W.message):H.websocket.send((0,t.encode)(W.message)),Object.assign(Object.assign({},H),{enqueuedMessage:void 0})):Object.assign(Object.assign({},H),{enqueuedMessage:W.message})}function v(H){return Object.assign(Object.assign({},H),{token:void 0})}function _(H,W){return Object.assign(Object.assign({},H),{token:W.token})}function x(H,W){return Object.assign(Object.assign({},H),{websocket:W.websocket})}const w=(0,e.createMachine)("idle",{idle:(0,e.state)((0,e.transition)("send","connecting",(0,e.reduce)(h)),(0,e.transition)("expireToken","idle",(0,e.reduce)(v)),(0,e.transition)("close","idle",(0,e.reduce)(p))),connecting:(0,e.state)((0,e.transition)("connecting","connecting"),(0,e.transition)("connected","active",(0,e.reduce)(x)),(0,e.transition)("connectionClosed","idle",(0,e.reduce)(p)),(0,e.transition)("send","connecting",(0,e.reduce)(h)),(0,e.transition)("close","idle",(0,e.reduce)(p)),(0,e.immediate)("authRequired",(0,e.guard)(f))),authRequired:(0,e.state)((0,e.transition)("initiateAuth","authInProgress"),(0,e.transition)("send","authRequired",(0,e.reduce)(h)),(0,e.transition)("close","idle",(0,e.reduce)(p))),authInProgress:(0,e.state)((0,e.transition)("authenticated","connecting",(0,e.reduce)(_)),(0,e.transition)("unauthorized","idle",(0,e.reduce)(v),(0,e.reduce)(p)),(0,e.transition)("send","authInProgress",(0,e.reduce)(h)),(0,e.transition)("close","idle",(0,e.reduce)(p))),active:(0,e.state)((0,e.transition)("send","active",(0,e.reduce)(g)),(0,e.transition)("unauthorized","idle",(0,e.reduce)(v)),(0,e.transition)("connectionClosed","idle",(0,e.reduce)(p)),(0,e.transition)("close","idle",(0,e.reduce)(p))),failed:(0,e.state)((0,e.transition)("send","failed"),(0,e.transition)("close","idle",(0,e.reduce)(p)))},c);function S(H,{token:W,maxBuffering:I}){if(I!==void 0&&(I<1||I>60))throw new Error("The `maxBuffering` must be between 1 and 60 (inclusive)");const V=new URLSearchParams({fal_jwt_token:W});return I!==void 0&&V.set("max_buffering",I.toFixed(0)),`wss://fal.run/${(0,l.ensureEndpointIdFormat)(H)}/realtime?${V.toString()}`}const A=128;function N(H){return H.status==="error"&&H.error==="Unauthorized"}const E={NORMAL_CLOSURE:1e3},C=new Map,O=new Map;function k(H,W,I){if(!C.has(H)){const V=(0,e.interpret)(w,I);C.set(H,Object.assign(Object.assign({},V),{throttledSend:W>0?(0,l.throttle)(V.send,W,!0):V.send}))}return C.get(H)}const R=()=>{},$={send:R,close:R};function L(H){return H.status!=="error"&&H.type!=="x-fal-message"&&!X(H)}function X(H){return H.type==="x-fal-error"}function F({config:H}){return{connect(W,I){const{clientOnly:V=(0,l.isReact)()&&!(0,a.isBrowser)(),connectionKey:U=crypto.randomUUID(),maxBuffering:z,throttleInterval:q=A}=I;if(V&&!(0,a.isBrowser)())return $;let B;O.set(U,{onError:I.onError,onResult:I.onResult});const G=()=>O.get(U),D=k(U,q,({context:K,machine:re,send:ee})=>{const{enqueuedMessage:oe,token:ce}=K;if(re.current==="active"&&oe&&ee({type:"send",message:oe}),re.current==="authRequired"&&ce===void 0&&B!==re.current&&(ee({type:"initiateAuth"}),(0,n.getTemporaryAuthToken)(W,H).then(he=>{ee({type:"authenticated",token:he});const ye=Math.round(n.TOKEN_EXPIRATION_SECONDS*.9*1e3);setTimeout(()=>{ee({type:"expireToken"})},ye)}).catch(he=>{ee({type:"unauthorized",error:he})})),re.current==="connecting"&&B!==re.current&&ce!==void 0){const he=new WebSocket(S(W,{token:ce,maxBuffering:z}));he.onopen=()=>{ee({type:"connected",websocket:he})},he.onclose=ye=>{if(ye.code!==E.NORMAL_CLOSURE){const{onError:xe=R}=G();xe(new s.ApiError({message:`Error closing the connection: ${ye.reason}`,status:ye.code}))}ee({type:"connectionClosed",code:ye.code})},he.onerror=ye=>{const{onError:xe=R}=G();xe(new s.ApiError({message:"Unknown error",status:500}))},he.onmessage=ye=>{const{onResult:xe}=G();if(ye.data instanceof ArrayBuffer){const Ce=(0,t.decode)(new Uint8Array(ye.data));xe(Ce);return}if(ye.data instanceof Uint8Array){const Ce=(0,t.decode)(ye.data);xe(Ce);return}if(ye.data instanceof Blob){ye.data.arrayBuffer().then(Ce=>{const ze=(0,t.decode)(new Uint8Array(Ce));xe(ze)});return}const ve=JSON.parse(ye.data);if(N(ve)){ee({type:"unauthorized",error:new Error("Unauthorized")});return}if(L(ve)){xe(ve);return}if(X(ve)){if(ve.error==="TIMEOUT")return;const{onError:Ce=R}=G();Ce(new s.ApiError({message:`${ve.error}: ${ve.reason}`,status:400,body:ve}));return}}}B=re.current});return{send:K=>{D.throttledSend({type:"send",message:K})},close:()=>{D.send({type:"close"})}}}}}return Qu}var Rs={},mx;function ez(){if(mx)return Rs;mx=1;var t=Rs&&Rs.__awaiter||function(p,g,v,_){function x(w){return w instanceof v?w:new v(function(S){S(w)})}return new(v||(v=Promise))(function(w,S){function A(C){try{E(_.next(C))}catch(O){S(O)}}function N(C){try{E(_.throw(C))}catch(O){S(O)}}function E(C){C.done?w(C.value):x(C.value).then(A,N)}E((_=_.apply(p,g||[])).next())})};Object.defineProperty(Rs,"__esModule",{value:!0}),Rs.LIFECYCLE_DURATIONS=void 0,Rs.createStorageClient=h;const e=Kg(),n=nc(),s=Ti();Rs.LIFECYCLE_DURATIONS={ONE_DAY:86400,ONE_WEEK:604800,ONE_MONTH:2592e3,ONE_YEAR:31536e3,UNLIMITED:31536e6};function a(p){var g;const[,v]=p.split("/");return(g=v.split(/[-;]/)[0])!==null&&g!==void 0?g:"bin"}function l(p,g,v,_){return t(this,void 0,void 0,function*(){const x=p.name||`${Date.now()}.${a(v)}`,w={};return _&&(w["X-Fal-Object-Lifecycle"]=JSON.stringify(_)),yield(0,n.dispatchRequest)({method:"POST",targetUrl:`${(0,e.getRestApiUrl)()}/storage/upload/initiate?storage_type=fal-cdn-v3`,input:{content_type:v,file_name:x},config:g,headers:w})})}function c(p,g,v,_){return t(this,void 0,void 0,function*(){const x=p.name||`${Date.now()}.${a(v)}`,w={};return _&&(w["X-Fal-Object-Lifecycle"]=JSON.stringify(_)),yield(0,n.dispatchRequest)({method:"POST",targetUrl:`${(0,e.getRestApiUrl)()}/storage/upload/initiate-multipart?storage_type=fal-cdn-v3`,input:{content_type:v,file_name:x},config:g,headers:w})})}function d(p,g,v){return t(this,arguments,void 0,function*(_,x,w,S=3){if(S===0)throw new Error("Part upload failed, retries exhausted");const{fetch:A,responseHandler:N}=w;try{const E=yield A(_,{method:"PUT",body:x});return yield N(E)}catch{return yield d(_,x,w,S-1)}})}function f(p,g,v){return t(this,void 0,void 0,function*(){const{fetch:_,responseHandler:x}=g,w=p.type||"application/octet-stream",{upload_url:S,file_url:A}=yield c(p,g,w,v),N=10*1024*1024,E=Math.ceil(p.size/N),C=new URL(S),O=[];for(let $=0;$<E;$++){const L=$*N,X=Math.min(L+N,p.size),F=p.slice(L,X),H=$+1,W=`${C.origin}${C.pathname}/${H}${C.search}`;O.push(yield d(W,F,g))}const k=`${C.origin}${C.pathname}/complete${C.search}`,R=yield _(k,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({parts:O.map($=>({partNumber:$.partNumber,etag:$.etag}))})});return yield x(R),A})}function h({config:p}){const g={upload:(v,_)=>t(this,void 0,void 0,function*(){const x=_?.lifecycle;if(v.size>94371840)return yield f(v,p,x);const w=v.type||"application/octet-stream",{fetch:S,responseHandler:A}=p,{upload_url:N,file_url:E}=yield l(v,p,w,x),C=yield S(N,{method:"PUT",body:v,headers:{"Content-Type":v.type||"application/octet-stream"}});return yield A(C),E}),transformInput:v=>t(this,void 0,void 0,function*(){if(Array.isArray(v))return Promise.all(v.map(_=>g.transformInput(_)));if(v instanceof Blob)return yield g.upload(v);if((0,s.isPlainObject)(v)){const x=Object.entries(v).map(S=>t(this,[S],void 0,function*([A,N]){return[A,yield g.transformInput(N)]})),w=yield Promise.all(x);return Object.fromEntries(w)}return v})};return g}return Rs}var px;function gx(){if(px)return Sa;px=1;var t=Sa&&Sa.__awaiter||function(h,p,g,v){function _(x){return x instanceof g?x:new g(function(w){w(x)})}return new(g||(g=Promise))(function(x,w){function S(E){try{N(v.next(E))}catch(C){w(C)}}function A(E){try{N(v.throw(E))}catch(C){w(C)}}function N(E){E.done?x(E.value):_(E.value).then(S,A)}N((v=v.apply(h,p||[])).next())})};Object.defineProperty(Sa,"__esModule",{value:!0}),Sa.createFalClient=f;const e=Kg(),n=pL(),s=ZL(),a=nc(),l=Ai(),c=ez(),d=Q1();function f(h={}){const p=(0,e.createConfig)(h),g=(0,c.createStorageClient)({config:p}),v=(0,n.createQueueClient)({config:p,storage:g}),_=(0,d.createStreamingClient)({config:p,storage:g}),x=(0,s.createRealtimeClient)({config:p});return{queue:v,realtime:x,storage:g,streaming:_,stream:_.stream,run(w){return t(this,arguments,void 0,function*(S,A={}){const N=A.input?yield g.transformInput(A.input):void 0;return(0,a.dispatchRequest)({method:A.method,targetUrl:(0,a.buildUrl)(S,A),input:N,config:Object.assign(Object.assign({},p),{responseHandler:l.resultResponseHandler}),options:{signal:A.abortSignal,retry:{maxRetries:3,baseDelay:500,maxDelay:15e3}}})})},subscribe:(w,S)=>t(this,void 0,void 0,function*(){const{request_id:A}=yield v.submit(w,S);return S.onEnqueue&&S.onEnqueue(A),yield v.subscribeToStatus(w,Object.assign({requestId:A},S)),v.result(w,{requestId:A})})}}return Sa}var il={},yx;function tz(){if(yx)return il;yx=1,Object.defineProperty(il,"__esModule",{value:!0}),il.isQueueStatus=t,il.isCompletedQueueStatus=e;function t(n){return n&&n.status&&n.response_url}function e(n){return t(n)&&n.status==="COMPLETED"}return il}var vx;function nz(){return vx||(vx=1,(function(t){var e=oi&&oi.__createBinding||(Object.create?(function(h,p,g,v){v===void 0&&(v=g);var _=Object.getOwnPropertyDescriptor(p,g);(!_||("get"in _?!p.__esModule:_.writable||_.configurable))&&(_={enumerable:!0,get:function(){return p[g]}}),Object.defineProperty(h,v,_)}):(function(h,p,g,v){v===void 0&&(v=g),h[v]=p[g]})),n=oi&&oi.__exportStar||function(h,p){for(var g in h)g!=="default"&&!Object.prototype.hasOwnProperty.call(p,g)&&e(p,h,g)};Object.defineProperty(t,"__esModule",{value:!0}),t.fal=t.parseEndpointId=t.isRetryableError=t.ValidationError=t.ApiError=t.withProxy=t.withMiddleware=t.createFalClient=void 0;const s=gx();var a=gx();Object.defineProperty(t,"createFalClient",{enumerable:!0,get:function(){return a.createFalClient}});var l=X1();Object.defineProperty(t,"withMiddleware",{enumerable:!0,get:function(){return l.withMiddleware}}),Object.defineProperty(t,"withProxy",{enumerable:!0,get:function(){return l.withProxy}});var c=Ai();Object.defineProperty(t,"ApiError",{enumerable:!0,get:function(){return c.ApiError}}),Object.defineProperty(t,"ValidationError",{enumerable:!0,get:function(){return c.ValidationError}});var d=ff();Object.defineProperty(t,"isRetryableError",{enumerable:!0,get:function(){return d.isRetryableError}}),n(tz(),t);var f=Ti();Object.defineProperty(t,"parseEndpointId",{enumerable:!0,get:function(){return f.parseEndpointId}}),t.fal=(function(){let p=(0,s.createFalClient)();return{config(g){p=(0,s.createFalClient)(g)},get queue(){return p.queue},get realtime(){return p.realtime},get storage(){return p.storage},get streaming(){return p.streaming},run(g,v){return p.run(g,v)},subscribe(g,v){return p.subscribe(g,v)},stream(g,v){return p.stream(g,v)}}})()})(oi)),oi}var _x=nz();function rz({id:t,data:e,selected:n}){const[s,a]=j.useState(null),[l,c]=j.useState(!1),[d,f]=j.useState(!1),[h,p]=j.useState(["https://v3b.fal.media/files/b/0a844eac/Gzdb5hacjJ-5M5XcrfOMI.png","https://v3b.fal.media/files/b/0a844eac/Y4_H1PnhWEdKd0p8SGzlI.png"]),[g,v]=j.useState([]),[_,x]=j.useState({}),[w,S]=j.useState(""),[A,N]=j.useState("16:9"),[E,C]=j.useState(1),[O,k]=j.useState("fal-ai/nano-banana/edit"),[R,$]=j.useState(0),[L,X]=j.useState(0),F=Wa(),H=q1({handleType:"target",handleId:"ref_images"}),W=H.map(z=>z.source),I=MI(W),V=()=>I?(Array.isArray(I)?I:[I]).flatMap(B=>B&&B.data&&Array.isArray(B.data.outputImages)?B.data.outputImages:[]):[];j.useEffect(()=>{console.log("sourceNodesData:",I),console.log("getAggregatedRefImages:",V()),v(V())},[I]),j.useEffect(()=>{$(h.length),h.length>0&&a(h[L].url)},[h,L]),j.useEffect(()=>{S(e.prompt),N(e.aspect_ratio),C(e.num_images),k(e.model),p(e.images||[]),console.log("embodyConnections:",H)},[]);const U=async()=>{let z={};console.log("referenceImages:",g),O==="fal-ai/nano-banana/edit"&&(z={prompt:w,num_images:Number(E),aspect_ratio:A,output_format:"png",image_urls:g.map(q=>q!=null?q.url:"")}),O==="fal-ai/nano-banana-pro/edit"&&(z={prompt:e.prompt}),O==="fal-ai/bytedance/seedream/v4/edit"&&(z={prompt:e.prompt}),console.log(z);try{_x.fal.config({credentials:"d0f5c4fd-29b2-4024-bc64-a4719276c027:5b06c17b429cc06d2f5e044e95ca5164"});const q=await _x.fal.subscribe("fal-ai/nano-banana/edit",{input:z,logs:!0,onQueueUpdate:B=>{B.status==="IN_PROGRESS"&&c(!0),B.status==="SUCCEEDED"&&c(!1)},onResult:B=>{console.log(B)},onError:B=>{console.error("Error:",B),c(!1)}});a(null),console.log(q.data),p(q.data.images),F&&F.setNodes(B=>B.map(G=>G.id===t?{...G,data:{...G.data,images:q.data.images}}:G)),X(0),c(!1)}catch(q){console.error("Error:",q),c(!1)}};return b.jsxs("div",{className:"txt-image-node-area",children:[b.jsxs("div",{className:"txt2img-handles-container",children:[b.jsx(tn,{type:"target",position:Se.Left,id:"ref_images"}),b.jsx(tn,{type:"source",position:Se.Right,id:"image"})]}),b.jsxs("div",{className:"txt2img-preview-container",children:[b.jsxs("div",{className:"txt2img-preview-header",children:[b.jsxs("div",{className:"txt2img-preview-title",children:["Image-",L]}),b.jsx("div",{className:"txt2img-preview-controls",children:b.jsx("span",{className:"",children:O})})]}),b.jsxs("div",{className:"txt2img-preview-image",children:[b.jsx("div",{className:"txt2img-placeholder-image",children:s?b.jsxs(b.Fragment,{children:[b.jsx("img",{src:s,alt:"Generated"}),b.jsx("button",{className:"embody-view-large-btn",onClick:()=>{console.log("currentImageUrl",s),Xt.emit("showLargeImageModal",s)},children:""})]}):b.jsx("div",{className:"txt2img-placeholder-text",children:""})}),h.length>1&&b.jsxs("div",{className:"txt2img-pagination",children:[b.jsx("button",{className:"txt2img-pagination-btn",onClick:()=>X(z=>Math.max(z-1,0)),children:""}),b.jsxs("span",{className:"txt2img-pagination-text",children:[L+1," / ",R]}),b.jsx("button",{className:"txt2img-pagination-btn",onClick:()=>X(z=>Math.min(z+1,R-1)),children:""})]}),l&&b.jsxs("div",{className:"txt2img-loading-overlay",children:[b.jsx("div",{className:"txt2img-loading-spinner"}),b.jsx("span",{className:"txt2img-loading-text",children:"..."})]})]})]}),n&&b.jsxs(b.Fragment,{children:[b.jsx("div",{className:"txt2img-prompt-container",children:b.jsx("textarea",{className:"txt2img-prompt-textarea",value:w,onChange:z=>{const q=z.target.value;S(q),F&&F.setNodes(B=>B.map(G=>G.id===t?{...G,data:{...G.data,prompt:q}}:G))},placeholder:"..."})}),b.jsxs("div",{className:"txt2img-reference-container",children:[b.jsxs("div",{className:"txt2img-reference-title",children:[" (",g.length,"/10)"]}),b.jsx("div",{className:"txt2img-reference-grid",children:g&&g.map((z,q)=>b.jsx("div",{className:"txt2img-reference-item",children:b.jsx("img",{src:z.url||"",alt:`Reference ${q+1}`})},q))})]}),b.jsxs("div",{className:"txt2img-bottom-controls",children:[b.jsxs("div",{className:"txt2img-controls-left",children:[b.jsx("div",{className:"txt2img-control-group",children:b.jsxs("select",{value:O,onChange:z=>{const q=z.target.value;k(q),F&&F.setNodes(B=>B.map(G=>G.id===t?{...G,data:{...G.data,model:q}}:G))},className:"txt2img-control-select",children:[b.jsx("option",{value:"fal-ai/nano-banana/edit",children:"Nano Banana"}),b.jsx("option",{value:"fal-ai/nano-banana-pro/edit",children:"Nano Banana Pro"}),b.jsx("option",{value:"fal-ai/bytedance/seedream/v4/edit",children:"v4"})]})}),b.jsx("div",{className:"txt2img-control-group",children:b.jsxs("select",{value:A,onChange:z=>{const q=z.target.value;N(q),F&&F.setNodes(B=>B.map(G=>G.id===t?{...G,data:{...G.data,aspect_ratio:q}}:G))},className:"txt2img-control-select",children:[b.jsx("option",{value:"16:9",children:"16:9 "}),b.jsx("option",{value:"9:16",children:"9:16 "}),b.jsx("option",{value:"4:3",children:"4:3 "})]})}),b.jsx("div",{className:"txt2img-control-group",children:b.jsxs("select",{value:E,onChange:z=>{const q=z.target.value;C(q),F&&F.setNodes(B=>B.map(G=>G.id===t?{...G,data:{...G.data,num_images:parseInt(q)}}:G))},className:"txt2img-control-select",children:[b.jsx("option",{value:"1",children:"1"}),b.jsx("option",{value:"2",children:"2"}),b.jsx("option",{value:"3",children:"3"}),b.jsx("option",{value:"4",children:"4"})]})})]}),b.jsxs("div",{className:"txt2img-controls-right",children:[b.jsx("button",{className:"txt2img-control-button",children:""}),b.jsx("button",{disabled:l,onClick:U,className:"txt2img-generate-button",children:""})]})]})]})]})}function sz({id:t,data:e,selected:n}){const{updateNodeData:s}=Wa(),[a,l]=j.useState(null),[c,d]=j.useState(!1),[f,h]=j.useState({}),[p,g]=j.useState(""),[v,_]=j.useState(""),[x,w]=j.useState([]),[S,A]=j.useState([0]),[N,E]=j.useState([]),[C,O]=j.useState(""),[k,R]=j.useState(""),$={character:"",scene:"",item:""},X={...{characterName:"",characterDescription:"",imageUrl:"/default_avatar.png"},...e};j.useEffect(()=>{O(X.characterName),R(X.characterDescription)},[X]),j.useEffect(()=>{console.log("EmbodyNode ID:",t),ke.from("embodys").select(`
          *,
          embody_images(
            path
          )
        `).eq("id",t).single().then(U=>{console.log(":",U.data),h(U.data),g(U.data.name),_($[U.data.type]||"");const z=U.data.embody_images.map(q=>({path:q.path,url:ka+q.path}));if(console.log(":",z),w(z),z.length>0&&A([0]),U.data.embody_images&&U.data.embody_images.length>0){let q=ka+U.data.embody_images[0].path;console.log(":",q)}})},[t]),j.useEffect(()=>{x.length>0&&s(t,{outputImages:S.map(U=>x[U])})},[S]);const F=()=>{console.log("")},H=U=>{A(z=>z.includes(U)?z.filter(q=>q!==U):[...z,U]),console.log(":",S)},[W,I]=j.useState(1),V=U=>{if(U>=1&&U<=S.length&&(I(U),S.length>0)){let z=ka+x[S[U-1]].path;l(z)}};return b.jsxs("div",{className:"embody-node-area",children:[b.jsx("div",{className:"embody-handles-container",children:b.jsx(tn,{type:"source",position:Se.Right,id:"embody_out"})}),b.jsxs("div",{className:"embody-preview-container",children:[b.jsxs("div",{className:"embody-preview-header",children:[b.jsx("div",{className:"embody-preview-title",children:p||""}),b.jsx("span",{children:v||""}),b.jsx("div",{className:"embody-preview-controls",children:n&&b.jsx("button",{className:"embody-control-btn",onClick:F,children:""})})]}),b.jsxs("div",{className:"embody-preview-image",children:[b.jsx("div",{className:"embody-placeholder-image",children:a?b.jsxs(b.Fragment,{children:[b.jsx("img",{src:a,alt:"Character Preview"}),b.jsx("button",{className:"embody-view-large-btn",onClick:()=>{console.log("currentImageUrl",a),Xt.emit("showLargeImageModal",a)},children:""})]}):b.jsx("div",{className:"embody-placeholder-text",children:""})}),c&&b.jsxs("div",{className:"embody-loading-overlay",children:[b.jsx("div",{className:"embody-loading-spinner"}),b.jsx("span",{className:"embody-loading-text",children:"..."})]}),S.length>1&&b.jsxs("div",{className:"embody-pagination",children:[b.jsx("button",{className:"embody-pagination-btn",onClick:()=>V(W-1),disabled:W===1,children:""}),b.jsxs("span",{className:"embody-pagination-text",children:[W," / ",S.length]}),b.jsx("button",{className:"embody-pagination-btn",onClick:()=>V(W+1),disabled:W===S.length,children:""})]})]})]}),n&&b.jsx(b.Fragment,{children:b.jsx("div",{className:"embody-info-container",children:b.jsxs("div",{className:"embody-info-item",children:[b.jsx("label",{className:"embody-info-label",children:""}),b.jsx("div",{className:"embody-info-images",children:x.map((U,z)=>b.jsxs("div",{className:`embody-info-image-item ${S.includes(z)?"selected":""}`,onClick:()=>H(z),children:[b.jsx("img",{src:ka+U.path,alt:`${z}`}),S.includes(z)&&b.jsx("div",{className:"embody-image-checkmark",children:""})]},z))})]})})})]})}const iz=({id:t,source:e,target:n,sourceX:s,sourceY:a,targetX:l,targetY:c,sourcePosition:d,targetPosition:f,selected:h,data:p})=>{const[g,v]=j.useMemo(()=>{const C=Pg({sourceX:s,sourceY:a,targetX:l,targetY:c,sourcePosition:d,targetPosition:f}),O=document.createElementNS("http://www.w3.org/2000/svg","path");O.setAttribute("d",C[0]),document.body.appendChild(O);const k=O.getTotalLength();return document.body.removeChild(O),[C[0],k]},[s,a,l,c,d,f]),[_,x]=j.useState(`${t}-animate`),[w,S]=j.useState(!0),A=Math.max(3,Math.min(8,v/5));j.useEffect(()=>{x(`${t}-animate-${Date.now()}`)},[t]);const N={stroke:h?"#ff4088":"#ff0072",strokeWidth:h?3:2,fill:"none",cursor:"pointer",transition:"stroke 0.2s, stroke-width 0.2s"},E={stroke:"white",strokeWidth:"3",fill:"none",strokeDasharray:"12, 8",strokeLinecap:"round",pointerEvents:"none"};return b.jsxs(b.Fragment,{children:[b.jsx("path",{id:t,d:g,className:`exec-edge ${h?"selected":""}`,style:N,onMouseEnter:C=>{C.currentTarget.style.stroke="#ff4088",C.currentTarget.style.strokeWidth="3"},onMouseLeave:C=>{C.currentTarget.style.stroke=h?"#ff4088":"#ff0072",C.currentTarget.style.strokeWidth=h?"3":"2"}}),w&&b.jsx("path",{id:_,d:g,className:"exec-edge-flow",style:{...E,animation:w?`flowAnimation ${A}s linear infinite`:"none",visibility:v>0?"visible":"hidden"}}),b.jsxs("defs",{children:[b.jsx("marker",{id:"exec-arrow",markerWidth:"10",markerHeight:"10",refX:"9",refY:"3",orient:"auto",markerUnits:"strokeWidth",children:b.jsx("path",{d:"M0,0 L0,6 L9,3 z",fill:"#ff0072"})}),b.jsx("style",{type:"text/css",children:`
            @keyframes flowAnimation {
              0% {
                stroke-dashoffset: 200; /*  */
              }
              100% {
                stroke-dashoffset: 0;
              }
            }
            
            .exec-edge-flow {
              /*  */
              filter: drop-shadow(0 0 2px rgba(255, 255, 255, 0.7));
              /*  */
              will-change: stroke-dashoffset;
            }
            
            /*  */
            .exec-edge.selected + .exec-edge-flow {
              stroke-width: 4; /*  */
              filter: drop-shadow(0 0 4px rgba(255, 255, 255, 0.9));
              animation-duration: 3s; /*  */
            }
          `})]})]})},az=({position:t,visible:e,onClose:n,onAddConsoleNode:s,onAddShotNodeInput:a,onAddShotNodeOutput:l,onAddTxt2ImgNode:c,onAddEmbodyNode:d})=>{const f=j.useRef(null);return j.useEffect(()=>{const h=g=>{f.current&&!f.current.contains(g.target)&&n()},p=g=>{g.key==="Escape"&&n()};return e&&(document.addEventListener("mousedown",h),document.addEventListener("keydown",p)),()=>{document.removeEventListener("mousedown",h),document.removeEventListener("keydown",p)}},[e,n]),e?b.jsx("div",{ref:f,className:"context-menu",style:{position:"fixed",left:`${t.x}px`,top:`${t.y}px`,zIndex:1e3},children:b.jsxs("ul",{children:[b.jsx("li",{onClick:s,children:""}),b.jsx("li",{onClick:a,children:""}),b.jsx("li",{onClick:l,children:""}),b.jsx("li",{onClick:c,children:""}),b.jsx("li",{onClick:d,children:""})]})}):null};function oz(){const[t,e]=j.useState(!1),[n,s]=j.useState(!1),[a,l]=j.useState([]),[c,d]=j.useState({}),[f,h]=j.useState(null),[p,g]=j.useState([]),[v,_]=j.useState(null),[x,w]=j.useState(!1),[S,A]=j.useState({x:0,y:0}),[N,E]=j.useState(null);j.useEffect(()=>{f||(console.log(""),console.log(a)),C()},[]);const C=async()=>{const{data:K,error:re}=await ke.from("movie_scs").select(`
          *,
          movie_seqs(
            *,
            movie_shots(
              *,
              flows(
                *
              )
            )
          ).order('index', { ascending: true })
        `).order("index",{ascending:!0}).eq("ep_id",$e.ep_id);if(re){console.error(":",re);return}console.log(":",K),K.forEach(ee=>{ee.movie_seqs.forEach(oe=>{oe.movie_shots.forEach(ce=>{c[ce.id]=ce})})}),l(K),h($e.editShotId)},O=K=>{h(K.id)},k=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(K){var re=Math.random()*16|0,ee=K==="x"?re:re&3|8;return ee.toString(16)}),R=K=>{const re=k();let ee=[],oe=[];ee.push({id:re,type:"txt2imgNode",position:{x:900,y:100},data:{prompt:K.prompt,num_images:1,aspect_ratio:"16:9",model:"fal-ai/nano-banana/edit",images:[]},selected:v==="0",style:{border:v==="0"?"2px solid #3b82f6":"none"}});for(let ce=0;ce<K.embodys.length;ce++){let he=K.embodys[ce];ee.push({id:he,type:"embodyNode",position:{x:100,y:500*ce},data:{id:he,selected:v===he},selected:v===he,style:{border:v===he?"2px solid #3b82f6":"none"}}),oe.push({id:k(),source:he,sourceHandle:"embody_out",target:re,targetHandle:"ref_images",type:"default",data:{}})}g(ee),L(oe)};j.useEffect(()=>{console.log("selectedShotId:",f),f&&(console.log(c[f]),ke.from("movie_shots").select(`
      *,
      flows(
        *
      )
    `).eq("id",f).single().then(K=>{console.log("shot:",K.data),c[f]=K.data,K.data.flows||s(K.data.flows.length>0),K.data.flows.length>0?(g(JSON.parse(K.data.flows[0].nodes)),L(JSON.parse(K.data.flows[0].edges))):R(K.data)}))},[f]),j.useEffect(()=>{},[p]);const[$,L]=j.useState([]),X={shotNodeInput:oL,consoleNode:cL,shotNodeOutput:uL,txt2imgNode:rz,embodyNode:sz},F={execEdge:iz},H=K=>{e(!0),L(re=>{if(K.target==="2"&&re.some(ce=>ce.target==="2"))return console.warn("ConsoleNode"),re;const ee={...K,type:K.sourceHandle==="exec-out"&&K.targetHandle==="exec-in"?"execEdge":"default"};return JE(ee,re)})};j.useEffect(()=>{const K=setInterval(()=>{},1e3);return()=>clearInterval(K)},[p,$,t]),j.useEffect(()=>{const K=re=>{if(re.key==="Delete"){const ee=p.filter(oe=>oe.selected);if(ee.length>0){const oe=p.filter(ye=>!ye.selected);g(oe),e(!0);const ce=ee.map(ye=>ye.id),he=$.filter(ye=>!ce.includes(ye.source)&&!ce.includes(ye.target));L(he)}}};return window.addEventListener("keydown",K),()=>window.removeEventListener("keydown",K)},[p,$]);const W=(K,re)=>{K.stopPropagation();const ee=re.id;_(ee),g(oe=>oe.map(ce=>({...ce,selected:ce.id===ee,style:{...ce.style,border:ce.id===ee?"2px solid #3b82f6":"none"}}))),console.log(":",ee)},I=(K,re)=>{K.preventDefault(),re||(A({x:K.clientX,y:K.clientY}),w(!0))},V=()=>{w(!1)},U=()=>(p.reduce((re,ee)=>{const oe=parseInt(ee.id);return isNaN(oe)?re:Math.max(re,oe)},0)+1).toString(),z=()=>{if(N){const K=N.screenToFlowPosition(S),re={id:U(),type:"consoleNode",position:{x:K.x-75,y:K.y-30},data:{},selected:!1,style:{border:"none"}};g(ee=>[...ee,re]),console.log(":",re.id)}V()},q=()=>{if(N){const K=N.screenToFlowPosition(S),re={id:U(),type:"shotNodeInput",position:{x:K.x-100,y:K.y-50},data:{shot:f?c[f]:{description:"",prompt:"",embodys:[]}},selected:!1,style:{border:"none"}};g(ee=>[...ee,re]),console.log(":",re.id)}V()},B=()=>{if(N){const K=N.screenToFlowPosition(S),re={id:U(),type:"shotNodeOutput",position:{x:K.x-100,y:K.y-50},data:{output:{}},selected:!1,style:{border:"none"}};g(ee=>[...ee,re]),console.log(":",re.id)}V()},G=()=>{if(N){const K=N.screenToFlowPosition(S),re={id:U(),type:"txt2imgNode",position:{x:K.x-40,y:K.y-50},data:{prompt:"",imageUrl:null},selected:!1,style:{border:"none"}};g(ee=>[...ee,re]),console.log(":",re.id)}V()},D=()=>{if(N){const K=N.screenToFlowPosition(S),re={id:U(),type:"embodyNode",position:{x:K.x-40,y:K.y-50},data:{characterName:"",characterDescription:"",imageUrl:null},selected:!1,style:{border:"none"}};g(ee=>[...ee,re]),console.log(":",re.id)}V()},P=j.useCallback(K=>{L(re=>v1(K,re)),e(!0)},[]),Z=j.useCallback(K=>{g(re=>y1(K,re)),e(!0)},[]);return b.jsxs("div",{className:"editor-flow-container",children:[b.jsx("div",{className:"story-nav",children:b.jsx("div",{className:"flow-nav-info",children:a.map(K=>b.jsxs("div",{className:"flow-nav-sc-card",children:[b.jsx("div",{className:"flow-nav-sc-name",children:b.jsx("p",{children:K.name})}),b.jsx("div",{className:"flow-nav-sc-content",children:K.movie_seqs.map(re=>b.jsxs("div",{className:"flow-nav-seq-card",children:[b.jsx("div",{className:"flow-nav-seq-name",children:b.jsx("p",{children:re.name})}),b.jsx("div",{className:"flow-nav-seq-content",children:re.movie_shots.map(ee=>b.jsx("div",{className:`flow-nav-shot-card ${f===ee.id?"nav-selected-shot":""}`,onClick:()=>O(ee),children:b.jsx("div",{className:"flow-nav-shot-thumb",children:b.jsx("img",{src:ee.pic?ee.pic:"./shot_thumb_default.png"})})},ee.id))})]},re.id))})]},K.id))})}),b.jsxs("div",{className:"flow-editor",children:[b.jsxs(jI,{nodes:p,edges:$,nodeTypes:X,edgeTypes:F,onConnect:H,onEdgesChange:P,onNodesChange:Z,onNodeClick:W,defaultViewport:{x:0,y:0,zoom:.8},onPaneClick:()=>{_(null),V(),g(K=>K.map(re=>({...re,selected:!1,style:{...re.style,border:"none"}})))},onContextMenu:I,onInit:E,attributionPosition:"bottom-right",children:[b.jsx(FI,{}),b.jsx(LI,{variant:"dots",gap:20,size:1,strokeColor:"#333"})]}),b.jsx(az,{position:S,visible:x,onClose:V,onAddConsoleNode:z,onAddShotNodeInput:q,onAddShotNodeOutput:B,onAddTxt2ImgNode:G,onAddEmbodyNode:D})]})]})}function Ie(t,e,n,s,a){if(typeof e=="function"?t!==e||!0:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(t,n),n}function se(t,e,n,s){if(n==="a"&&!s)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?s:n==="a"?s.call(t):s?s.value:e.get(t)}let oC=function(){const{crypto:t}=globalThis;if(t?.randomUUID)return oC=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),n=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,s=>(+s^n()&15>>+s/4).toString(16))};function ng(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const rg=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};class je extends Error{}class Kt extends je{constructor(e,n,s,a){super(`${Kt.makeMessage(e,n,s)}`),this.status=e,this.headers=a,this.requestID=a?.get("x-request-id"),this.error=n;const l=n;this.code=l?.code,this.param=l?.param,this.type=l?.type}static makeMessage(e,n,s){const a=n?.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):s;return e&&a?`${e} ${a}`:e?`${e} status code (no body)`:a||"(no status code or body)"}static generate(e,n,s,a){if(!e||!a)return new mf({message:s,cause:rg(n)});const l=n?.error;return e===400?new lC(e,l,s,a):e===401?new cC(e,l,s,a):e===403?new uC(e,l,s,a):e===404?new dC(e,l,s,a):e===409?new fC(e,l,s,a):e===422?new hC(e,l,s,a):e===429?new mC(e,l,s,a):e>=500?new pC(e,l,s,a):new Kt(e,l,s,a)}}class Vn extends Kt{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class mf extends Kt{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}}class Jg extends mf{constructor({message:e}={}){super({message:e??"Request timed out."})}}class lC extends Kt{}class cC extends Kt{}class uC extends Kt{}class dC extends Kt{}class fC extends Kt{}class hC extends Kt{}class mC extends Kt{}class pC extends Kt{}class gC extends je{constructor(){super("Could not parse response content as the length limit was reached")}}class yC extends je{constructor(){super("Could not parse response content as the request was rejected by the content filter")}}class dl extends Error{constructor(e){super(e)}}const lz=/^[a-z][a-z0-9+.-]*:/i,cz=t=>lz.test(t);let yn=t=>(yn=Array.isArray,yn(t)),bx=yn;function vC(t){return typeof t!="object"?{}:t??{}}function uz(t){if(!t)return!0;for(const e in t)return!1;return!0}function dz(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function yp(t){return t!=null&&typeof t=="object"&&!Array.isArray(t)}const fz=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new je(`${t} must be an integer`);if(e<0)throw new je(`${t} must be a positive integer`);return e},hz=t=>{try{return JSON.parse(t)}catch{return}},rc=t=>new Promise(e=>setTimeout(e,t)),Oa="6.9.1",mz=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u";function pz(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const gz=()=>{const t=pz();if(t==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Oa,"X-Stainless-OS":xx(Deno.build.os),"X-Stainless-Arch":wx(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:Deno.version?.deno??"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Oa,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(t==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Oa,"X-Stainless-OS":xx(globalThis.process.platform??"unknown"),"X-Stainless-Arch":wx(globalThis.process.arch??"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":globalThis.process.version??"unknown"};const e=yz();return e?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Oa,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${e.browser}`,"X-Stainless-Runtime-Version":e.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Oa,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function yz(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const s=n.exec(navigator.userAgent);if(s){const a=s[1]||0,l=s[2]||0,c=s[3]||0;return{browser:e,version:`${a}.${l}.${c}`}}}return null}const wx=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",xx=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let Sx;const vz=()=>Sx??(Sx=gz());function _z(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new OpenAI({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function _C(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function bC(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return _C({start(){},async pull(n){const{done:s,value:a}=await e.next();s?n.close():n.enqueue(a)},async cancel(){await e.return?.()}})}function wC(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const n=await e.read();return n?.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function bz(t){if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await t[Symbol.asyncIterator]().return?.();return}const e=t.getReader(),n=e.cancel();e.releaseLock(),await n}const wz=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)}),xC="RFC3986",SC=t=>String(t),Ex={RFC1738:t=>String(t).replace(/%20/g,"+"),RFC3986:SC},xz="RFC1738";let sg=(t,e)=>(sg=Object.hasOwn??Function.prototype.call.bind(Object.prototype.hasOwnProperty),sg(t,e));const hr=(()=>{const t=[];for(let e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t})(),vp=1024,Sz=(t,e,n,s,a)=>{if(t.length===0)return t;let l=t;if(typeof t=="symbol"?l=Symbol.prototype.toString.call(t):typeof t!="string"&&(l=String(t)),n==="iso-8859-1")return escape(l).replace(/%u[0-9a-f]{4}/gi,function(d){return"%26%23"+parseInt(d.slice(2),16)+"%3B"});let c="";for(let d=0;d<l.length;d+=vp){const f=l.length>=vp?l.slice(d,d+vp):l,h=[];for(let p=0;p<f.length;++p){let g=f.charCodeAt(p);if(g===45||g===46||g===95||g===126||g>=48&&g<=57||g>=65&&g<=90||g>=97&&g<=122||a===xz&&(g===40||g===41)){h[h.length]=f.charAt(p);continue}if(g<128){h[h.length]=hr[g];continue}if(g<2048){h[h.length]=hr[192|g>>6]+hr[128|g&63];continue}if(g<55296||g>=57344){h[h.length]=hr[224|g>>12]+hr[128|g>>6&63]+hr[128|g&63];continue}p+=1,g=65536+((g&1023)<<10|f.charCodeAt(p)&1023),h[h.length]=hr[240|g>>18]+hr[128|g>>12&63]+hr[128|g>>6&63]+hr[128|g&63]}c+=h.join("")}return c};function Ez(t){return!t||typeof t!="object"?!1:!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))}function Cx(t,e){if(yn(t)){const n=[];for(let s=0;s<t.length;s+=1)n.push(e(t[s]));return n}return e(t)}const EC={brackets(t){return String(t)+"[]"},comma:"comma",indices(t,e){return String(t)+"["+e+"]"},repeat(t){return String(t)}},CC=function(t,e){Array.prototype.push.apply(t,yn(e)?e:[e])};let Ax;const $t={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:Sz,encodeValuesOnly:!1,format:xC,formatter:SC,indices:!1,serializeDate(t){return(Ax??(Ax=Function.prototype.call.bind(Date.prototype.toISOString)))(t)},skipNulls:!1,strictNullHandling:!1};function Cz(t){return typeof t=="string"||typeof t=="number"||typeof t=="boolean"||typeof t=="symbol"||typeof t=="bigint"}const _p={};function AC(t,e,n,s,a,l,c,d,f,h,p,g,v,_,x,w,S,A){let N=t,E=A,C=0,O=!1;for(;(E=E.get(_p))!==void 0&&!O;){const X=E.get(t);if(C+=1,typeof X<"u"){if(X===C)throw new RangeError("Cyclic object value");O=!0}typeof E.get(_p)>"u"&&(C=0)}if(typeof h=="function"?N=h(e,N):N instanceof Date?N=v?.(N):n==="comma"&&yn(N)&&(N=Cx(N,function(X){return X instanceof Date?v?.(X):X})),N===null){if(l)return f&&!w?f(e,$t.encoder,S,"key",_):e;N=""}if(Cz(N)||Ez(N)){if(f){const X=w?e:f(e,$t.encoder,S,"key",_);return[x?.(X)+"="+x?.(f(N,$t.encoder,S,"value",_))]}return[x?.(e)+"="+x?.(String(N))]}const k=[];if(typeof N>"u")return k;let R;if(n==="comma"&&yn(N))w&&f&&(N=Cx(N,f)),R=[{value:N.length>0?N.join(",")||null:void 0}];else if(yn(h))R=h;else{const X=Object.keys(N);R=p?X.sort(p):X}const $=d?String(e).replace(/\./g,"%2E"):String(e),L=s&&yn(N)&&N.length===1?$+"[]":$;if(a&&yn(N)&&N.length===0)return L+"[]";for(let X=0;X<R.length;++X){const F=R[X],H=typeof F=="object"&&typeof F.value<"u"?F.value:N[F];if(c&&H===null)continue;const W=g&&d?F.replace(/\./g,"%2E"):F,I=yn(N)?typeof n=="function"?n(L,W):L:L+(g?"."+W:"["+W+"]");A.set(t,C);const V=new WeakMap;V.set(_p,A),CC(k,AC(H,I,n,s,a,l,c,d,n==="comma"&&w&&yn(N)?null:f,h,p,g,v,_,x,w,S,V))}return k}function Az(t=$t){if(typeof t.allowEmptyArrays<"u"&&typeof t.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof t.encodeDotInKeys<"u"&&typeof t.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(t.encoder!==null&&typeof t.encoder<"u"&&typeof t.encoder!="function")throw new TypeError("Encoder has to be a function.");const e=t.charset||$t.charset;if(typeof t.charset<"u"&&t.charset!=="utf-8"&&t.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");let n=xC;if(typeof t.format<"u"){if(!sg(Ex,t.format))throw new TypeError("Unknown format option provided.");n=t.format}const s=Ex[n];let a=$t.filter;(typeof t.filter=="function"||yn(t.filter))&&(a=t.filter);let l;if(t.arrayFormat&&t.arrayFormat in EC?l=t.arrayFormat:"indices"in t?l=t.indices?"indices":"repeat":l=$t.arrayFormat,"commaRoundTrip"in t&&typeof t.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");const c=typeof t.allowDots>"u"?t.encodeDotInKeys?!0:$t.allowDots:!!t.allowDots;return{addQueryPrefix:typeof t.addQueryPrefix=="boolean"?t.addQueryPrefix:$t.addQueryPrefix,allowDots:c,allowEmptyArrays:typeof t.allowEmptyArrays=="boolean"?!!t.allowEmptyArrays:$t.allowEmptyArrays,arrayFormat:l,charset:e,charsetSentinel:typeof t.charsetSentinel=="boolean"?t.charsetSentinel:$t.charsetSentinel,commaRoundTrip:!!t.commaRoundTrip,delimiter:typeof t.delimiter>"u"?$t.delimiter:t.delimiter,encode:typeof t.encode=="boolean"?t.encode:$t.encode,encodeDotInKeys:typeof t.encodeDotInKeys=="boolean"?t.encodeDotInKeys:$t.encodeDotInKeys,encoder:typeof t.encoder=="function"?t.encoder:$t.encoder,encodeValuesOnly:typeof t.encodeValuesOnly=="boolean"?t.encodeValuesOnly:$t.encodeValuesOnly,filter:a,format:n,formatter:s,serializeDate:typeof t.serializeDate=="function"?t.serializeDate:$t.serializeDate,skipNulls:typeof t.skipNulls=="boolean"?t.skipNulls:$t.skipNulls,sort:typeof t.sort=="function"?t.sort:null,strictNullHandling:typeof t.strictNullHandling=="boolean"?t.strictNullHandling:$t.strictNullHandling}}function Tz(t,e={}){let n=t;const s=Az(e);let a,l;typeof s.filter=="function"?(l=s.filter,n=l("",n)):yn(s.filter)&&(l=s.filter,a=l);const c=[];if(typeof n!="object"||n===null)return"";const d=EC[s.arrayFormat],f=d==="comma"&&s.commaRoundTrip;a||(a=Object.keys(n)),s.sort&&a.sort(s.sort);const h=new WeakMap;for(let v=0;v<a.length;++v){const _=a[v];s.skipNulls&&n[_]===null||CC(c,AC(n[_],_,d,f,s.allowEmptyArrays,s.strictNullHandling,s.skipNulls,s.encodeDotInKeys,s.encode?s.encoder:null,s.filter,s.sort,s.allowDots,s.serializeDate,s.format,s.formatter,s.encodeValuesOnly,s.charset,h))}const p=c.join(s.delimiter);let g=s.addQueryPrefix===!0?"?":"";return s.charsetSentinel&&(s.charset==="iso-8859-1"?g+="utf8=%26%2310003%3B&":g+="utf8=%E2%9C%93&"),p.length>0?g+p:""}function Nz(t){let e=0;for(const a of t)e+=a.length;const n=new Uint8Array(e);let s=0;for(const a of t)n.set(a,s),s+=a.length;return n}let Tx;function Zg(t){let e;return(Tx??(e=new globalThis.TextEncoder,Tx=e.encode.bind(e)))(t)}let Nx;function Ox(t){let e;return(Nx??(e=new globalThis.TextDecoder,Nx=e.decode.bind(e)))(t)}var Tn,Nn;class pf{constructor(){Tn.set(this,void 0),Nn.set(this,void 0),Ie(this,Tn,new Uint8Array),Ie(this,Nn,null)}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?Zg(e):e;Ie(this,Tn,Nz([se(this,Tn,"f"),n]));const s=[];let a;for(;(a=Oz(se(this,Tn,"f"),se(this,Nn,"f")))!=null;){if(a.carriage&&se(this,Nn,"f")==null){Ie(this,Nn,a.index);continue}if(se(this,Nn,"f")!=null&&(a.index!==se(this,Nn,"f")+1||a.carriage)){s.push(Ox(se(this,Tn,"f").subarray(0,se(this,Nn,"f")-1))),Ie(this,Tn,se(this,Tn,"f").subarray(se(this,Nn,"f"))),Ie(this,Nn,null);continue}const l=se(this,Nn,"f")!==null?a.preceding-1:a.preceding,c=Ox(se(this,Tn,"f").subarray(0,l));s.push(c),Ie(this,Tn,se(this,Tn,"f").subarray(a.index)),Ie(this,Nn,null)}return s}flush(){return se(this,Tn,"f").length?this.decode(`
`):[]}}Tn=new WeakMap,Nn=new WeakMap;pf.NEWLINE_CHARS=new Set([`
`,"\r"]);pf.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function Oz(t,e){for(let a=e??0;a<t.length;a++){if(t[a]===10)return{preceding:a,index:a+1,carriage:!1};if(t[a]===13)return{preceding:a,index:a+1,carriage:!0}}return null}function Rz(t){for(let s=0;s<t.length-1;s++){if(t[s]===10&&t[s+1]===10||t[s]===13&&t[s+1]===13)return s+2;if(t[s]===13&&t[s+1]===10&&s+3<t.length&&t[s+2]===13&&t[s+3]===10)return s+4}return-1}const Ld={off:0,error:200,warn:300,info:400,debug:500},Rx=(t,e,n)=>{if(t){if(dz(Ld,t))return t;Yt(n).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(Ld))}`)}};function fl(){}function Wu(t,e,n){return!e||Ld[t]>Ld[n]?fl:e[t].bind(e)}const jz={error:fl,warn:fl,info:fl,debug:fl};let jx=new WeakMap;function Yt(t){const e=t.logger,n=t.logLevel??"off";if(!e)return jz;const s=jx.get(e);if(s&&s[0]===n)return s[1];const a={error:Wu("error",e,n),warn:Wu("warn",e,n),info:Wu("info",e,n),debug:Wu("debug",e,n)};return jx.set(e,[n,a]),a}const ui=t=>(t.options&&(t.options={...t.options},delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,n])=>[e,e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);var al;class gr{constructor(e,n,s){this.iterator=e,al.set(this,void 0),this.controller=n,Ie(this,al,s)}static fromSSEResponse(e,n,s){let a=!1;const l=s?Yt(s):console;async function*c(){if(a)throw new je("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");a=!0;let d=!1;try{for await(const f of kz(e,n))if(!d){if(f.data.startsWith("[DONE]")){d=!0;continue}if(f.event===null||!f.event.startsWith("thread.")){let h;try{h=JSON.parse(f.data)}catch(p){throw l.error("Could not parse message into JSON:",f.data),l.error("From chunk:",f.raw),p}if(h&&h.error)throw new Kt(void 0,h.error,void 0,e.headers);yield h}else{let h;try{h=JSON.parse(f.data)}catch(p){throw console.error("Could not parse message into JSON:",f.data),console.error("From chunk:",f.raw),p}if(f.event=="error")throw new Kt(void 0,h.error,h.message,void 0);yield{event:f.event,data:h}}}d=!0}catch(f){if(ng(f))return;throw f}finally{d||n.abort()}}return new gr(c,n,s)}static fromReadableStream(e,n,s){let a=!1;async function*l(){const d=new pf,f=wC(e);for await(const h of f)for(const p of d.decode(h))yield p;for(const h of d.flush())yield h}async function*c(){if(a)throw new je("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");a=!0;let d=!1;try{for await(const f of l())d||f&&(yield JSON.parse(f));d=!0}catch(f){if(ng(f))return;throw f}finally{d||n.abort()}}return new gr(c,n,s)}[(al=new WeakMap,Symbol.asyncIterator)](){return this.iterator()}tee(){const e=[],n=[],s=this.iterator(),a=l=>({next:()=>{if(l.length===0){const c=s.next();e.push(c),n.push(c)}return l.shift()}});return[new gr(()=>a(e),this.controller,se(this,al,"f")),new gr(()=>a(n),this.controller,se(this,al,"f"))]}toReadableStream(){const e=this;let n;return _C({async start(){n=e[Symbol.asyncIterator]()},async pull(s){try{const{value:a,done:l}=await n.next();if(l)return s.close();const c=Zg(JSON.stringify(a)+`
`);s.enqueue(c)}catch(a){s.error(a)}},async cancel(){await n.return?.()}})}}async function*kz(t,e){if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new je("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new je("Attempted to iterate over a response with no body");const n=new Dz,s=new pf,a=wC(t.body);for await(const l of Mz(a))for(const c of s.decode(l)){const d=n.decode(c);d&&(yield d)}for(const l of s.flush()){const c=n.decode(l);c&&(yield c)}}async function*Mz(t){let e=new Uint8Array;for await(const n of t){if(n==null)continue;const s=n instanceof ArrayBuffer?new Uint8Array(n):typeof n=="string"?Zg(n):n;let a=new Uint8Array(e.length+s.length);a.set(e),a.set(s,e.length),e=a;let l;for(;(l=Rz(e))!==-1;)yield e.slice(0,l),e=e.slice(l)}e.length>0&&(yield e)}class Dz{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const l={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],l}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,s,a]=Uz(e,":");return a.startsWith(" ")&&(a=a.substring(1)),n==="event"?this.event=a:n==="data"&&this.data.push(a),null}}function Uz(t,e){const n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}async function TC(t,e){const{response:n,requestLogID:s,retryOfRequestLogID:a,startTime:l}=e,c=await(async()=>{if(e.options.stream)return Yt(t).debug("response",n.status,n.url,n.headers,n.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(n,e.controller,t):gr.fromSSEResponse(n,e.controller,t);if(n.status===204)return null;if(e.options.__binaryResponse)return n;const f=n.headers.get("content-type")?.split(";")[0]?.trim();if(f?.includes("application/json")||f?.endsWith("+json")){const g=await n.json();return NC(g,n)}return await n.text()})();return Yt(t).debug(`[${s}] response parsed`,ui({retryOfRequestLogID:a,url:n.url,status:n.status,body:c,durationMs:Date.now()-l})),c}function NC(t,e){return!t||typeof t!="object"||Array.isArray(t)?t:Object.defineProperty(t,"_request_id",{value:e.headers.get("x-request-id"),enumerable:!1})}var hl;class gf extends Promise{constructor(e,n,s=TC){super(a=>{a(null)}),this.responsePromise=n,this.parseResponse=s,hl.set(this,void 0),Ie(this,hl,e)}_thenUnwrap(e){return new gf(se(this,hl,"f"),this.responsePromise,async(n,s)=>NC(e(await this.parseResponse(n,s),s),s.response))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n,request_id:n.headers.get("x-request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(se(this,hl,"f"),e))),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}hl=new WeakMap;var Ju;class ey{constructor(e,n,s,a){Ju.set(this,void 0),Ie(this,Ju,e),this.options=a,this.response=n,this.body=s}hasNextPage(){return this.getPaginatedItems().length?this.nextPageRequestOptions()!=null:!1}async getNextPage(){const e=this.nextPageRequestOptions();if(!e)throw new je("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");return await se(this,Ju,"f").requestAPIList(this.constructor,e)}async*iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async*[(Ju=new WeakMap,Symbol.asyncIterator)](){for await(const e of this.iterPages())for(const n of e.getPaginatedItems())yield n}}class $z extends gf{constructor(e,n,s){super(e,n,async(a,l)=>new s(a,l.response,await TC(a,l),l.options))}async*[Symbol.asyncIterator](){const e=await this;for await(const n of e)yield n}}class yf extends ey{constructor(e,n,s,a){super(e,n,s,a),this.data=s.data||[],this.object=s.object}getPaginatedItems(){return this.data??[]}nextPageRequestOptions(){return null}}class Ot extends ey{constructor(e,n,s,a){super(e,n,s,a),this.data=s.data||[],this.has_more=s.has_more||!1}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageRequestOptions(){const e=this.getPaginatedItems(),n=e[e.length-1]?.id;return n?{...this.options,query:{...vC(this.options.query),after:n}}:null}}class zd extends ey{constructor(e,n,s,a){super(e,n,s,a),this.data=s.data||[],this.has_more=s.has_more||!1,this.last_id=s.last_id||""}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageRequestOptions(){const e=this.last_id;return e?{...this.options,query:{...vC(this.options.query),after:e}}:null}}const OC=()=>{if(typeof File>"u"){const{process:t}=globalThis,e=typeof t?.versions?.node=="string"&&parseInt(t.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(e?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function Al(t,e,n){return OC(),new File(t,e??"unknown_file",n)}function fd(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const ty=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function",kx=async(t,e)=>ig(t.body)?{...t,body:await RC(t.body,e)}:t,Ei=async(t,e)=>({...t,body:await RC(t.body,e)}),Mx=new WeakMap;function Iz(t){const e=typeof t=="function"?t:t.fetch,n=Mx.get(e);if(n)return n;const s=(async()=>{try{const a="Response"in e?e.Response:(await e("data:,")).constructor,l=new FormData;return l.toString()!==await new a(l).text()}catch{return!0}})();return Mx.set(e,s),s}const RC=async(t,e)=>{if(!await Iz(e))throw new TypeError("The provided fetch function does not support file uploads with the current global FormData class.");const n=new FormData;return await Promise.all(Object.entries(t||{}).map(([s,a])=>ag(n,s,a))),n},jC=t=>t instanceof Blob&&"name"in t,Lz=t=>typeof t=="object"&&t!==null&&(t instanceof Response||ty(t)||jC(t)),ig=t=>{if(Lz(t))return!0;if(Array.isArray(t))return t.some(ig);if(t&&typeof t=="object"){for(const e in t)if(ig(t[e]))return!0}return!1},ag=async(t,e,n)=>{if(n!==void 0){if(n==null)throw new TypeError(`Received null for "${e}"; to pass null in FormData, you must use the string 'null'`);if(typeof n=="string"||typeof n=="number"||typeof n=="boolean")t.append(e,String(n));else if(n instanceof Response)t.append(e,Al([await n.blob()],fd(n)));else if(ty(n))t.append(e,Al([await new Response(bC(n)).blob()],fd(n)));else if(jC(n))t.append(e,n,fd(n));else if(Array.isArray(n))await Promise.all(n.map(s=>ag(t,e+"[]",s)));else if(typeof n=="object")await Promise.all(Object.entries(n).map(([s,a])=>ag(t,`${e}[${s}]`,a)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${n} instead`)}},kC=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",zz=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&kC(t),Bz=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function Pz(t,e,n){if(OC(),t=await t,zz(t))return t instanceof File?t:Al([await t.arrayBuffer()],t.name);if(Bz(t)){const a=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),Al(await og(a),e,n)}const s=await og(t);if(e||(e=fd(t)),!n?.type){const a=s.find(l=>typeof l=="object"&&"type"in l&&l.type);typeof a=="string"&&(n={...n,type:a})}return Al(s,e,n)}async function og(t){let e=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)e.push(t);else if(kC(t))e.push(t instanceof Blob?t:await t.arrayBuffer());else if(ty(t))for await(const n of t)e.push(...await og(n));else{const n=t?.constructor?.name;throw new Error(`Unexpected data type: ${typeof t}${n?`; constructor: ${n}`:""}${qz(t)}`)}return e}function qz(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}class Ne{constructor(e){this._client=e}}function MC(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const Dx=Object.freeze(Object.create(null)),Hz=(t=MC)=>function(n,...s){if(n.length===1)return n[0];let a=!1;const l=[],c=n.reduce((p,g,v)=>{/[?#]/.test(g)&&(a=!0);const _=s[v];let x=(a?encodeURIComponent:t)(""+_);return v!==s.length&&(_==null||typeof _=="object"&&_.toString===Object.getPrototypeOf(Object.getPrototypeOf(_.hasOwnProperty??Dx)??Dx)?.toString)&&(x=_+"",l.push({start:p.length+g.length,length:x.length,error:`Value of type ${Object.prototype.toString.call(_).slice(8,-1)} is not a valid path parameter`})),p+g+(v===s.length?"":x)},""),d=c.split(/[?#]/,1)[0],f=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let h;for(;(h=f.exec(d))!==null;)l.push({start:h.index,length:h[0].length,error:`Value "${h[0]}" can't be safely passed as a path parameter`});if(l.sort((p,g)=>p.start-g.start),l.length>0){let p=0;const g=l.reduce((v,_)=>{const x=" ".repeat(_.start-p),w="^".repeat(_.length);return p=_.start+_.length,v+x+w},"");throw new je(`Path parameters result in path with invalid segments:
${l.map(v=>v.error).join(`
`)}
${c}
${g}`)}return c},pe=Hz(MC);let DC=class extends Ne{list(e,n={},s){return this._client.getAPIList(pe`/chat/completions/${e}/messages`,Ot,{query:n,...s})}};function Bd(t){return t!==void 0&&"function"in t&&t.function!==void 0}function ny(t){return t?.$brand==="auto-parseable-response-format"}function sc(t){return t?.$brand==="auto-parseable-tool"}function Vz(t,e){return!e||!UC(e)?{...t,choices:t.choices.map(n=>($C(n.message.tool_calls),{...n,message:{...n.message,parsed:null,...n.message.tool_calls?{tool_calls:n.message.tool_calls}:void 0}}))}:ry(t,e)}function ry(t,e){const n=t.choices.map(s=>{if(s.finish_reason==="length")throw new gC;if(s.finish_reason==="content_filter")throw new yC;return $C(s.message.tool_calls),{...s,message:{...s.message,...s.message.tool_calls?{tool_calls:s.message.tool_calls?.map(a=>Yz(e,a))??void 0}:void 0,parsed:s.message.content&&!s.message.refusal?Fz(e,s.message.content):null}}});return{...t,choices:n}}function Fz(t,e){return t.response_format?.type!=="json_schema"?null:t.response_format?.type==="json_schema"?"$parseRaw"in t.response_format?t.response_format.$parseRaw(e):JSON.parse(e):null}function Yz(t,e){const n=t.tools?.find(s=>Bd(s)&&s.function?.name===e.function.name);return{...e,function:{...e.function,parsed_arguments:sc(n)?n.$parseRaw(e.function.arguments):n?.function.strict?JSON.parse(e.function.arguments):null}}}function Gz(t,e){if(!t||!("tools"in t)||!t.tools)return!1;const n=t.tools?.find(s=>Bd(s)&&s.function?.name===e.function.name);return Bd(n)&&(sc(n)||n?.function.strict||!1)}function UC(t){return ny(t.response_format)?!0:t.tools?.some(e=>sc(e)||e.type==="function"&&e.function.strict===!0)??!1}function $C(t){for(const e of t||[])if(e.type!=="function")throw new je(`Currently only \`function\` tool calls are supported; Received \`${e.type}\``)}function Xz(t){for(const e of t??[]){if(e.type!=="function")throw new je(`Currently only \`function\` tool types support auto-parsing; Received \`${e.type}\``);if(e.function.strict!==!0)throw new je(`The \`${e.function.name}\` tool is not marked with \`strict: true\`. Only strict function tools can be auto-parsed`)}}const Pd=t=>t?.role==="assistant",IC=t=>t?.role==="tool";var lg,hd,md,ml,pl,pd,gl,Fr,yl,qd,Hd,Ra,LC;class sy{constructor(){lg.add(this),this.controller=new AbortController,hd.set(this,void 0),md.set(this,()=>{}),ml.set(this,()=>{}),pl.set(this,void 0),pd.set(this,()=>{}),gl.set(this,()=>{}),Fr.set(this,{}),yl.set(this,!1),qd.set(this,!1),Hd.set(this,!1),Ra.set(this,!1),Ie(this,hd,new Promise((e,n)=>{Ie(this,md,e,"f"),Ie(this,ml,n,"f")})),Ie(this,pl,new Promise((e,n)=>{Ie(this,pd,e,"f"),Ie(this,gl,n,"f")})),se(this,hd,"f").catch(()=>{}),se(this,pl,"f").catch(()=>{})}_run(e){setTimeout(()=>{e().then(()=>{this._emitFinal(),this._emit("end")},se(this,lg,"m",LC).bind(this))},0)}_connected(){this.ended||(se(this,md,"f").call(this),this._emit("connect"))}get ended(){return se(this,yl,"f")}get errored(){return se(this,qd,"f")}get aborted(){return se(this,Hd,"f")}abort(){this.controller.abort()}on(e,n){return(se(this,Fr,"f")[e]||(se(this,Fr,"f")[e]=[])).push({listener:n}),this}off(e,n){const s=se(this,Fr,"f")[e];if(!s)return this;const a=s.findIndex(l=>l.listener===n);return a>=0&&s.splice(a,1),this}once(e,n){return(se(this,Fr,"f")[e]||(se(this,Fr,"f")[e]=[])).push({listener:n,once:!0}),this}emitted(e){return new Promise((n,s)=>{Ie(this,Ra,!0),e!=="error"&&this.once("error",s),this.once(e,n)})}async done(){Ie(this,Ra,!0),await se(this,pl,"f")}_emit(e,...n){if(se(this,yl,"f"))return;e==="end"&&(Ie(this,yl,!0),se(this,pd,"f").call(this));const s=se(this,Fr,"f")[e];if(s&&(se(this,Fr,"f")[e]=s.filter(a=>!a.once),s.forEach(({listener:a})=>a(...n))),e==="abort"){const a=n[0];!se(this,Ra,"f")&&!s?.length&&Promise.reject(a),se(this,ml,"f").call(this,a),se(this,gl,"f").call(this,a),this._emit("end");return}if(e==="error"){const a=n[0];!se(this,Ra,"f")&&!s?.length&&Promise.reject(a),se(this,ml,"f").call(this,a),se(this,gl,"f").call(this,a),this._emit("end")}}_emitFinal(){}}hd=new WeakMap,md=new WeakMap,ml=new WeakMap,pl=new WeakMap,pd=new WeakMap,gl=new WeakMap,Fr=new WeakMap,yl=new WeakMap,qd=new WeakMap,Hd=new WeakMap,Ra=new WeakMap,lg=new WeakSet,LC=function(e){if(Ie(this,qd,!0),e instanceof Error&&e.name==="AbortError"&&(e=new Vn),e instanceof Vn)return Ie(this,Hd,!0),this._emit("abort",e);if(e instanceof je)return this._emit("error",e);if(e instanceof Error){const n=new je(e.message);return n.cause=e,this._emit("error",n)}return this._emit("error",new je(String(e)))};function Kz(t){return typeof t.parse=="function"}var on,cg,Vd,ug,dg,fg,zC,BC;const Qz=10;class PC extends sy{constructor(){super(...arguments),on.add(this),this._chatCompletions=[],this.messages=[]}_addChatCompletion(e){this._chatCompletions.push(e),this._emit("chatCompletion",e);const n=e.choices[0]?.message;return n&&this._addMessage(n),e}_addMessage(e,n=!0){if("content"in e||(e.content=null),this.messages.push(e),n){if(this._emit("message",e),IC(e)&&e.content)this._emit("functionToolCallResult",e.content);else if(Pd(e)&&e.tool_calls)for(const s of e.tool_calls)s.type==="function"&&this._emit("functionToolCall",s.function)}}async finalChatCompletion(){await this.done();const e=this._chatCompletions[this._chatCompletions.length-1];if(!e)throw new je("stream ended without producing a ChatCompletion");return e}async finalContent(){return await this.done(),se(this,on,"m",cg).call(this)}async finalMessage(){return await this.done(),se(this,on,"m",Vd).call(this)}async finalFunctionToolCall(){return await this.done(),se(this,on,"m",ug).call(this)}async finalFunctionToolCallResult(){return await this.done(),se(this,on,"m",dg).call(this)}async totalUsage(){return await this.done(),se(this,on,"m",fg).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emitFinal(){const e=this._chatCompletions[this._chatCompletions.length-1];e&&this._emit("finalChatCompletion",e);const n=se(this,on,"m",Vd).call(this);n&&this._emit("finalMessage",n);const s=se(this,on,"m",cg).call(this);s&&this._emit("finalContent",s);const a=se(this,on,"m",ug).call(this);a&&this._emit("finalFunctionToolCall",a);const l=se(this,on,"m",dg).call(this);l!=null&&this._emit("finalFunctionToolCallResult",l),this._chatCompletions.some(c=>c.usage)&&this._emit("totalUsage",se(this,on,"m",fg).call(this))}async _createChatCompletion(e,n,s){const a=s?.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",()=>this.controller.abort())),se(this,on,"m",zC).call(this,n);const l=await e.chat.completions.create({...n,stream:!1},{...s,signal:this.controller.signal});return this._connected(),this._addChatCompletion(ry(l,n))}async _runChatCompletion(e,n,s){for(const a of n.messages)this._addMessage(a,!1);return await this._createChatCompletion(e,n,s)}async _runTools(e,n,s){const a="tool",{tool_choice:l="auto",stream:c,...d}=n,f=typeof l!="string"&&l.type==="function"&&l?.function?.name,{maxChatCompletions:h=Qz}=s||{},p=n.tools.map(_=>{if(sc(_)){if(!_.$callback)throw new je("Tool given to `.runTools()` that does not have an associated function");return{type:"function",function:{function:_.$callback,name:_.function.name,description:_.function.description||"",parameters:_.function.parameters,parse:_.$parseRaw,strict:!0}}}return _}),g={};for(const _ of p)_.type==="function"&&(g[_.function.name||_.function.function.name]=_.function);const v="tools"in n?p.map(_=>_.type==="function"?{type:"function",function:{name:_.function.name||_.function.function.name,parameters:_.function.parameters,description:_.function.description,strict:_.function.strict}}:_):void 0;for(const _ of n.messages)this._addMessage(_,!1);for(let _=0;_<h;++_){const w=(await this._createChatCompletion(e,{...d,tool_choice:l,tools:v,messages:[...this.messages]},s)).choices[0]?.message;if(!w)throw new je("missing message in ChatCompletion response");if(!w.tool_calls?.length)return;for(const S of w.tool_calls){if(S.type!=="function")continue;const A=S.id,{name:N,arguments:E}=S.function,C=g[N];if(C){if(f&&f!==N){const $=`Invalid tool_call: ${JSON.stringify(N)}. ${JSON.stringify(f)} requested. Please try again`;this._addMessage({role:a,tool_call_id:A,content:$});continue}}else{const $=`Invalid tool_call: ${JSON.stringify(N)}. Available options are: ${Object.keys(g).map(L=>JSON.stringify(L)).join(", ")}. Please try again`;this._addMessage({role:a,tool_call_id:A,content:$});continue}let O;try{O=Kz(C)?await C.parse(E):E}catch($){const L=$ instanceof Error?$.message:String($);this._addMessage({role:a,tool_call_id:A,content:L});continue}const k=await C.function(O,this),R=se(this,on,"m",BC).call(this,k);if(this._addMessage({role:a,tool_call_id:A,content:R}),f)return}}}}on=new WeakSet,cg=function(){return se(this,on,"m",Vd).call(this).content??null},Vd=function(){let e=this.messages.length;for(;e-- >0;){const n=this.messages[e];if(Pd(n))return{...n,content:n.content??null,refusal:n.refusal??null}}throw new je("stream ended without producing a ChatCompletionMessage with role=assistant")},ug=function(){for(let e=this.messages.length-1;e>=0;e--){const n=this.messages[e];if(Pd(n)&&n?.tool_calls?.length)return n.tool_calls.filter(s=>s.type==="function").at(-1)?.function}},dg=function(){for(let e=this.messages.length-1;e>=0;e--){const n=this.messages[e];if(IC(n)&&n.content!=null&&typeof n.content=="string"&&this.messages.some(s=>s.role==="assistant"&&s.tool_calls?.some(a=>a.type==="function"&&a.id===n.tool_call_id)))return n.content}},fg=function(){const e={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(const{usage:n}of this._chatCompletions)n&&(e.completion_tokens+=n.completion_tokens,e.prompt_tokens+=n.prompt_tokens,e.total_tokens+=n.total_tokens);return e},zC=function(e){if(e.n!=null&&e.n>1)throw new je("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},BC=function(e){return typeof e=="string"?e:e===void 0?"undefined":JSON.stringify(e)};class iy extends PC{static runTools(e,n,s){const a=new iy,l={...s,headers:{...s?.headers,"X-Stainless-Helper-Method":"runTools"}};return a._run(()=>a._runTools(e,n,l)),a}_addMessage(e,n=!0){super._addMessage(e,n),Pd(e)&&e.content&&this._emit("content",e.content)}}const qC=1,HC=2,VC=4,FC=8,YC=16,GC=32,XC=64,KC=128,QC=256,WC=KC|QC,JC=YC|GC|WC|XC,ZC=qC|HC|JC,eA=VC|FC,Wz=ZC|eA,zt={STR:qC,NUM:HC,ARR:VC,OBJ:FC,NULL:YC,BOOL:GC,NAN:XC,INFINITY:KC,MINUS_INFINITY:QC,INF:WC,SPECIAL:JC,ATOM:ZC,COLLECTION:eA,ALL:Wz};class Jz extends Error{}class Zz extends Error{}function e4(t,e=zt.ALL){if(typeof t!="string")throw new TypeError(`expecting str, got ${typeof t}`);if(!t.trim())throw new Error(`${t} is empty`);return t4(t.trim(),e)}const t4=(t,e)=>{const n=t.length;let s=0;const a=v=>{throw new Jz(`${v} at position ${s}`)},l=v=>{throw new Zz(`${v} at position ${s}`)},c=()=>(g(),s>=n&&a("Unexpected end of input"),t[s]==='"'?d():t[s]==="{"?f():t[s]==="["?h():t.substring(s,s+4)==="null"||zt.NULL&e&&n-s<4&&"null".startsWith(t.substring(s))?(s+=4,null):t.substring(s,s+4)==="true"||zt.BOOL&e&&n-s<4&&"true".startsWith(t.substring(s))?(s+=4,!0):t.substring(s,s+5)==="false"||zt.BOOL&e&&n-s<5&&"false".startsWith(t.substring(s))?(s+=5,!1):t.substring(s,s+8)==="Infinity"||zt.INFINITY&e&&n-s<8&&"Infinity".startsWith(t.substring(s))?(s+=8,1/0):t.substring(s,s+9)==="-Infinity"||zt.MINUS_INFINITY&e&&1<n-s&&n-s<9&&"-Infinity".startsWith(t.substring(s))?(s+=9,-1/0):t.substring(s,s+3)==="NaN"||zt.NAN&e&&n-s<3&&"NaN".startsWith(t.substring(s))?(s+=3,NaN):p()),d=()=>{const v=s;let _=!1;for(s++;s<n&&(t[s]!=='"'||_&&t[s-1]==="\\");)_=t[s]==="\\"?!_:!1,s++;if(t.charAt(s)=='"')try{return JSON.parse(t.substring(v,++s-Number(_)))}catch(x){l(String(x))}else if(zt.STR&e)try{return JSON.parse(t.substring(v,s-Number(_))+'"')}catch{return JSON.parse(t.substring(v,t.lastIndexOf("\\"))+'"')}a("Unterminated string literal")},f=()=>{s++,g();const v={};try{for(;t[s]!=="}";){if(g(),s>=n&&zt.OBJ&e)return v;const _=d();g(),s++;try{const x=c();Object.defineProperty(v,_,{value:x,writable:!0,enumerable:!0,configurable:!0})}catch(x){if(zt.OBJ&e)return v;throw x}g(),t[s]===","&&s++}}catch{if(zt.OBJ&e)return v;a("Expected '}' at end of object")}return s++,v},h=()=>{s++;const v=[];try{for(;t[s]!=="]";)v.push(c()),g(),t[s]===","&&s++}catch{if(zt.ARR&e)return v;a("Expected ']' at end of array")}return s++,v},p=()=>{if(s===0){t==="-"&&zt.NUM&e&&a("Not sure what '-' is");try{return JSON.parse(t)}catch(_){if(zt.NUM&e)try{return t[t.length-1]==="."?JSON.parse(t.substring(0,t.lastIndexOf("."))):JSON.parse(t.substring(0,t.lastIndexOf("e")))}catch{}l(String(_))}}const v=s;for(t[s]==="-"&&s++;t[s]&&!",]}".includes(t[s]);)s++;s==n&&!(zt.NUM&e)&&a("Unterminated number literal");try{return JSON.parse(t.substring(v,s))}catch{t.substring(v,s)==="-"&&zt.NUM&e&&a("Not sure what '-' is");try{return JSON.parse(t.substring(v,t.lastIndexOf("e")))}catch(x){l(String(x))}}},g=()=>{for(;s<n&&` 
\r	`.includes(t[s]);)s++};return c()},Ux=t=>e4(t,zt.ALL^zt.NUM);var Dt,Vr,Ea,js,bp,Zu,wp,xp,Sp,ed,Ep,$x;class Vl extends PC{constructor(e){super(),Dt.add(this),Vr.set(this,void 0),Ea.set(this,void 0),js.set(this,void 0),Ie(this,Vr,e),Ie(this,Ea,[])}get currentChatCompletionSnapshot(){return se(this,js,"f")}static fromReadableStream(e){const n=new Vl(null);return n._run(()=>n._fromReadableStream(e)),n}static createChatCompletion(e,n,s){const a=new Vl(n);return a._run(()=>a._runChatCompletion(e,{...n,stream:!0},{...s,headers:{...s?.headers,"X-Stainless-Helper-Method":"stream"}})),a}async _createChatCompletion(e,n,s){super._createChatCompletion;const a=s?.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",()=>this.controller.abort())),se(this,Dt,"m",bp).call(this);const l=await e.chat.completions.create({...n,stream:!0},{...s,signal:this.controller.signal});this._connected();for await(const c of l)se(this,Dt,"m",wp).call(this,c);if(l.controller.signal?.aborted)throw new Vn;return this._addChatCompletion(se(this,Dt,"m",ed).call(this))}async _fromReadableStream(e,n){const s=n?.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort())),se(this,Dt,"m",bp).call(this),this._connected();const a=gr.fromReadableStream(e,this.controller);let l;for await(const c of a)l&&l!==c.id&&this._addChatCompletion(se(this,Dt,"m",ed).call(this)),se(this,Dt,"m",wp).call(this,c),l=c.id;if(a.controller.signal?.aborted)throw new Vn;return this._addChatCompletion(se(this,Dt,"m",ed).call(this))}[(Vr=new WeakMap,Ea=new WeakMap,js=new WeakMap,Dt=new WeakSet,bp=function(){this.ended||Ie(this,js,void 0)},Zu=function(n){let s=se(this,Ea,"f")[n.index];return s||(s={content_done:!1,refusal_done:!1,logprobs_content_done:!1,logprobs_refusal_done:!1,done_tool_calls:new Set,current_tool_call_index:null},se(this,Ea,"f")[n.index]=s,s)},wp=function(n){if(this.ended)return;const s=se(this,Dt,"m",$x).call(this,n);this._emit("chunk",n,s);for(const a of n.choices){const l=s.choices[a.index];a.delta.content!=null&&l.message?.role==="assistant"&&l.message?.content&&(this._emit("content",a.delta.content,l.message.content),this._emit("content.delta",{delta:a.delta.content,snapshot:l.message.content,parsed:l.message.parsed})),a.delta.refusal!=null&&l.message?.role==="assistant"&&l.message?.refusal&&this._emit("refusal.delta",{delta:a.delta.refusal,snapshot:l.message.refusal}),a.logprobs?.content!=null&&l.message?.role==="assistant"&&this._emit("logprobs.content.delta",{content:a.logprobs?.content,snapshot:l.logprobs?.content??[]}),a.logprobs?.refusal!=null&&l.message?.role==="assistant"&&this._emit("logprobs.refusal.delta",{refusal:a.logprobs?.refusal,snapshot:l.logprobs?.refusal??[]});const c=se(this,Dt,"m",Zu).call(this,l);l.finish_reason&&(se(this,Dt,"m",Sp).call(this,l),c.current_tool_call_index!=null&&se(this,Dt,"m",xp).call(this,l,c.current_tool_call_index));for(const d of a.delta.tool_calls??[])c.current_tool_call_index!==d.index&&(se(this,Dt,"m",Sp).call(this,l),c.current_tool_call_index!=null&&se(this,Dt,"m",xp).call(this,l,c.current_tool_call_index)),c.current_tool_call_index=d.index;for(const d of a.delta.tool_calls??[]){const f=l.message.tool_calls?.[d.index];f?.type&&(f?.type==="function"?this._emit("tool_calls.function.arguments.delta",{name:f.function?.name,index:d.index,arguments:f.function.arguments,parsed_arguments:f.function.parsed_arguments,arguments_delta:d.function?.arguments??""}):(f?.type,void 0))}}},xp=function(n,s){if(se(this,Dt,"m",Zu).call(this,n).done_tool_calls.has(s))return;const l=n.message.tool_calls?.[s];if(!l)throw new Error("no tool call snapshot");if(!l.type)throw new Error("tool call snapshot missing `type`");if(l.type==="function"){const c=se(this,Vr,"f")?.tools?.find(d=>Bd(d)&&d.function.name===l.function.name);this._emit("tool_calls.function.arguments.done",{name:l.function.name,index:s,arguments:l.function.arguments,parsed_arguments:sc(c)?c.$parseRaw(l.function.arguments):c?.function.strict?JSON.parse(l.function.arguments):null})}else l.type},Sp=function(n){const s=se(this,Dt,"m",Zu).call(this,n);if(n.message.content&&!s.content_done){s.content_done=!0;const a=se(this,Dt,"m",Ep).call(this);this._emit("content.done",{content:n.message.content,parsed:a?a.$parseRaw(n.message.content):null})}n.message.refusal&&!s.refusal_done&&(s.refusal_done=!0,this._emit("refusal.done",{refusal:n.message.refusal})),n.logprobs?.content&&!s.logprobs_content_done&&(s.logprobs_content_done=!0,this._emit("logprobs.content.done",{content:n.logprobs.content})),n.logprobs?.refusal&&!s.logprobs_refusal_done&&(s.logprobs_refusal_done=!0,this._emit("logprobs.refusal.done",{refusal:n.logprobs.refusal}))},ed=function(){if(this.ended)throw new je("stream has ended, this shouldn't happen");const n=se(this,js,"f");if(!n)throw new je("request ended without sending any chunks");return Ie(this,js,void 0),Ie(this,Ea,[]),n4(n,se(this,Vr,"f"))},Ep=function(){const n=se(this,Vr,"f")?.response_format;return ny(n)?n:null},$x=function(n){var s,a,l,c;let d=se(this,js,"f");const{choices:f,...h}=n;d?Object.assign(d,h):d=Ie(this,js,{...h,choices:[]});for(const{delta:p,finish_reason:g,index:v,logprobs:_=null,...x}of n.choices){let w=d.choices[v];if(w||(w=d.choices[v]={finish_reason:g,index:v,message:{},logprobs:_,...x}),_)if(!w.logprobs)w.logprobs=Object.assign({},_);else{const{content:k,refusal:R,...$}=_;Object.assign(w.logprobs,$),k&&((s=w.logprobs).content??(s.content=[]),w.logprobs.content.push(...k)),R&&((a=w.logprobs).refusal??(a.refusal=[]),w.logprobs.refusal.push(...R))}if(g&&(w.finish_reason=g,se(this,Vr,"f")&&UC(se(this,Vr,"f")))){if(g==="length")throw new gC;if(g==="content_filter")throw new yC}if(Object.assign(w,x),!p)continue;const{content:S,refusal:A,function_call:N,role:E,tool_calls:C,...O}=p;if(Object.assign(w.message,O),A&&(w.message.refusal=(w.message.refusal||"")+A),E&&(w.message.role=E),N&&(w.message.function_call?(N.name&&(w.message.function_call.name=N.name),N.arguments&&((l=w.message.function_call).arguments??(l.arguments=""),w.message.function_call.arguments+=N.arguments)):w.message.function_call=N),S&&(w.message.content=(w.message.content||"")+S,!w.message.refusal&&se(this,Dt,"m",Ep).call(this)&&(w.message.parsed=Ux(w.message.content))),C){w.message.tool_calls||(w.message.tool_calls=[]);for(const{index:k,id:R,type:$,function:L,...X}of C){const F=(c=w.message.tool_calls)[k]??(c[k]={});Object.assign(F,X),R&&(F.id=R),$&&(F.type=$),L&&(F.function??(F.function={name:L.name??"",arguments:""})),L?.name&&(F.function.name=L.name),L?.arguments&&(F.function.arguments+=L.arguments,Gz(se(this,Vr,"f"),F)&&(F.function.parsed_arguments=Ux(F.function.arguments)))}}}return d},Symbol.asyncIterator)](){const e=[],n=[];let s=!1;return this.on("chunk",a=>{const l=n.shift();l?l.resolve(a):e.push(a)}),this.on("end",()=>{s=!0;for(const a of n)a.resolve(void 0);n.length=0}),this.on("abort",a=>{s=!0;for(const l of n)l.reject(a);n.length=0}),this.on("error",a=>{s=!0;for(const l of n)l.reject(a);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:s?{value:void 0,done:!0}:new Promise((l,c)=>n.push({resolve:l,reject:c})).then(l=>l?{value:l,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new gr(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}function n4(t,e){const{id:n,choices:s,created:a,model:l,system_fingerprint:c,...d}=t,f={...d,id:n,choices:s.map(({message:h,finish_reason:p,index:g,logprobs:v,..._})=>{if(!p)throw new je(`missing finish_reason for choice ${g}`);const{content:x=null,function_call:w,tool_calls:S,...A}=h,N=h.role;if(!N)throw new je(`missing role for choice ${g}`);if(w){const{arguments:E,name:C}=w;if(E==null)throw new je(`missing function_call.arguments for choice ${g}`);if(!C)throw new je(`missing function_call.name for choice ${g}`);return{..._,message:{content:x,function_call:{arguments:E,name:C},role:N,refusal:h.refusal??null},finish_reason:p,index:g,logprobs:v}}return S?{..._,index:g,finish_reason:p,logprobs:v,message:{...A,role:N,content:x,refusal:h.refusal??null,tool_calls:S.map((E,C)=>{const{function:O,type:k,id:R,...$}=E,{arguments:L,name:X,...F}=O||{};if(R==null)throw new je(`missing choices[${g}].tool_calls[${C}].id
${td(t)}`);if(k==null)throw new je(`missing choices[${g}].tool_calls[${C}].type
${td(t)}`);if(X==null)throw new je(`missing choices[${g}].tool_calls[${C}].function.name
${td(t)}`);if(L==null)throw new je(`missing choices[${g}].tool_calls[${C}].function.arguments
${td(t)}`);return{...$,id:R,type:k,function:{...F,name:X,arguments:L}}})}}:{..._,message:{...A,content:x,role:N,refusal:h.refusal??null},finish_reason:p,index:g,logprobs:v}}),created:a,model:l,object:"chat.completion",...c?{system_fingerprint:c}:{}};return Vz(f,e)}function td(t){return JSON.stringify(t)}class Fd extends Vl{static fromReadableStream(e){const n=new Fd(null);return n._run(()=>n._fromReadableStream(e)),n}static runTools(e,n,s){const a=new Fd(n),l={...s,headers:{...s?.headers,"X-Stainless-Helper-Method":"runTools"}};return a._run(()=>a._runTools(e,n,l)),a}}let ay=class extends Ne{constructor(){super(...arguments),this.messages=new DC(this._client)}create(e,n){return this._client.post("/chat/completions",{body:e,...n,stream:e.stream??!1})}retrieve(e,n){return this._client.get(pe`/chat/completions/${e}`,n)}update(e,n,s){return this._client.post(pe`/chat/completions/${e}`,{body:n,...s})}list(e={},n){return this._client.getAPIList("/chat/completions",Ot,{query:e,...n})}delete(e,n){return this._client.delete(pe`/chat/completions/${e}`,n)}parse(e,n){return Xz(e.tools),this._client.chat.completions.create(e,{...n,headers:{...n?.headers,"X-Stainless-Helper-Method":"chat.completions.parse"}})._thenUnwrap(s=>ry(s,e))}runTools(e,n){return e.stream?Fd.runTools(this._client,e,n):iy.runTools(this._client,e,n)}stream(e,n){return Vl.createChatCompletion(this._client,e,n)}};ay.Messages=DC;class oy extends Ne{constructor(){super(...arguments),this.completions=new ay(this._client)}}oy.Completions=ay;const tA=Symbol("brand.privateNullableHeaders");function*r4(t){if(!t)return;if(tA in t){const{values:s,nulls:a}=t;yield*s.entries();for(const l of a)yield[l,null];return}let e=!1,n;t instanceof Headers?n=t.entries():bx(t)?n=t:(e=!0,n=Object.entries(t??{}));for(let s of n){const a=s[0];if(typeof a!="string")throw new TypeError("expected header name to be a string");const l=bx(s[1])?s[1]:[s[1]];let c=!1;for(const d of l)d!==void 0&&(e&&!c&&(c=!0,yield[a,null]),yield[a,d])}}const we=t=>{const e=new Headers,n=new Set;for(const s of t){const a=new Set;for(const[l,c]of r4(s)){const d=l.toLowerCase();a.has(d)||(e.delete(l),a.add(d)),c===null?(e.delete(l),n.add(d)):(e.append(l,c),n.delete(d))}}return{[tA]:!0,values:e,nulls:n}};class nA extends Ne{create(e,n){return this._client.post("/audio/speech",{body:e,...n,headers:we([{Accept:"application/octet-stream"},n?.headers]),__binaryResponse:!0})}}class rA extends Ne{create(e,n){return this._client.post("/audio/transcriptions",Ei({body:e,...n,stream:e.stream??!1,__metadata:{model:e.model}},this._client))}}class sA extends Ne{create(e,n){return this._client.post("/audio/translations",Ei({body:e,...n,__metadata:{model:e.model}},this._client))}}class ic extends Ne{constructor(){super(...arguments),this.transcriptions=new rA(this._client),this.translations=new sA(this._client),this.speech=new nA(this._client)}}ic.Transcriptions=rA;ic.Translations=sA;ic.Speech=nA;class iA extends Ne{create(e,n){return this._client.post("/batches",{body:e,...n})}retrieve(e,n){return this._client.get(pe`/batches/${e}`,n)}list(e={},n){return this._client.getAPIList("/batches",Ot,{query:e,...n})}cancel(e,n){return this._client.post(pe`/batches/${e}/cancel`,n)}}class aA extends Ne{create(e,n){return this._client.post("/assistants",{body:e,...n,headers:we([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}retrieve(e,n){return this._client.get(pe`/assistants/${e}`,{...n,headers:we([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}update(e,n,s){return this._client.post(pe`/assistants/${e}`,{body:n,...s,headers:we([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}list(e={},n){return this._client.getAPIList("/assistants",Ot,{query:e,...n,headers:we([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}delete(e,n){return this._client.delete(pe`/assistants/${e}`,{...n,headers:we([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}}let oA=class extends Ne{create(e,n){return this._client.post("/realtime/sessions",{body:e,...n,headers:we([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}};class lA extends Ne{create(e,n){return this._client.post("/realtime/transcription_sessions",{body:e,...n,headers:we([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}}let vf=class extends Ne{constructor(){super(...arguments),this.sessions=new oA(this._client),this.transcriptionSessions=new lA(this._client)}};vf.Sessions=oA;vf.TranscriptionSessions=lA;class cA extends Ne{create(e,n){return this._client.post("/chatkit/sessions",{body:e,...n,headers:we([{"OpenAI-Beta":"chatkit_beta=v1"},n?.headers])})}cancel(e,n){return this._client.post(pe`/chatkit/sessions/${e}/cancel`,{...n,headers:we([{"OpenAI-Beta":"chatkit_beta=v1"},n?.headers])})}}let uA=class extends Ne{retrieve(e,n){return this._client.get(pe`/chatkit/threads/${e}`,{...n,headers:we([{"OpenAI-Beta":"chatkit_beta=v1"},n?.headers])})}list(e={},n){return this._client.getAPIList("/chatkit/threads",zd,{query:e,...n,headers:we([{"OpenAI-Beta":"chatkit_beta=v1"},n?.headers])})}delete(e,n){return this._client.delete(pe`/chatkit/threads/${e}`,{...n,headers:we([{"OpenAI-Beta":"chatkit_beta=v1"},n?.headers])})}listItems(e,n={},s){return this._client.getAPIList(pe`/chatkit/threads/${e}/items`,zd,{query:n,...s,headers:we([{"OpenAI-Beta":"chatkit_beta=v1"},s?.headers])})}};class _f extends Ne{constructor(){super(...arguments),this.sessions=new cA(this._client),this.threads=new uA(this._client)}}_f.Sessions=cA;_f.Threads=uA;class dA extends Ne{create(e,n,s){return this._client.post(pe`/threads/${e}/messages`,{body:n,...s,headers:we([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}retrieve(e,n,s){const{thread_id:a}=n;return this._client.get(pe`/threads/${a}/messages/${e}`,{...s,headers:we([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}update(e,n,s){const{thread_id:a,...l}=n;return this._client.post(pe`/threads/${a}/messages/${e}`,{body:l,...s,headers:we([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}list(e,n={},s){return this._client.getAPIList(pe`/threads/${e}/messages`,Ot,{query:n,...s,headers:we([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}delete(e,n,s){const{thread_id:a}=n;return this._client.delete(pe`/threads/${a}/messages/${e}`,{...s,headers:we([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}}class fA extends Ne{retrieve(e,n,s){const{thread_id:a,run_id:l,...c}=n;return this._client.get(pe`/threads/${a}/runs/${l}/steps/${e}`,{query:c,...s,headers:we([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}list(e,n,s){const{thread_id:a,...l}=n;return this._client.getAPIList(pe`/threads/${a}/runs/${e}/steps`,Ot,{query:l,...s,headers:we([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}}const s4=t=>{if(typeof Buffer<"u"){const e=Buffer.from(t,"base64");return Array.from(new Float32Array(e.buffer,e.byteOffset,e.length/Float32Array.BYTES_PER_ELEMENT))}else{const e=atob(t),n=e.length,s=new Uint8Array(n);for(let a=0;a<n;a++)s[a]=e.charCodeAt(a);return Array.from(new Float32Array(s.buffer))}};var i4={};const Ca=t=>{if(typeof globalThis.process<"u")return i4?.[t]?.trim()??void 0;if(typeof globalThis.Deno<"u")return globalThis.Deno.env?.get?.(t)?.trim()};var Gt,gi,hg,mr,gd,Zn,yi,Ua,hi,Yd,On,yd,vd,Tl,vl,_l,Ix,Lx,zx,Bx,Px,qx,Hx;class Nl extends sy{constructor(){super(...arguments),Gt.add(this),hg.set(this,[]),mr.set(this,{}),gd.set(this,{}),Zn.set(this,void 0),yi.set(this,void 0),Ua.set(this,void 0),hi.set(this,void 0),Yd.set(this,void 0),On.set(this,void 0),yd.set(this,void 0),vd.set(this,void 0),Tl.set(this,void 0)}[(hg=new WeakMap,mr=new WeakMap,gd=new WeakMap,Zn=new WeakMap,yi=new WeakMap,Ua=new WeakMap,hi=new WeakMap,Yd=new WeakMap,On=new WeakMap,yd=new WeakMap,vd=new WeakMap,Tl=new WeakMap,Gt=new WeakSet,Symbol.asyncIterator)](){const e=[],n=[];let s=!1;return this.on("event",a=>{const l=n.shift();l?l.resolve(a):e.push(a)}),this.on("end",()=>{s=!0;for(const a of n)a.resolve(void 0);n.length=0}),this.on("abort",a=>{s=!0;for(const l of n)l.reject(a);n.length=0}),this.on("error",a=>{s=!0;for(const l of n)l.reject(a);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:s?{value:void 0,done:!0}:new Promise((l,c)=>n.push({resolve:l,reject:c})).then(l=>l?{value:l,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}static fromReadableStream(e){const n=new gi;return n._run(()=>n._fromReadableStream(e)),n}async _fromReadableStream(e,n){const s=n?.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort())),this._connected();const a=gr.fromReadableStream(e,this.controller);for await(const l of a)se(this,Gt,"m",vl).call(this,l);if(a.controller.signal?.aborted)throw new Vn;return this._addRun(se(this,Gt,"m",_l).call(this))}toReadableStream(){return new gr(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}static createToolAssistantStream(e,n,s,a){const l=new gi;return l._run(()=>l._runToolAssistantStream(e,n,s,{...a,headers:{...a?.headers,"X-Stainless-Helper-Method":"stream"}})),l}async _createToolAssistantStream(e,n,s,a){const l=a?.signal;l&&(l.aborted&&this.controller.abort(),l.addEventListener("abort",()=>this.controller.abort()));const c={...s,stream:!0},d=await e.submitToolOutputs(n,c,{...a,signal:this.controller.signal});this._connected();for await(const f of d)se(this,Gt,"m",vl).call(this,f);if(d.controller.signal?.aborted)throw new Vn;return this._addRun(se(this,Gt,"m",_l).call(this))}static createThreadAssistantStream(e,n,s){const a=new gi;return a._run(()=>a._threadAssistantStream(e,n,{...s,headers:{...s?.headers,"X-Stainless-Helper-Method":"stream"}})),a}static createAssistantStream(e,n,s,a){const l=new gi;return l._run(()=>l._runAssistantStream(e,n,s,{...a,headers:{...a?.headers,"X-Stainless-Helper-Method":"stream"}})),l}currentEvent(){return se(this,yd,"f")}currentRun(){return se(this,vd,"f")}currentMessageSnapshot(){return se(this,Zn,"f")}currentRunStepSnapshot(){return se(this,Tl,"f")}async finalRunSteps(){return await this.done(),Object.values(se(this,mr,"f"))}async finalMessages(){return await this.done(),Object.values(se(this,gd,"f"))}async finalRun(){if(await this.done(),!se(this,yi,"f"))throw Error("Final run was not received.");return se(this,yi,"f")}async _createThreadAssistantStream(e,n,s){const a=s?.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",()=>this.controller.abort()));const l={...n,stream:!0},c=await e.createAndRun(l,{...s,signal:this.controller.signal});this._connected();for await(const d of c)se(this,Gt,"m",vl).call(this,d);if(c.controller.signal?.aborted)throw new Vn;return this._addRun(se(this,Gt,"m",_l).call(this))}async _createAssistantStream(e,n,s,a){const l=a?.signal;l&&(l.aborted&&this.controller.abort(),l.addEventListener("abort",()=>this.controller.abort()));const c={...s,stream:!0},d=await e.create(n,c,{...a,signal:this.controller.signal});this._connected();for await(const f of d)se(this,Gt,"m",vl).call(this,f);if(d.controller.signal?.aborted)throw new Vn;return this._addRun(se(this,Gt,"m",_l).call(this))}static accumulateDelta(e,n){for(const[s,a]of Object.entries(n)){if(!e.hasOwnProperty(s)){e[s]=a;continue}let l=e[s];if(l==null){e[s]=a;continue}if(s==="index"||s==="type"){e[s]=a;continue}if(typeof l=="string"&&typeof a=="string")l+=a;else if(typeof l=="number"&&typeof a=="number")l+=a;else if(yp(l)&&yp(a))l=this.accumulateDelta(l,a);else if(Array.isArray(l)&&Array.isArray(a)){if(l.every(c=>typeof c=="string"||typeof c=="number")){l.push(...a);continue}for(const c of a){if(!yp(c))throw new Error(`Expected array delta entry to be an object but got: ${c}`);const d=c.index;if(d==null)throw console.error(c),new Error("Expected array delta entry to have an `index` property");if(typeof d!="number")throw new Error(`Expected array delta entry \`index\` property to be a number but got ${d}`);const f=l[d];f==null?l.push(c):l[d]=this.accumulateDelta(f,c)}continue}else throw Error(`Unhandled record type: ${s}, deltaValue: ${a}, accValue: ${l}`);e[s]=l}return e}_addRun(e){return e}async _threadAssistantStream(e,n,s){return await this._createThreadAssistantStream(n,e,s)}async _runAssistantStream(e,n,s,a){return await this._createAssistantStream(n,e,s,a)}async _runToolAssistantStream(e,n,s,a){return await this._createToolAssistantStream(n,e,s,a)}}gi=Nl,vl=function(e){if(!this.ended)switch(Ie(this,yd,e),se(this,Gt,"m",zx).call(this,e),e.event){case"thread.created":break;case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.requires_action":case"thread.run.completed":case"thread.run.incomplete":case"thread.run.failed":case"thread.run.cancelling":case"thread.run.cancelled":case"thread.run.expired":se(this,Gt,"m",Hx).call(this,e);break;case"thread.run.step.created":case"thread.run.step.in_progress":case"thread.run.step.delta":case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":se(this,Gt,"m",Lx).call(this,e);break;case"thread.message.created":case"thread.message.in_progress":case"thread.message.delta":case"thread.message.completed":case"thread.message.incomplete":se(this,Gt,"m",Ix).call(this,e);break;case"error":throw new Error("Encountered an error event in event processing - errors should be processed earlier")}},_l=function(){if(this.ended)throw new je("stream has ended, this shouldn't happen");if(!se(this,yi,"f"))throw Error("Final run has not been received");return se(this,yi,"f")},Ix=function(e){const[n,s]=se(this,Gt,"m",Px).call(this,e,se(this,Zn,"f"));Ie(this,Zn,n),se(this,gd,"f")[n.id]=n;for(const a of s){const l=n.content[a.index];l?.type=="text"&&this._emit("textCreated",l.text)}switch(e.event){case"thread.message.created":this._emit("messageCreated",e.data);break;case"thread.message.in_progress":break;case"thread.message.delta":if(this._emit("messageDelta",e.data.delta,n),e.data.delta.content)for(const a of e.data.delta.content){if(a.type=="text"&&a.text){let l=a.text,c=n.content[a.index];if(c&&c.type=="text")this._emit("textDelta",l,c.text);else throw Error("The snapshot associated with this text delta is not text or missing")}if(a.index!=se(this,Ua,"f")){if(se(this,hi,"f"))switch(se(this,hi,"f").type){case"text":this._emit("textDone",se(this,hi,"f").text,se(this,Zn,"f"));break;case"image_file":this._emit("imageFileDone",se(this,hi,"f").image_file,se(this,Zn,"f"));break}Ie(this,Ua,a.index)}Ie(this,hi,n.content[a.index])}break;case"thread.message.completed":case"thread.message.incomplete":if(se(this,Ua,"f")!==void 0){const a=e.data.content[se(this,Ua,"f")];if(a)switch(a.type){case"image_file":this._emit("imageFileDone",a.image_file,se(this,Zn,"f"));break;case"text":this._emit("textDone",a.text,se(this,Zn,"f"));break}}se(this,Zn,"f")&&this._emit("messageDone",e.data),Ie(this,Zn,void 0)}},Lx=function(e){const n=se(this,Gt,"m",Bx).call(this,e);switch(Ie(this,Tl,n),e.event){case"thread.run.step.created":this._emit("runStepCreated",e.data);break;case"thread.run.step.delta":const s=e.data.delta;if(s.step_details&&s.step_details.type=="tool_calls"&&s.step_details.tool_calls&&n.step_details.type=="tool_calls")for(const l of s.step_details.tool_calls)l.index==se(this,Yd,"f")?this._emit("toolCallDelta",l,n.step_details.tool_calls[l.index]):(se(this,On,"f")&&this._emit("toolCallDone",se(this,On,"f")),Ie(this,Yd,l.index),Ie(this,On,n.step_details.tool_calls[l.index]),se(this,On,"f")&&this._emit("toolCallCreated",se(this,On,"f")));this._emit("runStepDelta",e.data.delta,n);break;case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":Ie(this,Tl,void 0),e.data.step_details.type=="tool_calls"&&se(this,On,"f")&&(this._emit("toolCallDone",se(this,On,"f")),Ie(this,On,void 0)),this._emit("runStepDone",e.data,n);break}},zx=function(e){se(this,hg,"f").push(e),this._emit("event",e)},Bx=function(e){switch(e.event){case"thread.run.step.created":return se(this,mr,"f")[e.data.id]=e.data,e.data;case"thread.run.step.delta":let n=se(this,mr,"f")[e.data.id];if(!n)throw Error("Received a RunStepDelta before creation of a snapshot");let s=e.data;if(s.delta){const a=gi.accumulateDelta(n,s.delta);se(this,mr,"f")[e.data.id]=a}return se(this,mr,"f")[e.data.id];case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":case"thread.run.step.in_progress":se(this,mr,"f")[e.data.id]=e.data;break}if(se(this,mr,"f")[e.data.id])return se(this,mr,"f")[e.data.id];throw new Error("No snapshot available")},Px=function(e,n){let s=[];switch(e.event){case"thread.message.created":return[e.data,s];case"thread.message.delta":if(!n)throw Error("Received a delta with no existing snapshot (there should be one from message creation)");let a=e.data;if(a.delta.content)for(const l of a.delta.content)if(l.index in n.content){let c=n.content[l.index];n.content[l.index]=se(this,Gt,"m",qx).call(this,l,c)}else n.content[l.index]=l,s.push(l);return[n,s];case"thread.message.in_progress":case"thread.message.completed":case"thread.message.incomplete":if(n)return[n,s];throw Error("Received thread message event with no existing snapshot")}throw Error("Tried to accumulate a non-message event")},qx=function(e,n){return gi.accumulateDelta(n,e)},Hx=function(e){switch(Ie(this,vd,e.data),e.event){case"thread.run.created":break;case"thread.run.queued":break;case"thread.run.in_progress":break;case"thread.run.requires_action":case"thread.run.cancelled":case"thread.run.failed":case"thread.run.completed":case"thread.run.expired":case"thread.run.incomplete":Ie(this,yi,e.data),se(this,On,"f")&&(this._emit("toolCallDone",se(this,On,"f")),Ie(this,On,void 0));break}};let ly=class extends Ne{constructor(){super(...arguments),this.steps=new fA(this._client)}create(e,n,s){const{include:a,...l}=n;return this._client.post(pe`/threads/${e}/runs`,{query:{include:a},body:l,...s,headers:we([{"OpenAI-Beta":"assistants=v2"},s?.headers]),stream:n.stream??!1})}retrieve(e,n,s){const{thread_id:a}=n;return this._client.get(pe`/threads/${a}/runs/${e}`,{...s,headers:we([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}update(e,n,s){const{thread_id:a,...l}=n;return this._client.post(pe`/threads/${a}/runs/${e}`,{body:l,...s,headers:we([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}list(e,n={},s){return this._client.getAPIList(pe`/threads/${e}/runs`,Ot,{query:n,...s,headers:we([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}cancel(e,n,s){const{thread_id:a}=n;return this._client.post(pe`/threads/${a}/runs/${e}/cancel`,{...s,headers:we([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}async createAndPoll(e,n,s){const a=await this.create(e,n,s);return await this.poll(a.id,{thread_id:e},s)}createAndStream(e,n,s){return Nl.createAssistantStream(e,this._client.beta.threads.runs,n,s)}async poll(e,n,s){const a=we([s?.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":s?.pollIntervalMs?.toString()??void 0}]);for(;;){const{data:l,response:c}=await this.retrieve(e,n,{...s,headers:{...s?.headers,...a}}).withResponse();switch(l.status){case"queued":case"in_progress":case"cancelling":let d=5e3;if(s?.pollIntervalMs)d=s.pollIntervalMs;else{const f=c.headers.get("openai-poll-after-ms");if(f){const h=parseInt(f);isNaN(h)||(d=h)}}await rc(d);break;case"requires_action":case"incomplete":case"cancelled":case"completed":case"failed":case"expired":return l}}}stream(e,n,s){return Nl.createAssistantStream(e,this._client.beta.threads.runs,n,s)}submitToolOutputs(e,n,s){const{thread_id:a,...l}=n;return this._client.post(pe`/threads/${a}/runs/${e}/submit_tool_outputs`,{body:l,...s,headers:we([{"OpenAI-Beta":"assistants=v2"},s?.headers]),stream:n.stream??!1})}async submitToolOutputsAndPoll(e,n,s){const a=await this.submitToolOutputs(e,n,s);return await this.poll(a.id,n,s)}submitToolOutputsStream(e,n,s){return Nl.createToolAssistantStream(e,this._client.beta.threads.runs,n,s)}};ly.Steps=fA;class bf extends Ne{constructor(){super(...arguments),this.runs=new ly(this._client),this.messages=new dA(this._client)}create(e={},n){return this._client.post("/threads",{body:e,...n,headers:we([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}retrieve(e,n){return this._client.get(pe`/threads/${e}`,{...n,headers:we([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}update(e,n,s){return this._client.post(pe`/threads/${e}`,{body:n,...s,headers:we([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}delete(e,n){return this._client.delete(pe`/threads/${e}`,{...n,headers:we([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}createAndRun(e,n){return this._client.post("/threads/runs",{body:e,...n,headers:we([{"OpenAI-Beta":"assistants=v2"},n?.headers]),stream:e.stream??!1})}async createAndRunPoll(e,n){const s=await this.createAndRun(e,n);return await this.runs.poll(s.id,{thread_id:s.thread_id},n)}createAndRunStream(e,n){return Nl.createThreadAssistantStream(e,this._client.beta.threads,n)}}bf.Runs=ly;bf.Messages=dA;class Ja extends Ne{constructor(){super(...arguments),this.realtime=new vf(this._client),this.chatkit=new _f(this._client),this.assistants=new aA(this._client),this.threads=new bf(this._client)}}Ja.Realtime=vf;Ja.ChatKit=_f;Ja.Assistants=aA;Ja.Threads=bf;class hA extends Ne{create(e,n){return this._client.post("/completions",{body:e,...n,stream:e.stream??!1})}}class mA extends Ne{retrieve(e,n,s){const{container_id:a}=n;return this._client.get(pe`/containers/${a}/files/${e}/content`,{...s,headers:we([{Accept:"application/binary"},s?.headers]),__binaryResponse:!0})}}let cy=class extends Ne{constructor(){super(...arguments),this.content=new mA(this._client)}create(e,n,s){return this._client.post(pe`/containers/${e}/files`,Ei({body:n,...s},this._client))}retrieve(e,n,s){const{container_id:a}=n;return this._client.get(pe`/containers/${a}/files/${e}`,s)}list(e,n={},s){return this._client.getAPIList(pe`/containers/${e}/files`,Ot,{query:n,...s})}delete(e,n,s){const{container_id:a}=n;return this._client.delete(pe`/containers/${a}/files/${e}`,{...s,headers:we([{Accept:"*/*"},s?.headers])})}};cy.Content=mA;class uy extends Ne{constructor(){super(...arguments),this.files=new cy(this._client)}create(e,n){return this._client.post("/containers",{body:e,...n})}retrieve(e,n){return this._client.get(pe`/containers/${e}`,n)}list(e={},n){return this._client.getAPIList("/containers",Ot,{query:e,...n})}delete(e,n){return this._client.delete(pe`/containers/${e}`,{...n,headers:we([{Accept:"*/*"},n?.headers])})}}uy.Files=cy;class pA extends Ne{create(e,n,s){const{include:a,...l}=n;return this._client.post(pe`/conversations/${e}/items`,{query:{include:a},body:l,...s})}retrieve(e,n,s){const{conversation_id:a,...l}=n;return this._client.get(pe`/conversations/${a}/items/${e}`,{query:l,...s})}list(e,n={},s){return this._client.getAPIList(pe`/conversations/${e}/items`,zd,{query:n,...s})}delete(e,n,s){const{conversation_id:a}=n;return this._client.delete(pe`/conversations/${a}/items/${e}`,s)}}class dy extends Ne{constructor(){super(...arguments),this.items=new pA(this._client)}create(e={},n){return this._client.post("/conversations",{body:e,...n})}retrieve(e,n){return this._client.get(pe`/conversations/${e}`,n)}update(e,n,s){return this._client.post(pe`/conversations/${e}`,{body:n,...s})}delete(e,n){return this._client.delete(pe`/conversations/${e}`,n)}}dy.Items=pA;class gA extends Ne{create(e,n){const s=!!e.encoding_format;let a=s?e.encoding_format:"base64";s&&Yt(this._client).debug("embeddings/user defined encoding_format:",e.encoding_format);const l=this._client.post("/embeddings",{body:{...e,encoding_format:a},...n});return s?l:(Yt(this._client).debug("embeddings/decoding base64 embeddings from base64"),l._thenUnwrap(c=>(c&&c.data&&c.data.forEach(d=>{const f=d.embedding;d.embedding=s4(f)}),c)))}}class yA extends Ne{retrieve(e,n,s){const{eval_id:a,run_id:l}=n;return this._client.get(pe`/evals/${a}/runs/${l}/output_items/${e}`,s)}list(e,n,s){const{eval_id:a,...l}=n;return this._client.getAPIList(pe`/evals/${a}/runs/${e}/output_items`,Ot,{query:l,...s})}}class fy extends Ne{constructor(){super(...arguments),this.outputItems=new yA(this._client)}create(e,n,s){return this._client.post(pe`/evals/${e}/runs`,{body:n,...s})}retrieve(e,n,s){const{eval_id:a}=n;return this._client.get(pe`/evals/${a}/runs/${e}`,s)}list(e,n={},s){return this._client.getAPIList(pe`/evals/${e}/runs`,Ot,{query:n,...s})}delete(e,n,s){const{eval_id:a}=n;return this._client.delete(pe`/evals/${a}/runs/${e}`,s)}cancel(e,n,s){const{eval_id:a}=n;return this._client.post(pe`/evals/${a}/runs/${e}`,s)}}fy.OutputItems=yA;class hy extends Ne{constructor(){super(...arguments),this.runs=new fy(this._client)}create(e,n){return this._client.post("/evals",{body:e,...n})}retrieve(e,n){return this._client.get(pe`/evals/${e}`,n)}update(e,n,s){return this._client.post(pe`/evals/${e}`,{body:n,...s})}list(e={},n){return this._client.getAPIList("/evals",Ot,{query:e,...n})}delete(e,n){return this._client.delete(pe`/evals/${e}`,n)}}hy.Runs=fy;let vA=class extends Ne{create(e,n){return this._client.post("/files",Ei({body:e,...n},this._client))}retrieve(e,n){return this._client.get(pe`/files/${e}`,n)}list(e={},n){return this._client.getAPIList("/files",Ot,{query:e,...n})}delete(e,n){return this._client.delete(pe`/files/${e}`,n)}content(e,n){return this._client.get(pe`/files/${e}/content`,{...n,headers:we([{Accept:"application/binary"},n?.headers]),__binaryResponse:!0})}async waitForProcessing(e,{pollInterval:n=5e3,maxWait:s=1800*1e3}={}){const a=new Set(["processed","error","deleted"]),l=Date.now();let c=await this.retrieve(e);for(;!c.status||!a.has(c.status);)if(await rc(n),c=await this.retrieve(e),Date.now()-l>s)throw new Jg({message:`Giving up on waiting for file ${e} to finish processing after ${s} milliseconds.`});return c}};class _A extends Ne{}let bA=class extends Ne{run(e,n){return this._client.post("/fine_tuning/alpha/graders/run",{body:e,...n})}validate(e,n){return this._client.post("/fine_tuning/alpha/graders/validate",{body:e,...n})}};class my extends Ne{constructor(){super(...arguments),this.graders=new bA(this._client)}}my.Graders=bA;class wA extends Ne{create(e,n,s){return this._client.getAPIList(pe`/fine_tuning/checkpoints/${e}/permissions`,yf,{body:n,method:"post",...s})}retrieve(e,n={},s){return this._client.get(pe`/fine_tuning/checkpoints/${e}/permissions`,{query:n,...s})}delete(e,n,s){const{fine_tuned_model_checkpoint:a}=n;return this._client.delete(pe`/fine_tuning/checkpoints/${a}/permissions/${e}`,s)}}let py=class extends Ne{constructor(){super(...arguments),this.permissions=new wA(this._client)}};py.Permissions=wA;class xA extends Ne{list(e,n={},s){return this._client.getAPIList(pe`/fine_tuning/jobs/${e}/checkpoints`,Ot,{query:n,...s})}}class gy extends Ne{constructor(){super(...arguments),this.checkpoints=new xA(this._client)}create(e,n){return this._client.post("/fine_tuning/jobs",{body:e,...n})}retrieve(e,n){return this._client.get(pe`/fine_tuning/jobs/${e}`,n)}list(e={},n){return this._client.getAPIList("/fine_tuning/jobs",Ot,{query:e,...n})}cancel(e,n){return this._client.post(pe`/fine_tuning/jobs/${e}/cancel`,n)}listEvents(e,n={},s){return this._client.getAPIList(pe`/fine_tuning/jobs/${e}/events`,Ot,{query:n,...s})}pause(e,n){return this._client.post(pe`/fine_tuning/jobs/${e}/pause`,n)}resume(e,n){return this._client.post(pe`/fine_tuning/jobs/${e}/resume`,n)}}gy.Checkpoints=xA;class Za extends Ne{constructor(){super(...arguments),this.methods=new _A(this._client),this.jobs=new gy(this._client),this.checkpoints=new py(this._client),this.alpha=new my(this._client)}}Za.Methods=_A;Za.Jobs=gy;Za.Checkpoints=py;Za.Alpha=my;class SA extends Ne{}class yy extends Ne{constructor(){super(...arguments),this.graderModels=new SA(this._client)}}yy.GraderModels=SA;class EA extends Ne{createVariation(e,n){return this._client.post("/images/variations",Ei({body:e,...n},this._client))}edit(e,n){return this._client.post("/images/edits",Ei({body:e,...n,stream:e.stream??!1},this._client))}generate(e,n){return this._client.post("/images/generations",{body:e,...n,stream:e.stream??!1})}}class CA extends Ne{retrieve(e,n){return this._client.get(pe`/models/${e}`,n)}list(e){return this._client.getAPIList("/models",yf,e)}delete(e,n){return this._client.delete(pe`/models/${e}`,n)}}class AA extends Ne{create(e,n){return this._client.post("/moderations",{body:e,...n})}}class TA extends Ne{accept(e,n,s){return this._client.post(pe`/realtime/calls/${e}/accept`,{body:n,...s,headers:we([{Accept:"*/*"},s?.headers])})}hangup(e,n){return this._client.post(pe`/realtime/calls/${e}/hangup`,{...n,headers:we([{Accept:"*/*"},n?.headers])})}refer(e,n,s){return this._client.post(pe`/realtime/calls/${e}/refer`,{body:n,...s,headers:we([{Accept:"*/*"},s?.headers])})}reject(e,n={},s){return this._client.post(pe`/realtime/calls/${e}/reject`,{body:n,...s,headers:we([{Accept:"*/*"},s?.headers])})}}class NA extends Ne{create(e,n){return this._client.post("/realtime/client_secrets",{body:e,...n})}}class wf extends Ne{constructor(){super(...arguments),this.clientSecrets=new NA(this._client),this.calls=new TA(this._client)}}wf.ClientSecrets=NA;wf.Calls=TA;function a4(t,e){return!e||!l4(e)?{...t,output_parsed:null,output:t.output.map(n=>n.type==="function_call"?{...n,parsed_arguments:null}:n.type==="message"?{...n,content:n.content.map(s=>({...s,parsed:null}))}:n)}:OA(t,e)}function OA(t,e){const n=t.output.map(a=>{if(a.type==="function_call")return{...a,parsed_arguments:d4(e,a)};if(a.type==="message"){const l=a.content.map(c=>c.type==="output_text"?{...c,parsed:o4(e,c.text)}:c);return{...a,content:l}}return a}),s=Object.assign({},t,{output:n});return Object.getOwnPropertyDescriptor(t,"output_text")||mg(s),Object.defineProperty(s,"output_parsed",{enumerable:!0,get(){for(const a of s.output)if(a.type==="message"){for(const l of a.content)if(l.type==="output_text"&&l.parsed!==null)return l.parsed}return null}}),s}function o4(t,e){return t.text?.format?.type!=="json_schema"?null:"$parseRaw"in t.text?.format?(t.text?.format).$parseRaw(e):JSON.parse(e)}function l4(t){return!!ny(t.text?.format)}function c4(t){return t?.$brand==="auto-parseable-tool"}function u4(t,e){return t.find(n=>n.type==="function"&&n.name===e)}function d4(t,e){const n=u4(t.tools??[],e.name);return{...e,...e,parsed_arguments:c4(n)?n.$parseRaw(e.arguments):n?.strict?JSON.parse(e.arguments):null}}function mg(t){const e=[];for(const n of t.output)if(n.type==="message")for(const s of n.content)s.type==="output_text"&&e.push(s.text);t.output_text=e.join("")}var Aa,nd,ks,rd,Vx,Fx,Yx,Gx;class vy extends sy{constructor(e){super(),Aa.add(this),nd.set(this,void 0),ks.set(this,void 0),rd.set(this,void 0),Ie(this,nd,e)}static createResponse(e,n,s){const a=new vy(n);return a._run(()=>a._createOrRetrieveResponse(e,n,{...s,headers:{...s?.headers,"X-Stainless-Helper-Method":"stream"}})),a}async _createOrRetrieveResponse(e,n,s){const a=s?.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",()=>this.controller.abort())),se(this,Aa,"m",Vx).call(this);let l,c=null;"response_id"in n?(l=await e.responses.retrieve(n.response_id,{stream:!0},{...s,signal:this.controller.signal,stream:!0}),c=n.starting_after??null):l=await e.responses.create({...n,stream:!0},{...s,signal:this.controller.signal}),this._connected();for await(const d of l)se(this,Aa,"m",Fx).call(this,d,c);if(l.controller.signal?.aborted)throw new Vn;return se(this,Aa,"m",Yx).call(this)}[(nd=new WeakMap,ks=new WeakMap,rd=new WeakMap,Aa=new WeakSet,Vx=function(){this.ended||Ie(this,ks,void 0)},Fx=function(n,s){if(this.ended)return;const a=(c,d)=>{(s==null||d.sequence_number>s)&&this._emit(c,d)},l=se(this,Aa,"m",Gx).call(this,n);switch(a("event",n),n.type){case"response.output_text.delta":{const c=l.output[n.output_index];if(!c)throw new je(`missing output at index ${n.output_index}`);if(c.type==="message"){const d=c.content[n.content_index];if(!d)throw new je(`missing content at index ${n.content_index}`);if(d.type!=="output_text")throw new je(`expected content to be 'output_text', got ${d.type}`);a("response.output_text.delta",{...n,snapshot:d.text})}break}case"response.function_call_arguments.delta":{const c=l.output[n.output_index];if(!c)throw new je(`missing output at index ${n.output_index}`);c.type==="function_call"&&a("response.function_call_arguments.delta",{...n,snapshot:c.arguments});break}default:a(n.type,n);break}},Yx=function(){if(this.ended)throw new je("stream has ended, this shouldn't happen");const n=se(this,ks,"f");if(!n)throw new je("request ended without sending any events");Ie(this,ks,void 0);const s=f4(n,se(this,nd,"f"));return Ie(this,rd,s),s},Gx=function(n){let s=se(this,ks,"f");if(!s){if(n.type!=="response.created")throw new je(`When snapshot hasn't been set yet, expected 'response.created' event, got ${n.type}`);return s=Ie(this,ks,n.response),s}switch(n.type){case"response.output_item.added":{s.output.push(n.item);break}case"response.content_part.added":{const a=s.output[n.output_index];if(!a)throw new je(`missing output at index ${n.output_index}`);const l=a.type,c=n.part;l==="message"&&c.type!=="reasoning_text"?a.content.push(c):l==="reasoning"&&c.type==="reasoning_text"&&(a.content||(a.content=[]),a.content.push(c));break}case"response.output_text.delta":{const a=s.output[n.output_index];if(!a)throw new je(`missing output at index ${n.output_index}`);if(a.type==="message"){const l=a.content[n.content_index];if(!l)throw new je(`missing content at index ${n.content_index}`);if(l.type!=="output_text")throw new je(`expected content to be 'output_text', got ${l.type}`);l.text+=n.delta}break}case"response.function_call_arguments.delta":{const a=s.output[n.output_index];if(!a)throw new je(`missing output at index ${n.output_index}`);a.type==="function_call"&&(a.arguments+=n.delta);break}case"response.reasoning_text.delta":{const a=s.output[n.output_index];if(!a)throw new je(`missing output at index ${n.output_index}`);if(a.type==="reasoning"){const l=a.content?.[n.content_index];if(!l)throw new je(`missing content at index ${n.content_index}`);if(l.type!=="reasoning_text")throw new je(`expected content to be 'reasoning_text', got ${l.type}`);l.text+=n.delta}break}case"response.completed":{Ie(this,ks,n.response);break}}return s},Symbol.asyncIterator)](){const e=[],n=[];let s=!1;return this.on("event",a=>{const l=n.shift();l?l.resolve(a):e.push(a)}),this.on("end",()=>{s=!0;for(const a of n)a.resolve(void 0);n.length=0}),this.on("abort",a=>{s=!0;for(const l of n)l.reject(a);n.length=0}),this.on("error",a=>{s=!0;for(const l of n)l.reject(a);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:s?{value:void 0,done:!0}:new Promise((l,c)=>n.push({resolve:l,reject:c})).then(l=>l?{value:l,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}async finalResponse(){await this.done();const e=se(this,rd,"f");if(!e)throw new je("stream ended without producing a ChatCompletion");return e}}function f4(t,e){return a4(t,e)}class RA extends Ne{list(e,n={},s){return this._client.getAPIList(pe`/responses/${e}/input_items`,Ot,{query:n,...s})}}class jA extends Ne{count(e={},n){return this._client.post("/responses/input_tokens",{body:e,...n})}}class xf extends Ne{constructor(){super(...arguments),this.inputItems=new RA(this._client),this.inputTokens=new jA(this._client)}create(e,n){return this._client.post("/responses",{body:e,...n,stream:e.stream??!1})._thenUnwrap(s=>("object"in s&&s.object==="response"&&mg(s),s))}retrieve(e,n={},s){return this._client.get(pe`/responses/${e}`,{query:n,...s,stream:n?.stream??!1})._thenUnwrap(a=>("object"in a&&a.object==="response"&&mg(a),a))}delete(e,n){return this._client.delete(pe`/responses/${e}`,{...n,headers:we([{Accept:"*/*"},n?.headers])})}parse(e,n){return this._client.responses.create(e,n)._thenUnwrap(s=>OA(s,e))}stream(e,n){return vy.createResponse(this._client,e,n)}cancel(e,n){return this._client.post(pe`/responses/${e}/cancel`,n)}}xf.InputItems=RA;xf.InputTokens=jA;class kA extends Ne{create(e,n,s){return this._client.post(pe`/uploads/${e}/parts`,Ei({body:n,...s},this._client))}}class _y extends Ne{constructor(){super(...arguments),this.parts=new kA(this._client)}create(e,n){return this._client.post("/uploads",{body:e,...n})}cancel(e,n){return this._client.post(pe`/uploads/${e}/cancel`,n)}complete(e,n,s){return this._client.post(pe`/uploads/${e}/complete`,{body:n,...s})}}_y.Parts=kA;const h4=async t=>{const e=await Promise.allSettled(t),n=e.filter(a=>a.status==="rejected");if(n.length){for(const a of n)console.error(a.reason);throw new Error(`${n.length} promise(s) failed - see the above errors`)}const s=[];for(const a of e)a.status==="fulfilled"&&s.push(a.value);return s};class MA extends Ne{create(e,n,s){return this._client.post(pe`/vector_stores/${e}/file_batches`,{body:n,...s,headers:we([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}retrieve(e,n,s){const{vector_store_id:a}=n;return this._client.get(pe`/vector_stores/${a}/file_batches/${e}`,{...s,headers:we([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}cancel(e,n,s){const{vector_store_id:a}=n;return this._client.post(pe`/vector_stores/${a}/file_batches/${e}/cancel`,{...s,headers:we([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}async createAndPoll(e,n,s){const a=await this.create(e,n);return await this.poll(e,a.id,s)}listFiles(e,n,s){const{vector_store_id:a,...l}=n;return this._client.getAPIList(pe`/vector_stores/${a}/file_batches/${e}/files`,Ot,{query:l,...s,headers:we([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}async poll(e,n,s){const a=we([s?.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":s?.pollIntervalMs?.toString()??void 0}]);for(;;){const{data:l,response:c}=await this.retrieve(n,{vector_store_id:e},{...s,headers:a}).withResponse();switch(l.status){case"in_progress":let d=5e3;if(s?.pollIntervalMs)d=s.pollIntervalMs;else{const f=c.headers.get("openai-poll-after-ms");if(f){const h=parseInt(f);isNaN(h)||(d=h)}}await rc(d);break;case"failed":case"cancelled":case"completed":return l}}}async uploadAndPoll(e,{files:n,fileIds:s=[]},a){if(n==null||n.length==0)throw new Error("No `files` provided to process. If you've already uploaded files you should use `.createAndPoll()` instead");const l=a?.maxConcurrency??5,c=Math.min(l,n.length),d=this._client,f=n.values(),h=[...s];async function p(v){for(let _ of v){const x=await d.files.create({file:_,purpose:"assistants"},a);h.push(x.id)}}const g=Array(c).fill(f).map(p);return await h4(g),await this.createAndPoll(e,{file_ids:h})}}class DA extends Ne{create(e,n,s){return this._client.post(pe`/vector_stores/${e}/files`,{body:n,...s,headers:we([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}retrieve(e,n,s){const{vector_store_id:a}=n;return this._client.get(pe`/vector_stores/${a}/files/${e}`,{...s,headers:we([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}update(e,n,s){const{vector_store_id:a,...l}=n;return this._client.post(pe`/vector_stores/${a}/files/${e}`,{body:l,...s,headers:we([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}list(e,n={},s){return this._client.getAPIList(pe`/vector_stores/${e}/files`,Ot,{query:n,...s,headers:we([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}delete(e,n,s){const{vector_store_id:a}=n;return this._client.delete(pe`/vector_stores/${a}/files/${e}`,{...s,headers:we([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}async createAndPoll(e,n,s){const a=await this.create(e,n,s);return await this.poll(e,a.id,s)}async poll(e,n,s){const a=we([s?.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":s?.pollIntervalMs?.toString()??void 0}]);for(;;){const l=await this.retrieve(n,{vector_store_id:e},{...s,headers:a}).withResponse(),c=l.data;switch(c.status){case"in_progress":let d=5e3;if(s?.pollIntervalMs)d=s.pollIntervalMs;else{const f=l.response.headers.get("openai-poll-after-ms");if(f){const h=parseInt(f);isNaN(h)||(d=h)}}await rc(d);break;case"failed":case"completed":return c}}}async upload(e,n,s){const a=await this._client.files.create({file:n,purpose:"assistants"},s);return this.create(e,{file_id:a.id},s)}async uploadAndPoll(e,n,s){const a=await this.upload(e,n,s);return await this.poll(e,a.id,s)}content(e,n,s){const{vector_store_id:a}=n;return this._client.getAPIList(pe`/vector_stores/${a}/files/${e}/content`,yf,{...s,headers:we([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}}class Sf extends Ne{constructor(){super(...arguments),this.files=new DA(this._client),this.fileBatches=new MA(this._client)}create(e,n){return this._client.post("/vector_stores",{body:e,...n,headers:we([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}retrieve(e,n){return this._client.get(pe`/vector_stores/${e}`,{...n,headers:we([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}update(e,n,s){return this._client.post(pe`/vector_stores/${e}`,{body:n,...s,headers:we([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}list(e={},n){return this._client.getAPIList("/vector_stores",Ot,{query:e,...n,headers:we([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}delete(e,n){return this._client.delete(pe`/vector_stores/${e}`,{...n,headers:we([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}search(e,n,s){return this._client.getAPIList(pe`/vector_stores/${e}/search`,yf,{body:n,method:"post",...s,headers:we([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}}Sf.Files=DA;Sf.FileBatches=MA;class UA extends Ne{create(e,n){return this._client.post("/videos",kx({body:e,...n},this._client))}retrieve(e,n){return this._client.get(pe`/videos/${e}`,n)}list(e={},n){return this._client.getAPIList("/videos",zd,{query:e,...n})}delete(e,n){return this._client.delete(pe`/videos/${e}`,n)}downloadContent(e,n={},s){return this._client.get(pe`/videos/${e}/content`,{query:n,...s,headers:we([{Accept:"application/binary"},s?.headers]),__binaryResponse:!0})}remix(e,n,s){return this._client.post(pe`/videos/${e}/remix`,kx({body:n,...s},this._client))}}var ja,$A,_d;class IA extends Ne{constructor(){super(...arguments),ja.add(this)}async unwrap(e,n,s=this._client.webhookSecret,a=300){return await this.verifySignature(e,n,s,a),JSON.parse(e)}async verifySignature(e,n,s=this._client.webhookSecret,a=300){if(typeof crypto>"u"||typeof crypto.subtle.importKey!="function"||typeof crypto.subtle.verify!="function")throw new Error("Webhook signature verification is only supported when the `crypto` global is defined");se(this,ja,"m",$A).call(this,s);const l=we([n]).values,c=se(this,ja,"m",_d).call(this,l,"webhook-signature"),d=se(this,ja,"m",_d).call(this,l,"webhook-timestamp"),f=se(this,ja,"m",_d).call(this,l,"webhook-id"),h=parseInt(d,10);if(isNaN(h))throw new dl("Invalid webhook timestamp format");const p=Math.floor(Date.now()/1e3);if(p-h>a)throw new dl("Webhook timestamp is too old");if(h>p+a)throw new dl("Webhook timestamp is too new");const g=c.split(" ").map(w=>w.startsWith("v1,")?w.substring(3):w),v=s.startsWith("whsec_")?Buffer.from(s.replace("whsec_",""),"base64"):Buffer.from(s,"utf-8"),_=f?`${f}.${d}.${e}`:`${d}.${e}`,x=await crypto.subtle.importKey("raw",v,{name:"HMAC",hash:"SHA-256"},!1,["verify"]);for(const w of g)try{const S=Buffer.from(w,"base64");if(await crypto.subtle.verify("HMAC",x,S,new TextEncoder().encode(_)))return}catch{continue}throw new dl("The given webhook signature does not match the expected signature")}}ja=new WeakSet,$A=function(e){if(typeof e!="string"||e.length===0)throw new Error("The webhook secret must either be set using the env var, OPENAI_WEBHOOK_SECRET, on the client class, OpenAI({ webhookSecret: '123' }), or passed to this function")},_d=function(e,n){if(!e)throw new Error("Headers are required");const s=e.get(n);if(s==null)throw new Error(`Missing required header: ${n}`);return s};var pg,by,bd,LA;class Ve{constructor({baseURL:e=Ca("OPENAI_BASE_URL"),apiKey:n=Ca("OPENAI_API_KEY"),organization:s=Ca("OPENAI_ORG_ID")??null,project:a=Ca("OPENAI_PROJECT_ID")??null,webhookSecret:l=Ca("OPENAI_WEBHOOK_SECRET")??null,...c}={}){if(pg.add(this),bd.set(this,void 0),this.completions=new hA(this),this.chat=new oy(this),this.embeddings=new gA(this),this.files=new vA(this),this.images=new EA(this),this.audio=new ic(this),this.moderations=new AA(this),this.models=new CA(this),this.fineTuning=new Za(this),this.graders=new yy(this),this.vectorStores=new Sf(this),this.webhooks=new IA(this),this.beta=new Ja(this),this.batches=new iA(this),this.uploads=new _y(this),this.responses=new xf(this),this.realtime=new wf(this),this.conversations=new dy(this),this.evals=new hy(this),this.containers=new uy(this),this.videos=new UA(this),n===void 0)throw new je("Missing credentials. Please pass an `apiKey`, or set the `OPENAI_API_KEY` environment variable.");const d={apiKey:n,organization:s,project:a,webhookSecret:l,...c,baseURL:e||"https://api.openai.com/v1"};if(!d.dangerouslyAllowBrowser&&mz())throw new je(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new OpenAI({ apiKey, dangerouslyAllowBrowser: true });

https://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety
`);this.baseURL=d.baseURL,this.timeout=d.timeout??by.DEFAULT_TIMEOUT,this.logger=d.logger??console;const f="warn";this.logLevel=f,this.logLevel=Rx(d.logLevel,"ClientOptions.logLevel",this)??Rx(Ca("OPENAI_LOG"),"process.env['OPENAI_LOG']",this)??f,this.fetchOptions=d.fetchOptions,this.maxRetries=d.maxRetries??2,this.fetch=d.fetch??_z(),Ie(this,bd,wz),this._options=d,this.apiKey=typeof n=="string"?n:"Missing Key",this.organization=s,this.project=a,this.webhookSecret=l}withOptions(e){return new this.constructor({...this._options,baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,organization:this.organization,project:this.project,webhookSecret:this.webhookSecret,...e})}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:n}){}async authHeaders(e){return we([{Authorization:`Bearer ${this.apiKey}`}])}stringifyQuery(e){return Tz(e,{arrayFormat:"brackets"})}getUserAgent(){return`${this.constructor.name}/JS ${Oa}`}defaultIdempotencyKey(){return`stainless-node-retry-${oC()}`}makeStatusError(e,n,s,a){return Kt.generate(e,n,s,a)}async _callApiKey(){const e=this._options.apiKey;if(typeof e!="function")return!1;let n;try{n=await e()}catch(s){throw s instanceof je?s:new je(`Failed to get token from 'apiKey' function: ${s.message}`,{cause:s})}if(typeof n!="string"||!n)throw new je(`Expected 'apiKey' function argument to return a string but it returned ${n}`);return this.apiKey=n,!0}buildURL(e,n,s){const a=!se(this,pg,"m",LA).call(this)&&s||this.baseURL,l=cz(e)?new URL(e):new URL(a+(a.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),c=this.defaultQuery();return uz(c)||(n={...c,...n}),typeof n=="object"&&n&&!Array.isArray(n)&&(l.search=this.stringifyQuery(n)),l.toString()}async prepareOptions(e){await this._callApiKey()}async prepareRequest(e,{url:n,options:s}){}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,s){return this.request(Promise.resolve(s).then(a=>({method:e,path:n,...a})))}request(e,n=null){return new gf(this,this.makeRequest(e,n,void 0))}async makeRequest(e,n,s){const a=await e,l=a.maxRetries??this.maxRetries;n==null&&(n=l),await this.prepareOptions(a);const{req:c,url:d,timeout:f}=await this.buildRequest(a,{retryCount:l-n});await this.prepareRequest(c,{url:d,options:a});const h="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),p=s===void 0?"":`, retryOf: ${s}`,g=Date.now();if(Yt(this).debug(`[${h}] sending request`,ui({retryOfRequestLogID:s,method:a.method,url:d,options:a,headers:c.headers})),a.signal?.aborted)throw new Vn;const v=new AbortController,_=await this.fetchWithTimeout(d,c,f,v).catch(rg),x=Date.now();if(_ instanceof globalThis.Error){const A=`retrying, ${n} attempts remaining`;if(a.signal?.aborted)throw new Vn;const N=ng(_)||/timed? ?out/i.test(String(_)+("cause"in _?String(_.cause):""));if(n)return Yt(this).info(`[${h}] connection ${N?"timed out":"failed"} - ${A}`),Yt(this).debug(`[${h}] connection ${N?"timed out":"failed"} (${A})`,ui({retryOfRequestLogID:s,url:d,durationMs:x-g,message:_.message})),this.retryRequest(a,n,s??h);throw Yt(this).info(`[${h}] connection ${N?"timed out":"failed"} - error; no more retries left`),Yt(this).debug(`[${h}] connection ${N?"timed out":"failed"} (error; no more retries left)`,ui({retryOfRequestLogID:s,url:d,durationMs:x-g,message:_.message})),N?new Jg:new mf({cause:_})}const w=[..._.headers.entries()].filter(([A])=>A==="x-request-id").map(([A,N])=>", "+A+": "+JSON.stringify(N)).join(""),S=`[${h}${p}${w}] ${c.method} ${d} ${_.ok?"succeeded":"failed"} with status ${_.status} in ${x-g}ms`;if(!_.ok){const A=await this.shouldRetry(_);if(n&&A){const R=`retrying, ${n} attempts remaining`;return await bz(_.body),Yt(this).info(`${S} - ${R}`),Yt(this).debug(`[${h}] response error (${R})`,ui({retryOfRequestLogID:s,url:_.url,status:_.status,headers:_.headers,durationMs:x-g})),this.retryRequest(a,n,s??h,_.headers)}const N=A?"error; no more retries left":"error; not retryable";Yt(this).info(`${S} - ${N}`);const E=await _.text().catch(R=>rg(R).message),C=hz(E),O=C?void 0:E;throw Yt(this).debug(`[${h}] response error (${N})`,ui({retryOfRequestLogID:s,url:_.url,status:_.status,headers:_.headers,message:O,durationMs:Date.now()-g})),this.makeStatusError(_.status,C,O,_.headers)}return Yt(this).info(S),Yt(this).debug(`[${h}] response start`,ui({retryOfRequestLogID:s,url:_.url,status:_.status,headers:_.headers,durationMs:x-g})),{response:_,options:a,controller:v,requestLogID:h,retryOfRequestLogID:s,startTime:g}}getAPIList(e,n,s){return this.requestAPIList(n,{method:"get",path:e,...s})}requestAPIList(e,n){const s=this.makeRequest(n,null,void 0);return new $z(this,s,e)}async fetchWithTimeout(e,n,s,a){const{signal:l,method:c,...d}=n||{};l&&l.addEventListener("abort",()=>a.abort());const f=setTimeout(()=>a.abort(),s),h=globalThis.ReadableStream&&d.body instanceof globalThis.ReadableStream||typeof d.body=="object"&&d.body!==null&&Symbol.asyncIterator in d.body,p={signal:a.signal,...h?{duplex:"half"}:{},method:"GET",...d};c&&(p.method=c.toUpperCase());try{return await this.fetch.call(void 0,e,p)}finally{clearTimeout(f)}}async shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,s,a){let l;const c=a?.get("retry-after-ms");if(c){const f=parseFloat(c);Number.isNaN(f)||(l=f)}const d=a?.get("retry-after");if(d&&!l){const f=parseFloat(d);Number.isNaN(f)?l=Date.parse(d)-Date.now():l=f*1e3}if(!(l&&0<=l&&l<60*1e3)){const f=e.maxRetries??this.maxRetries;l=this.calculateDefaultRetryTimeoutMillis(n,f)}return await rc(l),this.makeRequest(e,n-1,s)}calculateDefaultRetryTimeoutMillis(e,n){const l=n-e,c=Math.min(.5*Math.pow(2,l),8),d=1-Math.random()*.25;return c*d*1e3}async buildRequest(e,{retryCount:n=0}={}){const s={...e},{method:a,path:l,query:c,defaultBaseURL:d}=s,f=this.buildURL(l,c,d);"timeout"in s&&fz("timeout",s.timeout),s.timeout=s.timeout??this.timeout;const{bodyHeaders:h,body:p}=this.buildBody({options:s}),g=await this.buildHeaders({options:e,method:a,bodyHeaders:h,retryCount:n});return{req:{method:a,headers:g,...s.signal&&{signal:s.signal},...globalThis.ReadableStream&&p instanceof globalThis.ReadableStream&&{duplex:"half"},...p&&{body:p},...this.fetchOptions??{},...s.fetchOptions??{}},url:f,timeout:s.timeout}}async buildHeaders({options:e,method:n,bodyHeaders:s,retryCount:a}){let l={};this.idempotencyHeader&&n!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),l[this.idempotencyHeader]=e.idempotencyKey);const c=we([l,{Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(a),...e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{},...vz(),"OpenAI-Organization":this.organization,"OpenAI-Project":this.project},await this.authHeaders(e),this._options.defaultHeaders,s,e.headers]);return this.validateHeaders(c),c.values}buildBody({options:{body:e,headers:n}}){if(!e)return{bodyHeaders:void 0,body:void 0};const s=we([n]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&s.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:bC(e)}:se(this,bd,"f").call(this,{body:e,headers:s})}}by=Ve,bd=new WeakMap,pg=new WeakSet,LA=function(){return this.baseURL!=="https://api.openai.com/v1"};Ve.OpenAI=by;Ve.DEFAULT_TIMEOUT=6e5;Ve.OpenAIError=je;Ve.APIError=Kt;Ve.APIConnectionError=mf;Ve.APIConnectionTimeoutError=Jg;Ve.APIUserAbortError=Vn;Ve.NotFoundError=dC;Ve.ConflictError=fC;Ve.RateLimitError=mC;Ve.BadRequestError=lC;Ve.AuthenticationError=cC;Ve.InternalServerError=pC;Ve.PermissionDeniedError=uC;Ve.UnprocessableEntityError=hC;Ve.InvalidWebhookSignatureError=dl;Ve.toFile=Pz;Ve.Completions=hA;Ve.Chat=oy;Ve.Embeddings=gA;Ve.Files=vA;Ve.Images=EA;Ve.Audio=ic;Ve.Moderations=AA;Ve.Models=CA;Ve.FineTuning=Za;Ve.Graders=yy;Ve.VectorStores=Sf;Ve.Webhooks=IA;Ve.Beta=Ja;Ve.Batches=iA;Ve.Uploads=_y;Ve.Responses=xf;Ve.Realtime=wf;Ve.Conversations=dy;Ve.Evals=hy;Ve.Containers=uy;Ve.Videos=UA;function m4(){const[t,e]=j.useState(null),[n,s]=j.useState([]),[a,l]=j.useState(!1),[c,d]=j.useState(""),[f,h]=j.useState("");Is();let p=[];j.useEffect(()=>{if(!$e.projectId&&($e.projectId=localStorage.getItem("projectId"),!$e.projectId)){e("ID");return}ke.from("movie_eps").select("*").eq("project_id",$e.projectId).order("index",{ascending:!0}).then(({data:R,error:$})=>{if($){e($.message);return}s(R),console.log(R)}),ke.from("LLM").select("*").eq("provider_name","deepseek").single().then(({data:R,error:$})=>{if($){e($.message);return}console.log("deepseekProvider ",R),$e.deepseekProvider=R})},[]);const g=async()=>{let{data:R,error:$}=await ke.from("embodys").select("id, name,type").eq("project_id",$e.projectId);if($){e($.message);return}console.log("embodyCache ",R),p=[],R.forEach(L=>{p.push({id:L.id,name:L.name,type:L.type})}),$e.embodyCache=R.reduce((L,X)=>({...L,[X.id]:X}),{})},v=()=>{l(!0)},_=()=>{if(!f.trim()){e("");return}const R=document.createElement("input");R.type="file",R.accept=".json",R.onchange=x,R.click()},x=R=>{const $=R.target.files[0];if($){const L=new FileReader;L.readAsText($,"utf-8"),L.onload=X=>{const F=X.target.result;try{const H=JSON.parse(F);console.log(H),C(H)}catch(H){console.error("JSON :",H)}}}},w=R=>{$e.ep_id=R,localStorage.setItem("epId",R),Xt.emit("changeEditorMode","shot")},S=()=>{l(!1),d(""),h(""),e(null)},[A,N]=j.useState(!1),E=async(R,$)=>{const L=[...$,R];let X=[];for(let F of L){let H=p.find(W=>W.name===F);if(H)X.push(H.id);else{const{data:W,error:I}=await ke.from("embodys").insert([{project_id:$e.projectId,name:F,type:"character"}]).select("id, name,type").single();if(I){e(I.message);return}X.push(W.id),p.push(W)}}return X},C=async R=>{N(!0);try{const{data:$,error:L}=await ke.from("movie_eps").insert([{project_id:$e.projectId,title:R.episode_name,description:R.description,index:parseInt(f)}]).select("*").single();if(L)throw L;if(R.sc&&Array.isArray(R.sc))for(let X=0;X<R.sc.length;X++){const F=R.sc[X],{data:H,error:W}=await ke.from("movie_scs").insert([{ep_id:$.id,name:F.scene_name,description:F.description,index:X+1}]).select("*").single();if(W){console.error(":",W),N(!1);continue}if(console.log(` ${F.scene_name} `),F.seq)for(let I=0;I<F.seq.length;I++){const V=F.seq[I],{data:U,error:z}=await ke.from("movie_seqs").insert([{sc_id:H.id,name:V.sequence_name,index:I+1}]).select("*").single();if(z){console.error(":",z),N(!1);continue}console.log(` ${V.sequence_name} ${V.shots.length}  ${U.id}`);for(let q=0;q<V.shots.length;q++){const B=V.shots[q],{data:G,error:D}=await ke.from("movie_shots").insert([{seq_id:U.id,description:B.description,index:q+1,prompt:B.prompt,duration:parseFloat(B.duration),dialogue:B.dialogue,embodys:await E(B.scene,B.embodys)}]).select("*").single()}}}s([...n,$]),S(),await g()}catch($){e(": "+$.message)}finally{N(!1)}},O=async()=>{if(await g(),!f.trim()){e("");return}const R=parseInt(f);if(n.find(L=>L.index===R)){e(`${R}`);return}N(!0),e(null);try{let L=!1,X={};if(!L){const H=await(await fetch("./test_story.json",{})).json();console.log("testData:",H),X=H}return}catch(L){e(": "+L.message)}finally{N(!1)}},k=async R=>{try{const{error:$}=await ke.from("movie_eps").delete().eq("id",R.id);if($)throw $;s(n.filter(L=>L.id!==R.id))}catch($){e(": "+$.message)}finally{}};return b.jsxs("div",{className:"ep-editor-container",children:[b.jsx("div",{className:"ep-editor-header",children:b.jsx("button",{className:"add-ep-button",onClick:v,children:"+ "})}),t&&b.jsx("div",{className:"error-message",children:b.jsx("p",{children:t})}),b.jsx("div",{className:"ep-list",children:n.length>0?n.map(R=>b.jsxs("div",{className:"ep-card",onClick:()=>w(R.id),children:[b.jsx("div",{className:"ep-thumbnail",children:R.pic?b.jsx("img",{src:R.pic,alt:R.title}):b.jsx("span",{children:""})}),b.jsxs("div",{className:"ep-content",children:[b.jsx("h3",{className:"ep-title",children:R.title||`EP ${R.index||""}`}),b.jsx("p",{className:"ep-description",children:R.description||""}),b.jsxs("div",{className:"ep-info",children:[b.jsxs("span",{children:["",R.index||"?",""]}),b.jsx("span",{children:R.created_at?new Date(R.created_at).toLocaleDateString():""})]})]}),b.jsx("div",{className:"delete-ep-button",children:b.jsx("button",{onClick:$=>{$.stopPropagation(),k(R)},children:""})})]},R.id)):b.jsxs("div",{className:"empty-state",children:[b.jsx("h3",{children:""}),b.jsx("p",{children:'""'})]})}),a&&b.jsx("div",{className:"modal-overlay",onClick:S,children:b.jsxs("div",{className:"modal-content",onClick:R=>R.stopPropagation(),children:[b.jsxs("div",{className:"modal-header",children:[b.jsx("h3",{children:""}),b.jsx("button",{className:"close-button",onClick:S,children:""})]}),t&&b.jsx("div",{className:"error-message",children:b.jsx("p",{children:t})}),b.jsxs("div",{className:"form-group",children:[b.jsx("label",{htmlFor:"ep-number",children:" *"}),b.jsx("input",{id:"ep-number",type:"number",value:f,onChange:R=>{const $=parseInt(R.target.value),L=n.find(X=>X.index===$);console.log(L),L!=null?e(`${$}`):e(null),h(R.target.value)},placeholder:"",min:"1",required:!0})]}),b.jsxs("div",{className:"form-group",children:[b.jsx("label",{htmlFor:"ep-description",children:" *"}),b.jsx("textarea",{id:"ep-description",value:c,onChange:R=>d(R.target.value),placeholder:"",rows:"18"})]}),b.jsxs("div",{className:"modal-actions",children:[b.jsx("button",{className:"cancel-button",onClick:_,disabled:A,children:""}),b.jsx("button",{className:"cancel-button",onClick:S,children:""}),b.jsx("button",{className:"save-button",onClick:O,disabled:A,children:A?"...":""})]})]})})]})}function p4(){const[t,e]=j.useState(""),[n,s]=j.useState("script"),[a,l]=j.useState(""),[c,d]=j.useState(null),f=Is();return j.useEffect(()=>{if(!$e.projectId&&($e.projectId=localStorage.getItem("projectId"),!$e.projectId)){d("ID"),l("// : ID");return}Xt.emit("StartEditorMode"),ke.from("projects").select("*").eq("id",$e.projectId).single().then(({data:h,error:p})=>{p?(console.error(":",p),d(""),l("// : ")):(console.log(h),e(h.name||""))}),Xt.on("changeEditorMode",h=>{s(h)}),ke.from("embodys").select("*").eq("project_id",$e.projectId).then(({data:h,error:p})=>{p?(console.error(":",p),d(""),l("// : ")):$e.embodyCache=h.reduce((g,v)=>({...g,[v.id]:v}),{})})},[]),b.jsxs("div",{className:"editor-container",children:[c&&b.jsx("div",{className:"error-message",children:b.jsx("p",{children:c})}),b.jsxs("div",{className:"editor-header",children:[b.jsx("div",{className:"project_name",onClick:()=>{f("/dashboard"),Xt.emit("EndEditorMode"),$e.projectId=null},children:b.jsxs("h3",{children:["< ",t]})}),b.jsxs("div",{className:"editor-nav",children:[b.jsx("div",{className:`editor-nav-item ${n==="script"?"editor-nav-item-selected":""}`,onClick:()=>s("script"),children:""}),b.jsx("div",{className:`editor-nav-item ${n==="shot"?"editor-nav-item-selected":""}`,onClick:()=>s("shot"),children:""}),b.jsx("div",{className:`editor-nav-item ${n==="edit"?"editor-nav-item-selected":""}`,onClick:()=>s("edit"),children:""})]})]}),b.jsxs("div",{className:"editor-content",children:[n==="script"&&b.jsx(m4,{}),n==="shot"&&b.jsx(Z2,{}),n==="edit"&&b.jsx(oz,{})]})]})}function g4(){const[t,e]=j.useState([]),[n,s]=j.useState([]),[a,l]=j.useState([]),[c,d]=j.useState(""),[f,h]=j.useState("all"),[p,g]=j.useState(!0),[v,_]=j.useState(""),[x,w]=j.useState([]),[S,A]=j.useState(""),N=j.useRef(null),[E,C]=j.useState(null),[O,k]=j.useState({type:"",name:"",pic:"",description:""}),[R,$]=j.useState(!1),[L,X]=j.useState(!1),[F,H]=j.useState(!1),[W,I]=j.useState(!1),[V,U]=j.useState({project_id:$e.projectId||localStorage.getItem("projectId"),type:"scene",name:"",prompt:"",description:"",pic:""}),[z,q]=j.useState([]),[B,G]=j.useState([]);j.useEffect(()=>{const me=async()=>{if(!$e.projectId&&($e.projectId=localStorage.getItem("projectId"),!$e.projectId)){_("ID"),g(!1);return}g(!0),_("");try{console.log(" ID:",$e.projectId);const{data:ge}=await ke.from("embodys").select(`
                        *,
                        embody_images(*)
                    `).eq("project_id",$e.projectId);w(ge||[]),console.log(" :",ge||[])}catch(ge){console.error(":",ge),_("")}finally{g(!1)}};iE($e.projectId).then(ge=>{A(ge||"")}),me()},[R]);const D=(me,ge)=>{const Me=x.filter(ct=>ct.type===ge);if(c.trim()==="")return Me;const Pe=c.toLowerCase();return Me.filter(ct=>ct.name.toLowerCase().includes(Pe)||ct.description&&ct.description.toLowerCase().includes(Pe))},P=me=>{const ge=x.find(Me=>Me.id===me);ge&&(console.log(":",ge),C(me),k({id:ge.id,type:ge.type,name:ge.name||"",description:ge.description||"",prompt:ge.prompt||"",images:ge.embody_images||[]}))},Z=async()=>{if(E)try{console.log(":",E,O);const{error:me}=await ke.from("embodys").update({name:O.name,description:O.description,prompt:O.prompt}).eq("id",E);if(me){console.error(":",me),alert("");return}$(ge=>!ge),alert(""),C(null)}catch(me){console.error(":",me),alert("")}},K=async()=>{try{const me=O.type==="scene"?"":O.type==="character"?"":"",ge=O.name||`${me}`;alert("..."),await new Promise(Pe=>setTimeout(Pe,1e3));let Me="";O.type==="scene"?Me=`${ge}8K`:O.type==="character"?Me=`${ge}8K`:Me=`${ge}3D8K`,k({...O,prompt:Me}),alert("")}catch(me){console.error(":",me),alert("")}},re=()=>{N.current.click()},ee=async me=>{const ge=Array.from(me.target.files);if(ge.length>0){I(!0),console.log("Selected file:",ge),ge.forEach((ut,nn)=>{console.log(":",ut)}),console.log(O);let Me=ge.map(async(ut,nn)=>{const It=Date.now(),dt=ut.name.split(".").pop()||"",rn=`public/${$e.projectId}/${O.type}/${It}_${nn}${dt?"."+dt:""}`;console.log(":",rn);const{data:Bt,error:jt}=await ke.storage.from("embodys").upload(rn,ut,{cacheControl:"3600",upsert:!1});if(jt)throw console.error(":",jt),new Error(": "+jt.message);const{data:fe,error:_e}=await ke.from("embody_images").insert({description:V.description,path:rn,ref_id:O.id}).select("id, path").single();if(_e)throw console.error("embody_images:",_e),new Error("embody_images: "+_e.message);return console.log(":",fe),{insertedDataId:fe.id,fileName:rn}});const Pe=await Promise.all(Me);let ct=Pe.map(ut=>ut.insertedDataId),ln=Pe.map(ut=>({path:ut.fileName}));console.log("IDs:",ct),console.log(":",ln),k({...O,images:ln}),I(!1),$(!R)}},oe=async()=>{try{if(!O.prompt){alert("");return}alert("..."),await new Promise(me=>setTimeout(me,2e3)),alert(`
AI`)}catch(me){console.error(":",me),alert("")}},ce=async()=>{if(H(!0),!V.name.trim()){alert(""),H(!1);return}if(!V.prompt.trim()){alert(""),H(!1);return}if(!V.description.trim()){alert(""),H(!1);return}if(!V.project_id&&(V.project_id=$e.projectId||localStorage.getItem("projectId"),!V.project_id)){alert("ID"),X(!1);return}console.log("formData:",V);const me={name:V.name,type:V.type,prompt:V.prompt,description:V.description,project_id:V.project_id},{data:ge,error:Me}=await ke.from("embodys").insert(me).select("id,name").single();if(Me)throw console.error(":",Me),Me;console.log(":",ge);try{let Pe=[],ct=[];if(z.length>0){const ut=z.map(async(It,dt)=>{const rn=Date.now(),Bt=It.name.split(".").pop()||"",jt=`public/${V.project_id}/${V.type}s/${rn}_${dt}${Bt?"."+Bt:""}`;console.log(":",jt);const{data:fe,error:_e}=await ke.storage.from("embodys").upload(jt,It,{cacheControl:"3600",upsert:!1});if(_e)throw console.error(":",_e),new Error(": "+_e.message);const{data:Ae,error:Le}=await ke.from("embody_images").insert({description:V.description,path:jt,ref_id:ge.id}).select("id, path").single();if(Le)throw console.error("embody_images:",Le),new Error("embody_images: "+Le.message);return console.log(":",Ae),{insertedDataId:Ae.id,fileName:jt}}),nn=await Promise.all(ut);Pe=nn.map(It=>It.insertedDataId),ct=nn.map(It=>It.fileName),console.log("IDs:",Pe),console.log(":",ct)}const ln={...V};$(ut=>!ut),H(!1),X(!1),U({project_id:$e.projectId||localStorage.getItem("projectId"),type:"scene",name:"",prompt:"",description:"",pic:""}),q([]),G([]),document.getElementById("embody-file")&&(document.getElementById("embody-file").value=""),alert("")}catch(Pe){console.error(":",Pe),alert(""+(Pe.message||""))}},he=async(me,ge)=>{if(window.confirm(`${ge==="scene"?"":ge==="character"?"":""}`)){try{let Me;switch(ge){case"scene":Me="scenes";break;case"character":Me="characters";break;case"item":Me="items";break;default:return}const{error:Pe}=await ke.from("embodys").delete().eq("id",me);if(Pe)throw Pe;alert("")}catch(Me){console.error(":",Me),alert("")}fetchEmbodyData()}},xe=(()=>{const me=x.filter(Pe=>Pe.type==="scene").length,ge=x.filter(Pe=>Pe.type==="character").length,Me=x.filter(Pe=>Pe.type==="item").length;return{scene:me,character:ge,item:Me,all:me+ge+Me}})(),ve=D(t,"scene"),Ce=D(n,"character"),ze=D(a,"item");return b.jsxs("div",{className:"embody-container",children:[b.jsxs("div",{className:"embody-left-panel",children:[b.jsxs("div",{className:"embody-header",children:[b.jsxs("div",{className:"header-left",children:[b.jsx("h2",{children:""}),b.jsxs("p",{className:"total-count",children:[S," -  ",xe.all," "]})]}),b.jsxs("div",{className:"header-right",children:[b.jsx("input",{type:"file",multiple:!0,ref:N,style:{display:"none"},onChange:ee}),b.jsx("div",{className:"search-bar",children:b.jsx("input",{type:"text",placeholder:"...",value:c,onChange:me=>d(me.target.value)})})]})]}),b.jsxs("div",{className:"category-filter",children:[b.jsxs("button",{className:`filter-btn ${f==="all"?"active":""}`,onClick:()=>h("all"),children:[" (",xe.all,")"]}),b.jsxs("button",{className:`filter-btn ${f==="scene"?"active":""}`,onClick:()=>h("scene"),children:[" (",xe.scene,")"]}),b.jsxs("button",{className:`filter-btn ${f==="character"?"active":""}`,onClick:()=>h("character"),children:[" (",xe.character,")"]}),b.jsxs("button",{className:`filter-btn ${f==="item"?"active":""}`,onClick:()=>h("item"),children:[" (",xe.item,")"]}),b.jsx("button",{onClick:()=>X(!0),className:"add-embody-btn",children:""})]}),b.jsx("div",{className:"embody-content",children:p?b.jsxs("div",{className:"loading-container",children:[b.jsx("div",{className:"loading-spinner"}),b.jsx("p",{children:"..."})]}):v?b.jsxs("div",{className:"error-container",children:[b.jsx("p",{className:"error-message",children:v}),b.jsx("button",{className:"retry-btn",onClick:fetchEmbodyData,children:""})]}):b.jsxs(b.Fragment,{children:[(f==="all"||f==="scene")&&ve.length>0&&b.jsxs("div",{className:"category-section",children:[b.jsx("h3",{className:"section-title",children:""}),b.jsx("div",{className:"card-grid",children:ve.map(me=>b.jsx(ad,{id:me.id,type:"scene",name:me.name,pic:me.embody_images,description:me.description,onEdit:()=>P(me.id),onDelete:()=>he(me.id,"scene")},me.id))})]}),(f==="all"||f==="character")&&Ce.length>0&&b.jsxs("div",{className:"category-section",children:[b.jsx("h3",{className:"section-title",children:""}),b.jsx("div",{className:"card-grid",children:Ce.map(me=>b.jsx(ad,{id:me.id,type:"character",name:me.name,pic:me.embody_images,description:me.description,onEdit:()=>P(me.id),onDelete:()=>he(me.id,"character")},me.id))})]}),(f==="all"||f==="item")&&ze.length>0&&b.jsxs("div",{className:"category-section",children:[b.jsx("h3",{className:"section-title",children:""}),b.jsx("div",{className:"card-grid",children:ze.map(me=>b.jsx(ad,{id:me.id,type:"item",name:me.name,pic:me.embody_images,description:me.description,onEdit:()=>P(me.id),onDelete:()=>he(me.id,"item")},me.id))})]}),(f==="all"&&xe.all===0||f==="scene"&&ve.length===0||f==="character"&&Ce.length===0||f==="item"&&ze.length===0)&&b.jsx("div",{className:"empty-container",children:b.jsx("p",{children:""})})]})})]}),b.jsx("div",{className:"embody-right-panel",children:E?b.jsxs("div",{className:"edit-panel",children:[b.jsxs("div",{className:"form-group",children:[b.jsx("label",{htmlFor:"edit-name",children:""}),b.jsx("input",{id:"edit-name",type:"text",value:O.name,onChange:me=>k({...O,name:me.target.value}),placeholder:""})]}),b.jsxs("div",{className:"form-group",children:[b.jsx("label",{htmlFor:"edit-description",children:""}),b.jsx("textarea",{id:"edit-description",value:O.description,onChange:me=>k({...O,description:me.target.value}),placeholder:"",rows:"3"})]}),b.jsxs("div",{className:"form-group",children:[b.jsx("label",{htmlFor:"edit-prompt",children:""}),b.jsx("textarea",{id:"edit-prompt",value:O.prompt,onChange:me=>k({...O,prompt:me.target.value}),placeholder:"AI",rows:"4"}),b.jsx("button",{className:"prompt-generate-btn",onClick:K,children:""})]}),b.jsx("div",{className:"form-group",children:b.jsx("div",{className:"edit-preview-image-container",children:O.images.map((me,ge)=>b.jsx("img",{src:ka+me.path,alt:O.name},ge))})}),b.jsx("button",{disabled:W,className:"",onClick:re,children:W?"":""}),b.jsx("button",{className:"generate-image-btn",onClick:oe,children:"AI"}),b.jsx("button",{className:"save-btn",onClick:Z,children:""}),b.jsx("button",{className:"cancel-btn",onClick:()=>C(null),children:""})]}):b.jsx("div",{className:"empty-edit-panel",children:b.jsx("p",{children:""})})}),L&&b.jsx("div",{className:"modal-overlay",onClick:()=>X(!1),children:b.jsxs("div",{className:"modal-content",onClick:me=>me.stopPropagation(),children:[b.jsxs("div",{className:"modal-header",children:[b.jsx("h3",{children:""}),b.jsx("button",{className:"close-btn",onClick:()=>X(!1),children:""})]}),b.jsxs("div",{className:"modal-body",children:[b.jsxs("div",{className:"form-group",children:[b.jsx("label",{htmlFor:"embody-type",children:""}),b.jsxs("select",{id:"embody-type",value:V.type,onChange:me=>U({...V,type:me.target.value}),children:[b.jsx("option",{value:"scene",children:""}),b.jsx("option",{value:"character",children:""}),b.jsx("option",{value:"item",children:""})]})]}),b.jsxs("div",{className:"form-group",children:[b.jsx("label",{htmlFor:"embody-name",children:""}),b.jsx("input",{type:"text",id:"embody-name",value:V.name,onChange:me=>U({...V,name:me.target.value}),placeholder:""})]}),b.jsxs("div",{className:"form-group",children:[b.jsx("label",{htmlFor:"embody-prompt",children:""}),b.jsx("textarea",{id:"embody-prompt",value:V.prompt,onChange:me=>U({...V,prompt:me.target.value}),placeholder:"",rows:"3"})]}),b.jsxs("div",{className:"form-group",children:[b.jsx("label",{htmlFor:"embody-description",children:""}),b.jsx("textarea",{id:"embody-description",value:V.description,onChange:me=>U({...V,description:me.target.value}),placeholder:"",rows:"4"})]}),b.jsxs("div",{className:"form-group",children:[b.jsx("label",{children:" ()"}),b.jsxs("div",{className:"file-upload-container",children:[b.jsx("input",{type:"file",id:"embody-file",accept:"image/*",multiple:!0,onChange:me=>{const ge=Array.from(me.target.files);q(ge);const Me=ge.map(Pe=>URL.createObjectURL(Pe));G(Me)},style:{display:"none"}}),b.jsx("button",{type:"button",className:"file-upload-btn",onClick:()=>document.getElementById("embody-file").click(),children:z.length>0?`${z.length} `:""}),B.length>0&&b.jsx("div",{className:"image-previews",children:B.map((me,ge)=>b.jsxs("div",{className:"image-preview",children:[b.jsx("img",{src:me,alt:` ${ge+1}`}),b.jsx("button",{type:"button",className:"remove-image-btn",onClick:()=>{const Me=[...z];Me.splice(ge,1),q(Me);const Pe=[...B];Pe.splice(ge,1),G(Pe)},children:""})]},ge))})]})]})]}),b.jsxs("div",{className:"modal-footer",children:[b.jsx("button",{className:"cancel-btn",onClick:()=>X(!1),children:""}),b.jsx("button",{disabled:F,className:"save-btn",onClick:()=>ce(),children:F?"":""})]})]})})]})}function y4(){const[t,e]=j.useState(null),[n,s]=j.useState(!1),[a,l]=j.useState("");j.useEffect(()=>{const d=async()=>{const{data:{user:h}}=await ke.auth.getUser();e(h)},{data:f}=ke.auth.onAuthStateChange((h,p)=>{e(p?.user||null)});return d(),Xt.on("StartEditorMode",()=>{console.log(":"),c(!0)}),Xt.on("EndEditorMode",()=>{console.log(""),c(!1)}),Xt.on("showLargeImageModal",h=>{s(!0),l(h)}),()=>{}},[]);function c(d){const f=document.documentElement;d?(f.style.setProperty("--left-panel-width","40px"),f.style.setProperty("--logo-text-display","none")):(f.style.setProperty("--left-panel-width","200px"),f.style.setProperty("--logo-text-display","block"))}return c(!0),b.jsxs(hR,{children:[b.jsxs("div",{className:"layout-container",children:[b.jsxs("div",{className:"left-panel",children:[b.jsxs(vi,{to:"/",className:"home-logo",children:[b.jsx("img",{className:"home-logo-img",src:"./vite.svg",alt:"home"}),b.jsx("p",{className:"home-logo-text",children:"AI"})]}),b.jsxs("div",{className:"nav-items",children:[b.jsxs(vi,{to:"/dashboard",className:"nav-item",title:"",children:[b.jsx("img",{className:"nav-item-icon",src:"./home.png",alt:""}),b.jsx("span",{children:""})]}),b.jsxs(vi,{to:"/embody",className:"nav-item",title:"",children:[b.jsx("img",{className:"nav-item-icon",src:"./layers.png",alt:""}),b.jsx("span",{children:"  "})]})]}),b.jsx(Y2,{})]}),b.jsx("div",{className:"right-panel",children:b.jsxs(VO,{children:[b.jsx(Ms,{path:"/",element:b.jsx(J2,{})}),b.jsx(Ms,{path:"/editor",element:b.jsx(p4,{})}),b.jsx(Ms,{path:"/embody",element:b.jsx(g4,{})}),b.jsx(Ms,{path:"/login",element:b.jsx(G2,{})}),b.jsx(Ms,{path:"/register",element:b.jsx(X2,{})}),b.jsx(Ms,{path:"/dashboard",element:b.jsx(Q2,{})}),b.jsx(Ms,{path:"/profile",element:b.jsx(W2,{})})]})})]}),n&&b.jsxs("div",{className:"large-image-modal",children:[b.jsx("img",{src:a,alt:"Large Character Preview"}),b.jsx("button",{onClick:()=>s(!1),children:""})]})]})}eO.createRoot(document.getElementById("root")).render(b.jsx(j.StrictMode,{children:b.jsx(y4,{})}));
